# reveal Documentation
Generated from: reveal



<!-- SOURCE_START: reveal/.devcontainer\README.md -->
## File: reveal/.devcontainer\README.md

# Devcontainer setup for Reveal

This devcontainer setup can be utilized in various ways to make it easier to get a development environment for Reveal.

One way is with Visual Studio Code - Remote containers, which will run installation of all Reveal pre-requisites, and allow development of it inside Docker on your machine.
You need to have Docker and VSCode installed on your machine.

1. Open VSCode
1. Press Ctrl+Shift-P (or the green "Remote window" in the lower left corner of VSCode)
1. Choose "Clone repository in container volume"
1. Choose "Clone a repository from Github in a Container volume"
1. Type "cognitedata/reveal"
1. Choose "master" branch (or any other branch)

A new VSCode window should now be opened, and it should start up the devcontainer. You can see the logs by clicking the notification dialog in the lower right.
Please see <https://marketplace.visualstudio.com/items?itemName=ms-vscode-remote.remote-containers> for more instructions.

Once the devcontainer startup is done, open a new terminal, and follow the build steps as explained in the main README.md for Reveal, running yarn build steps.

If you have a [Github Codespaces](https://github.com/features/codespaces) account, you should be able to load the devcontainer there as well.


<!-- SOURCE_END: reveal/.devcontainer\README.md -->

================================================================================


<!-- SOURCE_START: reveal/.gemini\styleguide.md -->
## File: reveal/.gemini\styleguide.md

# Code Best Practices

## Scope Note
Unless otherwise specified, these rules apply to all code changes in the repository. The rules under "Mocking Practices" are specifically limited to files within the `react-components/` directory.

---

## 1. Mocking Practices (React-Components Scope)

### Rule: Avoid 'vi.mock' for Module Mocks
- **Scope:** This rule ONLY applies to files located within the `react-components/` directory and its subdirectories (e.g., test files).
- **Guidance:** In files under `react-components/`, DO NOT use the global `vi.mock` function. This often leads to unnecessary global state and confusion, especially in a modular component library.
- **Action:** Flag any usage of `vi.mock` that occurs in files under the `react-components/` path.

### Rule: Avoid 'vi.mocked'
- **Scope:** This rule ONLY applies to files located within the `react-components/` directory and its subdirectories.
- **Guidance:** In files under `react-components/`, DO NOT use the `vi.mocked` helper. Prefer using explicitly defining the type of the mock object for clearer intent.
- **Action:** Flag any usage of `vi.mocked` that occurs in files under the `react-components/` path.

---

## 2. TypeScript Type Safety (Global Scope)

### Rule: Avoid Explicit Type Casting using "as any"
- **Guidance:** Explicit type casting to `as any` bypasses TypeScript's type checking system and introduces potential runtime errors. This practice should be strictly avoided as it sacrifices type safety.
- **Preferred Alternative:** Find the correct type, use utility types like `Partial<T>` or `Omit<T, K>`, or use a type assertion to a more specific type if you are certain of the type (e.g., `as T`).
- **Action:** Flag any occurrence of the `as any` pattern in the codebase.

### Rule: Avoid Double Type Casting: "as unknown as SomeType"
- **Guidance:** Using the pattern **`as unknown as SomeType`** is a red flag that forces a type assignment. It is often used to silence the compiler when a genuine type mismatch issue exists. This practice must be avoided.
- **Preferred Alternative:** Use proper runtime validation (e.g., with a validation library) to assert the type correctly, or fix the source of the type mismatch.
- **Action:** Flag any occurrence of the sequential cast pattern **`as unknown as`** in the codebase.

### Rule: Avoid Variables Defined as "any" Type
- **Guidance:** Variables, function arguments, or return types explicitly defined as `any` defeat the purpose of using TypeScript. This should be avoided to maintain strong type safety across the application.
- **Preferred Alternative:** Always define a specific type, even if it requires creating a new interface or type. Use `unknown` or `T` where the type cannot be determined.
- **Action:** Flag any declaration where a variable, parameter, or return type is explicitly set to the `any` keyword.


<!-- SOURCE_END: reveal/.gemini\styleguide.md -->

================================================================================


<!-- SOURCE_START: reveal/.github\pull_request_template.md -->
## File: reveal/.github\pull_request_template.md

#### Type of change
<!-- Please delete options that are not relevant. -->
![Feat](https://img.shields.io/badge/Type-Feat-green)  <!-- new feature for the user, not a new feature for build script -->
![Bug](https://img.shields.io/badge/Type-Bug-red) <!-- bug fix for the user, not a fix to a build script -->
![Test](https://img.shields.io/badge/Type-Test-blueviolet) <!-- adding missing tests, refactoring tests; no production code change -->
![Docs](https://img.shields.io/badge/Type-Docs-blue) <!--changes to the documentation -->
![Style](https://img.shields.io/badge/Type-Style-blue) <!-- formatting, missing semi colons, etc; no production code change -->
![Refactor](https://img.shields.io/badge/Type-Refactor-lightgrey) <!-- refactoring production code, eg. renaming a variable -->
![Chore](https://img.shields.io/badge/Type-Chore-lightgrey) <!-- updating grunt tasks etc; no production code change -->

#### Jira ticket :blue_book:
<!--(mention JIRA ticket/s)-->

https://cognitedata.atlassian.net/browse/

## Description :pencil:
<!---
- Describe your changes in detail.
- Why is this change required?
- What problem does it solve?
- List any related PRs
-->

## How has this been tested? :mag:

<!---
- Describe the tests that you ran to verify your changes.
- Provide instructions so we can reproduce.
- Also list any relevant details for your test configuration.
-->


## Test instructions :information_source:

<!---
- Describe steps to try/test the suggested changes
-->


## Checklist :ballot_box_with_check:

<!---
- Here is a checklist that should completed before merging this given feature.
- Any shortcomings from the items below should be explained and detailed within the contents of this PR.
-->

- [ ] I am happy with this implementation.
- [ ] I have performed a self-review of my own code.
- [ ] I have added unit and visuals tests to prove that my feature works to the best of my ability.
- [ ] I have added documentation to new and changed elements; both public and internally shared ones
- [ ] I have refactored the code for testability, readability and extendibility to the best of my ability.
- [ ] I have listed the JIRA tasks covering remaining work or tech debt related to this PR in the description.


<!-- SOURCE_END: reveal/.github\pull_request_template.md -->

================================================================================


<!-- SOURCE_START: reveal/CODE_OF_CONDUCT.md -->
## File: reveal/CODE_OF_CONDUCT.md

This project is governed by the Contributor Covenant version 1.4
(https://www.contributor-covenant.org/version/1/4/code-of-conduct.html).

All contributors and participants agree to abide by its terms.

To report violations, send an email to dragly@cognite.com.


<!-- SOURCE_END: reveal/CODE_OF_CONDUCT.md -->

================================================================================


<!-- SOURCE_START: reveal/documentation\docs\api_readme.md -->
## File: reveal/documentation\docs\api_readme.md

`@cognite/reveal` supports `Node16` [module resolution](https://www.typescriptlang.org/tsconfig#moduleResolution), and if enabled in the consuming application will expose three modules:
- [@cognite/reveal](/api/@cognite/reveal/index.md) is the main module and has the main entry point of Reveal, [`Cognite3DViewer`](/api/@cognite/reveal/classes/Cognite3DViewer.md). CAD models are represented by [`CogniteCadModel`](/api/@cognite/reveal/classes/CogniteCadModel.md) and points clouds by [`CognitePointCloudModel`](/api/@cognite/reveal/classes/CognitePointCloudModel.md).
- [@congite/reveal/tools](/api/@cognite/reveal/tools/index.md) contains a set of tools, e.g. [`AxisViewTool`](/api/@cognite/reveal/tools/classes/AxisViewTool.md), [`TimelineTool`](/api/@cognite/reveal/tools/classes/TimelineTool.md), and [`HtmlOverlayTool`](/api/@cognite/reveal/tools/classes/HtmlOverlayTool.md) that works with `Cognite3DViewer`.
- [@cognite/reveal/extensions/datasource](/api/@cognite/reveal/extensions/datasource/index.md) allows providing custom data sources for geometry and model metadata.

:::note
If the consuming application does not enable `Node16` module resolution, then all types must be imported from `@cognite/reveal`.
:::


<!-- SOURCE_END: reveal/documentation\docs\api_readme.md -->

================================================================================


<!-- SOURCE_START: reveal/documentation\docs\concepts.md -->
## File: reveal/documentation\docs\concepts.md

---
id: concepts
title: Concepts
description: This page explains some basic concepts implemented by Reveal.
---

This page explains some basic concepts implemented by Reveal.

## CAD model structure

CAD models are typically structured in a tree structure, where larger components or groups of components are located near the root and individual pieces of equipment are located in near the leaf nodes. The hierarchy is defined by the source model and is processed and stored in CDF for efficient lookup and traversal. In Reveal, each of the nodes in the tree is called a "3D node". Each of the 3D nodes can have associated properties defined by the source model. Note that not all 3D nodes will contain geometry - in fact in most models only leaf nodes will contain geometry.

### Tree indices and node IDs

When processing 3D models in CDF, two IDs associated with each 3D node; tree index and node ID.

Tree indices are running numbers starting at 0 at the root 3D node increased by one for each traversed node. Node IDs are generated based on the name and placement in the node hierarchy. Node IDs are considered stable as long as the placement in the hierarchy is unchanged, while tree indices are not. For this reason, [Asset Mappings](https://docs.cognite.com/api/v1/#tag/3D-Asset-Mapping) are based on node IDs.

Reveal provides functionality for mapping between the two concepts by using `CogniteCadModel.mapNodeIdsToTreeIndices` and `CogniteCadModel.mapTreeIndicesToNodeIds`. Note however that these functions can be slow.


<!-- SOURCE_END: reveal/documentation\docs\concepts.md -->

================================================================================


<!-- SOURCE_START: reveal/documentation\docs\examples\antialiasing.mdx -->
## File: reveal/documentation\docs\examples\antialiasing.mdx

---
id: antialiasing
title: Enabling anti-aliasing
description: Shows the effects of the different anti-aliasing approaches supported by Reveal
---

import useBaseUrl from '@docusaurus/useBaseUrl';


Anti-aliasing is a technique to reduce the aliasing effects in the rendered result, and improves visual quality.

Reveal supports several anti-aliasing modes:
- [Fast approximate anti-aliasing (FXAA)](https://en.wikipedia.org/wiki/Fast_approximate_anti-aliasing) - a fast 
technique that reduces anti-aliasing at modest cost.
- [Multi-sample anti-antialiasing (MSAA)](https://en.wikipedia.org/wiki/Multisample_anti-aliasing) - hardware supported
supersampling technique. This produces high-quality anti-aliasing at some performance cost depending on how many samples
is taken per output pixel. Reveal supports 4, 8 or 16 samples. This mode is only supported on WebGL 2 (currently this 
means desktop computers, most Android devices, but not iOS - see [caniuse.com](https://caniuse.com/webgl2)).
- MSAA + FXAA - a combination of both modes where an FXAA pass is performed after the MSAA pass.
- Disabled - no anti-aliasing.

<a target='_blank' href={useBaseUrl('/img/antialias-comparison.png')}>
  <img src={useBaseUrl('/img/antialias-comparison.png')} alt="Comparison of different anti-aliasing techniques" />
</a>
It might be hard to notice the difference in a scaled image, click the image to open the full resolution image.

By default [Fast approximate anti-aliasing (FXAA)](https://en.wikipedia.org/wiki/Fast_approximate_anti-aliasing) is used.
This mode works on both WebGL 1 and WebGL 2. If WebGL 2 isn't supported, FXAA is used as a fallback.


```jsx
const viewer = new Cognite3DViewer(
  { 
    sdk: client, 
    antiAliasingHint: 'msaa4+fxaa' 
  });
```

Modes currently supported are `'disabled'`, `'fxaa'`, `'msaa2+fxaa'`, `'msaa4+fxaa'`, `'msaa8+fxaa'`, `'msaa16+fxaa'`,
`'msaa2'`, `'msaa4'`, `'msaa8'` and `'msaa16'`.

:::note
The examples in this documentation use `msaa4+fxaa`.
:::

<!-- SOURCE_END: reveal/documentation\docs\examples\antialiasing.mdx -->

================================================================================


<!-- SOURCE_START: reveal/documentation\docs\examples\axisviewtool.mdx -->
## File: reveal/documentation\docs\examples\axisviewtool.mdx

---
id: axisviewtool
title: Axis cross tool
description: Axis cross tool to show orientation of the model.
---

import { DemoWrapper } from '@site/docs/components/DemoWrapper';
import useBaseUrl from '@docusaurus/useBaseUrl';

To effectivly navigate a 3D model it is often useful to have an helper to show the orientation of the model. The `AxisViewTool` is
a configurable overlay that shows the current orientation of the model. It also reacts to clicks, orienting the camera to face
clicked.

<img src={useBaseUrl('/img/axisviewtool.png')} alt="AxisViewTool" />

The appearance of the tool is highly configurable, with options to set:
- Background color of each face of the orientation box
- Labels, font size and font color of each face
- Outline width and color of each face
- Compass north-orientation, label, font color and size
- Compass tick color
- Animation speed when clicking a face of the orientation box
- Size and padding
- Position - either absolute, or relative to a corner of the viewer

<DemoWrapper />

## Basic example

By default, the axis tool will be placed in the lower right corner
of the viewer, and initialization is very easy:

```jsx runnable
// import { AxisViewTool } from '@cognite/reveal';

new AxisViewTool(viewer);
```

## Customize axis cross position

It is possible to specify a custom position for the axis tool.
Position can be specified using either `RelativePosition` or `AbsolutePosition`.
Using `AbsolutePosition` will position the axis cross at a specific position within the canvas of the viewer.

:::note
The Y axis is positive upwards, meaning that 0 is at the bottom of the viewer.
:::

```jsx runnable
// import { AxisViewTool } from '@cognite/reveal';

new AxisViewTool(viewer, {
  position: {
    xAbsolute: viewer.domElement.clientWidth / 2 - 64,
    yAbsolute: 10
  },
  size: 128
});
```



Using `RelativePosition` will position the axis cross relative to a specific corner (will also handle screen resize).

```jsx runnable
// import { AxisViewTool, Corner } from '@cognite/reveal';

const axisConfig = {
  position: {
    corner: Corner.TopRight,
    padding: new THREE.Vector2(50, 50)
  }
};
new AxisViewTool(viewer, axisConfig);
```

## Customize axis cross size and animation speed

When clicking a face of the orientation box, the camera will move to face the respective direction.
The animation speed of this movement can be configured. Size of the axis tool is also configurable.


```jsx runnable
// import { AxisViewTool } from '@cognite/reveal';

const axisConfig = {
  animationSpeed: 2000, // Suuuuuper-slow
  size: 256 // In pixels
};
new AxisViewTool(viewer, axisConfig);
```


## Customize orientation faces

Each of the faces of the orientation box can be styled.

```jsx runnable
// import { AxisViewTool } from '@cognite/reveal';

const axisConfig = {
  faces: {
    xNegativeFace: {
      label: 'Left',
      fontColor: new THREE.Color('white'),
      faceColor: new THREE.Color(0x660000)
    },
    xPositiveFace: {
      label: 'Right',
      fontColor: new THREE.Color('white'),
      faceColor: new THREE.Color(0x660000)
    },
    yNegativeFace: {
      label: 'Down',
      fontColor: new THREE.Color('white'),
      faceColor: new THREE.Color(0x006600)
    },
    yPositiveFace: {
      label: 'Top',
      fontColor: new THREE.Color('white'),
      faceColor: new THREE.Color(0x006600)
    },
    zNegativeFace: {
      label: 'Back',
      fontColor: new THREE.Color('white'),
      faceColor: new THREE.Color(0x000066)
    },
    zPositiveFace: {
      label: 'Front',
      fontColor: new THREE.Color('white'),
      faceColor: new THREE.Color(0x000066)
    }
  }
};
new AxisViewTool(viewer, axisConfig);
```

In addition to the settings demonstrated above, the following settings can be set:
- `fontSize` - size of the label font. Automatically determined when undefined
- `outlineColor` - color of the outline of each of the faces
- `outlineSize` - width of the outline. Automatically determine when undefined

## Customize compass

The compass at the base can be customized to change the orientation label (which
defaults to N for North), font color and size and tick color.


```jsx runnable
// import { AxisViewTool } from '@cognite/reveal';

const axisConfig = {
  compass: {
    ringLabel: 'S',
    labelDelta: 0, // Place at South
    fontColor: new THREE.Color('white'),
    tickColor: new THREE.Color('white')
  }
};
new AxisViewTool(viewer, axisConfig);
```


<!-- SOURCE_END: reveal/documentation\docs\examples\axisviewtool.mdx -->

================================================================================


<!-- SOURCE_START: reveal/documentation\docs\examples\cad-2doverlay.mdx -->
## File: reveal/documentation\docs\examples\cad-2doverlay.mdx

---
id: cad-2doverlay
title: HTML overlays
description: Demo shows how to add an HTML overlay over 3D objects.
---

import { DemoWrapper } from '@site/docs/components/DemoWrapper';
import useBaseUrl from '@docusaurus/useBaseUrl';

A common requirement for a 3D application is to add information overlays hovering over 3D objects
to provide details or draw the attention to a given point. This can be done by placing HTML elements over the 3D canvas
that follows the object it's attached to. `HtmlOverlayTool` is a convinience tool to manage overlays. The tool
also supports "clustering", i.e. that overlapping elements are combined into a single element to avoid clustering.

Note that these overlays always will be placed on top of the 3D viewer, they will not be hidden when the object is
obscured by other objects. To achieve this it's necessary to use custom 3D objects.

<DemoWrapper />

Attaching HTML elements to 3D objects/positions requires the following operations:

1. Create an HTML element and apply style `position: absolute` to the element. There also some other recommended
   styles that should be applied (see below).
2. Determine 3D world coordinate of the pivot point (e.g. using intersection when user clicks an object)
3. Attach overlay using `HtmlOverlayTool.add`.

This will attach the overlay to the 2D position corresponding to the 3D coordinate, then it will provide the updated
coordinate whenever navigating the viewer.

:::note
The following CSS style is recommended for overlays:
```css
position: absolute; /* Required */

/* Anchor to the center of the element and ignore events */
transform: translate(-50%, -50%);
pointer-events: none;
touch-action: none;
user-select: none;
```
:::

```jsx runnable
// import { HtmlOverlayTool } from '@cognite/reveal';

function createOverlay() {
  const element = document.createElement('div');
  element.innerText = `Overlay!`;
  element.style.cssText = `
    position: absolute;

    /* Anchor to the center of the element and ignore events */
    transform: translate(-50%, -50%);
    pointer-events: none;
    touch-action: none;
    user-select: none;

    /* Make it look nice */
    padding: 10px;
    minHeight: 50px;
    color: #fff;
    background: #232323da;
    borderRadius: 0.25em;
    border: '#ffffff22 solid 2px;
  `;
  return element;
}

// Attach overlay on click
const overlays = new HtmlOverlayTool(viewer);
viewer.on('click', async event => {
  // Find 3D coordinate of what the user clicks
  const intersection = await viewer.getIntersectionFromPixel(event.offsetX, event.offsetY);
  if (intersection) {
    const el = createOverlay();
    overlays.add(el, intersection.point);
    // Remove overlay after 5 seconds
    setTimeout(() => overlays.remove(el), 5000);
  }
});
```

It's also possible to apply styling based on the position of the
overlay, e.g. to vary the opacity of the overlay based on distance
from the camera. To do this, provide an `options`-argument with a
`positionUpdatedCallback` to `HtmlOverlayTool.add`. This
callback is triggered every time the HTML overlay is updated.

```js runnable
// import { HtmlOverlayTool } from '@cognite/reveal';

function createOverlay(pressure) {
  const color = pressure < 30 ? '#fff' : (pressure > 80 ? '#aa1100' : '#aaaa00');
  const element = document.createElement('div');
  element.innerText = `${pressure} PSI`;
  element.style.cssText = `
    position: absolute;

    /* Anchor to the center of the element and ignore events */
    transform: translate(-50%, -50%);
    pointer-events: none;
    touch-action: none;
    user-select: none;

    /* Make it look nice */
    padding: 10px;
    color: ${color};
    background: #232323da;
    borderRadius: 0.25em;
    border: '#ffffff22 solid 2px;
  `;
  return element;
}

const overlays = new HtmlOverlayTool(viewer);
viewer.on('click', async event => {
  // Find 3D coordinate of what the user clicks
  const intersection = await viewer.getIntersectionFromPixel(event.offsetX, event.offsetY);
  if (intersection) {
    const pressure = Math.floor(Math.random() * 110);
    const el = createOverlay(pressure);
    const options = {
      positionUpdatedCallback: (element, position2D, position3D, distanceToCamera, userData) => {
        // Compute opacity based on distance to camera
        const opacity = 0.3 + 0.7 * (1.0 - (Math.min(Math.max(distanceToCamera, 10), 110) - 10) / 100.0);
        element.style.opacity = opacity;
      }
    };
    overlays.add(el, intersection.point, options);
  }
});
```

As shown above, overlays can be removed using `remove()`. It is also possible to remove all
overlays by calling `clear()` or by disposing the tool using `dispose()`. The tool cannot
be used after calling `dispose()`.

Overlays can change visibility of elements with `visible(true/false)`, which will unhide/hide all the elements in the overlay.

## Clustering overlays

The overlay tool also support clustering of elements. When enabled, the tool will detect
overlapping HTML elements and combine them into a single element by invoking a callback
factory for creating a "composite" element. This is useful to avoid cluttering when theres
a high number of overlays in the view.

Clustering is enabled by providing an options-argument to the constructor or `HtmlOverlayTool`
and provide a cluster mode and a callback for creating a "composite element" based on
a set a set of clustered overlay elements. Currently the only mode supported is `overlapByScreenSpace`
which causes overlay elements that overlap on screen to be replaced with a composite
element.

Each overlay added to `HtmlOverlayTool` may have assosciated, custom `userData`. This data
can be used to create custom labels for composite elements.

In the following example, overlays are added on click in the model. When overlays overlap
they are replaced with composite elements. `userData` is used to display a value range
of the underlying overlay elements.

```js runnable
// import { HtmlOverlayTool } from '@cognite/reveal';

function createOverlay(text) {
  const element = document.createElement('div');
  element.innerText = text;
  element.style.cssText = `
    position: absolute;

    /* Anchor to the center of the element and ignore events */
    transform: translate(-50%, -50%);
    pointer-events: none;
    touch-action: none;
    user-select: none;

    /* Make it look nice */
    padding: 10px;
    minHeight: 50px;
    color: #fff;
    background: #232323da;
    borderRadius: 0.25em;
    border: '#ffffff22 solid 2px;
  `;
  return element;
}

function createClusterElementCallback(cluster) {
  const minPressure = cluster.reduce((min, x) => Math.min(x.userData.pressure, min), Infinity);
  const maxPressure = cluster.reduce((max, x) => Math.max(x.userData.pressure, max), -Infinity);
  const compositeElement = createOverlay(`${minPressure}-${maxPressure} PSI`);
  compositeElement.style.color = '#999';
  return compositeElement;
}

const overlays = new HtmlOverlayTool(viewer, {
    clusteringOptions: { mode: 'overlapInScreenSpace', createClusterElementCallback }
  });
viewer.on('click', async event => {
  // Find 3D coordinate of what the user clicks
  const intersection = await viewer.getIntersectionFromPixel(event.offsetX, event.offsetY);
  if (intersection) {
    const pressure = Math.floor(Math.random() * 110);
    const el = createOverlay(`${pressure} PSI`);
    overlays.add(el, intersection.point, { userData: { pressure } });
  }
});
```

<!-- SOURCE_END: reveal/documentation\docs\examples\cad-2doverlay.mdx -->

================================================================================


<!-- SOURCE_START: reveal/documentation\docs\examples\cad-3dobjects.mdx -->
## File: reveal/documentation\docs\examples\cad-3dobjects.mdx

---
id: cad-3dobjects
title: Add custom 3D objects
description: Extend the scene with custom ThreeJS objects.
---

import { DemoWrapper } from '@site/docs/components/DemoWrapper';
import useBaseUrl from '@docusaurus/useBaseUrl';

Sometimes it's useful to add custom content to the 3D scene to model data Reveal doesn't
support or to customize the 3D environment. Reveal supports this by using the
`Cognite3DViewer.addObject3D`-function which accepts [ThreeJS](https://threejs.org/) objects.

:::note
Reveal uses an "implicit lighting model", i.e. no lights are added to the scene. If you
need lights this needs to be added to the viewer scene if the added objects isn't "unlit".
:::

<DemoWrapper />

## Adding markers to the scene on clicks

The following example reacts to clicks in the scene and adds markers to the positions clicked.

```jsx runnable
const markerGeometry = new THREE.SphereGeometry(1, 10, 10);
const markerMaterial = new THREE.MeshBasicMaterial({
  color: 'blue',
  transparent: true,
  opacity: 0.7
});
viewer.on('click', async event => {
  const intersection = await viewer.getIntersectionFromPixel(event.offsetX, event.offsetY);
  if (intersection) {
    const marker = new THREE.Mesh(markerGeometry, markerMaterial);
    marker.position.copy(intersection.point);
    viewer.addObject3D(marker);
  }
});
```

## Load external GLTF content

[GLTF](https://www.khronos.org/gltf/) is a commonly used 3D format for content delivery - think of it as the JPG of 3D.
GLTF is supported by ThreeJS and can easily be added to Reveal using [`GLTFLoader`](https://threejs.org/docs/#examples/en/loaders/GLTFLoader).
GLTF is great for creating custom 3D content with high fidelity, and is supported by most 3D design software,
e.g. [Blender](https://www.blender.org/). There's also several services for generating GLTF content (e.g. [ElevationAPI](https://elevationapi.com/))
and market places for 3D models for download (e.g. [Sketchfab](https://sketchfab.com/) and [Turbosquid](https://www.turbosquid.com/)) - allowing you
to quickly build "digital worlds" with Reveal.

In the following example, a GLTF model is loaded and placed in the clicked positions in the CAD model. The 3D model is from 
[Grand Dog Studio on Sketchfab](https://sketchfab.com/3d-models/3d-industrial-tanker-a9d3dac0c55042989309bdcf68c60f76) under 
[the CC 4.0 license](https://creativecommons.org/licenses/by/4.0/).

```jsx runnable
// import { GLTFLoader } from 'three/examples/jsm/loaders/GLTFLoader';

const loader = new GLTFLoader();
function onLoaded(gltf) {
  gltf.scene.scale.set(0.2, 0.2, 0.2);
  const objectBounds = new THREE.Box3().setFromObject(gltf.scene);

  viewer.on('click', async event => {
    const intersection = await viewer.getIntersectionFromPixel(event.offsetX, event.offsetY);
    if (intersection) {
      const clonedScene = gltf.scene.clone();
      intersection.point.y += (objectBounds.max.y - objectBounds.min.y) * 0.5;
      clonedScene.position.copy(intersection.point);
      viewer.addObject3D(clonedScene);
    }
  });

  alert('Loaded GLTF! Click the 3D model to place model');
}
function onProgress() {
}
function onError(error) {
  alert('Loading GLTF failed: ' + error);
}

// Add a "sun"
const sun = new THREE.PointLight();
sun.position.set(500, 500, 500);
viewer.addObject3D(sun);
viewer.addObject3D(new THREE.AmbientLight())

// Load and add 3D model
loader.load(urls.gltfModelUrl, onLoaded, onProgress, onError);
```

## Add environment

To make a model feel more natural it might be useful to add an environment. The following
example adds sky and a sea effect for the example oil rig.

<img
  src={useBaseUrl('/img/cad-skyandocean.png')}
  alt="Oil rig with sky and ocean"
/>

Below you'll find [an interactive example](#interactive-example), but first lets walk through
the different parts.
See the bottom of this page for an interactive example.

First, let's encapsulate the model in a large sky-textured sphere to create an illusion of
skies. The sphere map is available from [Free HDR - EXR SKIES-blog](http://freepanorama.blogspot.com/).

```js
const modelCenterAtSeaLevel = model
  .getModelBoundingBox()
  .getCenter(new THREE.Vector3());
modelCenterAtSeaLevel.y = 0.0;

// Skybox
const skyBox = new THREE.Mesh(
  new THREE.SphereGeometry(3000, 15, 15),
  new THREE.MeshBasicMaterial({
    side: THREE.BackSide,
    // Skybox texture from http://freepanorama.blogspot.com/2010/01/sky7-spherical.html
    map: new THREE.TextureLoader().load(urls.skyUrl),
  })
);
skyBox.position.copy(modelCenterAtSeaLevel);
viewer.addObject3D(skyBox);
```

This looks a bit better, but the oil rig appears to be floating mid-air at this point. Lets
add an ocean. A plane is rendered at the sea level.

```js
// Water
const waterGeometry = new THREE.PlaneGeometry(6000, 6000, 63, 63);

const material = new THREE.MeshBasicMaterial({
  map: new THREE.TextureLoader().load(
      'https://threejs.org/examples/textures/water.jpg',
      (texture) => {
      texture.wrapS = texture.wrapT = THREE.RepeatWrapping;
    }),
  color: { value: new THREE.Color(0x0099ff)},
  side: THREE.DoubleSide
});

const water = new THREE.Mesh(waterGeometry, material);
// Make the ocean horizontal
water.rotation.x = -Math.PI / 2;
water.position.copy(modelCenterAtSeaLevel);
viewer.addObject3D(water);
```

### Interactive example

Below is the complete code for adding a skybox and ocean to the scene.

```jsx runnable
const modelCenterAtSeaLevel = model
  .getModelBoundingBox()
  .getCenter(new THREE.Vector3());
modelCenterAtSeaLevel.y = 0.0;

// Skybox
const skyBox = new THREE.Mesh(
  new THREE.SphereGeometry(3000, 15, 15),
  new THREE.MeshBasicMaterial({
    side: THREE.BackSide,
    // Skybox texture from http://freepanorama.blogspot.com/2010/01/sky7-spherical.html
    map: new THREE.TextureLoader().load(urls.skyUrl),
  })
);
skyBox.position.copy(modelCenterAtSeaLevel);
viewer.addObject3D(skyBox);

// Water
const waterGeometry = new THREE.PlaneGeometry(6000, 6000, 63, 63);

const material = new THREE.MeshBasicMaterial({
  map: new THREE.TextureLoader().load(
      'https://upload.wikimedia.org/wikipedia/commons/thumb/b/b3/Water_texture_1390894_Nevit.jpg/2048px-Water_texture_1390894_Nevit.jpg',
      (texture) => {
      texture.wrapS = texture.wrapT = THREE.RepeatWrapping;
    }),
  color: { value: new THREE.Color(0x0099ff)},
  side: THREE.DoubleSide
});

const water = new THREE.Mesh(waterGeometry, material);
// Make the ocean horizontal
water.rotation.x = -Math.PI / 2;
water.position.copy(modelCenterAtSeaLevel);
viewer.addObject3D(water);

//Make sure the Skybox & ocean plane have applied textures
setTimeout(() => {
  viewer.requestRedraw();
}, 100);

```


<!-- SOURCE_END: reveal/documentation\docs\examples\cad-3dobjects.mdx -->

================================================================================


<!-- SOURCE_START: reveal/documentation\docs\examples\cad-basic.mdx -->
## File: reveal/documentation\docs\examples\cad-basic.mdx

---
id: cad-basic
title: Loading CAD models
description: Demo shows how to load 3d models from CDF with Cognite3DViewer.
---

`Cognite3DViewer` is a component that eases the migration from [@cognite/3d-viewer](https://www.npmjs.com/package/@cognite/3d-viewer).
It has mostly the same API and could be used when you don't need to control the scene or render loop,
i.e., just want to view some 3d models from CDF.

import { DemoWrapper } from '@site/docs/components/DemoWrapper';

<DemoWrapper />

```jsx
import { CogniteClient } from '@cognite/sdk';
import { Cognite3DViewer } from '@cognite/reveal';

const loginManager = new LoginManager('publicdata', 'api');
const client = new CogniteClient({
  appId: 'myCadAppId',
  project: loginManager.project,
  getToken: async () => loginManager.getToken()
});

await client.authenticate();

// some div in your html page for Cognite3DViewer to insert a canvas
const domElement = document.getElementById('canvas-wrapper');

async function main() {
  const viewer = new Cognite3DViewer({ sdk: client, domElement });

  // load a model and add it on 3d scene
  // https://publicdata.fusion.cognite.com/publicdata/3d-models/3356984403684032/revisions/6664823881595566
  const model = await viewer.addModel({
    modelId: 3356984403684032,
    revisionId: 6664823881595566,
  });
  viewer.loadCameraFromModel(model);

  // call viewer.dispose() when you don't need the viewer anymore
}
main();
```

`CogniteClient` version 6 and later requires a `getToken` function for authentication.
For this documentation we have made a class called `LoginManager` that handles this. To
access the `publicdata` project used in the examples in this documentation, you may use the `LoginManager` [class yourself](https://github.com/cognitedata/reveal/blob/a722e6ef34e026be9fa88d90e97bcf94a6610432/documentation/docs/utils/LoginManager.ts). Note that
accessing data in other projects may require different authentication flows not supported by the LoginManager.
You can read more about different types of authentication flows in [the CogniteClient documentation](https://docs.cognite.com/dev/guides/sdk/js/authentication/).

Models can be temporarily hidden using `CogniteCadModel.visible`. Note that
the viewer must be explicitly re-rendered after setting the visibility flag:

```js runnable
model.visible = false;
viewer.requestRedraw();

setTimeout(() => {
  model.visible = true;
  viewer.requestRedraw();
}, 5000);
```

Hiding models doesn't free any memory occupied by the model and should only be used
to temporarily hide a model when it's expected that it will shortly be shown again.

To also reclaim memory and permanently unloading the model, use
`Cognite3DViewer.removeModel()`:

```js runnable
viewer.removeModel(model)
```

## Default CDF transformation

On loading a model revision, Reveal automatically retrieves and applies the transformation stored in CDF for that revision. The transformation is composed of the `translation`, `rotation` and `scale` fields in the revision data, which may be set using the [CDF Rest API](https://docs.cognite.com/api/v1/#tag/3D-Model-Revisions/operation/update3DRevisions). The transformation is applied to every vertex/point in the input data; each vertex position is first scaled, then rotated, and finally translated.

The `rotation` component is specified as an array of three floating point numbers. The elements are the rotation angles in radians around the X, Y and Z axes respectively. The vertices are first rotated around its X axis, then its Y axis (which has potentially been rotated by the first rotation), then its Z axis (which may have been rotated by the other two).

Aftewards, the model is transformed from CDF coordinates to Reveal coordinates. Since the default CDF transformation described above is applied _before_ the CDF-to-Reveal coordinate transformation, it happens in [_CDF_ space](/docs/#a-note-on-coordinate-systems).

## Setting custom background image

The recommended way to set a custom background image for Reveal is to add the image as background to the DOM and make the background color transparent by applying an alpha value of 0.
See an example of this below.

```js runnable
viewer.setBackgroundColor({ alpha: 0.0 });
viewer.domElement.style.backgroundImage = "url('https://i.imgur.com/8tcxHWh.jpeg')";
```

## Creating screenshots

Use `getScreenshot` to create a screenshot from the current camera position. By default the resolution of the image is set to match the size of the render canvas, but a custom resolution can be provided.
Whether or not to include UI in the screenshot can also be specified. When drawing UI, only the viewer DOM element and its children will be included in the image. The DOM is scaled to fit any provided resolution, 
and as a result some elements can be positioned incorrectly in regards to the 3D render. 

Note that `html2canvas` is used to draw UI and this has some limitations on what CSS properties it is able to render. For details see [the html2canvas documentation](https://html2canvas.hertzen.com/documentation).

```js runnable
async function createScreenshot() {
  const url = await viewer.getScreenshot(1920, 1080, true);
  if (url) {
    const link = document.createElement('a');
    link.download = 'test';
    link.href = url;
    link.click();
  }
}
createScreenshot();
```

## Only loading a part of the model

In some cases, it might be useful to restrict the area for which geometry is loaded to only show a partial
view. This can be done using a `geometryFilter` which allows only loading geometry within a provided box:

```js runnable
viewer.models.forEach(x => viewer.removeModel(x));

async function addFilteredModel() {
  const model = await viewer.addModel({
    modelId: 3356984403684032,
    revisionId: 6664823881595566,
    geometryFilter: {
      // Only load geometry inside a box around origin with 50x50 horizontal extent and 10 vertical extent.
      boundingBox: new THREE.Box3(new THREE.Vector3(75, 50, 49), new THREE.Vector3(125, 100, 59))
    }
  });
  viewer.fitCameraToModel(model);
}
addFilteredModel();
```

By default, the bounds provided must be in "CDF coordinates". This is e.g. suitable if you are retrieving coordinates
directly from the [Nodes API](https://docs.cognite.com/api/v1/#operation/get3DNodes) to for instance show the area
around a given node. If the coordinates are in "Reveal coordinates" (i.e. in
[the WebGL coordinate system](https://www.tutorialspoint.com/webgl/webgl_basics.htm)) the `geometryFilter` can be
set up using `isBoundingBoxInModelCoordinates`:

```js runnable
viewer.models.forEach(x => viewer.removeModel(x));

async function addFilteredModel() {
  const model = await viewer.addModel({
    modelId: 3356984403684032,
    revisionId: 6664823881595566,
    geometryFilter: {
      // Only load geometry inside a box around origin with 50x50 horizontal extent and 10 vertical extent.
      boundingBox: new THREE.Box3(new THREE.Vector3(75, 49, -100), new THREE.Vector3(125, 59, -50)),
      // Instruct Reveal that the coordinates already are relative to the coordinates of the model
      isBoundingBoxInModelCoordinates: true
    }
  });
  viewer.fitCameraToModel(model);
}
addFilteredModel();
```


<!-- SOURCE_END: reveal/documentation\docs\examples\cad-basic.mdx -->

================================================================================


<!-- SOURCE_START: reveal/documentation\docs\examples\cad-prioritized-nodes.mdx -->
## File: reveal/documentation\docs\examples\cad-prioritized-nodes.mdx

---
id: cad-prioritized-nodes
title: Prioritize nodes for loading
describe: Reveal may be instructed to treat specific nodes as "prioritized" with regards to geometry streaming.
---

import { DemoWrapper } from '@site/docs/components/DemoWrapper';

A developer may assign nodes of a model as "prioritized" in relation to geometry loading.
By giving nodes a "prioritization weight", a developer can influence Reveal to load, or keep loaded, certain parts of a model when it would otherwise discard them in favor of e.g. geometry that is closer to the camera. Note that assigning prioritization weights to nodes does not guarantee that they will be loaded at all times; the loader will still account for the rendering budget.

Nodes are given load priority through the node styling API. The `NodeAppearance` type (see [Cad Styling](cad-styling)) includes the optional field `prioritizedForLoadingHint` which can be used to provide a load priority to the node collection. Higher values will make the related geometry more likely to be loaded. While any number can be used as the load priority, it is recommended to use values between 1 and 10. 5 is considered a reasonable default value.

Not all node collection types support the priority hint. An overview of current support is provided in the following table.

| NodeCollectionType                   | Supports `prioritizedForLoadingHint`? |
| ------------------------------------ | ------------------------------------- |
| `TreeIndexNodeCollection`            | Must be manually provided, see below  |
| `PropertyFilterNodeCollection`       | Yes                                   |
| `SinglePropertyFilterNodeCollection` | Yes                                   |
| `AssetNodeCollection`                | Yes                                   |
| `InvertedNodeCollection`             | No                                    |
| `UnionNodeCollection`                | Yes                                   |
| `IntersectionNodeCollection`         | Yes                                   |

:::note
Currently, `TreeIndexNodeCollection` does not take responsibility to compute the location of the geometry it holds, which the loader needs to prioritize the geometry. Alternatively, the developer may supply this information themselves by using the `addAreaPoints()` and `addAreas()` methods on the `TreeIndexNodeCollection`.
:::

A node collection that is the result of an operation (e.g. a union) involving another node collection that does not support `prioritizedForLoadingHint`, will not support the `prioritizedForLoadingHint` field either.

## Prioritize highlighted nodes for loading

Many use cases in Reveal involve highlighting a few nodes while the rest of the model is hidden or ghosted. These use cases can benefit from the prioritization feature. Assigning a priority to the nodes of interest in addition to the hightlighting, makes them more likely to be loaded even when the camera is far away:

```js
// import { SinglePropertyFilterNodeCollection } from '@cognite/reveal'

const nodeSet = new SinglePropertyFilterNodeCollection(sdk, model, { requestPartitions: 10 });
const names = ['/60-EL-9016-Q200-E01', '/60-EL-9016-Q200-E02', '/60-EL-9016-Q200-E03'];
nodeSet.executeFilter('Item', 'Name', names);

model.setDefaultNodeAppearance(DefaultNodeAppearance.Ghosted);
model.assignStyledNodeCollection(nodeSet, { ...DefaultNodeAppearance.Highlighted, prioritizedForLoadingHint: 5 });
```

<!-- SOURCE_END: reveal/documentation\docs\examples\cad-prioritized-nodes.mdx -->

================================================================================


<!-- SOURCE_START: reveal/documentation\docs\examples\cad-save-viewerstate.mdx -->
## File: reveal/documentation\docs\examples\cad-save-viewerstate.mdx

---
id: cad-save-viewerstate
title: Saving viewer state
description: Demo shows how to save viewerstate of 3d models from CDF with Cognite3DViewer.
---
import { DemoWrapper } from '@site/docs/components/DemoWrapper';

Reveal supports saving the camera state and styled filters that have been applied to the loaded model(s).
This functionality can help support sharing links and local storage of a given view.
Internally the input to a given filter is stored and is replayed when restoring the view.
This usually means that substantially less data needs to be serialized in order to share the given state of the viewer.
The serialized JSON blob also keeps information about styling/filtering of the model by storing all [styled sets](./cad-styling.mdx).

<DemoWrapper />

## Getting the viewer state
In the example below we apply some filter to our loaded model using the `NodeCollection` type from [Styling CAD models](./cad-styling.mdx).
Then we can call the ```viewer.getViewState()``` function which return a serialized JSON blob containing the view state.
Depending on the application, the view state can be additionally transformed into e.g. a URL parameter and transferred through a link.

In the example below, we keep simply print it to the developer console.

```js runnable
const allPipes = new PropertyFilterNodeCollection(sdk, model);
allPipes.executeFilter({'PDMS': {'Type': 'PIPE'}});
model.setDefaultNodeAppearance(DefaultNodeAppearance.Ghosted);
model.assignStyledNodeCollection(allPipes, { renderGhosted: false, color: new THREE.Color(0.15, 0.8, 0.08) } );

console.log(JSON.stringify(viewer.getViewState(), null, 2));
```

## Setting the viewer state
Restoring the viewer state is simply a matter of feeding back the JSON blob retrieved from ```const myState = viewer.getViewState()``` into ```viewer.setViewState(myState)```.
In the example below, a previously stored state is applied which applies a red color to nodes that have an attribute `'PDMS.Type'`.

:::note
Setting the viewer state assumes that model has already been loaded.
An error will be thrown if a given state is loaded for a model which does not exist.
:::

```js runnable

const myState = {
  "camera": {
    "position": {
      "x": 165.603,
      "y": 41.649,
      "z": -10.940
    },
    "target": {
      "x": 130.537,
      "y": 49.138,
      "z": -119.095
    }
  },
  "models": [
    {
      "defaultNodeAppearance": {
        "renderGhosted": true
      },
      "modelId": 3356984403684032,
      "revisionId": 6049696084265067,
      "styledSets": [
        {
          "token": "PropertyFilterNodeCollection",
          "state": {
            "PDMS": {
              "Type": "PIPE"
            }
          },
          "options": {
            "requestPartitions": 1
          },
          "appearance": {
            "renderGhosted": false,
            "color": [
              200,
              40,
              20
            ]
          }
        }
      ]
    }
  ]
};

viewer.setViewState(myState);
```

## Serializing and deserializing custom node collections

When working with styled custom node collections, the Reveal viewer needs to know how to serialize and deserialize the set.
Serialization is handled through the abstract method `serialize` which needs to be implemented when extending `NodeCollection`.
The output of `serialize` is of type `SerializedNodeCollection` and contains a `token` which is used to recreate
the `NodeCollection` during deserialization, and a `state` object which contains the data needed to restore
the `NodeCollection`. It is up to the application developer to fill this state object with any nessesary
data needed to recreate the state of the `NodeCollection`. An optional `options` object can also be supplied
containing any metadata for loading data (e.g. the number of API calls to fetch the needed data in parallel).
The contents returned from `serialize` is contained in the result of `getViewState`.

In addition to serialization, Reveal also needs to know how to recreate the custom `NodeCollection` during
deserialization. This is done by calling the free-function `registerNodeCollectionType` with the same `token`
defined by the custom `NodeCollection` and a lambda function which instantiates and restore the state of
the `NodeCollection`. The lambda function has two parameters: the `descriptor` containing the state and
options which should be applied to the `NodeCollection` and the context containing an instance of
the [CogniteClient from the Cognite SDK](https://docs.cognite.com/dev/guides/sdk/js/) and the `CogniteCadModel`
which the `NodeCollection` was originally applied to. It is up to the application developer how and if they
want to use the context and/or descriptor, but it is provided as a convinience.

An example of a simple custom `NodeCollection` can be seen below.
For more information on creating a custom `NodeCollection`, see [create custom node collections](cad-styling-custom).

```js
// import { IndexSet, NodeCollection, registerNodeCollectionType } from '@cognite/reveal';

class MyNodeCollection extends NodeCollection {

  isLoading = false;
  _indexSet = new IndexSet();

  constructor(model) {
    // token used for serialization / deserialization
    super('MyNodeCollection');

    for (let i = 0; i < model.nodeCount / 2; i++) {
      this._indexSet.add(i);
    }
  }

  getIndexSet() {
    return this._indexSet;
  }

  serialize() {
    return {
      token: this.classToken,
      state: this._indexSet.toRangeArray()
    }
  }

  clear() {
    this._indexSet.clear();
    this.notifyChanged();
  }
}

// Register deserializer for type
registerNodeCollectionType(
  'MyNodeCollection',
  (descriptor, context) => {
    return Promise.resolve(new MyNodeCollection(context.model));
  }
);
```


<!-- SOURCE_END: reveal/documentation\docs\examples\cad-save-viewerstate.mdx -->

================================================================================


<!-- SOURCE_START: reveal/documentation\docs\examples\cad-styling-assets.mdx -->
## File: reveal/documentation\docs\examples\cad-styling-assets.mdx

---
id: cad-styling-assets
title: Filtering nodes by assets
describe: Applying styles to assets and assosciated asset mappings from Cognite Fusion
---

import { DemoWrapper } from '@site/docs/components/DemoWrapper';

In Cognite Data Fusion, assets and asset hierarchies are digital representations of objects
or groups of objects from the physical world. Assets can be assosciated with different data
types, such as documents, time series and events and serves as a "hub" to look up data for
physical equipment. See [Cognite Data Fusion documentation](https://docs.cognite.com/dev/concepts/resource_types/assets.html)
for more information about assets.

3D nodes can be ["asset mapped"](https://docs.cognite.com/api/v1/#tag/3D-Asset-Mapping) to
assets in Cognite Data Fusion. Reveal supports styling nodes mapped to an asset by using
`AssetNodeCollection`.

<DemoWrapper />

# Style all asset mapped nodes

If no options are provided, `AssetNodeCollection` includes all asset mapped nodes
for the model:

```js runnable
const allAssetMappedNodes = new AssetNodeCollection(sdk, model);
// When no asset ID is provided, all nodes mapped to assets are included
allAssetMappedNodes.executeFilter({});
model.setDefaultNodeAppearance(DefaultNodeAppearance.Ghosted);
model.assignStyledNodeCollection(allAssetMappedNodes, { renderGhosted: false, outlineColor: NodeOutlineColor.Cyan } );
```

# Style a given asset

It is also possible to only style nodes mapped to a single asset. Assets are identified by their
'ID':

```js runnable
const assetNodes = new AssetNodeCollection(sdk, model);
assetNodes.executeFilter({ assetId: 4222791488928479 });
model.setDefaultNodeAppearance(DefaultNodeAppearance.Ghosted);
model.assignStyledNodeCollection(assetNodes, { renderGhosted: false, outlineColor: NodeOutlineColor.Cyan } );
```

Note that there is no way to list multiple assets directly with `AssetNodeCollection`, but This
can be achieved by using `UnionNodeCollection` in combination with several `AssetNodeCollection`s.

# Style assets within an area

To support proximity lookups, Reveal supports styling assets within a certain area defined by a bounding box. It's
sufficient for an asset to intersect the provided bounds, it doesn't need to be fully inside.

:::note
The bounding box is defined in "Reveal coordinates" -
[a right handed, Y up coordinate system](https://www.youtube.com/watch?v=TGbMzoJqV7c) - which might differ
from the "native model coordinates" stored in Cognite Data Fusion. `AssetNodeCollection` will automatically map from
"Reveal coordinates" to "native model coordinates" using `CogniteCadModel.getModelTransformation()` and `CogniteCadModel.getCdfToDefaultModelTransformation()`.
:::

```js runnable
const areaOfInterest = new THREE.Box3().setFromCenterAndSize(
  new THREE.Vector3(140, 67, -110),
  new THREE.Vector3(10, 5, 10)
);
const assetsWithinAreaNodes = new AssetNodeCollection(sdk, model);
assetsWithinAreaNodes.executeFilter({ boundingBox: areaOfInterest });
model.setDefaultNodeAppearance(DefaultNodeAppearance.Hidden);
model.assignStyledNodeCollection(assetsWithinAreaNodes, { visible: true } );

// Simple helper to show the area of interest
const boxMaterial = new THREE.MeshBasicMaterial({wireframe: true, color: 0xffff00 });
const boxMesh = new THREE.Mesh(new THREE.BoxGeometry(), boxMaterial);
areaOfInterest.getCenter(boxMesh.position);
areaOfInterest.getSize(boxMesh.scale);
viewer.addObject3D(boxMesh);
```


<!-- SOURCE_END: reveal/documentation\docs\examples\cad-styling-assets.mdx -->

================================================================================


<!-- SOURCE_START: reveal/documentation\docs\examples\cad-styling-custom.mdx -->
## File: reveal/documentation\docs\examples\cad-styling-custom.mdx

---
id: cad-styling-custom
title: Custom node collections
describe: Create custom node collections to filter based on custom data sources and mechanisms
---

import { DemoWrapper } from '@site/docs/components/DemoWrapper';

In many cases applications will need to filter 3D nodes by some custom data source or mechanism. This
is done by extending the `NodeCollection`-class. This class generates an `IndexSet` and
provides notification when the set has changed. Implementations should
be non-blocking - slow operations should be executed async and the set should
be incrementally updated to avoid blocking the viewer.

<DemoWrapper />

# Simple, static node collection

```js runnable
// import { NodeCollection, DefaultNodeAppearance, ClusteredAreaCollection } from '@cognite/reveal';

class MyNodeCollection extends NodeCollection {
  isLoading = false;

  constructor(model) {
    super('MyNodeCollection'); // Token for (de)serialization
    this._nodeCount = model.nodeCount;
    this._indexSet = new IndexSet();

    for (let i = 0; i < model.nodeCount; i += 100) {
      this._indexSet.add(i);
    }
  }

  getIndexSet() {
    return this._indexSet;
  }

  getAreas() {
    if (this._areas) {
      return this._areas;
    }

    const indices = this._indexSet.toIndexArray();

    // getBoundingBoxesForIndices() may use the SDK or a NodesApiClient to fetch
    // the bounding boxes of the relevant nodes
    const boxes = getBoundingBoxesForIndices(indices);

    this._areas = new ClusteredAreaCollection();
    this._areas.addAreas(boxes);

    return this._areas;
  }

  clear() {
    this._indexSet.clear();
    this.notifyChanged();
  }
}

const myNodes = new MyNodeCollection(model);
model.setDefaultNodeAppearance(DefaultNodeAppearance.Ghosted);
model.assignStyledNodeCollection(myNodes, { renderGhosted: false, color: new THREE.Color(0.15, 0.8, 0.08) } );
```

See also [guide on (de)serializing node collections](cad-save-viewerstate#serializing-and-deserializing-custom-node-colletions).

# Details about IndexSet

`IndexSet` is a specialized implementation of [`Set<number>`](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Set)
that is optimized for storing ranges of numbers. This is a common case for nodes as typically a
subtree will have the same styling applied.

Although `IndexSet` supports adding and removing individual elements using `add()` and `remove()`, the best
performance is achieved by using `addRange()` and `removeRange()` whenever possible.

Also note that changes to the underlying `IndexSet` held by a `NodeCollection` isn't automatically propagated
to be visible in the rendered result. In order to trigger an update after changing the underlying `IndexSet`,
use `NodeCollection.notifyChanged()` (protected function). Note that this function should not be triggered too often
as it might take some time to apply the changes.


<!-- SOURCE_END: reveal/documentation\docs\examples\cad-styling-custom.mdx -->

================================================================================


<!-- SOURCE_START: reveal/documentation\docs\examples\cad-styling-nodes.mdx -->
## File: reveal/documentation\docs\examples\cad-styling-nodes.mdx

---
id: cad-styling-nodes
title: Filtering nodes by node ID or properties
describe: Applying styles to nodes based on node IDs or properties/attributes
---

import { DemoWrapper } from '@site/docs/components/DemoWrapper';

3D nodes may have associated attribute/property data. Reveal allows for filtering based on
these properties, allowing queries such as "all pipes", "nodes within module P600" or "nodes
with status S5". Combinations are also possible by using `UnionNodeCollection` and `IntersectionNodeCollection`.

`NodeIdNodeCollection` contains a list of nodes identified by their CDF IDs.

`PropertyFilterNodeCollection` is used to query nodes based on node properties. It's possible to specify
multiple criterias which will be combined using `AND` - i.e. all criterias must be met for a node
to match. To emulate `OR`, use `UnionNodeCollection`.

`SinglePropertyFilterNodeCollection` is similar to `PropertyFilterNodeCollection`, but differs in that
it only matches on a single node property and is able to match on a list of values. This is useful
to e.g. provide a list of node names or source system IDs.

Note that if a node is in one of the collections discussed in this page, all of its children will also
be in the set.

:::note
The test model used in the documentation site is lacking good node properties and the quality of
the examples shown is therefor restricted as a result of this. To best utilize the filtering APIs
we recommend providing a rich 3D models with a good set of high-quality attributes associated with
the nodes.
:::

<DemoWrapper />

## Highlight nodes identified by IDs

If Node IDs are known, `NodeIdNodeCollection` can be used to style the nodes (and the children):

```js runnable
// import { NodeIdNodeCollection, DefaultNodeAppearance } from '@cognite/reveal';

const nodes = new NodeIdNodeCollection(sdk, model);
const nodeIds = [
  6790526732893790, 8491891944656383, 1408134070691933, 7215972602029446,
]; // Life boats
nodes.executeFilter(nodeIds);
model.assignStyledNodeCollection(nodes, DefaultNodeAppearance.Highlighted);
```

## Show all pipes

If nodes in the 3D model has an attribute `'PDMS.Type'`, `PropertyFilterNodeCollection` can be used to
retrieve nodes of a certain type. In the following example, only pipes are accepted:

```js runnable
// import { PropertyFilterNodeCollection, DefaultNodeAppearance } from '@cognite/reveal';

const allPipes = new PropertyFilterNodeCollection(sdk, model);
allPipes.executeFilter({ PDMS: { Type: 'PIPE' } });
model.setDefaultNodeAppearance(DefaultNodeAppearance.Ghosted);
model.assignStyledNodeCollection(allPipes, {
  renderGhosted: false,
  color: new THREE.Color(0.15, 0.8, 0.08),
});
```

## Partitioning requests

For filters that match a lot of nodes, [paritioned requests](https://docs.cognite.com/api/v1/#section/Parallel-retrieval)
might increase the performance radically by fetching result from the server in parallel.
To partition requests, provide the number of partitions using the `requestPartitions`-option
to the `PropertyFilterNodeCollection`-constructor:

```js runnable
// import { PropertyFilterNodeCollection, DefaultNodeAppearance, NodeOutlineColor } from '@cognite/reveal';

const nodesFromFile = new PropertyFilterNodeCollection(sdk, model, {
  requestPartitions: 10,
});
// All nodes originating from a given file
nodesFromFile.executeFilter({ Item: { 'Source File': 'PRO-S_CD-MUM.nwd' } });
model.setDefaultNodeAppearance(DefaultNodeAppearance.Ghosted);
model.assignStyledNodeCollection(nodesFromFile, {
  renderGhosted: false,
  outlineColor: NodeOutlineColor.Orange,
});
```

To compare speed-up, set `requestPartitions` to `1`.

## Combining filters

Often one would want to match multiple criterias of the same type. Lets say we want to find all
mechanical equipment with purpose 'STU'. We can either execute this as a single query, or as two
seperate queries.

When doing this as a single query, no `IntersectionNodeCollection` is necessary and the code is quite compact:

```js runnable
// import { PropertyFilterNodeCollection, DefaultNodeAppearance } from '@cognite/reveal';

const stuMechNodes = new PropertyFilterNodeCollection(sdk, model);
stuMechNodes.executeFilter({ PDMS: { ':capDisc': 'MECH', Purpose: 'STU' } });

model.setDefaultNodeAppearance(DefaultNodeAppearance.Ghosted);
model.assignStyledNodeCollection(stuMechNodes, {
  renderGhosted: false,
  color: new THREE.Color(0.15, 0.8, 0.08),
});
```

Combining two separate queries requires the use of `IntersectionNodeCollection`:

```js runnable
// import { PropertyFilterNodeCollection, IntersectionNodeCollection, DefaultNodeAppearance } from '@cognite/reveal';

const mechNodes = new PropertyFilterNodeCollection(sdk, model);
mechNodes.executeFilter({ PDMS: { ':capDisc': 'MECH' } });

const stuNodes = new PropertyFilterNodeCollection(sdk, model);
stuNodes.executeFilter({ PDMS: { Purpose: 'STU' } });

const combined = new IntersectionNodeCollection();
combined.add(mechNodes);
combined.add(stuNodes);

model.setDefaultNodeAppearance(DefaultNodeAppearance.Ghosted);
model.assignStyledNodeCollection(combined, {
  renderGhosted: false,
  color: new THREE.Color(0.15, 0.8, 0.08),
});
```

The two approaches has their pros and cons. Often it will be faster to combine the
filters into a single query as this will reduce the result set returned from the
server. However, if the different combinations will be configured run-time (e.g.
the user will want to show 'ARCH'-nodes within the 'STU'-purpose) it might
be better to use two separate queries and combine the results. Also, the latter
approach also allows for more complex types of filters.

## Matching nodes with a list of values

There might be situations where an application has a long list of identifiers of nodes to show
or style. In this case, `SinglePropertyFilterNodeCollection` might be useful. This class will match
one node property towards many values - e.g. a node identifier towards a list of IDs. This node set
supports thousands of IDs - `PropertyFilterNodeCollection` only supports one matching value.

```js runnable
// import { SinglePropertyFilterNodeCollection, DefaultNodeAppearance } from '@cognite/reveal';

const nodeSet = new SinglePropertyFilterNodeCollection(sdk, model, {
  requestPartitions: 10,
});
const names = [];
for (let q = 240; q < 300; q++) {
  for (let e = 1; e <= 9; e++) {
    const name = `/60-EL-9016-Q${q}-E0${e}`;
    names.push(name);
  }
}
model.setDefaultNodeAppearance(DefaultNodeAppearance.Ghosted);
model.assignStyledNodeCollection(nodeSet, {
  renderGhosted: false,
  outlineColor: NodeOutlineColor.Orange,
});

nodeSet.executeFilter('Item', 'Name', names).then(() => {
  // Create boxes around the areas to make it easier for users to find areas in the 3D model to explore
  const areas = Array.from(nodeSet.getAreas().areas());
  for (const area of areas) {
    viewer.addObject3D(new THREE.Box3Helper(area));
  }
});
```

## Inverting and combining filters

Often it is interesting to invert results from filters to find elements that does not match the query. This
can be done using `InvertedNodeCollection`. In the following example, a single system is isolated
and all pipe support for the system is hidden.

```js runnable
// import {
//   PropertyFilterNodeCollection,
//   InvertedNodeCollection,
//   IntersectionNodeCollection,
//   DefaultNodeAppearance
// } from '@cognite/reveal';

const fullSystem = new PropertyFilterNodeCollection(sdk, model);
fullSystem.executeFilter({ Item: { Name: '/P/WM/A' } });
const pipeSupport = new PropertyFilterNodeCollection(sdk, model);
pipeSupport.executeFilter({ Item: { Name: '/P/WM/A/PS' } });
// This will contain all nodes that do not match the query above
const notPipesupport = new InvertedNodeCollection(model, pipeSupport);
const systemWithoutPipesupport = new IntersectionNodeCollection([
  fullSystem,
  notPipesupport,
]);

model.setDefaultNodeAppearance(DefaultNodeAppearance.Hidden);
model.assignStyledNodeCollection(
  systemWithoutPipesupport,
  DefaultNodeAppearance.Default
);
```


<!-- SOURCE_END: reveal/documentation\docs\examples\cad-styling-nodes.mdx -->

================================================================================


<!-- SOURCE_START: reveal/documentation\docs\examples\cad-styling.mdx -->
## File: reveal/documentation\docs\examples\cad-styling.mdx

---
id: cad-styling
title: Introduction
describe: Reveal supports styling individual nodes by assigning appearance profiles.
---

import { DemoWrapper } from '@site/docs/components/DemoWrapper';

Reveal supports flexible styling of individual nodes (objects) in the 3D model. Styles can
be compromised of several attributes to customize the visualization through the `NodeAppearance`-type:

| Field                       | Field type                  | Description                                           |
| --------------------------- | --------------------------- | ----------------------------------------------------- |
| `color`                     | `THREE.Color?`              | Override color, e.g `new THREE.Color(1, 0, 0)` (red). All components set to zero means no override.  |
| `visible`                   | `boolean?`                  | When false, the node(s) will be invisible             |
| `renderInFront`             | `boolean?`                  | When true, the node(s) are rendered in front of other geometry |
| `renderGhosted`             | `boolean?`                  | When true, the node(s) are rendered in transparent gray |
| `outlineColor`              | `NodeOutlineColor?`         | Adds an outline to the objects from a set of predefined colors |
| `prioritizedForLoadingHint` | `number?`                   | Assigns a prioritization weight to this node collection, influencing load priority. See [Prioritize nodes for loading](cad-prioritized-nodes).

These attributes can be combined to customize the look of nodes. For convinience, a set of default appearances are
provided in the `DefaultNodeAppearance`-constant:

| Appearance           | Description                                                                      |
| ------------------- | -------------------------------------------------------------------------------- |
| `Default`           | No overrides, use colors from the CAD model                                      |
| `Ghosted`           | Render node(s) 'ghosted', i.e. make them translucent gray                        |
| `Outlined`          | Outline node(s) with a white outline                                             |
| `Hidden`            | Hide node(s)                                                                     |
| `InFront`           | Render node(s) in front of all other nodes                                       |
| `Highlighted`       | Highlight the node(s). Combination of `InFront`, `Outlined` and a custom color   |

These "appearance profiles"/styles are assigned to one or more nodes defined by a `NodeCollection`-instance. A `NodeCollection`
identifies 3D nodes by `treeIndex`. There are several implementations of `NodeCollection`:

| Class                          |                                                                                  |
| ------------------------------ | -------------------------------------------------------------------------------- |
| `TreeIndexNodeCollection`      | A set of nodes defined by a list of tree indices. Can be updated with a new set of indices. |
| `NodeIdNodeCollection`         | Similar to `TreeIndexNodeCollection`, but useful when you have 'node IDs', not tree indices. |
| `PropertyFilterNodeCollection` | A set of nodes defined by a query to the 3D backend to find nodes that matches one or more properties/attributes. |
| `SinglePropertyFilterNodeCollection` | Similar to `PropertyFilterNodeCollection`, but only matches one node property to many values (e.g. for looking up nodes with a list of IDs). |
| `AssetNodeCollection`          | A set of nodes defined by [asset mappings](https://docs.cognite.com/api/v1/#tag/3D-Asset-Mapping) linking 3D nodes to [assets](https://docs.cognite.com/dev/concepts/resource_types/assets.html). |
| `InvertedNodeCollection`       | Inverts the result of a node collection to match the opposite nodes (i.e. a NOT-operator). |
| `UnionNodeCollection`          | Combines nodes from several node colletions by finding the [set union](https://en.wikipedia.org/wiki/Union_(set_theory)"). |
| `InersectionNodeCollection`    | Combines nodes from several node colletions by finding the [set intersection](https://en.wikipedia.org/wiki/Intersection_(set_theory)). |
| `NodeCollection`               | Abstract base class for node collections. Extend to [implement custom node collections](cad-styling-custom). |

It's also possible [implement custom node collections](cad-styling-custom). This can be useful for specialized queries or to load
sets from custom data sources.

`CogniteCadModel.assignStyledNodeCollection` and `unassignStyledNodeCollection` is used to manage styled set associated with a model:

```js
// import { TreeIndexNodeCollection, DefaultNodeAppearance, NumericRange } from '@cognite/reveal'

// you can start from binding styles to an empty set and populate it later
const myNodes = new TreeIndexNodeCollection();
model.assignStyledNodeCollection(myNodes, DefaultNodeAppearance.Highlighted);

// later you might want to update the set as user does something, for example, selects an asset
// note that other styling sets might have different API for updates, for example `executeFilter`
const nodeTreeIndex = 0;
const nodeSubtreeSize = 100000;
myNodes.updateSet(new IndexSet(new NumericRange(nodeTreeIndex, nodeSubtreeSize)));

// if you want to change appearance of your existing set you can assign a new style
model.assignStyledNodeCollection(myNodes, DefaultNodeAppearance.Ghosted);

// and when you don't need to style this set anymore, just remove it completely
model.unassignStyledNodeCollection(myNodes);
```

Styling is "additive", meaning that styles from multiple styled sets are accumulated per node, much
like how multiple classes are combined when working with CSS. Styled sets are applied first-in first-out (FIFO)
in the order the are added.

```js
// import { TreeIndexNodeCollection, DefaultNodeAppearance, NumericRange } from '@cognite/reveal'

// you can start from binding styles to an empty set and populate it later
const set1 = new TreeIndexNodeCollection(NumericRange.createFromInterval(0, 100));
model.assignStyledNodeCollection(set1, { color: new THREE.Color(1, 0, 0) });
const set2 = new TreeIndexNodeCollection(NumericRange.createFromInterval(50, 150));
model.assignStyledNodeCollection(set2, { outlineColor: NodeOutlineColor.White });

// [0..49] will be colored red
// [50..100] will be colored red and have a white outline
// [101..150] will have the default color and a white outline
```

:::note
The API for styling nodes has changed substantially since Reveal 1.x and upgrading Reveal
will require manual steps to implement styling.
:::

## Examples

<DemoWrapper />

To play around with the different styling options, we can use `CogniteCadModel.setDefaultNodeAppearance`.
A few example styles are shown below.

### Ghosted style

```js runnable
model.setDefaultNodeAppearance(DefaultNodeAppearance.Ghosted);
```

### Highlighted

```js runnable
model.setDefaultNodeAppearance(DefaultNodeAppearance.Highlighted);
```

### Outline and custom color

By creating custom styles you have a powerful tool to customize how the model looks.

```js runnable
model.setDefaultNodeAppearance({ color: new THREE.Color(0, 0.8, 0), outlineColor: NodeOutlineColor.Orange });
```

Note that `outlineColor` restricts the choice of color to a predefined set. This is
a restriction imposed to reduce storage space for outlines to only 3 bits. The choice
of colors is:

```ts
enum NodeOutlineColor {
  NoOutline = 0,
  White = 1,
  Black = 2,
  Cyan = 3,
  Blue = 4,
  Green = 5,
  Red = 6,
  Orange = 7
}
```


<!-- SOURCE_END: reveal/documentation\docs\examples\cad-styling.mdx -->

================================================================================


<!-- SOURCE_START: reveal/documentation\docs\examples\cad-transform-override.mdx -->
## File: reveal/documentation\docs\examples\cad-transform-override.mdx

---
id: cad-transform-override
title: Override CAD nodes transforms
description: Reveal supports overriding transforms of individual objects by providing tree indices to identify 3D nodes
---

import { DemoWrapper } from '@site/docs/components/DemoWrapper';
import useBaseUrl from '@docusaurus/useBaseUrl';

Reveal supports overriding transforms of individual objects by providing [tree indices to identify 3D nodes.](../concepts.md)

Note that any transformation override is applied with respect to the THREE.js world coordinate space. Also note that the node transform is not accounted for when determining geometry to load. Due to this node transforms shouldn't apply too drastic changes to the position and extend of the nodes. For model wide changes `CogniteCadModel.setModelTransformation` should be used instead.
Also note that non-uniform scaling of nodes are not currently supported and may give unexpected results.

## Examples

<DemoWrapper />

### Setting node transform

Setting the transform of a given node is done by `CogniteCadModel.setNodeTransformByTreeIndex` and takes a tree index,
a matrix transformation and a flag if the transformation also should be applied to children of the given node.



```jsx runnable
const transform = new THREE.Matrix4();
transform.setPosition(new THREE.Vector3(10, 10, 0));
model.setNodeTransformByTreeIndex(532261, transform, true);
```

### Reset node transform


Resetting the transformation is done with `CogniteCadModel.resetNodeTransformByTreeIndex` and takes the given tree index,

and a flag that determines if the node transform reset also should be applied to any child nodes of the given tree index.

```jsx runnable
model.resetNodeTransformByTreeIndex(532261, true);
```

### Animations

Creating animations is a matter of applying transformations multiple times. As stated above, any transformation

is applied in the global world coordinate system of THREE.js. This means that if you want to rotate a model around a given point (and not around the world origin),
you first need to transform the model to that given point, then rotate, then transform back into the world coordinate space. An example of this is done below to create an animation
of the crane rotating. First we get the center of the bounding box for node with id `533010` which is close to the base of the crane.
Then we set up an interval which triggers a function that transforms the entire crane (`532261`): first to the base of the crane, then rotates the model,
then transforms it back, thus giving us the wanted rotation. Keep in mind that [THREE.js uses column matrix notation](https://threejs.org/docs/#api/en/math/Matrix4), such that

the following statement:

```js
  const matrixOverride = modelToWorld.multiply(rotationMatrix.multiply(worldToModel));
```

first applies `worldToModel`, then `rotationMatrix` and finally `modelToWorld`.

```jsx runnable
async function animate() {
  const boundingBox = await model.getBoundingBoxByTreeIndex(533010);
  const center = boundingBox.getCenter(new THREE.Vector3());

  const modelToWorld = new THREE.Matrix4();
  const worldToModel = new THREE.Matrix4();
  const rotationMatrix = new THREE.Matrix4();

  const clock = new THREE.Clock(true);
  clock.start();

  const intervalID = setInterval(function () {
    clock.getElapsedTime();

    modelToWorld.setPosition(center);
    worldToModel.copy(modelToWorld.clone().invert());

    const newRotation = new THREE.Euler(0, -Math.PI * clock.elapsedTime / 20, 0);
    rotationMatrix.makeRotationFromEuler(newRotation);

    const matrixOverride = modelToWorld.multiply(rotationMatrix.multiply(worldToModel));

    model.setNodeTransformByTreeIndex(532261, matrixOverride, true);

    if (clock.elapsedTime >= 10) clearInterval(intervalID);
  }, 20);
}

animate();
```


<!-- SOURCE_END: reveal/documentation\docs\examples\cad-transform-override.mdx -->

================================================================================


<!-- SOURCE_START: reveal/documentation\docs\examples\click-reactions-cad.mdx -->
## File: reveal/documentation\docs\examples\click-reactions-cad.mdx

---
id: click-reactions-cad
title: Reacting to clicks in CAD models
description: Detecting intersections from clicks in CAD models
---

Determining clicks is important in applications with an interactive 3D model. Cognite Reveal supports
mappings clicks on the 2D rendered result to a 3D position and to determine what object is clicked.
`Cognite3DViewer.on('click', ...)` is used to detect clicks in the 3D model, while
`Cognite3DViewer.getIntersectionFromPixel` is used to determine clicked 3D world position and point from
a mouse click.

import { DemoWrapper } from '@site/docs/components/DemoWrapper';

<DemoWrapper />

## Detecting clicked objects

The following example detects intersections at clicked positions and marks the intersected positions
using a red sphere.

```js runnable
viewer.on('click', async event => {
  const intersection = await viewer.getIntersectionFromPixel(
    event.offsetX, event.offsetY
  );
  if (intersection) {
    const nodeId = await model.mapTreeIndexToNodeId(intersection.treeIndex);
    const toPresent = { treeIndex: intersection.treeIndex, nodeId, point: intersection.point };
    alert(`Clicked object!: ${JSON.stringify(toPresent)}`);
  };
});
```

## Highlighting clicked objects

It's quite common to highlight clicked objects. This can be achieved by using [the node styling API](./cad-styling.mdx).

```js runnable
const selectedNodes = new TreeIndexNodeCollection();
model.assignStyledNodeCollection(selectedNodes, DefaultNodeAppearance.Highlighted);

viewer.on('click', async event => {
  const intersection = await viewer.getIntersectionFromPixel(
    event.offsetX, event.offsetY
  );
  if (intersection) {
    // Replace current selection
    selectedNodes.updateSet(new IndexSet([intersection.treeIndex]));
  };
});
```

In CAD models, it's quite common that equipment consists of many small geometry parts. Often it's desirable to
highlight the entire equipment (e.g. a tank) and not just the individual pieces (e.g. a valve connected to the tank).
This can be achieved by determining the ancestor tree indices of the clicked geometry. `CogniteCadModel.getAncestorTreeIndices()`
can be used to determine this.

```js runnable
const selectedNodes = new TreeIndexNodeCollection();
model.assignStyledNodeCollection(selectedNodes, DefaultNodeAppearance.Highlighted);

viewer.on('click', async event => {
  const intersection = await viewer.getIntersectionFromPixel(
    event.offsetX, event.offsetY
  );
  if (intersection) {
    // Retrieve tree indices of parent. Second argument is used to control what ancestor level to retrieve;
    // 1 is direct parent, 2 is grand-parent etc
    const parentRange = await model.getAncestorTreeIndices(intersection.treeIndex, 1);
    // Replace current selection
    selectedNodes.updateSet(new IndexSet(parentRange));
  };
});
```


<!-- SOURCE_END: reveal/documentation\docs\examples\click-reactions-cad.mdx -->

================================================================================


<!-- SOURCE_START: reveal/documentation\docs\examples\click-reactions-pointcloud.mdx -->
## File: reveal/documentation\docs\examples\click-reactions-pointcloud.mdx

---
id: click-reactions-pointcloud
title: Reacting to clicks in point cloud models
description: Detecting intersections from clicks in point cloud models
---

While point clouds doesn't have a concept of nodes, applications can detect clicked points. Just like with
CAD models, `Cognite3DViewer.getIntersectionFromPixel` is used to determine world position and point from
a mouse click.

import { DemoWrapper } from '@site/docs/components/DemoWrapper';

<DemoWrapper modelType="pointcloud" />

## Detecting clicked positions

The following example detects intersections at clicked positions and marks the intersected positions
using a red sphere.

```js runnable
viewer.on('click', async event => {
  const intersection = await viewer.getIntersectionFromPixel(
    event.offsetX, event.offsetY
  );
  if (intersection) {
    const sphere = new THREE.Mesh(new THREE.SphereGeometry(0.1),
      new THREE.MeshBasicMaterial({ wireframe: true, color: 'red' }));
    sphere.position.copy(intersection.point);
    viewer.addObject3D(sphere);
  };
});
```

## Getting information about object assigned to a clicked point
Using Cognite's Annotations API or Cognite's 3D Contextualization Editor in CDF , a user can define objects within a point cloud model.
In order to retrieve information about a clicked object, users may get the `annotationId` or the `volumeInstanceRef` or the `assetRef` that is assigned to each point.

The `annotationId` and `assetRef` or `volumeInstanceRef` and `assetRef` are available in the `intersection` object returned from `viewer.getIntersectionFromPixel`.

An annotation id of 0 and a volumeInstanceRef of `undefined` means that the clicked point is not assigned to any object. `assetRef` will only be defined if the annotation associated with the point is linked to an asset in CDF. The objects in this point cloud example have no assets associated to them.

```js runnable
viewer.on('click', async event => {
  const intersection = await viewer.getIntersectionFromPixel(
    event.offsetX, event.offsetY
  );
  if (intersection) {
     alert(`Clicked object with annotationId ${intersection.annotationId} and assetId ${intersection.assetRef?.id}`);
  };
});
```

Cognite core data model point cloud volume click example
```jsx
viewer.on('click', async event => {
  const intersection = await viewer.getIntersectionFromPixel(
    event.offsetX, event.offsetY
  );
  if (intersection) {
     alert(`Clicked object with point cloud volume reference externalId ${intersection.volumeInstanceRef.externalId} and assetId ${intersection.assetRef?.id}`);
  };
});
```


<!-- SOURCE_END: reveal/documentation\docs\examples\click-reactions-pointcloud.mdx -->

================================================================================


<!-- SOURCE_START: reveal/documentation\docs\examples\clipping.mdx -->
## File: reveal/documentation\docs\examples\clipping.mdx

---
id: clipping
title: Clipping/slicing planes
describe: Reveal support adding a number of clipping planes to "cut through" the models.
---

import { DemoWrapper } from '@site/docs/components/DemoWrapper';
import useBaseUrl from '@docusaurus/useBaseUrl';

Clipping planes, also called slicing planes, can be used to "cut through" the model to reveal the interior. This is
useful to isolate interesting parts of the model and hide obscuring geometry. Reveal supports having multiple clipping planes
in arbitrary position and orientation. When clipping planes are active,
the amount of geometry loaded might be reduced since culled geometry doesn't need
to be loaded (or rather loaded in a lower detail level).
Clipping planes can both be applied to all models (global clipping planes) or to models individually (model clipping planes).

<video preload="auto" autoPlay="autoplay" loop controls>
  <source src={useBaseUrl('/img/cad-clipping.webm')} />
</video>

## Examples

<DemoWrapper />

### Single, fixed clipping plane

Global clipping planes are defined by providing zero or more [`THREE.Plane`](https://threejs.org/docs/#api/en/math/Plane)
to `Cognite3DViewer.setGlobalClippingPlanes`. The clipping planes are activated for all models and
replaces any active global clipping planes.

Typically, [setFromNormalAndCoplanarPoint](https://threejs.org/docs/#api/en/math/Plane.setFromNormalAndCoplanarPoint)
is used to create clipping planes. This function accepts a direction that defines the orientation of
the plane and a point on the plane. For example, the following
code will create a clipping plane that only accepts geometry below `Y = 55`:

```jsx runnable
const orientation = new THREE.Vector3(0, -1, 0);
const point = new THREE.Vector3(0, 55, 0);
const plane = new THREE.Plane().setFromNormalAndCoplanarPoint(orientation, point);
viewer.setGlobalClippingPlanes([plane]);
```

### Animated clipping plane

Planes can be manipulated runtime and effects will have an effect in the viewer. Note however that rendering must be
triggered after updating the plane before the change will have a visual effect. This can be done using
`Cognite3DViewer.requestRedraw()` or simply set new planes using `Cognite3DViewer.setClippingPlanes`.

Below is an example animates a clipping plane by ping-ponging the plane in the vertical direction.

```js runnable
const bbox = model.getModelBoundingBox();

const orientation = new THREE.Vector3(0, -1, 0);
const point = new THREE.Vector3(0, bbox.max.y, 0);
const plane = new THREE.Plane();
plane.setFromNormalAndCoplanarPoint(orientation, point);
viewer.setGlobalClippingPlanes([plane]);

const start = performance.now();
setInterval(() => {
  // Ping-pong plane between top of model and half-way to the bottom
  const dt = (performance.now() - start) / 1000.0
  const s = 0.5 * (Math.sin(Math.PI * dt / 10.0) + 1.0);
  point.y = bbox.max.y - (bbox.max.y - bbox.min.y) / 2.0 * s;
  plane.setFromNormalAndCoplanarPoint(orientation, point);

  viewer.requestRedraw();
}, 1000 / 60);
```

:::note
Updating `THREE.Plane`-instances will not trigger data loading. To manually trigger data loading after doing
substantial changes to the clipping planes, use `Cognite3DViewer.setGlobalClippingPlanes`. Note that the example
above performs substantial changes to the planes without loading data. In a real application it's recommended
to not load data during animation, but initiate data after an animation is completed.
:::

### Interactable clipping planes

Often it's required to have interactive clipping planes that the user can modify. The following example
show how [ThreeJS DragControls](https://threejs.org/docs/#examples/en/controls/DragControls) can be used
to manipulate the clipping planes.

After running this snippet the clipping plane can be manipulated by dragging the white manipulator.

```js runnable
// import { DragControls } from 'three/examples/jsm/controls/DragControls';

const bounds = model.getModelBoundingBox();

// Create draggable sphere at the center of bounds
const initialDragPosition = new THREE.Vector3(bounds.min.x, 0.5*(bounds.max.y + bounds.min.y), bounds.min.z);
const draggerGeometry = new THREE.SphereGeometry(5);
const draggerMaterial = new THREE.MeshBasicMaterial({ color: 'white' });
const draggerMesh = new THREE.Mesh(draggerGeometry, draggerMaterial);
draggerMesh.position.copy(initialDragPosition);
viewer.addObject3D(draggerMesh);

// Prepare a clipping plane
const orientation = new THREE.Vector3(0, -1, 0);
const plane = new THREE.Plane();
plane.setFromNormalAndCoplanarPoint(orientation, initialDragPosition);
viewer.setGlobalClippingPlanes([plane]);


// Handle drag events
const controls = new DragControls([draggerMesh], viewer.cameraManager.getCamera(), viewer.domElement);
controls.addEventListener('drag', () => {
  // Fix XZ-poistion
  draggerMesh.position.set(initialDragPosition.x, draggerMesh.position.y, initialDragPosition.z);
  draggerMesh.updateWorldMatrix();
  // Update clipping plane
  plane.setFromNormalAndCoplanarPoint(new THREE.Vector3(0, -1, 0), draggerMesh.position);
  viewer.requestRedraw();
});

// When we are hovering over a sphere we want to disable viewer controls
controls.addEventListener('hoveron', () => {
  viewer.cameraManager.deactivate();
  draggerMaterial.color.set('gray');
  viewer.requestRedraw();
});

// And turn them back on when we stop hovering over it
controls.addEventListener('hoveroff', () => {
  viewer.cameraManager.activate();
  draggerMaterial.color.set('white');
  viewer.requestRedraw();
});
```

### Clipping plane for individual models

Clipping planes can also be applied to individual models. To do so, the user may call `setModelClippingPlanes` on the model object. Model clipping planes can be combined with global clipping planes:

```js runnable
const orientation1 = new THREE.Vector3(0, 1, 0);
const point1 = new THREE.Vector3(0, 55, 0);
const plane1 = new THREE.Plane().setFromNormalAndCoplanarPoint(orientation1, point1);

const orientation2 = new THREE.Vector3(0, -1, 0);
const point2 = new THREE.Vector3(0, 65, 0);
const plane2 = new THREE.Plane().setFromNormalAndCoplanarPoint(orientation2, point2);

viewer.setGlobalClippingPlanes([plane1])
model.setModelClippingPlanes([plane2]);
```

### CAD geometry filter

A special type of clipping is to provide a "geometry filter" when loading the model. A geometry filter restricts the
area to load geometry for and is specified when the model is created. Geometry filters not only hides clipped geometry,
it unloads unnecessary geometry to save memory and improve rendering performance.

```js
const min = new THREE.Vector3(10, 20, 30);
const max = new THREE.Vector3(20, 30, 40);
viewer.addModel({
  modelId,
  revisionId,
  geometryFilter: {
    boundingBox: new THREE.Box3(min, max)
  }
});
```

:::note
Geometry filters are static and cannot be changed after creating the model. Instead, remove and re-add the model,
or use regular clipping planes if they change frequently.
:::


<!-- SOURCE_END: reveal/documentation\docs\examples\clipping.mdx -->

================================================================================


<!-- SOURCE_START: reveal/documentation\docs\examples\combine-models.mdx -->
## File: reveal/documentation\docs\examples\combine-models.mdx

---
id: combine-models
title: Combining multiple models
description: Load multiple models in the same viewer and apply transformation to correctly place the models
---

`Cognite3DViewer` supports combining multiple CAD- and point cloud-models into one view and lets
users interact with them as if they were one model. This is done by simply adding multiple models
using `Cognite3DViewer.addModel`, `Cognite3DViewer.addCadModel` or `Cognite3DViewer.addPointCloudModel`.

import { DemoWrapper } from '@site/docs/components/DemoWrapper';

<DemoWrapper />

## Modify coordinate systems

In many cases, it will be necessary to apply some transformation to the models to make them be in the same
coordinate system. This can be done using `setModelTransformation` with a [`THREE.Matrix4`](https://threejs.org/docs/#api/en/math/Matrix4)
representing the transformation.

The following example shows how to modify the coordinate system of a point cloud model to make it fit with a CAD model.

```js runnable
async function updateModelTransformation() {
  const pointCloudModel = await viewer.addModel({
    modelId: 5564365369975452 ,
    revisionId: 2817572261344477,
  })

  // Create translation matrix
  const translation = new THREE.Matrix4().makeTranslation(140, 75, -110);
  // Update model transformation
  pointCloudModel.setModelTransformation(translation);

  viewer.fitCameraToModel(pointCloudModel);
}

updateModelTransformation();
```

## Use geometry filters to extract parts of a model

Geometry filters allows only loading geometry within a specified box. By loading the same model with different geometry
filters, several subsections of the same model can be loaded in the same viewer.

```js runnable
viewer.models.forEach(x => viewer.removeModel(x));

async function addFilteredModel(box) {
  const model = await viewer.addModel({
    modelId: 3356984403684032,
    revisionId: 6664823881595566,
    geometryFilter: {
      boundingBox: box,
      isBoundingBoxInModelCoordinates: true
    }
  });
  return model;
}

const center = new THREE.Vector3(100, 25, -75);
const sliceOffset = new THREE.Vector3(0, 20, 0);
const sliceSize = new THREE.Vector3(100, 10, 100);

const sliceColors = [
  new THREE.Color(0.8, 0.0, 0.0),
  new THREE.Color(0.0, 0.8, 0.0),
  new THREE.Color(0.0, 0.0, 0.8),
  new THREE.Color(0.8, 0.8, 0.0),
  new THREE.Color(0.8, 0.0, 0.8)
]
for (let i = 0; i < 5; i++) {
  const sliceCenter = sliceOffset.clone().multiplyScalar(i).add(center);
  const sliceBounds = new THREE.Box3().setFromCenterAndSize(sliceCenter, sliceSize);
  const sliceColor = sliceColors[i];

  addFilteredModel(sliceBounds).then(model => {
    model.setDefaultNodeAppearance({ color: sliceColor });
  });
}
```

:::note
Geometry filters should not overlap as this will cause the same geometry to be loaded and
visualized more than once.
:::


<!-- SOURCE_END: reveal/documentation\docs\examples\combine-models.mdx -->

================================================================================


<!-- SOURCE_START: reveal/documentation\docs\examples\controlsmodes.mdx -->
## File: reveal/documentation\docs\examples\controlsmodes.mdx

---
id: controlsmodes
title: Camera controls modes
description: Usage of different camera controls modes
---

import { DemoWrapper } from '@site/docs/components/DemoWrapper';
import useBaseUrl from '@docusaurus/useBaseUrl';

Reveal allows you to use different camera controls modes. You can set different controls modes using `setCameraControlsOptions` method of `Cognite3DViewer` class in runtime. Configurable parameters are described in `CameraControlsOptions` type (see API Reference for details).

<DemoWrapper />

#### Mouse wheel action
Property `mouseWheelAction` describes what happens when user initiate a mouse wheel scroll. Possible valuses are:

| Value | Description |
| ----- | ----------- |
| `zoomToTarget` | zooms just to the current target (center of the screen) of the camera. |
| `zoomPastCursor` |  zooms in the direction of the ray coming from camera through cursor screen position, allows going through objects. |
| `zoomToCursor` | mouse wheel scroll zooms towards the point on the model where cursor is hovering over, doesn't allow going through objects. |

Default value is `zoomPastCursor`.

#### On click camera target change

Property `changeCameraTargetOnClick` enables or disables camera target change based on mouse clicks. When enabled, mouse click sets camera target to the point on the model where cursor is hovering over.

Default value is `false`.

Example of setting different camera controls options:

```jsx runnable
// import { isDefaultCameraManager } from '@cognite/reveal';

const newControlsOptions = {
  mouseWheelAction: 'zoomToCursor',
  changeCameraTargetOnClick: true,
};

if (isDefaultCameraManager(viewer.cameraManager)) {
  viewer.cameraManager.setCameraControlsOptions(newControlsOptions);
}
```


<!-- SOURCE_END: reveal/documentation\docs\examples\controlsmodes.mdx -->

================================================================================


<!-- SOURCE_START: reveal/documentation\docs\examples\image360-annotations.mdx -->
## File: reveal/documentation\docs\examples\image360-annotations.mdx

---
id: image360-annotations
title: 360 Image Annotations
description: Displaying and using annotations on 360 images
---

import useBaseUrl from '@docusaurus/useBaseUrl';

360-images may be connected to _annotations_ that outline regions of interest in the images. They are only visible when the user has entered the 360 image with which they are associated. Reveal automatically finds and downloads any relevant annotations from CDF and displays them by default.

### Annotation requirements

Reveal only considers annotations following specific requirements. For an annotation to be found by Reveal, it must have its `annotatedResourceId` set to the ID of an image file belonging to the 360 image set. Furthermore, `annotatedResourceType` must be `"file"` and `annotationType` must be either `"images.ObjectDetection"` or `"images.AssetLink`". Currently, only annotations containing either a `boundingBox` or a `polygon` is supported, `polyline` annotations will not be displayed. Refer to  [the CDF documentation](https://docs.cognite.com/api/v1/#tag/Annotations/operation/annotationsCreate) for details on the annotation types.

Annotations are represented by `Image360Annotation` instances. The annotations associated with a given entity revision can be queried with the `getAnnotations()` method on the `Image360Revision` instance. Note that annotations are loaded lazily, i.e. they will only be loaded when entering the relevant 360 image revision or when calling `getAnnotations()`.

## Styling Annotations

The appearance of annotations can be changed both through a "default" style and through styling annotations individually.

### Default style

To set a default style for all annotations in an `Image360Collection`, you may call the `collection.setDefaultStyle(appearance)`, where `collection` is an `Image360Collection` instance. The `appearance` argument is an `Image360AnnotationAppearance` instance, which has the following content:

#### `Image360AnnotationAppearance`

| Field        | Field type                | Description                                      |
|--------------|---------------------------|--------------------------------------------------|
| `color`      | `THREE.Color?`            | The color of the annotation                      |
| `visible`    | `boolean?`                | Whether the annotation should be visible or not  |

Leaving any of the fields undefined causes the annotations to revert to the original value for that property.

Using this, we can e.g. hide all annotations using

```js
collection.setDefaultAnnotationStyle({ visible: false });
```

### Individual style

Setting individual style can be done directly on an `Image360Annotation` object. Styling fields set this way will override those of the default appearance. E.g. to hide all annotations created by `'user0'` in a revision, you may write

```js
revision
  .getAnnotations()
  .then(annotations =>
    {
      annotations
        .filter(annotation => annotation.annotation.creatingUser === 'user0')
        .forEach(annotation => annotation.setVisible(false));
      viewer.requestRedraw();
    }
  );
```

Changes to individual styles are not visible until the next render, thus one should issue a call to `viewer.requestRedraw()` after applying styles to image annotations.

Since annotations are lazy-loaded, it is usually appropriate to only first apply styling upon entering the relevant revision. This can be done e.g. through registering a listener on the collection:

```js
collection.on('image360Entered', (entity, revision) => {
  revision
    .getAnnotations()
    .then(annotations => { styleAnnotations(annotations); viewer.requestRedraw(); });
});
```

## Mouse pointer interaction

The application may react to mouse interactions with annotations by subscribing to e.g. click-events on the viewer object, and subsequently using the received mouse position in the `get360AnnotationIntersectionFromPixel` method on the `Cognite3DViewer` instance. Note that this method will only check interactions with annotations that are associated with the current image360 revision and visible.

To e.g. color every clicked annotation with a blue color, you may write

```js
viewer.on('click', event => {
  viewer.get360AnnotationIntersectionFromPixel(
    event.offsetX, event.offsetY
  ).then(
    intersection => {
      intersection?.annotation.setColor(new THREE.Color(0, 0, 1));
      viewer.requestRedraw();
    }
  );
});
```


<!-- SOURCE_END: reveal/documentation\docs\examples\image360-annotations.mdx -->

================================================================================


<!-- SOURCE_START: reveal/documentation\docs\examples\image360.mdx -->
## File: reveal/documentation\docs\examples\image360.mdx

---
id: image360
title: 360 Images
description: Using and displaying 360 images using Reveal
---

import useBaseUrl from '@docusaurus/useBaseUrl';

360 images is a common way to augment the 3D experience of your application.
A 360 image is a controllable panoramic image that surrounds the original point from which the shot was taken.
360 images simulate being in the shoes of a photographer and looking around to the left, right, up and down as desired as well as zooming.

The `Cognite3DViewer` entrypoint exposes the following methods related to 360 images.

```ts
add360ImageSet(
  datasource: 'events',
  eventFilter: { [key: string]: string },
  add360ImageOptions?: AddImage360Options
): Promise<Image360Collection>;

remove360Images(...image360Entities: Image360[]): Promise<void>:

enter360Image(image360: Image360): Promise<void>:

exit360Image(): void
```

To visualize 360 images the data must have been previously ingested into [Cognite Data Fusion](https://www.cognite.com/en/product/cognite_data_fusion_industrial_dataops_platform).
More info on the ingestion process for 360 images can be found [here](https://docs.cognite.com/cdf/3d/guides/360images_upload/).

Once the data is ingested, a set of 360 images can be added to the viewer with `viewer.add360ImageSet(...)`.
`datasource` describes the source data type used for storing the 360 images.
Currently, the supported `datasource`s are `'events'` and `'datamodels'`.
The `second` argument describes the filter that is used when fetching data from the data source.
For events, this is a generic key-value pair and can point to any metdata that was set during ingestion. For datamodels, this is an identifier consisting of the Data Models `externalId` and `space` of the relevant 360 collection instance.
`viewer.add360ImageSet(...)` will return a `Image360Collection` which contains each of the `image360` entities for this given set.
The definition of `Image360Collection` can be found [here.](../api/@cognite/reveal/interfaces/Image360Collection)

The `AddImage360Options` is used for correcting / adding transformations to the set of 360 images. The declaration can be found [here.](../api/@cognite/reveal/type-aliases/AddImage360Options)

:::note
The 360 images should be ingested with proper transformation data, and one should only rely on `AddImage360Options` when failing to do so or when using the same 360 images for multiple 3D models with different coordinate system.
If you find that the data does not line up correctly, please try to update the source data instead adding the optional transformation.
:::

If the data is ingested similar to the guide referenced earlier, adding a set of 360 images can look like this:
```ts
viewer.add360ImageSet('events', { site_id: 'site-S01-area-a03' });
```

Once added to the viewer you will see a white circle representing each 360 image, here is an example of what it can look like:
<img src={useBaseUrl('/img/image360_1.png')} alt="AxisViewTool" />

Once the 360 images have been added, the icons are clickable, and when clicked, will enter the 360 image.
Reveal provides navigation using mouse or touch and transition effects when clicking another 360 image.
It is also possible enter a 360 image programmatically by calling the `enter360Image(image360: Image360)` method.
Exiting the visualization of a given 360 image is also possible using the `exit360Image()` method.
For convenience, this is bound to the `ESCAPE` key out of the box.

An example of entering into a 360 image can be seen here:
<img src={useBaseUrl('/img/image360_2.png')} alt="AxisViewTool" />

To remove one or more 360 images you can use the `remove360Images(...)` method which will also cleanup icons and other related data to the instance.

The `Image360` declaration can be found here [here.](../api/@cognite/reveal/interfaces/Image360)

The `transform` property from `Image360` represents the world transformation (rotation and translation) of the 360 image.
The `Image360Visualization` object has convenience functionality related to the visualization of the 360 image such as setting the opacity of the given 360 image.

## Events
The `Image360Collection` exposes events `image360Entered` and `image360Exited` for subscribing to enter & exit from 360 image mode. The `image360Entered` event is also triggered when the [revision](#historical-images) of an image is changed.
Subscribing to the events can look like
```ts
const image360Collection = await viewer.add360ImageSet('events', { site_id: 'site-S01-area-a03' });
image360Collection.on('image360Entered', (image360: Image360, revision: Image360Revision) => {
    const position = new THREE.Vector3();
    position.setFromMatrixPosition(image360.transform);
    alert(`360 Image mode entered at Image position: ${JSON.stringify(position)}`);
  });
image360Collection.on('image360Exited', () => { alert('Exited from 360 Image mode'); });
```

## Historical images
Some image collections include 360 images with historical revisions. The `360Image` interface includes a `getRevisions` method used to obtain a list of all available revisions for that image. This list contains `Image360Revision` objects sorted by date, with the most recent revision at the beginning of the list.

Each `Image360Revision` object has a `date` property that represents when the image was taken. If an image is undated, the `date` property will be `undefined`.
```ts
image360.getRevisions().forEach(availableRevision => console.log(availableRevision.date);
```

You can get the currently active revision for any `Image360` by using the `getActiveRevision` method. Optionally, you can retrieve the active revision when `image360Entered` is triggered, as the revision of the entered image is included in the event.
```ts
image360Collection.on('image360Entered', (image360: Image360, revision: Image360Revision) => {
    const activeDate = image360.getActiveRevision().date;
    const enteredDate = revision.date;
    alert(`The result is the same: ${activeDate} is equal to ${enteredDate}`);
};
```

To change the revision of an `Image360`, call the `enter360Image` method on `Cognite3DViewer`. Pass in the `Image360` you want to change, along with one of the available revisions for that image.
```ts
const revisions = image360.getRevisions();
const newRevision = revisions[1];
await viewer.enter360Image(image360, newRevision);
alert(`Revision changed to ${newRevision.date}`);
```


<!-- SOURCE_END: reveal/documentation\docs\examples\image360.mdx -->

================================================================================


<!-- SOURCE_START: reveal/documentation\docs\examples\node-visiting.mdx -->
## File: reveal/documentation\docs\examples\node-visiting.mdx

---
id: node-visiting
title: Node visitor functions
describe: Reveal has functions for iterating over nodes, either all nodes in a 3D model or a subtree of a parent node.
---

import { DemoWrapper } from '@site/docs/components/DemoWrapper';

Reveal has functions for iterating over CAD nodes, either all nodes in a 3D model or a subtree of a parent node.
Note that all functions are async, and the action that you pass is not applied immediately. A single model can
have millions of nodes. To avoid long blocking operations the action is applied in blocks, allowing for an
interactive page while the action is being applied.

<DemoWrapper />

## Iterate over all nodes

This example only demonstrates how iteration over model nodes performed gradually.

```jsx runnable
async function visitAllNodes() {
  let sum = 0;
  await model.iterateNodesByTreeIndex(treeIndex => sum = sum + treeIndex)
  alert('Iteration is done! Sum of all tree indexes is ' + sum);
}
visitAllNodes();
```

## Iterate over subtree nodes

`CogniteCadModel.iterateSubtreeByTreeIndex` iterates over all descendants of a node by tree index. The provided
tree index is included in the set of visited nodes. The following example sets the color of all descendants of
a node. This mimics the functionality of `CogniteCadModel.setNodesColorsByTreeIndex` with `applyToChildren`
set to `true`.

```jsx runnable
async function visitSubtree() {
  let sum = 0;
  await model.iterateSubtreeByTreeIndex(917985, treeIndex => sum = sum + treeIndex);
  alert('Iteration is done! Sum of all tree indexes in subtree is ' + sum);
}
visitSubtree();
```


<!-- SOURCE_END: reveal/documentation\docs\examples\node-visiting.mdx -->

================================================================================


<!-- SOURCE_START: reveal/documentation\docs\examples\point-to-point-measurement.mdx -->
## File: reveal/documentation\docs\examples\point-to-point-measurement.mdx

---
id: point-to-point-measurement
title: Point to point measurement
description: Demo shows how to measure point to point distance in Reveal.
---

import { DemoWrapper } from '@site/docs/components/DemoWrapper';
import useBaseUrl from '@docusaurus/useBaseUrl';

The `MeasurementTool` is a measuring tool for point to point distance in 3D models, by clicking to- and from-points. The default measurement unit is meters, but the tool provides callbacks to allow configuring the unit.
When exiting from the tool, all the measurement will be removed from the `Cognite3DViewer`. Note that the precision the tool can provide is limited, and the tool should only be used for approximate measurement - not high precision measurement for e.g. construction.

To effectively edit measuring line properties, tool is configurable with `MeasurementOptions` options to set
- Custom label content for each measurement.
- Size of line width in meters.
- Color of line.

:::tip
`CameraControlsOptions.changeCameraTargetOnClick` should be set to `false` to avoid click event registering for camera when `MeasurementTool` is active. Also avoid any custom click-handler that might interfere with the measurement tool.
:::

<DemoWrapper />

## Point to point distance measurment
To enter point-to-point measurement mode, use `MeasurementTool.enterMeasurementMode()`. This will register events for handling mouse clicks and touch events to allow placing the measurement end-points. Note that the tool is optimized for use with mouse.

To exit measurement mode, call `exitMeasurementMode()`. The tool will also exit measurement mode if user presses Escape key.

```jsx runnable
// import { MeasurementTool } from '@cognite/reveal';

const measurementTool = new MeasurementTool(viewer);
measurementTool.enterMeasurementMode();
```

Another way to add measurements is to call the `MeasurementTool.addMeasurement()` method. It takes the two endpoints of the measurement line as arguments.

## Events
The tool exposes events for subscribing to measurement start, end & added. In the below example, the mouse cursor is changed to a cross-hair while measuring.

```jsx runnable
// import { MeasurementTool } from '@cognite/reveal';
const measurementTool = new MeasurementTool(viewer);

// Subscribe to measurement events
measurementTool.on('started',
  () => viewer.domElement.style.cursor = 'crosshair');
measurementTool.on('ended',
  () => viewer.domElement.attributeStyleMap.delete('cursor'));
measurementTool.on('added', (measurement) => {
  alert(`Measurement added with ${JSON.stringify(measurement.distanceInMeters)} distance!`);
  measurementTool.exitMeasurementMode();
});

measurementTool.enterMeasurementMode();
```

### Mode of measurement
To get the mode of measurement `MeasurementTool.isInMeasurementMode`. It returns `true` if the measurement is active else `false`.

## Set width, color & label units of the measuring line
To change width, color of the line and label units, use `MeasurementTool.setLineOptions(options: MeasurementOptions)`. MeasurementOptions expects
  - `distanceToLabelCallback` : callback for custom operation on measurement labels
  - `lineWidth` : number - units in meters
  - `color` : THREE.color

The updated line width, color and label units will be applied for the next measuring distance.

```jsx runnable
// import { MeasurementTool } from '@cognite/reveal';

const lineOptions = {
  distanceToLabelCallback: (distanceInMeters) => {
  // 1 meter = 100 centimeter
  return `${(distanceInMeters * 100).toFixed(2)} cm`;
  },
  lineWidth: 0.1,
  color: new THREE.Color(0xff0000)
};
const measurementTool = new MeasurementTool(viewer);
measurementTool.enterMeasurementMode();

//Update line width, color and label units for the next measuring line.
measurementTool.setLineOptions(lineOptions);
```

### Get all measurement
To get all measurements added the tool provides `MeasurementTool.getAllMeasurements()` which will
return an array of measurements of type `Measurement`, having below details
  - `measurementId` : unique id of measurement.
  - `startPoint` : start point of the measurement.
  - `endPoint` : end point of the measurement.
  - `distanceInMeters` : measured distance in meters.
```jsx runnable
// import { MeasurementTool } from '@cognite/reveal';

const measurementTool = new MeasurementTool(viewer);
measurementTool.enterMeasurementMode();

//add measurements

//get all measurements
setTimeout(() => {
  const measurements = measurementTool.getAllMeasurements();
  measurements.forEach(measurement => {
    alert(measurement.distanceInMeters);
  });
}, 6000);
```

### Change appearance of existing measurement
To change existing measurement line width or color, use `MeasurementTool.updateLineWidth(lineWidth: number)` or `MeasurementTool.updateLineColor(color: THREE.Color)`

```jsx runnable
// import { MeasurementTool } from '@cognite/reveal';

const measurementTool = new MeasurementTool(viewer);
setInterval(() => {
  const measurements = measurementTool.getAllMeasurements();
  console.log(measurements);
  for (const measurement of measurements) {
    const color = Math.floor(Math.random() * 16777215);
    const lineWidth = (Math.random() * 1.0) + 0.2;
    measurementTool.updateLineColor(measurement, new THREE.Color(color));
    measurementTool.updateLineWidth(measurement, lineWidth);
  }
}, 200);
measurementTool.enterMeasurementMode();
```

### Remove measurement
To remove a measurement from the viewer, we have `MeasurementTool.removeMeasurement(measurement: Measurement)`
  - `measurement` : Measurement to be removed.

```jsx runnable
// import { MeasurementTool } from '@cognite/reveal';

const measurementTool = new MeasurementTool(viewer);
measurementTool.enterMeasurementMode();

//remove the first measurement in the added list
setTimeout(() => {
  const measurements = measurementTool.getAllMeasurements();

  if (measurements[0]) {
    measurementTool.removeMeasurement(measurements[0]);
  }
}, 6000);
```

### Hide and show measurements
It may be useful to view the details of an object without measurements blocking the view.
It's possible to toggle measurement visibility on and off in the viewer.
To do this, use `MeasurementTool.visible(enable: boolean)`.
```jsx
//Hide all measurements in the viewer
measurementTool.visible(false);
```

To remove all measurement from the viewer, use `MeasurementTool.removeAllMeasurement()`

### Label visibility
It is also possible to hide/show only the labels of the measurement using `MeasurementTool.showMeasurementLabels(enable: boolean)`.
```jsx
// Hide all measurement lables
measurementTool.showMeasurementLabels(false);
```


<!-- SOURCE_END: reveal/documentation\docs\examples\point-to-point-measurement.mdx -->

================================================================================


<!-- SOURCE_START: reveal/documentation\docs\examples\pointcloud-styling.mdx -->
## File: reveal/documentation\docs\examples\pointcloud-styling.mdx

---
id: pointcloud-styling
title: Pointcloud styling
description: Usage of the styling API for pointcloud models
---

Cognite Data Fusion has a concept of "objects" in point clouds, represented by one or more bounding volumes for
each object. The objects are backed by the [CDF Annotations API](https://docs.cognite.com/api/v1/#tag/Annotations) or [CDF CognitePointCloudVolume](https://docs.cognite.com/cdf/dm/dm_reference/dm_core_data_model/#cognitepointcloudvolume).
Reveal supports styling individual objects within a point cloud.

import { DemoWrapper } from '@site/docs/components/DemoWrapper';

<DemoWrapper modelType="pointcloud" />

In this context, a _stylable object_ is represented by a volume in space. Styling an object results in all points that lie within the corresponding volume to attain the assigned style.

Stylable objects must be supplied separately from the model itself. Upon adding a new point cloud model to the viewer, Reveal will automatically fetch data describing the point cloud objects from CDF's Annotations API or CDF's CognitePointCloudVolume, if any are available.
To get the number of fetched stylable objects, use the property `model.stylableObjectCount`, where `model` is a `CognitePointCloudModel`.

After the model and associated stylable objects are loaded, you may list the objects using `model.stylableObjects`. This contains all stylable objects as instances of `PointCloudObjectMetadata`, containing the following fields for CDF's Annotations:

| Field                      | Field type                      | Description                                                                           |
|----------------------------|---------------------------------|---------------------------------------------------------------------------------------|
| `annotationId`             | `number`                        | The ID of the CDF annotation that this stylable object corresponds to.                |
| `assetRef`                 | `AnnotationsAssetRef?`          | A reference to an asset. Either the internal ID or the external ID, if any.           |
| `boundingBox`              | `THREE.Box3`                    | The bounding box of the stylable object in Reveal space.                              |

And contains following fields for CDF's `CognitePointCloudVolume`

| Field                      | Field type                      | Description                                                                           |
|----------------------------|---------------------------------|---------------------------------------------------------------------------------------|
| `volumeInstanceRef`        | `DMInstanceRef`                 | Reference to the `CognitePointCloudVolume`. It consists of a space and an external Id.|
| `assetRef`                 | `DMInstanceRef?`                | Reference to the `CogniteAsset`. It consists of a space and an external Id, if any.   |
| `boundingBox`              | `THREE.Box3`                    | The bounding box of the stylable object in Reveal space.                              |

To visualize all bounding boxes associated with the stylable objects:

```js runnable
const boxGroup = new THREE.Group();

model.stylableObjects.forEach(obj => boxGroup.add(new THREE.Box3Helper(obj.boundingBox)));

viewer.addObject3D(boxGroup);
```

Point cloud objects can be styled with a `PointCloudAppearance` object, containing the following attributes:

| Field                      | Field type                      | Description                                                                           |
|----------------------------|---------------------------------|---------------------------------------------------------------------------------------|
| `color`                    | `THREE.Color?`                  | Override color. If all components equal to zero, the override is unused.              |
| `visible`                  | `boolean?`                      | When false, stylable object will be invisible. Default value is `true`.               |

To assign a style to one or more stylable objects, you must first create an instance of the abstract class `PointCloudAnnotationVolumeCollection`.
The `AnnotationIdPointCloudObjectCollection` class can be used for CDF's Annotations, which is initialized with a list of annotation IDs corresponding to stylable objects.

The `PointCloudDMVolumeCollection` class can be used for styling with CDF's Core datamodel CognitePointCloudVolume, which is initialized with a list of DM references.
To see all available annotation IDs or point cloud volume references associated with the model, you may use the `model.stylableObjects`.

To color all stylable objects green for annotation IDs:

```js runnable
const annotationIds = [];

model.stylableObjects.forEach(objectMetadata => annotationIds.push(objectMetadata.annotationId));

const objectCollection = new AnnotationIdPointCloudObjectCollection(annotationIds);
const appearance = { color: new THREE.Color(0, 1, 0) };

model.assignStyledObjectCollection(objectCollection, appearance);
```

To color all stylable objects blue for point cloud volume references:
```jsx
const pointCloudVolumeRefs = [];

model.stylableObjects.forEach(objectMetadata => {
  if (isDMPointCloudVolume(objectMetadata))
    pointCloudVolumeRefs.push(objectMetadata.volumeInstanceRef);
});

const objectCollection = new PointCloudDMVolumeCollection(pointCloudVolumeRefs);
const appearance = { color: new THREE.Color(0, 0, 1) };

model.assignStyledObjectCollection(objectCollection, appearance);
```

After assigning style to an object collection, you may use the property `model.styledCollections` to get a list of all object collections and their assigned styles registered on the model.

## Default appearance

It is also possible to set a default appearance for the point cloud using the `model.setDefaultPointCloudAppearance`. The following example makes all annotated objects visible, while hiding everything else:

```js runnable
const annotationIds = [];

model.stylableObjects.forEach(annotationMetadata => annotationIds.push(annotationMetadata.annotationId));

const objectCollection = new AnnotationIdPointCloudObjectCollection(annotationIds);
const appearance = { visible: true };

model.assignStyledObjectCollection(objectCollection, appearance);
model.setDefaultPointCloudAppearance({ visible: false });
```

For Cognite core data model point cloud model
```jsx
const pointCloudVolumeRefs = [];

model.stylableObjects.forEach(objectMetadata => {
  if (isDMPointCloudVolume(objectMetadata))
    pointCloudVolumeRefs.push(objectMetadata.volumeInstanceRef);
});

const objectCollection = new PointCloudDMVolumeCollection(pointCloudVolumeRefs);
const appearance = { visible: true };

model.assignStyledObjectCollection(objectCollection, appearance);
model.setDefaultPointCloudAppearance({ visible: false });
```

Like in CAD styling, stylable objects that are part of multiple styled object collections will attain the appearance of the object set whose first style assignment was last.

## Unassigning styled object collections

To reset style of an object collection, use `model.unassignStyledObjectCollection` with the previously styled `PointCloudAnnotationVolumeCollection` as argument. To reset all styled objects use `model.removeAllStyledCollections`

## Reset all styled object collections

To reset all styled object collections, use the method `model.removeAllStyledObjectCollections()`.

This example removes all style on stylable object collections and makes sure the rest of the point cloud is visible.
```js runnable
model.removeAllStyledObjectCollections();
model.setDefaultPointCloudAppearance({ visible: true });
```

## Point cloud shapes

Currently, the only supported shapes that constitute point cloud objects are cylinders and boxes. The specification for how this data is stored, can be found in the [API documentation for Retrieve Annotation](https://docs.cognite.com/api/v1/#tag/Annotations/operation/annotationsGet) under Responses -> 200 Successful retrieval -> `data` -> `pointcloud.BoundingVolume`.
And for Cognite core data model refer CognitePointCloudVolume.

Note that Reveal will visualize the shapes with a somewhat larger size than how they are stored, as to make sure that all points that lie on the surface of the objects also are included as parts of it.


<!-- SOURCE_END: reveal/documentation\docs\examples\pointcloud-styling.mdx -->

================================================================================


<!-- SOURCE_START: reveal/documentation\docs\examples\pointcloud.mdx -->
## File: reveal/documentation\docs\examples\pointcloud.mdx

---
id: pointcloud
title: Pointcloud models
description: Usage of pointcloud models with Cognite3DViewer
---

import useBaseUrl from '@docusaurus/useBaseUrl';

`@cognite/reveal` supports point clouds through a third-party library, [`three-loader`](https://github.com/pnext/three-loader) that is
included in the Reveal codebase and modified for our needs. Most of the internal point cloud logic is based on [`potree`](https://github.com/potree/potree/).
The viewer supports loading both point clouds and CAD models at the same time. Point clouds can be generated from various sources including
[laser scans](https://en.wikipedia.org/wiki/Laser_scanning) and [photogrammetry models](https://en.wikipedia.org/wiki/Photogrammetry).
Loading point clouds is done with identical code to when [loading CAD models](./cad-basic) - Reveal will determine that the model
is a point cloud model and act accordingly.

import { DemoWrapper } from '@site/docs/components/DemoWrapper';

<DemoWrapper modelType="pointcloud" />

```jsx
import { CogniteClient } from '@cognite/sdk';
import { Cognite3DViewer } from '@cognite/reveal';

const loginManager = new LoginManager('publicdata', 'api');
const client = new CogniteClient({
  appId: 'myPointCloudAppId',
  project: loginManager.project,
  getToken: async () => loginManager.getToken()
});

// some div in your html page for Cognite3DViewer to insert a canvas
const domElement = document.getElementById('canvas-wrapper');

async function main() {
  // to view models from CDF authentication is required

  await client.authenticate();

  const viewer = new Cognite3DViewer({ sdk: client, domElement });

    // load a model and add it on 3d scene
    // https://publicdata.fusion.cognite.com/publicdata/3d-models/5564365369975452/revisions/2817572261344477
    const model = await viewer.addModel({
      modelId: 5564365369975452,
      revisionId: 2817572261344477,
    });
    viewer.loadCameraFromModel(model);

    // call viewer.dispose() when you don't need the viewer anymore
  }
  main();
```

## Loading a Model
There are two primary ways to load a 3D model into `Cognite3DViewer`, using `modelId` and `revisionId`, or using `revisionExternalId` and `revisionSpace`.

### Method 1: Using `modelId` and `revisionId`
This method invloves directly specifying the `modelId` and `revisionId` of the 3D model user wants to load.
```jsx
const model = await viewer.addModel({
  modelId: 9876543210987654,
  revisionId: 1234567890123456,
});
viewer.loadCameraFromModel(model);
```

### Method 2: Using `revisionExternalId` and `revisionSpace`
This method involves specifying the `revisionExternalId` and `revisionSpace` of the 3D model. This is useful when you are working with [CDF 3D core data model](https://docs.cognite.com/cdf/dm/dm_reference/dm_core_data_model/#cognite3dmodel)
```jsx
const model = await viewer.addModel({
  revisionExternalId: 'cog_3d_revision_1234567890123456',
  revisionSpace: 'core_dm_3d_space',
});
viewer.loadCameraFromModel(model);
```

## Point size

You can use `pointSize` property to set the size of each rendered point in a point cloud model.

```js runnable
model.pointSize = 0.1;
```

## Point budget

The point budget limits the number of points loaded and rendered at any given time,
which helps to adapt performance requirements to the capabilities of different hardware.
Recommended values are between 500.000 and 10.000.000. The budget is shared among all
loaded point clouds.

```js runnable
viewer.pointCloudBudget = { numberOfPoints: 500000 };
```

## Point shape

You can set the point shape of each rendered point in the point cloud. Values are defined by `PointShape` enum.

```js runnable
// import { PointShape } from '@cognite/reveal';
model.pointShape = PointShape.Square;
```

## Point color type

You can specify in which way points should be colored. Values are defined by `PointColorType` enum.

```js runnable
// import { PointColorType } from '@cognite/reveal'
model.pointColorType = PointColorType.Depth;
```

Other useful coloring schemes are `Rgb` (color) , `Classification` (color by point class) and `Intensity`
(strength of the backscattered signal in a laser scan).

## Hide model

Models can be temporarily hidden using `CognitePointCloudModel.visible`.
The viewer must be explicitly re-rendered after setting the visibility flag:

```js runnable
model.visible = false;
viewer.requestRedraw();

setTimeout(() => {
  model.visible = true;
  viewer.requestRedraw();
}, 5000);
```

## Point cloud post processing effects

### Point blending

Users can enable the "point blending" effect
which produces a more "stable" rendering of surfaces within the point cloud model, but it comes with a cost of
decreased performance.

<a target='_blank' href={useBaseUrl('/img/point-blending.jpg')}>
  <img src={useBaseUrl('/img/point-blending.jpg')} alt="Illustration of point blending effect" />
</a>

You can enable the described effect by passing a corresponding property on initialization of `Cognite3DViewer`:
```jsx
const viewer = new Cognite3DViewer(
  {
    sdk: client,
    pointCloudEffects: {
      pointBlending: true
    }
  });
```

### Eye-Dome Lighting

Eye-Dome Lighting (EDL) is enabled by default. It draws an outline along edges in the point cloud, making it easier to distinguish objects and features visually. It has a small performance impact.

<a target='_blank' href={useBaseUrl('/img/pointcloud-edl.png')}>
  <img src={useBaseUrl('/img/pointcloud-edl.png')} alt="Illustration of the Eye-Dome Lighting (EDL) effect. Left image is rendered without EDL, the right one is rendered with EDL, which is the default case." />
</a>

You may disable EDL by passing `'disabled'` as the value for `edlOptions` in `pointCloudEffects`:

```js
const viewer = new Cognite3DViewer(
  {
    sdk: client,
    pointCloudEffects: {
      edlOptions: 'disabled'
    }
  });
```

You may also alter the `radius` and the `strength` parameters of the effect. Any of these may be left unspecified, in which case they will be given a default value:


```js
const viewer = new Cognite3DViewer(
  {
    sdk: client,
    pointCloudEffects: {
      edlOptions: { radius: 2.2, strength: 0.5 }
    }
  });
```

## Classification filtering

Some point clouds have classification information associated with each point.  This can
be used for coloring or to filter the point cloud.

:::note
The demonstration model doesn't have classification data so the examples below are not
runnable.
:::

To list classes available in a point cloud model, use `CognitePointCloudModel.getClasses`:

```js
const classes = model.getClasses();
for (const pointClass of classes) {
  console.log(pointClass); // Prints a numeric class code
}
```

It's also possible to check if a model has a given class by using `CognitePointCloudModel.hasClass`.
A list of well-known point class codes are defined in `WellKnownAsprsPointClassCodes`. These definitions
by the [ASPRS LAS 1.4 specifications](http://www.asprs.org/wp-content/uploads/2019/03/LAS_1_4_r14.pdf).

To filter away certain classes, use `CognitePointCloudModel.setClassVisible`:

```js
model.setClassVisible(WellKnownAsprsPointClassCodes.Ground, false);
```

To check if a class currently is visible, use `isClassVisible`:

```js
const visible = model.isClassVisible(WellKnownAsprsPointClassCodes.Ground);
```

## Unloading models

Point clouds (and CAD models) can be unloaded using `Cognite3DViewer.removeModel()`:

```js runnable
viewer.removeModel(model)
```


<!-- SOURCE_END: reveal/documentation\docs\examples\pointcloud.mdx -->

================================================================================


<!-- SOURCE_START: reveal/documentation\docs\examples\rendering-resolution.mdx -->
## File: reveal/documentation\docs\examples\rendering-resolution.mdx

---
id: rendering-resolution
title: Resolution Control
description: Section about how resolution is determined and how it can be controlled by the user
---

# Resolution Control

Reveal will automatically limit its rendering resolution when renderering to a large surface for the sake of performance. This may result in unnecessarily low-detail renders on high-end devices with large monitors.

The user can use the `ResolutionOptions` type to control the rendering resolution. `ResolutionOptions` has the following fields:

| Field                          | Field type                  | Description                                                                      |
| ------------------------------ | --------------------------- | ----------------------------------- |
| `maxRenderResolution`          | `number?`                   | Set the maximum render resolution                                                |
| `movingCameraResolutionFactor` | `number?`                   | Set the factor that the max resolution is multiplied with when camera is moving. Must be between 0 and 1.  Lower factor means lower resolution while camera is moving. |

The `ResolutionOptions` instance is applied to the viewer instance using the `setResolutionOptions` method on `Cognite3DViewer`.

## Max Resolution

To override Reveal's default resolution limit, users may call the `setResolutionOptions` method with `maxRenderResolution` set to a pixel count, e.g.

```
viewer.setResolutionOptions({ maxRenderResolution: 1.4e6 });
```

The value is a number denoting the desired count of pixels on the screen. To e.g. increase the rendering resolution to full HD (1920x1080), call the method with the value 1920 * 1080 = `2073600`.

## Decrease resolution on camera movement

In order to improve the user experience for low-end devices, Reveal can be configured to lower the render resolution when the camera is moving, making the movement smoother. This can be done by calling the `setResolutionOptions` method with an object having the field `movingCameraResolutionFactor` set to a factor, e.g.

```
viewer.setResolutionOptions({ movingCameraResolutionFactor: 0.5 });
```

The factor must be between 0 and 1 and is multiplied into the render resolution of the canvas when the camera is moving. Supplying e.g. a factor of 0.25 will divide the total number of pixels rendered by approximately four while moving.

If using a custom camera manager, be aware that this feature uses the current `CameraManager`'s `'cameraStop'` and `'cameraChange'` events to decide whether the camera is moving or not.

<!-- SOURCE_END: reveal/documentation\docs\examples\rendering-resolution.mdx -->

================================================================================


<!-- SOURCE_START: reveal/documentation\docs\examples\timeline.mdx -->
## File: reveal/documentation\docs\examples\timeline.mdx

---
id: timelinetool
title: Timeline tool
describe: Applying styles to nodes based on date with Play & Stop
---

import { DemoWrapper } from '@site/docs/components/DemoWrapper';

Reveal allows for applying styles to nodes based on date property and can be viewed as a playable entity
where node styles are applied to different nodes which can be used to showcase progress of the model construction.
The API is influenced by the [node styling API](cad-styling) and it's recommended to read up on this documentation before reading this document.

:::note
The test data used in the documentation site is for testing and to show the capabilities of the tool.
The examples shown is therefore might not be a ideal model construction progression.
:::

<DemoWrapper />

## Timeline

The timeline tool provides ability to apply styles by date. It works by creating a set of "keyframes"  for provided dates.
Each keyframe has a set of associated styled node collections.

### Creating keyframes
To create a `Keyframe`, use `createKeyframe(date: Date)`
- `date` - Date reference for the keyframe

```jsx
const keyframe = timeline.createKeyframe(new Date('2021-10-05'));
```

### Add styled node collections to keyframes
Tool provides feature to add nodes & styles to a Keyframe or number of Keyframes or to all of the Keyframes.
For more information on assigning styles please refer [CAD Styling](cad-styling).

```jsx
const nodes = new AssetNodeCollection(sdk, model);
keyframe.assignStyledNodeCollection(nodes, { renderGhosted: false, color: new THREE.Color(0.6, 0.8, 0.45) });
```

### Remove styled node collections from keyframes

Styled node collections can be removed from keyframes.
`unassignStyledNodeCollection(nodeCollection: NodeCollection)`
- `nodeCollection` - Node set to be removed from keyframes.

```jsx
keyframe.unassignStyledNodeCollection(nodes);
```

### Play timelines
We use `play(startDate: Date, endDate: Date, durationInMilliSeconds: number)`
- `startDate` - Keyframe date to start the playback of the timeline keyframes.
- `endDate` - Keyframe date to stop the playback of the timeline keyframes.
- `durationInMilliSeconds` - Number of milli-seconds for the full playback of keyframes.

Note that the dates doesn't need to match the keyframe dates - the playback will be performed on a "virtual" timeline that is linear in time and update the styling whenever a new keyframe is activated. Only one keyframe will be active at any given time, i.e. the model will only have styling from one keyframe active at any time.

```js runnable
// import { DefaultNodeAppearance, TreeIndexNodeCollection } from '@cognite/reveal';
// import { TimelineTool, Keyframe } from '@cognite/reveal';

function createProgressBarContainer() {
  const container = document.createElement('div');
  container.style.cssText = `
    background: #333;
    border-radius: 13px;
    width: 500px;
    height: 25px;
    padding: 3px;
    align-items: center;
    justify-content: center;
    position: relative;
    transform: translate(-50%, -50%);
    left: 50%;
    bottom: 20px;
  `;
  return container;
}

function createProgressBar() {
  const progress = document.createElement('div');
  progress.style.cssText = `
    /* Progress after moving to next Keyframe */
    content: '';
    display: block;
    background: DodgerBlue;
    width: 0%;
    height: 20px;
    border-radius: 9px;
    position: relative;
  `;
  return progress;
}

model.setDefaultNodeAppearance({ color: new THREE.Color(0.8, 0.08, 0) });

const timeline = new TimelineTool(model);

for (let i = 0; i < 20; i++) {
  const indexSet = new IndexSet();
  indexSet.addRange(new NumericRange(0, (i+1)*60000));
  const nodes = new TreeIndexNodeCollection(indexSet);
  const keyframe = timeline.createKeyframe(new Date(`2020-01-${i+1}`));
  keyframe.assignStyledNodeCollection(nodes, { color: new THREE.Color(0.08, 0.8, 0) });
}

// div element Cognite3DViewer to insert into the canvas
const domElement = document.getElementById('demo-wrapper');
const container = createProgressBarContainer();
const progressBar = createProgressBar();
container.appendChild(progressBar);
domElement.appendChild(container);

const durationMs = 20000;
const startDate = new Date('2020-01-01');
const endDate = new Date('2020-01-20');
timeline.subscribe('dateChanged', (data) => {
  const progress = ((data.date.getTime() - data.startDate.getTime()) / (data.endDate.getTime() - data.startDate.getTime()) * 100);
  progressBar.style.width = `${progress}%`;
  });

timeline.play(startDate, endDate, durationMs);
```

### Stop timeline playback

```jsx
timeline.stop();
```

### Pause timeline

```jsx
timeline.pause();
```

### Resume timeline

```jsx
timeline.resume();
```

### Get Keyframe by Date
`getKeyframeByDate(date: Date)`
- `date` - Date of the Keyframe which needs retrived.

```jsx
const keyframe = timeline.getKeyframeByDate(new Date('2021-10-06'));
```

### Reacting to date changes while in playback mode
While in the play state, the tool emits events which will be helpful for the users to calculate the progression of the playback of the timeline.
The tool provides a `TimelineDateUpdateDelegate` event which can be subscribed to received below data.
- `date` - Virtual date which can be used to calculate progression.
- `activeKeyframe` - Current active `Keyframe` in the playback.
- `startDate` - Virtual date to start the playback of the timeline.
- `endDate` - Virtual date to stop the playback of the timeline.

:::note
If we have subscribed to `dateChanged` event and if there are no active Keyframe during Timeline playback, than `activeKeyframe` data will be `undefined` value.
:::

```jsx
// import { TimelineDateUpdateDelegate } from '@cognite/reveal';

timeline.subscribe('dateChanged', (data) => {
  const date = data.date;
  const keyframe = data.activeKeyframe;
  const startDate = data.startDate;
  const endDate = data.endDate;
});
```

To unsubscribe from `TimelineDateUpdateDelegate` event

```jsx
timeline.unsubscribe('dateChanged', (data) => {});
```

### Removing Keyframe
#### By Date
To remove any Keyframe, use `removeKeyframeByDate(date: Date)`
- `date` - Date of the Keyframe which needs to be removed from the Timeline.

```jsx
timeline.removeKeyframeByDate(new Date('2021-10-07'));
```

#### By Keyframe
To remove any Keyframe, use `removeKeyframe(keyframe: Keyframe)`
- `keyframe` - Keyframe to be removed from the Timeline.

```jsx
timeline.removeKeyframe(keyframeMechNodes);
```

### Keyframes in Timeline
Gets all Keyframes in the Timeline

```jsx
const allKeyframes = timeline.getAllKeyframes();
```


<!-- SOURCE_END: reveal/documentation\docs\examples\timeline.mdx -->

================================================================================


<!-- SOURCE_START: reveal/documentation\docs\extending\camera-manager.mdx -->
## File: reveal/documentation\docs\extending\camera-manager.mdx

---
id: camera-manager
title: Custom CameraManager
description: Shows how to implement custom CameraManager to enable new camera manipulation features.
---

import useBaseUrl from '@docusaurus/useBaseUrl';

By default `Cognite3DViewer` uses `DefaultCameraManager` class to manage user interaction with the camera.
In certain cases it can be useful to customize behaviour of the camera:

- Need to provide custom `THREE.PerspectiveCamera` object to `Cognite3DViewer`
- Need to extend camera controls to any specific case that is not covered by current implementation


## Overview

To create a custom camera manager class, `CameraManager` interface from `@cognite/reveal` must be implemented
and provided to `Cognite3DViewer` on construction using the `cameraManager`-option. You can also set camera manager
in runtime by calling `setCameraManager` method of `Cognite3DViewer` class. Interface is defined [here in the API reference](../api/@cognite/reveal/interfaces/CameraManager.md).

Main implementation specific functions are `setCameraState`, `fitCameraToBoundingBox` and `update`.
Setting state shouldn't be possible when `rotation` and `target` are passed at the same time because they could conflict.
When implementing these functions you can use a helper class `CameraManagerHelper` that contains some useful methods.

## Example implementation

Here is an example implementation of a custom camera manager that utilizes standard ThreeJS [`OrbitControls`](https://threejs.org/docs/index.html?q=orbit#examples/en/controls/OrbitControls) for mouse movement:

```js
import * as THREE from 'three';
import { OrbitControls } from 'three/examples/jsm/controls/OrbitControls';

import {
    CameraManager,
    CameraManagerHelper,
    CameraState,
    CameraEventDelegate,
    CameraChangeDelegate,
    CameraStopDelegate,
    CameraManagerEventType,
    DebouncedCameraStopEventTrigger
} from '@cognite/reveal';

export class CustomCameraManager implements CameraManager {
    private _domElement: HTMLElement;
    private _camera: THREE.PerspectiveCamera;
    private _controls: OrbitControls;
    private readonly _cameraChangedListener: Array<CameraChangeDelegate> = [];
    private readonly _stopEventTrigger: DebouncedCameraStopEventTrigger;

    constructor(domElement: HTMLElement, camera: THREE.PerspectiveCamera) {
        this._domElement = domElement;
        this._camera = camera;
        this._controls = new OrbitControls(this._camera, domElement);
        this._controls.enableDamping = true;
        this._controls.dampingFactor = 0.3;

        this._stopEventTrigger = new DebouncedCameraStopEventTrigger(this);

        this._controls.addEventListener('change', () => {
            this._cameraChangedListener.forEach(cb => cb(this._camera.position, this._controls.target));
        });
    }

    get enabled(): boolean {
        return this._controls.enabled;
    }

    getCamera(): THREE.PerspectiveCamera {
        return this._camera;
    }

    setCameraState(state: CameraState): void {
        if (state.rotation && state.target) throw new Error("Can't set both rotation and target");
        const position = state.position ?? this._camera.position;
        const rotation = state.rotation ?? this._camera.quaternion;
        const target = state.target ?? (state.rotation ?
            CameraManagerHelper.calculateNewTargetFromRotation(
                this._camera, state.rotation, this._controls.target) :
            this._controls.target);

        this._camera.position.copy(position);
        this._controls.target.copy(target);
        this._camera.quaternion.copy(rotation);
    }

    getCameraState(): Required<CameraState> {
        return {
            position: this._camera.position.clone(),
            target: this._controls.target.clone(),
            rotation: this._camera.quaternion.clone(),
        }
    }

    activate(cameraManager?: CameraManager): void {
        this._controls.enabled = true;

        if (cameraManager) {
            this.setCameraState({ target: cameraManager.getCameraState().target });
        }
    }

    deactivate(): void {
        this._controls.enabled = false;
    }

    on(eventType: CameraManagerEventType, callback: CameraEventDelegate): void {
        switch(eventType) {
            case 'cameraChange':
                this._cameraChangedListener.push(callback);
                break;
            case 'cameraStop':
                this._stopEventTrigger.subscribe(callback as CameraStopDelegate);
                break;
            default:
                throw Error(`Unrecognized camera event type: ${event}`);
        }
    }

    off(eventType: CameraManagerEventType, callback: CameraEventDelegate): void {
        switch(eventType) {
            case 'cameraChange':
                const index = this._cameraChangedListener.indexOf(callback);
                if (index !== -1) {
                    this._cameraChangedListener.splice(index, 1);
                }
                break;
            case 'cameraStop':
                this._stopEventTrigger.unsubscribe(callback as CameraStopDelegate);
                break;
            default:
                throw Error(`Unrecognized camera event type: ${event}`);
        }
    }

    fitCameraToBoundingBox(boundingBox: THREE.Box3, duration?: number, radiusFactor?: number): void {
        const { position, target } = CameraManagerHelper.calculateCameraStateToFitBoundingBox(this._camera, boundingBox, radiusFactor);

        this.setCameraState({ position, target });
    }

    update(deltaTime: number, boundingBox: THREE.Box3): void {
        this._controls.update();
        CameraManagerHelper.updateCameraNearAndFar(this._camera, boundingBox);
    }

    dispose(): void {
        this._stopEventTrigger.dispose();
        this._controls.dispose();
        this._cameraChangedListener.splice(0);
    }
}
```
There are four things that you should really pay extra attention to:
1. `'cameraChange'` event must be fired every time camera position or rotation changes to trigger redraw in Reveal.

2. For the `setCameraState` method you should properly handle how change in rotation and target affects the camera and corresponds with
the behaviour of camera controls (`OrbitControls` in this case). For calculating camera target from rotation you can use `calculateNewTargetFromRotation` method of `CameraManagerHelper` .

3. Inside `update` method you should update `near` and `far` planes of the camera, which can be easily done using `updateCameraNearAndFar` method of `CameraManagerHelper`.

4. The functions `activate` and `deactivate` are called automatically when a new CameraManager is assigned to the Cognite3DViewer. These functions are intended to help manage enabling and disabling of input when the manager changes state. Return value of `get enabled` should reflect this state.


<!-- SOURCE_END: reveal/documentation\docs\extending\camera-manager.mdx -->

================================================================================


<!-- SOURCE_START: reveal/documentation\docs\extending\datasource.mdx -->
## File: reveal/documentation\docs\extending\datasource.mdx

---
id: datasource
title: Use a custom data source
description: Shows how to write a data source to customize how Reveal reads data.
---

import useBaseUrl from '@docusaurus/useBaseUrl';

Reveal is designed to retrieve data from [Cognite Data Fusion (CDF)](https://docs.cognite.com/cdf/).
In certain scenarios it might be useful to customize how Reveal retrieves data, to e.g.:

- Introduce application specific caching to reduce network traffic
- Improve responsiveness in areas with limited connectivity
- Introduce extra logging of network activity related to 3D
- Store models locally

Note that certain features relies on connectivity to CDF and won't work without a connection.

## Overview

To implement a custom data source, DataSource from `@cognite/reveal/extensions/datasource` must be implemented
and provided to `Cognite3DViewer` on construction using the `customDataSource`-option, which in turn
provides instances of three interfaces:

| Interface               | Description                                                                                                   |
| ----------------------- | ------------------------------------------------------------------------------------------------------------- |
| `ModelMetadataProvider` | Provides access to metadata about models, including "base URL", camera information and model transformation.  |
| `ModelDataProvider`     | Access to geometry files and JSON description files for 3D models given URLs.                                 |
| `NodesApiClient`        | Provides access to metadata about 3D nodes, such as bounding box and ancestors.                               |

Some of the interface functions are required, some are optional at the cost of reduced functionality in Reveal. See details below.


## ModelMetadataProvider

`ModelMetadataProvider` is responsible for determining the "base URL" for a model, determine
the "model transformation" and the default camera.

Implementations can assume that all identifiers will be of type `CdfModelIdentifier`:

```js
class CdfModelIdentifier implements ModelIdentifier {
  readonly revealInternalId: symbol;
  readonly modelFormat: File3dFormat;
  readonly modelId: number;     // CDF ModelID
  readonly revisionId: number;  // CDF RevisionID
}
```

| Function/Field          | Required?                                  | Description                                                      |
| ----------------------- | ------------------------------------------ | ---------------------------------------------------------------- |
| `getModelUri()`         | Yes                                        | Determine the base URL that will be used when download metadata and geometry using `ModelDataProvider`. |
| `getModelCamera()`      | No - return `undefined` to use default     | Return an initial camera pose for the model                      |
| `getModelMatrix()`      | Yes, but value can be hardcoded.           | Returns an transformation matrix for transforming from stored coordinates to Reveal coordinates (see below) |
| `getModelOutputs()`     | Yes                                        | Returns an object describing the set of valid formats and version for the given model |

`getModelUri()` returns a "base URL" that will be passed to `ModelDataProvider.getBinaryFile()` and `getJsonFile()`. Note that
it's up to `ModelDataProvider` how this base URL is handled and it is possible to use this base URL as 
some other identifier, e.g. a folder on disk or ID of a blob storage. `getModelUri()` accepts `BlobOutputMetadata` as input which 
defines the format, version, and if applicable, the "blob id" of the output.

`getModelMatrix()` is responsible for converting from stored geometry coordinates to Reveal coordinates (right-handed, Y up). This 
is required for models stored in different orientation in CDF. For CAD models, most models are stored in a right-handed Z up coordinate system, and will need
a transformation. By default, this transformation can be expressed as:

<img src={useBaseUrl('/img/default-cad-matrix.png')} alt="Default CAD to Reveal orientation matrix" />

This corresponds to a 180 degree rotation around the X axis:

```js
new THREE.Matrix4().makeRotationFromEuler(new THREE.Euler(-Math.PI / 2, 0, 0));
```

For point clouds, models are usually stored right-handed Y up and requires no transformation. In this case,
the identity matrix should be returned instead:

```js
new THREE.Matrix4().identity();
```

In addition to the model identifier, the methods can accept the format of the output which describes which output format that is used for the given model/revision.

`getModelOutputs()` returns a list of supported outputs for a given model/revision.
The `BlobOutputMetadata` type includes the format, version, and if applicable, the "blob id" of the model. 


### Example implementation

This simple implementation provides metadata for models stored locally and provides 
default camera and model transformation.

Notice that each of the functions asserts that the identifier is a `CdfModelIdentifier`. Currently, 
this should always be true.

```js
import { 
  CdfModelIdentifier, 
  ModelIdentifier,
  ModelMetaDataProvider
} from '@cognite/reveal';

class MyModelMetaDataProvider implements ModelMetaDataProvider {
  getModelUri(identifier: ModelIdentifier, formatMetadata: BlobOutputMetadata): Promise<string> {
    if (!(identifier instanceof CdfModelIdentifier)) {
      throw new Error('Unexpected identifier');
    }
    // Base URL of where geometry files are stored
    // This will be passed to ModelDataProvider.getJsonFile() and getBinaryFile()
    return Promise.resolve(`https://localhost/models/${identifier.modelId}/revision/${identifier.revisionId}`);
  }

  getModelCamera(identifier: ModelIdentifier): Promise< { position: THREE.Vector3; target: THREE.Vector3 } | undefined> {
    if (!(identifier instanceof CdfModelIdentifier)) {
      throw new Error('Unexpected identifier');
    }
    // Use default camera
    return Promise.resolve(undefined);
  }

  getModelMatrix(identifier: ModelIdentifier, format: File3dFormat | string): Promise<THREE.Matrix4> {
    if (!(identifier instanceof CdfModelIdentifier)) {
      throw new Error('Unexpected identifier');
    }
    // CAD models are usually stored in Z-up, while Reveal uses Y-up, so
    // we need to account for this
    const cadModelToReveal = new THREE.Matrix4().makeRotationFromEuler(new THREE.Euler(-Math.PI / 2, 0, 0));
    return Promise.resolve(cadModelToReveal);
  }

  getModelOutputs(modelIdentifier: ModelIdentifier): Promise<BlobOutputMetadata[]> {
    // Indicates that the supported output for this model is of type File3dFormat.RevealCadModel and version 8
    
    // BlobId refers to a remote identifier for a blob storage, but since this simply fetches
    // the model locally, it can be set to -1
    return Promise.resolve([
      {
        blobId: -1,
        format: File3dFormat.RevealCadModel,
        version: 8
      }
    ]);
  }
}
```

## ModelDataProvider

`ModelDataProvider` is responsible for receiving files by URL.

| Function/Field          | Required?                                  | Description                                                      |
| ----------------------- | ------------------------------------------ | ---------------------------------------------------------------- |
| `getBinaryFile()`       | Yes                                        | Retrieves a binary blob. Used to download CAD geometry and point clouds  |
| `getJsonFile()`         | Yes                                        | Retrieves JSON data. This is used to retrieve metadata about models |

### Example implementation

The following example simply downloads files using `fetch()`. Note that
it's up to the implementation to decide how to retrieve data, and that 
data doesn't necessarily need to be downloaded over HTTP.

```js
import { ModelDataProvider } from '@cognite/reveal';

class MyModelDataProvider implements ModelDataProvider {
  async getJsonFile(baseUrl: string, fileName: string): Promise<any> {
    const url = `${baseUrl}/${fileName}`;
    const response = await fetch(url);
    if (!response.ok) {
      throw new Error(`Could not fetch '${url}'`);
    }
    return response.json();
  }

  async getBinaryFile(baseUrl: string, fileName: string): Promise<ArrayBuffer> {
    const url = `${baseUrl}/${fileName}`;
    const response = await fetch(url);
    if (!response.ok) {
      throw new Error(`Could not fetch '${url}'`);
    }
    return response.arrayBuffer();
  }
}
```

## NodesApiClient

The API client is responsible for providing metadata about 3D CAD nodes, including node bounding boxes and parent/child relationships between nodes.

| Function/Field              | Required by<br />(in `CogniteCadModel`)          | Description                                                      |
| --------------------------- | ------------------------------------------ | ----------------------------------------------------------------- |
| `mapTreeIndicesToNodeIds()` | `mapTreeIndexToNodeId()`, `mapTreeIndicesToNodeIds()`, `getBoundingBoxByTreeIndex()` | Maps from Reveal tree indices to CDF node IDs used to identify nodes in CDF |
| `mapNodeIdsToTreeIndices()` | No, but recommended to have a 1:1 mapping  | Reverse mapping of `mapTreeIndicesToNodeIds()`                   |
| `determineTreeIndexAndSubtreeSizesByNodeIds()` | No                      | Determines the "span" of a node identified by a CDF node ID (i.e. the tree index and how many descendants it has including the node itself). |
| `determineNodeAncestorsByNodeId()` | No                                  | Find "ancestor span" of a node identified by the CDF node ID. Returns data on same format as function above. |
| `getBoundingBoxesByNodeIds()` | No                                          | Determines the individual bounds of each node, specified by their CDF node IDs. |

### Example implementation

```js
class MyNodesApiClient implements NodesApiClient {
  mapTreeIndicesToNodeIds(modelId: number, revisionId: number, treeIndices: number[]): Promise<number[]> {
    // Map 1:1 - pretend treeIndices == nodeIds
    return Promise.resolve(treeIndices);
  }
  mapNodeIdsToTreeIndices(modelId: number, revisionId: number, nodeIds: number[]): Promise<number[]> {
    // Map 1:1 - pretend treeIndices == nodeIds
    return Promise.resolve(nodeIds);
  }
  determineTreeIndexAndSubtreeSizesByNodeIds(modelId: number, revisionId: number, nodeIds: number[]): Promise<{treeIndex: number; subtreeSize: number }[]> {
    throw new Error('Not supported.');
  }
  determineNodeAncestorsByNodeId(modelId: number, revisionId: number, nodeId: number, generation: number): Promise<{treeIndex: number; subtreeSize: number }> {
    throw new Error('Not supported.');
  }
  getBoundingBoxesByNodeIds(modelId: number, revisionId: number, nodeIds: number[]): Promise<THREE.Box3[]> {
    throw new Error('Not supported.');
  }
}
```

## Unsupported features

There's a few features that is not backed by the `DataSource`-API and hence won't be affected by the implementation. The most
notable feature is the [CAD styling API](../examples/cad-styling) which in large is backed by `CogniteClient`. To use the styling API with
custom data sources, you will need to [create custom node collections](../examples/cad-styling-custom) or [use `TreeIndexNodeCollection`](../examples/cad-styling).

Currently there are restrictions in the [the API for saving viewer state](../examples/cad-save-viewerstate) causing `Cognite3DViewer.setViewState` not
to work with a custom `DataSource`. This might change in the future.


<!-- SOURCE_END: reveal/documentation\docs\extending\datasource.mdx -->

================================================================================


<!-- SOURCE_START: reveal/documentation\docs\installation.mdx -->
## File: reveal/documentation\docs\installation.mdx

---
id: installation
title: Installation
description: Reveal installation guide
---

The library has peer-dependencies on [Cognite Data Fusion JS-SDK](https://www.npmjs.com/package/@cognite/sdk)
and [ThreeJS](https://www.npmjs.com/package/three) which must be installed as dependencies in the client application that uses Reveal.

```bash npm2yarn
npm install @cognite/reveal @cognite/sdk three@<version>
```

Please find the correct version of ThreeJS in [the release documentation on Github](https://github.com/cognitedata/reveal/releases/). We only guarantee support for the exact ThreeJS version specified there.

## Installation for projects with Content-Security-Policy

To be able to use Reveal while having a CSP you have to allow the following:
* [script-src](https://developer.mozilla.org/en-US/docs/Web/HTTP/Headers/Content-Security-Policy/script-src) `unsafe-eval`
* [connect-src](https://developer.mozilla.org/en-US/docs/Web/HTTP/Headers/Content-Security-Policy/connect-src) `data:`

These settings are nessesary to allow for execution of internal WebAssembly modules bundled with Reveal.
The `connect-src` policy is for allowing the WebAssembly module to be added as [data url](https://developer.mozilla.org/en-US/docs/Web/HTTP/Basics_of_HTTP/Data_URLs).
The `unsafe-eval` policy is needed to evaluate and execute the WebAssembly module at runtime.
This may be removed in the future once the [wasm-unsafe-eval](https://github.com/WebAssembly/content-security-policy/blob/master/proposals/CSP.md) policy gets implemented into all major browsers.

:::note
Evaluate security risks before adding any of these options to your CSP.
:::

<!-- SOURCE_END: reveal/documentation\docs\installation.mdx -->

================================================================================


<!-- SOURCE_START: reveal/documentation\docs\migration-guide.md -->
## File: reveal/documentation\docs\migration-guide.md

---
id: migration-guide
title: Migrating from Reveal 3 to 4
hide_title: true
description: This page describes the differences between Reveal 3 and 4.
---

This document is an overview of some important differences between Reveal 3.x and Reveal 4.x.

## Entrypoint and import paths
For Reveal 4 we changed into using a single entry point for everything: `@cognite/reveal`.
So extensions and tools also should be imported from this entry point.
We have however also added support for node's module `exports` such that if your tsconfig is setup with:
```ts
"moduleResolution": "Node16",
```

imports will still work the same way they did with Reveal 3.x. 
Note that this may require a bump in typescript version.
If this is not possible for you, then you need to change all imports to be `from @cognite/reveal`.

Using Reveal 3 or Reveal 4 with `"moduleResolution": "Node16"` the import path of the Axis Cross Tool is:

```ts
import { AxisViewTool } from '@cognite/reveal/tools';
const axisViewTool = new AxisViewTool(...);
```

if you use Reveal 4 without the `Node16` module resolution, the import should look like this:
```ts
import { AxisViewTool } from '@cognite/reveal';
const axisViewTool = new AxisViewTool(...);
```

## `connect-src data:` is now a required content-security-policy
See [Installation](./installation.mdx#installation-for-projects-with-content-security-policy) for updated content security policies needed for Reveal.
Note that this is only relevant if you have a content-security-policy set up. 

## Three.js is now a peer-dependency
For Reveal 4 we have changed threejs from being exported from Reveal and rather require applications that consume Reveal to import it.
There are multiple reasons for this, but a major pain point has been that Reveal does not expose the three.js examples in its export, causing applications to have to install threejs anyway.
In addition, we also see a lot of applications ending up having multiple bundles of three.js which we are trying to alliviate.

## `Cognite3DViewer.setBackgroundColor` now has optional alpha parameter
The `setBackgroundColor` now supports settings alpha value. 
This becomes relevant when you want your 3D content to blend with your website.

## `Cognite3DModel` has been renamed to `CogniteCadModel`
Renamed for clarity, as technically a point cloud can also be viewed as a 3D model.

## `Cognite3DViewer.getIntersectionFromPixel` options parameter has been removed
Reveal currently uses GPU driven picking for point clouds, so the previously used options are not applicable anymore.

## `DefaultCameraManager` no longer exposes its internal `ComboControls` implementation
Methods for settings and getting options has been added to support dynamically updating the state.

## `CogniteCadModel` and `PointCloudModel` no longer inherit from the three.js Object3D base class
This prevents usages that Reveal does not handle such as reparenting and other mutable operations on the three.js object.
Methods such as setting the transformation or visibility are available

## `contiuousModelStreaming` option has been promoted to opt-out
This means that CAD models will now stream continuously (vs. just when camera stops moving) by default.
This can be reverted by setting the `contiuousModelStreaming` option to false when initializing the `Cognite3DViewer`.

## Styling types use `THREE.Color` instead of RGB tuples

The `NodeAppearance` and `PointCloudAppearance` objects now use `THREE.Color` from the threejs library for storing colors. This means that e.g. a style that was previously created by writing

```
const style = { color: [0, 255, 0] };
```

must now be created by writing

```
// import * as THREE from 'three';
const style = { color: new THREE.Color(0, 1.0, 0) };
```

## `CognitePointCloudModel`'s `getClasses` method now returns more data

Previously, a call to `pointCloudModel.getClasses()` (where `pointCloudModel` is an instance of `CognitePointCloudModel`) would return the available classification codes as a list of numbers. It now returns structs of type `{ code: number, name: string }`, where `code` corresponds to the previously returned classification code, and `name` is a human-readable name of the class.

## Changes related to the `CameraManager` interface

Two major changes are now required for `CameraManager`s.
The first change is adding a `cameraStop` which Reveal will use to control when geometry should be loaded and other performance intensive computations.
The second is adding a activate / deactivate method to handle transitioning to and from other `CameraManager`s and lets each implementation decide what this functionality should look like.

`CameraManager` implementations must now allow listeners for the `'cameraStop'` event, in addition to the old `'cameraChange'` event. This is to allow `CameraManager` implementors the flexibility of deciding when the camera manager is standing still. The event *must* be emitted in order to trigger loading of model data if `continuousStreaming` is set to `false`.

In order to make this transition easy, we expose the `DebouncedCameraStopEventTrigger` class, which will fire a stop event when the camera manager's `'cameraChange'` has not triggered for a short while.

To use this class, construct it in the custom camera manager's constructor:
```
this._stopEventTrigger = new DebouncedCameraStopEventTrigger(this);
```
Note that it takes the custom camera manager itself as argument. It will immediately subscribe to the `cameraChange` event on this camera manager, so make sure any prerequisite initialization is finished before constructing it.

Then, implement a new `on(eventType, callback)` method, for instance:
```
on(eventType: CameraManagerEventType, callback: CameraEventDelegate): void {
    switch(eventType) {
        case 'cameraChange':
            // handle adding camera change callback as before
            break;
        case 'cameraStop':
            this._stopEventTrigger.subscribe(callback as CameraStopDelegate);
            break;
        default:
            throw Error(`Unrecognized camera event type: ${event}`);
    }
}
```
The `off(eventType, callback)` implementation may have a similar structure, but calling `unsubscribe` on the trigger object instead of `subscribe`.

Finally, call `this._stopEventTrigger.dispose()` in the camera manager's `dispose()` method to clean up resources after use.

## `get`/`setModelTransformation` are now relative to to the initial CDF-to-ThreeJS transform

In earlier versions of Reveal, the `model.getModelTransformation()` method (`model` being an instance of `CogniteCadModel` or `CognitePointCloudModel`) would return the entire model transformation from CDF geometry coordinates to the model's current transform in threejs-space. It will now only return the custom transformation applied *after* the initial transform from CDF space to threejs/Reveal space. Thus, it will only return what was last set by `model.setModelTransformation()`, and the identity transformation if no transformation has been set.

We now also provide `model.getCdfToDefaultModelTransformation()` that returns the matrix transformation from CDF coordinates to Reveal/threejs space. It may include an additional default transformation specified for this model in the backend.

Thus, to get the full transformation from CDF coordinates to the model's transform in Reveal space, you would use something akin to

```
const totalTransform = model.getModelTransformation().clone().multiply(model.getCdfToDefaultModelTransformation());
```
This is useful when combining visualization of a model with other 3D data extracted directly from CDF outside Reveal.

## Removed several CDF/model transformation methods

The methods `mapFromCdfToModelCoordinates`, `mapPositionFromModelToCdfCoordinates`, `mapBoxFromCdfToModelCoordinates`, `mapBoxFromModelToCdfCoordinates` have been removed from `CogniteCadModel`.

The `*FromCdfToModelCoordinates` can be emulated by constructing the transformation matrix with

```
const cdfTransformation = model.getModelTransformation().clone().multiply(model.getCdfToDefaultModelTransformation());
```
as was mentioned above. It can then be used in either `position.applyMatrix4(cdfTransformation)` or `box.applyMatrix4(cdfTransformation)` respectively.

The `*FromModelToCdfCoordinates` can likewise be emulated using the matrix
```
const inverseCdfTransformation = model.getModelTransformation().clone().multiply(model.getCdfToDefaultModelTransformation()).invert();
```
and using it with `applyMatrix4()` as above.

## Potree prefix removed

In Reveal 4, several symbols has `Potree`-prefix which now has been replaced. This includes:

- `PotreePointColorType` is now called `PointColorType`
- `PotreePointShape` is now called `PointShape`
- `PotreePointSizeType` is now called `PointSizeType`
- `PotreeClassification` is now called `PointClassification`

The above changes are simple renames and migrating these should be very easy.

## Removed methods on Cognite3DViewer
* `getScene()`
* `renderer`
* `isBrowserSupported`
* `getCamera()`, can be fetched with `cameraManager.getCamera()`

## Removed tools due to low / no usage
* Geomap tool
* Exploded view tool


<!-- SOURCE_END: reveal/documentation\docs\migration-guide.md -->

================================================================================


<!-- SOURCE_START: reveal/documentation\docs\overview.mdx -->
## File: reveal/documentation\docs\overview.mdx

---
id: overview
slug: /
title: Overview
description: Reveal is a JavaScript library for visualizing big 3D models on the web. It supports complex CAD models and large point clouds.
---

import useBaseUrl from '@docusaurus/useBaseUrl';

Reveal is a JavaScript library for visualizing big 3D models on the web.
It supports complex CAD models and large point clouds.
The library supports 3D model hosted by [Cognite Data Fusion (CDF)](https://docs.cognite.com/cdf/) which supports [ingestion of a variety of 3D formats](https://docs.cognite.com/cdf/3d/). If you do not have access you can use models provided through the [Open Industrial Data project](https://openindustrialdata.com/) for testing.

If you have previously used the previous version of Reveal,
[`@cognite/3d-viewer`](https://www.npmjs.com/package/@cognite/3d-viewer),
and want to migrate to this package, please see the [Migration guide](./migration-guide.md).
For details about the installation procedure and how to use Reveal in certain environments,
see the [Installation guide](./installation.mdx).

## CAD models

CAD (Computer-Aided Design) models are technical design 3D models. For the big asset industry these are typically very complex and can often consist of several million individual objects. To enable interactive visualization of such models [Cognite Data Fusion (CDF)](https://docs.cognite.com/cdf/) processes these models to optimize the geometry and the structure, enabling Reveal to visualize them on the web.

CAD models typically contain attributes/properties associated with each 3D object (also called node). These attributes can provide valuable metadata, such as extent, function, what system the object is part of and it's operation specifications. CDF and Reveal provide functionality for queries based on the attributes to perform filtering, styling and to collect information.

<img src={useBaseUrl('/img/cad-model.png')} alt="A grayscale CAD model" />

## Point cloud models

Point cloud models are 3D models generated from techniques such as 3D scanning or photogrammetry. [Cognite Data Fusion (CDF)](https://docs.cognite.com/cdf/) processes point clouds and stores them in a format suitable for visualization.

<img src={useBaseUrl('/img/pointcloud-model.png')} alt="Point cloud model" />

## Technology

Behind the scenes Reveal based on [WebGL](https://developer.mozilla.org/en-US/docs/Web/API/**WebGL_API**) through [ThreeJS](https://threejs.org/) and uses [three-loader](https://github.com/pnext/three-loader) for point cloud visualization. three-loader is based on [Potree](https://www.potree.org).

Reveal is written in [TypeScript](https://www.typescriptlang.org/) and uses [WebAssembly](https://webassembly.org/) modules written in [Rust](https://www.rust-lang.org/) to do much of the heavy-lifting.

Reveal is available on [Github](https://github.com/cognitedata/reveal). If you find issues, have a feature suggestion or a question, please register a ticket in our [issue tracker](https://github.com/cognitedata/reveal/issues).

## A note on coordinate systems

The models provided by CDF are stored in "CDF space", a coordinate system where the positive Z axis is the up direction. However, objects visualized in Reveal uses ThreeJS's coordinate system, which has the positive Y axis pointing upward. The transformation between these two coordinate systems is handled automatically behind the scenes for all CDF models. This difference can still introduce errors when combining models in Reveal with other data from CDF. To transform objects between the two coordinate systems, the `@cognite/reveal` package exports the transformation in the variable `CDF_TO_VIEWER_TRANSFORMATION`.

To transform e.g. a bounding box from CDF space to Viewer space, you may write

```js
// import { CDF_TO_VIEWER_TRANSFORMATION } from '@cognite/reveal';
// import { Box3, Matrix4 } from 'three';

const viewerBoundingBox: Box3 = cdfBoundingBox.applyMatrix4(CDF_TO_VIEWER_TRANSFORMATION);
```
and conversely, to transform the other way:

```js

const viewerToCdfTransformation: Matrix4 = CDF_TO_VIEWER_TRANSFORMATION.clone().invert();
const cdfBoundingBox: Box3 = viewerBoundingBox.applyMatrix4(viewerToCdfTransformation);
```

<!-- SOURCE_END: reveal/documentation\docs\overview.mdx -->

================================================================================


<!-- SOURCE_START: reveal/documentation\README.md -->
## File: reveal/documentation\README.md

# Website

This [documentation website](https://cognitedata.github.io/reveal-docs/docs/) is built using [Docusaurus 2](https://v2.docusaurus.io/), a modern static website generator.

### Installation

```
$ yarn
```

### Local Development

```
$ yarn start
```

This command starts a local development server and open up a browser window. Most changes are reflected live without having to restart the server.

#### .env file

See `.env.example` to override project or model ids for local development. You need to copy it as `.env` file. It won't be commited.

### Build

```
$ yarn build
```

This command generates static content into the `build` directory and can be served using any static contents hosting service.

### Deployment

We deploy docs automatically for every merge into master. See workflows for details.

There are 2 repos where we host our docs:

* https://github.com/cognitedata/reveal-docs  for production documentation
* https://github.com/cognitedata/reveal-docs-preview - for PR previews

Also, reveal has own [gh-pages](https://github.com/cognitedata/reveal/settings/pages)
but it's merely has redirects [here](https://github.com/cognitedata/reveal/blob/gh-pages/index.html) and [there](https://github.com/cognitedata/reveal/blob/gh-pages/docs/index.html)
to reveal-docs, i.e.

`cognitedata.github.io/reveal/docs`  `cognitedata.github.io/reveal-docs`

### Versioning

![reveal-docs-versioning.png](static/img/reveal-docs-versioning.png)

We have several versions of our documentation for different reveal versions. We always have at least:

* `next` (`/docs` folder)  your main place to create documentation for new features. 
    Write docs well before release, and you won't need to edit other sections ever.
* `2.x` or latest (`/versioned_docs/version-2.x/` folder). 
  On the website this is default documentation section for users because it describes
  the latest reveal version that published to NPM. Edit the latest version only when you want
  to apply some hotfix to documentation of the release that already published.
  **You must also apply the same fix to `next` version**
  because `/versioned_docs/version-2.x/` is completely replaced by `next` on every release.  
* `1.x` or other archived versions. They must be created on each major release. 
  You need to edit those only when you want to clarify docs for older published reveal versions
  that are not actively maintained anymore.

We typically don't version minor versions. Instead, mark every new feature with comment like:

```
> **New in 2.1.0**
```

For API reference use `@version` tag in jsdoc. For example:

```js
/**
  * Sets transformation matrix of the model.
  * @param transformationMatrix
  * @version Added in 2.1.0
  */
```

Notice that `documentation/static` is not versioned, so if you remove something from there  double check that it's not used by other versions.

#### How to create new docs version?

Let's say you want to roll out new reveal@2.0.0, that what needs to be done:

* create new 2.x section and make it default for docs website 
* tweak copying of next version to replace your 2.x with updates on every release
* introduce a new versioned dependency on reveal in your archived version
* configure search

##### Create new 2.x section

[[Docusaurus versioning guide](https://docusaurus.io/docs/2.0.0-beta.0/versioning)] 
for the version of docusaurus you currently use, but basic usage is covered below.

Basically you need to copy the whole content of your `next` version under `versioned_docs` and version sidebars as well.
Run this command to do it:

```bash
yarn docusaurus docs:version 2.x
```

That will become default version for the docs website.

##### Introduce a new versioned dependency on reveal in your archived version

That step is needed because we are actually using reveal in docs, so docs not just docs, but they have a dependency on reveal to show live demos.

So when you archive a version you must fix the version of reveal for that part of the documentation website.

Below is an example of archiving `1.x` version.

1. Go to `documentation/package.json`
2. Add aliased fixed dependency, e.g. `"@cognite/reveal-2.x": "npm:@cognite/reveal@^2.1.0",` and `"@cognite/sdk-2.x": "npm:@cognite/sdk@^5.1.3",`
3. At `remark-runnable-reveal-demo.js` add a new record to the `versionedImportNode`:
  ```js
      'runnable-1x': {
        type: 'import',
          value:
        "import { LiveCodeSnippet } from '@site/versioned_docs/version-1.x/components/LiveCodeSnippet';",
      },
  ```
4. Inside `documentation/`, run e.g. `yarn replace-2.x` to replace 2.x docs with the current docs. This will:
-- Copy current documentation (available as "Next" in the hosted site) to 2.x versioned docs
-- Update references to `@cognite/reveal` to `@cognite/reveal-2.x` and `@cognite/sdk` to `@cognite/sdk-2.x`
-- Update runnable examples to use Reveal 2
##### Configure search

[[Docusaurus guide on search](https://docusaurus.io/docs/2.0.0-beta.0/search)]

Find `algolia` at `docusaurus.config.js` and adjust `facetFilters` param by adding your new version. E.g. 

```js
    facetFilters: [['version:1.x', 'version:2.x']]
```

That's pretty much all you need to do to create a new version of your docs.


<!-- SOURCE_END: reveal/documentation\README.md -->

================================================================================


<!-- SOURCE_START: reveal/documentation\versioned_docs\version-2.x\API Reference.md -->
## File: reveal/documentation\versioned_docs\version-2.x\API Reference.md


<a name="readmemd"></a>

@cognite/reveal / [Modules](#modulesmd)

`@cognite/reveal` has three modules:
- [@cognite/reveal](#module-cognitereveal) is the main module and has the main entry point of Reveal, [`Cognite3DViewer`](#class-cognite3dviewer). CAD models are represented by [`Cognite3DModel`](#class-cognite3dmodel) and points clouds by [`CognitePointCloudModel`](#class-cognitepointcloudmodel).
- [@congite/reveal/tools](#module-cogniterevealtools) contains a set of tools, e.g. [`AxisViewTool`](#class-axisviewtool), [`GeomapTool`](#class-geomaptool), [`TimelineTool`](#class-timelinetool), [`ExplodedViewTool`](#class-explodedviewtool) and [`HtmlOverlayTool`](#class-htmloverlaytool) that works with `Cognite3DViewer`.
- [@cognite/reveal/extensions/datasource](#module-cogniterevealextensionsdatasource) allows providing custom data sources for geometry and model metadata.

# Classes


<a name="classes_cognite_revealassetnodecollectionmd"></a>

[@cognite/reveal](#readmemd) / [Modules](#modulesmd) / [@cognite/reveal](#modules_cognite_revealmd) / AssetNodeCollection

## Class: AssetNodeCollection

[@cognite/reveal](#modules_cognite_revealmd).AssetNodeCollection

Represents a set of nodes associated with an [asset in Cognite Fusion](https://docs.cognite.com/api/v1/#tag/Assets)
linked to the 3D model using [asset mappings](https://docs.cognite.com/api/v1/#tag/3D-Asset-Mapping). A node
is considered to be part of an asset if it has a direct asset mapping or if one of its ancestors has an asset mapping
to the asset.

### Hierarchy

- [NodeCollectionBase](#classes_cognite_revealnodecollectionbasemd)

   **AssetNodeCollection**

### Table of contents

#### Constructors

- [constructor](#constructor)

#### Properties

- [classToken](#classtoken)

#### Accessors

- [classToken](#classtoken)
- [isLoading](#isloading)

#### Methods

- [clear](#clear)
- [executeFilter](#executefilter)
- [getIndexSet](#getindexset)
- [off](#off)
- [on](#on)
- [serialize](#serialize)

### Constructors

#### constructor

 **new AssetNodeCollection**(`client`, `model`)

##### Parameters

| Name | Type |
| :------ | :------ |
| `client` | `default` |
| `model` | [Cognite3DModel](#classes_cognite_revealcognite3dmodelmd) |

##### Overrides

NodeCollectionBase.constructor

##### Defined in

[viewer/core/src/datamodels/cad/styling/AssetNodeCollection.ts:30](https://github.com/cognitedata/reveal/blob/d2769861/viewer/core/src/datamodels/cad/styling/AssetNodeCollection.ts#L30)

### Properties

#### classToken

 `Static` `Readonly` **classToken**: ``"AssetNodeCollection"``

##### Defined in

[viewer/core/src/datamodels/cad/styling/AssetNodeCollection.ts:24](https://github.com/cognitedata/reveal/blob/d2769861/viewer/core/src/datamodels/cad/styling/AssetNodeCollection.ts#L24)

### Accessors

#### classToken

 `get` **classToken**(): `string`

##### Returns

`string`

##### Defined in

[viewer/packages/cad-styling/src/NodeCollectionBase.ts:25](https://github.com/cognitedata/reveal/blob/d2769861/viewer/packages/cad-styling/src/NodeCollectionBase.ts#L25)

___

#### isLoading

 `get` **isLoading**(): `boolean`

Returns true when the set currently is running an operation
for loading the full set of nodes contained by the set.

##### Returns

`boolean`

##### Defined in

[viewer/core/src/datamodels/cad/styling/AssetNodeCollection.ts:39](https://github.com/cognitedata/reveal/blob/d2769861/viewer/core/src/datamodels/cad/styling/AssetNodeCollection.ts#L39)

### Methods

#### clear

 **clear**(): `void`

##### Returns

`void`

##### Overrides

[NodeCollectionBase](#classes_cognite_revealnodecollectionbasemd).[clear](#clear)

##### Defined in

[viewer/core/src/datamodels/cad/styling/AssetNodeCollection.ts:93](https://github.com/cognitedata/reveal/blob/d2769861/viewer/core/src/datamodels/cad/styling/AssetNodeCollection.ts#L93)

___

#### executeFilter

 **executeFilter**(`filter`): `Promise`\<void\>

Updates the node collection to hold nodes associated with the asset given, or
assets within the bounding box or all assets associated with the 3D model.

##### Parameters

| Name | Type | Description |
| :------ | :------ | :------ |
| `filter` | `Object` |  |
| `filter.assetId?` | `number` | ID of a single [asset](https://docs.cognite.com/dev/concepts/resource_types/assets.html) (optional) |
| `filter.boundingBox?` | `Box3` | When provided, only assets within the provided bounds will be included in the filter. |

##### Returns

`Promise`\<void\>

##### Defined in

[viewer/core/src/datamodels/cad/styling/AssetNodeCollection.ts:50](https://github.com/cognitedata/reveal/blob/d2769861/viewer/core/src/datamodels/cad/styling/AssetNodeCollection.ts#L50)

___

#### getIndexSet

 **getIndexSet**(): [IndexSet](#classes_cognite_revealindexsetmd)

##### Returns

[IndexSet](#classes_cognite_revealindexsetmd)

##### Overrides

[NodeCollectionBase](#classes_cognite_revealnodecollectionbasemd).[getIndexSet](#getindexset)

##### Defined in

[viewer/core/src/datamodels/cad/styling/AssetNodeCollection.ts:100](https://github.com/cognitedata/reveal/blob/d2769861/viewer/core/src/datamodels/cad/styling/AssetNodeCollection.ts#L100)

___

#### off

 **off**(`event`, `listener`): `void`

Unsubscribe a listener to events about the set changing, i.e.
when nodes are added or removed to the set.

##### Parameters

| Name | Type |
| :------ | :------ |
| `event` | ``"changed"`` |
| `listener` | () => `void` |

##### Returns

`void`

##### Inherited from

[NodeCollectionBase](#classes_cognite_revealnodecollectionbasemd).[off](#off)

##### Defined in

[viewer/packages/cad-styling/src/NodeCollectionBase.ts:42](https://github.com/cognitedata/reveal/blob/d2769861/viewer/packages/cad-styling/src/NodeCollectionBase.ts#L42)

___

#### on

 **on**(`event`, `listener`): `void`

Subscribe a listener to events about the set changing, i.e.
when nodes are added or removed to the set.

##### Parameters

| Name | Type |
| :------ | :------ |
| `event` | ``"changed"`` |
| `listener` | () => `void` |

##### Returns

`void`

##### Inherited from

[NodeCollectionBase](#classes_cognite_revealnodecollectionbasemd).[on](#on)

##### Defined in

[viewer/packages/cad-styling/src/NodeCollectionBase.ts:33](https://github.com/cognitedata/reveal/blob/d2769861/viewer/packages/cad-styling/src/NodeCollectionBase.ts#L33)

___

#### serialize

 **serialize**(): [SerializedNodeCollection](#serializednodecollection)

##### Returns

[SerializedNodeCollection](#serializednodecollection)

##### Overrides

[NodeCollectionBase](#classes_cognite_revealnodecollectionbasemd).[serialize](#serialize)

##### Defined in

[viewer/core/src/datamodels/cad/styling/AssetNodeCollection.ts:104](https://github.com/cognitedata/reveal/blob/d2769861/viewer/core/src/datamodels/cad/styling/AssetNodeCollection.ts#L104)


<a name="classes_cognite_revealboundingboxclippermd"></a>

[@cognite/reveal](#readmemd) / [Modules](#modulesmd) / [@cognite/reveal](#modules_cognite_revealmd) / BoundingBoxClipper

## Class: BoundingBoxClipper

[@cognite/reveal](#modules_cognite_revealmd).BoundingBoxClipper

### Table of contents

#### Constructors

- [constructor](#constructor)

#### Accessors

- [clippingPlanes](#clippingplanes)
- [maxX](#maxx)
- [maxY](#maxy)
- [maxZ](#maxz)
- [minX](#minx)
- [minY](#miny)
- [minZ](#minz)

### Constructors

#### constructor

 **new BoundingBoxClipper**(`box?`)

##### Parameters

| Name | Type |
| :------ | :------ |
| `box?` | `Box3` |

##### Defined in

[viewer/core/src/utilities/BoundingBoxClipper.ts:16](https://github.com/cognitedata/reveal/blob/d2769861/viewer/core/src/utilities/BoundingBoxClipper.ts#L16)

### Accessors

#### clippingPlanes

 `get` **clippingPlanes**(): `Plane`[]

##### Returns

`Plane`[]

##### Defined in

[viewer/core/src/utilities/BoundingBoxClipper.ts:104](https://github.com/cognitedata/reveal/blob/d2769861/viewer/core/src/utilities/BoundingBoxClipper.ts#L104)

___

#### maxX

 `get` **maxX**(): `number`

##### Returns

`number`

##### Defined in

[viewer/core/src/utilities/BoundingBoxClipper.ts:55](https://github.com/cognitedata/reveal/blob/d2769861/viewer/core/src/utilities/BoundingBoxClipper.ts#L55)

 `set` **maxX**(`x`): `void`

##### Parameters

| Name | Type |
| :------ | :------ |
| `x` | `number` |

##### Returns

`void`

##### Defined in

[viewer/core/src/utilities/BoundingBoxClipper.ts:50](https://github.com/cognitedata/reveal/blob/d2769861/viewer/core/src/utilities/BoundingBoxClipper.ts#L50)

___

#### maxY

 `get` **maxY**(): `number`

##### Returns

`number`

##### Defined in

[viewer/core/src/utilities/BoundingBoxClipper.ts:64](https://github.com/cognitedata/reveal/blob/d2769861/viewer/core/src/utilities/BoundingBoxClipper.ts#L64)

 `set` **maxY**(`y`): `void`

##### Parameters

| Name | Type |
| :------ | :------ |
| `y` | `number` |

##### Returns

`void`

##### Defined in

[viewer/core/src/utilities/BoundingBoxClipper.ts:59](https://github.com/cognitedata/reveal/blob/d2769861/viewer/core/src/utilities/BoundingBoxClipper.ts#L59)

___

#### maxZ

 `get` **maxZ**(): `number`

##### Returns

`number`

##### Defined in

[viewer/core/src/utilities/BoundingBoxClipper.ts:73](https://github.com/cognitedata/reveal/blob/d2769861/viewer/core/src/utilities/BoundingBoxClipper.ts#L73)

 `set` **maxZ**(`z`): `void`

##### Parameters

| Name | Type |
| :------ | :------ |
| `z` | `number` |

##### Returns

`void`

##### Defined in

[viewer/core/src/utilities/BoundingBoxClipper.ts:68](https://github.com/cognitedata/reveal/blob/d2769861/viewer/core/src/utilities/BoundingBoxClipper.ts#L68)

___

#### minX

 `get` **minX**(): `number`

##### Returns

`number`

##### Defined in

[viewer/core/src/utilities/BoundingBoxClipper.ts:28](https://github.com/cognitedata/reveal/blob/d2769861/viewer/core/src/utilities/BoundingBoxClipper.ts#L28)

 `set` **minX**(`x`): `void`

##### Parameters

| Name | Type |
| :------ | :------ |
| `x` | `number` |

##### Returns

`void`

##### Defined in

[viewer/core/src/utilities/BoundingBoxClipper.ts:23](https://github.com/cognitedata/reveal/blob/d2769861/viewer/core/src/utilities/BoundingBoxClipper.ts#L23)

___

#### minY

 `get` **minY**(): `number`

##### Returns

`number`

##### Defined in

[viewer/core/src/utilities/BoundingBoxClipper.ts:37](https://github.com/cognitedata/reveal/blob/d2769861/viewer/core/src/utilities/BoundingBoxClipper.ts#L37)

 `set` **minY**(`y`): `void`

##### Parameters

| Name | Type |
| :------ | :------ |
| `y` | `number` |

##### Returns

`void`

##### Defined in

[viewer/core/src/utilities/BoundingBoxClipper.ts:32](https://github.com/cognitedata/reveal/blob/d2769861/viewer/core/src/utilities/BoundingBoxClipper.ts#L32)

___

#### minZ

 `get` **minZ**(): `number`

##### Returns

`number`

##### Defined in

[viewer/core/src/utilities/BoundingBoxClipper.ts:46](https://github.com/cognitedata/reveal/blob/d2769861/viewer/core/src/utilities/BoundingBoxClipper.ts#L46)

 `set` **minZ**(`z`): `void`

##### Parameters

| Name | Type |
| :------ | :------ |
| `z` | `number` |

##### Returns

`void`

##### Defined in

[viewer/core/src/utilities/BoundingBoxClipper.ts:41](https://github.com/cognitedata/reveal/blob/d2769861/viewer/core/src/utilities/BoundingBoxClipper.ts#L41)


<a name="classes_cognite_revealcognite3dmodelmd"></a>

[@cognite/reveal](#readmemd) / [Modules](#modulesmd) / [@cognite/reveal](#modules_cognite_revealmd) / Cognite3DModel

## Class: Cognite3DModel

[@cognite/reveal](#modules_cognite_revealmd).Cognite3DModel

### Hierarchy

- `Object3D`

   **Cognite3DModel**

### Implements

- [CogniteModelBase](#interfaces_cognite_revealcognitemodelbasemd)

### Table of contents

#### Properties

- [modelId](#modelid)
- [revisionId](#revisionid)
- [type](#type)

#### Accessors

- [modelUnit](#modelunit)
- [modelUnitToMetersFactor](#modelunittometersfactor)
- [nodeCount](#nodecount)
- [styledNodeCollections](#stylednodecollections)

#### Methods

- [assignStyledNodeCollection](#assignstylednodecollection)
- [dispose](#dispose)
- [getAncestorTreeIndices](#getancestortreeindices)
- [getBoundingBoxByNodeId](#getboundingboxbynodeid)
- [getBoundingBoxByTreeIndex](#getboundingboxbytreeindex)
- [getCameraConfiguration](#getcameraconfiguration)
- [getDefaultNodeAppearance](#getdefaultnodeappearance)
- [getModelBoundingBox](#getmodelboundingbox)
- [getModelTransformation](#getmodeltransformation)
- [getSubtreeTreeIndices](#getsubtreetreeindices)
- [iterateNodesByTreeIndex](#iteratenodesbytreeindex)
- [iterateSubtreeByTreeIndex](#iteratesubtreebytreeindex)
- [mapBoxFromModelToCdfCoordinates](#mapboxfrommodeltocdfcoordinates)
- [mapFromCdfToModelCoordinates](#mapfromcdftomodelcoordinates)
- [mapNodeIdToTreeIndex](#mapnodeidtotreeindex)
- [mapNodeIdsToTreeIndices](#mapnodeidstotreeindices)
- [mapPositionFromModelToCdfCoordinates](#mappositionfrommodeltocdfcoordinates)
- [mapTreeIndexToNodeId](#maptreeindextonodeid)
- [mapTreeIndicesToNodeIds](#maptreeindicestonodeids)
- [removeAllStyledNodeCollections](#removeallstylednodecollections)
- [resetNodeTransform](#resetnodetransform)
- [resetNodeTransformByTreeIndex](#resetnodetransformbytreeindex)
- [setDefaultNodeAppearance](#setdefaultnodeappearance)
- [setModelTransformation](#setmodeltransformation)
- [setNodeTransform](#setnodetransform)
- [setNodeTransformByTreeIndex](#setnodetransformbytreeindex)
- [unassignStyledNodeCollection](#unassignstylednodecollection)
- [updateStyledNodeCollection](#updatestylednodecollection)

### Properties

#### modelId

 `Readonly` **modelId**: `number`

The CDF model ID of the model.

##### Defined in

[viewer/core/src/public/migration/Cognite3DModel.ts:61](https://github.com/cognitedata/reveal/blob/d2769861/viewer/core/src/public/migration/Cognite3DModel.ts#L61)

___

#### revisionId

 `Readonly` **revisionId**: `number`

The CDF revision ID of the model.

##### Defined in

[viewer/core/src/public/migration/Cognite3DModel.ts:65](https://github.com/cognitedata/reveal/blob/d2769861/viewer/core/src/public/migration/Cognite3DModel.ts#L65)

___

#### type

 `Readonly` **type**: [SupportedModelTypes](#supportedmodeltypes) = 'cad'

##### Implementation of

[CogniteModelBase](#interfaces_cognite_revealcognitemodelbasemd).[type](#type)

##### Overrides

THREE.Object3D.type

##### Defined in

[viewer/core/src/public/migration/Cognite3DModel.ts:28](https://github.com/cognitedata/reveal/blob/d2769861/viewer/core/src/public/migration/Cognite3DModel.ts#L28)

### Accessors

#### modelUnit

 `get` **modelUnit**(): ``""`` \| [WellKnownUnit](#wellknownunit)

Returns the unit the coordinates for the model is stored. Returns an empty string
if no unit has been stored.
Note that coordinates in Reveal always are converted to meters using @see \{@link modelUnitToMetersFactor}.

**`version`** New since 2.1

##### Returns

``""`` \| [WellKnownUnit](#wellknownunit)

##### Defined in

[viewer/core/src/public/migration/Cognite3DModel.ts:43](https://github.com/cognitedata/reveal/blob/d2769861/viewer/core/src/public/migration/Cognite3DModel.ts#L43)

___

#### modelUnitToMetersFactor

 `get` **modelUnitToMetersFactor**(): `number`

Returns the conversion factor that converts from model coordinates to meters. Note that this can
return undefined if the model has been stored in an unsupported unit.

**`version`** New since 2.1

##### Returns

`number`

##### Defined in

[viewer/core/src/public/migration/Cognite3DModel.ts:54](https://github.com/cognitedata/reveal/blob/d2769861/viewer/core/src/public/migration/Cognite3DModel.ts#L54)

___

#### nodeCount

 `get` **nodeCount**(): `number`

Returns the number of nodes in the model.

##### Returns

`number`

##### Defined in

[viewer/core/src/public/migration/Cognite3DModel.ts:453](https://github.com/cognitedata/reveal/blob/d2769861/viewer/core/src/public/migration/Cognite3DModel.ts#L453)

___

#### styledNodeCollections

 `get` **styledNodeCollections**(): \{ `appearance`: [NodeAppearance](#nodeappearance) ; `nodeCollection`: [NodeCollectionBase](#classes_cognite_revealnodecollectionbasemd)  }[]

Returns all currently registered node collections and associated appearance.

##### Returns

\{ `appearance`: [NodeAppearance](#nodeappearance) ; `nodeCollection`: [NodeCollectionBase](#classes_cognite_revealnodecollectionbasemd)  }[]

##### Defined in

[viewer/core/src/public/migration/Cognite3DModel.ts:127](https://github.com/cognitedata/reveal/blob/d2769861/viewer/core/src/public/migration/Cognite3DModel.ts#L127)

### Methods

#### assignStyledNodeCollection

 **assignStyledNodeCollection**(`nodeCollection`, `appearance`): `void`

Customizes rendering style for a set of nodes, e.g. to highlight, hide
or color code a set of 3D objects. This allows for custom look and feel
of the 3D model which is useful to highlight certain parts or to
color code the 3D model based on information (e.g. coloring the 3D model
by construction status).

The [NodeCollectionBase](#classes_cognite_revealnodecollectionbasemd) can be updated dynamically and the rendered nodes will be
updated automatically as the styling changes. The appearance of the style nodes
cannot be changed.

When nodes are in several styled sets, the style is combined in the order
the sets were added, i.e. styled sets added late can overwrite styled sets added
early.

If the `nodeCollection` provided already has an assigned style, this style will
be replaced with style provided.

**`example`**
```js
model.setDefaultNodeAppearance({ rendererGhosted: true });
const visibleNodes = new TreeIndexNodeCollection(someTreeIndices);
model.assignStyledNodeCollection(visibleSet, { rendererGhosted: false });
```

**`throws`** Error if node collection already has been assigned to the model.

##### Parameters

| Name | Type | Description |
| :------ | :------ | :------ |
| `nodeCollection` | [NodeCollectionBase](#classes_cognite_revealnodecollectionbasemd) | Dynamic set of nodes to apply the provided appearance to. |
| `appearance` | [NodeAppearance](#nodeappearance) | Appearance to style the provided set with. |

##### Returns

`void`

##### Defined in

[viewer/core/src/public/migration/Cognite3DModel.ts:159](https://github.com/cognitedata/reveal/blob/d2769861/viewer/core/src/public/migration/Cognite3DModel.ts#L159)

___

#### dispose

 **dispose**(): `void`

Cleans up used resources.

##### Returns

`void`

##### Implementation of

[CogniteModelBase](#interfaces_cognite_revealcognitemodelbasemd).[dispose](#dispose)

##### Defined in

[viewer/core/src/public/migration/Cognite3DModel.ts:291](https://github.com/cognitedata/reveal/blob/d2769861/viewer/core/src/public/migration/Cognite3DModel.ts#L291)

___

#### getAncestorTreeIndices

 **getAncestorTreeIndices**(`treeIndex`, `generation`): `Promise`\<[NumericRange](#classes_cognite_revealnumericrangemd)\>

Determines the tree index range of a subtree of an ancestor of the provided
node defined by a tree index.

##### Parameters

| Name | Type | Description |
| :------ | :------ | :------ |
| `treeIndex` | `number` | Tree index of node to find ancestor tree index range for. |
| `generation` | `number` | What "generation" to find. 0 is the node itself, 1 means parent, 2 means grandparent etc. If the node doesn't have as many ancestors, the root of the model is returned. This can be determined by checking that the range returned includes 0. |

##### Returns

`Promise`\<[NumericRange](#classes_cognite_revealnumericrangemd)\>

Tree index range of the subtree spanned by the ancestor at the
"generation" specified, or the root.

##### Defined in

[viewer/core/src/public/migration/Cognite3DModel.ts:315](https://github.com/cognitedata/reveal/blob/d2769861/viewer/core/src/public/migration/Cognite3DModel.ts#L315)

___

#### getBoundingBoxByNodeId

 **getBoundingBoxByNodeId**(`nodeId`, `box?`): `Promise`\<Box3\>

Fetches a bounding box from the CDF by the nodeId.

**`example`**
```js
const box = new THREE.Box3()
const nodeId = 100500;
await model.getBoundingBoxByNodeId(nodeId, box);
// box now has the bounding box
```
```js
// the following code does the same
const box = await model.getBoundingBoxByNodeId(nodeId);
```

##### Parameters

| Name | Type | Description |
| :------ | :------ | :------ |
| `nodeId` | `number` |  |
| `box?` | `Box3` | Optional. Used to write result to. |

##### Returns

`Promise`\<Box3\>

##### Defined in

[viewer/core/src/public/migration/Cognite3DModel.ts:398](https://github.com/cognitedata/reveal/blob/d2769861/viewer/core/src/public/migration/Cognite3DModel.ts#L398)

___

#### getBoundingBoxByTreeIndex

 **getBoundingBoxByTreeIndex**(`treeIndex`, `box?`): `Promise`\<Box3\>

Determine the bounding box of the node identified by the tree index provided. Note that this
function uses the CDF API to look up the bounding box.

**`example`**
```js
const box = new THREE.Box3()
const treeIndex = 42;
await model.getBoundingBoxByTreeIndex(treeIndex, box);
// box now has the bounding box
```
```js
// the following code does the same
const box = await model.getBoundingBoxByTreeIndex(treeIndex);
```

##### Parameters

| Name | Type | Description |
| :------ | :------ | :------ |
| `treeIndex` | `number` | Tree index of the node to find bounding box for. |
| `box?` | `Box3` | Optional preallocated container to hold the bounding box. |

##### Returns

`Promise`\<Box3\>

##### Defined in

[viewer/core/src/public/migration/Cognite3DModel.ts:429](https://github.com/cognitedata/reveal/blob/d2769861/viewer/core/src/public/migration/Cognite3DModel.ts#L429)

___

#### getCameraConfiguration

 **getCameraConfiguration**(): [CameraConfiguration](#cameraconfiguration)

Retrieves the camera position and target stored for the model. Typically this
is used to store a good starting position for a model. Returns `undefined` if there
isn't any stored camera configuration for the model.

##### Returns

[CameraConfiguration](#cameraconfiguration)

##### Implementation of

[CogniteModelBase](#interfaces_cognite_revealcognitemodelbasemd).[getCameraConfiguration](#getcameraconfiguration)

##### Defined in

[viewer/core/src/public/migration/Cognite3DModel.ts:362](https://github.com/cognitedata/reveal/blob/d2769861/viewer/core/src/public/migration/Cognite3DModel.ts#L362)

___

#### getDefaultNodeAppearance

 **getDefaultNodeAppearance**(): [NodeAppearance](#nodeappearance)

Gets the default appearance for nodes that are not styled using
[assignStyledNodeCollection](#assignstylednodecollection).

##### Returns

[NodeAppearance](#nodeappearance)

##### Defined in

[viewer/core/src/public/migration/Cognite3DModel.ts:120](https://github.com/cognitedata/reveal/blob/d2769861/viewer/core/src/public/migration/Cognite3DModel.ts#L120)

___

#### getModelBoundingBox

 **getModelBoundingBox**(`outBbox?`, `restrictToMostGeometry?`): `Box3`

Determines the full bounding box of the model.

**`example`**
```js
const box = new THREE.Box3()
model.getModelBoundingBox(box);
// box now has the bounding box
```
```js
// the following code does the same
const box = model.getModelBoundingBox();
```

##### Parameters

| Name | Type | Description |
| :------ | :------ | :------ |
| `outBbox?` | `Box3` | Optional. Used to write result to. |
| `restrictToMostGeometry?` | `boolean` | Optional. When true, returned bounds are restricted to where most of the geometry is located. This is useful for models that have junk geometry located far from the "main" model. Added in version 1.3.0. |

##### Returns

`Box3`

Model bounding box.

##### Implementation of

[CogniteModelBase](#interfaces_cognite_revealcognitemodelbasemd).[getModelBoundingBox](#getmodelboundingbox)

##### Defined in

[viewer/core/src/public/migration/Cognite3DModel.ts:346](https://github.com/cognitedata/reveal/blob/d2769861/viewer/core/src/public/migration/Cognite3DModel.ts#L346)

___

#### getModelTransformation

 **getModelTransformation**(`out?`): `Matrix4`

Gets transformation matrix of the model.

##### Parameters

| Name | Type | Description |
| :------ | :------ | :------ |
| `out?` | `Matrix4` | Preallocated `THREE.Matrix4` (optional). |

##### Returns

`Matrix4`

##### Implementation of

[CogniteModelBase](#interfaces_cognite_revealcognitemodelbasemd).[getModelTransformation](#getmodeltransformation)

##### Defined in

[viewer/core/src/public/migration/Cognite3DModel.ts:378](https://github.com/cognitedata/reveal/blob/d2769861/viewer/core/src/public/migration/Cognite3DModel.ts#L378)

___

#### getSubtreeTreeIndices

 **getSubtreeTreeIndices**(`treeIndex`): `Promise`\<[NumericRange](#classes_cognite_revealnumericrangemd)\>

Determines the range of tree indices for a given subtree.

##### Parameters

| Name | Type | Description |
| :------ | :------ | :------ |
| `treeIndex` | `number` | Index of the root of the subtree to get the index range for. |

##### Returns

`Promise`\<[NumericRange](#classes_cognite_revealnumericrangemd)\>

##### Defined in

[viewer/core/src/public/migration/Cognite3DModel.ts:299](https://github.com/cognitedata/reveal/blob/d2769861/viewer/core/src/public/migration/Cognite3DModel.ts#L299)

___

#### iterateNodesByTreeIndex

 **iterateNodesByTreeIndex**(`action`): `Promise`\<void\>

Iterates over all nodes in the model and applies the provided action to each node (identified by tree index).
The passed action is applied incrementally to avoid main thread blocking, meaning that the changes can be partially
applied until promise is resolved (iteration is done).

**`example`**
```js
const logIndex = (treeIndex) => console.log(treeIndex);
await model.iterateNodesByTreeIndex(logIndex); // 0, 1, 2, ...
```

##### Parameters

| Name | Type | Description |
| :------ | :------ | :------ |
| `action` | (`treeIndex`: `number`) => `void` | Function that will be called with a treeIndex argument. |

##### Returns

`Promise`\<void\>

Promise that is resolved once the iteration is done.

##### Defined in

[viewer/core/src/public/migration/Cognite3DModel.ts:446](https://github.com/cognitedata/reveal/blob/d2769861/viewer/core/src/public/migration/Cognite3DModel.ts#L446)

___

#### iterateSubtreeByTreeIndex

 **iterateSubtreeByTreeIndex**(`treeIndex`, `action`): `Promise`\<void\>

Iterates over all nodes in a subtree of the model and applies the provided action to each node
(identified by tree index). The provided node is included in the visited set.  The passed action
is applied incrementally to avoid main thread blocking, meaning that the changes can be partially
applied until promise is resolved (iteration is done).

**`example`**
```js
// make a subtree to be gray
await model.iterateNodesByTreeIndex(treeIndex => {
  model.setNodeColorByTreeIndex(treeIndex, 127, 127, 127);
});
```

##### Parameters

| Name | Type | Description |
| :------ | :------ | :------ |
| `treeIndex` | `number` | Tree index of the top parent of the subtree. |
| `action` | (`treeIndex`: `number`) => `void` | Function that will be called with a treeIndex argument. |

##### Returns

`Promise`\<void\>

Promise that is resolved once the iteration is done.

##### Defined in

[viewer/core/src/public/migration/Cognite3DModel.ts:473](https://github.com/cognitedata/reveal/blob/d2769861/viewer/core/src/public/migration/Cognite3DModel.ts#L473)

___

#### mapBoxFromModelToCdfCoordinates

 **mapBoxFromModelToCdfCoordinates**(`box`, `out?`): `Box3`

Maps from a 3D position in "ThreeJS model space" to coordinates in "CDF space".
This is necessary because CDF has a right-handed Z-up coordinate system while ThreeJS
uses a right-hand Y-up coordinate system. This function also accounts for transformation
applied to the model.

##### Parameters

| Name | Type | Description |
| :------ | :------ | :------ |
| `box` | `Box3` | The box in ThreeJS/model coordinates. |
| `out?` | `Box3` | Optional preallocated buffer for storing the result. May be `box`. |

##### Returns

`Box3`

Transformed box.

##### Defined in

[viewer/core/src/public/migration/Cognite3DModel.ts:279](https://github.com/cognitedata/reveal/blob/d2769861/viewer/core/src/public/migration/Cognite3DModel.ts#L279)

___

#### mapFromCdfToModelCoordinates

 **mapFromCdfToModelCoordinates**(`p`, `out?`): `Vector3`

Maps a position retrieved from the CDF API (e.g. 3D node information) to
coordinates in "ThreeJS model space". This is necessary because CDF has a right-handed
Z-up coordinate system while ThreeJS uses a right-hand Y-up coordinate system.

##### Parameters

| Name | Type | Description |
| :------ | :------ | :------ |
| `p` | `Vector3` | The CDF coordinate to transform. |
| `out?` | `Vector3` | Optional preallocated buffer for storing the result. May be `p`. |

##### Returns

`Vector3`

Transformed position.

##### Defined in

[viewer/core/src/public/migration/Cognite3DModel.ts:243](https://github.com/cognitedata/reveal/blob/d2769861/viewer/core/src/public/migration/Cognite3DModel.ts#L243)

___

#### mapNodeIdToTreeIndex

 **mapNodeIdToTreeIndex**(`nodeId`): `Promise`\<number\>

Maps a single node ID to tree index. This is useful when you e.g. have a
node ID from an asset mapping and want to highlight the given asset using
[mapNodeIdsToTreeIndices](#mapnodeidstotreeindices) is recommended for better performance when
mapping multiple IDs.

**`throws`** If an invalid/non-existant node ID is provided the function throws an error.

##### Parameters

| Name | Type | Description |
| :------ | :------ | :------ |
| `nodeId` | `number` | A Node ID to map to a tree index. |

##### Returns

`Promise`\<number\>

TreeIndex of the provided node.

##### Defined in

[viewer/core/src/public/migration/Cognite3DModel.ts:528](https://github.com/cognitedata/reveal/blob/d2769861/viewer/core/src/public/migration/Cognite3DModel.ts#L528)

___

#### mapNodeIdsToTreeIndices

 **mapNodeIdsToTreeIndices**(`nodeIds`): `Promise`\<number[]\>

Maps a list of Node IDs to tree indices. This function is useful when you have
a list of nodes, e.g. from Asset Mappings, that you want to highlight, hide,
color etc in the viewer.

**`throws`** If an invalid/non-existant node ID is provided the function throws an error.

##### Parameters

| Name | Type | Description |
| :------ | :------ | :------ |
| `nodeIds` | `number`[] | List of node IDs to map to tree indices. |

##### Returns

`Promise`\<number[]\>

A list of tree indices corresponing to the elements in the input.

##### Defined in

[viewer/core/src/public/migration/Cognite3DModel.ts:514](https://github.com/cognitedata/reveal/blob/d2769861/viewer/core/src/public/migration/Cognite3DModel.ts#L514)

___

#### mapPositionFromModelToCdfCoordinates

 **mapPositionFromModelToCdfCoordinates**(`p`, `out?`): `Vector3`

Maps from a 3D position in "ThreeJS model space" (e.g. a ray intersection coordinate)
to coordinates in "CDF space". This is necessary because CDF has a right-handed
Z-up coordinate system while ThreeJS uses a right-hand Y-up coordinate system.
This function also accounts for transformation applied to the model.

##### Parameters

| Name | Type | Description |
| :------ | :------ | :------ |
| `p` | `Vector3` | The ThreeJS coordinate to transform. |
| `out?` | `Vector3` | Optional preallocated buffer for storing the result. May be `p`. |

##### Returns

`Vector3`

Transformed position.

##### Defined in

[viewer/core/src/public/migration/Cognite3DModel.ts:261](https://github.com/cognitedata/reveal/blob/d2769861/viewer/core/src/public/migration/Cognite3DModel.ts#L261)

___

#### mapTreeIndexToNodeId

 **mapTreeIndexToNodeId**(`treeIndex`): `Promise`\<number\>

Maps a single tree index to node ID for use with the API. If you have multiple
tree indices to map, [mapNodeIdsToTreeIndices](#mapnodeidstotreeindices) is recommended for better
performance.

**`throws`** If an invalid/non-existent node ID is provided the function throws an error.

##### Parameters

| Name | Type | Description |
| :------ | :------ | :------ |
| `treeIndex` | `number` | A tree index to map to a Node ID. |

##### Returns

`Promise`\<number\>

TreeIndex of the provided node.

##### Defined in

[viewer/core/src/public/migration/Cognite3DModel.ts:554](https://github.com/cognitedata/reveal/blob/d2769861/viewer/core/src/public/migration/Cognite3DModel.ts#L554)

___

#### mapTreeIndicesToNodeIds

 **mapTreeIndicesToNodeIds**(`treeIndices`): `Promise`\<number[]\>

Maps a list of tree indices to node IDs for use with the Cognite SDK.
This function is useful if you have a list of tree indices, e.g. from
[Cognite3DModel.iterateSubtreeByTreeIndex](#iteratesubtreebytreeindex), and want to perform
some operations on these nodes using the SDK.

**`throws`** If an invalid tree index is provided the function throws an error.

##### Parameters

| Name | Type | Description |
| :------ | :------ | :------ |
| `treeIndices` | `number`[] | Tree indices to map to node IDs. |

##### Returns

`Promise`\<number[]\>

A list of node IDs corresponding to the elements of the input.

##### Defined in

[viewer/core/src/public/migration/Cognite3DModel.ts:542](https://github.com/cognitedata/reveal/blob/d2769861/viewer/core/src/public/migration/Cognite3DModel.ts#L542)

___

#### removeAllStyledNodeCollections

 **removeAllStyledNodeCollections**(): `void`

Removes all styled collections, resetting the appearance of all nodes to the
default appearance.

##### Returns

`void`

##### Defined in

[viewer/core/src/public/migration/Cognite3DModel.ts:209](https://github.com/cognitedata/reveal/blob/d2769861/viewer/core/src/public/migration/Cognite3DModel.ts#L209)

___

#### resetNodeTransform

 **resetNodeTransform**(`treeIndices`): `void`

Resets the transformation for the nodes given.

##### Parameters

| Name | Type | Description |
| :------ | :------ | :------ |
| `treeIndices` | [NumericRange](#classes_cognite_revealnumericrangemd) | Tree indices of the nodes to reset transforms for. |

##### Returns

`void`

##### Defined in

[viewer/core/src/public/migration/Cognite3DModel.ts:231](https://github.com/cognitedata/reveal/blob/d2769861/viewer/core/src/public/migration/Cognite3DModel.ts#L231)

___

#### resetNodeTransformByTreeIndex

 **resetNodeTransformByTreeIndex**(`treeIndex`, `applyToChildren?`): `Promise`\<number\>

Remove override transform of the node by tree index.

##### Parameters

| Name | Type | Default value |
| :------ | :------ | :------ |
| `treeIndex` | `number` | `undefined` |
| `applyToChildren` | `boolean` | true |

##### Returns

`Promise`\<number\>

##### Defined in

[viewer/core/src/public/migration/Cognite3DModel.ts:499](https://github.com/cognitedata/reveal/blob/d2769861/viewer/core/src/public/migration/Cognite3DModel.ts#L499)

___

#### setDefaultNodeAppearance

 **setDefaultNodeAppearance**(`appearance`): `void`

Sets the default appearance for nodes that are not styled using
[assignStyledNodeCollection](#assignstylednodecollection). Updating the default style can be an
expensive operation, so use with care.

##### Parameters

| Name | Type | Description |
| :------ | :------ | :------ |
| `appearance` | [NodeAppearance](#nodeappearance) | Default node appearance. |

##### Returns

`void`

##### Defined in

[viewer/core/src/public/migration/Cognite3DModel.ts:112](https://github.com/cognitedata/reveal/blob/d2769861/viewer/core/src/public/migration/Cognite3DModel.ts#L112)

___

#### setModelTransformation

 **setModelTransformation**(`matrix`): `void`

Sets transformation matrix of the model. This overrides the current transformation.

##### Parameters

| Name | Type | Description |
| :------ | :------ | :------ |
| `matrix` | `Matrix4` | Transformation matrix. |

##### Returns

`void`

##### Implementation of

[CogniteModelBase](#interfaces_cognite_revealcognitemodelbasemd).[setModelTransformation](#setmodeltransformation)

##### Defined in

[viewer/core/src/public/migration/Cognite3DModel.ts:370](https://github.com/cognitedata/reveal/blob/d2769861/viewer/core/src/public/migration/Cognite3DModel.ts#L370)

___

#### setNodeTransform

 **setNodeTransform**(`treeIndices`, `transformMatrix`): `void`

Apply a transformation matrix to the tree indices given, changing
rotation, scale and/or position.

Note that setting multiple transformations for the same
node isn't supported and might lead to undefined results.

##### Parameters

| Name | Type | Description |
| :------ | :------ | :------ |
| `treeIndices` | [NumericRange](#classes_cognite_revealnumericrangemd) | Tree indices of nodes to apply the transformation to. |
| `transformMatrix` | `Matrix4` | Transformation to apply. |

##### Returns

`void`

##### Defined in

[viewer/core/src/public/migration/Cognite3DModel.ts:223](https://github.com/cognitedata/reveal/blob/d2769861/viewer/core/src/public/migration/Cognite3DModel.ts#L223)

___

#### setNodeTransformByTreeIndex

 **setNodeTransformByTreeIndex**(`treeIndex`, `transform`, `applyToChildren?`): `Promise`\<number\>

Set override transform of the node by tree index.

##### Parameters

| Name | Type | Default value |
| :------ | :------ | :------ |
| `treeIndex` | `number` | `undefined` |
| `transform` | `Matrix4` | `undefined` |
| `applyToChildren` | `boolean` | true |

##### Returns

`Promise`\<number\>

##### Defined in

[viewer/core/src/public/migration/Cognite3DModel.ts:484](https://github.com/cognitedata/reveal/blob/d2769861/viewer/core/src/public/migration/Cognite3DModel.ts#L484)

___

#### unassignStyledNodeCollection

 **unassignStyledNodeCollection**(`nodeCollection`): `void`

Removes styling for previously added styled collection, resetting the style to the default (or
the style imposed by other styled collections).

**`throws`** Error if node collection isn't assigned to the model.

##### Parameters

| Name | Type | Description |
| :------ | :------ | :------ |
| `nodeCollection` | [NodeCollectionBase](#classes_cognite_revealnodecollectionbasemd) | Node collection previously added using [assignStyledNodeCollection](#assignstylednodecollection). |

##### Returns

`void`

##### Defined in

[viewer/core/src/public/migration/Cognite3DModel.ts:195](https://github.com/cognitedata/reveal/blob/d2769861/viewer/core/src/public/migration/Cognite3DModel.ts#L195)

___

#### updateStyledNodeCollection

 **updateStyledNodeCollection**(`nodeCollection`, `newAppearance`): `void`

Updates styled node collections with a new appearance.

**`throws`** Error if node collection hasn't previously been assigned using [assignStyledNodeCollection](#assignstylednodecollection).

##### Parameters

| Name | Type | Description |
| :------ | :------ | :------ |
| `nodeCollection` | [NodeCollectionBase](#classes_cognite_revealnodecollectionbasemd) | A node collection previously assigned using [assignStyledNodeCollection](#assignstylednodecollection). |
| `newAppearance` | [NodeAppearance](#nodeappearance) | New appearance for the nodes in the collection. |

##### Returns

`void`

##### Defined in

[viewer/core/src/public/migration/Cognite3DModel.ts:179](https://github.com/cognitedata/reveal/blob/d2769861/viewer/core/src/public/migration/Cognite3DModel.ts#L179)


<a name="classes_cognite_revealcognite3dviewermd"></a>

[@cognite/reveal](#readmemd) / [Modules](#modulesmd) / [@cognite/reveal](#modules_cognite_revealmd) / Cognite3DViewer

## Class: Cognite3DViewer

[@cognite/reveal](#modules_cognite_revealmd).Cognite3DViewer

### Table of contents

#### Constructors

- [constructor](#constructor)

#### Accessors

- [cadBudget](#cadbudget)
- [cameraControls](#cameracontrols)
- [cameraControlsEnabled](#cameracontrolsenabled)
- [domElement](#domelement)
- [models](#models)
- [pointCloudBudget](#pointcloudbudget)
- [renderer](#renderer)

#### Methods

- [addCadModel](#addcadmodel)
- [addModel](#addmodel)
- [addObject3D](#addobject3d)
- [addPointCloudModel](#addpointcloudmodel)
- [addUiObject](#adduiobject)
- [determineModelType](#determinemodeltype)
- [disableKeyboardNavigation](#disablekeyboardnavigation)
- [dispose](#dispose)
- [enableKeyboardNavigation](#enablekeyboardnavigation)
- [fitCameraToBoundingBox](#fitcameratoboundingbox)
- [fitCameraToModel](#fitcameratomodel)
- [getCamera](#getcamera)
- [getCameraControlsOptions](#getcameracontrolsoptions)
- [getCameraPosition](#getcameraposition)
- [getCameraTarget](#getcameratarget)
- [getClippingPlanes](#getclippingplanes)
- [getIntersectionFromPixel](#getintersectionfrompixel)
- [getScene](#getscene)
- [getScreenshot](#getscreenshot)
- [getVersion](#getversion)
- [getViewState](#getviewstate)
- [loadCameraFromModel](#loadcamerafrommodel)
- [off](#off)
- [on](#on)
- [removeModel](#removemodel)
- [removeObject3D](#removeobject3d)
- [removeUiObject](#removeuiobject)
- [requestRedraw](#requestredraw)
- [setBackgroundColor](#setbackgroundcolor)
- [setCameraControlsOptions](#setcameracontrolsoptions)
- [setCameraPosition](#setcameraposition)
- [setCameraTarget](#setcameratarget)
- [setClippingPlanes](#setclippingplanes)
- [setLogLevel](#setloglevel)
- [setSlicingPlanes](#setslicingplanes)
- [setViewState](#setviewstate)
- [worldToScreen](#worldtoscreen)
- [isBrowserSupported](#isbrowsersupported)

### Constructors

#### constructor

 **new Cognite3DViewer**(`options`)

##### Parameters

| Name | Type |
| :------ | :------ |
| `options` | [Cognite3DViewerOptions](#interfaces_cognite_revealcognite3dvieweroptionsmd) |

##### Defined in

[viewer/core/src/public/migration/Cognite3DViewer.ts:193](https://github.com/cognitedata/reveal/blob/d2769861/viewer/core/src/public/migration/Cognite3DViewer.ts#L193)

### Accessors

#### cadBudget

 `get` **cadBudget**(): [CadModelBudget](#cadmodelbudget)

Gets the current budget for downloading geometry for CAD models. Note that this
budget is shared between all added CAD models and not a per-model budget.

##### Returns

[CadModelBudget](#cadmodelbudget)

##### Defined in

[viewer/core/src/public/migration/Cognite3DViewer.ts:149](https://github.com/cognitedata/reveal/blob/d2769861/viewer/core/src/public/migration/Cognite3DViewer.ts#L149)

 `set` **cadBudget**(`budget`): `void`

Sets the current budget for downloading geometry for CAD models. Note that this
budget is shared between all added CAD models and not a per-model budget.

##### Parameters

| Name | Type |
| :------ | :------ |
| `budget` | [CadModelBudget](#cadmodelbudget) |

##### Returns

`void`

##### Defined in

[viewer/core/src/public/migration/Cognite3DViewer.ts:159](https://github.com/cognitedata/reveal/blob/d2769861/viewer/core/src/public/migration/Cognite3DViewer.ts#L159)

___

#### cameraControls

 `get` **cameraControls**(): `ComboControls`

Gets the camera controller. See https://www.npmjs.com/package/@cognite/three-combo-controls
for documentation. Note that by default the `minDistance` setting of the controls will
be automatic. This can be disabled using [Cognite3DViewerOptions.automaticControlsSensitivity](#automaticcontrolssensitivity).

##### Returns

`ComboControls`

##### Defined in

[viewer/core/src/public/migration/Cognite3DViewer.ts:898](https://github.com/cognitedata/reveal/blob/d2769861/viewer/core/src/public/migration/Cognite3DViewer.ts#L898)

___

#### cameraControlsEnabled

 `get` **cameraControlsEnabled**(): `boolean`

Gets whether camera controls through mouse, touch and keyboard are enabled.

##### Returns

`boolean`

##### Defined in

[viewer/core/src/public/migration/Cognite3DViewer.ts:905](https://github.com/cognitedata/reveal/blob/d2769861/viewer/core/src/public/migration/Cognite3DViewer.ts#L905)

 `set` **cameraControlsEnabled**(`enabled`): `void`

Sets whether camera controls through mouse, touch and keyboard are enabled.
This can be useful to e.g. temporarily disable navigation when manipulating other
objects in the scene or when implementing a "cinematic" viewer.

##### Parameters

| Name | Type |
| :------ | :------ |
| `enabled` | `boolean` |

##### Returns

`void`

##### Defined in

[viewer/core/src/public/migration/Cognite3DViewer.ts:914](https://github.com/cognitedata/reveal/blob/d2769861/viewer/core/src/public/migration/Cognite3DViewer.ts#L914)

___

#### domElement

 `get` **domElement**(): `HTMLElement`

The DOM element the viewer will insert its rendering canvas into.
The DOM element can be specified in the options when the viewer is created.
If not specified, the DOM element will be created automatically.
The DOM element cannot be changed after the viewer has been created.

##### Returns

`HTMLElement`

##### Defined in

[viewer/core/src/public/migration/Cognite3DViewer.ts:86](https://github.com/cognitedata/reveal/blob/d2769861/viewer/core/src/public/migration/Cognite3DViewer.ts#L86)

___

#### models

 `get` **models**(): [CogniteModelBase](#interfaces_cognite_revealcognitemodelbasemd)[]

Gets a list of models currently added to the viewer.

##### Returns

[CogniteModelBase](#interfaces_cognite_revealcognitemodelbasemd)[]

##### Defined in

[viewer/core/src/public/migration/Cognite3DViewer.ts:184](https://github.com/cognitedata/reveal/blob/d2769861/viewer/core/src/public/migration/Cognite3DViewer.ts#L184)

___

#### pointCloudBudget

 `get` **pointCloudBudget**(): [PointCloudBudget](#pointcloudbudget)

Returns the point cloud budget. The budget is shared between all loaded
point cloud models.

##### Returns

[PointCloudBudget](#pointcloudbudget)

##### Defined in

[viewer/core/src/public/migration/Cognite3DViewer.ts:169](https://github.com/cognitedata/reveal/blob/d2769861/viewer/core/src/public/migration/Cognite3DViewer.ts#L169)

 `set` **pointCloudBudget**(`budget`): `void`

Sets the point cloud budget. The budget is shared between all loaded
point cloud models.

##### Parameters

| Name | Type |
| :------ | :------ |
| `budget` | [PointCloudBudget](#pointcloudbudget) |

##### Returns

`void`

##### Defined in

[viewer/core/src/public/migration/Cognite3DViewer.ts:177](https://github.com/cognitedata/reveal/blob/d2769861/viewer/core/src/public/migration/Cognite3DViewer.ts#L177)

___

#### renderer

 `get` **renderer**(): `WebGLRenderer`

Returns the renderer used to produce images from 3D geometry.

##### Returns

`WebGLRenderer`

##### Defined in

[viewer/core/src/public/migration/Cognite3DViewer.ts:93](https://github.com/cognitedata/reveal/blob/d2769861/viewer/core/src/public/migration/Cognite3DViewer.ts#L93)

### Methods

#### addCadModel

 **addCadModel**(`options`): `Promise`\<[Cognite3DModel](#classes_cognite_revealcognite3dmodelmd)\>

Add a new CAD 3D model to the viewer.
Call [Cognite3DViewer.fitCameraToModel](#fitcameratomodel) to see the model after the model has loaded.

**`example`**
```js
const options = {
modelId:     'COGNITE_3D_MODEL_ID',
revisionId:  'COGNITE_3D_REVISION_ID',
};
viewer.addCadModel(options).then(model => {
viewer.fitCameraToModel(model, 0);
});
```

##### Parameters

| Name | Type |
| :------ | :------ |
| `options` | [AddModelOptions](#interfaces_cognite_revealaddmodeloptionsmd) |

##### Returns

`Promise`\<[Cognite3DModel](#classes_cognite_revealcognite3dmodelmd)\>

##### Defined in

[viewer/core/src/public/migration/Cognite3DViewer.ts:561](https://github.com/cognitedata/reveal/blob/d2769861/viewer/core/src/public/migration/Cognite3DViewer.ts#L561)

___

#### addModel

 **addModel**(`options`): `Promise`\<[Cognite3DModel](#classes_cognite_revealcognite3dmodelmd) \| [CognitePointCloudModel](#classes_cognite_revealcognitepointcloudmodelmd)\>

Add a new model to the viewer.
Call [Cognite3DViewer.fitCameraToModel](#fitcameratomodel) to see the model after the model has loaded.

**`example`**
```js
const options = {
modelId:     'COGNITE_3D_MODEL_ID',
revisionId:  'COGNITE_3D_REVISION_ID',
};
viewer.addModel(options).then(model => {
viewer.fitCameraToModel(model, 0);
});
```

##### Parameters

| Name | Type |
| :------ | :------ |
| `options` | [AddModelOptions](#interfaces_cognite_revealaddmodeloptionsmd) |

##### Returns

`Promise`\<[Cognite3DModel](#classes_cognite_revealcognite3dmodelmd) \| [CognitePointCloudModel](#classes_cognite_revealcognitepointcloudmodelmd)\>

##### Defined in

[viewer/core/src/public/migration/Cognite3DViewer.ts:528](https://github.com/cognitedata/reveal/blob/d2769861/viewer/core/src/public/migration/Cognite3DViewer.ts#L528)

___

#### addObject3D

 **addObject3D**(`object`): `void`

Add a THREE.Object3D to the viewer.

**`example`**
```js
const sphere = new THREE.Mesh(
new THREE.SphereBufferGeometry(),
new THREE.MeshBasicMaterial()
);
viewer.addObject3D(sphere);
```

##### Parameters

| Name | Type |
| :------ | :------ |
| `object` | `Object3D`\<Event\> |

##### Returns

`void`

##### Defined in

[viewer/core/src/public/migration/Cognite3DViewer.ts:692](https://github.com/cognitedata/reveal/blob/d2769861/viewer/core/src/public/migration/Cognite3DViewer.ts#L692)

___

#### addPointCloudModel

 **addPointCloudModel**(`options`): `Promise`\<[CognitePointCloudModel](#classes_cognite_revealcognitepointcloudmodelmd)\>

Add a new pointcloud 3D model to the viewer.
Call [Cognite3DViewer.fitCameraToModel](#fitcameratomodel) to see the model after the model has loaded.

**`example`**
```js
const options = {
modelId:     'COGNITE_3D_MODEL_ID',
revisionId:  'COGNITE_3D_REVISION_ID',
};
viewer.addPointCloudModel(options).then(model => {
viewer.fitCameraToModel(model, 0);
});
```

##### Parameters

| Name | Type |
| :------ | :------ |
| `options` | [AddModelOptions](#interfaces_cognite_revealaddmodeloptionsmd) |

##### Returns

`Promise`\<[CognitePointCloudModel](#classes_cognite_revealcognitepointcloudmodelmd)\>

##### Defined in

[viewer/core/src/public/migration/Cognite3DViewer.ts:589](https://github.com/cognitedata/reveal/blob/d2769861/viewer/core/src/public/migration/Cognite3DViewer.ts#L589)

___

#### addUiObject

 **addUiObject**(`object`, `screenPos`, `size`): `void`

Add an object that will be considered a UI object. It will be rendered in the last stage and with orthographic projection.

##### Parameters

| Name | Type | Description |
| :------ | :------ | :------ |
| `object` | `Object3D`\<Event\> |  |
| `screenPos` | `Vector2` | Screen space position of object (in pixels). |
| `size` | `Vector2` | Pixel width and height of the object. |

##### Returns

`void`

##### Defined in

[viewer/core/src/public/migration/Cognite3DViewer.ts:732](https://github.com/cognitedata/reveal/blob/d2769861/viewer/core/src/public/migration/Cognite3DViewer.ts#L732)

___

#### determineModelType

 **determineModelType**(`modelId`, `revisionId`): `Promise`\<``""`` \| [SupportedModelTypes](#supportedmodeltypes)\>

Use to determine of which type the model is.

**`example`**
```typescript
const viewer = new Cognite3DViewer(...);
const type = await viewer.determineModelType(options.modelId, options.revisionId)
let model: Cognite3DModel | CognitePointCloudModel
switch (type) {
  case 'cad':
    model = await viewer.addCadModel(options);
    break;
  case 'pointcloud':
    model = await viewer.addPointCloudModel(options);
    break;
  default:
    throw new Error('Model is not supported');
}
viewer.fitCameraToModel(model);
```

##### Parameters

| Name | Type | Description |
| :------ | :------ | :------ |
| `modelId` | `number` | The model's id. |
| `revisionId` | `number` | The model's revision id. |

##### Returns

`Promise`\<``""`` \| [SupportedModelTypes](#supportedmodeltypes)\>

Empty string if type is not supported.

##### Defined in

[viewer/core/src/public/migration/Cognite3DViewer.ts:663](https://github.com/cognitedata/reveal/blob/d2769861/viewer/core/src/public/migration/Cognite3DViewer.ts#L663)

___

#### disableKeyboardNavigation

 **disableKeyboardNavigation**(): `void`

Disables camera movement by pressing WASD or arrows keys.

##### Returns

`void`

##### Defined in

[viewer/core/src/public/migration/Cognite3DViewer.ts:1001](https://github.com/cognitedata/reveal/blob/d2769861/viewer/core/src/public/migration/Cognite3DViewer.ts#L1001)

___

#### dispose

 **dispose**(): `void`

Dispose of WebGL resources. Can be used to free up memory when the viewer is no longer in use.

**`see`** [https://threejs.org/docs/#manual/en/introduction/How-to-dispose-of-objects](https://threejs.org/docs/#manual/en/introduction/How-to-dispose-of-objects)
```ts
// Viewer is no longer in use, free up memory
viewer.dispose();
```.

##### Returns

`void`

##### Defined in

[viewer/core/src/public/migration/Cognite3DViewer.ts:337](https://github.com/cognitedata/reveal/blob/d2769861/viewer/core/src/public/migration/Cognite3DViewer.ts#L337)

___

#### enableKeyboardNavigation

 **enableKeyboardNavigation**(): `void`

Allows to move camera with WASD or arrows keys.

##### Returns

`void`

##### Defined in

[viewer/core/src/public/migration/Cognite3DViewer.ts:994](https://github.com/cognitedata/reveal/blob/d2769861/viewer/core/src/public/migration/Cognite3DViewer.ts#L994)

___

#### fitCameraToBoundingBox

 **fitCameraToBoundingBox**(`box`, `duration?`, `radiusFactor?`): `void`

Move camera to a place where the content of a bounding box is visible to the camera.

**`example`**
```js
// Fit camera to bounding box over 500 milliseconds
viewer.fitCameraToBoundingBox(boundingBox, 500);
```
```js
// Fit camera to bounding box instantaneously
viewer.fitCameraToBoundingBox(boundingBox, 0);
```
```js
// Place the camera closer to the bounding box
viewer.fitCameraToBoundingBox(boundingBox, 500, 2);
```

##### Parameters

| Name | Type | Default value | Description |
| :------ | :------ | :------ | :------ |
| `box` | `Box3` | `undefined` | The bounding box in world space. |
| `duration?` | `number` | `undefined` | The duration of the animation moving the camera. Set this to 0 (zero) to disable animation. |
| `radiusFactor` | `number` | 2 | The ratio of the distance from camera to center of box and radius of the box. |

##### Returns

`void`

##### Defined in

[viewer/core/src/public/migration/Cognite3DViewer.ts:980](https://github.com/cognitedata/reveal/blob/d2769861/viewer/core/src/public/migration/Cognite3DViewer.ts#L980)

___

#### fitCameraToModel

 **fitCameraToModel**(`model`, `duration?`): `void`

Move camera to a place where the 3D model is visible.
It uses the bounding box of the 3D model and calls [Cognite3DViewer.fitCameraToBoundingBox](#fitcameratoboundingbox).

**`example`**
```js
// Fit camera to model
viewer.fitCameraToModel(model);
```
```js
// Fit camera to model over 500 milliseconds
viewer.fitCameraToModel(model, 500);
```
```js
// Fit camera to model instantly
viewer.fitCameraToModel(model, 0);
```

##### Parameters

| Name | Type | Description |
| :------ | :------ | :------ |
| `model` | [CogniteModelBase](#interfaces_cognite_revealcognitemodelbasemd) | The 3D model. |
| `duration?` | `number` | The duration of the animation moving the camera. Set this to 0 (zero) to disable animation. |

##### Returns

`void`

##### Defined in

[viewer/core/src/public/migration/Cognite3DViewer.ts:956](https://github.com/cognitedata/reveal/blob/d2769861/viewer/core/src/public/migration/Cognite3DViewer.ts#L956)

___

#### getCamera

 **getCamera**(): `PerspectiveCamera`

**`obvious`**

##### Returns

`PerspectiveCamera`

The THREE.Camera used for rendering.

##### Defined in

[viewer/core/src/public/migration/Cognite3DViewer.ts:816](https://github.com/cognitedata/reveal/blob/d2769861/viewer/core/src/public/migration/Cognite3DViewer.ts#L816)

___

#### getCameraControlsOptions

 **getCameraControlsOptions**(): [CameraControlsOptions](#cameracontrolsoptions)

Gets camera controls mode.

##### Returns

[CameraControlsOptions](#cameracontrolsoptions)

##### Defined in

[viewer/core/src/public/migration/Cognite3DViewer.ts:484](https://github.com/cognitedata/reveal/blob/d2769861/viewer/core/src/public/migration/Cognite3DViewer.ts#L484)

___

#### getCameraPosition

 **getCameraPosition**(): `Vector3`

**`obvious`**

##### Returns

`Vector3`

Camera's position in world space.

##### Defined in

[viewer/core/src/public/migration/Cognite3DViewer.ts:832](https://github.com/cognitedata/reveal/blob/d2769861/viewer/core/src/public/migration/Cognite3DViewer.ts#L832)

___

#### getCameraTarget

 **getCameraTarget**(): `Vector3`

**`obvious`**

##### Returns

`Vector3`

Camera's target in world space.

##### Defined in

[viewer/core/src/public/migration/Cognite3DViewer.ts:843](https://github.com/cognitedata/reveal/blob/d2769861/viewer/core/src/public/migration/Cognite3DViewer.ts#L843)

___

#### getClippingPlanes

 **getClippingPlanes**(): `Plane`[]

Returns the current active clipping planes.

**`version`** New in 2.1

##### Returns

`Plane`[]

##### Defined in

[viewer/core/src/public/migration/Cognite3DViewer.ts:808](https://github.com/cognitedata/reveal/blob/d2769861/viewer/core/src/public/migration/Cognite3DViewer.ts#L808)

___

#### getIntersectionFromPixel

 **getIntersectionFromPixel**(`offsetX`, `offsetY`, `options?`): `Promise`\<[Intersection](#intersection)\>

Raycasting model(s) for finding where the ray intersects with the model.

**`see`** [https://en.wikipedia.org/wiki/Ray_casting](https://en.wikipedia.org/wiki/Ray_casting).

**`example`** For CAD model
```js
const offsetX = 50 // pixels from the left
const offsetY = 100 // pixels from the top
const intersection = await viewer.getIntersectionFromPixel(offsetX, offsetY);
if (intersection) // it was a hit
  console.log(
  'You hit model ', intersection.model,
  ' at the node with tree index ', intersection.treeIndex,
  ' at this exact point ', intersection.point
  );
```

**`example`** For point cloud
```js
const offsetX = 50 // pixels from the left
const offsetY = 100 // pixels from the top
const intersection = await viewer.getIntersectionFromPixel(offsetX, offsetY);
if (intersection) // it was a hit
  console.log(
  'You hit model ', intersection.model,
  ' at the point index ', intersection.pointIndex,
  ' at this exact point ', intersection.point
  );
```

##### Parameters

| Name | Type | Description |
| :------ | :------ | :------ |
| `offsetX` | `number` | X coordinate in pixels (relative to the domElement). |
| `offsetY` | `number` | Y coordinate in pixels (relative to the domElement). |
| `options?` | [IntersectionFromPixelOptions](#interfaces_cognite_revealintersectionfrompixeloptionsmd) | Options to control the behavior of the intersection operation. Optional (new in 1.3.0). |

##### Returns

`Promise`\<[Intersection](#intersection)\>

A promise that if there was an intersection then return the intersection object - otherwise it
returns `null` if there were no intersections.

##### Defined in

[viewer/core/src/public/migration/Cognite3DViewer.ts:1139](https://github.com/cognitedata/reveal/blob/d2769861/viewer/core/src/public/migration/Cognite3DViewer.ts#L1139)

___

#### getScene

 **getScene**(): `Scene`

**`obvious`**

##### Returns

`Scene`

The THREE.Scene used for rendering.

##### Defined in

[viewer/core/src/public/migration/Cognite3DViewer.ts:824](https://github.com/cognitedata/reveal/blob/d2769861/viewer/core/src/public/migration/Cognite3DViewer.ts#L824)

___

#### getScreenshot

 **getScreenshot**(`width?`, `height?`): `Promise`\<string\>

Take screenshot from the current camera position.

**`example`**
```js
// Take a screenshot with custom resolution
const url = await viewer.getScreenshot(1920, 1080);
```
```js
// Add a screenshot with resolution of the canvas to the page
const url = await viewer.getScreenshot();
const image = document.createElement('img');
image.src = url;
document.body.appendChild(url);
```

##### Parameters

| Name | Type | Description |
| :------ | :------ | :------ |
| `width` | `number` | Width of the final image. Default is current canvas size. |
| `height` | `number` | Height of the final image. Default is current canvas size. |

##### Returns

`Promise`\<string\>

A [Data URL](https://developer.mozilla.org/en-US/docs/Web/HTTP/Basics_of_HTTP/Data_URIs) of the image ('image/png').

##### Defined in

[viewer/core/src/public/migration/Cognite3DViewer.ts:1081](https://github.com/cognitedata/reveal/blob/d2769861/viewer/core/src/public/migration/Cognite3DViewer.ts#L1081)

___

#### getVersion

 **getVersion**(): `string`

Returns reveal version installed.

##### Returns

`string`

##### Defined in

[viewer/core/src/public/migration/Cognite3DViewer.ts:310](https://github.com/cognitedata/reveal/blob/d2769861/viewer/core/src/public/migration/Cognite3DViewer.ts#L310)

___

#### getViewState

 **getViewState**(): [ViewerState](#viewerstate)

Gets the current viewer state which includes the camera pose as well as applied styling.

##### Returns

[ViewerState](#viewerstate)

JSON object containing viewer state.

##### Defined in

[viewer/core/src/public/migration/Cognite3DViewer.ts:492](https://github.com/cognitedata/reveal/blob/d2769861/viewer/core/src/public/migration/Cognite3DViewer.ts#L492)

___

#### loadCameraFromModel

 **loadCameraFromModel**(`model`): `void`

Attempts to load the camera settings from the settings stored for the
provided model. See [https://docs.cognite.com/api/v1/#operation/get3DRevision](https://docs.cognite.com/api/v1/#operation/get3DRevision)
and [https://docs.cognite.com/api/v1/#operation/update3DRevisions](https://docs.cognite.com/api/v1/#operation/update3DRevisions) for
information on how this setting is retrieved and stored. This setting can
also be changed through the 3D models management interface in Cognite Fusion.
If no camera configuration is stored in CDF, [Cognite3DViewer.fitCameraToModel](#fitcameratomodel)
is used as a fallback.

##### Parameters

| Name | Type | Description |
| :------ | :------ | :------ |
| `model` | [CogniteModelBase](#interfaces_cognite_revealcognitemodelbasemd) | The model to load camera settings from. |

##### Returns

`void`

##### Defined in

[viewer/core/src/public/migration/Cognite3DViewer.ts:928](https://github.com/cognitedata/reveal/blob/d2769861/viewer/core/src/public/migration/Cognite3DViewer.ts#L928)

___

#### off

 **off**(`event`, `callback`): `void`

**`example`**
```js
viewer.off('click', onClick);
```

##### Parameters

| Name | Type |
| :------ | :------ |
| `event` | ``"click"`` \| ``"hover"`` |
| `callback` | [PointerEventDelegate](#pointereventdelegate) |

##### Returns

`void`

##### Defined in

[viewer/core/src/public/migration/Cognite3DViewer.ts:435](https://github.com/cognitedata/reveal/blob/d2769861/viewer/core/src/public/migration/Cognite3DViewer.ts#L435)

 **off**(`event`, `callback`): `void`

##### Parameters

| Name | Type |
| :------ | :------ |
| `event` | ``"cameraChange"`` |
| `callback` | [CameraChangeDelegate](#camerachangedelegate) |

##### Returns

`void`

##### Defined in

[viewer/core/src/public/migration/Cognite3DViewer.ts:436](https://github.com/cognitedata/reveal/blob/d2769861/viewer/core/src/public/migration/Cognite3DViewer.ts#L436)

 **off**(`event`, `callback`): `void`

##### Parameters

| Name | Type |
| :------ | :------ |
| `event` | ``"sceneRendered"`` |
| `callback` | [SceneRenderedDelegate](#scenerendereddelegate) |

##### Returns

`void`

##### Defined in

[viewer/core/src/public/migration/Cognite3DViewer.ts:437](https://github.com/cognitedata/reveal/blob/d2769861/viewer/core/src/public/migration/Cognite3DViewer.ts#L437)

 **off**(`event`, `callback`): `void`

##### Parameters

| Name | Type |
| :------ | :------ |
| `event` | ``"disposed"`` |
| `callback` | [DisposedDelegate](#disposeddelegate) |

##### Returns

`void`

##### Defined in

[viewer/core/src/public/migration/Cognite3DViewer.ts:438](https://github.com/cognitedata/reveal/blob/d2769861/viewer/core/src/public/migration/Cognite3DViewer.ts#L438)

___

#### on

 **on**(`event`, `callback`): `void`

Triggered when the viewer is disposed. Listeners should clean up any
resources held and remove the reference to the viewer.

##### Parameters

| Name | Type |
| :------ | :------ |
| `event` | ``"disposed"`` |
| `callback` | [DisposedDelegate](#disposeddelegate) |

##### Returns

`void`

##### Defined in

[viewer/core/src/public/migration/Cognite3DViewer.ts:368](https://github.com/cognitedata/reveal/blob/d2769861/viewer/core/src/public/migration/Cognite3DViewer.ts#L368)

 **on**(`event`, `callback`): `void`

**`example`**
```js
const onClick = (event) => { console.log(event.offsetX, event.offsetY) };
viewer.on('click', onClick);
```

##### Parameters

| Name | Type |
| :------ | :------ |
| `event` | ``"click"`` \| ``"hover"`` |
| `callback` | [PointerEventDelegate](#pointereventdelegate) |

##### Returns

`void`

##### Defined in

[viewer/core/src/public/migration/Cognite3DViewer.ts:377](https://github.com/cognitedata/reveal/blob/d2769861/viewer/core/src/public/migration/Cognite3DViewer.ts#L377)

 **on**(`event`, `callback`): `void`

**`example`**
```js
viewer.on('cameraChange', (position, target) => {
  console.log('Camera changed: ', position, target);
});
```

##### Parameters

| Name | Type |
| :------ | :------ |
| `event` | ``"cameraChange"`` |
| `callback` | [CameraChangeDelegate](#camerachangedelegate) |

##### Returns

`void`

##### Defined in

[viewer/core/src/public/migration/Cognite3DViewer.ts:386](https://github.com/cognitedata/reveal/blob/d2769861/viewer/core/src/public/migration/Cognite3DViewer.ts#L386)

 **on**(`event`, `callback`): `void`

Event that is triggered immediatly after the scene has been rendered.

##### Parameters

| Name | Type | Description |
| :------ | :------ | :------ |
| `event` | ``"sceneRendered"`` | Metadata about the rendering frame. |
| `callback` | [SceneRenderedDelegate](#scenerendereddelegate) | Callback to trigger when the event occurs. |

##### Returns

`void`

##### Defined in

[viewer/core/src/public/migration/Cognite3DViewer.ts:392](https://github.com/cognitedata/reveal/blob/d2769861/viewer/core/src/public/migration/Cognite3DViewer.ts#L392)

___

#### removeModel

 **removeModel**(`model`): `void`

Removes a model that was previously added using [Cognite3DViewer.addModel](#addmodel),
[Cognite3DViewer.addCadModel](#addcadmodel) or [Cognite3DViewer.addPointCloudModel](#addpointcloudmodel)
.

##### Parameters

| Name | Type |
| :------ | :------ |
| `model` | [CogniteModelBase](#interfaces_cognite_revealcognitemodelbasemd) |

##### Returns

`void`

##### Defined in

[viewer/core/src/public/migration/Cognite3DViewer.ts:611](https://github.com/cognitedata/reveal/blob/d2769861/viewer/core/src/public/migration/Cognite3DViewer.ts#L611)

___

#### removeObject3D

 **removeObject3D**(`object`): `void`

Remove a THREE.Object3D from the viewer.

**`example`**
```js
const sphere = new THREE.Mesh(new THREE.SphereBufferGeometry(), new THREE.MeshBasicMaterial());
viewer.addObject3D(sphere);
viewer.removeObject3D(sphere);
```

##### Parameters

| Name | Type |
| :------ | :------ |
| `object` | `Object3D`\<Event\> |

##### Returns

`void`

##### Defined in

[viewer/core/src/public/migration/Cognite3DViewer.ts:713](https://github.com/cognitedata/reveal/blob/d2769861/viewer/core/src/public/migration/Cognite3DViewer.ts#L713)

___

#### removeUiObject

 **removeUiObject**(`object`): `void`

Removes the UI object from the viewer.

##### Parameters

| Name | Type |
| :------ | :------ |
| `object` | `Object3D`\<Event\> |

##### Returns

`void`

##### Defined in

[viewer/core/src/public/migration/Cognite3DViewer.ts:741](https://github.com/cognitedata/reveal/blob/d2769861/viewer/core/src/public/migration/Cognite3DViewer.ts#L741)

___

#### requestRedraw

 **requestRedraw**(): `void`

Typically used when you perform some changes and can't see them unless you move camera.

##### Returns

`void`

##### Defined in

[viewer/core/src/public/migration/Cognite3DViewer.ts:987](https://github.com/cognitedata/reveal/blob/d2769861/viewer/core/src/public/migration/Cognite3DViewer.ts#L987)

___

#### setBackgroundColor

 **setBackgroundColor**(`color`): `void`

Sets the color used as the clear color of the renderer.

##### Parameters

| Name | Type |
| :------ | :------ |
| `color` | `Color` |

##### Returns

`void`

##### Defined in

[viewer/core/src/public/migration/Cognite3DViewer.ts:751](https://github.com/cognitedata/reveal/blob/d2769861/viewer/core/src/public/migration/Cognite3DViewer.ts#L751)

___

#### setCameraControlsOptions

 **setCameraControlsOptions**(`controlsOptions`): `void`

Sets camera control options. See [CameraControlsOptions](#cameracontrolsoptions).

##### Parameters

| Name | Type | Description |
| :------ | :------ | :------ |
| `controlsOptions` | [CameraControlsOptions](#cameracontrolsoptions) | JSON object with camera controls options. |

##### Returns

`void`

##### Defined in

[viewer/core/src/public/migration/Cognite3DViewer.ts:477](https://github.com/cognitedata/reveal/blob/d2769861/viewer/core/src/public/migration/Cognite3DViewer.ts#L477)

___

#### setCameraPosition

 **setCameraPosition**(`position`): `void`

**`obvious`**

**`example`**
```js
// store position, target
const position = viewer.getCameraPosition();
const target = viewer.getCameraTarget();
// restore position, target
viewer.setCameraPosition(position);
viewer.setCameraTarget(target);
```

##### Parameters

| Name | Type | Description |
| :------ | :------ | :------ |
| `position` | `Vector3` | Position in world space. |

##### Returns

`void`

##### Defined in

[viewer/core/src/public/migration/Cognite3DViewer.ts:863](https://github.com/cognitedata/reveal/blob/d2769861/viewer/core/src/public/migration/Cognite3DViewer.ts#L863)

___

#### setCameraTarget

 **setCameraTarget**(`target`, `animated?`): `void`

Set camera's target.

**`example`**
```js
// store position, target
const position = viewer.getCameraPosition();
const target = viewer.getCameraTarget();
// restore position, target
viewer.setCameraPosition(position);
viewer.setCameraTarget(target);
```

##### Parameters

| Name | Type | Default value | Description |
| :------ | :------ | :------ | :------ |
| `target` | `Vector3` | `undefined` | Target in world space. |
| `animated` | `boolean` | false | Whether change of target should be animated or not (default is false). |

##### Returns

`void`

##### Defined in

[viewer/core/src/public/migration/Cognite3DViewer.ts:885](https://github.com/cognitedata/reveal/blob/d2769861/viewer/core/src/public/migration/Cognite3DViewer.ts#L885)

___

#### setClippingPlanes

 **setClippingPlanes**(`clippingPlanes`): `void`

Sets per-pixel clipping planes. Pixels behind any of the planes will be sliced away.

**`example`**
```js
// Hide pixels with values less than 0 in the x direction
const plane = new THREE.Plane(new THREE.Vector3(1, 0, 0), 0);
viewer.setClippingPlanes([plane]);
```
```js
// Hide pixels with values greater than 20 in the x direction
 const plane = new THREE.Plane(new THREE.Vector3(-1, 0, 0), 20);
viewer.setClippingPlanes([plane]);
```
```js
// Hide pixels with values less than 0 in the x direction or greater than 0 in the y direction
const xPlane = new THREE.Plane(new THREE.Vector3(1, 0, 0), 0);
const yPlane = new THREE.Plane(new THREE.Vector3(0, -1, 0), 0);
viewer.setClippingPlanes([xPlane, yPlane]);
```
```js
// Hide pixels behind an arbitrary, non axis-aligned plane
 const plane = new THREE.Plane(new THREE.Vector3(1.5, 20, -19), 20);
viewer.setClippingPlanes([plane]);
```
```js
// Disable clipping planes
 viewer.setClippingPlanes([]);
```

##### Parameters

| Name | Type | Description |
| :------ | :------ | :------ |
| `clippingPlanes` | `Plane`[] | The planes to use for clipping. |

##### Returns

`void`

##### Defined in

[viewer/core/src/public/migration/Cognite3DViewer.ts:791](https://github.com/cognitedata/reveal/blob/d2769861/viewer/core/src/public/migration/Cognite3DViewer.ts#L791)

___

#### setLogLevel

 **setLogLevel**(`level`): `void`

Sets the log level. Used for debugging.
Defaults to 'none' (which is identical to 'silent').

##### Parameters

| Name | Type |
| :------ | :------ |
| `level` | ``"trace"`` \| ``"debug"`` \| ``"info"`` \| ``"warn"`` \| ``"error"`` \| ``"silent"`` \| ``"none"`` |

##### Returns

`void`

##### Defined in

[viewer/core/src/public/migration/Cognite3DViewer.ts:319](https://github.com/cognitedata/reveal/blob/d2769861/viewer/core/src/public/migration/Cognite3DViewer.ts#L319)

___

#### setSlicingPlanes

 **setSlicingPlanes**(`slicingPlanes`): `void`

**`deprecated`** Since version 2.1, will be removed in version 3.0. Use [setClippingPlanes](#setclippingplanes).

##### Parameters

| Name | Type |
| :------ | :------ |
| `slicingPlanes` | `Plane`[] |

##### Returns

`void`

##### Defined in

[viewer/core/src/public/migration/Cognite3DViewer.ts:800](https://github.com/cognitedata/reveal/blob/d2769861/viewer/core/src/public/migration/Cognite3DViewer.ts#L800)

___

#### setViewState

 **setViewState**(`state`): `Promise`\<void\>

Restores camera settings from the state provided, and clears all current styled
node collections and applies the `state` object.

##### Parameters

| Name | Type | Description |
| :------ | :------ | :------ |
| `state` | [ViewerState](#viewerstate) | Viewer state retrieved from [Cognite3DViewer.getViewState](#getviewstate). |

##### Returns

`Promise`\<void\>

##### Defined in

[viewer/core/src/public/migration/Cognite3DViewer.ts:502](https://github.com/cognitedata/reveal/blob/d2769861/viewer/core/src/public/migration/Cognite3DViewer.ts#L502)

___

#### worldToScreen

 **worldToScreen**(`point`, `normalize?`): `Vector2`

Convert a point in world space to its coordinates in the canvas. This can be used to place HTML objects near 3D objects on top of the 3D viewer.

**`see`** [https://www.w3schools.com/graphics/canvas_coordinates.asp](https://www.w3schools.com/graphics/canvas_coordinates.asp).

**`example`**
```js
const boundingBoxCenter = new THREE.Vector3();
// Find center of bounding box in world space
model.getBoundingBox(nodeId).getCenter(boundingBoxCenter);
// Screen coordinates of that point
const screenCoordinates = viewer.worldToScreen(boundingBoxCenter);
```
```js
const boundingBoxCenter = new THREE.Vector3();
// Find center of bounding box in world space
model.getBoundingBox(nodeId).getCenter(boundingBoxCenter);
// Screen coordinates of that point normalized in the range [0,1]
const screenCoordinates = viewer.worldToScreen(boundingBoxCenter, true);
```
```js
const boundingBoxCenter = new THREE.Vector3();
// Find center of bounding box in world space
model.getBoundingBox(nodeId).getCenter(boundingBoxCenter);
// Screen coordinates of that point
const screenCoordinates = viewer.worldToScreen(boundingBoxCenter);
if (screenCoordinates == null) {
  // Object not visible on screen
} else {
  // Object is visible on screen
}
```

##### Parameters

| Name | Type | Description |
| :------ | :------ | :------ |
| `point` | `Vector3` | World space coordinate. |
| `normalize?` | `boolean` | Optional. If true, coordinates are normalized into [0,1]. If false, the values are in the range [0, \<canvas_size>). |

##### Returns

`Vector2`

Returns 2D coordinates if the point is visible on screen, or `null` if object is outside screen.

##### Defined in

[viewer/core/src/public/migration/Cognite3DViewer.ts:1039](https://github.com/cognitedata/reveal/blob/d2769861/viewer/core/src/public/migration/Cognite3DViewer.ts#L1039)

___

#### isBrowserSupported

 `Static` **isBrowserSupported**(): ``true``

For now it just always returns true.

**`see`** Https://developer.mozilla.org/en-US/docs/Web/API/HTMLCanvasElement/getContext#Browser_compatibility.

##### Returns

``true``

##### Defined in

[viewer/core/src/public/migration/Cognite3DViewer.ts:76](https://github.com/cognitedata/reveal/blob/d2769861/viewer/core/src/public/migration/Cognite3DViewer.ts#L76)


<a name="classes_cognite_revealcognitepointcloudmodelmd"></a>

[@cognite/reveal](#readmemd) / [Modules](#modulesmd) / [@cognite/reveal](#modules_cognite_revealmd) / CognitePointCloudModel

## Class: CognitePointCloudModel

[@cognite/reveal](#modules_cognite_revealmd).CognitePointCloudModel

### Hierarchy

- `Object3D`

   **CognitePointCloudModel**

### Implements

- [CogniteModelBase](#interfaces_cognite_revealcognitemodelbasemd)

### Table of contents

#### Properties

- [modelId](#modelid)
- [revisionId](#revisionid)
- [type](#type)

#### Accessors

- [pointColorType](#pointcolortype)
- [pointShape](#pointshape)
- [pointSize](#pointsize)
- [visiblePointCount](#visiblepointcount)

#### Methods

- [dispose](#dispose)
- [getCameraConfiguration](#getcameraconfiguration)
- [getClasses](#getclasses)
- [getModelBoundingBox](#getmodelboundingbox)
- [getModelTransformation](#getmodeltransformation)
- [hasClass](#hasclass)
- [isClassVisible](#isclassvisible)
- [setClassVisible](#setclassvisible)
- [setModelTransformation](#setmodeltransformation)

### Properties

#### modelId

 `Readonly` **modelId**: `number`

##### Defined in

[viewer/core/src/public/migration/CognitePointCloudModel.ts:19](https://github.com/cognitedata/reveal/blob/d2769861/viewer/core/src/public/migration/CognitePointCloudModel.ts#L19)

___

#### revisionId

 `Readonly` **revisionId**: `number`

The modelId of the point cloud model in Cognite Data Fusion.

##### Defined in

[viewer/core/src/public/migration/CognitePointCloudModel.ts:23](https://github.com/cognitedata/reveal/blob/d2769861/viewer/core/src/public/migration/CognitePointCloudModel.ts#L23)

___

#### type

 `Readonly` **type**: [SupportedModelTypes](#supportedmodeltypes) = 'pointcloud'

##### Implementation of

[CogniteModelBase](#interfaces_cognite_revealcognitemodelbasemd).[type](#type)

##### Overrides

THREE.Object3D.type

##### Defined in

[viewer/core/src/public/migration/CognitePointCloudModel.ts:18](https://github.com/cognitedata/reveal/blob/d2769861/viewer/core/src/public/migration/CognitePointCloudModel.ts#L18)

### Accessors

#### pointColorType

 `get` **pointColorType**(): [PotreePointColorType](#enums_cognite_revealpotreepointcolortypemd)

Determines how points currently are colored.

##### Returns

[PotreePointColorType](#enums_cognite_revealpotreepointcolortypemd)

##### Defined in

[viewer/core/src/public/migration/CognitePointCloudModel.ts:146](https://github.com/cognitedata/reveal/blob/d2769861/viewer/core/src/public/migration/CognitePointCloudModel.ts#L146)

 `set` **pointColorType**(`type`): `void`

Specifies how points are colored.

**`default`** PotreePointColorType.Rgb

**`example`**
```js
model.pointColorType = PotreePointColorType.Rgb
```

##### Parameters

| Name | Type |
| :------ | :------ |
| `type` | [PotreePointColorType](#enums_cognite_revealpotreepointcolortypemd) |

##### Returns

`void`

##### Defined in

[viewer/core/src/public/migration/CognitePointCloudModel.ts:158](https://github.com/cognitedata/reveal/blob/d2769861/viewer/core/src/public/migration/CognitePointCloudModel.ts#L158)

___

#### pointShape

 `get` **pointShape**(): [PotreePointShape](#enums_cognite_revealpotreepointshapemd)

Sets the point shape of each rendered point in the point cloud.

**`default`** `PotreePointShape.Circle`

**`see`** [PotreePointShape](#enums_cognite_revealpotreepointshapemd).

##### Returns

[PotreePointShape](#enums_cognite_revealpotreepointshapemd)

##### Defined in

[viewer/core/src/public/migration/CognitePointCloudModel.ts:182](https://github.com/cognitedata/reveal/blob/d2769861/viewer/core/src/public/migration/CognitePointCloudModel.ts#L182)

 `set` **pointShape**(`shape`): `void`

Gets the point shape of each rendered point in the point cloud.

**`see`** [PotreePointShape](#enums_cognite_revealpotreepointshapemd).

##### Parameters

| Name | Type |
| :------ | :------ |
| `shape` | [PotreePointShape](#enums_cognite_revealpotreepointshapemd) |

##### Returns

`void`

##### Defined in

[viewer/core/src/public/migration/CognitePointCloudModel.ts:190](https://github.com/cognitedata/reveal/blob/d2769861/viewer/core/src/public/migration/CognitePointCloudModel.ts#L190)

___

#### pointSize

 `get` **pointSize**(): `number`

Returns the size of each rendered point in the point cloud.

##### Returns

`number`

##### Defined in

[viewer/core/src/public/migration/CognitePointCloudModel.ts:165](https://github.com/cognitedata/reveal/blob/d2769861/viewer/core/src/public/migration/CognitePointCloudModel.ts#L165)

 `set` **pointSize**(`size`): `void`

Sets the size of each rendered point in the point cloud.

**`default`** `1`

##### Parameters

| Name | Type |
| :------ | :------ |
| `size` | `number` |

##### Returns

`void`

##### Defined in

[viewer/core/src/public/migration/CognitePointCloudModel.ts:173](https://github.com/cognitedata/reveal/blob/d2769861/viewer/core/src/public/migration/CognitePointCloudModel.ts#L173)

___

#### visiblePointCount

 `get` **visiblePointCount**(): `number`

Returns the current number of visible/loaded points.

##### Returns

`number`

##### Defined in

[viewer/core/src/public/migration/CognitePointCloudModel.ts:139](https://github.com/cognitedata/reveal/blob/d2769861/viewer/core/src/public/migration/CognitePointCloudModel.ts#L139)

### Methods

#### dispose

 **dispose**(): `void`

Used to clean up memory.

##### Returns

`void`

##### Implementation of

[CogniteModelBase](#interfaces_cognite_revealcognitemodelbasemd).[dispose](#dispose)

##### Defined in

[viewer/core/src/public/migration/CognitePointCloudModel.ts:48](https://github.com/cognitedata/reveal/blob/d2769861/viewer/core/src/public/migration/CognitePointCloudModel.ts#L48)

___

#### getCameraConfiguration

 **getCameraConfiguration**(): [CameraConfiguration](#cameraconfiguration)

Retrieves the camera position and target stored for the model. Typically this
is used to store a good starting position for a model. Returns `undefined` if there
isn't any stored camera configuration for the model.

##### Returns

[CameraConfiguration](#cameraconfiguration)

##### Implementation of

[CogniteModelBase](#interfaces_cognite_revealcognitemodelbasemd).[getCameraConfiguration](#getcameraconfiguration)

##### Defined in

[viewer/core/src/public/migration/CognitePointCloudModel.ts:76](https://github.com/cognitedata/reveal/blob/d2769861/viewer/core/src/public/migration/CognitePointCloudModel.ts#L76)

___

#### getClasses

 **getClasses**(): `number`[]

Returns a list of sorted classification codes present in the model.

##### Returns

`number`[]

A sorted list of classification codes from the model.

##### Defined in

[viewer/core/src/public/migration/CognitePointCloudModel.ts:132](https://github.com/cognitedata/reveal/blob/d2769861/viewer/core/src/public/migration/CognitePointCloudModel.ts#L132)

___

#### getModelBoundingBox

 **getModelBoundingBox**(`outBbox?`): `Box3`

**`example`**
```js
const box = new THREE.Box3()
model.getModelBoundingBox(box);
// box now has the bounding box
```
```js
// the following code does the same
const box = model.getModelBoundingBox();
```

##### Parameters

| Name | Type | Description |
| :------ | :------ | :------ |
| `outBbox?` | `Box3` | Optional. Used to write result to. |

##### Returns

`Box3`

Model's bounding box.

##### Implementation of

[CogniteModelBase](#interfaces_cognite_revealcognitemodelbasemd).[getModelBoundingBox](#getmodelboundingbox)

##### Defined in

[viewer/core/src/public/migration/CognitePointCloudModel.ts:67](https://github.com/cognitedata/reveal/blob/d2769861/viewer/core/src/public/migration/CognitePointCloudModel.ts#L67)

___

#### getModelTransformation

 **getModelTransformation**(`out?`): `Matrix4`

Gets transformation matrix of the model.

##### Parameters

| Name | Type | Description |
| :------ | :------ | :------ |
| `out?` | `Matrix4` | Preallocated `THREE.Matrix4` (optional). |

##### Returns

`Matrix4`

##### Implementation of

[CogniteModelBase](#interfaces_cognite_revealcognitemodelbasemd).[getModelTransformation](#getmodeltransformation)

##### Defined in

[viewer/core/src/public/migration/CognitePointCloudModel.ts:92](https://github.com/cognitedata/reveal/blob/d2769861/viewer/core/src/public/migration/CognitePointCloudModel.ts#L92)

___

#### hasClass

 **hasClass**(`pointClass`): `boolean`

Returns true if the model has values with the given classification class.

##### Parameters

| Name | Type | Description |
| :------ | :------ | :------ |
| `pointClass` | `number` | ASPRS classification class code. Either one of the well known classes from [WellKnownAsprsPointClassCodes](#enums_cognite_revealwellknownasprspointclasscodesmd) or a number for user defined classes. |

##### Returns

`boolean`

True if model has values in the class given.

##### Defined in

[viewer/core/src/public/migration/CognitePointCloudModel.ts:124](https://github.com/cognitedata/reveal/blob/d2769861/viewer/core/src/public/migration/CognitePointCloudModel.ts#L124)

___

#### isClassVisible

 **isClassVisible**(`pointClass`): `boolean`

Determines if points from a given class are visible.

**`throws`** Error if the model doesn't have the class given.

##### Parameters

| Name | Type | Description |
| :------ | :------ | :------ |
| `pointClass` | `number` | ASPRS classification class code. Either one of the well known classes from [WellKnownAsprsPointClassCodes](#enums_cognite_revealwellknownasprspointclasscodesmd) or a number for user defined classes. |

##### Returns

`boolean`

True if points from the given class will be visible.

##### Defined in

[viewer/core/src/public/migration/CognitePointCloudModel.ts:114](https://github.com/cognitedata/reveal/blob/d2769861/viewer/core/src/public/migration/CognitePointCloudModel.ts#L114)

___

#### setClassVisible

 **setClassVisible**(`pointClass`, `visible`): `void`

Sets a visible filter on points of a given class.

**`throws`** Error if the model doesn't have the class given.

##### Parameters

| Name | Type | Description |
| :------ | :------ | :------ |
| `pointClass` | `number` | ASPRS classification class code. Either one of the well known classes from [WellKnownAsprsPointClassCodes](#enums_cognite_revealwellknownasprspointclasscodesmd) or a number for user defined classes. |
| `visible` | `boolean` | Boolean flag that determines if the point class type should be visible or not. |

##### Returns

`void`

##### Defined in

[viewer/core/src/public/migration/CognitePointCloudModel.ts:103](https://github.com/cognitedata/reveal/blob/d2769861/viewer/core/src/public/migration/CognitePointCloudModel.ts#L103)

___

#### setModelTransformation

 **setModelTransformation**(`transformationMatrix`): `void`

Sets transformation matrix of the model. This overrides the current transformation.

##### Parameters

| Name | Type |
| :------ | :------ |
| `transformationMatrix` | `Matrix4` |

##### Returns

`void`

##### Implementation of

[CogniteModelBase](#interfaces_cognite_revealcognitemodelbasemd).[setModelTransformation](#setmodeltransformation)

##### Defined in

[viewer/core/src/public/migration/CognitePointCloudModel.ts:84](https://github.com/cognitedata/reveal/blob/d2769861/viewer/core/src/public/migration/CognitePointCloudModel.ts#L84)


<a name="classes_cognite_revealindexsetmd"></a>

[@cognite/reveal](#readmemd) / [Modules](#modulesmd) / [@cognite/reveal](#modules_cognite_revealmd) / IndexSet

## Class: IndexSet

[@cognite/reveal](#modules_cognite_revealmd).IndexSet

### Table of contents

#### Constructors

- [constructor](#constructor)

#### Properties

- [rootNode](#rootnode)

#### Accessors

- [count](#count)

#### Methods

- [add](#add)
- [addRange](#addrange)
- [clear](#clear)
- [clone](#clone)
- [contains](#contains)
- [differenceWith](#differencewith)
- [forEachRange](#foreachrange)
- [hasIntersectionWith](#hasintersectionwith)
- [intersectWith](#intersectwith)
- [invertedRanges](#invertedranges)
- [remove](#remove)
- [removeRange](#removerange)
- [toIndexArray](#toindexarray)
- [toPlainSet](#toplainset)
- [toRangeArray](#torangearray)
- [unionWith](#unionwith)

### Constructors

#### constructor

 **new IndexSet**(`values?`)

##### Parameters

| Name | Type |
| :------ | :------ |
| `values?` | `Iterable`\<number\> |

##### Defined in

[viewer/packages/utilities/src/indexset/IndexSet.ts:11](https://github.com/cognitedata/reveal/blob/d2769861/viewer/packages/utilities/src/indexset/IndexSet.ts#L11)

 **new IndexSet**(`values?`)

##### Parameters

| Name | Type |
| :------ | :------ |
| `values?` | [NumericRange](#classes_cognite_revealnumericrangemd) |

##### Defined in

[viewer/packages/utilities/src/indexset/IndexSet.ts:13](https://github.com/cognitedata/reveal/blob/d2769861/viewer/packages/utilities/src/indexset/IndexSet.ts#L13)

### Properties

#### rootNode

 `Optional` **rootNode**: `IndexNode`

##### Defined in

[viewer/packages/utilities/src/indexset/IndexSet.ts:11](https://github.com/cognitedata/reveal/blob/d2769861/viewer/packages/utilities/src/indexset/IndexSet.ts#L11)

### Accessors

#### count

 `get` **count**(): `number`

##### Returns

`number`

##### Defined in

[viewer/packages/utilities/src/indexset/IndexSet.ts:68](https://github.com/cognitedata/reveal/blob/d2769861/viewer/packages/utilities/src/indexset/IndexSet.ts#L68)

### Methods

#### add

 **add**(`index`): `void`

##### Parameters

| Name | Type |
| :------ | :------ |
| `index` | `number` |

##### Returns

`void`

##### Defined in

[viewer/packages/utilities/src/indexset/IndexSet.ts:33](https://github.com/cognitedata/reveal/blob/d2769861/viewer/packages/utilities/src/indexset/IndexSet.ts#L33)

___

#### addRange

 **addRange**(`range`): `void`

##### Parameters

| Name | Type |
| :------ | :------ |
| `range` | [NumericRange](#classes_cognite_revealnumericrangemd) |

##### Returns

`void`

##### Defined in

[viewer/packages/utilities/src/indexset/IndexSet.ts:39](https://github.com/cognitedata/reveal/blob/d2769861/viewer/packages/utilities/src/indexset/IndexSet.ts#L39)

___

#### clear

 **clear**(): `void`

##### Returns

`void`

##### Defined in

[viewer/packages/utilities/src/indexset/IndexSet.ts:203](https://github.com/cognitedata/reveal/blob/d2769861/viewer/packages/utilities/src/indexset/IndexSet.ts#L203)

___

#### clone

 **clone**(): [IndexSet](#classes_cognite_revealindexsetmd)

##### Returns

[IndexSet](#classes_cognite_revealindexsetmd)

##### Defined in

[viewer/packages/utilities/src/indexset/IndexSet.ts:207](https://github.com/cognitedata/reveal/blob/d2769861/viewer/packages/utilities/src/indexset/IndexSet.ts#L207)

___

#### contains

 **contains**(`index`): `boolean`

##### Parameters

| Name | Type |
| :------ | :------ |
| `index` | `number` |

##### Returns

`boolean`

##### Defined in

[viewer/packages/utilities/src/indexset/IndexSet.ts:60](https://github.com/cognitedata/reveal/blob/d2769861/viewer/packages/utilities/src/indexset/IndexSet.ts#L60)

___

#### differenceWith

 **differenceWith**(`otherSet`): [IndexSet](#classes_cognite_revealindexsetmd)

##### Parameters

| Name | Type |
| :------ | :------ |
| `otherSet` | [IndexSet](#classes_cognite_revealindexsetmd) |

##### Returns

[IndexSet](#classes_cognite_revealindexsetmd)

##### Defined in

[viewer/packages/utilities/src/indexset/IndexSet.ts:135](https://github.com/cognitedata/reveal/blob/d2769861/viewer/packages/utilities/src/indexset/IndexSet.ts#L135)

___

#### forEachRange

 **forEachRange**(`visitor`): `void`

##### Parameters

| Name | Type |
| :------ | :------ |
| `visitor` | (`range`: [NumericRange](#classes_cognite_revealnumericrangemd)) => `void` |

##### Returns

`void`

##### Defined in

[viewer/packages/utilities/src/indexset/IndexSet.ts:27](https://github.com/cognitedata/reveal/blob/d2769861/viewer/packages/utilities/src/indexset/IndexSet.ts#L27)

___

#### hasIntersectionWith

 **hasIntersectionWith**(`otherSet`): `boolean`

##### Parameters

| Name | Type |
| :------ | :------ |
| `otherSet` | [IndexSet](#classes_cognite_revealindexsetmd) \| `Set`\<number\> |

##### Returns

`boolean`

##### Defined in

[viewer/packages/utilities/src/indexset/IndexSet.ts:145](https://github.com/cognitedata/reveal/blob/d2769861/viewer/packages/utilities/src/indexset/IndexSet.ts#L145)

___

#### intersectWith

 **intersectWith**(`otherSet`): [IndexSet](#classes_cognite_revealindexsetmd)

##### Parameters

| Name | Type |
| :------ | :------ |
| `otherSet` | [IndexSet](#classes_cognite_revealindexsetmd) |

##### Returns

[IndexSet](#classes_cognite_revealindexsetmd)

##### Defined in

[viewer/packages/utilities/src/indexset/IndexSet.ts:163](https://github.com/cognitedata/reveal/blob/d2769861/viewer/packages/utilities/src/indexset/IndexSet.ts#L163)

___

#### invertedRanges

 **invertedRanges**(): [NumericRange](#classes_cognite_revealnumericrangemd)[]

##### Returns

[NumericRange](#classes_cognite_revealnumericrangemd)[]

##### Defined in

[viewer/packages/utilities/src/indexset/IndexSet.ts:105](https://github.com/cognitedata/reveal/blob/d2769861/viewer/packages/utilities/src/indexset/IndexSet.ts#L105)

___

#### remove

 **remove**(`index`): `void`

##### Parameters

| Name | Type |
| :------ | :------ |
| `index` | `number` |

##### Returns

`void`

##### Defined in

[viewer/packages/utilities/src/indexset/IndexSet.ts:47](https://github.com/cognitedata/reveal/blob/d2769861/viewer/packages/utilities/src/indexset/IndexSet.ts#L47)

___

#### removeRange

 **removeRange**(`range`): `void`

##### Parameters

| Name | Type |
| :------ | :------ |
| `range` | [NumericRange](#classes_cognite_revealnumericrangemd) |

##### Returns

`void`

##### Defined in

[viewer/packages/utilities/src/indexset/IndexSet.ts:52](https://github.com/cognitedata/reveal/blob/d2769861/viewer/packages/utilities/src/indexset/IndexSet.ts#L52)

___

#### toIndexArray

 **toIndexArray**(): `number`[]

##### Returns

`number`[]

##### Defined in

[viewer/packages/utilities/src/indexset/IndexSet.ts:84](https://github.com/cognitedata/reveal/blob/d2769861/viewer/packages/utilities/src/indexset/IndexSet.ts#L84)

___

#### toPlainSet

 **toPlainSet**(): `Set`\<number\>

##### Returns

`Set`\<number\>

##### Defined in

[viewer/packages/utilities/src/indexset/IndexSet.ts:98](https://github.com/cognitedata/reveal/blob/d2769861/viewer/packages/utilities/src/indexset/IndexSet.ts#L98)

___

#### toRangeArray

 **toRangeArray**(): [NumericRange](#classes_cognite_revealnumericrangemd)[]

##### Returns

[NumericRange](#classes_cognite_revealnumericrangemd)[]

##### Defined in

[viewer/packages/utilities/src/indexset/IndexSet.ts:76](https://github.com/cognitedata/reveal/blob/d2769861/viewer/packages/utilities/src/indexset/IndexSet.ts#L76)

___

#### unionWith

 **unionWith**(`otherSet`): [IndexSet](#classes_cognite_revealindexsetmd)

##### Parameters

| Name | Type |
| :------ | :------ |
| `otherSet` | [IndexSet](#classes_cognite_revealindexsetmd) |

##### Returns

[IndexSet](#classes_cognite_revealindexsetmd)

##### Defined in

[viewer/packages/utilities/src/indexset/IndexSet.ts:123](https://github.com/cognitedata/reveal/blob/d2769861/viewer/packages/utilities/src/indexset/IndexSet.ts#L123)


<a name="classes_cognite_revealintersectionnodecollectionmd"></a>

[@cognite/reveal](#readmemd) / [Modules](#modulesmd) / [@cognite/reveal](#modules_cognite_revealmd) / IntersectionNodeCollection

## Class: IntersectionNodeCollection

[@cognite/reveal](#modules_cognite_revealmd).IntersectionNodeCollection

Node collection that is the intersection between a set of underlying node collections.

### Hierarchy

- `CombineNodeCollectionBase`

   **IntersectionNodeCollection**

### Table of contents

#### Constructors

- [constructor](#constructor)

#### Properties

- [classToken](#classtoken)

#### Accessors

- [classToken](#classtoken)
- [isLoading](#isloading)

#### Methods

- [add](#add)
- [clear](#clear)
- [getIndexSet](#getindexset)
- [off](#off)
- [on](#on)
- [remove](#remove)
- [serialize](#serialize)

### Constructors

#### constructor

 **new IntersectionNodeCollection**(`nodeCollections?`)

##### Parameters

| Name | Type |
| :------ | :------ |
| `nodeCollections?` | [NodeCollectionBase](#classes_cognite_revealnodecollectionbasemd)[] |

##### Overrides

CombineNodeCollectionBase.constructor

##### Defined in

[viewer/packages/cad-styling/src/IntersectionNodeCollection.ts:14](https://github.com/cognitedata/reveal/blob/d2769861/viewer/packages/cad-styling/src/IntersectionNodeCollection.ts#L14)

### Properties

#### classToken

 `Static` `Readonly` **classToken**: ``"IntersectionNodeCollection"``

##### Defined in

[viewer/packages/cad-styling/src/IntersectionNodeCollection.ts:14](https://github.com/cognitedata/reveal/blob/d2769861/viewer/packages/cad-styling/src/IntersectionNodeCollection.ts#L14)

### Accessors

#### classToken

 `get` **classToken**(): `string`

##### Returns

`string`

##### Defined in

[viewer/packages/cad-styling/src/NodeCollectionBase.ts:25](https://github.com/cognitedata/reveal/blob/d2769861/viewer/packages/cad-styling/src/NodeCollectionBase.ts#L25)

___

#### isLoading

 `get` **isLoading**(): `boolean`

**`override`**

##### Returns

`boolean`

##### Defined in

[viewer/packages/cad-styling/src/CombineNodeCollectionBase.ts:65](https://github.com/cognitedata/reveal/blob/d2769861/viewer/packages/cad-styling/src/CombineNodeCollectionBase.ts#L65)

### Methods

#### add

 **add**(`nodeCollection`): `void`

##### Parameters

| Name | Type |
| :------ | :------ |
| `nodeCollection` | [NodeCollectionBase](#classes_cognite_revealnodecollectionbasemd) |

##### Returns

`void`

##### Inherited from

CombineNodeCollectionBase.add

##### Defined in

[viewer/packages/cad-styling/src/CombineNodeCollectionBase.ts:24](https://github.com/cognitedata/reveal/blob/d2769861/viewer/packages/cad-styling/src/CombineNodeCollectionBase.ts#L24)

___

#### clear

 **clear**(): `void`

Clears all underlying node collections.

##### Returns

`void`

##### Inherited from

CombineNodeCollectionBase.clear

##### Defined in

[viewer/packages/cad-styling/src/CombineNodeCollectionBase.ts:44](https://github.com/cognitedata/reveal/blob/d2769861/viewer/packages/cad-styling/src/CombineNodeCollectionBase.ts#L44)

___

#### getIndexSet

 **getIndexSet**(): [IndexSet](#classes_cognite_revealindexsetmd)

**`override`**

##### Returns

[IndexSet](#classes_cognite_revealindexsetmd)

##### Inherited from

CombineNodeCollectionBase.getIndexSet

##### Defined in

[viewer/packages/cad-styling/src/CombineNodeCollectionBase.ts:57](https://github.com/cognitedata/reveal/blob/d2769861/viewer/packages/cad-styling/src/CombineNodeCollectionBase.ts#L57)

___

#### off

 **off**(`event`, `listener`): `void`

Unsubscribe a listener to events about the set changing, i.e.
when nodes are added or removed to the set.

##### Parameters

| Name | Type |
| :------ | :------ |
| `event` | ``"changed"`` |
| `listener` | () => `void` |

##### Returns

`void`

##### Inherited from

CombineNodeCollectionBase.off

##### Defined in

[viewer/packages/cad-styling/src/NodeCollectionBase.ts:42](https://github.com/cognitedata/reveal/blob/d2769861/viewer/packages/cad-styling/src/NodeCollectionBase.ts#L42)

___

#### on

 **on**(`event`, `listener`): `void`

Subscribe a listener to events about the set changing, i.e.
when nodes are added or removed to the set.

##### Parameters

| Name | Type |
| :------ | :------ |
| `event` | ``"changed"`` |
| `listener` | () => `void` |

##### Returns

`void`

##### Inherited from

CombineNodeCollectionBase.on

##### Defined in

[viewer/packages/cad-styling/src/NodeCollectionBase.ts:33](https://github.com/cognitedata/reveal/blob/d2769861/viewer/packages/cad-styling/src/NodeCollectionBase.ts#L33)

___

#### remove

 **remove**(`nodeCollection`): `void`

##### Parameters

| Name | Type |
| :------ | :------ |
| `nodeCollection` | [NodeCollectionBase](#classes_cognite_revealnodecollectionbasemd) |

##### Returns

`void`

##### Inherited from

CombineNodeCollectionBase.remove

##### Defined in

[viewer/packages/cad-styling/src/CombineNodeCollectionBase.ts:30](https://github.com/cognitedata/reveal/blob/d2769861/viewer/packages/cad-styling/src/CombineNodeCollectionBase.ts#L30)

___

#### serialize

 **serialize**(): [SerializedNodeCollection](#serializednodecollection)

##### Returns

[SerializedNodeCollection](#serializednodecollection)

##### Overrides

CombineNodeCollectionBase.serialize

##### Defined in

[viewer/packages/cad-styling/src/IntersectionNodeCollection.ts:20](https://github.com/cognitedata/reveal/blob/d2769861/viewer/packages/cad-styling/src/IntersectionNodeCollection.ts#L20)


<a name="classes_cognite_revealinvertednodecollectionmd"></a>

[@cognite/reveal](#readmemd) / [Modules](#modulesmd) / [@cognite/reveal](#modules_cognite_revealmd) / InvertedNodeCollection

## Class: InvertedNodeCollection

[@cognite/reveal](#modules_cognite_revealmd).InvertedNodeCollection

Node collection that inverts the result from another node collection.

### Hierarchy

- [NodeCollectionBase](#classes_cognite_revealnodecollectionbasemd)

   **InvertedNodeCollection**

### Table of contents

#### Constructors

- [constructor](#constructor)

#### Properties

- [classToken](#classtoken)

#### Accessors

- [classToken](#classtoken)
- [isLoading](#isloading)

#### Methods

- [clear](#clear)
- [getIndexSet](#getindexset)
- [off](#off)
- [on](#on)
- [serialize](#serialize)

### Constructors

#### constructor

 **new InvertedNodeCollection**(`model`, `innerSet`)

##### Parameters

| Name | Type |
| :------ | :------ |
| `model` | [Cognite3DModel](#classes_cognite_revealcognite3dmodelmd) |
| `innerSet` | [NodeCollectionBase](#classes_cognite_revealnodecollectionbasemd) |

##### Overrides

NodeCollectionBase.constructor

##### Defined in

[viewer/core/src/datamodels/cad/styling/InvertedNodeCollection.ts:17](https://github.com/cognitedata/reveal/blob/d2769861/viewer/core/src/datamodels/cad/styling/InvertedNodeCollection.ts#L17)

### Properties

#### classToken

 `Static` `Readonly` **classToken**: ``"InvertedNodeCollection"``

##### Defined in

[viewer/core/src/datamodels/cad/styling/InvertedNodeCollection.ts:13](https://github.com/cognitedata/reveal/blob/d2769861/viewer/core/src/datamodels/cad/styling/InvertedNodeCollection.ts#L13)

### Accessors

#### classToken

 `get` **classToken**(): `string`

##### Returns

`string`

##### Defined in

[viewer/packages/cad-styling/src/NodeCollectionBase.ts:25](https://github.com/cognitedata/reveal/blob/d2769861/viewer/packages/cad-styling/src/NodeCollectionBase.ts#L25)

___

#### isLoading

 `get` **isLoading**(): `boolean`

Returns true when the set currently is running an operation
for loading the full set of nodes contained by the set.

##### Returns

`boolean`

##### Defined in

[viewer/core/src/datamodels/cad/styling/InvertedNodeCollection.ts:30](https://github.com/cognitedata/reveal/blob/d2769861/viewer/core/src/datamodels/cad/styling/InvertedNodeCollection.ts#L30)

### Methods

#### clear

 **clear**(): `never`

Not supported.

**`throws`** Always throws an error.

##### Returns

`never`

##### Overrides

[NodeCollectionBase](#classes_cognite_revealnodecollectionbasemd).[clear](#clear)

##### Defined in

[viewer/core/src/datamodels/cad/styling/InvertedNodeCollection.ts:52](https://github.com/cognitedata/reveal/blob/d2769861/viewer/core/src/datamodels/cad/styling/InvertedNodeCollection.ts#L52)

___

#### getIndexSet

 **getIndexSet**(): [IndexSet](#classes_cognite_revealindexsetmd)

##### Returns

[IndexSet](#classes_cognite_revealindexsetmd)

##### Overrides

[NodeCollectionBase](#classes_cognite_revealnodecollectionbasemd).[getIndexSet](#getindexset)

##### Defined in

[viewer/core/src/datamodels/cad/styling/InvertedNodeCollection.ts:34](https://github.com/cognitedata/reveal/blob/d2769861/viewer/core/src/datamodels/cad/styling/InvertedNodeCollection.ts#L34)

___

#### off

 **off**(`event`, `listener`): `void`

Unsubscribe a listener to events about the set changing, i.e.
when nodes are added or removed to the set.

##### Parameters

| Name | Type |
| :------ | :------ |
| `event` | ``"changed"`` |
| `listener` | () => `void` |

##### Returns

`void`

##### Inherited from

[NodeCollectionBase](#classes_cognite_revealnodecollectionbasemd).[off](#off)

##### Defined in

[viewer/packages/cad-styling/src/NodeCollectionBase.ts:42](https://github.com/cognitedata/reveal/blob/d2769861/viewer/packages/cad-styling/src/NodeCollectionBase.ts#L42)

___

#### on

 **on**(`event`, `listener`): `void`

Subscribe a listener to events about the set changing, i.e.
when nodes are added or removed to the set.

##### Parameters

| Name | Type |
| :------ | :------ |
| `event` | ``"changed"`` |
| `listener` | () => `void` |

##### Returns

`void`

##### Inherited from

[NodeCollectionBase](#classes_cognite_revealnodecollectionbasemd).[on](#on)

##### Defined in

[viewer/packages/cad-styling/src/NodeCollectionBase.ts:33](https://github.com/cognitedata/reveal/blob/d2769861/viewer/packages/cad-styling/src/NodeCollectionBase.ts#L33)

___

#### serialize

 **serialize**(): [SerializedNodeCollection](#serializednodecollection)

##### Returns

[SerializedNodeCollection](#serializednodecollection)

##### Overrides

[NodeCollectionBase](#classes_cognite_revealnodecollectionbasemd).[serialize](#serialize)

##### Defined in

[viewer/core/src/datamodels/cad/styling/InvertedNodeCollection.ts:45](https://github.com/cognitedata/reveal/blob/d2769861/viewer/core/src/datamodels/cad/styling/InvertedNodeCollection.ts#L45)


<a name="classes_cognite_revealnodeappearanceprovidermd"></a>

[@cognite/reveal](#readmemd) / [Modules](#modulesmd) / [@cognite/reveal](#modules_cognite_revealmd) / NodeAppearanceProvider

## Class: NodeAppearanceProvider

[@cognite/reveal](#modules_cognite_revealmd).NodeAppearanceProvider

### Table of contents

#### Constructors

- [constructor](#constructor)

#### Accessors

- [isLoading](#isloading)

#### Methods

- [applyStyles](#applystyles)
- [assignStyledNodeCollection](#assignstylednodecollection)
- [clear](#clear)
- [off](#off)
- [on](#on)
- [unassignStyledNodeCollection](#unassignstylednodecollection)

### Constructors

#### constructor

 **new NodeAppearanceProvider**()

### Accessors

#### isLoading

 `get` **isLoading**(): `boolean`

##### Returns

`boolean`

##### Defined in

[viewer/packages/cad-styling/src/NodeAppearanceProvider.ts:113](https://github.com/cognitedata/reveal/blob/d2769861/viewer/packages/cad-styling/src/NodeAppearanceProvider.ts#L113)

### Methods

#### applyStyles

 **applyStyles**(`applyCb`): `void`

##### Parameters

| Name | Type |
| :------ | :------ |
| `applyCb` | `ApplyStyleDelegate` |

##### Returns

`void`

##### Defined in

[viewer/packages/cad-styling/src/NodeAppearanceProvider.ts:97](https://github.com/cognitedata/reveal/blob/d2769861/viewer/packages/cad-styling/src/NodeAppearanceProvider.ts#L97)

___

#### assignStyledNodeCollection

 **assignStyledNodeCollection**(`nodeCollection`, `appearance`): `void`

##### Parameters

| Name | Type |
| :------ | :------ |
| `nodeCollection` | [NodeCollectionBase](#classes_cognite_revealnodecollectionbasemd) |
| `appearance` | [NodeAppearance](#nodeappearance) |

##### Returns

`void`

##### Defined in

[viewer/packages/cad-styling/src/NodeAppearanceProvider.ts:65](https://github.com/cognitedata/reveal/blob/d2769861/viewer/packages/cad-styling/src/NodeAppearanceProvider.ts#L65)

___

#### clear

 **clear**(): `void`

##### Returns

`void`

##### Defined in

[viewer/packages/cad-styling/src/NodeAppearanceProvider.ts:104](https://github.com/cognitedata/reveal/blob/d2769861/viewer/packages/cad-styling/src/NodeAppearanceProvider.ts#L104)

___

#### off

 **off**(`event`, `listener`): `void`

##### Parameters

| Name | Type |
| :------ | :------ |
| `event` | ``"changed"`` |
| `listener` | () => `void` |

##### Returns

`void`

##### Defined in

[viewer/packages/cad-styling/src/NodeAppearanceProvider.ts:49](https://github.com/cognitedata/reveal/blob/d2769861/viewer/packages/cad-styling/src/NodeAppearanceProvider.ts#L49)

 **off**(`event`, `listener`): `void`

##### Parameters

| Name | Type |
| :------ | :------ |
| `event` | ``"loadingStateChanged"`` |
| `listener` | (`isLoading`: `boolean`) => `void` |

##### Returns

`void`

##### Defined in

[viewer/packages/cad-styling/src/NodeAppearanceProvider.ts:50](https://github.com/cognitedata/reveal/blob/d2769861/viewer/packages/cad-styling/src/NodeAppearanceProvider.ts#L50)

___

#### on

 **on**(`event`, `listener`): `void`

##### Parameters

| Name | Type |
| :------ | :------ |
| `event` | ``"changed"`` |
| `listener` | () => `void` |

##### Returns

`void`

##### Defined in

[viewer/packages/cad-styling/src/NodeAppearanceProvider.ts:33](https://github.com/cognitedata/reveal/blob/d2769861/viewer/packages/cad-styling/src/NodeAppearanceProvider.ts#L33)

 **on**(`event`, `listener`): `void`

##### Parameters

| Name | Type |
| :------ | :------ |
| `event` | ``"loadingStateChanged"`` |
| `listener` | (`isLoading`: `boolean`) => `void` |

##### Returns

`void`

##### Defined in

[viewer/packages/cad-styling/src/NodeAppearanceProvider.ts:34](https://github.com/cognitedata/reveal/blob/d2769861/viewer/packages/cad-styling/src/NodeAppearanceProvider.ts#L34)

___

#### unassignStyledNodeCollection

 **unassignStyledNodeCollection**(`nodeCollection`): `void`

##### Parameters

| Name | Type |
| :------ | :------ |
| `nodeCollection` | [NodeCollectionBase](#classes_cognite_revealnodecollectionbasemd) |

##### Returns

`void`

##### Defined in

[viewer/packages/cad-styling/src/NodeAppearanceProvider.ts:85](https://github.com/cognitedata/reveal/blob/d2769861/viewer/packages/cad-styling/src/NodeAppearanceProvider.ts#L85)


<a name="classes_cognite_revealnodecollectionbasemd"></a>

[@cognite/reveal](#readmemd) / [Modules](#modulesmd) / [@cognite/reveal](#modules_cognite_revealmd) / NodeCollectionBase

## Class: NodeCollectionBase

[@cognite/reveal](#modules_cognite_revealmd).NodeCollectionBase

Abstract class for implementing a set of nodes to be styled.

### Hierarchy

- **NodeCollectionBase**

   [TreeIndexNodeCollection](#classes_cognite_revealtreeindexnodecollectionmd)

   [PropertyFilterNodeCollection](#classes_cognite_revealpropertyfilternodecollectionmd)

   [SinglePropertyFilterNodeCollection](#classes_cognite_revealsinglepropertyfilternodecollectionmd)

   [AssetNodeCollection](#classes_cognite_revealassetnodecollectionmd)

   [InvertedNodeCollection](#classes_cognite_revealinvertednodecollectionmd)

### Table of contents

#### Accessors

- [classToken](#classtoken)
- [isLoading](#isloading)

#### Methods

- [clear](#clear)
- [getIndexSet](#getindexset)
- [off](#off)
- [on](#on)
- [serialize](#serialize)

### Accessors

#### classToken

 `get` **classToken**(): `string`

##### Returns

`string`

##### Defined in

[viewer/packages/cad-styling/src/NodeCollectionBase.ts:25](https://github.com/cognitedata/reveal/blob/d2769861/viewer/packages/cad-styling/src/NodeCollectionBase.ts#L25)

___

#### isLoading

 `Abstract` `get` **isLoading**(): `boolean`

Returns true when the set currently is running an operation
for loading the full set of nodes contained by the set.

##### Returns

`boolean`

##### Defined in

[viewer/packages/cad-styling/src/NodeCollectionBase.ts:51](https://github.com/cognitedata/reveal/blob/d2769861/viewer/packages/cad-styling/src/NodeCollectionBase.ts#L51)

### Methods

#### clear

 `Abstract` **clear**(): `void`

Clears the set, making it empty.

##### Returns

`void`

##### Defined in

[viewer/packages/cad-styling/src/NodeCollectionBase.ts:61](https://github.com/cognitedata/reveal/blob/d2769861/viewer/packages/cad-styling/src/NodeCollectionBase.ts#L61)

___

#### getIndexSet

 `Abstract` **getIndexSet**(): [IndexSet](#classes_cognite_revealindexsetmd)

Returns the [IndexSet](#classes_cognite_revealindexsetmd) that holds the tree indices
of the nodes contained by the set.

##### Returns

[IndexSet](#classes_cognite_revealindexsetmd)

##### Defined in

[viewer/packages/cad-styling/src/NodeCollectionBase.ts:56](https://github.com/cognitedata/reveal/blob/d2769861/viewer/packages/cad-styling/src/NodeCollectionBase.ts#L56)

___

#### off

 **off**(`event`, `listener`): `void`

Unsubscribe a listener to events about the set changing, i.e.
when nodes are added or removed to the set.

##### Parameters

| Name | Type |
| :------ | :------ |
| `event` | ``"changed"`` |
| `listener` | () => `void` |

##### Returns

`void`

##### Defined in

[viewer/packages/cad-styling/src/NodeCollectionBase.ts:42](https://github.com/cognitedata/reveal/blob/d2769861/viewer/packages/cad-styling/src/NodeCollectionBase.ts#L42)

___

#### on

 **on**(`event`, `listener`): `void`

Subscribe a listener to events about the set changing, i.e.
when nodes are added or removed to the set.

##### Parameters

| Name | Type |
| :------ | :------ |
| `event` | ``"changed"`` |
| `listener` | () => `void` |

##### Returns

`void`

##### Defined in

[viewer/packages/cad-styling/src/NodeCollectionBase.ts:33](https://github.com/cognitedata/reveal/blob/d2769861/viewer/packages/cad-styling/src/NodeCollectionBase.ts#L33)

___

#### serialize

 `Abstract` **serialize**(): [SerializedNodeCollection](#serializednodecollection)

##### Returns

[SerializedNodeCollection](#serializednodecollection)

##### Defined in

[viewer/packages/cad-styling/src/NodeCollectionBase.ts:70](https://github.com/cognitedata/reveal/blob/d2769861/viewer/packages/cad-styling/src/NodeCollectionBase.ts#L70)


<a name="classes_cognite_revealnotsupportedinmigrationwrappererrormd"></a>

[@cognite/reveal](#readmemd) / [Modules](#modulesmd) / [@cognite/reveal](#modules_cognite_revealmd) / NotSupportedInMigrationWrapperError

## Class: NotSupportedInMigrationWrapperError

[@cognite/reveal](#modules_cognite_revealmd).NotSupportedInMigrationWrapperError

### Hierarchy

- `Error`

   **NotSupportedInMigrationWrapperError**

### Table of contents

#### Constructors

- [constructor](#constructor)

#### Properties

- [message](#message)
- [name](#name)
- [stack](#stack)

### Constructors

#### constructor

 **new NotSupportedInMigrationWrapperError**(`message?`)

##### Parameters

| Name | Type |
| :------ | :------ |
| `message?` | `string` |

##### Overrides

Error.constructor

##### Defined in

[viewer/core/src/public/migration/NotSupportedInMigrationWrapperError.ts:10](https://github.com/cognitedata/reveal/blob/d2769861/viewer/core/src/public/migration/NotSupportedInMigrationWrapperError.ts#L10)

### Properties

#### message

 **message**: `string`

##### Inherited from

Error.message

##### Defined in

documentation/node_modules/typescript/lib/lib.es5.d.ts:974

___

#### name

 **name**: `string`

##### Inherited from

Error.name

##### Defined in

documentation/node_modules/typescript/lib/lib.es5.d.ts:973

___

#### stack

 `Optional` **stack**: `string`

##### Inherited from

Error.stack

##### Defined in

documentation/node_modules/typescript/lib/lib.es5.d.ts:975


<a name="classes_cognite_revealnumericrangemd"></a>

[@cognite/reveal](#readmemd) / [Modules](#modulesmd) / [@cognite/reveal](#modules_cognite_revealmd) / NumericRange

## Class: NumericRange

[@cognite/reveal](#modules_cognite_revealmd).NumericRange

### Table of contents

#### Constructors

- [constructor](#constructor)

#### Properties

- [count](#count)
- [from](#from)
- [toInclusive](#toinclusive)

#### Methods

- [contains](#contains)
- [equal](#equal)
- [forEach](#foreach)
- [intersectionWith](#intersectionwith)
- [intersects](#intersects)
- [intersectsOrCoinciding](#intersectsorcoinciding)
- [isInside](#isinside)
- [toArray](#toarray)
- [toString](#tostring)
- [union](#union)
- [values](#values)
- [createFromInterval](#createfrominterval)
- [isNumericRange](#isnumericrange)

### Constructors

#### constructor

 **new NumericRange**(`from`, `count`)

##### Parameters

| Name | Type |
| :------ | :------ |
| `from` | `number` |
| `count` | `number` |

##### Defined in

[viewer/packages/utilities/src/NumericRange.ts:8](https://github.com/cognitedata/reveal/blob/d2769861/viewer/packages/utilities/src/NumericRange.ts#L8)

### Properties

#### count

 `Readonly` **count**: `number`

##### Defined in

[viewer/packages/utilities/src/NumericRange.ts:7](https://github.com/cognitedata/reveal/blob/d2769861/viewer/packages/utilities/src/NumericRange.ts#L7)

___

#### from

 `Readonly` **from**: `number`

##### Defined in

[viewer/packages/utilities/src/NumericRange.ts:6](https://github.com/cognitedata/reveal/blob/d2769861/viewer/packages/utilities/src/NumericRange.ts#L6)

___

#### toInclusive

 `Readonly` **toInclusive**: `number`

##### Defined in

[viewer/packages/utilities/src/NumericRange.ts:8](https://github.com/cognitedata/reveal/blob/d2769861/viewer/packages/utilities/src/NumericRange.ts#L8)

### Methods

#### contains

 **contains**(`value`): `boolean`

##### Parameters

| Name | Type |
| :------ | :------ |
| `value` | `number` |

##### Returns

`boolean`

##### Defined in

[viewer/packages/utilities/src/NumericRange.ts:38](https://github.com/cognitedata/reveal/blob/d2769861/viewer/packages/utilities/src/NumericRange.ts#L38)

___

#### equal

 **equal**(`other`): `boolean`

##### Parameters

| Name | Type |
| :------ | :------ |
| `other` | [NumericRange](#classes_cognite_revealnumericrangemd) |

##### Returns

`boolean`

##### Defined in

[viewer/packages/utilities/src/NumericRange.ts:34](https://github.com/cognitedata/reveal/blob/d2769861/viewer/packages/utilities/src/NumericRange.ts#L34)

___

#### forEach

 **forEach**(`action`): `void`

##### Parameters

| Name | Type |
| :------ | :------ |
| `action` | (`value`: `number`) => `void` |

##### Returns

`void`

##### Defined in

[viewer/packages/utilities/src/NumericRange.ts:72](https://github.com/cognitedata/reveal/blob/d2769861/viewer/packages/utilities/src/NumericRange.ts#L72)

___

#### intersectionWith

 **intersectionWith**(`range`): [NumericRange](#classes_cognite_revealnumericrangemd)

##### Parameters

| Name | Type |
| :------ | :------ |
| `range` | [NumericRange](#classes_cognite_revealnumericrangemd) |

##### Returns

[NumericRange](#classes_cognite_revealnumericrangemd)

##### Defined in

[viewer/packages/utilities/src/NumericRange.ts:50](https://github.com/cognitedata/reveal/blob/d2769861/viewer/packages/utilities/src/NumericRange.ts#L50)

___

#### intersects

 **intersects**(`range`): `boolean`

##### Parameters

| Name | Type |
| :------ | :------ |
| `range` | [NumericRange](#classes_cognite_revealnumericrangemd) |

##### Returns

`boolean`

##### Defined in

[viewer/packages/utilities/src/NumericRange.ts:42](https://github.com/cognitedata/reveal/blob/d2769861/viewer/packages/utilities/src/NumericRange.ts#L42)

___

#### intersectsOrCoinciding

 **intersectsOrCoinciding**(`range`): `boolean`

##### Parameters

| Name | Type |
| :------ | :------ |
| `range` | [NumericRange](#classes_cognite_revealnumericrangemd) |

##### Returns

`boolean`

##### Defined in

[viewer/packages/utilities/src/NumericRange.ts:46](https://github.com/cognitedata/reveal/blob/d2769861/viewer/packages/utilities/src/NumericRange.ts#L46)

___

#### isInside

 **isInside**(`range`): `boolean`

##### Parameters

| Name | Type |
| :------ | :------ |
| `range` | [NumericRange](#classes_cognite_revealnumericrangemd) |

##### Returns

`boolean`

##### Defined in

[viewer/packages/utilities/src/NumericRange.ts:61](https://github.com/cognitedata/reveal/blob/d2769861/viewer/packages/utilities/src/NumericRange.ts#L61)

___

#### toArray

 **toArray**(): `number`[]

##### Returns

`number`[]

##### Defined in

[viewer/packages/utilities/src/NumericRange.ts:30](https://github.com/cognitedata/reveal/blob/d2769861/viewer/packages/utilities/src/NumericRange.ts#L30)

___

#### toString

 **toString**(): `string`

##### Returns

`string`

##### Defined in

[viewer/packages/utilities/src/NumericRange.ts:78](https://github.com/cognitedata/reveal/blob/d2769861/viewer/packages/utilities/src/NumericRange.ts#L78)

___

#### union

 **union**(`range`): [NumericRange](#classes_cognite_revealnumericrangemd)

##### Parameters

| Name | Type |
| :------ | :------ |
| `range` | [NumericRange](#classes_cognite_revealnumericrangemd) |

##### Returns

[NumericRange](#classes_cognite_revealnumericrangemd)

##### Defined in

[viewer/packages/utilities/src/NumericRange.ts:65](https://github.com/cognitedata/reveal/blob/d2769861/viewer/packages/utilities/src/NumericRange.ts#L65)

___

#### values

 **values**(): `Generator`\<number, any, unknown\>

##### Returns

`Generator`\<number, any, unknown\>

##### Defined in

[viewer/packages/utilities/src/NumericRange.ts:24](https://github.com/cognitedata/reveal/blob/d2769861/viewer/packages/utilities/src/NumericRange.ts#L24)

___

#### createFromInterval

 `Static` **createFromInterval**(`from`, `toInclusive`): [NumericRange](#classes_cognite_revealnumericrangemd)

##### Parameters

| Name | Type |
| :------ | :------ |
| `from` | `number` |
| `toInclusive` | `number` |

##### Returns

[NumericRange](#classes_cognite_revealnumericrangemd)

##### Defined in

[viewer/packages/utilities/src/NumericRange.ts:20](https://github.com/cognitedata/reveal/blob/d2769861/viewer/packages/utilities/src/NumericRange.ts#L20)

___

#### isNumericRange

 `Static` **isNumericRange**(`value`): value is NumericRange

##### Parameters

| Name | Type |
| :------ | :------ |
| `value` | `any` |

##### Returns

value is NumericRange

##### Defined in

[viewer/packages/utilities/src/NumericRange.ts:82](https://github.com/cognitedata/reveal/blob/d2769861/viewer/packages/utilities/src/NumericRange.ts#L82)


<a name="classes_cognite_revealpropertyfilternodecollectionmd"></a>

[@cognite/reveal](#readmemd) / [Modules](#modulesmd) / [@cognite/reveal](#modules_cognite_revealmd) / PropertyFilterNodeCollection

## Class: PropertyFilterNodeCollection

[@cognite/reveal](#modules_cognite_revealmd).PropertyFilterNodeCollection

Represents a set of nodes that has matching node properties to a provided filter. Note that
a node is considered to match if it or a [NodeCollectionBase](#classes_cognite_revealnodecollectionbasemd) ancestors match the filter.

### Hierarchy

- [NodeCollectionBase](#classes_cognite_revealnodecollectionbasemd)

   **PropertyFilterNodeCollection**

### Table of contents

#### Constructors

- [constructor](#constructor)

#### Properties

- [classToken](#classtoken)

#### Accessors

- [classToken](#classtoken)
- [isLoading](#isloading)

#### Methods

- [clear](#clear)
- [executeFilter](#executefilter)
- [getIndexSet](#getindexset)
- [off](#off)
- [on](#on)
- [serialize](#serialize)

### Constructors

#### constructor

 **new PropertyFilterNodeCollection**(`client`, `model`, `options?`)

##### Parameters

| Name | Type |
| :------ | :------ |
| `client` | `default` |
| `model` | [Cognite3DModel](#classes_cognite_revealcognite3dmodelmd) |
| `options` | `PropertyFilterNodeCollectionOptions` |

##### Overrides

NodeCollectionBase.constructor

##### Defined in

[viewer/core/src/datamodels/cad/styling/PropertyFilterNodeCollection.ts:45](https://github.com/cognitedata/reveal/blob/d2769861/viewer/core/src/datamodels/cad/styling/PropertyFilterNodeCollection.ts#L45)

### Properties

#### classToken

 `Static` `Readonly` **classToken**: ``"PropertyFilterNodeCollection"``

##### Defined in

[viewer/core/src/datamodels/cad/styling/PropertyFilterNodeCollection.ts:33](https://github.com/cognitedata/reveal/blob/d2769861/viewer/core/src/datamodels/cad/styling/PropertyFilterNodeCollection.ts#L33)

### Accessors

#### classToken

 `get` **classToken**(): `string`

##### Returns

`string`

##### Defined in

[viewer/packages/cad-styling/src/NodeCollectionBase.ts:25](https://github.com/cognitedata/reveal/blob/d2769861/viewer/packages/cad-styling/src/NodeCollectionBase.ts#L25)

___

#### isLoading

 `get` **isLoading**(): `boolean`

Returns true when the set currently is running an operation
for loading the full set of nodes contained by the set.

##### Returns

`boolean`

##### Defined in

[viewer/core/src/datamodels/cad/styling/PropertyFilterNodeCollection.ts:55](https://github.com/cognitedata/reveal/blob/d2769861/viewer/core/src/datamodels/cad/styling/PropertyFilterNodeCollection.ts#L55)

### Methods

#### clear

 **clear**(): `void`

Clears the node collection and interrupts any ongoing operations.

##### Returns

`void`

##### Overrides

[NodeCollectionBase](#classes_cognite_revealnodecollectionbasemd).[clear](#clear)

##### Defined in

[viewer/core/src/datamodels/cad/styling/PropertyFilterNodeCollection.ts:107](https://github.com/cognitedata/reveal/blob/d2769861/viewer/core/src/datamodels/cad/styling/PropertyFilterNodeCollection.ts#L107)

___

#### executeFilter

 **executeFilter**(`filter`): `Promise`\<void\>

Populates the node collection with nodes matching the provided filter. This will replace
the current nodes held by the filter.

**`example`**
```
set.executeFilter({ 'PDMS': { 'Module': 'AQ550' }});
```

##### Parameters

| Name | Type | Description |
| :------ | :------ | :------ |
| `filter` | `Object` | A filter for matching node properties. |

##### Returns

`Promise`\<void\>

##### Defined in

[viewer/core/src/datamodels/cad/styling/PropertyFilterNodeCollection.ts:68](https://github.com/cognitedata/reveal/blob/d2769861/viewer/core/src/datamodels/cad/styling/PropertyFilterNodeCollection.ts#L68)

___

#### getIndexSet

 **getIndexSet**(): [IndexSet](#classes_cognite_revealindexsetmd)

##### Returns

[IndexSet](#classes_cognite_revealindexsetmd)

##### Overrides

[NodeCollectionBase](#classes_cognite_revealnodecollectionbasemd).[getIndexSet](#getindexset)

##### Defined in

[viewer/core/src/datamodels/cad/styling/PropertyFilterNodeCollection.ts:115](https://github.com/cognitedata/reveal/blob/d2769861/viewer/core/src/datamodels/cad/styling/PropertyFilterNodeCollection.ts#L115)

___

#### off

 **off**(`event`, `listener`): `void`

Unsubscribe a listener to events about the set changing, i.e.
when nodes are added or removed to the set.

##### Parameters

| Name | Type |
| :------ | :------ |
| `event` | ``"changed"`` |
| `listener` | () => `void` |

##### Returns

`void`

##### Inherited from

[NodeCollectionBase](#classes_cognite_revealnodecollectionbasemd).[off](#off)

##### Defined in

[viewer/packages/cad-styling/src/NodeCollectionBase.ts:42](https://github.com/cognitedata/reveal/blob/d2769861/viewer/packages/cad-styling/src/NodeCollectionBase.ts#L42)

___

#### on

 **on**(`event`, `listener`): `void`

Subscribe a listener to events about the set changing, i.e.
when nodes are added or removed to the set.

##### Parameters

| Name | Type |
| :------ | :------ |
| `event` | ``"changed"`` |
| `listener` | () => `void` |

##### Returns

`void`

##### Inherited from

[NodeCollectionBase](#classes_cognite_revealnodecollectionbasemd).[on](#on)

##### Defined in

[viewer/packages/cad-styling/src/NodeCollectionBase.ts:33](https://github.com/cognitedata/reveal/blob/d2769861/viewer/packages/cad-styling/src/NodeCollectionBase.ts#L33)

___

#### serialize

 **serialize**(): [SerializedNodeCollection](#serializednodecollection)

##### Returns

[SerializedNodeCollection](#serializednodecollection)

##### Overrides

[NodeCollectionBase](#classes_cognite_revealnodecollectionbasemd).[serialize](#serialize)

##### Defined in

[viewer/core/src/datamodels/cad/styling/PropertyFilterNodeCollection.ts:119](https://github.com/cognitedata/reveal/blob/d2769861/viewer/core/src/datamodels/cad/styling/PropertyFilterNodeCollection.ts#L119)


<a name="classes_cognite_revealsinglepropertyfilternodecollectionmd"></a>

[@cognite/reveal](#readmemd) / [Modules](#modulesmd) / [@cognite/reveal](#modules_cognite_revealmd) / SinglePropertyFilterNodeCollection

## Class: SinglePropertyFilterNodeCollection

[@cognite/reveal](#modules_cognite_revealmd).SinglePropertyFilterNodeCollection

Node collection that filters nodes based on a node property from a list of values, similarly to how
`SELECT ... IN (...)` works. This is useful when looking up nodes based on a list of identifiers,
nodes within a set of areas or systems. The node set is optimized for matching with properties with
a large number of values (i.e. thousands).

### Hierarchy

- [NodeCollectionBase](#classes_cognite_revealnodecollectionbasemd)

   **SinglePropertyFilterNodeCollection**

### Table of contents

#### Constructors

- [constructor](#constructor)

#### Properties

- [classToken](#classtoken)

#### Accessors

- [classToken](#classtoken)
- [isLoading](#isloading)

#### Methods

- [clear](#clear)
- [executeFilter](#executefilter)
- [getIndexSet](#getindexset)
- [off](#off)
- [on](#on)
- [serialize](#serialize)

### Constructors

#### constructor

 **new SinglePropertyFilterNodeCollection**(`client`, `model`, `options?`)

Construct a new node set.

##### Parameters

| Name | Type | Description |
| :------ | :------ | :------ |
| `client` | `default` | \{@link CogniteClient} authenticated to the project the model is loaded from. |
| `model` | [Cognite3DModel](#classes_cognite_revealcognite3dmodelmd) | CAD model. |
| `options` | `PropertyFilterNodeCollectionOptions` |  |

##### Overrides

NodeCollectionBase.constructor

##### Defined in

[viewer/core/src/datamodels/cad/styling/SinglePropertyFilterNodeCollection.ts:36](https://github.com/cognitedata/reveal/blob/d2769861/viewer/core/src/datamodels/cad/styling/SinglePropertyFilterNodeCollection.ts#L36)

### Properties

#### classToken

 `Static` `Readonly` **classToken**: ``"SinglePropertyNodeCollection"``

##### Defined in

[viewer/core/src/datamodels/cad/styling/SinglePropertyFilterNodeCollection.ts:24](https://github.com/cognitedata/reveal/blob/d2769861/viewer/core/src/datamodels/cad/styling/SinglePropertyFilterNodeCollection.ts#L24)

### Accessors

#### classToken

 `get` **classToken**(): `string`

##### Returns

`string`

##### Defined in

[viewer/packages/cad-styling/src/NodeCollectionBase.ts:25](https://github.com/cognitedata/reveal/blob/d2769861/viewer/packages/cad-styling/src/NodeCollectionBase.ts#L25)

___

#### isLoading

 `get` **isLoading**(): `boolean`

Returns true when the set currently is running an operation
for loading the full set of nodes contained by the set.

##### Returns

`boolean`

##### Defined in

[viewer/core/src/datamodels/cad/styling/SinglePropertyFilterNodeCollection.ts:51](https://github.com/cognitedata/reveal/blob/d2769861/viewer/core/src/datamodels/cad/styling/SinglePropertyFilterNodeCollection.ts#L51)

### Methods

#### clear

 **clear**(): `void`

Clears the node set and interrupts any ongoing operations.

##### Returns

`void`

##### Overrides

[NodeCollectionBase](#classes_cognite_revealnodecollectionbasemd).[clear](#clear)

##### Defined in

[viewer/core/src/datamodels/cad/styling/SinglePropertyFilterNodeCollection.ts:104](https://github.com/cognitedata/reveal/blob/d2769861/viewer/core/src/datamodels/cad/styling/SinglePropertyFilterNodeCollection.ts#L104)

___

#### executeFilter

 **executeFilter**(`propertyCategory`, `propertyKey`, `propertyValues`): `Promise`\<void\>

Execute filter asynchronously, replacing any existing filter active. When \{@link propertyValues}
contains more than 1000 elements, the operation will be split into multiple batches that
are executed in parallel. Note that when providing a \{@link PropertyFilterNodeCollectionOptions.requestPartitions}
during construction of the node set, the total number of batches will be requestPartitions*numberOfBatches.

##### Parameters

| Name | Type | Description |
| :------ | :------ | :------ |
| `propertyCategory` | `string` | Node property category, e.g. `'PDMS'`. |
| `propertyKey` | `string` | Node property key, e.g. `':FU'`. |
| `propertyValues` | `string`[] | Lookup values, e.g. `["AR100APG539","AP500INF534","AP400INF553", ...]` |

##### Returns

`Promise`\<void\>

##### Defined in

[viewer/core/src/datamodels/cad/styling/SinglePropertyFilterNodeCollection.ts:65](https://github.com/cognitedata/reveal/blob/d2769861/viewer/core/src/datamodels/cad/styling/SinglePropertyFilterNodeCollection.ts#L65)

___

#### getIndexSet

 **getIndexSet**(): [IndexSet](#classes_cognite_revealindexsetmd)

##### Returns

[IndexSet](#classes_cognite_revealindexsetmd)

##### Overrides

[NodeCollectionBase](#classes_cognite_revealnodecollectionbasemd).[getIndexSet](#getindexset)

##### Defined in

[viewer/core/src/datamodels/cad/styling/SinglePropertyFilterNodeCollection.ts:112](https://github.com/cognitedata/reveal/blob/d2769861/viewer/core/src/datamodels/cad/styling/SinglePropertyFilterNodeCollection.ts#L112)

___

#### off

 **off**(`event`, `listener`): `void`

Unsubscribe a listener to events about the set changing, i.e.
when nodes are added or removed to the set.

##### Parameters

| Name | Type |
| :------ | :------ |
| `event` | ``"changed"`` |
| `listener` | () => `void` |

##### Returns

`void`

##### Inherited from

[NodeCollectionBase](#classes_cognite_revealnodecollectionbasemd).[off](#off)

##### Defined in

[viewer/packages/cad-styling/src/NodeCollectionBase.ts:42](https://github.com/cognitedata/reveal/blob/d2769861/viewer/packages/cad-styling/src/NodeCollectionBase.ts#L42)

___

#### on

 **on**(`event`, `listener`): `void`

Subscribe a listener to events about the set changing, i.e.
when nodes are added or removed to the set.

##### Parameters

| Name | Type |
| :------ | :------ |
| `event` | ``"changed"`` |
| `listener` | () => `void` |

##### Returns

`void`

##### Inherited from

[NodeCollectionBase](#classes_cognite_revealnodecollectionbasemd).[on](#on)

##### Defined in

[viewer/packages/cad-styling/src/NodeCollectionBase.ts:33](https://github.com/cognitedata/reveal/blob/d2769861/viewer/packages/cad-styling/src/NodeCollectionBase.ts#L33)

___

#### serialize

 **serialize**(): [SerializedNodeCollection](#serializednodecollection)

##### Returns

[SerializedNodeCollection](#serializednodecollection)

##### Overrides

[NodeCollectionBase](#classes_cognite_revealnodecollectionbasemd).[serialize](#serialize)

##### Defined in

[viewer/core/src/datamodels/cad/styling/SinglePropertyFilterNodeCollection.ts:122](https://github.com/cognitedata/reveal/blob/d2769861/viewer/core/src/datamodels/cad/styling/SinglePropertyFilterNodeCollection.ts#L122)


<a name="classes_cognite_revealtreeindexnodecollectionmd"></a>

[@cognite/reveal](#readmemd) / [Modules](#modulesmd) / [@cognite/reveal](#modules_cognite_revealmd) / TreeIndexNodeCollection

## Class: TreeIndexNodeCollection

[@cognite/reveal](#modules_cognite_revealmd).TreeIndexNodeCollection

Node collection that holds a set of nodes defined by a set of tree indices.

### Hierarchy

- [NodeCollectionBase](#classes_cognite_revealnodecollectionbasemd)

   **TreeIndexNodeCollection**

### Table of contents

#### Constructors

- [constructor](#constructor)

#### Properties

- [classToken](#classtoken)

#### Accessors

- [classToken](#classtoken)
- [isLoading](#isloading)

#### Methods

- [clear](#clear)
- [getIndexSet](#getindexset)
- [off](#off)
- [on](#on)
- [serialize](#serialize)
- [updateSet](#updateset)

### Constructors

#### constructor

 **new TreeIndexNodeCollection**(`treeIndexSet?`)

##### Parameters

| Name | Type |
| :------ | :------ |
| `treeIndexSet?` | [IndexSet](#classes_cognite_revealindexsetmd) |

##### Overrides

NodeCollectionBase.constructor

##### Defined in

[viewer/packages/cad-styling/src/TreeIndexNodeCollection.ts:13](https://github.com/cognitedata/reveal/blob/d2769861/viewer/packages/cad-styling/src/TreeIndexNodeCollection.ts#L13)

 **new TreeIndexNodeCollection**(`treeIndices?`)

##### Parameters

| Name | Type |
| :------ | :------ |
| `treeIndices?` | `Iterable`\<number\> |

##### Overrides

NodeCollectionBase.constructor

##### Defined in

[viewer/packages/cad-styling/src/TreeIndexNodeCollection.ts:15](https://github.com/cognitedata/reveal/blob/d2769861/viewer/packages/cad-styling/src/TreeIndexNodeCollection.ts#L15)

 **new TreeIndexNodeCollection**(`treeIndexRange?`)

##### Parameters

| Name | Type |
| :------ | :------ |
| `treeIndexRange?` | [NumericRange](#classes_cognite_revealnumericrangemd) |

##### Overrides

NodeCollectionBase.constructor

##### Defined in

[viewer/packages/cad-styling/src/TreeIndexNodeCollection.ts:16](https://github.com/cognitedata/reveal/blob/d2769861/viewer/packages/cad-styling/src/TreeIndexNodeCollection.ts#L16)

### Properties

#### classToken

 `Static` `Readonly` **classToken**: ``"TreeIndexNodeCollection"``

##### Defined in

[viewer/packages/cad-styling/src/TreeIndexNodeCollection.ts:11](https://github.com/cognitedata/reveal/blob/d2769861/viewer/packages/cad-styling/src/TreeIndexNodeCollection.ts#L11)

### Accessors

#### classToken

 `get` **classToken**(): `string`

##### Returns

`string`

##### Defined in

[viewer/packages/cad-styling/src/NodeCollectionBase.ts:25](https://github.com/cognitedata/reveal/blob/d2769861/viewer/packages/cad-styling/src/NodeCollectionBase.ts#L25)

___

#### isLoading

 `get` **isLoading**(): `boolean`

Returns true when the set currently is running an operation
for loading the full set of nodes contained by the set.

##### Returns

`boolean`

##### Defined in

[viewer/packages/cad-styling/src/TreeIndexNodeCollection.ts:46](https://github.com/cognitedata/reveal/blob/d2769861/viewer/packages/cad-styling/src/TreeIndexNodeCollection.ts#L46)

### Methods

#### clear

 **clear**(): `void`

Sets this set to hold an empty set.

##### Returns

`void`

##### Overrides

[NodeCollectionBase](#classes_cognite_revealnodecollectionbasemd).[clear](#clear)

##### Defined in

[viewer/packages/cad-styling/src/TreeIndexNodeCollection.ts:37](https://github.com/cognitedata/reveal/blob/d2769861/viewer/packages/cad-styling/src/TreeIndexNodeCollection.ts#L37)

___

#### getIndexSet

 **getIndexSet**(): [IndexSet](#classes_cognite_revealindexsetmd)

##### Returns

[IndexSet](#classes_cognite_revealindexsetmd)

##### Overrides

[NodeCollectionBase](#classes_cognite_revealnodecollectionbasemd).[getIndexSet](#getindexset)

##### Defined in

[viewer/packages/cad-styling/src/TreeIndexNodeCollection.ts:42](https://github.com/cognitedata/reveal/blob/d2769861/viewer/packages/cad-styling/src/TreeIndexNodeCollection.ts#L42)

___

#### off

 **off**(`event`, `listener`): `void`

Unsubscribe a listener to events about the set changing, i.e.
when nodes are added or removed to the set.

##### Parameters

| Name | Type |
| :------ | :------ |
| `event` | ``"changed"`` |
| `listener` | () => `void` |

##### Returns

`void`

##### Inherited from

[NodeCollectionBase](#classes_cognite_revealnodecollectionbasemd).[off](#off)

##### Defined in

[viewer/packages/cad-styling/src/NodeCollectionBase.ts:42](https://github.com/cognitedata/reveal/blob/d2769861/viewer/packages/cad-styling/src/NodeCollectionBase.ts#L42)

___

#### on

 **on**(`event`, `listener`): `void`

Subscribe a listener to events about the set changing, i.e.
when nodes are added or removed to the set.

##### Parameters

| Name | Type |
| :------ | :------ |
| `event` | ``"changed"`` |
| `listener` | () => `void` |

##### Returns

`void`

##### Inherited from

[NodeCollectionBase](#classes_cognite_revealnodecollectionbasemd).[on](#on)

##### Defined in

[viewer/packages/cad-styling/src/NodeCollectionBase.ts:33](https://github.com/cognitedata/reveal/blob/d2769861/viewer/packages/cad-styling/src/NodeCollectionBase.ts#L33)

___

#### serialize

 **serialize**(): [SerializedNodeCollection](#serializednodecollection)

##### Returns

[SerializedNodeCollection](#serializednodecollection)

##### Overrides

[NodeCollectionBase](#classes_cognite_revealnodecollectionbasemd).[serialize](#serialize)

##### Defined in

[viewer/packages/cad-styling/src/TreeIndexNodeCollection.ts:50](https://github.com/cognitedata/reveal/blob/d2769861/viewer/packages/cad-styling/src/TreeIndexNodeCollection.ts#L50)

___

#### updateSet

 **updateSet**(`treeIndices`): `void`

##### Parameters

| Name | Type |
| :------ | :------ |
| `treeIndices` | [IndexSet](#classes_cognite_revealindexsetmd) |

##### Returns

`void`

##### Defined in

[viewer/packages/cad-styling/src/TreeIndexNodeCollection.ts:29](https://github.com/cognitedata/reveal/blob/d2769861/viewer/packages/cad-styling/src/TreeIndexNodeCollection.ts#L29)


<a name="classes_cognite_revealunionnodecollectionmd"></a>

[@cognite/reveal](#readmemd) / [Modules](#modulesmd) / [@cognite/reveal](#modules_cognite_revealmd) / UnionNodeCollection

## Class: UnionNodeCollection

[@cognite/reveal](#modules_cognite_revealmd).UnionNodeCollection

Node collection that takes the set union of multiple node collections.

### Hierarchy

- `CombineNodeCollectionBase`

   **UnionNodeCollection**

### Table of contents

#### Constructors

- [constructor](#constructor)

#### Properties

- [classToken](#classtoken)

#### Accessors

- [classToken](#classtoken)
- [isLoading](#isloading)

#### Methods

- [add](#add)
- [clear](#clear)
- [getIndexSet](#getindexset)
- [off](#off)
- [on](#on)
- [remove](#remove)
- [serialize](#serialize)

### Constructors

#### constructor

 **new UnionNodeCollection**(`nodeCollections?`)

##### Parameters

| Name | Type |
| :------ | :------ |
| `nodeCollections?` | [NodeCollectionBase](#classes_cognite_revealnodecollectionbasemd)[] |

##### Overrides

CombineNodeCollectionBase.constructor

##### Defined in

[viewer/packages/cad-styling/src/UnionNodeCollection.ts:14](https://github.com/cognitedata/reveal/blob/d2769861/viewer/packages/cad-styling/src/UnionNodeCollection.ts#L14)

### Properties

#### classToken

 `Static` `Readonly` **classToken**: ``"UnionNodeCollection"``

##### Defined in

[viewer/packages/cad-styling/src/UnionNodeCollection.ts:14](https://github.com/cognitedata/reveal/blob/d2769861/viewer/packages/cad-styling/src/UnionNodeCollection.ts#L14)

### Accessors

#### classToken

 `get` **classToken**(): `string`

##### Returns

`string`

##### Defined in

[viewer/packages/cad-styling/src/NodeCollectionBase.ts:25](https://github.com/cognitedata/reveal/blob/d2769861/viewer/packages/cad-styling/src/NodeCollectionBase.ts#L25)

___

#### isLoading

 `get` **isLoading**(): `boolean`

**`override`**

##### Returns

`boolean`

##### Defined in

[viewer/packages/cad-styling/src/CombineNodeCollectionBase.ts:65](https://github.com/cognitedata/reveal/blob/d2769861/viewer/packages/cad-styling/src/CombineNodeCollectionBase.ts#L65)

### Methods

#### add

 **add**(`nodeCollection`): `void`

##### Parameters

| Name | Type |
| :------ | :------ |
| `nodeCollection` | [NodeCollectionBase](#classes_cognite_revealnodecollectionbasemd) |

##### Returns

`void`

##### Inherited from

CombineNodeCollectionBase.add

##### Defined in

[viewer/packages/cad-styling/src/CombineNodeCollectionBase.ts:24](https://github.com/cognitedata/reveal/blob/d2769861/viewer/packages/cad-styling/src/CombineNodeCollectionBase.ts#L24)

___

#### clear

 **clear**(): `void`

Clears all underlying node collections.

##### Returns

`void`

##### Inherited from

CombineNodeCollectionBase.clear

##### Defined in

[viewer/packages/cad-styling/src/CombineNodeCollectionBase.ts:44](https://github.com/cognitedata/reveal/blob/d2769861/viewer/packages/cad-styling/src/CombineNodeCollectionBase.ts#L44)

___

#### getIndexSet

 **getIndexSet**(): [IndexSet](#classes_cognite_revealindexsetmd)

**`override`**

##### Returns

[IndexSet](#classes_cognite_revealindexsetmd)

##### Inherited from

CombineNodeCollectionBase.getIndexSet

##### Defined in

[viewer/packages/cad-styling/src/CombineNodeCollectionBase.ts:57](https://github.com/cognitedata/reveal/blob/d2769861/viewer/packages/cad-styling/src/CombineNodeCollectionBase.ts#L57)

___

#### off

 **off**(`event`, `listener`): `void`

Unsubscribe a listener to events about the set changing, i.e.
when nodes are added or removed to the set.

##### Parameters

| Name | Type |
| :------ | :------ |
| `event` | ``"changed"`` |
| `listener` | () => `void` |

##### Returns

`void`

##### Inherited from

CombineNodeCollectionBase.off

##### Defined in

[viewer/packages/cad-styling/src/NodeCollectionBase.ts:42](https://github.com/cognitedata/reveal/blob/d2769861/viewer/packages/cad-styling/src/NodeCollectionBase.ts#L42)

___

#### on

 **on**(`event`, `listener`): `void`

Subscribe a listener to events about the set changing, i.e.
when nodes are added or removed to the set.

##### Parameters

| Name | Type |
| :------ | :------ |
| `event` | ``"changed"`` |
| `listener` | () => `void` |

##### Returns

`void`

##### Inherited from

CombineNodeCollectionBase.on

##### Defined in

[viewer/packages/cad-styling/src/NodeCollectionBase.ts:33](https://github.com/cognitedata/reveal/blob/d2769861/viewer/packages/cad-styling/src/NodeCollectionBase.ts#L33)

___

#### remove

 **remove**(`nodeCollection`): `void`

##### Parameters

| Name | Type |
| :------ | :------ |
| `nodeCollection` | [NodeCollectionBase](#classes_cognite_revealnodecollectionbasemd) |

##### Returns

`void`

##### Inherited from

CombineNodeCollectionBase.remove

##### Defined in

[viewer/packages/cad-styling/src/CombineNodeCollectionBase.ts:30](https://github.com/cognitedata/reveal/blob/d2769861/viewer/packages/cad-styling/src/CombineNodeCollectionBase.ts#L30)

___

#### serialize

 **serialize**(): [SerializedNodeCollection](#serializednodecollection)

##### Returns

[SerializedNodeCollection](#serializednodecollection)

##### Overrides

CombineNodeCollectionBase.serialize

##### Defined in

[viewer/packages/cad-styling/src/UnionNodeCollection.ts:20](https://github.com/cognitedata/reveal/blob/d2769861/viewer/packages/cad-styling/src/UnionNodeCollection.ts#L20)


<a name="classes_cognite_reveal_extensions_datasourcecdfmodelidentifiermd"></a>

[@cognite/reveal](#readmemd) / [Modules](#modulesmd) / [@cognite/reveal/extensions/datasource](#modules_cognite_reveal_extensions_datasourcemd) / CdfModelIdentifier

## Class: CdfModelIdentifier

[@cognite/reveal/extensions/datasource](#modules_cognite_reveal_extensions_datasourcemd).CdfModelIdentifier

Identifies a 3D model stored in CDF by the combination of a modelId, a revisionId
and a format.

### Implements

- [ModelIdentifier](#interfaces_cognite_reveal_extensions_datasourcemodelidentifiermd)

### Table of contents

#### Constructors

- [constructor](#constructor)

#### Properties

- [modelFormat](#modelformat)
- [modelId](#modelid)
- [revealInternalId](#revealinternalid)
- [revisionId](#revisionid)

#### Methods

- [toString](#tostring)

### Constructors

#### constructor

 **new CdfModelIdentifier**(`modelId`, `revisionId`, `modelFormat`)

##### Parameters

| Name | Type |
| :------ | :------ |
| `modelId` | `number` |
| `revisionId` | `number` |
| `modelFormat` | `File3dFormat` |

##### Defined in

[viewer/packages/modeldata-api/src/CdfModelIdentifier.ts:16](https://github.com/cognitedata/reveal/blob/d2769861/viewer/packages/modeldata-api/src/CdfModelIdentifier.ts#L16)

### Properties

#### modelFormat

 `Readonly` **modelFormat**: `File3dFormat`

##### Defined in

[viewer/packages/modeldata-api/src/CdfModelIdentifier.ts:13](https://github.com/cognitedata/reveal/blob/d2769861/viewer/packages/modeldata-api/src/CdfModelIdentifier.ts#L13)

___

#### modelId

 `Readonly` **modelId**: `number`

##### Defined in

[viewer/packages/modeldata-api/src/CdfModelIdentifier.ts:15](https://github.com/cognitedata/reveal/blob/d2769861/viewer/packages/modeldata-api/src/CdfModelIdentifier.ts#L15)

___

#### revealInternalId

 `Readonly` **revealInternalId**: `symbol`

Unique ID of the model.

##### Implementation of

[ModelIdentifier](#interfaces_cognite_reveal_extensions_datasourcemodelidentifiermd).[revealInternalId](#revealinternalid)

##### Defined in

[viewer/packages/modeldata-api/src/CdfModelIdentifier.ts:12](https://github.com/cognitedata/reveal/blob/d2769861/viewer/packages/modeldata-api/src/CdfModelIdentifier.ts#L12)

___

#### revisionId

 `Readonly` **revisionId**: `number`

##### Defined in

[viewer/packages/modeldata-api/src/CdfModelIdentifier.ts:16](https://github.com/cognitedata/reveal/blob/d2769861/viewer/packages/modeldata-api/src/CdfModelIdentifier.ts#L16)

### Methods

#### toString

 **toString**(): `string`

##### Returns

`string`

##### Defined in

[viewer/packages/modeldata-api/src/CdfModelIdentifier.ts:25](https://github.com/cognitedata/reveal/blob/d2769861/viewer/packages/modeldata-api/src/CdfModelIdentifier.ts#L25)


<a name="classes_cognite_reveal_toolsaxisviewtoolmd"></a>

[@cognite/reveal](#readmemd) / [Modules](#modulesmd) / [@cognite/reveal/tools](#modules_cognite_reveal_toolsmd) / AxisViewTool

## Class: AxisViewTool

[@cognite/reveal/tools](#modules_cognite_reveal_toolsmd).AxisViewTool

### Hierarchy

- [Cognite3DViewerToolBase](#classes_cognite_reveal_toolscognite3dviewertoolbasemd)

   **AxisViewTool**

### Table of contents

#### Constructors

- [constructor](#constructor)

#### Methods

- [dispose](#dispose)
- [off](#off)

### Constructors

#### constructor

 **new AxisViewTool**(`viewer`, `config?`)

##### Parameters

| Name | Type |
| :------ | :------ |
| `viewer` | [Cognite3DViewer](#classes_cognite_revealcognite3dviewermd) |
| `config?` | [AxisBoxConfig](#axisboxconfig) |

##### Overrides

[Cognite3DViewerToolBase](#classes_cognite_reveal_toolscognite3dviewertoolbasemd).[constructor](#constructor)

##### Defined in

[viewer/packages/tools/src/AxisView/AxisViewTool.ts:41](https://github.com/cognitedata/reveal/blob/d2769861/viewer/packages/tools/src/AxisView/AxisViewTool.ts#L41)

### Methods

#### dispose

 **dispose**(): `void`

##### Returns

`void`

##### Overrides

[Cognite3DViewerToolBase](#classes_cognite_reveal_toolscognite3dviewertoolbasemd).[dispose](#dispose)

##### Defined in

[viewer/packages/tools/src/AxisView/AxisViewTool.ts:65](https://github.com/cognitedata/reveal/blob/d2769861/viewer/packages/tools/src/AxisView/AxisViewTool.ts#L65)

___

#### off

 **off**(`event`, `handler`): `void`

Unregisters an event handler for the 'disposed'-event.

##### Parameters

| Name | Type |
| :------ | :------ |
| `event` | ``"disposed"`` |
| `handler` | () => `void` |

##### Returns

`void`

##### Inherited from

[Cognite3DViewerToolBase](#classes_cognite_reveal_toolscognite3dviewertoolbasemd).[off](#off)

##### Defined in

[viewer/packages/tools/src/Cognite3DViewerToolBase.ts:37](https://github.com/cognitedata/reveal/blob/d2769861/viewer/packages/tools/src/Cognite3DViewerToolBase.ts#L37)


<a name="classes_cognite_reveal_toolscognite3dviewertoolbasemd"></a>

[@cognite/reveal](#readmemd) / [Modules](#modulesmd) / [@cognite/reveal/tools](#modules_cognite_reveal_toolsmd) / Cognite3DViewerToolBase

## Class: Cognite3DViewerToolBase

[@cognite/reveal/tools](#modules_cognite_reveal_toolsmd).Cognite3DViewerToolBase

Base class for tools attaching to a @see \{@link Cognite3DViewer}.

### Hierarchy

- **Cognite3DViewerToolBase**

   [HtmlOverlayTool](#classes_cognite_reveal_toolshtmloverlaytoolmd)

   [ExplodedViewTool](#classes_cognite_reveal_toolsexplodedviewtoolmd)

   [DebugCameraTool](#classes_cognite_reveal_toolsdebugcameratoolmd)

   [AxisViewTool](#classes_cognite_reveal_toolsaxisviewtoolmd)

   [GeomapTool](#classes_cognite_reveal_toolsgeomaptoolmd)

   [TimelineTool](#classes_cognite_reveal_toolstimelinetoolmd)

   [DebugLoadedSectorsTool](#classes_cognite_reveal_toolsdebugloadedsectorstoolmd)

### Table of contents

#### Constructors

- [constructor](#constructor)

#### Methods

- [dispose](#dispose)
- [off](#off)

### Constructors

#### constructor

 **new Cognite3DViewerToolBase**()

### Methods

#### dispose

 **dispose**(): `void`

Disposes the element and triggeres the 'disposed' event before clearing the list
of dipose-listeners.

##### Returns

`void`

##### Defined in

[viewer/packages/tools/src/Cognite3DViewerToolBase.ts:52](https://github.com/cognitedata/reveal/blob/d2769861/viewer/packages/tools/src/Cognite3DViewerToolBase.ts#L52)

___

#### off

 **off**(`event`, `handler`): `void`

Unregisters an event handler for the 'disposed'-event.

##### Parameters

| Name | Type |
| :------ | :------ |
| `event` | ``"disposed"`` |
| `handler` | () => `void` |

##### Returns

`void`

##### Defined in

[viewer/packages/tools/src/Cognite3DViewerToolBase.ts:37](https://github.com/cognitedata/reveal/blob/d2769861/viewer/packages/tools/src/Cognite3DViewerToolBase.ts#L37)


<a name="classes_cognite_reveal_toolsdebugcameratoolmd"></a>

[@cognite/reveal](#readmemd) / [Modules](#modulesmd) / [@cognite/reveal/tools](#modules_cognite_reveal_toolsmd) / DebugCameraTool

## Class: DebugCameraTool

[@cognite/reveal/tools](#modules_cognite_reveal_toolsmd).DebugCameraTool

### Hierarchy

- [Cognite3DViewerToolBase](#classes_cognite_reveal_toolscognite3dviewertoolbasemd)

   **DebugCameraTool**

### Table of contents

#### Constructors

- [constructor](#constructor)

#### Methods

- [dispose](#dispose)
- [hideCameraHelper](#hidecamerahelper)
- [off](#off)
- [showCameraHelper](#showcamerahelper)

### Constructors

#### constructor

 **new DebugCameraTool**(`viewer`)

##### Parameters

| Name | Type |
| :------ | :------ |
| `viewer` | [Cognite3DViewer](#classes_cognite_revealcognite3dviewermd) |

##### Overrides

[Cognite3DViewerToolBase](#classes_cognite_reveal_toolscognite3dviewertoolbasemd).[constructor](#constructor)

##### Defined in

[viewer/packages/tools/src/DebugCameraTool.ts:18](https://github.com/cognitedata/reveal/blob/d2769861/viewer/packages/tools/src/DebugCameraTool.ts#L18)

### Methods

#### dispose

 **dispose**(): `void`

Removes all elements and detaches from the viewer.

**`override`**

##### Returns

`void`

##### Overrides

[Cognite3DViewerToolBase](#classes_cognite_reveal_toolscognite3dviewertoolbasemd).[dispose](#dispose)

##### Defined in

[viewer/packages/tools/src/DebugCameraTool.ts:32](https://github.com/cognitedata/reveal/blob/d2769861/viewer/packages/tools/src/DebugCameraTool.ts#L32)

___

#### hideCameraHelper

 **hideCameraHelper**(): `void`

##### Returns

`void`

##### Defined in

[viewer/packages/tools/src/DebugCameraTool.ts:43](https://github.com/cognitedata/reveal/blob/d2769861/viewer/packages/tools/src/DebugCameraTool.ts#L43)

___

#### off

 **off**(`event`, `handler`): `void`

Unregisters an event handler for the 'disposed'-event.

##### Parameters

| Name | Type |
| :------ | :------ |
| `event` | ``"disposed"`` |
| `handler` | () => `void` |

##### Returns

`void`

##### Inherited from

[Cognite3DViewerToolBase](#classes_cognite_reveal_toolscognite3dviewertoolbasemd).[off](#off)

##### Defined in

[viewer/packages/tools/src/Cognite3DViewerToolBase.ts:37](https://github.com/cognitedata/reveal/blob/d2769861/viewer/packages/tools/src/Cognite3DViewerToolBase.ts#L37)

___

#### showCameraHelper

 **showCameraHelper**(): `void`

##### Returns

`void`

##### Defined in

[viewer/packages/tools/src/DebugCameraTool.ts:37](https://github.com/cognitedata/reveal/blob/d2769861/viewer/packages/tools/src/DebugCameraTool.ts#L37)


<a name="classes_cognite_reveal_toolsdebugloadedsectorstoolmd"></a>

[@cognite/reveal](#readmemd) / [Modules](#modulesmd) / [@cognite/reveal/tools](#modules_cognite_reveal_toolsmd) / DebugLoadedSectorsTool

## Class: DebugLoadedSectorsTool

[@cognite/reveal/tools](#modules_cognite_reveal_toolsmd).DebugLoadedSectorsTool

### Hierarchy

- [Cognite3DViewerToolBase](#classes_cognite_reveal_toolscognite3dviewertoolbasemd)

   **DebugLoadedSectorsTool**

### Table of contents

#### Constructors

- [constructor](#constructor)

#### Methods

- [dispose](#dispose)
- [off](#off)
- [setOptions](#setoptions)
- [showSectorBoundingBoxes](#showsectorboundingboxes)

### Constructors

#### constructor

 **new DebugLoadedSectorsTool**(`viewer`, `options?`)

##### Parameters

| Name | Type |
| :------ | :------ |
| `viewer` | [Cognite3DViewer](#classes_cognite_revealcognite3dviewermd) |
| `options` | [DebugLoadedSectorsToolOptions](#debugloadedsectorstooloptions) |

##### Overrides

[Cognite3DViewerToolBase](#classes_cognite_reveal_toolscognite3dviewertoolbasemd).[constructor](#constructor)

##### Defined in

[viewer/packages/tools/src/DebugLoadedSectorsTool.ts:25](https://github.com/cognitedata/reveal/blob/d2769861/viewer/packages/tools/src/DebugLoadedSectorsTool.ts#L25)

### Methods

#### dispose

 **dispose**(): `void`

##### Returns

`void`

##### Overrides

[Cognite3DViewerToolBase](#classes_cognite_reveal_toolscognite3dviewertoolbasemd).[dispose](#dispose)

##### Defined in

[viewer/packages/tools/src/DebugLoadedSectorsTool.ts:47](https://github.com/cognitedata/reveal/blob/d2769861/viewer/packages/tools/src/DebugLoadedSectorsTool.ts#L47)

___

#### off

 **off**(`event`, `handler`): `void`

Unregisters an event handler for the 'disposed'-event.

##### Parameters

| Name | Type |
| :------ | :------ |
| `event` | ``"disposed"`` |
| `handler` | () => `void` |

##### Returns

`void`

##### Inherited from

[Cognite3DViewerToolBase](#classes_cognite_reveal_toolscognite3dviewertoolbasemd).[off](#off)

##### Defined in

[viewer/packages/tools/src/Cognite3DViewerToolBase.ts:37](https://github.com/cognitedata/reveal/blob/d2769861/viewer/packages/tools/src/Cognite3DViewerToolBase.ts#L37)

___

#### setOptions

 **setOptions**(`options`): `void`

##### Parameters

| Name | Type |
| :------ | :------ |
| `options` | [DebugLoadedSectorsToolOptions](#debugloadedsectorstooloptions) |

##### Returns

`void`

##### Defined in

[viewer/packages/tools/src/DebugLoadedSectorsTool.ts:35](https://github.com/cognitedata/reveal/blob/d2769861/viewer/packages/tools/src/DebugLoadedSectorsTool.ts#L35)

___

#### showSectorBoundingBoxes

 **showSectorBoundingBoxes**(`model`): `void`

##### Parameters

| Name | Type |
| :------ | :------ |
| `model` | [Cognite3DModel](#classes_cognite_revealcognite3dmodelmd) |

##### Returns

`void`

##### Defined in

[viewer/packages/tools/src/DebugLoadedSectorsTool.ts:51](https://github.com/cognitedata/reveal/blob/d2769861/viewer/packages/tools/src/DebugLoadedSectorsTool.ts#L51)


<a name="classes_cognite_reveal_toolsexplodedviewtoolmd"></a>

[@cognite/reveal](#readmemd) / [Modules](#modulesmd) / [@cognite/reveal/tools](#modules_cognite_reveal_toolsmd) / ExplodedViewTool

## Class: ExplodedViewTool

[@cognite/reveal/tools](#modules_cognite_reveal_toolsmd).ExplodedViewTool

### Hierarchy

- [Cognite3DViewerToolBase](#classes_cognite_reveal_toolscognite3dviewertoolbasemd)

   **ExplodedViewTool**

### Table of contents

#### Constructors

- [constructor](#constructor)

#### Accessors

- [readyPromise](#readypromise)

#### Methods

- [dispose](#dispose)
- [expand](#expand)
- [off](#off)
- [reset](#reset)

### Constructors

#### constructor

 **new ExplodedViewTool**(`treeIndex`, `cadModel`)

##### Parameters

| Name | Type |
| :------ | :------ |
| `treeIndex` | `number` |
| `cadModel` | [Cognite3DModel](#classes_cognite_revealcognite3dmodelmd) |

##### Overrides

[Cognite3DViewerToolBase](#classes_cognite_reveal_toolscognite3dviewertoolbasemd).[constructor](#constructor)

##### Defined in

[viewer/packages/tools/src/ExplodedViewTool.ts:16](https://github.com/cognitedata/reveal/blob/d2769861/viewer/packages/tools/src/ExplodedViewTool.ts#L16)

### Accessors

#### readyPromise

 `get` **readyPromise**(): `Promise`\<void\>

##### Returns

`Promise`\<void\>

##### Defined in

[viewer/packages/tools/src/ExplodedViewTool.ts:14](https://github.com/cognitedata/reveal/blob/d2769861/viewer/packages/tools/src/ExplodedViewTool.ts#L14)

### Methods

#### dispose

 **dispose**(): `void`

Disposes the element and triggeres the 'disposed' event before clearing the list
of dipose-listeners.

##### Returns

`void`

##### Inherited from

[Cognite3DViewerToolBase](#classes_cognite_reveal_toolscognite3dviewertoolbasemd).[dispose](#dispose)

##### Defined in

[viewer/packages/tools/src/Cognite3DViewerToolBase.ts:52](https://github.com/cognitedata/reveal/blob/d2769861/viewer/packages/tools/src/Cognite3DViewerToolBase.ts#L52)

___

#### expand

 **expand**(`expandRadius`): `Promise`\<void\>

##### Parameters

| Name | Type |
| :------ | :------ |
| `expandRadius` | `number` |

##### Returns

`Promise`\<void\>

##### Defined in

[viewer/packages/tools/src/ExplodedViewTool.ts:29](https://github.com/cognitedata/reveal/blob/d2769861/viewer/packages/tools/src/ExplodedViewTool.ts#L29)

___

#### off

 **off**(`event`, `handler`): `void`

Unregisters an event handler for the 'disposed'-event.

##### Parameters

| Name | Type |
| :------ | :------ |
| `event` | ``"disposed"`` |
| `handler` | () => `void` |

##### Returns

`void`

##### Inherited from

[Cognite3DViewerToolBase](#classes_cognite_reveal_toolscognite3dviewertoolbasemd).[off](#off)

##### Defined in

[viewer/packages/tools/src/Cognite3DViewerToolBase.ts:37](https://github.com/cognitedata/reveal/blob/d2769861/viewer/packages/tools/src/Cognite3DViewerToolBase.ts#L37)

___

#### reset

 **reset**(): `void`

##### Returns

`void`

##### Defined in

[viewer/packages/tools/src/ExplodedViewTool.ts:46](https://github.com/cognitedata/reveal/blob/d2769861/viewer/packages/tools/src/ExplodedViewTool.ts#L46)


<a name="classes_cognite_reveal_toolsgeomaptoolmd"></a>

[@cognite/reveal](#readmemd) / [Modules](#modulesmd) / [@cognite/reveal/tools](#modules_cognite_reveal_toolsmd) / GeomapTool

## Class: GeomapTool

[@cognite/reveal/tools](#modules_cognite_reveal_toolsmd).GeomapTool

The `GeomapTool` is a geolocation for the models and allow the user to place them on the maps.

**`version`** New since 2.1.

### Hierarchy

- [Cognite3DViewerToolBase](#classes_cognite_reveal_toolscognite3dviewertoolbasemd)

   **GeomapTool**

### Table of contents

#### Constructors

- [constructor](#constructor)

#### Methods

- [dispose](#dispose)
- [latLongToWorldCoordinates](#latlongtoworldcoordinates)
- [off](#off)

### Constructors

#### constructor

 **new GeomapTool**(`viewer`, `config`)

##### Parameters

| Name | Type |
| :------ | :------ |
| `viewer` | [Cognite3DViewer](#classes_cognite_revealcognite3dviewermd) |
| `config` | [MapConfig](#mapconfig) |

##### Overrides

[Cognite3DViewerToolBase](#classes_cognite_reveal_toolscognite3dviewertoolbasemd).[constructor](#constructor)

##### Defined in

[viewer/packages/tools/src/Geomap/GeomapTool.ts:18](https://github.com/cognitedata/reveal/blob/d2769861/viewer/packages/tools/src/Geomap/GeomapTool.ts#L18)

### Methods

#### dispose

 **dispose**(): `void`

##### Returns

`void`

##### Overrides

[Cognite3DViewerToolBase](#classes_cognite_reveal_toolscognite3dviewertoolbasemd).[dispose](#dispose)

##### Defined in

[viewer/packages/tools/src/Geomap/GeomapTool.ts:37](https://github.com/cognitedata/reveal/blob/d2769861/viewer/packages/tools/src/Geomap/GeomapTool.ts#L37)

___

#### latLongToWorldCoordinates

 **latLongToWorldCoordinates**(`latLong`): `Object`

Converts Latitude & Longitude into Vector2 World coordinates on the Map

##### Parameters

| Name | Type | Description |
| :------ | :------ | :------ |
| `latLong` | `LatLongPosition` | Latitude & Longitude |

##### Returns

`Object`

| Name | Type |
| :------ | :------ |
| `x` | `number` |
| `y` | `number` |

##### Defined in

[viewer/packages/tools/src/Geomap/GeomapTool.ts:33](https://github.com/cognitedata/reveal/blob/d2769861/viewer/packages/tools/src/Geomap/GeomapTool.ts#L33)

___

#### off

 **off**(`event`, `handler`): `void`

Unregisters an event handler for the 'disposed'-event.

##### Parameters

| Name | Type |
| :------ | :------ |
| `event` | ``"disposed"`` |
| `handler` | () => `void` |

##### Returns

`void`

##### Inherited from

[Cognite3DViewerToolBase](#classes_cognite_reveal_toolscognite3dviewertoolbasemd).[off](#off)

##### Defined in

[viewer/packages/tools/src/Cognite3DViewerToolBase.ts:37](https://github.com/cognitedata/reveal/blob/d2769861/viewer/packages/tools/src/Cognite3DViewerToolBase.ts#L37)


<a name="classes_cognite_reveal_toolshtmloverlaytoolmd"></a>

[@cognite/reveal](#readmemd) / [Modules](#modulesmd) / [@cognite/reveal/tools](#modules_cognite_reveal_toolsmd) / HtmlOverlayTool

## Class: HtmlOverlayTool

[@cognite/reveal/tools](#modules_cognite_reveal_toolsmd).HtmlOverlayTool

Manages HTMLoverlays for @see \{@link Cognite3DViewer}. Attaches HTML elements to a
3D position and updates its position/visibility as user moves the camera. This is
useful to create HTML overlays to highlight information about key positions in the 3D model.

Attached elements *must* have CSS style 'position: absolute'. It's also recommended
in most cases to have styles 'pointer-events: none' and 'touch-action: none' to avoid
interfering with 3D navigation. Consider also applying 'transform: translate(-50%, -50%)'
to anchor the center of the element rather than the top-left corner. In some cases the
`zIndex`-attribute is necessary for the element to appear on top of the viewer.

**`example`**
```js
const el = document.createElement('div');
el.style.position = 'absolute'; // Required!
// Anchor to center of element
el.style.transform = 'translate(-50%, -50%)';
// Avoid being target for events
el.style.pointerEvents = 'none;
el.style.touchAction = 'none';
// Render in front of other elements
el.style.zIndex = 10;

el.style.color = 'red';
el.innerHtml = '<h1>Overlay</h1>';

const overlayTool = new HtmlOverlayTool(viewer);
overlayTool.add(el, new THREE.Vector3(10, 10, 10));
// ...
overlayTool.remove(el);
// or, to remove all attached elements
overlayTool.clear();

// detach the tool from the viewer
overlayTool.dispose();
```

### Hierarchy

- [Cognite3DViewerToolBase](#classes_cognite_reveal_toolscognite3dviewertoolbasemd)

   **HtmlOverlayTool**

### Table of contents

#### Constructors

- [constructor](#constructor)

#### Accessors

- [elements](#elements)

#### Methods

- [add](#add)
- [clear](#clear)
- [dispose](#dispose)
- [forceUpdate](#forceupdate)
- [off](#off)
- [remove](#remove)

### Constructors

#### constructor

 **new HtmlOverlayTool**(`viewer`, `options?`)

##### Parameters

| Name | Type |
| :------ | :------ |
| `viewer` | [Cognite3DViewer](#classes_cognite_revealcognite3dviewermd) |
| `options?` | `HtmlOverlayToolOptions` |

##### Overrides

[Cognite3DViewerToolBase](#classes_cognite_reveal_toolscognite3dviewertoolbasemd).[constructor](#constructor)

##### Defined in

[viewer/packages/tools/src/HtmlOverlay/HtmlOverlayTool.ts:161](https://github.com/cognitedata/reveal/blob/d2769861/viewer/packages/tools/src/HtmlOverlay/HtmlOverlayTool.ts#L161)

### Accessors

#### elements

 `get` **elements**(): \{ `element`: `HTMLElement` ; `position3D`: `Vector3`  }[]

Returns all added HTML elements along with their 3D positions.

##### Returns

\{ `element`: `HTMLElement` ; `position3D`: `Vector3`  }[]

##### Defined in

[viewer/packages/tools/src/HtmlOverlay/HtmlOverlayTool.ts:181](https://github.com/cognitedata/reveal/blob/d2769861/viewer/packages/tools/src/HtmlOverlay/HtmlOverlayTool.ts#L181)

### Methods

#### add

 **add**(`htmlElement`, `position3D`, `options?`): `void`

Registers a HTML overlay that will be updated on rendering.

##### Parameters

| Name | Type |
| :------ | :------ |
| `htmlElement` | `HTMLElement` |
| `position3D` | `Vector3` |
| `options` | [HtmlOverlayOptions](#htmloverlayoptions) |

##### Returns

`void`

##### Defined in

[viewer/packages/tools/src/HtmlOverlay/HtmlOverlayTool.ts:205](https://github.com/cognitedata/reveal/blob/d2769861/viewer/packages/tools/src/HtmlOverlay/HtmlOverlayTool.ts#L205)

___

#### clear

 **clear**(): `void`

Removes all attached HTML overlay elements.

##### Returns

`void`

##### Defined in

[viewer/packages/tools/src/HtmlOverlay/HtmlOverlayTool.ts:253](https://github.com/cognitedata/reveal/blob/d2769861/viewer/packages/tools/src/HtmlOverlay/HtmlOverlayTool.ts#L253)

___

#### dispose

 **dispose**(): `void`

Removes all elements and detaches from the viewer.

**`override`**

##### Returns

`void`

##### Overrides

[Cognite3DViewerToolBase](#classes_cognite_reveal_toolscognite3dviewertoolbasemd).[dispose](#dispose)

##### Defined in

[viewer/packages/tools/src/HtmlOverlay/HtmlOverlayTool.ts:191](https://github.com/cognitedata/reveal/blob/d2769861/viewer/packages/tools/src/HtmlOverlay/HtmlOverlayTool.ts#L191)

___

#### forceUpdate

 **forceUpdate**(): `void`

Updates positions of all overlays. This is automatically managed and there
shouldn't be any reason to trigger this unless the attached elements are
modified externally.

Calling this function often might cause degraded performance.

##### Returns

`void`

##### Defined in

[viewer/packages/tools/src/HtmlOverlay/HtmlOverlayTool.ts:268](https://github.com/cognitedata/reveal/blob/d2769861/viewer/packages/tools/src/HtmlOverlay/HtmlOverlayTool.ts#L268)

___

#### off

 **off**(`event`, `handler`): `void`

Unregisters an event handler for the 'disposed'-event.

##### Parameters

| Name | Type |
| :------ | :------ |
| `event` | ``"disposed"`` |
| `handler` | () => `void` |

##### Returns

`void`

##### Inherited from

[Cognite3DViewerToolBase](#classes_cognite_reveal_toolscognite3dviewertoolbasemd).[off](#off)

##### Defined in

[viewer/packages/tools/src/Cognite3DViewerToolBase.ts:37](https://github.com/cognitedata/reveal/blob/d2769861/viewer/packages/tools/src/Cognite3DViewerToolBase.ts#L37)

___

#### remove

 **remove**(`htmlElement`): `void`

Removes a overlay and removes it from the DOM.

##### Parameters

| Name | Type |
| :------ | :------ |
| `htmlElement` | `HTMLElement` |

##### Returns

`void`

##### Defined in

[viewer/packages/tools/src/HtmlOverlay/HtmlOverlayTool.ts:241](https://github.com/cognitedata/reveal/blob/d2769861/viewer/packages/tools/src/HtmlOverlay/HtmlOverlayTool.ts#L241)


<a name="classes_cognite_reveal_toolskeyframemd"></a>

[@cognite/reveal](#readmemd) / [Modules](#modulesmd) / [@cognite/reveal/tools](#modules_cognite_reveal_toolsmd) / Keyframe

## Class: Keyframe

[@cognite/reveal/tools](#modules_cognite_reveal_toolsmd).Keyframe

Timeline Key Frames contains parameters to access Nodes, Styles for the Timeline

### Table of contents

#### Constructors

- [constructor](#constructor)

#### Methods

- [activate](#activate)
- [assignStyledNodeCollection](#assignstylednodecollection)
- [deactivate](#deactivate)
- [getKeyframeDate](#getkeyframedate)
- [unassignStyledNodeCollection](#unassignstylednodecollection)

### Constructors

#### constructor

 **new Keyframe**(`model`, `date`)

##### Parameters

| Name | Type |
| :------ | :------ |
| `model` | [Cognite3DModel](#classes_cognite_revealcognite3dmodelmd) |
| `date` | `Date` |

##### Defined in

[viewer/packages/tools/src/Timeline/Keyframe.ts:15](https://github.com/cognitedata/reveal/blob/d2769861/viewer/packages/tools/src/Timeline/Keyframe.ts#L15)

### Methods

#### activate

 **activate**(): `void`

Assigns the styles for the node set for the model for this Keyframe

##### Returns

`void`

##### Defined in

[viewer/packages/tools/src/Timeline/Keyframe.ts:33](https://github.com/cognitedata/reveal/blob/d2769861/viewer/packages/tools/src/Timeline/Keyframe.ts#L33)

___

#### assignStyledNodeCollection

 **assignStyledNodeCollection**(`nodeCollection`, `nodeAppearance`): `void`

Add node & style to the collection

##### Parameters

| Name | Type | Description |
| :------ | :------ | :------ |
| `nodeCollection` | [NodeCollectionBase](#classes_cognite_revealnodecollectionbasemd) | Node set to apply the Styles |
| `nodeAppearance` | [NodeAppearance](#nodeappearance) | Style to assign to the node collection |

##### Returns

`void`

##### Defined in

[viewer/packages/tools/src/Timeline/Keyframe.ts:53](https://github.com/cognitedata/reveal/blob/d2769861/viewer/packages/tools/src/Timeline/Keyframe.ts#L53)

___

#### deactivate

 **deactivate**(): `void`

Removes the style for the model

##### Returns

`void`

##### Defined in

[viewer/packages/tools/src/Timeline/Keyframe.ts:42](https://github.com/cognitedata/reveal/blob/d2769861/viewer/packages/tools/src/Timeline/Keyframe.ts#L42)

___

#### getKeyframeDate

 **getKeyframeDate**(): `Date`

Get date of the Keyframe

##### Returns

`Date`

date

##### Defined in

[viewer/packages/tools/src/Timeline/Keyframe.ts:26](https://github.com/cognitedata/reveal/blob/d2769861/viewer/packages/tools/src/Timeline/Keyframe.ts#L26)

___

#### unassignStyledNodeCollection

 **unassignStyledNodeCollection**(`nodeCollection`): `void`

Remove Node & Style for this keyframe's nodeCollection and nodeAppearance

##### Parameters

| Name | Type | Description |
| :------ | :------ | :------ |
| `nodeCollection` | [NodeCollectionBase](#classes_cognite_revealnodecollectionbasemd) | Nodes to be unassign from node collection |

##### Returns

`void`

##### Defined in

[viewer/packages/tools/src/Timeline/Keyframe.ts:70](https://github.com/cognitedata/reveal/blob/d2769861/viewer/packages/tools/src/Timeline/Keyframe.ts#L70)


<a name="classes_cognite_reveal_toolstimelinetoolmd"></a>

[@cognite/reveal](#readmemd) / [Modules](#modulesmd) / [@cognite/reveal/tools](#modules_cognite_reveal_toolsmd) / TimelineTool

## Class: TimelineTool

[@cognite/reveal/tools](#modules_cognite_reveal_toolsmd).TimelineTool

Tool to applying styles to nodes based on date to play them over in Timeline

### Hierarchy

- [Cognite3DViewerToolBase](#classes_cognite_reveal_toolscognite3dviewertoolbasemd)

   **TimelineTool**

### Table of contents

#### Constructors

- [constructor](#constructor)

#### Methods

- [createKeyframe](#createkeyframe)
- [dispose](#dispose)
- [getAllKeyframes](#getallkeyframes)
- [getKeyframeByDate](#getkeyframebydate)
- [off](#off)
- [pause](#pause)
- [play](#play)
- [removeKeyframe](#removekeyframe)
- [removeKeyframeByDate](#removekeyframebydate)
- [resume](#resume)
- [stop](#stop)
- [subscribe](#subscribe)
- [unsubscribe](#unsubscribe)

### Constructors

#### constructor

 **new TimelineTool**(`cadModel`)

##### Parameters

| Name | Type |
| :------ | :------ |
| `cadModel` | [Cognite3DModel](#classes_cognite_revealcognite3dmodelmd) |

##### Overrides

[Cognite3DViewerToolBase](#classes_cognite_reveal_toolscognite3dviewertoolbasemd).[constructor](#constructor)

##### Defined in

[viewer/packages/tools/src/Timeline/TimelineTool.ts:20](https://github.com/cognitedata/reveal/blob/d2769861/viewer/packages/tools/src/Timeline/TimelineTool.ts#L20)

### Methods

#### createKeyframe

 **createKeyframe**(`date`): [Keyframe](#classes_cognite_reveal_toolskeyframemd)

Create Key frame for the Timeline

##### Parameters

| Name | Type | Description |
| :------ | :------ | :------ |
| `date` | `Date` | date value by Date.now() since January 1, 1970 |

##### Returns

[Keyframe](#classes_cognite_reveal_toolskeyframemd)

##### Defined in

[viewer/packages/tools/src/Timeline/TimelineTool.ts:63](https://github.com/cognitedata/reveal/blob/d2769861/viewer/packages/tools/src/Timeline/TimelineTool.ts#L63)

___

#### dispose

 **dispose**(): `void`

##### Returns

`void`

##### Overrides

[Cognite3DViewerToolBase](#classes_cognite_reveal_toolscognite3dviewertoolbasemd).[dispose](#dispose)

##### Defined in

[viewer/packages/tools/src/Timeline/TimelineTool.ts:184](https://github.com/cognitedata/reveal/blob/d2769861/viewer/packages/tools/src/Timeline/TimelineTool.ts#L184)

___

#### getAllKeyframes

 **getAllKeyframes**(): [Keyframe](#classes_cognite_reveal_toolskeyframemd)[]

Provides all Keyframes in the Timeline

##### Returns

[Keyframe](#classes_cognite_reveal_toolskeyframemd)[]

All Keyframes in Timeline

##### Defined in

[viewer/packages/tools/src/Timeline/TimelineTool.ts:180](https://github.com/cognitedata/reveal/blob/d2769861/viewer/packages/tools/src/Timeline/TimelineTool.ts#L180)

___

#### getKeyframeByDate

 **getKeyframeByDate**(`date`): [Keyframe](#classes_cognite_reveal_toolskeyframemd)

Returns the keyframe at the date given, or undefined if not found.

##### Parameters

| Name | Type |
| :------ | :------ |
| `date` | `Date` |

##### Returns

[Keyframe](#classes_cognite_reveal_toolskeyframemd)

##### Defined in

[viewer/packages/tools/src/Timeline/TimelineTool.ts:76](https://github.com/cognitedata/reveal/blob/d2769861/viewer/packages/tools/src/Timeline/TimelineTool.ts#L76)

___

#### off

 **off**(`event`, `handler`): `void`

Unregisters an event handler for the 'disposed'-event.

##### Parameters

| Name | Type |
| :------ | :------ |
| `event` | ``"disposed"`` |
| `handler` | () => `void` |

##### Returns

`void`

##### Inherited from

[Cognite3DViewerToolBase](#classes_cognite_reveal_toolscognite3dviewertoolbasemd).[off](#off)

##### Defined in

[viewer/packages/tools/src/Cognite3DViewerToolBase.ts:37](https://github.com/cognitedata/reveal/blob/d2769861/viewer/packages/tools/src/Cognite3DViewerToolBase.ts#L37)

___

#### pause

 **pause**(): `void`

Pause any ongoing playback

##### Returns

`void`

##### Defined in

[viewer/packages/tools/src/Timeline/TimelineTool.ts:161](https://github.com/cognitedata/reveal/blob/d2769861/viewer/packages/tools/src/Timeline/TimelineTool.ts#L161)

___

#### play

 **play**(`startDate`, `endDate`, `totalDurationInMilliSeconds`): `void`

Starts playback of Timeline

##### Parameters

| Name | Type | Description |
| :------ | :------ | :------ |
| `startDate` | `Date` | Keyframe date to start the Playback of Keyframes |
| `endDate` | `Date` | Keyframe date to stop the Playback of Keyframes |
| `totalDurationInMilliSeconds` | `number` | Number of milliseconds for all Keyframe within startDate & endDate to be rendered |

##### Returns

`void`

##### Defined in

[viewer/packages/tools/src/Timeline/TimelineTool.ts:110](https://github.com/cognitedata/reveal/blob/d2769861/viewer/packages/tools/src/Timeline/TimelineTool.ts#L110)

___

#### removeKeyframe

 **removeKeyframe**(`keyframe`): `void`

Removes the Keyframe from the timeline. Does nothing if the keyframe isn't part of the timeline.

##### Parameters

| Name | Type | Description |
| :------ | :------ | :------ |
| `keyframe` | [Keyframe](#classes_cognite_reveal_toolskeyframemd) | Keyframe to be removed from the timeline |

##### Returns

`void`

##### Defined in

[viewer/packages/tools/src/Timeline/TimelineTool.ts:84](https://github.com/cognitedata/reveal/blob/d2769861/viewer/packages/tools/src/Timeline/TimelineTool.ts#L84)

___

#### removeKeyframeByDate

 **removeKeyframeByDate**(`date`): `void`

Removes the Keyframe from the Timeline

##### Parameters

| Name | Type | Description |
| :------ | :------ | :------ |
| `date` | `Date` | Date of the Keyframe to be removed from the Timeline |

##### Returns

`void`

##### Defined in

[viewer/packages/tools/src/Timeline/TimelineTool.ts:96](https://github.com/cognitedata/reveal/blob/d2769861/viewer/packages/tools/src/Timeline/TimelineTool.ts#L96)

___

#### resume

 **resume**(): `void`

Resume any paused playback

##### Returns

`void`

##### Defined in

[viewer/packages/tools/src/Timeline/TimelineTool.ts:170](https://github.com/cognitedata/reveal/blob/d2769861/viewer/packages/tools/src/Timeline/TimelineTool.ts#L170)

___

#### stop

 **stop**(): `void`

Stops any ongoing playback

##### Returns

`void`

##### Defined in

[viewer/packages/tools/src/Timeline/TimelineTool.ts:151](https://github.com/cognitedata/reveal/blob/d2769861/viewer/packages/tools/src/Timeline/TimelineTool.ts#L151)

___

#### subscribe

 **subscribe**(`event`, `listener`): `void`

Subscribe to the Date changed event

##### Parameters

| Name | Type | Description |
| :------ | :------ | :------ |
| `event` | ``"dateChanged"`` | `dateChanged` event |
| `listener` | [TimelineDateUpdateDelegate](#timelinedateupdatedelegate) | Listen to Timeline date Update during Playback |

##### Returns

`void`

##### Defined in

[viewer/packages/tools/src/Timeline/TimelineTool.ts:34](https://github.com/cognitedata/reveal/blob/d2769861/viewer/packages/tools/src/Timeline/TimelineTool.ts#L34)

___

#### unsubscribe

 **unsubscribe**(`event`, `listener`): `void`

Unsubscribe to the Date changed event

##### Parameters

| Name | Type | Description |
| :------ | :------ | :------ |
| `event` | ``"dateChanged"`` | `dateChanged` event |
| `listener` | [TimelineDateUpdateDelegate](#timelinedateupdatedelegate) | Remove Listen to Timeline date Update |

##### Returns

`void`

##### Defined in

[viewer/packages/tools/src/Timeline/TimelineTool.ts:49](https://github.com/cognitedata/reveal/blob/d2769861/viewer/packages/tools/src/Timeline/TimelineTool.ts#L49)

# Enums


<a name="enums_cognite_revealnodeoutlinecolormd"></a>

[@cognite/reveal](#readmemd) / [Modules](#modulesmd) / [@cognite/reveal](#modules_cognite_revealmd) / NodeOutlineColor

## Enumeration: NodeOutlineColor

[@cognite/reveal](#modules_cognite_revealmd).NodeOutlineColor

### Table of contents

#### Enumeration members

- [Black](#black)
- [Blue](#blue)
- [Cyan](#cyan)
- [Green](#green)
- [NoOutline](#nooutline)
- [Orange](#orange)
- [Red](#red)
- [White](#white)

### Enumeration members

#### Black

 **Black** = 2

##### Defined in

[viewer/packages/cad-styling/src/NodeAppearance.ts:8](https://github.com/cognitedata/reveal/blob/d2769861/viewer/packages/cad-styling/src/NodeAppearance.ts#L8)

___

#### Blue

 **Blue** = 4

##### Defined in

[viewer/packages/cad-styling/src/NodeAppearance.ts:10](https://github.com/cognitedata/reveal/blob/d2769861/viewer/packages/cad-styling/src/NodeAppearance.ts#L10)

___

#### Cyan

 **Cyan** = 3

##### Defined in

[viewer/packages/cad-styling/src/NodeAppearance.ts:9](https://github.com/cognitedata/reveal/blob/d2769861/viewer/packages/cad-styling/src/NodeAppearance.ts#L9)

___

#### Green

 **Green** = 5

##### Defined in

[viewer/packages/cad-styling/src/NodeAppearance.ts:11](https://github.com/cognitedata/reveal/blob/d2769861/viewer/packages/cad-styling/src/NodeAppearance.ts#L11)

___

#### NoOutline

 **NoOutline** = 0

##### Defined in

[viewer/packages/cad-styling/src/NodeAppearance.ts:6](https://github.com/cognitedata/reveal/blob/d2769861/viewer/packages/cad-styling/src/NodeAppearance.ts#L6)

___

#### Orange

 **Orange** = 7

##### Defined in

[viewer/packages/cad-styling/src/NodeAppearance.ts:13](https://github.com/cognitedata/reveal/blob/d2769861/viewer/packages/cad-styling/src/NodeAppearance.ts#L13)

___

#### Red

 **Red** = 6

##### Defined in

[viewer/packages/cad-styling/src/NodeAppearance.ts:12](https://github.com/cognitedata/reveal/blob/d2769861/viewer/packages/cad-styling/src/NodeAppearance.ts#L12)

___

#### White

 **White** = 1

##### Defined in

[viewer/packages/cad-styling/src/NodeAppearance.ts:7](https://github.com/cognitedata/reveal/blob/d2769861/viewer/packages/cad-styling/src/NodeAppearance.ts#L7)


<a name="enums_cognite_revealpotreepointcolortypemd"></a>

[@cognite/reveal](#readmemd) / [Modules](#modulesmd) / [@cognite/reveal](#modules_cognite_revealmd) / PotreePointColorType

## Enumeration: PotreePointColorType

[@cognite/reveal](#modules_cognite_revealmd).PotreePointColorType

### Table of contents

#### Enumeration members

- [Classification](#classification)
- [Depth](#depth)
- [Height](#height)
- [Intensity](#intensity)
- [LevelOfDetail](#levelofdetail)
- [PointIndex](#pointindex)
- [Rgb](#rgb)

### Enumeration members

#### Classification

 **Classification**

Indicates whether a point is part of some class of objects.
Classes are mapped to colors.

##### Defined in

[viewer/core/src/datamodels/pointcloud/types.ts:35](https://github.com/cognitedata/reveal/blob/d2769861/viewer/core/src/datamodels/pointcloud/types.ts#L35)

___

#### Depth

 **Depth**

Shows the distance from current camera with color gradient

##### Defined in

[viewer/core/src/datamodels/pointcloud/types.ts:17](https://github.com/cognitedata/reveal/blob/d2769861/viewer/core/src/datamodels/pointcloud/types.ts#L17)

___

#### Height

 **Height**

Height, or elevation, mapped to a color with a gradient.

##### Defined in

[viewer/core/src/datamodels/pointcloud/types.ts:20](https://github.com/cognitedata/reveal/blob/d2769861/viewer/core/src/datamodels/pointcloud/types.ts#L20)

___

#### Intensity

 **Intensity**

Indicates the strength of the backscattered signal in a laser scan.

##### Defined in

[viewer/core/src/datamodels/pointcloud/types.ts:38](https://github.com/cognitedata/reveal/blob/d2769861/viewer/core/src/datamodels/pointcloud/types.ts#L38)

___

#### LevelOfDetail

 **LevelOfDetail**

Calculated during rendering.
It is equal to the level of the most detailed visible node in a region

##### Defined in

[viewer/core/src/datamodels/pointcloud/types.ts:29](https://github.com/cognitedata/reveal/blob/d2769861/viewer/core/src/datamodels/pointcloud/types.ts#L29)

___

#### PointIndex

 **PointIndex**

Specifies the order in which points were captured from a single beam.

##### Defined in

[viewer/core/src/datamodels/pointcloud/types.ts:23](https://github.com/cognitedata/reveal/blob/d2769861/viewer/core/src/datamodels/pointcloud/types.ts#L23)

___

#### Rgb

 **Rgb**

Describes the observed real-world color of a point.

##### Defined in

[viewer/core/src/datamodels/pointcloud/types.ts:14](https://github.com/cognitedata/reveal/blob/d2769861/viewer/core/src/datamodels/pointcloud/types.ts#L14)


<a name="enums_cognite_revealpotreepointshapemd"></a>

[@cognite/reveal](#readmemd) / [Modules](#modulesmd) / [@cognite/reveal](#modules_cognite_revealmd) / PotreePointShape

## Enumeration: PotreePointShape

[@cognite/reveal](#modules_cognite_revealmd).PotreePointShape

### Table of contents

#### Enumeration members

- [Circle](#circle)
- [Square](#square)

### Enumeration members

#### Circle

 **Circle**

##### Defined in

[viewer/core/src/datamodels/pointcloud/types.ts:8](https://github.com/cognitedata/reveal/blob/d2769861/viewer/core/src/datamodels/pointcloud/types.ts#L8)

___

#### Square

 **Square**

##### Defined in

[viewer/core/src/datamodels/pointcloud/types.ts:9](https://github.com/cognitedata/reveal/blob/d2769861/viewer/core/src/datamodels/pointcloud/types.ts#L9)


<a name="enums_cognite_revealpotreepointsizetypemd"></a>

[@cognite/reveal](#readmemd) / [Modules](#modulesmd) / [@cognite/reveal](#modules_cognite_revealmd) / PotreePointSizeType

## Enumeration: PotreePointSizeType

[@cognite/reveal](#modules_cognite_revealmd).PotreePointSizeType

### Table of contents

#### Enumeration members

- [Adaptive](#adaptive)
- [Fixed](#fixed)

### Enumeration members

#### Adaptive

 **Adaptive**

##### Defined in

[viewer/core/src/datamodels/pointcloud/types.ts:42](https://github.com/cognitedata/reveal/blob/d2769861/viewer/core/src/datamodels/pointcloud/types.ts#L42)

___

#### Fixed

 **Fixed**

##### Defined in

[viewer/core/src/datamodels/pointcloud/types.ts:43](https://github.com/cognitedata/reveal/blob/d2769861/viewer/core/src/datamodels/pointcloud/types.ts#L43)


<a name="enums_cognite_revealwellknownasprspointclasscodesmd"></a>

[@cognite/reveal](#readmemd) / [Modules](#modulesmd) / [@cognite/reveal](#modules_cognite_revealmd) / WellKnownAsprsPointClassCodes

## Enumeration: WellKnownAsprsPointClassCodes

[@cognite/reveal](#modules_cognite_revealmd).WellKnownAsprsPointClassCodes

ASPRS well known point class types.

**`see`** [http://www.asprs.org/wp-content/uploads/2019/03/LAS_1_4_r14.pdf](http://www.asprs.org/wp-content/uploads/2019/03/LAS_1_4_r14.pdf) (page 30)

### Table of contents

#### Enumeration members

- [BridgeDeck](#bridgedeck)
- [Building](#building)
- [Created](#created)
- [Default](#default)
- [Ground](#ground)
- [HighNoise](#highnoise)
- [HighVegetation](#highvegetation)
- [IgnoredGround](#ignoredground)
- [LowPoint](#lowpoint)
- [LowVegetation](#lowvegetation)
- [MedVegetation](#medvegetation)
- [OverheadStructure](#overheadstructure)
- [Rail](#rail)
- [ReservedOrBridgeDeck](#reservedorbridgedeck)
- [ReservedOrHighPoint](#reservedorhighpoint)
- [RoadSurface](#roadsurface)
- [Snow](#snow)
- [TemporalExclusion](#temporalexclusion)
- [TransmissionTower](#transmissiontower)
- [Unclassified](#unclassified)
- [UserDefinableOffset](#userdefinableoffset)
- [Water](#water)
- [WireConductor](#wireconductor)
- [WireGuard](#wireguard)
- [WireStructureConnector](#wirestructureconnector)

### Enumeration members

#### BridgeDeck

 **BridgeDeck** = 17

Note that [WellKnownAsprsPointClassCodes.ReservedOrBridgeDeck](#reservedorbridgedeck) has been used
historically.

##### Defined in

[viewer/core/src/datamodels/pointcloud/types.ts:100](https://github.com/cognitedata/reveal/blob/d2769861/viewer/core/src/datamodels/pointcloud/types.ts#L100)

___

#### Building

 **Building** = 6

##### Defined in

[viewer/core/src/datamodels/pointcloud/types.ts:65](https://github.com/cognitedata/reveal/blob/d2769861/viewer/core/src/datamodels/pointcloud/types.ts#L65)

___

#### Created

 **Created** = 0

Created, never classified.

##### Defined in

[viewer/core/src/datamodels/pointcloud/types.ts:59](https://github.com/cognitedata/reveal/blob/d2769861/viewer/core/src/datamodels/pointcloud/types.ts#L59)

___

#### Default

 **Default** = -1

Special value for all other classes. Some point in Potree might be in this class

##### Defined in

[viewer/core/src/datamodels/pointcloud/types.ts:55](https://github.com/cognitedata/reveal/blob/d2769861/viewer/core/src/datamodels/pointcloud/types.ts#L55)

___

#### Ground

 **Ground** = 2

##### Defined in

[viewer/core/src/datamodels/pointcloud/types.ts:61](https://github.com/cognitedata/reveal/blob/d2769861/viewer/core/src/datamodels/pointcloud/types.ts#L61)

___

#### HighNoise

 **HighNoise** = 18

High point, or "high noise".
Note that [WellKnownAsprsPointClassCodes.ReservedOrHighPoint](#reservedorhighpoint) has been used
historically.

##### Defined in

[viewer/core/src/datamodels/pointcloud/types.ts:106](https://github.com/cognitedata/reveal/blob/d2769861/viewer/core/src/datamodels/pointcloud/types.ts#L106)

___

#### HighVegetation

 **HighVegetation** = 5

##### Defined in

[viewer/core/src/datamodels/pointcloud/types.ts:64](https://github.com/cognitedata/reveal/blob/d2769861/viewer/core/src/datamodels/pointcloud/types.ts#L64)

___

#### IgnoredGround

 **IgnoredGround** = 20

E.g. breakline proximity.

##### Defined in

[viewer/core/src/datamodels/pointcloud/types.ts:114](https://github.com/cognitedata/reveal/blob/d2769861/viewer/core/src/datamodels/pointcloud/types.ts#L114)

___

#### LowPoint

 **LowPoint** = 7

Low point, typically "low noise".

##### Defined in

[viewer/core/src/datamodels/pointcloud/types.ts:69](https://github.com/cognitedata/reveal/blob/d2769861/viewer/core/src/datamodels/pointcloud/types.ts#L69)

___

#### LowVegetation

 **LowVegetation** = 3

##### Defined in

[viewer/core/src/datamodels/pointcloud/types.ts:62](https://github.com/cognitedata/reveal/blob/d2769861/viewer/core/src/datamodels/pointcloud/types.ts#L62)

___

#### MedVegetation

 **MedVegetation** = 4

##### Defined in

[viewer/core/src/datamodels/pointcloud/types.ts:63](https://github.com/cognitedata/reveal/blob/d2769861/viewer/core/src/datamodels/pointcloud/types.ts#L63)

___

#### OverheadStructure

 **OverheadStructure** = 19

E.g. conveyors, mining equipment, traffic lights.

##### Defined in

[viewer/core/src/datamodels/pointcloud/types.ts:110](https://github.com/cognitedata/reveal/blob/d2769861/viewer/core/src/datamodels/pointcloud/types.ts#L110)

___

#### Rail

 **Rail** = 10

##### Defined in

[viewer/core/src/datamodels/pointcloud/types.ts:76](https://github.com/cognitedata/reveal/blob/d2769861/viewer/core/src/datamodels/pointcloud/types.ts#L76)

___

#### ReservedOrBridgeDeck

 **ReservedOrBridgeDeck** = 12

In previous revisions of LAS this was "Bridge deck", but in more recent
revisions this value is reserved.

##### Defined in

[viewer/core/src/datamodels/pointcloud/types.ts:82](https://github.com/cognitedata/reveal/blob/d2769861/viewer/core/src/datamodels/pointcloud/types.ts#L82)

___

#### ReservedOrHighPoint

 **ReservedOrHighPoint** = 8

In previous revisions of LAS this was High point ("high noise"), in more recent
revisions this value is reserved.

##### Defined in

[viewer/core/src/datamodels/pointcloud/types.ts:74](https://github.com/cognitedata/reveal/blob/d2769861/viewer/core/src/datamodels/pointcloud/types.ts#L74)

___

#### RoadSurface

 **RoadSurface** = 11

##### Defined in

[viewer/core/src/datamodels/pointcloud/types.ts:77](https://github.com/cognitedata/reveal/blob/d2769861/viewer/core/src/datamodels/pointcloud/types.ts#L77)

___

#### Snow

 **Snow** = 21

##### Defined in

[viewer/core/src/datamodels/pointcloud/types.ts:115](https://github.com/cognitedata/reveal/blob/d2769861/viewer/core/src/datamodels/pointcloud/types.ts#L115)

___

#### TemporalExclusion

 **TemporalExclusion** = 22

Features excluded due to changes over time between data sources  e.g., water
levels, landslides, permafrost

##### Defined in

[viewer/core/src/datamodels/pointcloud/types.ts:120](https://github.com/cognitedata/reveal/blob/d2769861/viewer/core/src/datamodels/pointcloud/types.ts#L120)

___

#### TransmissionTower

 **TransmissionTower** = 15

##### Defined in

[viewer/core/src/datamodels/pointcloud/types.ts:91](https://github.com/cognitedata/reveal/blob/d2769861/viewer/core/src/datamodels/pointcloud/types.ts#L91)

___

#### Unclassified

 **Unclassified** = 1

##### Defined in

[viewer/core/src/datamodels/pointcloud/types.ts:60](https://github.com/cognitedata/reveal/blob/d2769861/viewer/core/src/datamodels/pointcloud/types.ts#L60)

___

#### UserDefinableOffset

 **UserDefinableOffset** = 64

First user definable class identifier (64).
Values up to and including 63 are reserved

##### Defined in

[viewer/core/src/datamodels/pointcloud/types.ts:126](https://github.com/cognitedata/reveal/blob/d2769861/viewer/core/src/datamodels/pointcloud/types.ts#L126)

___

#### Water

 **Water** = 9

##### Defined in

[viewer/core/src/datamodels/pointcloud/types.ts:75](https://github.com/cognitedata/reveal/blob/d2769861/viewer/core/src/datamodels/pointcloud/types.ts#L75)

___

#### WireConductor

 **WireConductor** = 14

Wire conductor (phase).

##### Defined in

[viewer/core/src/datamodels/pointcloud/types.ts:90](https://github.com/cognitedata/reveal/blob/d2769861/viewer/core/src/datamodels/pointcloud/types.ts#L90)

___

#### WireGuard

 **WireGuard** = 13

Wire guard shield.

##### Defined in

[viewer/core/src/datamodels/pointcloud/types.ts:86](https://github.com/cognitedata/reveal/blob/d2769861/viewer/core/src/datamodels/pointcloud/types.ts#L86)

___

#### WireStructureConnector

 **WireStructureConnector** = 16

Wire-structure connector (e.g. insulator).

##### Defined in

[viewer/core/src/datamodels/pointcloud/types.ts:95](https://github.com/cognitedata/reveal/blob/d2769861/viewer/core/src/datamodels/pointcloud/types.ts#L95)


<a name="enums_cognite_reveal_toolsbingmapimageformatmd"></a>

[@cognite/reveal](#readmemd) / [Modules](#modulesmd) / [@cognite/reveal/tools](#modules_cognite_reveal_toolsmd) / BingMapImageFormat

## Enumeration: BingMapImageFormat

[@cognite/reveal/tools](#modules_cognite_reveal_toolsmd).BingMapImageFormat

Bing Map Tile Image formats

### Table of contents

#### Enumeration members

- [GIF](#gif)
- [JPEG](#jpeg)
- [PNG](#png)

### Enumeration members

#### GIF

 **GIF** = "gif"

##### Defined in

[viewer/packages/tools/src/Geomap/MapConfig.ts:87](https://github.com/cognitedata/reveal/blob/d2769861/viewer/packages/tools/src/Geomap/MapConfig.ts#L87)

___

#### JPEG

 **JPEG** = "jpeg"

##### Defined in

[viewer/packages/tools/src/Geomap/MapConfig.ts:88](https://github.com/cognitedata/reveal/blob/d2769861/viewer/packages/tools/src/Geomap/MapConfig.ts#L88)

___

#### PNG

 **PNG** = "png"

##### Defined in

[viewer/packages/tools/src/Geomap/MapConfig.ts:89](https://github.com/cognitedata/reveal/blob/d2769861/viewer/packages/tools/src/Geomap/MapConfig.ts#L89)


<a name="enums_cognite_reveal_toolsbingmaptypemd"></a>

[@cognite/reveal](#readmemd) / [Modules](#modulesmd) / [@cognite/reveal/tools](#modules_cognite_reveal_toolsmd) / BingMapType

## Enumeration: BingMapType

[@cognite/reveal/tools](#modules_cognite_reveal_toolsmd).BingMapType

Bing Map View (aerial, road, bird's eye view of the map)

### Table of contents

#### Enumeration members

- [Aerial](#aerial)
- [Aerial\_Labels](#aerial_labels)
- [Oblique](#oblique)
- [Oblique\_Labels](#oblique_labels)
- [Road](#road)

### Enumeration members

#### Aerial

 **Aerial** = "a"

##### Defined in

[viewer/packages/tools/src/Geomap/MapConfig.ts:76](https://github.com/cognitedata/reveal/blob/d2769861/viewer/packages/tools/src/Geomap/MapConfig.ts#L76)

___

#### Aerial\_Labels

 **Aerial\_Labels** = "h"

##### Defined in

[viewer/packages/tools/src/Geomap/MapConfig.ts:78](https://github.com/cognitedata/reveal/blob/d2769861/viewer/packages/tools/src/Geomap/MapConfig.ts#L78)

___

#### Oblique

 **Oblique** = "o"

##### Defined in

[viewer/packages/tools/src/Geomap/MapConfig.ts:79](https://github.com/cognitedata/reveal/blob/d2769861/viewer/packages/tools/src/Geomap/MapConfig.ts#L79)

___

#### Oblique\_Labels

 **Oblique\_Labels** = "b"

##### Defined in

[viewer/packages/tools/src/Geomap/MapConfig.ts:80](https://github.com/cognitedata/reveal/blob/d2769861/viewer/packages/tools/src/Geomap/MapConfig.ts#L80)

___

#### Road

 **Road** = "r"

##### Defined in

[viewer/packages/tools/src/Geomap/MapConfig.ts:77](https://github.com/cognitedata/reveal/blob/d2769861/viewer/packages/tools/src/Geomap/MapConfig.ts#L77)


<a name="enums_cognite_reveal_toolscornermd"></a>

[@cognite/reveal](#readmemd) / [Modules](#modulesmd) / [@cognite/reveal/tools](#modules_cognite_reveal_toolsmd) / Corner

## Enumeration: Corner

[@cognite/reveal/tools](#modules_cognite_reveal_toolsmd).Corner

A corner of the viewer.

### Table of contents

#### Enumeration members

- [BottomLeft](#bottomleft)
- [BottomRight](#bottomright)
- [TopLeft](#topleft)
- [TopRight](#topright)

### Enumeration members

#### BottomLeft

 **BottomLeft** = 2

##### Defined in

[viewer/packages/tools/src/AxisView/types.ts:100](https://github.com/cognitedata/reveal/blob/d2769861/viewer/packages/tools/src/AxisView/types.ts#L100)

___

#### BottomRight

 **BottomRight** = 3

##### Defined in

[viewer/packages/tools/src/AxisView/types.ts:101](https://github.com/cognitedata/reveal/blob/d2769861/viewer/packages/tools/src/AxisView/types.ts#L101)

___

#### TopLeft

 **TopLeft** = 1

##### Defined in

[viewer/packages/tools/src/AxisView/types.ts:99](https://github.com/cognitedata/reveal/blob/d2769861/viewer/packages/tools/src/AxisView/types.ts#L99)

___

#### TopRight

 **TopRight** = 0

##### Defined in

[viewer/packages/tools/src/AxisView/types.ts:98](https://github.com/cognitedata/reveal/blob/d2769861/viewer/packages/tools/src/AxisView/types.ts#L98)


<a name="enums_cognite_reveal_toolsheremapimageformatmd"></a>

[@cognite/reveal](#readmemd) / [Modules](#modulesmd) / [@cognite/reveal/tools](#modules_cognite_reveal_toolsmd) / HereMapImageFormat

## Enumeration: HereMapImageFormat

[@cognite/reveal/tools](#modules_cognite_reveal_toolsmd).HereMapImageFormat

Here Map Tiles Image Format

### Table of contents

#### Enumeration members

- [JPG](#jpg)
- [PNG](#png)
- [PNG8](#png8)

### Enumeration members

#### JPG

 **JPG** = "jpg"

##### Defined in

[viewer/packages/tools/src/Geomap/MapConfig.ts:118](https://github.com/cognitedata/reveal/blob/d2769861/viewer/packages/tools/src/Geomap/MapConfig.ts#L118)

___

#### PNG

 **PNG** = "png"

##### Defined in

[viewer/packages/tools/src/Geomap/MapConfig.ts:116](https://github.com/cognitedata/reveal/blob/d2769861/viewer/packages/tools/src/Geomap/MapConfig.ts#L116)

___

#### PNG8

 **PNG8** = "png8"

##### Defined in

[viewer/packages/tools/src/Geomap/MapConfig.ts:117](https://github.com/cognitedata/reveal/blob/d2769861/viewer/packages/tools/src/Geomap/MapConfig.ts#L117)


<a name="enums_cognite_reveal_toolsheremapschememd"></a>

[@cognite/reveal](#readmemd) / [Modules](#modulesmd) / [@cognite/reveal/tools](#modules_cognite_reveal_toolsmd) / HereMapScheme

## Enumeration: HereMapScheme

[@cognite/reveal/tools](#modules_cognite_reveal_toolsmd).HereMapScheme

Here Map View Scheme like day, night, satellite, terrain

### Table of contents

#### Enumeration members

- [Day](#day)
- [Night](#night)
- [Satellite](#satellite)
- [Terrain](#terrain)

### Enumeration members

#### Day

 **Day** = "normal.day"

##### Defined in

[viewer/packages/tools/src/Geomap/MapConfig.ts:106](https://github.com/cognitedata/reveal/blob/d2769861/viewer/packages/tools/src/Geomap/MapConfig.ts#L106)

___

#### Night

 **Night** = "normal.night"

##### Defined in

[viewer/packages/tools/src/Geomap/MapConfig.ts:107](https://github.com/cognitedata/reveal/blob/d2769861/viewer/packages/tools/src/Geomap/MapConfig.ts#L107)

___

#### Satellite

 **Satellite** = "satellite.day"

##### Defined in

[viewer/packages/tools/src/Geomap/MapConfig.ts:109](https://github.com/cognitedata/reveal/blob/d2769861/viewer/packages/tools/src/Geomap/MapConfig.ts#L109)

___

#### Terrain

 **Terrain** = "terrain.day"

##### Defined in

[viewer/packages/tools/src/Geomap/MapConfig.ts:108](https://github.com/cognitedata/reveal/blob/d2769861/viewer/packages/tools/src/Geomap/MapConfig.ts#L108)


<a name="enums_cognite_reveal_toolsheremaptypemd"></a>

[@cognite/reveal](#readmemd) / [Modules](#modulesmd) / [@cognite/reveal/tools](#modules_cognite_reveal_toolsmd) / HereMapType

## Enumeration: HereMapType

[@cognite/reveal/tools](#modules_cognite_reveal_toolsmd).HereMapType

Here Map types

### Table of contents

#### Enumeration members

- [Aerial](#aerial)
- [Base](#base)
- [Pano](#pano)
- [Traffic](#traffic)

### Enumeration members

#### Aerial

 **Aerial** = "aerial"

##### Defined in

[viewer/packages/tools/src/Geomap/MapConfig.ts:96](https://github.com/cognitedata/reveal/blob/d2769861/viewer/packages/tools/src/Geomap/MapConfig.ts#L96)

___

#### Base

 **Base** = "base"

##### Defined in

[viewer/packages/tools/src/Geomap/MapConfig.ts:97](https://github.com/cognitedata/reveal/blob/d2769861/viewer/packages/tools/src/Geomap/MapConfig.ts#L97)

___

#### Pano

 **Pano** = "pano"

##### Defined in

[viewer/packages/tools/src/Geomap/MapConfig.ts:98](https://github.com/cognitedata/reveal/blob/d2769861/viewer/packages/tools/src/Geomap/MapConfig.ts#L98)

___

#### Traffic

 **Traffic** = "traffic"

##### Defined in

[viewer/packages/tools/src/Geomap/MapConfig.ts:99](https://github.com/cognitedata/reveal/blob/d2769861/viewer/packages/tools/src/Geomap/MapConfig.ts#L99)


<a name="enums_cognite_reveal_toolsmapboximageformatmd"></a>

[@cognite/reveal](#readmemd) / [Modules](#modulesmd) / [@cognite/reveal/tools](#modules_cognite_reveal_toolsmd) / MapboxImageFormat

## Enumeration: MapboxImageFormat

[@cognite/reveal/tools](#modules_cognite_reveal_toolsmd).MapboxImageFormat

Mapbox Map image tile format

### Table of contents

#### Enumeration members

- [JPG70](#jpg70)
- [JPG80](#jpg80)
- [JPG90](#jpg90)
- [PNG](#png)
- [PNG128](#png128)
- [PNG256](#png256)
- [PNG32](#png32)
- [PNG64](#png64)
- [PNGRAW](#pngraw)

### Enumeration members

#### JPG70

 **JPG70** = "jpg70"

##### Defined in

[viewer/packages/tools/src/Geomap/MapConfig.ts:66](https://github.com/cognitedata/reveal/blob/d2769861/viewer/packages/tools/src/Geomap/MapConfig.ts#L66)

___

#### JPG80

 **JPG80** = "jpg80"

##### Defined in

[viewer/packages/tools/src/Geomap/MapConfig.ts:67](https://github.com/cognitedata/reveal/blob/d2769861/viewer/packages/tools/src/Geomap/MapConfig.ts#L67)

___

#### JPG90

 **JPG90** = "jpg90"

##### Defined in

[viewer/packages/tools/src/Geomap/MapConfig.ts:68](https://github.com/cognitedata/reveal/blob/d2769861/viewer/packages/tools/src/Geomap/MapConfig.ts#L68)

___

#### PNG

 **PNG** = "png"

##### Defined in

[viewer/packages/tools/src/Geomap/MapConfig.ts:61](https://github.com/cognitedata/reveal/blob/d2769861/viewer/packages/tools/src/Geomap/MapConfig.ts#L61)

___

#### PNG128

 **PNG128** = "png128"

##### Defined in

[viewer/packages/tools/src/Geomap/MapConfig.ts:64](https://github.com/cognitedata/reveal/blob/d2769861/viewer/packages/tools/src/Geomap/MapConfig.ts#L64)

___

#### PNG256

 **PNG256** = "png256"

##### Defined in

[viewer/packages/tools/src/Geomap/MapConfig.ts:65](https://github.com/cognitedata/reveal/blob/d2769861/viewer/packages/tools/src/Geomap/MapConfig.ts#L65)

___

#### PNG32

 **PNG32** = "png32"

##### Defined in

[viewer/packages/tools/src/Geomap/MapConfig.ts:62](https://github.com/cognitedata/reveal/blob/d2769861/viewer/packages/tools/src/Geomap/MapConfig.ts#L62)

___

#### PNG64

 **PNG64** = "png64"

##### Defined in

[viewer/packages/tools/src/Geomap/MapConfig.ts:63](https://github.com/cognitedata/reveal/blob/d2769861/viewer/packages/tools/src/Geomap/MapConfig.ts#L63)

___

#### PNGRAW

 **PNGRAW** = "pngraw"

##### Defined in

[viewer/packages/tools/src/Geomap/MapConfig.ts:69](https://github.com/cognitedata/reveal/blob/d2769861/viewer/packages/tools/src/Geomap/MapConfig.ts#L69)


<a name="enums_cognite_reveal_toolsmapboxmodemd"></a>

[@cognite/reveal](#readmemd) / [Modules](#modulesmd) / [@cognite/reveal/tools](#modules_cognite_reveal_toolsmd) / MapboxMode

## Enumeration: MapboxMode

[@cognite/reveal/tools](#modules_cognite_reveal_toolsmd).MapboxMode

Map data for Mapbox

### Table of contents

#### Enumeration members

- [Map\_Id](#map_id)
- [Style](#style)

### Enumeration members

#### Map\_Id

 **Map\_Id** = 101

Access the map data using a map id or Tileset id. For details see https://docs.mapbox.com/help/glossary/tileset-id/

##### Defined in

[viewer/packages/tools/src/Geomap/MapConfig.ts:26](https://github.com/cognitedata/reveal/blob/d2769861/viewer/packages/tools/src/Geomap/MapConfig.ts#L26)

___

#### Style

 **Style** = 100

Access the map data using a map style. For details see https://docs.mapbox.com/api/maps/styles/

##### Defined in

[viewer/packages/tools/src/Geomap/MapConfig.ts:22](https://github.com/cognitedata/reveal/blob/d2769861/viewer/packages/tools/src/Geomap/MapConfig.ts#L22)


<a name="enums_cognite_reveal_toolsmapboxstylemd"></a>

[@cognite/reveal](#readmemd) / [Modules](#modulesmd) / [@cognite/reveal/tools](#modules_cognite_reveal_toolsmd) / MapboxStyle

## Enumeration: MapboxStyle

[@cognite/reveal/tools](#modules_cognite_reveal_toolsmd).MapboxStyle

Mapbox Map Style, these are pre-defined styles using map/tileset id, created in Mapbox Studio style editor.
This is used when MapboxMode.Style is used for mode.

### Table of contents

#### Enumeration members

- [Dark](#dark)
- [Light](#light)
- [Navigation\_Day](#navigation_day)
- [Navigation\_Guide\_Day](#navigation_guide_day)
- [Navigation\_Guide\_Night](#navigation_guide_night)
- [Navigation\_Night](#navigation_night)
- [Outdoor](#outdoor)
- [Satellite](#satellite)
- [Satellite\_Streets](#satellite_streets)
- [Streets](#streets)

### Enumeration members

#### Dark

 **Dark** = "mapbox/dark-v9"

##### Defined in

[viewer/packages/tools/src/Geomap/MapConfig.ts:37](https://github.com/cognitedata/reveal/blob/d2769861/viewer/packages/tools/src/Geomap/MapConfig.ts#L37)

___

#### Light

 **Light** = "mapbox/light-v9"

##### Defined in

[viewer/packages/tools/src/Geomap/MapConfig.ts:36](https://github.com/cognitedata/reveal/blob/d2769861/viewer/packages/tools/src/Geomap/MapConfig.ts#L36)

___

#### Navigation\_Day

 **Navigation\_Day** = "mapbox/navigation-preview-day-v4"

##### Defined in

[viewer/packages/tools/src/Geomap/MapConfig.ts:40](https://github.com/cognitedata/reveal/blob/d2769861/viewer/packages/tools/src/Geomap/MapConfig.ts#L40)

___

#### Navigation\_Guide\_Day

 **Navigation\_Guide\_Day** = "mapbox/navigation-guidance-day-v4"

##### Defined in

[viewer/packages/tools/src/Geomap/MapConfig.ts:42](https://github.com/cognitedata/reveal/blob/d2769861/viewer/packages/tools/src/Geomap/MapConfig.ts#L42)

___

#### Navigation\_Guide\_Night

 **Navigation\_Guide\_Night** = "mapbox/navigation-guidance-night-v4"

##### Defined in

[viewer/packages/tools/src/Geomap/MapConfig.ts:43](https://github.com/cognitedata/reveal/blob/d2769861/viewer/packages/tools/src/Geomap/MapConfig.ts#L43)

___

#### Navigation\_Night

 **Navigation\_Night** = "mapbox/navigation-preview-night-v4"

##### Defined in

[viewer/packages/tools/src/Geomap/MapConfig.ts:41](https://github.com/cognitedata/reveal/blob/d2769861/viewer/packages/tools/src/Geomap/MapConfig.ts#L41)

___

#### Outdoor

 **Outdoor** = "mapbox/outdoors-v10"

##### Defined in

[viewer/packages/tools/src/Geomap/MapConfig.ts:35](https://github.com/cognitedata/reveal/blob/d2769861/viewer/packages/tools/src/Geomap/MapConfig.ts#L35)

___

#### Satellite

 **Satellite** = "mapbox/satellite-v9"

##### Defined in

[viewer/packages/tools/src/Geomap/MapConfig.ts:38](https://github.com/cognitedata/reveal/blob/d2769861/viewer/packages/tools/src/Geomap/MapConfig.ts#L38)

___

#### Satellite\_Streets

 **Satellite\_Streets** = "mapbox/satellite-streets-v10"

##### Defined in

[viewer/packages/tools/src/Geomap/MapConfig.ts:39](https://github.com/cognitedata/reveal/blob/d2769861/viewer/packages/tools/src/Geomap/MapConfig.ts#L39)

___

#### Streets

 **Streets** = "mapbox/streets-v10"

##### Defined in

[viewer/packages/tools/src/Geomap/MapConfig.ts:34](https://github.com/cognitedata/reveal/blob/d2769861/viewer/packages/tools/src/Geomap/MapConfig.ts#L34)


<a name="enums_cognite_reveal_toolsmapprovidersmd"></a>

[@cognite/reveal](#readmemd) / [Modules](#modulesmd) / [@cognite/reveal/tools](#modules_cognite_reveal_toolsmd) / MapProviders

## Enumeration: MapProviders

[@cognite/reveal/tools](#modules_cognite_reveal_toolsmd).MapProviders

Supported map Providers Bing, Here & Mapbox

### Table of contents

#### Enumeration members

- [BingMap](#bingmap)
- [HereMap](#heremap)
- [MapboxMap](#mapboxmap)
- [OpenStreetMap](#openstreetmap)

### Enumeration members

#### BingMap

 **BingMap** = "BingMap"

##### Defined in

[viewer/packages/tools/src/Geomap/MapConfig.ts:9](https://github.com/cognitedata/reveal/blob/d2769861/viewer/packages/tools/src/Geomap/MapConfig.ts#L9)

___

#### HereMap

 **HereMap** = "HereMap"

##### Defined in

[viewer/packages/tools/src/Geomap/MapConfig.ts:10](https://github.com/cognitedata/reveal/blob/d2769861/viewer/packages/tools/src/Geomap/MapConfig.ts#L10)

___

#### MapboxMap

 **MapboxMap** = "MapboxMap"

##### Defined in

[viewer/packages/tools/src/Geomap/MapConfig.ts:11](https://github.com/cognitedata/reveal/blob/d2769861/viewer/packages/tools/src/Geomap/MapConfig.ts#L11)

___

#### OpenStreetMap

 **OpenStreetMap** = "OpenStreetMap"

##### Defined in

[viewer/packages/tools/src/Geomap/MapConfig.ts:12](https://github.com/cognitedata/reveal/blob/d2769861/viewer/packages/tools/src/Geomap/MapConfig.ts#L12)

# Interfaces


<a name="interfaces_cognite_revealaddmodeloptionsmd"></a>

[@cognite/reveal](#readmemd) / [Modules](#modulesmd) / [@cognite/reveal](#modules_cognite_revealmd) / AddModelOptions

## Interface: AddModelOptions

[@cognite/reveal](#modules_cognite_revealmd).AddModelOptions

### Table of contents

#### Properties

- [geometryFilter](#geometryfilter)
- [localPath](#localpath)
- [modelId](#modelid)
- [revisionId](#revisionid)

### Properties

#### geometryFilter

 `Optional` **geometryFilter**: [GeometryFilter](#interfaces_cognite_revealgeometryfiltermd)

##### Defined in

[viewer/core/src/public/migration/types.ts:190](https://github.com/cognitedata/reveal/blob/d2769861/viewer/core/src/public/migration/types.ts#L190)

___

#### localPath

 `Optional` **localPath**: `string`

##### Defined in

[viewer/core/src/public/migration/types.ts:189](https://github.com/cognitedata/reveal/blob/d2769861/viewer/core/src/public/migration/types.ts#L189)

___

#### modelId

 **modelId**: `number`

##### Defined in

[viewer/core/src/public/migration/types.ts:186](https://github.com/cognitedata/reveal/blob/d2769861/viewer/core/src/public/migration/types.ts#L186)

___

#### revisionId

 **revisionId**: `number`

##### Defined in

[viewer/core/src/public/migration/types.ts:187](https://github.com/cognitedata/reveal/blob/d2769861/viewer/core/src/public/migration/types.ts#L187)


<a name="interfaces_cognite_revealcognite3dvieweroptionsmd"></a>

[@cognite/reveal](#readmemd) / [Modules](#modulesmd) / [@cognite/reveal](#modules_cognite_revealmd) / Cognite3DViewerOptions

## Interface: Cognite3DViewerOptions

[@cognite/reveal](#modules_cognite_revealmd).Cognite3DViewerOptions

### Table of contents

#### Properties

- [antiAliasingHint](#antialiasinghint)
- [automaticCameraNearFar](#automaticcameranearfar)
- [automaticControlsSensitivity](#automaticcontrolssensitivity)
- [customDataSource](#customdatasource)
- [domElement](#domelement)
- [enableEdges](#enableedges)
- [loadingIndicatorStyle](#loadingindicatorstyle)
- [logMetrics](#logmetrics)
- [onLoading](#onloading)
- [renderTargetOptions](#rendertargetoptions)
- [renderer](#renderer)
- [sdk](#sdk)
- [ssaoQualityHint](#ssaoqualityhint)

### Properties

#### antiAliasingHint

 `Optional` **antiAliasingHint**: ``"disabled"`` \| ``"fxaa"`` \| ``"msaa2+fxaa"`` \| ``"msaa4+fxaa"`` \| ``"msaa8+fxaa"`` \| ``"msaa16+fxaa"`` \| ``"msaa2"`` \| ``"msaa4"`` \| ``"msaa8"`` \| ``"msaa16"``

Hints Reveal to use a given anti-aliasing technique.

Fast approximate anti-aliasing (FXAA) is a fast technique that will remove some, but not all aliasing effects. See
https://en.wikipedia.org/wiki/Fast_approximate_anti-aliasing.

Multi-sampling anti-aliasinbg (MSAA) is a technique for taking multiple samples per pixel to avoid aliasing effects.
This mode requires WebGL 2. See https://www.khronos.org/opengl/wiki/Multisampling.

The combined modes will apply both MSAA and FXAA anti-aliasing and yields the best visual result.

When using the MSAA modes combined with FXAA Reveal will fall back to FXAA on WebGL 1. There is no fallback for the
"plain" MSAA modes on WebGL 1.

Currently the default mode is FXAA, but this is subject to change.

##### Defined in

[viewer/core/src/public/migration/types.ts:123](https://github.com/cognitedata/reveal/blob/d2769861/viewer/core/src/public/migration/types.ts#L123)

___

#### automaticCameraNearFar

 `Optional` **automaticCameraNearFar**: `boolean`

When false, camera near and far planes will not be updated automatically (defaults to true).
This can be useful when you have custom content in the 3D view and need to better
control the view frustum.

When automatic camera near/far planes are disabled, you are responsible for setting
this on your own.

**`example`**
```
viewer.camera.near = 0.1;
viewer.camera.far = 1000.0;
viewer.camera.updateProjectionMatrix();
```

##### Defined in

[viewer/core/src/public/migration/types.ts:94](https://github.com/cognitedata/reveal/blob/d2769861/viewer/core/src/public/migration/types.ts#L94)

___

#### automaticControlsSensitivity

 `Optional` **automaticControlsSensitivity**: `boolean`

When false, the sensitivity of the camera controls will not be updated automatically.
This can be useful to better control the sensitivity of the 3D navigation.

When not set, control the sensitivity of the camera using `viewer.cameraControls.minDistance`
and `viewer.cameraControls.maxDistance`.

##### Defined in

[viewer/core/src/public/migration/types.ts:103](https://github.com/cognitedata/reveal/blob/d2769861/viewer/core/src/public/migration/types.ts#L103)

___

#### customDataSource

 `Optional` **customDataSource**: [DataSource](#interfaces_cognite_reveal_extensions_datasourcedatasourcemd)

Allows providing a custom data source that Reveal will
use to load model data. Note that some features might not
work when implementing a custom data source. Please refer
to the Reveal documentation for details.

Note that the data source must support [CdfModelIdentifier](#classes_cognite_reveal_extensions_datasourcecdfmodelidentifiermd).

This cannot be used together with \{@link _localModels}.

##### Defined in

[viewer/core/src/public/migration/types.ts:159](https://github.com/cognitedata/reveal/blob/d2769861/viewer/core/src/public/migration/types.ts#L159)

___

#### domElement

 `Optional` **domElement**: `HTMLElement`

An existing DOM element that we will render canvas into.

##### Defined in

[viewer/core/src/public/migration/types.ts:55](https://github.com/cognitedata/reveal/blob/d2769861/viewer/core/src/public/migration/types.ts#L55)

___

#### enableEdges

 `Optional` **enableEdges**: `boolean`

Enables / disables visualizing the edges of geometry. Defaults to true.

##### Defined in

[viewer/core/src/public/migration/types.ts:144](https://github.com/cognitedata/reveal/blob/d2769861/viewer/core/src/public/migration/types.ts#L144)

___

#### loadingIndicatorStyle

 `Optional` **loadingIndicatorStyle**: `Object`

Style the loading indicator.

##### Type declaration

| Name | Type | Description |
| :------ | :------ | :------ |
| `opacity` | `number` | Opacity of the spinner in fractions. Valid values are between 0.2 and 1.0. Defaults to 1.0. |
| `placement` | ``"topLeft"`` \| ``"topRight"`` \| ``"bottomLeft"`` \| ``"bottomRight"`` | What corner the spinner should be placed in. Defaults top topLeft. |

##### Defined in

[viewer/core/src/public/migration/types.ts:68](https://github.com/cognitedata/reveal/blob/d2769861/viewer/core/src/public/migration/types.ts#L68)

___

#### logMetrics

 `Optional` **logMetrics**: `boolean`

Send anonymous usage statistics.

##### Defined in

[viewer/core/src/public/migration/types.ts:58](https://github.com/cognitedata/reveal/blob/d2769861/viewer/core/src/public/migration/types.ts#L58)

___

#### onLoading

 `Optional` **onLoading**: [OnLoadingCallback](#onloadingcallback)

Callback to download stream progress.

##### Defined in

[viewer/core/src/public/migration/types.ts:147](https://github.com/cognitedata/reveal/blob/d2769861/viewer/core/src/public/migration/types.ts#L147)

___

#### renderTargetOptions

 `Optional` **renderTargetOptions**: `Object`

Render to offscreen buffer instead of canvas.

##### Type declaration

| Name | Type |
| :------ | :------ |
| `autoSetSize?` | `boolean` |
| `target` | `WebGLRenderTarget` |

##### Defined in

[viewer/core/src/public/migration/types.ts:63](https://github.com/cognitedata/reveal/blob/d2769861/viewer/core/src/public/migration/types.ts#L63)

___

#### renderer

 `Optional` **renderer**: `WebGLRenderer`

Renderer used to visualize model (optional).

##### Defined in

[viewer/core/src/public/migration/types.ts:105](https://github.com/cognitedata/reveal/blob/d2769861/viewer/core/src/public/migration/types.ts#L105)

___

#### sdk

 **sdk**: `default`

Initialized connection to CDF used to load data.

##### Defined in

[viewer/core/src/public/migration/types.ts:52](https://github.com/cognitedata/reveal/blob/d2769861/viewer/core/src/public/migration/types.ts#L52)

___

#### ssaoQualityHint

 `Optional` **ssaoQualityHint**: ``"disabled"`` \| ``"medium"`` \| ``"high"`` \| ``"veryhigh"``

Hints the renderer of the quality it should aim for for screen space ambient occlusion,
an effect creating shadows and that gives the rendered image more depth.

##### Defined in

[viewer/core/src/public/migration/types.ts:139](https://github.com/cognitedata/reveal/blob/d2769861/viewer/core/src/public/migration/types.ts#L139)


<a name="interfaces_cognite_revealcognitemodelbasemd"></a>

[@cognite/reveal](#readmemd) / [Modules](#modulesmd) / [@cognite/reveal](#modules_cognite_revealmd) / CogniteModelBase

## Interface: CogniteModelBase

[@cognite/reveal](#modules_cognite_revealmd).CogniteModelBase

### Implemented by

- [Cognite3DModel](#classes_cognite_revealcognite3dmodelmd)
- [CognitePointCloudModel](#classes_cognite_revealcognitepointcloudmodelmd)

### Table of contents

#### Properties

- [type](#type)

#### Methods

- [dispose](#dispose)
- [getCameraConfiguration](#getcameraconfiguration)
- [getModelBoundingBox](#getmodelboundingbox)
- [getModelTransformation](#getmodeltransformation)
- [setModelTransformation](#setmodeltransformation)

### Properties

#### type

 `Readonly` **type**: [SupportedModelTypes](#supportedmodeltypes)

##### Defined in

[viewer/core/src/public/migration/CogniteModelBase.ts:13](https://github.com/cognitedata/reveal/blob/d2769861/viewer/core/src/public/migration/CogniteModelBase.ts#L13)

### Methods

#### dispose

 **dispose**(): `void`

##### Returns

`void`

##### Defined in

[viewer/core/src/public/migration/CogniteModelBase.ts:14](https://github.com/cognitedata/reveal/blob/d2769861/viewer/core/src/public/migration/CogniteModelBase.ts#L14)

___

#### getCameraConfiguration

 **getCameraConfiguration**(): [CameraConfiguration](#cameraconfiguration)

##### Returns

[CameraConfiguration](#cameraconfiguration)

##### Defined in

[viewer/core/src/public/migration/CogniteModelBase.ts:16](https://github.com/cognitedata/reveal/blob/d2769861/viewer/core/src/public/migration/CogniteModelBase.ts#L16)

___

#### getModelBoundingBox

 **getModelBoundingBox**(`outBbox?`, `restrictToMostGeometry?`): `Box3`

##### Parameters

| Name | Type |
| :------ | :------ |
| `outBbox?` | `Box3` |
| `restrictToMostGeometry?` | `boolean` |

##### Returns

`Box3`

##### Defined in

[viewer/core/src/public/migration/CogniteModelBase.ts:15](https://github.com/cognitedata/reveal/blob/d2769861/viewer/core/src/public/migration/CogniteModelBase.ts#L15)

___

#### getModelTransformation

 **getModelTransformation**(`out?`): `Matrix4`

##### Parameters

| Name | Type |
| :------ | :------ |
| `out?` | `Matrix4` |

##### Returns

`Matrix4`

##### Defined in

[viewer/core/src/public/migration/CogniteModelBase.ts:18](https://github.com/cognitedata/reveal/blob/d2769861/viewer/core/src/public/migration/CogniteModelBase.ts#L18)

___

#### setModelTransformation

 **setModelTransformation**(`matrix`): `void`

##### Parameters

| Name | Type |
| :------ | :------ |
| `matrix` | `Matrix4` |

##### Returns

`void`

##### Defined in

[viewer/core/src/public/migration/CogniteModelBase.ts:17](https://github.com/cognitedata/reveal/blob/d2769861/viewer/core/src/public/migration/CogniteModelBase.ts#L17)


<a name="interfaces_cognite_revealgeometryfiltermd"></a>

[@cognite/reveal](#readmemd) / [Modules](#modulesmd) / [@cognite/reveal](#modules_cognite_revealmd) / GeometryFilter

## Interface: GeometryFilter

[@cognite/reveal](#modules_cognite_revealmd).GeometryFilter

### Table of contents

#### Properties

- [boundingBox](#boundingbox)
- [isBoundingBoxInModelCoordinates](#isboundingboxinmodelcoordinates)

### Properties

#### boundingBox

 `Optional` **boundingBox**: `Box3`

The bounds to load geometry within. By default this box is in CDF coordinate space which
will be transformed into coordinates relative to the model using the the model transformation
which can be specified using [the CDF API](https://docs.cognite.com/api/v1/#operation/update3DRevisions),
or set in [Cognite Fusion](https://fusion.cognite.com/).

**`see`** [isBoundingBoxInModelCoordinates](#isboundingboxinmodelcoordinates).

##### Defined in

[viewer/core/src/public/types.ts:31](https://github.com/cognitedata/reveal/blob/d2769861/viewer/core/src/public/types.ts#L31)

___

#### isBoundingBoxInModelCoordinates

 `Optional` **isBoundingBoxInModelCoordinates**: `boolean`

When set, the geometry filter [boundingBox](#boundingbox) will be considered to be in "Reveal/ThreeJS space".
Rather than CDF space which is the default. When using Reveal space, the model transformation
which can be specified using [the CDF API](https://docs.cognite.com/api/v1/#operation/update3DRevisions),
or set in [Cognite Fusion](https://fusion.cognite.com/).

##### Defined in

[viewer/core/src/public/types.ts:39](https://github.com/cognitedata/reveal/blob/d2769861/viewer/core/src/public/types.ts#L39)


<a name="interfaces_cognite_revealintersectionfrompixeloptionsmd"></a>

[@cognite/reveal](#readmemd) / [Modules](#modulesmd) / [@cognite/reveal](#modules_cognite_revealmd) / IntersectionFromPixelOptions

## Interface: IntersectionFromPixelOptions

[@cognite/reveal](#modules_cognite_revealmd).IntersectionFromPixelOptions

Options to control how [Cognite3DViewer.getIntersectionFromPixel](#getintersectionfrompixel) behaves.

### Table of contents

#### Properties

- [pointIntersectionThreshold](#pointintersectionthreshold)

### Properties

#### pointIntersectionThreshold

 `Optional` **pointIntersectionThreshold**: `number`

Threshold (in meters) for how close a point must be an intersection
ray for it to be considered an intersection for point clouds. Defaults
to 0.05.

##### Defined in

[viewer/core/src/public/migration/types.ts:359](https://github.com/cognitedata/reveal/blob/d2769861/viewer/core/src/public/migration/types.ts#L359)


<a name="interfaces_cognite_reveal_extensions_datasourcedatasourcemd"></a>

[@cognite/reveal](#readmemd) / [Modules](#modulesmd) / [@cognite/reveal/extensions/datasource](#modules_cognite_reveal_extensions_datasourcemd) / DataSource

## Interface: DataSource

[@cognite/reveal/extensions/datasource](#modules_cognite_reveal_extensions_datasourcemd).DataSource

Describes how Reveal data is stored, and provides means to create custom storage providers
that Reveal will fetch data from.

**`version`** New since 2.2

### Table of contents

#### Methods

- [getModelDataProvider](#getmodeldataprovider)
- [getModelMetadataProvider](#getmodelmetadataprovider)
- [getNodesApiClient](#getnodesapiclient)

### Methods

#### getModelDataProvider

 **getModelDataProvider**(): [ModelDataProvider](#interfaces_cognite_reveal_extensions_datasourcemodeldataprovidermd)

Gets a client that is able to download geometry and other files
for models.

##### Returns

[ModelDataProvider](#interfaces_cognite_reveal_extensions_datasourcemodeldataprovidermd)

##### Defined in

[viewer/packages/data-source/src/DataSource.ts:29](https://github.com/cognitedata/reveal/blob/d2769861/viewer/packages/data-source/src/DataSource.ts#L29)

___

#### getModelMetadataProvider

 **getModelMetadataProvider**(): [ModelMetadataProvider](#interfaces_cognite_reveal_extensions_datasourcemodelmetadataprovidermd)

Gets a metadata provider for models.

##### Returns

[ModelMetadataProvider](#interfaces_cognite_reveal_extensions_datasourcemodelmetadataprovidermd)

##### Defined in

[viewer/packages/data-source/src/DataSource.ts:23](https://github.com/cognitedata/reveal/blob/d2769861/viewer/packages/data-source/src/DataSource.ts#L23)

___

#### getNodesApiClient

 **getNodesApiClient**(): [NodesApiClient](#interfaces_cognite_reveal_extensions_datasourcenodesapiclientmd)

Gets a node API client that is able to fetch data about
models.

##### Returns

[NodesApiClient](#interfaces_cognite_reveal_extensions_datasourcenodesapiclientmd)

##### Defined in

[viewer/packages/data-source/src/DataSource.ts:18](https://github.com/cognitedata/reveal/blob/d2769861/viewer/packages/data-source/src/DataSource.ts#L18)


<a name="interfaces_cognite_reveal_extensions_datasourcemodeldataprovidermd"></a>

[@cognite/reveal](#readmemd) / [Modules](#modulesmd) / [@cognite/reveal/extensions/datasource](#modules_cognite_reveal_extensions_datasourcemd) / ModelDataProvider

## Interface: ModelDataProvider

[@cognite/reveal/extensions/datasource](#modules_cognite_reveal_extensions_datasourcemd).ModelDataProvider

Provides data for 3D models.

**`version`** New since 2.2

### Hierarchy

- `HttpHeadersProvider`

- `JsonFileProvider`

- `BinaryFileProvider`

   **ModelDataProvider**

### Table of contents

#### Properties

- [headers](#headers)

#### Methods

- [getBinaryFile](#getbinaryfile)
- [getJsonFile](#getjsonfile)

### Properties

#### headers

 `Readonly` **headers**: `HttpHeaders`

##### Inherited from

HttpHeadersProvider.headers

##### Defined in

[viewer/packages/modeldata-api/src/types.ts:34](https://github.com/cognitedata/reveal/blob/d2769861/viewer/packages/modeldata-api/src/types.ts#L34)

### Methods

#### getBinaryFile

 **getBinaryFile**(`baseUrl`, `fileName`): `Promise`\<ArrayBuffer\>

Downloads a binary blob.

##### Parameters

| Name | Type | Description |
| :------ | :------ | :------ |
| `baseUrl` | `string` | Base URL of the model. |
| `fileName` | `string` | Filename of binary file. |

##### Returns

`Promise`\<ArrayBuffer\>

##### Overrides

BinaryFileProvider.getBinaryFile

##### Defined in

[viewer/packages/modeldata-api/src/types.ts:30](https://github.com/cognitedata/reveal/blob/d2769861/viewer/packages/modeldata-api/src/types.ts#L30)

___

#### getJsonFile

 **getJsonFile**(`baseUrl`, `fileName`): `Promise`\<any\>

Download and parse a JSON file and return the resulting struct.

##### Parameters

| Name | Type | Description |
| :------ | :------ | :------ |
| `baseUrl` | `string` | Base URL of the model. |
| `fileName` | `string` | Filename of JSON file. |

##### Returns

`Promise`\<any\>

##### Overrides

JsonFileProvider.getJsonFile

##### Defined in

[viewer/packages/modeldata-api/src/types.ts:24](https://github.com/cognitedata/reveal/blob/d2769861/viewer/packages/modeldata-api/src/types.ts#L24)


<a name="interfaces_cognite_reveal_extensions_datasourcemodelidentifiermd"></a>

[@cognite/reveal](#readmemd) / [Modules](#modulesmd) / [@cognite/reveal/extensions/datasource](#modules_cognite_reveal_extensions_datasourcemd) / ModelIdentifier

## Interface: ModelIdentifier

[@cognite/reveal/extensions/datasource](#modules_cognite_reveal_extensions_datasourcemd).ModelIdentifier

Identifies a 3D model. Typically, implementations will use [CdfModelIdentifier](#classes_cognite_reveal_extensions_datasourcecdfmodelidentifiermd).

### Implemented by

- [CdfModelIdentifier](#classes_cognite_reveal_extensions_datasourcecdfmodelidentifiermd)

### Table of contents

#### Properties

- [revealInternalId](#revealinternalid)

### Properties

#### revealInternalId

 `Readonly` **revealInternalId**: `symbol`

Unique ID of the model.

##### Defined in

[viewer/packages/modeldata-api/src/ModelIdentifier.ts:12](https://github.com/cognitedata/reveal/blob/d2769861/viewer/packages/modeldata-api/src/ModelIdentifier.ts#L12)


<a name="interfaces_cognite_reveal_extensions_datasourcemodelmetadataprovidermd"></a>

[@cognite/reveal](#readmemd) / [Modules](#modulesmd) / [@cognite/reveal/extensions/datasource](#modules_cognite_reveal_extensions_datasourcemd) / ModelMetadataProvider

## Interface: ModelMetadataProvider

[@cognite/reveal/extensions/datasource](#modules_cognite_reveal_extensions_datasourcemd).ModelMetadataProvider

Provides metadata for 3D models.

**`version`** New since 2.2

### Table of contents

#### Methods

- [getModelCamera](#getmodelcamera)
- [getModelMatrix](#getmodelmatrix)
- [getModelUri](#getmodeluri)

### Methods

#### getModelCamera

 **getModelCamera**(`identifier`): `Promise`\<`Object`\>

##### Parameters

| Name | Type |
| :------ | :------ |
| `identifier` | [ModelIdentifier](#interfaces_cognite_reveal_extensions_datasourcemodelidentifiermd) |

##### Returns

`Promise`\<`Object`\>

##### Defined in

[viewer/packages/modeldata-api/src/ModelMetadataProvider.ts:13](https://github.com/cognitedata/reveal/blob/d2769861/viewer/packages/modeldata-api/src/ModelMetadataProvider.ts#L13)

___

#### getModelMatrix

 **getModelMatrix**(`identifier`): `Promise`\<Matrix4\>

##### Parameters

| Name | Type |
| :------ | :------ |
| `identifier` | [ModelIdentifier](#interfaces_cognite_reveal_extensions_datasourcemodelidentifiermd) |

##### Returns

`Promise`\<Matrix4\>

##### Defined in

[viewer/packages/modeldata-api/src/ModelMetadataProvider.ts:14](https://github.com/cognitedata/reveal/blob/d2769861/viewer/packages/modeldata-api/src/ModelMetadataProvider.ts#L14)

___

#### getModelUri

 **getModelUri**(`identifier`): `Promise`\<string\>

##### Parameters

| Name | Type |
| :------ | :------ |
| `identifier` | [ModelIdentifier](#interfaces_cognite_reveal_extensions_datasourcemodelidentifiermd) |

##### Returns

`Promise`\<string\>

##### Defined in

[viewer/packages/modeldata-api/src/ModelMetadataProvider.ts:12](https://github.com/cognitedata/reveal/blob/d2769861/viewer/packages/modeldata-api/src/ModelMetadataProvider.ts#L12)


<a name="interfaces_cognite_reveal_extensions_datasourcenodesapiclientmd"></a>

[@cognite/reveal](#readmemd) / [Modules](#modulesmd) / [@cognite/reveal/extensions/datasource](#modules_cognite_reveal_extensions_datasourcemd) / NodesApiClient

## Interface: NodesApiClient

[@cognite/reveal/extensions/datasource](#modules_cognite_reveal_extensions_datasourcemd).NodesApiClient

Client for retrieving metadata information about CAD nodes.

**`version`** New since 2.2

### Table of contents

#### Methods

- [determineNodeAncestorsByNodeId](#determinenodeancestorsbynodeid)
- [determineTreeIndexAndSubtreeSizesByNodeIds](#determinetreeindexandsubtreesizesbynodeids)
- [getBoundingBoxByNodeId](#getboundingboxbynodeid)
- [mapNodeIdsToTreeIndices](#mapnodeidstotreeindices)
- [mapTreeIndicesToNodeIds](#maptreeindicestonodeids)

### Methods

#### determineNodeAncestorsByNodeId

 **determineNodeAncestorsByNodeId**(`modelId`, `revisionId`, `nodeId`, `generation`): `Promise`\<`Object`\>

Determine ancestor subtree span of a given node. If the node doesn't have an
ancestor at the generation given, the span of the root node is returned.

##### Parameters

| Name | Type | Description |
| :------ | :------ | :------ |
| `modelId` | `number` | ID of 3D model |
| `revisionId` | `number` | ID of 3D model revision |
| `nodeId` | `number` | Node ID of node |
| `generation` | `number` | Generation to retrieve (0 means node itself, 1 is parent, 2 grand-parent etc). |

##### Returns

`Promise`\<`Object`\>

##### Defined in

[viewer/packages/nodes-api/src/NodesApiClient.ts:52](https://github.com/cognitedata/reveal/blob/d2769861/viewer/packages/nodes-api/src/NodesApiClient.ts#L52)

___

#### determineTreeIndexAndSubtreeSizesByNodeIds

 **determineTreeIndexAndSubtreeSizesByNodeIds**(`modelId`, `revisionId`, `nodeIds`): `Promise`\<\{ `subtreeSize`: `number` ; `treeIndex`: `number`  }[]\>

Determines tree index and subtreeSize (i.e. span of the subtree a node is parent
of) given a set of node IDs.

##### Parameters

| Name | Type |
| :------ | :------ |
| `modelId` | `number` |
| `revisionId` | `number` |
| `nodeIds` | `number`[] |

##### Returns

`Promise`\<\{ `subtreeSize`: `number` ; `treeIndex`: `number`  }[]\>

##### Defined in

[viewer/packages/nodes-api/src/NodesApiClient.ts:38](https://github.com/cognitedata/reveal/blob/d2769861/viewer/packages/nodes-api/src/NodesApiClient.ts#L38)

___

#### getBoundingBoxByNodeId

 **getBoundingBoxByNodeId**(`modelId`, `revisionId`, `nodeId`, `box?`): `Promise`\<Box3\>

Determines the bounds of the node provided. Note that the returned
box returned will be in "CDF coordinates" and not transformed using
the model transformation for the given model.

##### Parameters

| Name | Type | Description |
| :------ | :------ | :------ |
| `modelId` | `number` | ID of 3D model |
| `revisionId` | `number` | ID of 3D model revision |
| `nodeId` | `number` | Node ID of node |
| `box?` | `Box3` | Pre-allocated THREE.Box3 (optional). |

##### Returns

`Promise`\<Box3\>

##### Defined in

[viewer/packages/nodes-api/src/NodesApiClient.ts:69](https://github.com/cognitedata/reveal/blob/d2769861/viewer/packages/nodes-api/src/NodesApiClient.ts#L69)

___

#### mapNodeIdsToTreeIndices

 **mapNodeIdsToTreeIndices**(`modelId`, `revisionId`, `nodeIds`): `Promise`\<number[]\>

Maps a set of "node IDs" that identify nodes, to the respective
"tree indexes".

##### Parameters

| Name | Type |
| :------ | :------ |
| `modelId` | `number` |
| `revisionId` | `number` |
| `nodeIds` | `number`[] |

##### Returns

`Promise`\<number[]\>

##### Defined in

[viewer/packages/nodes-api/src/NodesApiClient.ts:28](https://github.com/cognitedata/reveal/blob/d2769861/viewer/packages/nodes-api/src/NodesApiClient.ts#L28)

___

#### mapTreeIndicesToNodeIds

 **mapTreeIndicesToNodeIds**(`modelId`, `revisionId`, `treeIndices`): `Promise`\<number[]\>

Maps a set of "tree indexes" that identify nodes, to the respective
"node IDs".

##### Parameters

| Name | Type |
| :------ | :------ |
| `modelId` | `number` |
| `revisionId` | `number` |
| `treeIndices` | `number`[] |

##### Returns

`Promise`\<number[]\>

##### Defined in

[viewer/packages/nodes-api/src/NodesApiClient.ts:18](https://github.com/cognitedata/reveal/blob/d2769861/viewer/packages/nodes-api/src/NodesApiClient.ts#L18)


<a name="modulesmd"></a>

[@cognite/reveal](#readmemd) / Modules

# @cognite/reveal

## Table of contents

### Modules

- [@cognite/reveal](#modules_cognite_revealmd)
- [@cognite/reveal/extensions/datasource](#modules_cognite_reveal_extensions_datasourcemd)
- [@cognite/reveal/tools](#modules_cognite_reveal_toolsmd)

# Modules


<a name="modules_cognite_revealmd"></a>

[@cognite/reveal](#readmemd) / [Modules](#modulesmd) / @cognite/reveal

## Module: @cognite/reveal

### Table of contents

#### Enumerations

- [NodeOutlineColor](#enums_cognite_revealnodeoutlinecolormd)
- [PotreePointColorType](#enums_cognite_revealpotreepointcolortypemd)
- [PotreePointShape](#enums_cognite_revealpotreepointshapemd)
- [PotreePointSizeType](#enums_cognite_revealpotreepointsizetypemd)
- [WellKnownAsprsPointClassCodes](#enums_cognite_revealwellknownasprspointclasscodesmd)

#### Classes

- [AssetNodeCollection](#classes_cognite_revealassetnodecollectionmd)
- [BoundingBoxClipper](#classes_cognite_revealboundingboxclippermd)
- [Cognite3DModel](#classes_cognite_revealcognite3dmodelmd)
- [Cognite3DViewer](#classes_cognite_revealcognite3dviewermd)
- [CognitePointCloudModel](#classes_cognite_revealcognitepointcloudmodelmd)
- [IndexSet](#classes_cognite_revealindexsetmd)
- [IntersectionNodeCollection](#classes_cognite_revealintersectionnodecollectionmd)
- [InvertedNodeCollection](#classes_cognite_revealinvertednodecollectionmd)
- [NodeAppearanceProvider](#classes_cognite_revealnodeappearanceprovidermd)
- [NodeCollectionBase](#classes_cognite_revealnodecollectionbasemd)
- [NotSupportedInMigrationWrapperError](#classes_cognite_revealnotsupportedinmigrationwrappererrormd)
- [NumericRange](#classes_cognite_revealnumericrangemd)
- [PropertyFilterNodeCollection](#classes_cognite_revealpropertyfilternodecollectionmd)
- [SinglePropertyFilterNodeCollection](#classes_cognite_revealsinglepropertyfilternodecollectionmd)
- [TreeIndexNodeCollection](#classes_cognite_revealtreeindexnodecollectionmd)
- [UnionNodeCollection](#classes_cognite_revealunionnodecollectionmd)

#### Interfaces

- [AddModelOptions](#interfaces_cognite_revealaddmodeloptionsmd)
- [Cognite3DViewerOptions](#interfaces_cognite_revealcognite3dvieweroptionsmd)
- [CogniteModelBase](#interfaces_cognite_revealcognitemodelbasemd)
- [GeometryFilter](#interfaces_cognite_revealgeometryfiltermd)
- [IntersectionFromPixelOptions](#interfaces_cognite_revealintersectionfrompixeloptionsmd)

#### Type aliases

- [CadIntersection](#cadintersection)
- [CadModelBudget](#cadmodelbudget)
- [CameraChangeDelegate](#camerachangedelegate)
- [CameraConfiguration](#cameraconfiguration)
- [CameraControlsOptions](#cameracontrolsoptions)
- [Color](#color)
- [DisposedDelegate](#disposeddelegate)
- [Intersection](#intersection)
- [LoadingStateChangeListener](#loadingstatechangelistener)
- [ModelState](#modelstate)
- [NodeAppearance](#nodeappearance)
- [NodeCollectionDescriptor](#nodecollectiondescriptor)
- [NodeCollectionSerializationContext](#nodecollectionserializationcontext)
- [OnLoadingCallback](#onloadingcallback)
- [PointCloudBudget](#pointcloudbudget)
- [PointCloudIntersection](#pointcloudintersection)
- [PointerEventDelegate](#pointereventdelegate)
- [RevealOptions](#revealoptions)
- [SceneRenderedDelegate](#scenerendereddelegate)
- [SerializedNodeCollection](#serializednodecollection)
- [SupportedModelTypes](#supportedmodeltypes)
- [TypeName](#typename)
- [ViewerState](#viewerstate)
- [WellKnownUnit](#wellknownunit)

#### Variables

- [DefaultNodeAppearance](#defaultnodeappearance)
- [revealEnv](#revealenv)

#### Functions

- [registerCustomNodeCollectionType](#registercustomnodecollectiontype)

### Type aliases

#### CadIntersection

 **CadIntersection**: `Object`

##### Type declaration

| Name | Type | Description |
| :------ | :------ | :------ |
| `distanceToCamera` | `number` | Distance from the camera to the intersection. |
| `model` | [Cognite3DModel](#classes_cognite_revealcognite3dmodelmd) | The model that was intersected. |
| `point` | `THREE.Vector3` | Coordinate of the intersection. |
| `treeIndex` | `number` | Tree index of the intersected 3D node. |
| `type` | ``"cad"`` | The intersection type. |

##### Defined in

[viewer/core/src/public/migration/types.ts:218](https://github.com/cognitedata/reveal/blob/d2769861/viewer/core/src/public/migration/types.ts#L218)

___

#### CadModelBudget

 **CadModelBudget**: `Object`

Represents a measurement of how much geometry can be loaded.

##### Type declaration

| Name | Type | Description |
| :------ | :------ | :------ |
| `maximumRenderCost` | `number` | Maximum render cost. This number can be thought of as triangle count, although the number doesn't match this directly. |
| `highDetailProximityThreshold` | `number` | For 3D models processed before Q1 2022, sectors within this distance from the camera will always be loaded in high details (deprecated). |

##### Defined in

[viewer/core/src/public/migration/types.ts:312](https://github.com/cognitedata/reveal/blob/d2769861/viewer/core/src/public/migration/types.ts#L312)

___

#### CameraChangeDelegate

 **CameraChangeDelegate**: (`position`: `THREE.Vector3`, `target`: `THREE.Vector3`) => `void`

##### Type declaration

 (`position`, `target`): `void`

###### Parameters

| Name | Type |
| :------ | :------ |
| `position` | `THREE.Vector3` |
| `target` | `THREE.Vector3` |

###### Returns

`void`

##### Defined in

[viewer/core/src/public/migration/types.ts:287](https://github.com/cognitedata/reveal/blob/d2769861/viewer/core/src/public/migration/types.ts#L287)

___

#### CameraConfiguration

 **CameraConfiguration**: `Object`

Represents a camera configuration, consisting of a camera position and target.

##### Type declaration

| Name | Type |
| :------ | :------ |
| `position` | `THREE.Vector3` |
| `target` | `THREE.Vector3` |

##### Defined in

[viewer/packages/utilities/src/CameraConfiguration.ts:8](https://github.com/cognitedata/reveal/blob/d2769861/viewer/packages/utilities/src/CameraConfiguration.ts#L8)

___

#### CameraControlsOptions

 **CameraControlsOptions**: `Object`

##### Type declaration

| Name | Type | Description |
| :------ | :------ | :------ |
| `changeCameraTargetOnClick?` | `boolean` | Enables or disables change of camera target on mouse click. New target is then set to the point of the model under current cursor position.  Default is false. |
| `mouseWheelAction?` | ``"zoomToTarget"`` \| ``"zoomPastCursor"`` \| ``"zoomToCursor"`` | Sets mouse wheel initiated action.  Modes:  'zoomToTarget' - zooms just to the current target (center of the screen) of the camera.  'zoomPastCursor' - zooms in the direction of the ray coming from camera through cursor screen position, allows going through objects.  'zoomToCursor' - mouse wheel scroll zooms towards the point on the model where cursor is hovering over, doesn't allow going through objects.  Default is 'zoomPastCursor'. |

##### Defined in

[viewer/packages/camera-manager/src/types.ts:5](https://github.com/cognitedata/reveal/blob/d2769861/viewer/packages/camera-manager/src/types.ts#L5)

___

#### Color

 **Color**: `Object`

##### Type declaration

| Name | Type |
| :------ | :------ |
| `b` | `number` |
| `g` | `number` |
| `r` | `number` |

##### Defined in

[viewer/core/src/public/migration/types.ts:14](https://github.com/cognitedata/reveal/blob/d2769861/viewer/core/src/public/migration/types.ts#L14)

___

#### DisposedDelegate

 **DisposedDelegate**: () => `void`

Delegate for disposal events.

##### Type declaration

 (): `void`

###### Returns

`void`

##### Defined in

[viewer/core/src/public/migration/types.ts:292](https://github.com/cognitedata/reveal/blob/d2769861/viewer/core/src/public/migration/types.ts#L292)

___

#### Intersection

 **Intersection**: [CadIntersection](#cadintersection) \| [PointCloudIntersection](#pointcloudintersection)

##### Defined in

[viewer/core/src/public/migration/types.ts:268](https://github.com/cognitedata/reveal/blob/d2769861/viewer/core/src/public/migration/types.ts#L268)

___

#### LoadingStateChangeListener

 **LoadingStateChangeListener**: (`loadingState`: `LoadingState`) => `any`

Handler for events about data being loaded.

##### Type declaration

 (`loadingState`): `any`

###### Parameters

| Name | Type |
| :------ | :------ |
| `loadingState` | `LoadingState` |

###### Returns

`any`

##### Defined in

[viewer/core/src/public/types.ts:45](https://github.com/cognitedata/reveal/blob/d2769861/viewer/core/src/public/types.ts#L45)

___

#### ModelState

 **ModelState**: `Object`

##### Type declaration

| Name | Type |
| :------ | :------ |
| `defaultNodeAppearance` | [NodeAppearance](#nodeappearance) |
| `modelId` | `number` |
| `revisionId` | `number` |
| `styledSets` | \{ `appearance`: [NodeAppearance](#nodeappearance) ; `options?`: `any` ; `state`: `any` ; `token`: `string`  }[] |

##### Defined in

[viewer/core/src/utilities/ViewStateHelper.ts:24](https://github.com/cognitedata/reveal/blob/d2769861/viewer/core/src/utilities/ViewStateHelper.ts#L24)

___

#### NodeAppearance

 **NodeAppearance**: `Object`

Type for defining node appearance profiles to style a 3D CAD model.

**`see`** [DefaultNodeAppearance](#defaultnodeappearance)

##### Type declaration

| Name | Type | Description |
| :------ | :------ | :------ |
| `color?` | [`number`, `number`, `number`] | Overrides the default color of the node in RGB. Each component is in range [0, 255]. `[0, 0, 0]` means no override. |
| `outlineColor?` | [NodeOutlineColor](#enums_cognite_revealnodeoutlinecolormd) | When set, an outline is drawn around the node to make it stand out. |
| `renderGhosted?` | `boolean` | When set to true, the node is rendered ghosted, i.e. transparent with a fixed color. This has no effect if [renderInFront](#renderinfront) is `true`. |
| `renderInFront?` | `boolean` | When set to true, the node is rendered in front of all other nodes even if it's occluded. Note that this take precedence over [renderGhosted](#renderghosted). |
| `visible?` | `boolean` | Overrides the visibility of the node. |

##### Defined in

[viewer/packages/cad-styling/src/NodeAppearance.ts:20](https://github.com/cognitedata/reveal/blob/d2769861/viewer/packages/cad-styling/src/NodeAppearance.ts#L20)

___

#### NodeCollectionDescriptor

 **NodeCollectionDescriptor**: `Object`

##### Type declaration

| Name | Type |
| :------ | :------ |
| `options?` | `any` |
| `state` | `any` |
| `token` | [TypeName](#typename) |

##### Defined in

[viewer/core/src/datamodels/cad/styling/NodeCollectionDeserializer.ts:25](https://github.com/cognitedata/reveal/blob/d2769861/viewer/core/src/datamodels/cad/styling/NodeCollectionDeserializer.ts#L25)

___

#### NodeCollectionSerializationContext

 **NodeCollectionSerializationContext**: `Object`

##### Type declaration

| Name | Type |
| :------ | :------ |
| `client` | `CogniteClient` |
| `model` | [Cognite3DModel](#classes_cognite_revealcognite3dmodelmd) |

##### Defined in

[viewer/core/src/datamodels/cad/styling/NodeCollectionDeserializer.ts:24](https://github.com/cognitedata/reveal/blob/d2769861/viewer/core/src/datamodels/cad/styling/NodeCollectionDeserializer.ts#L24)

___

#### OnLoadingCallback

 **OnLoadingCallback**: (`itemsLoaded`: `number`, `itemsRequested`: `number`, `itemsCulled`: `number`) => `void`

##### Type declaration

 (`itemsLoaded`, `itemsRequested`, `itemsCulled`): `void`

###### Parameters

| Name | Type |
| :------ | :------ |
| `itemsLoaded` | `number` |
| `itemsRequested` | `number` |
| `itemsCulled` | `number` |

###### Returns

`void`

##### Defined in

[viewer/core/src/public/migration/types.ts:45](https://github.com/cognitedata/reveal/blob/d2769861/viewer/core/src/public/migration/types.ts#L45)

___

#### PointCloudBudget

 **PointCloudBudget**: `Object`

Represents a budget of how many point from point clouds can be
loaded at the same time.

##### Type declaration

| Name | Type | Description |
| :------ | :------ | :------ |
| `numberOfPoints` | `number` | Total number of points that can be loaded for all point clouds models accumulated. |

##### Defined in

[viewer/core/src/public/migration/types.ts:342](https://github.com/cognitedata/reveal/blob/d2769861/viewer/core/src/public/migration/types.ts#L342)

___

#### PointCloudIntersection

 **PointCloudIntersection**: `Object`

##### Type declaration

| Name | Type | Description |
| :------ | :------ | :------ |
| `distanceToCamera` | `number` | Distance from the camera to the intersection. |
| `model` | [CognitePointCloudModel](#classes_cognite_revealcognitepointcloudmodelmd) | The model that was intersected. |
| `point` | `THREE.Vector3` | Tree index of the intersected 3D node. |
| `pointIndex` | `number` | The index of the point that was intersected. |
| `type` | ``"pointcloud"`` | The intersection type. |

##### Defined in

[viewer/core/src/public/migration/types.ts:241](https://github.com/cognitedata/reveal/blob/d2769861/viewer/core/src/public/migration/types.ts#L241)

___

#### PointerEventDelegate

 **PointerEventDelegate**: (`event`: \{ `offsetX`: `number` ; `offsetY`: `number`  }) => `void`

##### Type declaration

 (`event`): `void`

###### Parameters

| Name | Type |
| :------ | :------ |
| `event` | `Object` |
| `event.offsetX` | `number` |
| `event.offsetY` | `number` |

###### Returns

`void`

##### Defined in

[viewer/core/src/public/migration/types.ts:280](https://github.com/cognitedata/reveal/blob/d2769861/viewer/core/src/public/migration/types.ts#L280)

___

#### RevealOptions

 **RevealOptions**: `Object`

**`property`** logMetrics Might be used to disable usage statistics.

**`property`** nodeAppearanceProvider Style node by tree-index.

**`property`** internal Internals are for internal usage only (like unit-testing).

##### Type declaration

| Name | Type |
| :------ | :------ |
| `internal?` | `Object` |
| `internal.parseCallback?` | (`parsed`: \{ `data`: `SectorGeometry` \| `SectorQuads` ; `lod`: `string`  }) => `void` |
| `internal.sectorCuller?` | `SectorCuller` |
| `logMetrics?` | `boolean` |
| `renderOptions?` | `RenderOptions` |

##### Defined in

[viewer/core/src/public/types.ts:14](https://github.com/cognitedata/reveal/blob/d2769861/viewer/core/src/public/types.ts#L14)

___

#### SceneRenderedDelegate

 **SceneRenderedDelegate**: (`event`: \{ `camera`: `THREE.PerspectiveCamera` ; `frameNumber`: `number` ; `renderTime`: `number` ; `renderer`: `THREE.WebGLRenderer`  }) => `void`

##### Type declaration

 (`event`): `void`

###### Parameters

| Name | Type |
| :------ | :------ |
| `event` | `Object` |
| `event.camera` | `THREE.PerspectiveCamera` |
| `event.frameNumber` | `number` |
| `event.renderTime` | `number` |
| `event.renderer` | `THREE.WebGLRenderer` |

###### Returns

`void`

##### Defined in

[viewer/core/src/public/migration/types.ts:299](https://github.com/cognitedata/reveal/blob/d2769861/viewer/core/src/public/migration/types.ts#L299)

___

#### SerializedNodeCollection

 **SerializedNodeCollection**: `Object`

##### Type declaration

| Name | Type |
| :------ | :------ |
| `options?` | `any` |
| `state` | `any` |
| `token` | `string` |

##### Defined in

[viewer/packages/cad-styling/src/NodeCollectionBase.ts:8](https://github.com/cognitedata/reveal/blob/d2769861/viewer/packages/cad-styling/src/NodeCollectionBase.ts#L8)

___

#### SupportedModelTypes

 **SupportedModelTypes**: ``"pointcloud"`` \| ``"cad"``

##### Defined in

[viewer/core/src/datamodels/base/SupportedModelTypes.ts:4](https://github.com/cognitedata/reveal/blob/d2769861/viewer/core/src/datamodels/base/SupportedModelTypes.ts#L4)

___

#### TypeName

 **TypeName**: `string`

##### Defined in

[viewer/core/src/datamodels/cad/styling/NodeCollectionDeserializer.ts:23](https://github.com/cognitedata/reveal/blob/d2769861/viewer/core/src/datamodels/cad/styling/NodeCollectionDeserializer.ts#L23)

___

#### ViewerState

 **ViewerState**: `Object`

##### Type declaration

| Name | Type |
| :------ | :------ |
| `camera` | `Object` |
| `camera.position` | `Object` |
| `camera.position.x` | `number` |
| `camera.position.y` | `number` |
| `camera.position.z` | `number` |
| `camera.target` | `Object` |
| `camera.target.x` | `number` |
| `camera.target.y` | `number` |
| `camera.target.z` | `number` |
| `models` | [ModelState](#modelstate)[] |

##### Defined in

[viewer/core/src/utilities/ViewStateHelper.ts:16](https://github.com/cognitedata/reveal/blob/d2769861/viewer/core/src/utilities/ViewStateHelper.ts#L16)

___

#### WellKnownUnit

 **WellKnownUnit**: ``"Meters"`` \| ``"Centimeters"`` \| ``"Millimeters"`` \| ``"Micrometers"`` \| ``"Kilometers"`` \| ``"Feet"`` \| ``"Inches"`` \| ``"Yards"`` \| ``"Miles"`` \| ``"Mils"`` \| ``"Microinches"``

Units supported by [Cognite3DModel](#classes_cognite_revealcognite3dmodelmd).

##### Defined in

[viewer/core/src/public/migration/types.ts:23](https://github.com/cognitedata/reveal/blob/d2769861/viewer/core/src/public/migration/types.ts#L23)

### Variables

#### DefaultNodeAppearance

 `Const` **DefaultNodeAppearance**: `Object`

A set of default node appearances used in Reveal.

##### Type declaration

| Name | Type |
| :------ | :------ |
| `Default` | [NodeAppearance](#nodeappearance) |
| `Ghosted` | [NodeAppearance](#nodeappearance) |
| `Hidden` | [NodeAppearance](#nodeappearance) |
| `Highlighted` | `Object` |
| `Highlighted.color?` | [`number`, `number`, `number`] |
| `Highlighted.outlineColor?` | [NodeOutlineColor](#enums_cognite_revealnodeoutlinecolormd) |
| `Highlighted.renderGhosted?` | `boolean` |
| `Highlighted.renderInFront?` | `boolean` |
| `Highlighted.visible?` | `boolean` |
| `InFront` | [NodeAppearance](#nodeappearance) |
| `Outlined` | [NodeAppearance](#nodeappearance) |

##### Defined in

[viewer/packages/cad-styling/src/NodeAppearance.ts:84](https://github.com/cognitedata/reveal/blob/d2769861/viewer/packages/cad-styling/src/NodeAppearance.ts#L84)

___

#### revealEnv

 `Const` **revealEnv**: `Object`

Used to specify custom url for worker/wasm files
in cases when you need the latest local files or CDN is blocked by CSP.

##### Type declaration

| Name | Type |
| :------ | :------ |
| `publicPath` | `string` |

##### Defined in

[viewer/packages/utilities/src/revealEnv.ts:9](https://github.com/cognitedata/reveal/blob/d2769861/viewer/packages/utilities/src/revealEnv.ts#L9)

### Functions

#### registerCustomNodeCollectionType

 **registerCustomNodeCollectionType**\<T\>(`nodeCollectionType`, `deserializer`): `void`

##### Type parameters

| Name | Type |
| :------ | :------ |
| `T` | `T`: [NodeCollectionBase](#classes_cognite_revealnodecollectionbasemd)\<T\> |

##### Parameters

| Name | Type |
| :------ | :------ |
| `nodeCollectionType` | [TypeName](#typename) |
| `deserializer` | (`descriptor`: [NodeCollectionDescriptor](#nodecollectiondescriptor), `context`: [NodeCollectionSerializationContext](#nodecollectionserializationcontext)) => `Promise`\<T\> |

##### Returns

`void`

##### Defined in

[viewer/core/src/datamodels/cad/styling/NodeCollectionDeserializer.ts:146](https://github.com/cognitedata/reveal/blob/d2769861/viewer/core/src/datamodels/cad/styling/NodeCollectionDeserializer.ts#L146)


<a name="modules_cognite_reveal_extensions_datasourcemd"></a>

[@cognite/reveal](#readmemd) / [Modules](#modulesmd) / @cognite/reveal/extensions/datasource

## Module: @cognite/reveal/extensions/datasource

### Table of contents

#### Classes

- [CdfModelIdentifier](#classes_cognite_reveal_extensions_datasourcecdfmodelidentifiermd)

#### Interfaces

- [DataSource](#interfaces_cognite_reveal_extensions_datasourcedatasourcemd)
- [ModelDataProvider](#interfaces_cognite_reveal_extensions_datasourcemodeldataprovidermd)
- [ModelIdentifier](#interfaces_cognite_reveal_extensions_datasourcemodelidentifiermd)
- [ModelMetadataProvider](#interfaces_cognite_reveal_extensions_datasourcemodelmetadataprovidermd)
- [NodesApiClient](#interfaces_cognite_reveal_extensions_datasourcenodesapiclientmd)


<a name="modules_cognite_reveal_toolsmd"></a>

[@cognite/reveal](#readmemd) / [Modules](#modulesmd) / @cognite/reveal/tools

## Module: @cognite/reveal/tools

### Table of contents

#### Enumerations

- [BingMapImageFormat](#enums_cognite_reveal_toolsbingmapimageformatmd)
- [BingMapType](#enums_cognite_reveal_toolsbingmaptypemd)
- [Corner](#enums_cognite_reveal_toolscornermd)
- [HereMapImageFormat](#enums_cognite_reveal_toolsheremapimageformatmd)
- [HereMapScheme](#enums_cognite_reveal_toolsheremapschememd)
- [HereMapType](#enums_cognite_reveal_toolsheremaptypemd)
- [MapProviders](#enums_cognite_reveal_toolsmapprovidersmd)
- [MapboxImageFormat](#enums_cognite_reveal_toolsmapboximageformatmd)
- [MapboxMode](#enums_cognite_reveal_toolsmapboxmodemd)
- [MapboxStyle](#enums_cognite_reveal_toolsmapboxstylemd)

#### Classes

- [AxisViewTool](#classes_cognite_reveal_toolsaxisviewtoolmd)
- [Cognite3DViewerToolBase](#classes_cognite_reveal_toolscognite3dviewertoolbasemd)
- [DebugCameraTool](#classes_cognite_reveal_toolsdebugcameratoolmd)
- [DebugLoadedSectorsTool](#classes_cognite_reveal_toolsdebugloadedsectorstoolmd)
- [ExplodedViewTool](#classes_cognite_reveal_toolsexplodedviewtoolmd)
- [GeomapTool](#classes_cognite_reveal_toolsgeomaptoolmd)
- [HtmlOverlayTool](#classes_cognite_reveal_toolshtmloverlaytoolmd)
- [Keyframe](#classes_cognite_reveal_toolskeyframemd)
- [TimelineTool](#classes_cognite_reveal_toolstimelinetoolmd)

#### Type aliases

- [AbsolutePosition](#absoluteposition)
- [AxisBoxCompassConfig](#axisboxcompassconfig)
- [AxisBoxConfig](#axisboxconfig)
- [AxisBoxFaceConfig](#axisboxfaceconfig)
- [BingMapConfig](#bingmapconfig)
- [DebugLoadedSectorsToolOptions](#debugloadedsectorstooloptions)
- [HereMapConfig](#heremapconfig)
- [HtmlOverlayCreateClusterDelegate](#htmloverlaycreateclusterdelegate)
- [HtmlOverlayOptions](#htmloverlayoptions)
- [HtmlOverlayPositionUpdatedDelegate](#htmloverlaypositionupdateddelegate)
- [MapConfig](#mapconfig)
- [MapboxConfig](#mapboxconfig)
- [RelativePosition](#relativeposition)
- [TimelineDateUpdateDelegate](#timelinedateupdatedelegate)

### Type aliases

#### AbsolutePosition

 **AbsolutePosition**: `Object`

Absolute position in pixels.

##### Type declaration

| Name | Type |
| :------ | :------ |
| `xAbsolute` | `number` |
| `yAbsolute` | `number` |

##### Defined in

[viewer/packages/tools/src/AxisView/types.ts:47](https://github.com/cognitedata/reveal/blob/d2769861/viewer/packages/tools/src/AxisView/types.ts#L47)

___

#### AxisBoxCompassConfig

 **AxisBoxCompassConfig**: `Object`

Configuration of the compass.

##### Type declaration

| Name | Type | Description |
| :------ | :------ | :------ |
| `fontColor?` | `THREE.Color` | - |
| `fontSize?` | `number` | - |
| `labelDelta?` | `number` | Offset in radians of the orientation indicator. |
| `ringLabel?` | `string` | Label of the orientation indicator. Defaults to 'N' for north. |
| `tickColor?` | `THREE.Color` | - |

##### Defined in

[viewer/packages/tools/src/AxisView/types.ts:79](https://github.com/cognitedata/reveal/blob/d2769861/viewer/packages/tools/src/AxisView/types.ts#L79)

___

#### AxisBoxConfig

 **AxisBoxConfig**: `Object`

Configuration of [AxisViewTool](#classes_cognite_reveal_toolsaxisviewtoolmd).

##### Type declaration

| Name | Type | Description |
| :------ | :------ | :------ |
| `animationSpeed?` | `number` | How long the camera animation lasts when clicking a face of the orientation box. |
| `compass?` | [AxisBoxCompassConfig](#axisboxcompassconfig) | Configuration of the compass "base" of the tool. |
| `faces?` | `Object` | Configuration for each of the faces of the orientation box. Note that Reveal uses a right-handed Y up coordinate system, which might differ from the original model space. To account for this, you might want to reassign labels of the faces. |
| `faces.xNegativeFace?` | [AxisBoxFaceConfig](#axisboxfaceconfig) | - |
| `faces.xPositiveFace?` | [AxisBoxFaceConfig](#axisboxfaceconfig) | - |
| `faces.yNegativeFace?` | [AxisBoxFaceConfig](#axisboxfaceconfig) | - |
| `faces.yPositiveFace?` | [AxisBoxFaceConfig](#axisboxfaceconfig) | - |
| `faces.zNegativeFace?` | [AxisBoxFaceConfig](#axisboxfaceconfig) | - |
| `faces.zPositiveFace?` | [AxisBoxFaceConfig](#axisboxfaceconfig) | - |
| `position?` | [AbsolutePosition](#absoluteposition) \| [RelativePosition](#relativeposition) | Position, either absolute or relative. |
| `size?` | `number` | Size in pixels of the axis tool. |

##### Defined in

[viewer/packages/tools/src/AxisView/types.ts:10](https://github.com/cognitedata/reveal/blob/d2769861/viewer/packages/tools/src/AxisView/types.ts#L10)

___

#### AxisBoxFaceConfig

 **AxisBoxFaceConfig**: `Object`

Configuration of each face of the orientation box.

##### Type declaration

| Name | Type | Description |
| :------ | :------ | :------ |
| `faceColor?` | `THREE.Color` | - |
| `fontColor?` | `THREE.Color` | - |
| `fontSize?` | `number` | - |
| `label?` | `string` | Label of the respective face, e.g. 'X' or 'Right'. |
| `outlineColor?` | `THREE.Color` | - |
| `outlineSize?` | `number` | - |

##### Defined in

[viewer/packages/tools/src/AxisView/types.ts:64](https://github.com/cognitedata/reveal/blob/d2769861/viewer/packages/tools/src/AxisView/types.ts#L64)

___

#### BingMapConfig

 **BingMapConfig**: `Object`

##### Type declaration

| Name | Type | Description |
| :------ | :------ | :------ |
| `APIKey` | `string` | Bing Map API Key |
| `provider` | [BingMap](#bingmap) | - |
| `type?` | [BingMapType](#enums_cognite_reveal_toolsbingmaptypemd) | The type of the map used. |

##### Defined in

[viewer/packages/tools/src/Geomap/MapConfig.ts:121](https://github.com/cognitedata/reveal/blob/d2769861/viewer/packages/tools/src/Geomap/MapConfig.ts#L121)

___

#### DebugLoadedSectorsToolOptions

 **DebugLoadedSectorsToolOptions**: `Object`

##### Type declaration

| Name | Type |
| :------ | :------ |
| `colorBy?` | ``"depth"`` \| ``"lod"`` \| ``"loadedTimestamp"`` \| ``"random"`` |
| `leafsOnly?` | `boolean` |
| `sectorPathFilterRegex?` | `string` |
| `showDetailedSectors?` | `boolean` |
| `showDiscardedSectors?` | `boolean` |
| `showSimpleSectors?` | `boolean` |

##### Defined in

[viewer/packages/tools/src/DebugLoadedSectorsTool.ts:12](https://github.com/cognitedata/reveal/blob/d2769861/viewer/packages/tools/src/DebugLoadedSectorsTool.ts#L12)

___

#### HereMapConfig

 **HereMapConfig**: `Object`

##### Type declaration

| Name | Type | Description |
| :------ | :------ | :------ |
| `APIKey` | `string` | Here map API Key |
| `appCode?` | `string` | Service application code token. |
| `imageFormat?` | [HereMapImageFormat](#enums_cognite_reveal_toolsheremapimageformatmd) | Map image tile format |
| `provider` | [HereMap](#heremap) | - |
| `scheme?` | `string` | Specifies the view scheme |
| `size?` | `number` | Returned tile map image size. The following sizes are supported: - 256 - 512 - 128 (deprecated, although usage is still accepted) |
| `style?` | [HereMapType](#enums_cognite_reveal_toolsheremaptypemd) | The type of maps to be used. |

##### Defined in

[viewer/packages/tools/src/Geomap/MapConfig.ts:133](https://github.com/cognitedata/reveal/blob/d2769861/viewer/packages/tools/src/Geomap/MapConfig.ts#L133)

___

#### HtmlOverlayCreateClusterDelegate

 **HtmlOverlayCreateClusterDelegate**: (`overlayElements`: \{ `htmlElement`: `HTMLElement` ; `userData`: `any`  }[]) => `HTMLElement`

Callback that is triggered when a set of overlays are clustered together in
[HtmlOverlayTool](#classes_cognite_reveal_toolshtmloverlaytoolmd).

##### Type declaration

 (`overlayElements`): `HTMLElement`

###### Parameters

| Name | Type |
| :------ | :------ |
| `overlayElements` | \{ `htmlElement`: `HTMLElement` ; `userData`: `any`  }[] |

###### Returns

`HTMLElement`

##### Defined in

[viewer/packages/tools/src/HtmlOverlay/HtmlOverlayTool.ts:31](https://github.com/cognitedata/reveal/blob/d2769861/viewer/packages/tools/src/HtmlOverlay/HtmlOverlayTool.ts#L31)

___

#### HtmlOverlayOptions

 **HtmlOverlayOptions**: `Object`

Options for an overlay added using [HtmlOverlayTool.add](#add).

##### Type declaration

| Name | Type | Description |
| :------ | :------ | :------ |
| `positionUpdatedCallback?` | [HtmlOverlayPositionUpdatedDelegate](#htmloverlaypositionupdateddelegate) | Callback that is triggered whenever the position of the overlay is updated. Optional. |
| `userData?` | `any` | Optional user specified data that is provided to the [HtmlOverlayCreateClusterDelegate](#htmloverlaycreateclusterdelegate) and [HtmlOverlayPositionUpdatedDelegate](#htmloverlaypositionupdateddelegate). |

##### Defined in

[viewer/packages/tools/src/HtmlOverlay/HtmlOverlayTool.ts:41](https://github.com/cognitedata/reveal/blob/d2769861/viewer/packages/tools/src/HtmlOverlay/HtmlOverlayTool.ts#L41)

___

#### HtmlOverlayPositionUpdatedDelegate

 **HtmlOverlayPositionUpdatedDelegate**: (`element`: `HTMLElement`, `position2D`: `THREE.Vector2`, `position3D`: `THREE.Vector3`, `distanceToCamera`: `number`, `userData`: `any`) => `void`

Callback that is triggered whenever the 2D position of an overlay is updated
in [HtmlOverlayTool](#classes_cognite_reveal_toolshtmloverlaytoolmd).

##### Type declaration

 (`element`, `position2D`, `position3D`, `distanceToCamera`, `userData`): `void`

###### Parameters

| Name | Type |
| :------ | :------ |
| `element` | `HTMLElement` |
| `position2D` | `THREE.Vector2` |
| `position3D` | `THREE.Vector3` |
| `distanceToCamera` | `number` |
| `userData` | `any` |

###### Returns

`void`

##### Defined in

[viewer/packages/tools/src/HtmlOverlay/HtmlOverlayTool.ts:19](https://github.com/cognitedata/reveal/blob/d2769861/viewer/packages/tools/src/HtmlOverlay/HtmlOverlayTool.ts#L19)

___

#### MapConfig

 **MapConfig**: \{ `latlong`: `LatLongPosition`  } & [BingMapConfig](#bingmapconfig) \| [HereMapConfig](#heremapconfig) \| [MapboxConfig](#mapboxconfig) \| `OpenStreetMapConfig`

Maps Configuration of [GeomapTool](#classes_cognite_reveal_toolsgeomaptoolmd).

##### Defined in

[viewer/packages/tools/src/Geomap/MapConfig.ts:198](https://github.com/cognitedata/reveal/blob/d2769861/viewer/packages/tools/src/Geomap/MapConfig.ts#L198)

___

#### MapboxConfig

 **MapboxConfig**: `Object`

##### Type declaration

| Name | Type | Description |
| :------ | :------ | :------ |
| `APIKey` | `string` | Mapbox API Key |
| `id` | `string` | Map style or map ID if the mode is set to MAP_ID |
| `mode?` | [MapboxMode](#enums_cognite_reveal_toolsmapboxmodemd) | Map tile access mode - MapboxMode.STYLE - MapboxMode.MAP_ID |
| `provider` | [MapboxMap](#mapboxmap) | - |
| `tileFormat?` | [MapboxImageFormat](#enums_cognite_reveal_toolsmapboximageformatmd) | Map image tile format |
| `useHDPI?` | `boolean` | Flag to indicate if should use high resolution tiles |

##### Defined in

[viewer/packages/tools/src/Geomap/MapConfig.ts:169](https://github.com/cognitedata/reveal/blob/d2769861/viewer/packages/tools/src/Geomap/MapConfig.ts#L169)

___

#### RelativePosition

 **RelativePosition**: `Object`

Relative position from a corner of the viewer
and a given padding.

##### Type declaration

| Name | Type |
| :------ | :------ |
| `corner` | [Corner](#enums_cognite_reveal_toolscornermd) |
| `padding` | `THREE.Vector2` |

##### Defined in

[viewer/packages/tools/src/AxisView/types.ts:56](https://github.com/cognitedata/reveal/blob/d2769861/viewer/packages/tools/src/AxisView/types.ts#L56)

___

#### TimelineDateUpdateDelegate

 **TimelineDateUpdateDelegate**: (`event`: \{ `activeKeyframe`: [Keyframe](#classes_cognite_reveal_toolskeyframemd) \| `undefined` ; `date`: `Date` ; `endDate`: `Date` ; `startDate`: `Date`  }) => `void`

Delegate for Timeline Date update

##### Type declaration

 (`event`): `void`

###### Parameters

| Name | Type |
| :------ | :------ |
| `event` | `Object` |
| `event.activeKeyframe` | [Keyframe](#classes_cognite_reveal_toolskeyframemd) \| `undefined` |
| `event.date` | `Date` |
| `event.endDate` | `Date` |
| `event.startDate` | `Date` |

###### Returns

`void`

##### Defined in

[viewer/packages/tools/src/Timeline/types.ts:8](https://github.com/cognitedata/reveal/blob/d2769861/viewer/packages/tools/src/Timeline/types.ts#L8)


<!-- SOURCE_END: reveal/documentation\versioned_docs\version-2.x\API Reference.md -->

================================================================================


<!-- SOURCE_START: reveal/documentation\versioned_docs\version-2.x\API_Reference_header.md -->
## File: reveal/documentation\versioned_docs\version-2.x\API_Reference_header.md

`@cognite/reveal` has three modules:
- [@cognite/reveal](#module-cognitereveal) is the main module and has the main entry point of Reveal, [`Cognite3DViewer`](#class-cognite3dviewer). CAD models are represented by [`Cognite3DModel`](#class-cognite3dmodel) and points clouds by [`CognitePointCloudModel`](#class-cognitepointcloudmodel).
- [@congite/reveal/tools](#module-cogniterevealtools) contains a set of tools, e.g. [`AxisViewTool`](#class-axisviewtool), [`GeomapTool`](#class-geomaptool), [`TimelineTool`](#class-timelinetool), [`ExplodedViewTool`](#class-explodedviewtool) and [`HtmlOverlayTool`](#class-htmloverlaytool) that works with `Cognite3DViewer`.
- [@cognite/reveal/extensions/datasource](#module-cogniterevealextensionsdatasource) allows providing custom data sources for geometry and model metadata.

<!-- SOURCE_END: reveal/documentation\versioned_docs\version-2.x\API_Reference_header.md -->

================================================================================


<!-- SOURCE_START: reveal/documentation\versioned_docs\version-2.x\concepts.md -->
## File: reveal/documentation\versioned_docs\version-2.x\concepts.md

---
id: concepts
title: Concepts
description: This page explains some basic concepts implemented by Reveal.
---

This page explains some basic concepts implemented by Reveal.

## CAD model structure

CAD models are typically structured in a tree structure, where larger components or groups of components are located near the root and individual pieces of equipment are located in near the leaf nodes. The hierarchy is defined by the source model and is processed and stored in CDF for efficient lookup and traversal. In Reveal, each of the nodes in the tree is called a "3D node". Each of the 3D nodes can have associated properties defined by the source model. Note that not all 3D nodes will contain geometry - in fact in most models only leaf nodes will contain geometry.

### Tree indices and node IDs

When processing 3D models in CDF, two IDs associated with each 3D node; tree index and node ID.

Tree indices are running numbers starting at 0 at the root 3D node increased by one for each traversed node. Node IDs are generated based on the name and placement in the node hierarchy. Node IDs are considered stable as long as the placement in the hierarchy is unchanged, while tree indices are not. For this reason, [Asset Mappings](https://docs.cognite.com/api/v1/#tag/3D-Asset-Mapping) are based on node IDs.

Reveal provides functionality for mapping between the two concepts by using `Cognite3DModel.mapNodeIdsToTreeIndices` and `Cognite3DModel.mapTreeIndicesToNodeIds`. Note however that these functions can be slow.


<!-- SOURCE_END: reveal/documentation\versioned_docs\version-2.x\concepts.md -->

================================================================================


<!-- SOURCE_START: reveal/documentation\versioned_docs\version-2.x\examples\antialiasing.mdx -->
## File: reveal/documentation\versioned_docs\version-2.x\examples\antialiasing.mdx

---
id: antialiasing
title: Enabling anti-aliasing
description: Shows the effects of the different anti-aliasing approaches supported by Reveal
---

import useBaseUrl from '@docusaurus/useBaseUrl';


Anti-aliasing is a technique to reduce the aliasing effects in the rendered result, and improves visual quality.

Reveal supports several anti-aliasing modes:
- [Fast approximate anti-aliasing (FXAA)](https://en.wikipedia.org/wiki/Fast_approximate_anti-aliasing) - a fast 
technique that reduces anti-aliasing at modest cost.
- [Multi-sample anti-antialiasing (MSAA)](https://en.wikipedia.org/wiki/Multisample_anti-aliasing) - hardware supported
supersampling technique. This produces high-quality anti-aliasing at some performance cost depending on how many samples
is taken per output pixel. Reveal supports 4, 8 or 16 samples. This mode is only supported on WebGL 2 (currently this 
means desktop computers, most Android devices, but not iOS - see [caniuse.com](https://caniuse.com/webgl2)).
- MSAA + FXAA - a combination of both modes where an FXAA pass is performed after the MSAA pass.
- Disabled - no anti-aliasing.

<a target='_blank' href={useBaseUrl('/img/antialias-comparison.png')}>
  <img src={useBaseUrl('/img/antialias-comparison.png')} alt="Comparison of different anti-aliasing techniques" />
</a>
It might be hard to notice the difference in a scaled image, click the image to open the full resolution image.

By default [Fast approximate anti-aliasing (FXAA)](https://en.wikipedia.org/wiki/Fast_approximate_anti-aliasing) is used.
This mode works on both WebGL 1 and WebGL 2. If WebGL 2 isn't supported, FXAA is used as a fallback.


```jsx
const viewer = new Cognite3DViewer(
  { 
    sdk: client, 
    antiAliasingHint: 'msaa4+fxaa' 
  });
```

Modes currently supported are `'disabled'`, `'fxaa'`, `'msaa2+fxaa'`, `'msaa4+fxaa'`, `'msaa8+fxaa'`, `'msaa16+fxaa'`,
`'msaa2'`, `'msaa4'`, `'msaa8'` and `'msaa16'`.

:::note
The examples in this documentation use `msaa4+fxaa`.
:::

<!-- SOURCE_END: reveal/documentation\versioned_docs\version-2.x\examples\antialiasing.mdx -->

================================================================================


<!-- SOURCE_START: reveal/documentation\versioned_docs\version-2.x\examples\axisviewtool.mdx -->
## File: reveal/documentation\versioned_docs\version-2.x\examples\axisviewtool.mdx

---
id: axisviewtool
title: Axis cross tool
description: Axis cross tool to show orientation of the model.
---

import { DemoWrapper } from '@site/versioned_docs/version-2.x/components/DemoWrapper';
import useBaseUrl from '@docusaurus/useBaseUrl';

To effectivly navigate a 3D model it is often useful to have an helper to show the orientation of the model. The `AxisViewTool` is
a configurable overlay that shows the current orientation of the model. It also reacts to clicks, orienting the camera to face
clicked.

<img src={useBaseUrl('/img/axisviewtool.png')} alt="AxisViewTool" />

The appearance of the tool is highly configurable, with options to set:
- Background color of each face of the orientation box
- Labels, font size and font color of each face
- Outline width and color of each face
- Compass north-orientation, label, font color and size
- Compass tick color
- Animation speed when clicking a face of the orientation box
- Size and padding
- Position - either absolute, or relative to a corner of the viewer

<DemoWrapper />

## Basic example

By default, the axis tool will be placed in the lower right corner
of the viewer, and initialization is very easy:

```jsx runnable-2x
// import { AxisViewTool } from '@cognite/reveal/tools';

new AxisViewTool(viewer);
```

## Customize axis cross position

It is possible to specify a custom position for the axis tool.
Position can be specified using either `RelativePosition` or `AbsolutePosition`.
Using `AbsolutePosition` will position the axis cross at a specific position within the canvas of the viewer.

:::note
The Y axis is positive upwards, meaning that 0 is at the bottom of the viewer.
:::

```jsx runnable-2x
// import { AxisViewTool } from '@cognite/reveal/tools';

new AxisViewTool(viewer, {
  position: {
    xAbsolute: viewer.domElement.clientWidth / 2 - 64,
    yAbsolute: 10
  },
  size: 128
});
```



Using `RelativePosition` will position the axis cross relative to a specific corner (will also handle screen resize).

```jsx runnable-2x
// import { AxisViewTool, Corner } from '@cognite/reveal/tools';

const axisConfig = {
  position: {
    corner: Corner.TopRight,
    padding: new THREE.Vector2(50, 50)
  }
};
new AxisViewTool(viewer, axisConfig);
```

## Customize axis cross size and animation speed

When clicking a face of the orientation box, the camera will move to face the respective direction.
The animation speed of this movement can be configured. Size of the axis tool is also configurable.


```jsx runnable-2x
// import { AxisViewTool } from '@cognite/reveal/tools';

const axisConfig = {
  animationSpeed: 2000, // Suuuuuper-slow
  size: 256 // In pixels
};
new AxisViewTool(viewer, axisConfig);
```


## Customize orientation faces

Each of the faces of the orientation box can be styled.

```jsx runnable-2x
// import { AxisViewTool } from '@cognite/reveal/tools';

const axisConfig = {
  faces: {
    xNegativeFace: {
      label: 'Left',
      fontColor: new THREE.Color('white'),
      faceColor: new THREE.Color(0x660000)
    },
    xPositiveFace: {
      label: 'Right',
      fontColor: new THREE.Color('white'),
      faceColor: new THREE.Color(0x660000)
    },
    yNegativeFace: {
      label: 'Down',
      fontColor: new THREE.Color('white'),
      faceColor: new THREE.Color(0x006600)
    },
    yPositiveFace: {
      label: 'Top',
      fontColor: new THREE.Color('white'),
      faceColor: new THREE.Color(0x006600)
    },
    zNegativeFace: {
      label: 'Back',
      fontColor: new THREE.Color('white'),
      faceColor: new THREE.Color(0x000066)
    },
    zPositiveFace: {
      label: 'Front',
      fontColor: new THREE.Color('white'),
      faceColor: new THREE.Color(0x000066)
    }
  }
};
new AxisViewTool(viewer, axisConfig);
```

In addition to the settings demonstrated above, the following settings can be set:
- `fontSize` - size of the label font. Automatically determined when undefined
- `outlineColor` - color of the outline of each of the faces
- `outlineSize` - width of the outline. Automatically determine when undefined

## Customize compass

The compass at the base can be customized to change the orientation label (which
defaults to N for North), font color and size and tick color.


```jsx runnable-2x
// import { AxisViewTool } from '@cognite/reveal/tools';

const axisConfig = {
  compass: {
    ringLabel: 'S',
    labelDelta: 0, // Place at South
    fontColor: new THREE.Color('white'),
    tickColor: new THREE.Color('white')
  }
};
new AxisViewTool(viewer, axisConfig);
```


<!-- SOURCE_END: reveal/documentation\versioned_docs\version-2.x\examples\axisviewtool.mdx -->

================================================================================


<!-- SOURCE_START: reveal/documentation\versioned_docs\version-2.x\examples\cad-2doverlay.mdx -->
## File: reveal/documentation\versioned_docs\version-2.x\examples\cad-2doverlay.mdx

---
id: cad-2doverlay
title: HTML overlays
description: Demo shows how to add an HTML overlay over 3D objects.
---

import { DemoWrapper } from '@site/versioned_docs/version-2.x/components/DemoWrapper';
import useBaseUrl from '@docusaurus/useBaseUrl';

A common requirement for a 3D application is to add information overlays hovering over 3D objects
to provide details or draw the attention to a given point. This can be done by placing HTML elements over the 3D canvas
that follows the object it's attached to. `HtmlOverlayTool` is a convinience tool to manage overlays. The tool
also supports "clustering", i.e. that overlapping elements are combined into a single element to avoid clustering.

Note that these overlays always will be placed on top of the 3D viewer, they will not be hidden when the object is
obscured by other objects. To achieve this it's necessary to use custom 3D objects.

<DemoWrapper />

Attaching HTML elements to 3D objects/positions requires the following operations:

1. Create an HTML element and apply style `position: absolute` to the element. There also some other recommended
   styles that should be applied (see below).
2. Determine 3D world coordinate of the pivot point (e.g. using intersection when user clicks an object)
3. Attach overlay using `HtmlOverlayTool.add`.

This will attach the overlay to the 2D position corresponding to the 3D coordinate, then it will provide the updated
coordinate whenever navigating the viewer.

:::note
The following CSS style is recommended for overlays:
```css
position: absolute; /* Required */

/* Anchor to the center of the element and ignore events */
transform: translate(-50%, -50%);
pointer-events: none;
touch-action: none;
user-select: none;
```
:::

```jsx runnable-2x
// import { HtmlOverlayTool } from '@cognite/reveal/tools';

function createOverlay() {
  const element = document.createElement('div');
  element.innerText = `Overlay!`;
  element.style.cssText = `
    position: absolute;

    /* Anchor to the center of the element and ignore events */
    transform: translate(-50%, -50%);
    pointer-events: none;
    touch-action: none;
    user-select: none;

    /* Make it look nice */
    padding: 10px;
    minHeight: 50px;
    color: #fff;
    background: #232323da;
    borderRadius: 0.25em;
    border: '#ffffff22 solid 2px;
  `;
  return element;
}

// Attach overlay on click
const overlays = new HtmlOverlayTool(viewer);
viewer.on('click', async event => {
  // Find 3D coordinate of what the user clicks
  const intersection = await viewer.getIntersectionFromPixel(event.offsetX, event.offsetY);
  if (intersection) {
    const el = createOverlay();
    overlays.add(el, intersection.point);
    // Remove overlay after 5 seconds
    setTimeout(() => overlays.remove(el), 5000);
  }
});
```

It's also possible to apply styling based on the position of the
overlay, e.g. to vary the opacity of the overlay based on distance
from the camera. To do this, provide an `options`-argument with a
`positionUpdatedCallback` to `HtmlOverlayTool.add`. This
callback is triggered every time the HTML overlay is updated.

```js runnable-2x
// import { HtmlOverlayTool } from '@cognite/reveal/tools';

function createOverlay(pressure) {
  const color = pressure < 30 ? '#fff' : (pressure > 80 ? '#aa1100' : '#aaaa00');
  const element = document.createElement('div');
  element.innerText = `${pressure} PSI`;
  element.style.cssText = `
    position: absolute;

    /* Anchor to the center of the element and ignore events */
    transform: translate(-50%, -50%);
    pointer-events: none;
    touch-action: none;
    user-select: none;

    /* Make it look nice */
    padding: 10px;
    color: ${color};
    background: #232323da;
    borderRadius: 0.25em;
    border: '#ffffff22 solid 2px;
  `;
  return element;
}

const overlays = new HtmlOverlayTool(viewer);
viewer.on('click', async event => {
  // Find 3D coordinate of what the user clicks
  const intersection = await viewer.getIntersectionFromPixel(event.offsetX, event.offsetY);
  if (intersection) {
    const pressure = Math.floor(Math.random() * 110);
    const el = createOverlay(pressure);
    const options = {
      positionUpdatedCallback: (element, position2D, position3D, distanceToCamera, userData) => {
        // Compute opacity based on distance to camera
        const opacity = 0.3 + 0.7 * (1.0 - (Math.min(Math.max(distanceToCamera, 10), 110) - 10) / 100.0);
        element.style.opacity = opacity;
      }
    };
    overlays.add(el, intersection.point, options);
  }
});
```

As shown above, overlays can be removed using `remove()`. It is also possible to remove all
overlays by calling `clear()` or by disposing the tool using `dispose()`. The tool cannot
be used after calling `dispose()`.

## Clustering overlays

The overlay tool also support clustering of elements. When enabled, the tool will detect
overlapping HTML elements and combine them into a single element by invoking a callback
factory for creating a "composite" element. This is useful to avoid cluttering when theres
a high number of overlays in the view.

Clustering is enabled by providing an options-argument to the constructor or `HtmlOverlayTool`
and provide a cluster mode and a callback for creating a "composite element" based on
a set a set of clustered overlay elements. Currently the only mode supported is `overlapByScreenSpace`
which causes overlay elements that overlap on screen to be replaced with a composite
element.

Each overlay added to `HtmlOverlayTool` may have assosciated, custom `userData`. This data
can be used to create custom labels for composite elements.

In the following example, overlays are added on click in the model. When overlays overlap
they are replaced with composite elements. `userData` is used to display a value range
of the underlying overlay elements.

```js runnable-2x
// import { HtmlOverlayTool } from '@cognite/reveal/tools';

function createOverlay(text) {
  const element = document.createElement('div');
  element.innerText = text;
  element.style.cssText = `
    position: absolute;

    /* Anchor to the center of the element and ignore events */
    transform: translate(-50%, -50%);
    pointer-events: none;
    touch-action: none;
    user-select: none;

    /* Make it look nice */
    padding: 10px;
    minHeight: 50px;
    color: #fff;
    background: #232323da;
    borderRadius: 0.25em;
    border: '#ffffff22 solid 2px;
  `;
  return element;
}

function createClusterElementCallback(cluster) {
  const minPressure = cluster.reduce((min, x) => Math.min(x.userData.pressure, min), Infinity);
  const maxPressure = cluster.reduce((max, x) => Math.max(x.userData.pressure, max), -Infinity);
  const compositeElement = createOverlay(`${minPressure}-${maxPressure} PSI`);
  compositeElement.style.color = '#999';
  return compositeElement;
}

const overlays = new HtmlOverlayTool(viewer, {
    clusteringOptions: { mode: 'overlapInScreenSpace', createClusterElementCallback }
  });
viewer.on('click', async event => {
  // Find 3D coordinate of what the user clicks
  const intersection = await viewer.getIntersectionFromPixel(event.offsetX, event.offsetY);
  if (intersection) {
    const pressure = Math.floor(Math.random() * 110);
    const el = createOverlay(`${pressure} PSI`);
    overlays.add(el, intersection.point, { userData: { pressure } });
  }
});
```

<!-- SOURCE_END: reveal/documentation\versioned_docs\version-2.x\examples\cad-2doverlay.mdx -->

================================================================================


<!-- SOURCE_START: reveal/documentation\versioned_docs\version-2.x\examples\cad-3dobjects.mdx -->
## File: reveal/documentation\versioned_docs\version-2.x\examples\cad-3dobjects.mdx

---
id: cad-3dobjects
title: Add custom 3D objects
description: Extend the scene with custom ThreeJS objects.
---

import { DemoWrapper } from '@site/versioned_docs/version-2.x/components/DemoWrapper';
import useBaseUrl from '@docusaurus/useBaseUrl';

Sometimes it's useful to add custom content to the 3D scene to model data Reveal doesn't
support or to customize the 3D environment. Reveal supports this by using the
`Cognite3DViewer.addObject3D`-function which accepts [ThreeJS](https://threejs.org/) objects.

:::note
There are a few restrictions to the 3D content that is to be combined with Reveal models:
- Reveal uses an "implicit lighting model", i.e. no lights are added to the scene. If you
need lights this needs to be added to the viewer scene.
- Geometry is expected to use "default depth testing", meaning
[`THREE.Material.depthTest`](https://threejs.org/docs/#api/en/materials/Material.depthTest) must be `true`,
[`THREE.Material.depthWrite`](https://threejs.org/docs/#api/en/materials/Material.depthWrite) must  `true` and
[`THREE.Material.depthFunc`](https://threejs.org/docs/#api/en/materials/Material.depthFunc) must be `LessEqualDepth`.
You might experience unexpected results if you are using materials where this doesn't hold.
- Objects with opacity less than 1.0 will appear transparent regardless of if
[`THREE.Material.transparent`](https://threejs.org/docs/?q=Material#api/en/materials/Material.transparent) is `true` or
`false`. The final composited image is always blended as if
[`THREE.Material.blendDst`](https://threejs.org/docs/?q=Material#api/en/materials/Material.blendDst) is
`OneMinusSrcAlphaFactor` and the blending settings on the material won't have any effect on the composition.
:::

<!-- :::tip
Reveal uses an "implicit lighting model", i.e. no lights are added to the scene. If you
need lights this needs to be added to the viewer scene.
::: -->

<DemoWrapper />

## Adding markers to the scene on clicks

The following example reacts to clicks in the scene and adds markers to the positions clicked.

```jsx runnable
const markerGeometry = new THREE.SphereBufferGeometry(1, 10, 10);
const markerMaterial = new THREE.MeshBasicMaterial({
  color: 'blue',
  transparent: true,
  opacity: 0.7
});
viewer.on('click', async event => {
  const intersection = await viewer.getIntersectionFromPixel(event.offsetX, event.offsetY);
  if (intersection) {
    const marker = new THREE.Mesh(markerGeometry, markerMaterial);
    marker.position.copy(intersection.point);
    viewer.addObject3D(marker);
  }
});
```

## Add environment

To make a model feel more natural it might be useful to add an environment. The following
example adds sky and a sea effect for the example oil rig.

<img
  src={useBaseUrl('/img/cad-skyandocean.png')}
  alt="Oil rig with sky and ocean"
/>

Below you'll find [an interactive example](#interactive-example), but first lets walk through
the different parts.
See the bottom of this page for an interactive example.

First, let's encapsulate the model in a large sky-textured sphere to create an illusion of
skies. The sphere map is available from [Free HDR - EXR SKIES-blog](http://freepanorama.blogspot.com/).

```js
const modelCenterAtSeaLevel = model
  .getModelBoundingBox()
  .getCenter(new THREE.Vector3());
modelCenterAtSeaLevel.y = 0.0;

// Skybox
const skyBox = new THREE.Mesh(
  new THREE.SphereBufferGeometry(3000, 15, 15),
  new THREE.MeshBasicMaterial({
    side: THREE.BackSide,
    // Skybox texture from http://freepanorama.blogspot.com/2010/01/sky7-spherical.html
    map: new THREE.TextureLoader().load(skyUrl),
  })
);
skyBox.position.copy(modelCenterAtSeaLevel);
viewer.addObject3D(skyBox);
```

This looks a bit better, but the oil rig appears to be floating mid-air at this point. Lets
add an ocean. A plane is rendered at the sea level.

```js
// Water
const waterGeometry = new THREE.PlaneBufferGeometry(6000, 6000, 63, 63);

const material = new THREE.MeshBasicMaterial({
  map: new THREE.TextureLoader().load(
      'https://threejs.org/examples/textures/water.jpg',
      (texture) => {
      texture.wrapS = texture.wrapT = THREE.RepeatWrapping;
    }),
  color: { value: new THREE.Color(0x0099ff)},
  side: THREE.DoubleSide
});

const water = new THREE.Mesh(waterGeometry, material);
// Make the ocean horizontal
water.rotation.x = -Math.PI / 2;
water.position.copy(modelCenterAtSeaLevel);
viewer.addObject3D(water);
```

### Interactive example

Below is the complete code for adding a skybox and ocean to the scene.

```jsx runnable
const modelCenterAtSeaLevel = model
  .getModelBoundingBox()
  .getCenter(new THREE.Vector3());
modelCenterAtSeaLevel.y = 0.0;

// Skybox
const skyBox = new THREE.Mesh(
  new THREE.SphereBufferGeometry(3000, 15, 15),
  new THREE.MeshBasicMaterial({
    side: THREE.BackSide,
    // Skybox texture from http://freepanorama.blogspot.com/2010/01/sky7-spherical.html
    map: new THREE.TextureLoader().load(skyUrl),
  })
);
skyBox.position.copy(modelCenterAtSeaLevel);
viewer.addObject3D(skyBox);

// Water
const waterGeometry = new THREE.PlaneBufferGeometry(6000, 6000, 63, 63);

const material = new THREE.MeshBasicMaterial({
  map: new THREE.TextureLoader().load(
      'https://upload.wikimedia.org/wikipedia/commons/thumb/b/b3/Water_texture_1390894_Nevit.jpg/2048px-Water_texture_1390894_Nevit.jpg',
      (texture) => {
      texture.wrapS = texture.wrapT = THREE.RepeatWrapping;
    }),
  color: { value: new THREE.Color(0x0099ff)},
  side: THREE.DoubleSide
});

const water = new THREE.Mesh(waterGeometry, material);
// Make the ocean horizontal
water.rotation.x = -Math.PI / 2;
water.position.copy(modelCenterAtSeaLevel);
viewer.addObject3D(water);

//Make sure the Skybox & ocean plane have applied textures
setTimeout(() => {
  viewer.requestRedraw();
}, 100);

```


<!-- SOURCE_END: reveal/documentation\versioned_docs\version-2.x\examples\cad-3dobjects.mdx -->

================================================================================


<!-- SOURCE_START: reveal/documentation\versioned_docs\version-2.x\examples\cad-basic.mdx -->
## File: reveal/documentation\versioned_docs\version-2.x\examples\cad-basic.mdx

---
id: cad-basic
title: Loading CAD models
description: Demo shows how to load 3d models from CDF with Cognite3DViewer.
---

`Cognite3DViewer` is a component that eases the migration from [@cognite/3d-viewer](https://www.npmjs.com/package/@cognite/3d-viewer).
It has mostly the same API and could be used when you don't need to control the scene or render loop,
i.e., just want to view some 3d models from CDF.

import { DemoWrapper } from '@site/versioned_docs/version-2.x/components/DemoWrapper';

<DemoWrapper />

```jsx
import { CogniteClient } from '@cognite/sdk';
import { Cognite3DViewer } from '@cognite/reveal';

const client = new CogniteClient({
  appId: 'cognite.reveal.docs.Cognite3DViewer',
});

// to view models from CDF authentication is required
await client.loginWithOAuth({ type: 'CDF_OAUTH', options: { project: 'publicdata' }}); // With Cognite authentication flow

// some div in your html page for Cognite3DViewer to insert a canvas
const domElement = document.getElementById('canvas-wrapper');

async function main() {
  const viewer = new Cognite3DViewer({ sdk: client, domElement });

  // load a model and add it on 3d scene
  // https://console.cognitedata.com/publicdata/3d-models/4715379429968321/revisions/5688854005909501
  const model = await viewer.addModel({
    modelId: 3356984403684032,
    revisionId: 6664823881595566,
  });
  viewer.loadCameraFromModel(model);

  // call viewer.dispose() when you don't need the viewer anymore
}
main();
```

Models can be temporarily hidden using `Cognite3DModel.visible`. Note that
the viewer must be explicitly re-rendered after setting the visibility flag:

```js runnable-2x
model.visible = false;
viewer.requestRedraw();

setTimeout(() => {
  model.visible = true;
  viewer.requestRedraw();
}, 5000);
```

Hiding models doesn't free any memory occupied by the model and should only be used
to temporarily hide a model when it's expected that it will shortly be shown again.

To also reclaim memory and permanently unloading the model, use
`Cognite3DViewer.removeModel()`:

```js runnable-2x
viewer.removeModel(model)
```

## Only loading a part of the model

In some cases, it might be useful to restrict the area for which geometry is loaded to only show a partial
view. This can be done using a `geometryFilter` which allows only loading geometry within a provided box:

```js runnable-2x
viewer.models.forEach(x => viewer.removeModel(x));

async function addFilteredModel() {
  const model = await viewer.addModel({
    modelId: 3356984403684032,
    revisionId: 6664823881595566,
    geometryFilter: {
      // Only load geometry inside a box around origin with 50x50 horizontal extent and 10 vertical extent.
      boundingBox: new THREE.Box3(new THREE.Vector3(75, 50, 49), new THREE.Vector3(125, 100, 59))
    }
  });
  viewer.fitCameraToModel(model);
}
addFilteredModel();
```

By default, the bounds provided must be in "CDF coordinates". This is e.g. suitable if you are retrieving coordinates
directly from the [Nodes API](https://docs.cognite.com/api/v1/#operation/get3DNodes) to for instance show the area
around a given node. If the coordinates are in "Reveal coordinates" (i.e. in
[the WebGL coordinate system](https://www.tutorialspoint.com/webgl/webgl_basics.htm)) the `geometryFilter` can be
set up using `isBoundingBoxInModelCoordinates`:

```js runnable-2x
viewer.models.forEach(x => viewer.removeModel(x));

async function addFilteredModel() {
  const model = await viewer.addModel({
    modelId: 3356984403684032,
    revisionId: 6664823881595566,
    geometryFilter: {
      // Only load geometry inside a box around origin with 50x50 horizontal extent and 10 vertical extent.
      boundingBox: new THREE.Box3(new THREE.Vector3(75, 49, -100), new THREE.Vector3(125, 59, -50)),
      // Instruct Reveal that the coordinates already are relative to the coordinates of the model
      isBoundingBoxInModelCoordinates: true
    }
  });
  viewer.fitCameraToModel(model);
}
addFilteredModel();
```


<!-- SOURCE_END: reveal/documentation\versioned_docs\version-2.x\examples\cad-basic.mdx -->

================================================================================


<!-- SOURCE_START: reveal/documentation\versioned_docs\version-2.x\examples\cad-explode.mdx -->
## File: reveal/documentation\versioned_docs\version-2.x\examples\cad-explode.mdx

---
id: cad-explode
title: Exploded view tool
description: Demo use the exploded view tool to explode and inspect a given node subtree.
---

import { DemoWrapper } from '@site/versioned_docs/version-2.x/components/DemoWrapper';
import useBaseUrl from '@docusaurus/useBaseUrl';

This section describes the exploded view tool, which contains helper functions and logic for inspecting and exploding a given asset.
The constructor of this tool needs to be supplied with a [tree index](../concepts.md) which is the tree index of the root of the asset, and an instance of the `Cognite3DModel` that the asset belongs to.

:::note
For performance reasons, the root tree index must have a subtree size of less than 1000, else it will throw an error.
:::

<DemoWrapper />

`ExplodedViewTool` contains two instance methods: `expand` and `reset`.
`expand` takes a float describing how far the individual nodes should be expanded (this will vary based on the initial vector between the node and root).
`reset` resets the tool and any transform that has been applied to any nodes.

:::note
`ExplodedViewTool` contains a promise: `readyPromise`, which indicates when the tool is ready to be used.
This indicates if the tool has cached necessary data from the Cognite Fusion API to determine the individual locations of the nodes in the subtree.
:::

Below is an example that expands a given pipe asset (that has a tree index of `570730`) which is animated by a sine function.
Another good usecase would be to bind the `expand` function to a slider which the user can manipulate to expand the asset.


```jsx runnable-2x
// import { ExplodedViewTool } from '@cognite/reveal/tools';
async function animate() {
  const rootTreeIndex = 570730;

  const explodeTool = new ExplodedViewTool(rootTreeIndex, model);

  model.setDefaultNodeAppearance(DefaultNodeAppearance.Hidden);
  const explodedIndices = new TreeIndexNodeCollection(
    await model.getSubtreeTreeIndices(rootTreeIndex)
  );
  model.assignStyledNodeCollection(explodedIndices, DefaultNodeAppearance.Default);

  const rootBoundingBox = await model.getBoundingBoxByTreeIndex(rootTreeIndex);
  viewer.fitCameraToBoundingBox(rootBoundingBox, 0);
  await explodeTool.readyPromise;

  const clock = new THREE.Clock(true);
  clock.start();

  setInterval(() =>{
    const elapsedTime = clock.getElapsedTime();
    const expandRadius = Math.sin(elapsedTime) * 0.5 + 0.5;
    explodeTool.expand(expandRadius);
  }, 20);
}
animate();
```


<!-- SOURCE_END: reveal/documentation\versioned_docs\version-2.x\examples\cad-explode.mdx -->

================================================================================


<!-- SOURCE_START: reveal/documentation\versioned_docs\version-2.x\examples\cad-save-viewerstate.mdx -->
## File: reveal/documentation\versioned_docs\version-2.x\examples\cad-save-viewerstate.mdx

---
id: cad-save-viewerstate
title: Saving viewer state
description: Demo shows how to save viewerstate of 3d models from CDF with Cognite3DViewer.
---
import { DemoWrapper } from '@site/versioned_docs/version-2.x/components/DemoWrapper';

Reveal supports saving the camera state and styled filters that have been applied to the loaded model(s).
This functionality can help support sharing links and local storage of a given view.
Internally the input to a given filter is stored and is replayed when restoring the view.
This usually means that substantially less data needs to be serialized in order to share the given state of the viewer.
The serialized JSON blob also keeps information about styling/filtering of the model by storing all [styled sets](./cad-styling.mdx).

<DemoWrapper />

## Getting the viewer state
In the example below we apply some filter to our loaded model using the `NodeCollectionBase` type from [Styling Cad models](./cad-styling.mdx).
Then we can call the ```viewer.getViewState()``` function which return a serialized JSON blob containing the view state.
Depending on the application, the view state can be additionally transformed into e.g. a URL parameter and transferred through a link.

In the example below, we keep simply print it to the developer console.

```js runnable-2x
const allPipes = new PropertyFilterNodeCollection(sdk, model);
allPipes.executeFilter({'PDMS': {'Type': 'PIPE'}});
model.setDefaultNodeAppearance(DefaultNodeAppearance.Ghosted);
model.assignStyledNodeCollection(allPipes, { renderGhosted: false, color: [40, 200, 20] } );

console.log(JSON.stringify(viewer.getViewState(), null, 2));
```

## Setting the viewer state
Restoring the viewer state is simply a matter of feeding back the JSON blob retrieved from ```const myState = viewer.getViewState()``` into ```viewer.setViewState(myState)```.
In the example below, a previously stored state is applied which applies a red color to nodes that have an attribute `'PDMS.Type'`.

:::note
Setting the viewer state assumes that model has already been loaded.
An error will be thrown if a given state is loaded for a model which does not exist.
:::

```js runnable-2x

const myState = {
  "camera": {
    "position": {
      "x": 165.603,
      "y": 41.649,
      "z": -10.940
    },
    "target": {
      "x": 130.537,
      "y": 49.138,
      "z": -119.095
    }
  },
  "models": [
    {
      "defaultNodeAppearance": {
        "renderGhosted": true
      },
      "modelId": 3356984403684032,
      "revisionId": 6049696084265067,
      "styledSets": [
        {
          "token": "PropertyFilterNodeCollection",
          "state": {
            "PDMS": {
              "Type": "PIPE"
            }
          },
          "options": {
            "requestPartitions": 1
          },
          "appearance": {
            "renderGhosted": false,
            "color": [
              200,
              40,
              20
            ]
          }
        }
      ]
    }
  ]
};

viewer.setViewState(myState);
```

## Serializing and deserializing custom node collections

When working with styled custom node collections, the Reveal viewer needs to know how to serialize and deserialize the set.
Serialization is handled through the abstract method `serialize` which needs to be implemented when extending `NodeCollectionBase`.
The output of `serialize` is of type `SerializedNodeCollection` and contains a `token` which is used to recreate
the `NodeCollectionBase` during deserialization, and a `state` object which contains the data needed to restore
the `NodeCollectionBase`. It is up to the application developer to fill this state object with any nessesary
data needed to recreate the state of the `NodeCollectionBase`. An optional `options` object can also be supplied
containing any metadata for loading data (e.g. the number of API calls to fetch the needed data in parallel).
The contents returned from `serialize` is contained in the result of `getViewState`.

In addition to serialization, Reveal also needs to know how to recreate the custom `NodeCollectionBase` during
deserialization. This is done by calling the free-function `registerCustomNodeCollectionType` with the same `token`
defined by the custom `NodeCollectionBase` and a lambda function which instantiates and restore the state of
the `NodeCollectionBase`. The lambda function has two parameters: the `descriptor` containing the state and
options which should be applied to the `NodeCollectionBase` and the context containing an instance of
the [CogniteClient from the Cognite SDK](https://docs.cognite.com/dev/guides/sdk/js/) and the `Cognite3DModel`
which the `NodeCollectionBase` was originally applied to. It is up to the application developer how and if they
want to use the context and/or descriptor, but it is provided as a convinience.

An example of a simple custom `NodeCollectionBase` can be seen below.
For more information on creating a custom `NodeCollectionBase`, see [create custom node collections](cad-styling-custom).

```js
// import { IndexSet, NodeCollectionBase, registerCustomNodeCollectionType } from '@cognite/reveal';

class MyNodeCollection extends NodeCollectionBase {

  isLoading = false;
  _indexSet = new IndexSet();

  constructor(model) {
    // token used for serialization / deserialization
    super('MyNodeCollection');

    for (let i = 0; i < model.nodeCount / 2; i++) {
      this._indexSet.add(i);
    }
  }

  getIndexSet() {
    return this._indexSet;
  }

  serialize() {
    return {
      token: this.classToken,
      state: this._indexSet.toRangeArray()
    }
  }

  clear() {
    this._indexSet.clear();
    this.notifyChanged();
  }
}

// Register deserializer for type
registerCustomNodeCollectionType(
  'MyNodeCollection',
  (descriptor, context) => {
    return Promise.resolve(new MyNodeCollection(context.model));
  }
);
```


<!-- SOURCE_END: reveal/documentation\versioned_docs\version-2.x\examples\cad-save-viewerstate.mdx -->

================================================================================


<!-- SOURCE_START: reveal/documentation\versioned_docs\version-2.x\examples\cad-styling-assets.mdx -->
## File: reveal/documentation\versioned_docs\version-2.x\examples\cad-styling-assets.mdx

---
id: cad-styling-assets
title: Filtering nodes by assets
describe: Applying styles to assets and assosciated asset mappings from Cognite Fusion
---

import { DemoWrapper } from '@site/versioned_docs/version-2.x/components/DemoWrapper';

In Cognite Data Fusion, assets and asset hierarchies are digital representations of objects
or groups of objects from the physical world. Assets can be assosciated with different data
types, such as documents, time series and events and serves as a "hub" to look up data for
physical equipment. See [Cognite Data Fusion documentation](https://docs.cognite.com/dev/concepts/resource_types/assets.html)
for more information about assets.

3D nodes can be ["asset mapped"](https://docs.cognite.com/api/v1/#tag/3D-Asset-Mapping) to
assets in Cognite Data Fusion. Reveal supports styling nodes mapped to an asset by using
`AssetNodeCollection`.

<DemoWrapper />

# Style all asset mapped nodes

If no options are provided, `AssetNodeCollection` includes all asset mapped nodes
for the model:

```js runnable-2x
const allAssetMappedNodes = new AssetNodeCollection(sdk, model);
// When no asset ID is provided, all nodes mapped to assets are included
allAssetMappedNodes.executeFilter({});
model.setDefaultNodeAppearance(DefaultNodeAppearance.Ghosted);
model.assignStyledNodeCollection(allAssetMappedNodes, { renderGhosted: false, outlineColor: NodeOutlineColor.Cyan } );
```

# Style a given asset

It is also possible to only style nodes mapped to a single asset. Assets are identified by their
'ID':

```js runnable-2x
const assetNodes = new AssetNodeCollection(sdk, model);
assetNodes.executeFilter({ assetId: 4222791488928479 });
model.setDefaultNodeAppearance(DefaultNodeAppearance.Ghosted);
model.assignStyledNodeCollection(assetNodes, { renderGhosted: false, outlineColor: NodeOutlineColor.Cyan } );
```

Note that there is no way to list multiple assets directly with `AssetNodeCollection`, but This
can be achieved by using `UnionNodeCollection` in combination with several `AssetNodeCollection`s.

# Style assets within an area

To support proximity lookups, Reveal supports styling assets within a certain area defined by a bounding box. It's
sufficient for an asset to intersect the provided bounds, it doesn't need to be fully inside.

:::note
The bounding box is defined in "Reveal coordinates" -
[a right handed, Y up coordinate system](https://www.youtube.com/watch?v=TGbMzoJqV7c) - which might differ
from the "native model coordinates" stored in Cognite Fusion. `AssetNodeCollection` will automatically map from
"Reveal coordinates" to "native model coordinates" using `Cognite3DModel.mapBoxFromModelToCdfCoordinates`.
:::

```js runnable-2x
const areaOfInterest = new THREE.Box3().setFromCenterAndSize(
  new THREE.Vector3(140, 67, -110),
  new THREE.Vector3(10, 5, 10)
);
const assetsWithinAreaNodes = new AssetNodeCollection(sdk, model);
assetsWithinAreaNodes.executeFilter({ boundingBox: areaOfInterest });
model.setDefaultNodeAppearance(DefaultNodeAppearance.Hidden);
model.assignStyledNodeCollection(assetsWithinAreaNodes, { visible: true } );

// Simple helper to show the area of interest
const boxMaterial = new THREE.MeshBasicMaterial({wireframe: true, color: 0xffff00 });
const boxMesh = new THREE.Mesh(new THREE.BoxGeometry(), boxMaterial);
areaOfInterest.getCenter(boxMesh.position);
areaOfInterest.getSize(boxMesh.scale);
viewer.addObject3D(boxMesh);
```


<!-- SOURCE_END: reveal/documentation\versioned_docs\version-2.x\examples\cad-styling-assets.mdx -->

================================================================================


<!-- SOURCE_START: reveal/documentation\versioned_docs\version-2.x\examples\cad-styling-custom.mdx -->
## File: reveal/documentation\versioned_docs\version-2.x\examples\cad-styling-custom.mdx

---
id: cad-styling-custom
title: Custom node collections
describe: Create custom node collections to filter based on custom data sources and mechanisms
---

import { DemoWrapper } from '@site/versioned_docs/version-2.x/components/DemoWrapper';

In many cases applications will need to filter 3D nodes by some custom data source or mechanism. This
is done by extending the `NodeCollectionBase`-class. This class generates an `IndexSet` and
provides notification when the set has changed. Implementations should
be non-blocking - slow operations should be executed async and the set should
be incrementally updated to avoid blocking the viewer.

<DemoWrapper />

# Simple, static node collection

```js runnable-2x
// import { NodeCollectionBase, DefaultNodeAppearance } from '@cognite/reveal';

class MyNodeCollection extends NodeCollectionBase {
  isLoading = false;

  constructor(model) {
    super('MyNodeCollection'); // Token for (de)serialization
    this._nodeCount = model.nodeCount;
    this._indexSet = new IndexSet();
    for (let i = 0; i < model.nodeCount; i += 100) {
      this._indexSet.add(i);
    }
  }

  getIndexSet() {
    return this._indexSet;
  }

  clear() {
    this._indexSet.clear();
    this.notifyChanged();
  }
}

const myNodes = new MyNodeCollection(model);
model.setDefaultNodeAppearance(DefaultNodeAppearance.Ghosted);
model.assignStyledNodeCollection(myNodes, { renderGhosted: false, color: [40, 200, 20] } );
```

See also [guide on (de)serializing node collections](cad-save-viewerstate#serializing-and-deserializing-custom-node-colletions).

# Details about IndexSet

`IndexSet` is a specialized implementation of [`Set<number>`](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Set)
that is optimized for storing ranges of numbers. This is a common case for nodes as typically a
subtree will have the same styling applied.

Although `IndexSet` supports adding and removing individual elements using `add()` and `remove()`, the best
performance is achieved by using `addRange()` and `removeRange()` whenever possible.

Also note that changes to the underlying `IndexSet` held by a `NodeCollectionBase` isn't automatically propagated
to be visible in the rendered result. In order to trigger an update after changing the underlying `IndexSet`,
use `NodeCollectionBase.notifyChanged()` (protected function). Note that this function should not be triggered too often
as it might take some time to apply the changes.


<!-- SOURCE_END: reveal/documentation\versioned_docs\version-2.x\examples\cad-styling-custom.mdx -->

================================================================================


<!-- SOURCE_START: reveal/documentation\versioned_docs\version-2.x\examples\cad-styling-nodes.mdx -->
## File: reveal/documentation\versioned_docs\version-2.x\examples\cad-styling-nodes.mdx

---
id: cad-styling-nodes
title: Filtering nodes by node properties
describe: Applying styles to nodes based on node properties/attributes
---

import { DemoWrapper } from '@site/versioned_docs/version-2.x/components/DemoWrapper';

3D nodes may have associated attribute/property data. Reveal allows for filtering based on
these properties, allowing queries such as "all pipes", "nodes within module P600" or "nodes
with status S5". Combinations are also possible by using `UnionNodeCollection` and `IntersectionNodeCollection`.

`PropertyFilterNodeCollection` is used to query nodes based on node properties. It's possible to specify
multiple criterias which will be combined using `AND` - i.e. all criterias must be met for a node
to match. To emulate `OR`, use `UnionNodeCollection`.

Note that if a node is in a `PropertyFilterNodeCollection` all of its children will also be
in the set.

:::note
The test model used in the documentation site is lacking good node properties and the quality of
the examples shown is therefor restricted as a result of this. To best utilize the filtering APIs
we recommend providing a rich 3D models with a good set of high-quality attributes associated with
the nodes.
:::

<DemoWrapper />

## Show all pipes

If nodes in the 3D model has an attribute `'PDMS.Type'`, `PropertyFilterNodeCollection` can be used to
retrieve nodes of a certain type. In the following example, only pipes are accepted:

```js runnable-2x
// import { PropertyFilterNodeCollection, DefaultNodeAppearance } from '@cognite/reveal';

const allPipes = new PropertyFilterNodeCollection(sdk, model);
allPipes.executeFilter({ PDMS: { Type: 'PIPE' } });
model.setDefaultNodeAppearance(DefaultNodeAppearance.Ghosted);
model.assignStyledNodeCollection(allPipes, {
  renderGhosted: false,
  color: [40, 200, 20],
});
```

## Partitioning requests

For filters that match a lot of nodes, [paritioned requests](https://docs.cognite.com/api/v1/#section/Parallel-retrieval)
might increase the performance radically by fetching result from the server in parallel.
To partition requests, provide the number of partitions using the `requestPartitions`-option
to the `PropertyFilterNodeCollection`-constructor:

```js runnable-2x
// import { PropertyFilterNodeCollection, DefaultNodeAppearance, NodeOutlineColor } from '@cognite/reveal';

const nodesFromFile = new PropertyFilterNodeCollection(sdk, model, {
  requestPartitions: 10,
});
// All nodes originating from a given file
nodesFromFile.executeFilter({ Item: { 'Source File': 'PRO-S_CD-MUM.nwd' } });
model.setDefaultNodeAppearance(DefaultNodeAppearance.Ghosted);
model.assignStyledNodeCollection(nodesFromFile, {
  renderGhosted: false,
  outlineColor: NodeOutlineColor.Orange,
});
```

To compare speed-up, set `requestPartitions` to `1`.

## Combining filters

Often one would want to match multiple criterias of the same type. Lets say we want to find all
mechanical equipment with purpose 'STU'. We can either execute this as a single query, or as two
seperate queries.

When doing this as a single query, no `IntersectionNodeCollection` is necessary and the code is quite compact:

```js runnable-2x
// import { PropertyFilterNodeCollection, DefaultNodeAppearance } from '@cognite/reveal';

const stuMechNodes = new PropertyFilterNodeCollection(sdk, model);
stuMechNodes.executeFilter({ PDMS: { ':capDisc': 'MECH', Purpose: 'STU' } });

model.setDefaultNodeAppearance(DefaultNodeAppearance.Ghosted);
model.assignStyledNodeCollection(stuMechNodes, {
  renderGhosted: false,
  color: [40, 200, 20],
});
```

Combining two separate queries requires the use of `IntersectionNodeCollection`:

```js runnable-2x
// import { PropertyFilterNodeCollection, IntersectionNodeCollection, DefaultNodeAppearance } from '@cognite/reveal';

const mechNodes = new PropertyFilterNodeCollection(sdk, model);
mechNodes.executeFilter({ PDMS: { ':capDisc': 'MECH' } });

const stuNodes = new PropertyFilterNodeCollection(sdk, model);
stuNodes.executeFilter({ PDMS: { Purpose: 'STU' } });

const combined = new IntersectionNodeCollection();
combined.add(mechNodes);
combined.add(stuNodes);

model.setDefaultNodeAppearance(DefaultNodeAppearance.Ghosted);
model.assignStyledNodeCollection(combined, {
  renderGhosted: false,
  color: [40, 200, 20],
});
```

The two approaches has their pros and cons. Often it will be faster to combine the
filters into a single query as this will reduce the result set returned from the
server. However, if the different combinations will be configured run-time (e.g.
the user will want to show 'ARCH'-nodes within the 'STU'-purpose) it might
be better to use two separate queries and combine the results. Also, the latter
approach also allows for more complex types of filters.

## Matching nodes with a list of values

There might be situations where an application has a long list of identifiers of nodes to show
or style. In this case, `SinglePropertyFilterNodeCollection` might be useful. This class will match
one node property towards many values - e.g. a node identifier towards a list of IDs. This node set
supports thoushands of IDs - `PropertyFilterNodeCollection` only supports one matching value.

```js runnable-2x
// import { SinglePropertyFilterNodeCollection, DefaultNodeAppearance } from '@cognite/reveal';

const nodeSet = new SinglePropertyFilterNodeCollection(sdk, model, {
  requestPartitions: 10,
});
const names = [];
for (let q = 240; q < 300; q++) {
  for (let e = 1; e <= 9; e++) {
    const name = `/60-EL-9016-Q${q}-E0${e}`;
    names.push(name);
  }
}
nodeSet.executeFilter('Item', 'Name', names);

model.setDefaultNodeAppearance(DefaultNodeAppearance.Ghosted);
model.assignStyledNodeCollection(nodeSet, {
  renderGhosted: false,
  outlineColor: NodeOutlineColor.Orange,
});
```

## Inverting filters

Often it is interesting to invert results from filters to find elements that does not match the query. This
can be done using `InvertedNodeCollection`.

```js runnable-2x
// import { PropertyFilterNodeCollection, InvertedNodeCollection, DefaultNodeAppearance } from '@cognite/reveal';

const livingQuarters = new PropertyFilterNodeCollection(sdk, model);
livingQuarters.executeFilter({ Item: { Name: '/SLP/S/LQ' } });
const notLivingQuarters = new InvertedNodeCollection(model, livingQuarters);

model.setDefaultNodeAppearance({
  outlineColor: NodeOutlineColor.Red,
  color: [120, 50, 0],
});
model.assignStyledNodeCollection(notLivingQuarters, {
  outlineColor: NodeOutlineColor.NoOutline,
  color: [0, 0, 0],
});
```


<!-- SOURCE_END: reveal/documentation\versioned_docs\version-2.x\examples\cad-styling-nodes.mdx -->

================================================================================


<!-- SOURCE_START: reveal/documentation\versioned_docs\version-2.x\examples\cad-styling.mdx -->
## File: reveal/documentation\versioned_docs\version-2.x\examples\cad-styling.mdx

---
id: cad-styling
title: Introduction
describe: Reveal supports styling individual nodes by assigning appearance profiles.
---

import { DemoWrapper } from '@site/versioned_docs/version-2.x/components/DemoWrapper';

Reveal supports flexible styling of individual nodes (objects) in the 3D model. Styles can
be compromised of several attributes to customize the visualization through the `NodeAppearance`-type:

| Field           | Field type                  | Description                                           |
| --------------- | --------------------------- | ----------------------------------------------------- |
| `color`         | `[number, number, number]?` | Override color by setting RGB values in range [0,255], e.g `[255, 0, 0]` (red). `[0, 0, 0]` means no override. |
| `visible`       | `boolean?`                  | When false, the node(s) will be invisible             |
| `renderInFront` | `boolean?`                  | When true, the node(s) are rendered in front of other geometry |
| `renderGhosted` | `boolean?`                  | When true, the node(s) are rendered in transparent gray |
| `outlineColor`  | `NodeOutlineColor?`         | Adds an outline to the objects from a set of predefined colors |

These attributes can be combined to customize the look of nodes. For convinience, a set of default appearances are
provided in the `DefaultNodeAppearance`-constant:

| Appearance           | Description                                                                      |
| ------------------- | -------------------------------------------------------------------------------- |
| `Default`           | No overrides, use colors from the CAD model                                      |
| `Ghosted`           | Render node(s) 'ghosted', i.e. make them translucent gray                        |
| `Outlined`          | Outline node(s) with a white outline                                             |
| `Hidden`            | Hide node(s)                                                                     |
| `InFront`           | Render node(s) in front of all other nodes                                       |
| `Highlighted`       | Highlight the node(s). Combination of `InFront`, `Outlined` and a custom color   |

These "appearance profiles"/styles are assigned to one or more nodes defined by a `NodeCollectionBase`-object. A `NodeCollectionBase`
identifies 3D nodes by `treeIndex`. There are several implementations of `NodeCollectionBase`:

| Class                          |                                                                                  |
| ------------------------------ | -------------------------------------------------------------------------------- |
| `TreeIndexNodeCollection`      | A set of nodes defined by a list of tree indices. Can be updated with a new set of indices. |
| `PropertyFilterNodeCollection` | A set of nodes defined by a query to the 3D backend to find nodes that matches one or more properties/attributes. |
| `SinglePropertyFilterNodeCollection` | Similar to `PropertyFilterNodeCollection`, but only matches one node property to many values (e.g. for looking up nodes with a list of IDs). |
| `AssetNodeCollection`          | A set of nodes defined by [asset mappings](https://docs.cognite.com/api/v1/#tag/3D-Asset-Mapping) linking 3D nodes to [assets](https://docs.cognite.com/dev/concepts/resource_types/assets.html). |
| `InvertedNodeCollection`       | Inverts the result of a node collection to match the opposite nodes (i.e. a NOT-operator). |
| `UnionNodeCollection`          | Combines nodes from several node colletions by finding the [set union](https://en.wikipedia.org/wiki/Union_(set_theory)"). |
| `InersectionNodeCollection`    | Combines nodes from several node colletions by finding the [set intersection](https://en.wikipedia.org/wiki/Intersection_(set_theory)). |
| `NodeCollectionBase`           | Abstract base class for node collections. Extend to [implement custom node collections](cad-styling-custom). |

It's also possible [implement custom node collections](cad-styling-custom). This can be useful for specialized queries or to load
sets from custom data sources.

`Cognite3DModel.assignStyledNodeCollection` and `unassignStyledNodeCollection` is used to manage styled set associated with a model:

```js
// import { TreeIndexNodeCollection, DefaultNodeAppearance, NumericRange } from '@cognite/reveal'

// you can start from binding styles to an empty set and populate it later
const myNodes = new TreeIndexNodeCollection();
model.assignStyledNodeCollection(myNodes, DefaultNodeAppearance.Highlighted);

// later you might want to update the set as user does something, for example, selects an asset
// note that other styling sets might have different API for updates, for example `executeFilter`
const nodeTreeIndex = 0;
const nodeSubtreeSize = 100000;
myNodes.updateSet(new IndexSet(new NumericRange(nodeTreeIndex, nodeSubtreeSize)));

// if you want to change appearance of your existing set you can assign a new style
model.assignStyledNodeCollection(myNodes, DefaultNodeAppearance.Ghosted);

// and when you don't need to style this set anymore, just remove it completely
model.unassignStyledNodeCollection(myNodes);
```

Styling is "additive", meaning that styles from multiple styled sets are accumulated per node, much
like how multiple classes are combined when working with CSS. Styled sets are applied first-in first-out (FIFO)
in the order the are added.

```js
// import { TreeIndexNodeCollection, DefaultNodeAppearance, NumericRange } from '@cognite/reveal'

// you can start from binding styles to an empty set and populate it later
const set1 = new TreeIndexNodeCollection(NumericRange.createFromInterval(0, 100));
model.assignStyledNodeCollection(set1, { color: [ 255, 0, 0 ] });
const set2 = new TreeIndexNodeCollection(NumericRange.createFromInterval(50, 150));
model.assignStyledNodeCollection(set2, { outlineColor: NodeOutlineColor.White });

// [0..49] will be colored red
// [50..100] will be colored red and have a white outline
// [101..150] will have the default color and a white outline
```

:::note
The API for styling nodes has changed substantially since Reveal 1.x and upgrading Reveal
will require manual steps to implement styling.
:::

## Examples

<DemoWrapper />

To play around with the different styling options, we can use `Cognite3DModel.setDefaultNodeAppearance`.
A few example styles are shown below.

### Ghosted style

```js runnable-2x
model.setDefaultNodeAppearance(DefaultNodeAppearance.Ghosted);
```

### Highlighted

```js runnable-2x
model.setDefaultNodeAppearance(DefaultNodeAppearance.Highlighted);
```

### Outline and custom color

By creating custom styles you have a powerful tool to customize how the model looks.

```js runnable-2x
model.setDefaultNodeAppearance({ color: [0, 200, 0], outlineColor: NodeOutlineColor.Orange });
```

Note that `outlineColor` restricts the choice of color to a predefined set. This is
a restriction imposed to reduce storage space for outlines to only 3 bits. The choice
of colors is:

```ts
enum NodeOutlineColor {
  NoOutline = 0,
  White = 1,
  Black = 2,
  Cyan = 3,
  Blue = 4,
  Green = 5,
  Red = 6,
  Orange = 7
}
```


<!-- SOURCE_END: reveal/documentation\versioned_docs\version-2.x\examples\cad-styling.mdx -->

================================================================================


<!-- SOURCE_START: reveal/documentation\versioned_docs\version-2.x\examples\cad-transform-override.mdx -->
## File: reveal/documentation\versioned_docs\version-2.x\examples\cad-transform-override.mdx

---
id: cad-transform-override
title: Override CAD nodes transforms
description: Reveal supports overriding transforms of individual objects by providing tree indices to identify 3D nodes
---

import { DemoWrapper } from '@site/versioned_docs/version-2.x/components/DemoWrapper';
import useBaseUrl from '@docusaurus/useBaseUrl';

Reveal supports overriding transforms of individual objects by providing [tree indices to identify 3D nodes.](../concepts.md)

Note that any transformation override is applied with respect to the THREE.js world coordinate space. Also note that the node transform is not accounted for when determining geometry to load. Due to this node transforms shouldn't apply too drastic changes to the position and extend of the nodes. For model wide changes `Cognite3DModel.setModelTransformation` should be used instead.
Also note that non-uniform scaling of nodes are not currently supported and may give unexpected results.

## Examples

<DemoWrapper />

### Setting node transform

Setting the transform of a given node is done by `Cognite3DModel.setNodeTransformByTreeIndex` and takes a tree index,
a matrix transformation and a flag if the transformation also should be applied to children of the given node.



```jsx runnable-2x
const transform = new THREE.Matrix4();
transform.setPosition(new THREE.Vector3(10, 10, 0));
model.setNodeTransformByTreeIndex(532261, transform, true);
```

### Reset node transform


Resetting the transformation is done with `Cognite3DModel.resetNodeTransformByTreeIndex` and takes the given tree index,

and a flag that determines if the node transform reset also should be applied to any child nodes of the given tree index.

```jsx runnable-2x
model.resetNodeTransformByTreeIndex(532261, true);
```

### Animations

Creating animations is a matter of applying transformations multiple times. As stated above, any transformation

is applied in the global world coordinate system of THREE.js. This means that if you want to rotate a model around a given point (and not around the world origin),
you first need to transform the model to that given point, then rotate, then transform back into the world coordinate space. An example of this is done below to create an animation
of the crane rotating. First we get the center of the bounding box for node with id `533010` which is close to the base of the crane.
Then we set up an interval which triggers a function that transforms the entire crane (`532261`): first to the base of the crane, then rotates the model,
then transforms it back, thus giving us the wanted rotation. Keep in mind that [THREE.js uses column matrix notation](https://threejs.org/docs/#api/en/math/Matrix4), such that

the following statement:

```js
  const matrixOverride = modelToWorld.multiply(rotationMatrix.multiply(worldToModel));
```

first applies `worldToModel`, then `rotationMatrix` and finally `modelToWorld`.

```jsx runnable-2x
async function animate() {
  const boundingBox = await model.getBoundingBoxByTreeIndex(533010);
  const center = boundingBox.getCenter(new THREE.Vector3());

  const modelToWorld = new THREE.Matrix4();
  const worldToModel = new THREE.Matrix4();
  const rotationMatrix = new THREE.Matrix4();

  const clock = new THREE.Clock(true);
  clock.start();

  const intervalID = setInterval(function () {
    clock.getElapsedTime();

    modelToWorld.setPosition(center);
    worldToModel.getInverse(modelToWorld.clone());

    const newRotation = new THREE.Euler(0, -Math.PI * clock.elapsedTime / 20, 0);
    rotationMatrix.makeRotationFromEuler(newRotation);

    const matrixOverride = modelToWorld.multiply(rotationMatrix.multiply(worldToModel));

    model.setNodeTransformByTreeIndex(532261, matrixOverride, true);

    if (clock.elapsedTime >= 10) clearInterval(intervalID);
  }, 20);
}

animate();
```


<!-- SOURCE_END: reveal/documentation\versioned_docs\version-2.x\examples\cad-transform-override.mdx -->

================================================================================


<!-- SOURCE_START: reveal/documentation\versioned_docs\version-2.x\examples\click-reactions-cad.mdx -->
## File: reveal/documentation\versioned_docs\version-2.x\examples\click-reactions-cad.mdx

---
id: click-reactions-cad
title: Reacting to clicks in CAD models
description: Detecting intersections from clicks in CAD models
---

Determining clicks is important in applications with an interactive 3D model. Cognite Reveal supports
mappings clicks on the 2D rendered result to a 3D position and to determine what object is clicked.
`Cognite3DViewer.on('click', ...)` is used to detect clicks in the 3D model, while
`Cognite3DViewer.getIntersectionFromPixel` is used to determine clicked 3D world position and point from
a mouse click.

import { DemoWrapper } from '@site/versioned_docs/version-2.x/components/DemoWrapper';

<DemoWrapper />

## Detecting clicked objects

The following example detects intersections at clicked positions and marks the intersected positions
using a red sphere.

```js runnable-2x
viewer.on('click', async event => {
  const intersection = await viewer.getIntersectionFromPixel(
    event.offsetX, event.offsetY
  );
  if (intersection) {
    const toPresent = { treeIndex: intersection.treeIndex, nodeId: intersection.nodeID, point: intersection.point };
    alert(`Clicked object!: ${JSON.stringify(toPresent)}`);
  };
});
```

## Highlighting clicked objects

It's quite common to highlight clicked objects. This can be achieved by using [the node styling API](./cad-styling.mdx).

```js runnable-2x
const selectedNodes = new TreeIndexNodeCollection();
model.assignStyledNodeCollection(selectedNodes, DefaultNodeAppearance.Highlighted);

viewer.on('click', async event => {
  const intersection = await viewer.getIntersectionFromPixel(
    event.offsetX, event.offsetY
  );
  if (intersection) {
    // Replace current selection
    selectedNodes.updateSet(new IndexSet([intersection.treeIndex]));
  };
});
```

In CAD models, it's quite common that equipment consists of many small geometry parts. Often it's desirable to
highlight the entire equipment (e.g. a tank) and not just the individual pieces (e.g. a valve connected to the tank).
This can be achieved by determining the ancestor tree indices of the clicked geometry. `Cognite3DModel.getAncestorTreeIndices()`
can be used to determine this.

```js runnable-2x
const selectedNodes = new TreeIndexNodeCollection();
model.assignStyledNodeCollection(selectedNodes, DefaultNodeAppearance.Highlighted);

viewer.on('click', async event => {
  const intersection = await viewer.getIntersectionFromPixel(
    event.offsetX, event.offsetY
  );
  if (intersection) {
    // Retrieve tree indices of parent. Second argument is used to control what ancestor level to retrieve;
    // 1 is direct parent, 2 is grand-parent etc
    const parentRange = await model.getAncestorTreeIndices(intersection.treeIndex, 1);
    // Replace current selection
    selectedNodes.updateSet(new IndexSet(parentRange));
  };
});
```


<!-- SOURCE_END: reveal/documentation\versioned_docs\version-2.x\examples\click-reactions-cad.mdx -->

================================================================================


<!-- SOURCE_START: reveal/documentation\versioned_docs\version-2.x\examples\click-reactions-pointcloud.mdx -->
## File: reveal/documentation\versioned_docs\version-2.x\examples\click-reactions-pointcloud.mdx

---
id: click-reactions-pointcloud
title: Reacting to clicks in point cloud models
description: Detecting intersections from clicks in point cloud models
---

While point clouds doesn't have a concept of nodes, applications can detect clicked points. Just like with
CAD models, `Cognite3DViewer.getIntersectionFromPixel` is used to determine world position and point from
a mouse click.

import { DemoWrapper } from '@site/versioned_docs/version-2.x/components/DemoWrapper';

<DemoWrapper modelType="pointcloud" />

## Detecting clicked positions

The following example detects intersections at clicked positions and marks the intersected positions
using a red sphere.

```js runnable-2x
viewer.on('click', async event => {
  const intersection = await viewer.getIntersectionFromPixel(
    event.offsetX, event.offsetY
  );
  if (intersection) {
    const sphere = new THREE.Mesh(new THREE.SphereGeometry(0.1),
      new THREE.MeshBasicMaterial({ wireframe: true, color: 'red' }));
    sphere.position.copy(intersection.point);
    viewer.addObject3D(sphere);
  };
});
```

## Controlling the intersection threshold

By default, points within 5 cm of an intersection ray is considered to be intersecting. For point clouds of large
physical assets this is usually a good value, but for point clouds with large extends (e.g. geographical point clouds)
this threshold might be too small.

The intersection threshold can be changed using the `pointIntersectionThreshold` option of `getIntersectionFromPixel`:

```js
const options = { pointIntersectionThreshold: 1.0 /* 1 m */ };
const intersection = await viewer.getIntersectionFromPixel(event.offsetX, event.offsetY, options);
```


<!-- SOURCE_END: reveal/documentation\versioned_docs\version-2.x\examples\click-reactions-pointcloud.mdx -->

================================================================================


<!-- SOURCE_START: reveal/documentation\versioned_docs\version-2.x\examples\clipping.mdx -->
## File: reveal/documentation\versioned_docs\version-2.x\examples\clipping.mdx

---
id: clipping
title: Clipping/slicing planes
describe: Reveal support adding a number of clipping planes to "cut through" the models.
---

import { DemoWrapper } from '@site/versioned_docs/version-2.x/components/DemoWrapper';
import useBaseUrl from '@docusaurus/useBaseUrl';

Clipping planes, also called slicing planes, can be used to "cut through" the model to reveal the interior. This is
useful to isolate interesting parts of the model and hide obscuring geometry. Reveal supports having multiple clipping planes
in arbitrary position and orientation. When clipping planes are active,
the amount of geometry loaded might be reduced since culled geometry doesn't need
to be loaded (or rather loaded in a lower detail level).

<video preload="auto" autoPlay="autoplay" loop controls>
  <source src={useBaseUrl('/img/cad-clipping.webm')} />
</video>

## Examples

<DemoWrapper />

### Single, fixed clipping plane

Clipping planes are defined by providing zero or more [`THREE.Plane`](https://threejs.org/docs/#api/en/math/Plane)
to `Cognite3DViewer.setClippingPlanes`. The clipping planes are activated for all models and
replaces any active clipping planes.

Typically, [setFromNormalAndCoplanarPoint](https://threejs.org/docs/#api/en/math/Plane.setFromNormalAndCoplanarPoint)
is used to create clipping planes. This function accepts a direction that defines the orientation of
the plane and a point on the plane. For example, the following
code will create a clipping plane that only accepts geometry below `Y = 55`:

```jsx runnable-2x
const orientation = new THREE.Vector3(0, -1, 0);
const point = new THREE.Vector3(0, 55, 0);
const plane = new THREE.Plane().setFromNormalAndCoplanarPoint(orientation, point);
viewer.setClippingPlanes([plane]);
```

### Animated clipping plane

Planes can be manipulated runtime and effects will have an effect in the viewer. Note however that rendering must be
triggered after updating the plane before the change will have a visual effect. This can be done using
`Cognite3DViewer.requestRedraw()` or simply set new planes using `Cognite3DViewer.setClippingPlanes`.

Below is an example animates a clipping plane by ping-ponging the plane in the vertical direction.

```js runnable-2x
const bbox = model.getModelBoundingBox();

const orientation = new THREE.Vector3(0, -1, 0);
const point = new THREE.Vector3(0, bbox.max.y, 0);
const plane = new THREE.Plane();
plane.setFromNormalAndCoplanarPoint(orientation, point);
viewer.setClippingPlanes([plane]);

const start = performance.now();
setInterval(() => {
  // Ping-pong plane between top of model and half-way to the bottom
  const dt = (performance.now() - start) / 1000.0
  const s = 0.5 * (Math.sin(Math.PI * dt / 10.0) + 1.0);
  point.y = bbox.max.y - (bbox.max.y - bbox.min.y) / 2.0 * s;
  plane.setFromNormalAndCoplanarPoint(orientation, point);

  viewer.requestRedraw();
}, 1000 / 60);
```

:::note
Updating `THREE.Plane`-instances will not trigger data loading. To manually trigger data loading after doing
substantial changes to the clipping planes, use `Cognite3DViewer.setClippingPlanes`. Note that the example
above performs substantial changes to the planes without loading data. In a real application it's recommended
to not load data during animation, but initiate data after an animation is completed.
:::

### Interactable clipping planes

Often it's required to have interactive clipping planes that the user can modify. The following example
show how [ThreeJS DragControls](https://threejs.org/docs/#examples/en/controls/DragControls) can be used
to manipulate the clipping planes.

After running this snippet the clipping plane can be manipulated by dragging the white manipulator.

```js runnable-2x
// import { DragControls } from 'three/examples/jsm/controls/DragControls';

const bounds = model.getModelBoundingBox();

// Create draggable sphere at the center of bounds
const initialDragPosition = new THREE.Vector3(bounds.min.x, 0.5*(bounds.max.y + bounds.min.y), bounds.min.z);
const draggerGeometry = new THREE.SphereBufferGeometry(5);
const draggerMaterial = new THREE.MeshBasicMaterial({ color: 'white' });
const draggerMesh = new THREE.Mesh(draggerGeometry, draggerMaterial);
draggerMesh.position.copy(initialDragPosition);
viewer.addObject3D(draggerMesh);

// Prepare a clipping plane
const orientation = new THREE.Vector3(0, -1, 0);
const plane = new THREE.Plane();
plane.setFromNormalAndCoplanarPoint(orientation, initialDragPosition);
viewer.setClippingPlanes([plane]);


// Handle drag events
const controls = new DragControls([draggerMesh], viewer.getCamera(), viewer.domElement);
controls.addEventListener('drag', () => {
  // Fix XZ-poistion
  draggerMesh.position.set(initialDragPosition.x, draggerMesh.position.y, initialDragPosition.z);
  draggerMesh.updateWorldMatrix();
  // Update clipping plane
  plane.setFromNormalAndCoplanarPoint(new THREE.Vector3(0, -1, 0), draggerMesh.position);
  viewer.requestRedraw();
});

// When we are hovering over a sphere we want to disable viewer controls
controls.addEventListener('hoveron', () => {
  viewer.cameraControlsEnabled = false;
  draggerMaterial.color.set('gray');
  viewer.requestRedraw();
});

// And turn them back on when we stop hovering over it
controls.addEventListener('hoveroff', () => {
  viewer.cameraControlsEnabled = true;
  draggerMaterial.color.set('white');
  viewer.requestRedraw();
});
```

### CAD geometry filter

A special type of clipping is to provide a "geometry filter" when loading the model. A geometry filter restricts the
area to load geometry for and is specified when the model is created. Geometry filters not only hides clipped geometry,
it unloads unnecessary geometry to save memory and improve rendering performance.

```js
const min = new THREE.Vector3(10, 20, 30);
const max = new THREE.Vector3(20, 30, 40);
viewer.addModel({
  modelId,
  revisionId,
  geometryFilter: {
    boundingBox: new THREE.Box3(min, max)
  }
});
```

:::note
Geometry filters are static and cannot be changed after creating the model. Instead, remove and re-add the model,
or use regular clipping planes if they change frequently.
:::


<!-- SOURCE_END: reveal/documentation\versioned_docs\version-2.x\examples\clipping.mdx -->

================================================================================


<!-- SOURCE_START: reveal/documentation\versioned_docs\version-2.x\examples\combine-models.mdx -->
## File: reveal/documentation\versioned_docs\version-2.x\examples\combine-models.mdx

---
id: combine-models
title: Combining multiple models
description: Load multiple models in the same viewer and apply transformation to correctly place the models
---

`Cognite3DViewer` supports combining multiple CAD- and point cloud-models into one view and lets
users interact with them as if they were one model. This is done by simply adding multiple models
using `Cognite3DViewer.addModel`, `Cognite3DViewer.addCadModel` or `Cognite3DViewer.addPointCloudModel`.

import { DemoWrapper } from '@site/versioned_docs/version-2.x/components/DemoWrapper';

<DemoWrapper />

## Modify coordinate systems

In many cases, it will be necessary to apply some transformation to the models to make them be in the same
coordinate system. This can be done using `setModelTransformation` with a [`THREE.Matrix4`](https://threejs.org/docs/#api/en/math/Matrix4)
representing the transformation. Note that each 3D model stored in Cognite Data Fusion will have an associated
model transformation that is loaded when the model is added. When updating `setModelTransformation` this model transformation
should also be applied to ensure that the axis system is correct.

The following example shows how to modify the coordinate system of a point cloud model to make it fit with a CAD model.

```js runnable-2x
async function updateModelTransformation() {
  const pointCloudModel = await viewer.addModel({
    modelId: 5564365369975452 ,
    revisionId: 2817572261344477,
  })

  // Retrieve default transformation
  const modelTransformation = pointCloudModel.getModelTransformation();
  // Apply translation
  const translation = new THREE.Matrix4().makeTranslation(140, 75, -110);
  modelTransformation.multiply(translation);
  // Update model transformation
  pointCloudModel.setModelTransformation(modelTransformation);

  viewer.fitCameraToModel(pointCloudModel);
}

updateModelTransformation();
```

## Use geometry filters to extract parts of a model

Geometry filters allows only loading geometry within a specified box. By loading the same model with different geometry
filters, several subsections of the same model can be loaded in the same viewer.

```js runnable-2x
viewer.models.forEach(x => viewer.removeModel(x));

async function addFilteredModel(box) {
  const model = await viewer.addModel({
    modelId: 3356984403684032,
    revisionId: 6664823881595566,
    geometryFilter: {
      boundingBox: box,
      isBoundingBoxInModelCoordinates: true
    }
  });
  return model;
}

const center = new THREE.Vector3(100, 25, -75);
const sliceOffset = new THREE.Vector3(0, 20, 0);
const sliceSize = new THREE.Vector3(100, 10, 100);

const sliceColors = [
  [200, 0, 0],
  [0, 200, 0],
  [0, 0, 200],
  [200, 200, 0],
  [200, 0, 200]
]
for (let i = 0; i < 5; i++) {
  const sliceCenter = sliceOffset.clone().multiplyScalar(i).add(center);
  const sliceBounds = new THREE.Box3().setFromCenterAndSize(sliceCenter, sliceSize);
  const sliceColor = [...sliceColors[i]];

  addFilteredModel(sliceBounds).then(model => {
    model.setDefaultNodeAppearance({ color: sliceColor });
  });
}
```

:::note
Geometry filters should not overlap as this will cause the same geometry to be loaded and
visualized more than once.
:::


<!-- SOURCE_END: reveal/documentation\versioned_docs\version-2.x\examples\combine-models.mdx -->

================================================================================


<!-- SOURCE_START: reveal/documentation\versioned_docs\version-2.x\examples\controlsmodes.mdx -->
## File: reveal/documentation\versioned_docs\version-2.x\examples\controlsmodes.mdx

---
id: controlsmodes
title: Camera controls modes
description: Usage of different camera controls modes
---

import { DemoWrapper } from '@site/versioned_docs/version-2.x/components/DemoWrapper';
import useBaseUrl from '@docusaurus/useBaseUrl';

Reveal allows you to use different camera controls modes. You can set different controls modes using `setCameraControlsOptions` method of `Cognite3DViewer` class in runtime. Configurable parameters are described in `CameraControlsOptions` type (see API Reference for details).

<DemoWrapper />

#### Mouse wheel action
Property `mouseWheelAction` describes what happens when user initiate a mouse wheel scroll. Possible valuses are:

| Value | Description |
| ----- | ----------- |
| `zoomToTarget` | zooms just to the current target (center of the screen) of the camera. |
| `zoomPastCursor` |  zooms in the direction of the ray coming from camera through cursor screen position, allows going through objects. |
| `zoomToCursor` | mouse wheel scroll zooms towards the point on the model where cursor is hovering over, doesn't allow going through objects. |

Default value is `zoomPastCursor`.

#### On click camera target change

Property `changeCameraTargetOnClick` enables or disables camera target change based on mouse clicks. When enabled, mouse click sets camera target to the point on the model where cursor is hovering over.

Default value is `false`.

Example of setting different camera controls options:

```jsx runnable-2x
const newControlsOptions = {
  mouseWheelAction: 'zoomToCursor',
  changeCameraTargetOnClick: true,
};

viewer.setCameraControlsOptions(newControlsOptions);
```


<!-- SOURCE_END: reveal/documentation\versioned_docs\version-2.x\examples\controlsmodes.mdx -->

================================================================================


<!-- SOURCE_START: reveal/documentation\versioned_docs\version-2.x\examples\geomaptool.mdx -->
## File: reveal/documentation\versioned_docs\version-2.x\examples\geomaptool.mdx

---
id: geomaptool
title: Geomap tool
description: Geomap tool for geolocation of the model.
---

import { DemoWrapper } from '@site/versioned_docs/version-2.x/components/DemoWrapper';
import useBaseUrl from '@docusaurus/useBaseUrl';

The `GeomapTool` is a geolocation for the models and allow the user to place them on the maps. This will help in visulaize the model
on top of map at specific geo location.

The tool provides list of options to set and choose:
- Several map providers namely, Bing maps, Mapbox, Here maps and OpenStreet map.
- We support planar mode and support terrain can be considered if needed.
- Models can be placed on specific geolocation using latitude and longitude values.

<DemoWrapper />

## Supported map providers

In Geomap tool, you can select from several different map providers:
- Bing Maps
- Mapbox
- Here Maps
- OpenStreet Maps

## APIKeys
Each map providers needs respective API keys (Access Token) to be assigned. To get access token follow the below procedure.
- Bing map
  - Basic Bing Maps key to authenticate your application can be used for less than 125,000 billable transactions per calendar year.
  Create a Bing Maps account from http://www.bingmapsportal.com/.
  - Please check your application usage licensing at https://www.microsoft.com/en-us/maps/licensing/licensing-options/.
- Here map
  - Freemium account of Here map will support 250k transactions per month. You can create account from https://developer.here.com/sign-up?create=Freemium-Basic&keepState=true&step=account.
  - Please check licensing options at https://developer.here.com/pricing.
- Mapbox
  - Free up to 50000 web map loads. Create Mapbox account from https://account.mapbox.com/auth/signup/ and generate Access token to use them in your application.
  - Licensing details can be found at https://www.mapbox.com/pricing/.
- OpenStreet map
  - It does not require any keys to access its tile map images.
  - Please check lincensing details at https://wiki.osmfoundation.org/wiki/Licence.

### Mapbox Maps
Configuration of the Mapbox are listed below which can be used to set different option for the maps.
- 'mode': Map tile access mode.
  - MapboxMode.Style - These are pre-defined styles using map/tileset id, created in Mapbox Studio style editor. For more details see https://docs.mapbox.com/api/maps/styles/
    - MapboxStyle.Streets
    - MapboxStyle.Outdoor
    - MapboxStyle.Light
    - MapboxStyle.Dark
    - MapboxStyle.Satellite
    - MapboxStyle.Satellite_Streets
    - MapboxStyle.Navigation_Day
    - MapboxStyle.Navigation_Night
    - MapboxStyle.Navigation_Guide_Day
    - MapboxStyle.Navigation_Guide_Night
  - MapboxMode.Map_Id - A map/tileset ID is a unique identifier given to every tileset. For more details see https://docs.mapbox.com/help/glossary/tileset-id/
    - MapboxId.Streets
    - MapboxId.Satellite
    - MapboxId.Terrain
    - MapboxId.Traffic
    - MapboxId.TerrainRGB
- 'APIKey': API access token of Mapbox.
- 'id': Map style/Map Id to be used.
  - If MapboxMode.Style is choosen, than style value should passed such as MapboxStyle.Streets.
  - If MapboxMode.Map_Id is choosen, than Id value should passed such as MapboxId.Satellite.
- 'tileFormat': Map image tile format.
  - MapboxImageFormat.PNG
  - MapboxImageFormat.PNG32
  - MapboxImageFormat.PNG64
  - MapboxImageFormat.PNG128
  - MapboxImageFormat.PNG256
  - MapboxImageFormat.JPG70
  - MapboxImageFormat.JPG80
  - MapboxImageFormat.JPG90
  - MapboxImageFormat.PNGRAW
- 'latlong': Latitude & Longitude location where the model will be placed on the map.

```jsx runnable-2x
// import { GeomapTool, MapProviders, MapboxMode, MapboxStyle, MapboxImageFormat } from '@cognite/reveal/tools';

const mapConfig = {
  provider: MapProviders.MapboxMap,
  mode: MapboxMode.Style,
  APIKey: APIKeys.MapboxAPI,
  id: MapboxStyle.Satellite_Streets,
  tileFormat: MapboxImageFormat.JPG70,
  latlong: {
      latitude: 59.9016426931744,
      longitude: 10.607235872426175
  }
}
new GeomapTool(viewer, mapConfig);;
```
### Bing Maps
Configuration of the Bing Maps are listed below
- 'APIKey': API access token of Bing Map.
- 'type': The type of the map used.
  - BingMapType.Aerial
  - BingMapType.Road
  - BingMapType.Aerial_Labels
  - BingMapType.Oblique
  - BingMapType.Oblique_Labels
- 'latlong': Latitude & Longitude location where the model will be placed on the map.

```jsx runnable-2x
// import { GeomapTool, MapProviders, BingMapType } from '@cognite/reveal/tools';

const mapConfig = {
  provider: MapProviders.BingMap,
  APIKey: APIKeys.BingMapAPI,
  type: BingMapType.Aerial,
  latlong: {
      latitude: 59.9016426931744,
      longitude: 10.607235872426175
  }
}

new GeomapTool(viewer, mapConfig);
```

### Here Maps
Configuration of the Here Maps are listed below
- 'APIKey': API access token of Here Map.
- 'appCode': Application code token of Here Map.
- 'style': The type of maps to be used.
  - HereMapType.Aerial
  - HereMapType.Base
  - HereMapType.Pano
  - HereMapType.Traffic
- 'scheme': Specifies the view scheme. Be aware that invalid combinations of schemes and tiles are rejected. For all satellite,
 hybrid and terrain schemes, you need to use the Aerial Tiles base URL instead of the normal one.
  - HereMapScheme.Day
  - HereMapScheme.Night
  - HereMapScheme.Terrain
  - HereMapScheme.Satellite.
- 'imageFormat': Map image format.
  - HereMapImageFormat.PNG
  - HereMapImageFormat.PNG8
  - HereMapImageFormat.JPG
- 'latlong': Latitude & Longitude location where the model will be placed on the map.

```jsx runnable-2x
// import { GeomapTool, MapProviders, HereMapType, HereMapScheme, HereMapImageFormat } from '@cognite/reveal/tools';

const mapConfig = {
  provider: MapProviders.HereMap,
  APIKey: APIKeys.HereMapAPI,
  appCode: APIKeys.HereMapAppCode,
  style: HereMapType.Aerial,
  scheme: HereMapScheme.Terrain,
  imageFormat: HereMapImageFormat.PNG,
  latlong: {
      latitude: 59.9016426931744,
      longitude: 10.607235872426175
  }
}
new GeomapTool(viewer, mapConfig);
```
### OpenStreet Maps
- Only latitude & longitude configuration is needed for OpenStreet Maps.
- 'latlong': Latitude & Longitude location where the model will be placed on the map.

```jsx runnable-2x
// import { GeomapTool, MapProviders } from '@cognite/reveal/tools';

const mapConfig = {
  provider: MapProviders.OpenStreetMap,
  latlong: {
      latitude: 59.9016426931744,
      longitude: 10.607235872426175
  }
}
new GeomapTool(viewer, mapConfig);
```


<!-- SOURCE_END: reveal/documentation\versioned_docs\version-2.x\examples\geomaptool.mdx -->

================================================================================


<!-- SOURCE_START: reveal/documentation\versioned_docs\version-2.x\examples\node-visiting.mdx -->
## File: reveal/documentation\versioned_docs\version-2.x\examples\node-visiting.mdx

---
id: node-visiting
title: Node visitor functions
describe: Reveal has functions for iterating over nodes, either all nodes in a 3D model or a subtree of a parent node.
---

import { DemoWrapper } from '@site/versioned_docs/version-2.x/components/DemoWrapper';

Reveal has functions for iterating over CAD nodes, either all nodes in a 3D model or a subtree of a parent node.
Note that all functions are async, and the action that you pass is not applied immediately. A single model can
have millions of nodes. To avoid long blocking operations the action is applied in blocks, allowing for an
interactive page while the action is being applied.

<DemoWrapper />

## Iterate over all nodes

This example only demonstrates how iteration over model nodes performed gradually.

```jsx runnable-2x
async function visitAllNodes() {
  let sum = 0;
  await model.iterateNodesByTreeIndex(treeIndex => sum = sum + treeIndex)
  alert('Iteration is done! Sum of all tree indexes is ' + sum);
}
visitAllNodes();
```

## Iterate over subtree nodes

`Cognite3DModel.iterateSubtreeByTreeIndex` iterates over all descendants of a node by tree index. The provided
tree index is included in the set of visited nodes. The following example sets the color of all descendants of
a node. This mimics the functionality of `Cognite3DModel.setNodesColorsByTreeIndex` with `applyToChildren`
set to `true`.

```jsx runnable-2x
async function visitSubtree() {
  let sum = 0;
  await model.iterateSubtreeByTreeIndex(917985, treeIndex => sum = sum + treeIndex);
  alert('Iteration is done! Sum of all tree indexes in subtree is ' + sum);
}
visitSubtree();
```


<!-- SOURCE_END: reveal/documentation\versioned_docs\version-2.x\examples\node-visiting.mdx -->

================================================================================


<!-- SOURCE_START: reveal/documentation\versioned_docs\version-2.x\examples\pointcloud.mdx -->
## File: reveal/documentation\versioned_docs\version-2.x\examples\pointcloud.mdx

---
id: pointcloud
title: Pointcloud models
description: Usage of pointcloud models with Cognite3DViewer
---

`@cognite/reveal` supports point clouds through a third-party library, [`potree-core`](https://github.com/tentone/potree-core). The viewer
supports loading both point clouds and CAD models at the same time. Point clouds can be generated from various sources including
[laser scans](https://en.wikipedia.org/wiki/Laser_scanning) and [photogrammetry models](https://en.wikipedia.org/wiki/Photogrammetry).
Loading point clouds is done with identical code to when [loading CAD models](./cad-basic) - Reveal will determine that the model
is a point cloud model and act accordingly.

import { DemoWrapper } from '@site/versioned_docs/version-2.x/components/DemoWrapper';

<DemoWrapper modelType="pointcloud" />

```jsx
import { CogniteClient } from '@cognite/sdk';
import { Cognite3DViewer } from '@cognite/reveal';

const client = new CogniteClient({
  appId: 'cognite.reveal.docs.Cognite3DViewer',
});

// some div in your html page for Cognite3DViewer to insert a canvas
const domElement = document.getElementById('canvas-wrapper');

async function main() {
  // to view models from CDF authentication is required
  await client.loginWithOAuth({ type: 'CDF_OAUTH', options: { project: 'publicdata' }});
  await client.authenticate();

  const viewer = new Cognite3DViewer({ sdk: client, domElement });

    // load a model and add it on 3d scene
    // https://console.cognitedata.com/publicdata/3d-models/4715379429968321/revisions/5688854005909501
    const model = await viewer.addModel({
      modelId: 4715379429968321,
      revisionId: 5688854005909501,
    });
    viewer.loadCameraFromModel(model);

    // call viewer.dispose() when you don't need the viewer anymore
  }
  main();
```

## Point size

You can use `pointSize` property to set the size of each rendered point in a point cloud model.

```js runnable-2x
model.pointSize = 10;
```

## Point budget

The point budget limits the number of points loaded and rendered at any given time,
which helps to adapt performance requirements to the capabilities of different hardware.
Recommended values are between 500.000 and 10.000.000. The budget is shared among all
loaded point clouds.

```js runnable-2x
viewer.pointCloudBudget = { numberOfPoints: 500000 };
```

## Point shape

You can set the point shape of each rendered point in the point cloud. Values are defined by `PotreePointShape` enum.

```js runnable-2x
// import { PotreePointShape } from '@cognite/reveal';
model.pointShape = PotreePointShape.Square;
```

## Point color type

You can specify in which way points should be colored. Values are defined by `PotreePointColorType` enum.

```js runnable-2x
// import { PotreePointColorType } from '@cognite/reveal'
model.pointColorType = PotreePointColorType.Depth;
```

Other useful coloring schemes are `Rgb` (color) , `Classification` (color by point class) and `Intensity`
(strength of the backscattered signal in a laser scan).

## Classification filtering

Some point clouds have classification information associated with each point.  This can
be used for coloring or to filter the point cloud.

:::note
The demonstration model doesn't have classification data so the examples below are not
runnable.
:::

To list classes available in a point cloud model, use `CognitePointCloudModel.getClasses`:

```js
const classes = model.getClasses();
for (const pointClass of classes) {
  console.log(pointClass); // Prints a numeric class code
}
```

It's also possible to check if a model has a given class by using `CognitePointCloudModel.hasClass`.
A list of well-known point class codes are defined in `WellKnownAsprsPointClassCodes`. These definitions
by the [ASPRS LAS 1.4 specifications](http://www.asprs.org/wp-content/uploads/2019/03/LAS_1_4_r14.pdf).

To filter away certain classes, use `CognitePointCloudModel.setClassVisible`:

```js
model.setClassVisible(WellKnownAsprsPointClassCodes.Ground, false);
```

To check if a class currently is visible, use `isClassVisible`:

```js
const visible = model.isClassVisible(WellKnownAsprsPointClassCodes.Ground);
```

## Unloading models

Point clouds (and CAD models) can be unloaded using `Cognite3DViewer.removeModel()`:

```js runnable-2x
viewer.removeModel(model)
```


<!-- SOURCE_END: reveal/documentation\versioned_docs\version-2.x\examples\pointcloud.mdx -->

================================================================================


<!-- SOURCE_START: reveal/documentation\versioned_docs\version-2.x\examples\timeline.mdx -->
## File: reveal/documentation\versioned_docs\version-2.x\examples\timeline.mdx

---
id: timelinetool
title: Timeline tool
describe: Applying styles to nodes based on date with Play & Stop
---

import { DemoWrapper } from '@site/versioned_docs/version-2.x/components/DemoWrapper';

Reveal allows for applying styles to nodes based on date property and can be viewed as a playable entity
where node styles are applied to different nodes which can be used to showcase progress of the model construction.
The API is influenced by the [node styling API](cad-styling) and it's recommended to read up on this documentation before reading this document.

:::note
The test data used in the documentation site is for testing and to show the capabilities of the tool.
The examples shown is therefore might not be a ideal model construction progression.
:::

<DemoWrapper />

## Timeline

The timeline tool provides ability to apply styles by date. It works by creating a set of "keyframes"  for provided dates.
Each keyframe has a set of associated styled node collections.

### Creating keyframes
To create a `Keyframe`, use `createKeyframe(date: Date)`
- `date` - Date reference for the keyframe

```jsx
const keyframe = timeline.createKeyframe(new Date('2021-10-05'));
```

### Add styled node collections to keyframes
Tool provides feature to add nodes & styles to a Keyframe or number of Keyframes or to all of the Keyframes.
For more information on assigning styles please refer [CAD Styling](cad-styling).

```jsx
const nodes = new AssetNodeCollection(sdk, model);
keyframe.assignStyledNodeCollection(nodes, { renderGhosted: false, color: [150, 200, 120] });
```

### Remove styled node collections from keyframes

Styled node collections can be removed from keyframes.
`unassignStyledNodeCollection(nodeCollection: NodeCollectionBase)`
- `nodeCollection` - Node set to be removed from keyframes.

```jsx
keyframe.unassignStyledNodeCollection(nodes);
```

### Play timelines
We use `play(startDate: Date, endDate: Date, durationInMilliSeconds: number)`
- `startDate` - Keyframe date to start the playback of the timeline keyframes.
- `endDate` - Keyframe date to stop the playback of the timeline keyframes.
- `durationInMilliSeconds` - Number of milli-seconds for the full playback of keyframes.

Note that the dates doesn't need to match the keyframe dates - the playback will be performed on a "virtual" timeline that is linear in time and update the styling whenever a new keyframe is activated. Only one keyframe will be active at any given time, i.e. the model will only have styling from one keyframe active at any time.

```js runnable-2x
// import { NodeCollectionBase, DefaultNodeAppearance, PropertyFilterNodeCollection } from '@cognite/reveal';
// import { TimelineTool, Keyframe } from '@cognite/reveal/tools';

function createProgressBarContainer() {
  const container = document.createElement('div');
  container.style.cssText = `
    background: #333;
    border-radius: 13px;
    width: 500px;
    height: 25px;
    padding: 3px;
    align-items: center;
    justify-content: center;
    position: relative;
    transform: translate(-50%, -50%);
    left: 50%;
    bottom: 20px;
  `;
  return container;
}

function createProgressBar() {
  const progress = document.createElement('div');
  progress.style.cssText = `
    /* Progress after moving to next Keyframe */
    content: '';
    display: block;
    background: DodgerBlue;
    width: 0%;
    height: 20px;
    border-radius: 9px;
    position: relative;
  `;
  return progress;
}

model.setDefaultNodeAppearance({color: [200, 20, 0]});

const timeline = new TimelineTool(model);

for (let i = 0; i < 20; i++) {
  const indexSet = new IndexSet();
  indexSet.addRange(new NumericRange(0, (i+1)*60000));
  const nodes = new TreeIndexNodeCollection(indexSet);
  const keyframe = timeline.createKeyframe(new Date(`2020-01-${i+1}`));
  keyframe.assignStyledNodeCollection(nodes, { color: [20, 200, 0] });
}

// div element Cognite3DViewer to insert into the canvas
const domElement = document.getElementById('demo-wrapper');
const container = createProgressBarContainer();
const progressBar = createProgressBar();
container.appendChild(progressBar);
domElement.appendChild(container);

const durationMs = 20000;
const startDate = new Date('2020-01-01');
const endDate = new Date('2020-01-20');
timeline.subscribe('dateChanged', (data) => {
  const progress = ((data.date.getTime() - data.startDate.getTime()) / (data.endDate.getTime() - data.startDate.getTime()) * 100);
  progressBar.style.width = `${progress}%`;
  });

timeline.play(startDate, endDate, durationMs);
```

### Stop timeline playback

```jsx
timeline.stop();
```

### Pause timeline

```jsx
timeline.pause();
```

### Resume timeline

```jsx
timeline.resume();
```

### Get Keyframe by Date
`getKeyframeByDate(date: Date)`
- `date` - Date of the Keyframe which needs retrived.

```jsx
const keyframe = timeline.getKeyframeByDate(new Date('2021-10-06'));
```

### Reacting to date changes while in playback mode
While in the play state, the tool emits events which will be helpful for the users to calculate the progression of the playback of the timeline.
The tool provides a `TimelineDateUpdateDelegate` event which can be subscribed to received below data.
- `date` - Virtual date which can be used to calculate progression.
- `activeKeyframe` - Current active `Keyframe` in the playback.
- `startDate` - Virtual date to start the playback of the timeline.
- `endDate` - Virtual date to stop the playback of the timeline.

:::note
If we have subscribed to `dateChanged` event and if there are no active Keyframe during Timeline playback, than `activeKeyframe` data will be `undefined` value.
:::

```jsx
// import { TimelineDateUpdateDelegate } from '@cognite/reveal/tools';

timeline.subscribe('dateChanged', (data) => {
  const date = data.date;
  const keyframe = data.activeKeyframe;
  const startDate = data.startDate;
  const endDate = data.endDate;
});
```

To unsubscribe from `TimelineDateUpdateDelegate` event

```jsx
timeline.unsubscribe('dateChanged', (data) => {});
```

### Removing Keyframe
#### By Date
To remove any Keyframe, use `removeKeyframeByDate(date: Date)`
- `date` - Date of the Keyframe which needs to be removed from the Timeline.

```jsx
timeline.removeKeyframeByDate(new Date('2021-10-07'));
```

#### By Keyframe
To remove any Keyframe, use `removeKeyframe(keyframe: Keyframe)`
- `keyframe` - Keyframe to be removed from the Timeline.

```jsx
timeline.removeKeyframe(keyframeMechNodes);
```

### Keyframes in Timeline
Gets all Keyframes in the Timeline

```jsx
const allKeyframes = timeline.getAllKeyframes();
```


<!-- SOURCE_END: reveal/documentation\versioned_docs\version-2.x\examples\timeline.mdx -->

================================================================================


<!-- SOURCE_START: reveal/documentation\versioned_docs\version-2.x\extending\datasource.mdx -->
## File: reveal/documentation\versioned_docs\version-2.x\extending\datasource.mdx

---
id: datasource
title: Use a custom data source
description: Shows how to write a data source to customize how Reveal reads data.
---

import useBaseUrl from '@docusaurus/useBaseUrl';

Reveal is designed to retrieve data from [Cognite Data Fusion (CDF)](https://docs.cognite.com/cdf/).
In certain scenarios it might be useful to customize how Reveal retrieves data, to e.g.:

- Introduce application specific caching to reduce network traffic
- Improve responsiveness in areas with limited connectivity
- Introduce extra logging of network activity related to 3D
- Store models locally

Note that certain features relies on connectivity to CDF and won't work without a connection.

:::warning
This is an experimental feature and has not been tested extensively.
You might experience problems with Reveal if the implementation is not 
according to expectations from Reveal.
:::

## Overview

To implement a custom data source, DataSource from `@cognite/reveal/extensions/datasource` must be implemented
and provided to `Cognite3DViewer` on construction using the `customDataSource`-option, which in turn
provides instances of three interfaces:

| Interface               | Description                                                                                                   |
| ----------------------- | ------------------------------------------------------------------------------------------------------------- |
| `ModelMetadataProvider` | Provides access to metadata about models, including "base URL", camera information and model transformation.  |
| `ModelDataProvider`     | Access to geometry files and JSON description files for 3D models given URLs.                                 |
| `NodesApiClient`        | Provides access to metadata about 3D nodes, such as bounding box and ancestors.                               |

Some of the interface functions are required, some are optional at the cost of reduced functionality in Reveal. See details below.


## ModelMetadataProvider

`ModelMetadataProvider` is responsible for determining the "base URL" for a model, determine
the "model transformation" and the default camera.

Implementations can assume that all identifiers will be of type `CdfModelIdentifier`:

```js
class CdfModelIdentifier implements ModelIdentifier {
  readonly revealInternalId: symbol;
  readonly modelFormat: File3dFormat;
  readonly modelId: number;     // CDF ModelID
  readonly revisionId: number;  // CDF RevisionID
}
```

| Function/Field          | Required?                                  | Description                                                      |
| ----------------------- | ------------------------------------------ | ---------------------------------------------------------------- |
| `getModelUri()`         | Yes                                        | Determine the base URL that will be used when download metadata and geometry using `ModelDataProvider`. |
| `getModelCamera()`      | No - return `undefined` to use default     | Return an initial camera pose for the model                      |
| `getModelMatrix()`      | Yes, but value can be hardcoded.           | Returns an transformation matrix for transforming from stored coordinates to Reveal coordinates (see below) |

`getModelUri()` returns a "base URL" that will be passed to `ModelDataProvider.getBinaryFile()` and `getJsonFile()`. Note that
its up to `ModelDataProvider` how this base URL is handled for CAD models and it is possible to use this base URL as 
some other identifier, e.g. a folder on disk or ID of a blob storage. For point clouds, however, this
needs to be an actual URL as we base point cloud streaming on a third party library which manages it's own
network layer.

`getModelMatrix()` is responsible for converting from stored geometry coordinates to Reveal coordinates (right-handed, Y up). This 
is required for models stored in different orientation in CDF. For CAD models, most models are stored in a right-handed Z up coordinate system, and will need
a transformation. By default, this transformation can be expressed as:

<img src={useBaseUrl('/img/default-cad-matrix.png')} alt="Default CAD to Reveal orientation matrix" />

This corresponds to a 180 degree rotation around the X axis:

```js
new THREE.Matrix4().makeRotationFromEuler(new THREE.Euler(-Math.PI / 2, 0, 0));
```

For point clouds, models are usually stored right-handed Y up and requires no transformation. In this case,
the identity matrix should be returned instead:

```js
new THREE.Matrix4().identity();
```

### Example implementation

This simple implementation provides metadata for models stored locally and provides 
default camera and model transformation.

Notice that each of the functions asserts that the identifier is a `CdfModelIdentifier`. Currently, 
this should always be true.

```js
import { 
  CdfModelIdentifier, 
  ModelIdentifier,
  ModelMetaDataProvider
} from '@cognite/reveal/extensions/datasource';

class MyModelMetaDataProvider implements ModelMetaDataProvider {
  getModelUri(identifier: ModelIdentifier): Promise<string> {
    if (!(identifier instanceof CdfModelIdentifier)) {
      throw new Error('Unexpected identifier');
    }
    // Base URL of where geometry files are stored
    // This will be passed to ModelDataProvider.getJsonFile() and getBinaryFile()
    return Promise.resolve(`https://localhost/models/${identifier.modelId}/revision/${identifier.revisionId}`);
  }

  getModelCamera(identifier: ModelIdentifier): Promise< { position: THREE.Vector3; target: THREE.Vector3 } | undefined> {
    if (!(identifier instanceof CdfModelIdentifier)) {
      throw new Error('Unexpected identifier');
    }
    // Use default camera
    return Promise.resolve(undefined);
  }

  getModelMatrix(identifier: ModelIdentifier): Promise<THREE.Matrix4> {
    if (!(identifier instanceof CdfModelIdentifier)) {
      throw new Error('Unexpected identifier');
    }
    // CAD models are usually stored in Z-up, while Reveal uses Y-up, so
    // we need to account for this
    const cadModelToReveal = new THREE.Matrix4().makeRotationFromEuler(new THREE.Euler(-Math.PI / 2, 0, 0));
    return Promise.resolve(cadModelToReveal);
  }
}
```

## ModelDataProvider

`ModelDataProvider` is responsible for receiving files by URL.

| Function/Field          | Required?                                  | Description                                                      |
| ----------------------- | ------------------------------------------ | ---------------------------------------------------------------- |
| `getBinaryFile()`       | Yes                                        | Retrieves a binary blob. Used to download CAD geometry           |
| `getJsonFile()`         | Yes                                        | Retrieves JSON data. This is used to store some metadata about models |
| `headers: HttpHeaders`  | Only used for point clouds.                | Headers used during point cloud streaming. Useful if you e.g. need to provide authentication headers to the requests |

### Example implementation

The following example simply downloads files using `fetch()`. Note that
it's up to the implementation to decide how to retrieve data, and that 
data doesn't necessarily need to be downloaded over HTTP.

```js
import { ModelDataProvider } from '@cognite/reveal/extensions/datasource';

class MyModelDataProvider implements ModelDataProvider {
  public readonly headers: HttpHeaders = {};

  async getJsonFile(baseUrl: string, fileName: string): Promise<any> {
    const url = `${baseUrl}/${fileName}`;
    const response = await fetch(url);
    if (!response.ok) {
      throw new Error(`Could not fetch '${url}'`);
    }
    return response.json();
  }

  async getBinaryFile(baseUrl: string, fileName: string): Promise<ArrayBuffer> {
    const url = `${baseUrl}/${fileName}`;
    const response = await fetch(url);
    if (!response.ok) {
      throw new Error(`Could not fetch '${url}'`);
    }
    return response.arrayBuffer();
  }
}
```

## NodesApiClient

The API client is responsible for providing metadata about 3D CAD nodes, including node bounding boxes and parent/child relationships between nodes.

| Function/Field              | Required by<br />(in `Cognite3DModel`)          | Description                                                      |
| --------------------------- | ------------------------------------------ | ----------------------------------------------------------------- |
| `mapTreeIndicesToNodeIds()` | `mapTreeIndexToNodeId()`, `mapTreeIndicesToNodeIds()`, `getBoundingBoxByTreeIndex()` | Maps from Reveal tree indices to CDF node IDs used to identify nodes in CDF |
| `mapNodeIdsToTreeIndices()` | No, but recommended to have a 1:1 mapping  | Reverse mapping of `mapTreeIndicesToNodeIds()`                   |
| `determineTreeIndexAndSubtreeSizesByNodeIds()` | No                      | Determines the "span" of a node identified by a CDF node ID (i.e. the tree index and how many descendants it has including the node itself). |
| `determineNodeAncestorsByNodeId()` | No                                  | Find "ancestor span" of a node identified by the CDF node ID. Returns data on same format as function above. |
| `getBoundingBoxByNodeId()` | No                                          | Determines bounds of a node by its CDF node ID. |

### Example implementation

```js
class MyNodesApiClient implements NodesApiClient {
  mapTreeIndicesToNodeIds(modelId: number, revisionId: number, treeIndices: number[]): Promise<number[]> {
    // Map 1:1 - pretend treeIndices == nodeIds
    return Promise.resolve(treeIndices);
  }
  mapNodeIdsToTreeIndices(modelId: number, revisionId: number, nodeIds: number[]): Promise<number[]> {
    // Map 1:1 - pretend treeIndices == nodeIds
    return Promise.resolve(nodeIds);
  }
  determineTreeIndexAndSubtreeSizesByNodeIds(modelId: number, revisionId: number, nodeIds: number[]): Promise<{treeIndex: number; subtreeSize: number }[]> {
    throw new Error('Not supported.');
  }
  determineNodeAncestorsByNodeId(modelId: number, revisionId: number, nodeId: number, generation: number): Promise<{treeIndex: number; subtreeSize: number }> {
    throw new Error('Not supported.');
  }
  getBoundingBoxByNodeId(modelId: number, revisionId: number, nodeId: number, box?: THREE.Box3): Promise<THREE.Box3> {
    throw new Error('Not supported.');
  }
}
```

## Unsupported features

There's a few features that is not backed by the `DataSource`-API and hence won't be affected by the implementation. The most
notable feature is the [CAD styling API](../examples/cad-styling) which in large is backed by `CogniteClient`. To use the styling API with
custom data sources, you will need to [create custom node collections](../examples/cad-styling-custom) or [use `TreeIndexNodeCollection`](../examples/cad-styling).

Currently there are restrictions in the [the API for saving viewer state](../examples/cad-save-viewerstate) causing `Cognite3DViewer.setViewState` not
to work with a custom `DataSource`. This might change in the future.


<!-- SOURCE_END: reveal/documentation\versioned_docs\version-2.x\extending\datasource.mdx -->

================================================================================


<!-- SOURCE_START: reveal/documentation\versioned_docs\version-2.x\installation.mdx -->
## File: reveal/documentation\versioned_docs\version-2.x\installation.mdx

---
id: installation
title: Installation
description: Reveal installation guide
---

The library has a peer-dependency on [Cognite Data Fusion JS-SDK](https://www.npmjs.com/package/@cognite/sdk)
which must be installed as a dependency in the client application that uses Reveal.

```bash npm2yarn
npm install @cognite/reveal @cognite/sdk
```

If you will be using ThreeJS directly from the application, you will also need to install the correct version of ThreeJS and
types information if you are using TypeScript:

```bash npm2yarn
npm install three@<version>
npm install --save-dev @types/three@<version>
```

Please find the correct version of ThreeJS in [the release documentation on Github](https://github.com/cognitedata/reveal/releases/).

## Regarding WebWorkers

Reveal uses [Web Workers](https://developer.mozilla.org/en-US/docs/Web/API/Web_Workers_API) and [WebAssembly](https://webassembly.org/)
to handle 3D geometry. This causes some problems when bundling and loading packages from NPM.
Some effort might therefore be needed before Reveal can be used in your project depending on how the servers hosting your application are configured.

There are two different types of deployment scenarios:

1. Projects where Cognite [CDN](https://en.wikipedia.org/wiki/Content_delivery_network)
`apps-cdn.cognitedata.com` is available
(no restrictive [`Content-Security-Policy`](https://developer.mozilla.org/en-US/docs/Web/HTTP/CSP)-headers are set, or apps-cdn is whitelisted)

2. Projects with [CSP](https://developer.mozilla.org/en-US/docs/Web/HTTP/CSP)
that forbids to fetch scripts from `apps-cdn.cognitedata.com`.

By default, Reveal will try to fetch its worker/WASM files from `apps-cdn.cognitedata.com`.
If there are no CSP in your project that forbids that, Reveal should work out of the box without any additional steps.

In case if you see an error like the following in your development console:

> Refused to load the script 'https://apps-cdn.cognitedata.com/@cognite/reveal-parser-worker@1.1.0/reveal.parser.worker.js' because it violates the following Content Security Policy directive: "script-src 'self' https://localhost:* blob:"

See the steps below.

## Installation for projects with Content-Security-Policy

What you'll need to do is to host worker/wasm files at some server from which your browser can download and run js code.

Before going with any of the steps below, consider to just whitelist Cognite CDN in your Content-Security-Policy.
All you need to do is to add into your CSP:
* [script-src](https://developer.mozilla.org/en-US/docs/Web/HTTP/Headers/Content-Security-Policy/script-src) `apps-cdn.cognitedata.com`
* [worker-src](https://developer.mozilla.org/en-US/docs/Web/HTTP/Headers/Content-Security-Policy/worker-src) `blob:` (only the first option described below doesn't need `worker-src blob:`)


Also, notice that because Safari browser [doesn't support](https://caniuse.com/#search=instantiateStreaming)
`WebAssembly.InstantiateStreaming` yet, so it uses `WebAssembly.instantiate` which requires
`script-src: unsafe-eval` to be presented in CSP. Evaluate security risks before adding `unsafe-eval` to your CSP.

If whitelisting of `apps-cdn.cognitedata.com` is not an options for you, go with one of the steps below.

<!-- check the anchor links if change this title -->
### Option 1: include Web Worker and WebAssembly files as static assets in your project

Copy all files from `/node_modules/@cognite/reveal-parser-worker/dist/local`
to some static folder in your project. E.g., for React projects, the typical folder is `/public`.

You can add this command to your build scripts:

```
cp ./node_modules/@cognite/reveal-parser-worker/dist/local/* ./public/reveal-worker
```

The point is that parser-worker files should be available under some network path
like in that case `https://localhost:xxxx/reveal-worker/reveal.parser.worker.js` if you can see
script content in your browser you're almost done.

The only thing left is to tell the reveal library from which path workers should be fetched.
To do that, use `revealEnv`:

```js
import { revealEnv, Cognite3DViewer } from '@cognite/reveal';
revealEnv.publicPath = `/reveal-worker/`;

// ... then use reveal normally ...
const viewer = new Cognite3DViewer(/*...*/)
```

<!--- be careful with the indentation here --->

  <details>
    <summary>Other copying options</summary>

  Below are few more convenient options for copying if you don't like having that command in your package.json:

```bash
  cp ./node_modules/@cognite/reveal-parser-worker/dist/local/* ./public/reveal-worker
```

#### Option 1.1: Copy worker files locally in a create-react-app based project

1. Install [react-app-rewired](https://github.com/timarney/react-app-rewired). It's required to slightly modify react-scripts from create-react-app without running `eject`

    ```bash npm2yarn
    npm install react-app-rewired --save-dev
    ```

1. 'Flip' the existing calls to `react-scripts` in `npm` scripts for start, build and test

   ```diff title="/package.json"
     "scripts": {
   -   "start": "react-scripts start",
   +   "start": "react-app-rewired start",
   -   "build": "react-scripts build",
   +   "build": "react-app-rewired build",
   -   "test": "react-scripts test",
   +   "test": "react-app-rewired test",
       "eject": "react-scripts eject"
   }
   ```

1. Install [copy-webpack-plugin](https://webpack.js.org/plugins/copy-webpack-plugin/)

   ```bash npm2yarn
    npm install copy-webpack-plugin --save-dev
    ```

1. Create a `config-overrides.js` file in the root directory with the following content

    ```javascript title="./config-overrides.js"
    const CopyWebpackPlugin = require('copy-webpack-plugin');

    const revealSource = 'node_modules/@cognite/reveal';

    module.exports = function override(config) {
      if (!config.plugins) {
        // eslint-disable-next-line no-param-reassign
        config.plugins = [];
      }

      // that's for 6.x version of webpack-copy-plugin
      // if you use 5.x just put content of patterns into constructor
      // new CopyWebpackPlugin([ /* { from, to } */ ])
      config.plugins.push(
        new CopyWebpackPlugin({
          patterns: [
            {
              from: `${revealSource}/**/*.worker.js`,
              to: '.',
              flatten: true,
            },
            {
              from: `${revealSource}/**/*.wasm`,
              to: '.',
              flatten: true,
            },
          ],
        })
      );

      return config;
    };
    ```

Now all `*.worker.js` and `*.wasm` files from `@cognite/reveal` should be copied into your output folder when you run build.

#### Option 1.2: Copy worker files locally for non-create-react-app based projects

Just make sure that you have `*.worker.js` and `*.wasm` files from `@cognite/reveal` in your output folder.

If you use webpack, you might want to add [copy-webpack-plugin@^5.1.1](https://webpack.js.org/plugins/copy-webpack-plugin/)
in your `webpack.config.js`

```javascript
// webpack.config.js
const revealSource = 'node_modules/@cognite/reveal';

{
  /* ... */
  plugins: [
    new CopyWebpackPlugin({
      patterns: [
        {
          from: `${revealSource}/**/*.worker.js`,
          to: '.',
          flatten: true,
        },
        {
          from: `${revealSource}/**/*.wasm`,
          to: '.',
          flatten: true,
        },
      ],
    })
  ]
}
```

  </details>

### Option 2: host Web Worker and WebAssembly files externally

In case if there is no such `/public` or similar folder in your project, you're likely using a different service
to host static assets. The domain of that service is probably whitelisted in Content Security Policy and can be used to host the necessary files.

In that case, the only thing you can do is to build the reveal-parser-worker from sources with correct `publicPath`.

Let's say your static server has that URL `https://static.server/` and you can upload the files
at some folder, e.g. `parser-worker` folder. So files should be available at `https://static.server/parser-worker/`

Then all you need to do is:

1. Clone or download [@cognite/reveal](https://github.com/cognitedata/reveal).
2. `cd ./reveal/parser-worker`
3. Consult `parser-worker/README.md` and install the necessary build tools
4. You will need to set `PUBLIC_PATH` env variable that points at your static server.
Run the build with that env variable. You will see the `publicPath` printed to console during the build.

<Tabs
  groupId="operating-systems"
  defaultValue="bash"
  values={[
    {label: 'Bash', value: 'bash'},
    {label: 'Windows', value: 'win'},
  ]
}>
<TabItem value="bash">

```bash
PUBLIC_PATH="https://static.server/parser-worker/" yarn build:prod
```
</TabItem>
<TabItem value="win">

```bash
set PUBLIC_PATH="https://static.server/parser-worker/" && yarn build:prod
```
</TabItem>
</Tabs>

If you set the environment variable correctly, you should see it printed to console during the build:

```log
>  <webpack-log>: Worker local build config:
>  <webpack-log>:  { publicPath: 'https://static.server/parser-worker/' }
```

5. Take the files from `./parser-worker/dist/local` and host them on your CDN at the path you specified  `https://static.server/parser-worker/`.

6. In your project, specify `revealEnv.publicPath`

```js
import { revealEnv, Cognite3DViewer } from '@cognite/reveal';
revealEnv.publicPath = `https://static.server/parser-worker/`;

// ... then use reveal normally ...
const viewer = new Cognite3DViewer(/*...*/)
```

Everything should work fine now.

### A note on Content-type header for .wasm files

:::tip important
Make sure your server sends `*.wasm` files with `Content-type: application/wasm` header.
:::

Sometimes servers don't have correct MIME type set for wasm files.
In that case you might notice this message in a browser console when it fetches a `.wasm` file:

> Uncaught (in promise) TypeError: Failed to execute 'compile' on 'WebAssembly': Incorrect response MIME type. Expected 'application/wasm'.

In that case you'll need to configure your server to set the `Content-type: application/wasm` header for `*.wasm` files.
If you use the nginx add [types](https://nginx.org/en/docs/http/ngx_http_core_module.html#types) in the config
or edit the [mime.types file](https://www.nginx.com/resources/wiki/start/topics/examples/full/#mime-types).

```types title="/mime.types"
types {
    application/wasm wasm;
}
```


<!-- SOURCE_END: reveal/documentation\versioned_docs\version-2.x\installation.mdx -->

================================================================================


<!-- SOURCE_START: reveal/documentation\versioned_docs\version-2.x\migration-guide.md -->
## File: reveal/documentation\versioned_docs\version-2.x\migration-guide.md

---
id: migration-guide
title: Migrating from previous versions
hide_title: true
description: This page describes the differences between Reveal 1 and 2. It also walks through how to migrate from the previous Cognite 3D viewer (@cognite/3d-viewer).
---

import { DemoWrapper } from '@site/docs/components/DemoWrapper';

This article describes how to migrate between different major versions of Reveal and from the old `@cognite/3d-viewer` package.

1. [Migrating from Reveal 1.x](#migrating-from-reveal-1x)
1. [Migrating from @cognite/3d-viewer](#migrating-from-cognite3dviewer)

## Migrating from Reveal 1.x

There are some important differences between version 1 and version 2 of `@cognite/reveal` which might require changes in the build configuration and code. The most important changes are:

- The node styling/filtering API has been reworked and will require changes. See below for more information.
- [ThreeJS](https://www.npmjs.com/package/three) and [@types/three](https://www.npmjs.com/package/@types/three) is included in the package, so it's no longer necessary to include this in the application you are using Reveal from if you are not using ThreeJS directly.
- `Cognite3DViewer.getIntersectionFromPixel` is now async.

### Migrating to the new node styling API

Before reading this chapter it's recommended to read through [the introduction to the new styling and filtering API](examples/cad-styling).

In the 2.0 of release of Reveal, the filtering and styling API changed drastically - breaking existing
functionality. Migrating to version 2 will most likely require code changes, but these should often
be quite limited and lead to a simplification of the code base along with an increase in filtering- and
styling performance.

In previous versions of Reveal, styling was done by a set of functions for explicitly applying
styling to a node identified by a tree index (and optionally all its children).
- Visibility - `hideNodeByTreeIndex()`, `showNodeByTreeIndex()`, `hideAllNodes()` and `showAllNodes()`
- Color override - `setNodeColorByTreeIndex()`, `setAllNodeColors()`, `resetNodeColorByTreeIndex()` and `resetAllNodeColors()`
- Ghost nodes - `ghostNodeByTreeIndex()`, `unghostNodeByTreeIndex()`, `ghostAllNodes()` and `unghostAllNodes()`
- Highlighting - `selectNodeByTreeIndex()`, `deselectNodeByTreeIndex()` and `deselectAllNodes()`

This allowed flexible styling of nodes, but required many individual calls to update each node, causing degraded
performance. The new API instead requires a set of styles which nodes are assigned to. It is preferable not to have
too many styles - both in terms of performance and to avoid a cluttered view for the end user.

The previous styling options maps quite directly to the new API. Visibility is controlled by `NodeAppearance.visible`,
color override by `NodeAppearance.color` and ghost mode by `NodeAppearance.renderGhosted`. However, there is no
direct mapping between what was previously called 'selection' or 'highlighting', this is now a combination of
`NodeAppearance.color`, `NodeAppearance.renderInFront` and `NodeAppearance.outlineColor`. This means that the new API
introduces additional flexibility - e.g. an object can have an outline, but not be rendered in front of other objects. For
convenience, the new API comes with a set of default styles available through [`DefaultNodeAppearance`](examples/cad-styling).

A commonly used functionality is to apply a default style to all nodes and to style a few selected nodes with a different
style to make them stand out. Before, this could be achieved using a `ghostAllNodes`, `hideAllNodes` and `setAllNodeColors` to
apply the default styling, and a combination of the different per-node styling functions mentioned above to style the
nodes that should stand out. In Reveal 2, this is replaced by `Cognite3DModel.setDefaultNodeAppearance` which is a style that will be applied to any node that is not styled by another styled set.

### Using TreeIndexNodeCollection to migrate existing filtering logic

<DemoWrapper />

In general, it is recommended to use the [specialized `NodeCollectionBase`-implementations](examples/cad-styling) for best performance. However,
it is possible to use `TreeIndexNodeCollection` as a migration step. This allows the use of previously implemented logic for
populating the set based on some application specific logic.

As an example, consider an application that has some logic for only showing objects that are part of the 'EA'-function. In previous versions
this could be achieved by doing:

```js
model.hideAllNodes();
sdk.revisions3D.list3DNodes(model.modelId, model.revisionId,
  {
    limit: 1000,
    properties: { PDMS: { Function: 'EA' } }
  })
  .autoPagingEach(node => {
    for (let i = 0; i < node.subtreeSize; i++) {
      model.showNodeByTreeIndex(node.treeIndex + i);
    }
  });
```

Now, the same can be implemented using:

```js runnable
// import { TreeIndexNodeCollection, IndexSet } from '@cognite/reveal';

const visibleSet = new IndexSet();
const visibleNodes = new TreeIndexNodeCollection(visibleSet);
model.setDefaultNodeAppearance(DefaultNodeAppearance.Hidden);
model.assignStyledNodeCollection(visibleNodes, DefaultNodeAppearance.Default);

// Populate set
sdk.revisions3D.list3DNodes(model.modelId, model.revisionId,
  {
    limit: 1000,
    properties: { PDMS: { Function: 'EA' } }
  })
  .autoPagingEach(node => {
    visibleSet.addRange(new NumericRange(node.treeIndex, node.subtreeSize));
  })
  .then(() => {
    // Note! We only trigger update to have effect on the rendered viewer after
    // _all_ nodes have been retrieved. A better approach might be to trigger
    // an update after each batch of nodes have been fetch from the SDK.
    // However, avoid calling updateSet() too often as it can take some time
    // to complete.
    visibleNodes.updateSet(visibleSet);
  });
```

Note that the styling is set up before any nodes actually are fetched and that the
set is populated asynchronously.

:::note
This example could easily have been migrated using `TreeIndexNodeCollection`, but in
other cases this might not be as straight forward as shown.
:::

#### A note on `applyToAllChildren` to style all descendants of a node

In previous versions, all styling functions accepted an optional `applyToAllChildren`-argument.
When this was `true`, Reveal would apply the styling to all descendants. When migrating
to the new version, adding the root tree index of the subtree to `TreeIndexNodeCollection` will not have
the same result. When you also have a `subtreeSize` available, use `TreeIndexNodeCollection.addRange` with
`new NumericRange(treeIndex, subtreeSize)` to add the full subtree. If you don't know the
`subtreeSize`, `Cognite3DModel.getSubtreeIndices()` can be used to get the full range of tree indices.

```js
// In Reveal 1.x:
// model.hideNodeByTreeIndex(subtreeRootTreeIndex, true);

//  Wrong - will only affect a single tree index, not all descendants
const indexSet = new IndexSet();
indexSet.add(subtreeRootIndex);
const nodes = new TreeIndexNodeCollection(indexSet);
model.assignStyledNodeCollection(nodes, { visible: false });

//  Correct - all descendants are affected
const indexSet = new IndexSet();
indexSet.addRange(await model.getSubtreeIndices(subtreeRootIndex));
const nodes = new TreeIndexNodeCollection(indexSet);
model.assignStyledNodeCollection(nodes, { visible: false });
```

## Migrating from [@cognite/3dviewer](https://www.npmjs.com/package/@cognite/3d-viewer)

:::warning
This section describes how to migrate from `@cognite/3d-viewer` to Reveal version 1. It doesn't take into account changes
between Reveal versions 1 and 2.
:::


`@cognite/3d-viewer` is an older version of Reveal that has similar functionality to this package. However, some important differences caused us to switch the package name to `@cognite/reveal`.

- `@cognite/3d-viewer` downloads all geometry when a model is loaded. This causes higher initial loading time, but potentially increases the performance once the data has been loaded. It also limits the size of the models that can be loaded. The new version, `@cognite/reveal`, is based on "streaming geometry" which downloads necessary geometry within a budget as the camera moved. This enables support for very complex 3D models and reduces the initial loading time.
- `@cognite/3d-viewer` supports styling 3D nodes by node ID. In `@cognite/reveal` the recommended approach is to use tree indices instead. See [Styling nodes](#styling-nodes) for more information. For an introduction to the differences between these concepts, see [Concepts](./concepts.md). The new component supports [mapping between the two identifiers](#accessing-node-information-and-mapping-between-node-ids-and-tree-indices) when necessary.
- `@cognite/3d-viewer` supports photogrammetry models through textures while `@cognite/reveal` supports photogrammetry through point clouds. This is due to the heavy processing load textures places on processing.
- `@cognite/reveal` supports styling a 3D node and all it's children in one operation. In `@cognite/3d-viewer` it's necessary to iterate over all children and manually apply the same change to all nodes.
- `@cognite/reveal` supports point cloud models. This is not supported in `@cognite/3d-viewer`.
- `@cognite/reveal` requires new output file formats. See [Preparing models](#preparing-models-for-use) below for details.

### API changes

The APIs are very similar and the functionality provided in `@cognite/reveal` should feel familiar. There are several operations supported in `@cognite/3d-viewer` which isn't supported by `@cognite/reveal`, but these have been replaced by alternatives that should provide similar functionality.

### Styling nodes

In `@cognite/3d-viewer`, there are several functions for manipulating the styling of 3D nodes. These functions identify nodes by their node IDs. In `@cognite/reveal` similar functions exist, but these identify the nodes by their tree indices. It's therefor necessary to migrate to the new functions.

#### Coloring nodes

- `Cognite3DModel.setNodeColor(nodeId, r, g, b)` has been replaced by `setNodeColorByTreeIndex(treeIndex, r, g, b, applyToChildren?)`
- `Cognite3DModel.resetNodeColor(nodeId)` has been replaced by `resetNodeColorByTreeIndex(treeIndex, applyToChildren?)`
- `Cognite3DModel.getNodeColor(nodeId)` is no longer supported
- `Cognite3DModel.resetAllNodeColors()` has been added to the API

The new functions identify nodes by tree index rather than node ID. It also supports applying the same color to all children of the identified node. Note that the functions identifying nodes by node ID will work, but will be slower and use is not recommended.

#### Selecting/highlighting nodes

- `Cognite3DModel.selectNode(nodeId)` has been replaced by `selectNodeByTreeIndex(treeIndex, applyToChildren?)`
- `Cognite3DModel.deselectNode(nodeId)` has been replaced by `deselectNodeByTreeIndex(treeIndex, applyToChildren?)`
- `Cognite3DModel.deselectAllNodes()` works equally in both components

The new functions identify nodes by tree index rather than node ID. It also supports selecting/highlighting all children of the identified node. Note that the functions identifying nodes by node ID will work, but will be slower and use is not recommended.

#### Controlling node visibility

- `Cognite3DModel.showNode(nodeId)` has been replaced by `showNodeByTreeIndex(treeIndex, applyToChildren?)`
- `Cognite3DModel.hideNode(nodeId)` has been replaced by `hideNodeByTreeIndex(treeIndex, applyToChildren?)`
- `Cognite3DModel.showAllNodes()` works equally in both components
- `Cognite3DModel.hideAllNodes(makeGray?)` doesn't support setting `makeGray` any longer

The new functions identify nodes by tree index rather than node ID. It also supports showing/hiding all children of the identified node. Note that the functions identifying nodes by node ID will work, but will be slower and use is not recommended.

### Node visitor functions

Reveal has functions for iterating over nodes, either all nodes in a 3D model or a subtree of a parent node.
Notice that all functions are async, and the action that you pass is not applied immediately.
A single model can have millions of nodes. That's why the iteration functions call the passed action step by step.
You can see it in action in our [node visiting example](./examples/node-visiting.mdx) where colors are applied gradually to nodes.

- `Cognite3DModel.iterateNodes(action: (nodeId, treeIndex) => void): Promise<boolean>` has been replaced by `iterateNodesByTreeIndex(action: (treeIndex) => void): Promise<void>`. Returns promise which resolves once iteration has done.
- `Cognite3DModel.iterateSubtree(nodeId, action: (nodeId, treeIndex) => void, treeIndex?, subtreeSize?)` has been replaced by `iterateSubtreeByTreeIndex(treeIndex, action: (treeIndex) => void): Promise<number>`. Returns promise which resolves once iteration has done.

### Accessing node information and mapping between node IDs and tree indices

Reveal supports accessing information about 3D nodes through the [Cognite SDK](https://cognitedata.github.io/cognite-sdk-js/classes/revisions3dapi.html). However, the SDK identifies nodes by node ID, not tree index. It might be necessary to map between the two concepts. The following functions provide such functionality:

- `async Cognite3DModel.mapNodeIdToTreeIndex(nodeId)`
- `async Cognite3DModel.mapNodeIdsToTreeIndices(nodeIds)`
- `async Cognite3DModel.mapTreeIndexToNodeId(treeIndex)`
- `async Cognite3DModel.mapTreeIndicesToNodeIds(treeIndices)`

Note that the operation requires communication with CDF servers and should be kept at a minimum. It's recommended to use the functions that accepts a list of nodes to map whenever possible. Batching requests is recommended to achieve the best performance.

Access to node information such as name, bounding box and properties/attributes is done through the [3D revision API](https://cognitedata.github.io/cognite-sdk-js/classes/revisions3dapi.html), specifically:

- [`list3DNodes`](https://cognitedata.github.io/cognite-sdk-js/classes/revisions3dapi.html#list3dnodes) for retrieving a set of nodes using a filter
- [`list3DNodeAncestors`](https://cognitedata.github.io/cognite-sdk-js/classes/revisions3dapi.html#list3dnodeancestors) for retrieving ancestors of a specific node
- [`retrieve3DNodes`](https://cognitedata.github.io/cognite-sdk-js/classes/revisions3dapi.html#retrieve3dnodes) for retrieving a set of nodes identified by their node ids

The API for accessing node information has not changed `@cognite/3d-viewer`, but since Reveal now uses tree indices explicit mapping tree index to node ID is necessary.

### Working with asset mappings

[3D Asset Mappings](https://docs.cognite.com/api/v1/#tag/3D-Asset-Mapping) enables mapping 3D nodes to [assets](https://docs.cognite.com/api/v1/#tag/Assets). A mapping is a link from `assetId` to `nodeId`, so to use these with Reveal it's necessary to [map these to tree indices](#accessing-node-information-and-mapping-between-node-ids-and-tree-indices).

### Ray picking and intersection for handling click events

In `@cognite/3d-viewer` `Cognite3dViewer.getIntersectionFromPixel` optionally accepts a `model`-argument to restrict the result to a single model. Support for this has been removed
in `@cognite/reveal`. Previously `getIntersectionFromPixel` would return a struct with both `nodeId` and `treeIndex`. Now this has been changed to only include `treeIndex` (to
determine `nodeId` use `async Cognite3DModel.mapTreeIndexToNodeId(treeIndex)`).

### Other differences

There are a few other noticeable changes from `@cognite/3d-viewer` and `@cognite/reveal`:

- `@cognite/3d-viewer` supports local caching to reduce the time to load previously opened 3D models. Currently, this is not supported by `@cognite/reveal`, but the need for such functionality is reduced by adding streaming capabilities.
- In `@cognite/3d-viewer` `Cognite3DViewer.addModel(...)` will always return a `Cognite3DModel`. In `@cognite/reveal` this function might also return a `CognitePointCloudModel`. To explicitly add a CAD model or point cloud model use `Cognite3DViewer.addCadModel(...)` or `Cognite3DViewer.addPointCloudModel(...)`
- `Cognite3DViewer.loadCameraFromModel(...)`] has been added for loading camera settings from CDF when available.
- Due to the way `@cognite/reveal` streams data, the `OnProgressData` is no longer exported, and the `addModel` function
  no longer accepts an `onProgress` parameter. Because of this the `onComplete` option in `Cognite3DViewer.addModel` has
  been deprecated. To monitor loading activity, use the `onLoading`-callback provided as an option when constructing `Cognite3DViewer`.
- `Cognite3DViewer.getCamera()` can now be used to access the `THREE.Camera` of the viewer. Note that this camera shouldn't be
  modified.
- `Cognite3DViewer.addModel` no longer supports options `localPath`, `orthographicCamera` and `onComplete`. Point clouds currently
  don't support `geometryFilter`.
- Textures are not supported by `@cognite/reveal`. Models can be loaded, but textures are not applied to the geometry.
- `@cognite/reveal` supports several [anti-alias techniques](https://en.wikipedia.org/wiki/Spatial_anti-aliasing) which might improve visual quality at some performance cost. To use these new modes, see the `antiAliasingHint`-option provided in the `Cognite3dViewer`-constructor.

### Preparing models

`@cognite/reveal` requires new output file formats which means that 3D models that have been converted before June 2020 might need reconversion. To determine if a model needs reconversion, the [listModelRevisionOutputs API endpoint](https://docs.cognite.com/api/v1/#operation/list3dModelOutputs) can be used with URL parameter `format=reveal-directory`. This can be done using the SDK, e.g.:

```jsx
// Switch these with your project/model identifier
const project = 'publicdata';
const modelId = 4715379429968321;
const revisionId = 5688854005909501;

// Prepare a SDK client and authenticate
const sdk = new CogniteClient({
  appId: 'cognite.reveal.docs.IsModelCompatible',
});
await sdk.loginWithOAuth({ type: 'CDF_OAUTH', options: { project }}); // With Cognite authentication flow
await sdk.authenticate();

// Request a list of formats
const url = `https://api.cognitedata.com/api/v1/projects/${project}/3d/models/${modelId}/revisions/${revisionId}/outputs`;
const response = await sdk.get(url, { params: { format: 'reveal-directory' } });

// Determine if there's compatible outputs
const hasCompatibleOutputs = response.data.items.length > 0;
alert(`Is model compatible with @cognite/reveal: ${hasCompatibleOutputs}`);
```

Or by using `curl` (requires a [Cognite API key or access token](https://docs.cognite.com/dev/guides/iam/authentication.html#api-keys)):

```bash
> curl "https://api.cognitedata.com/api/v1/projects/$PROJECT/3d/models/$MODELID/revisions/$REVISIONID/outputs?format=reveal-directory" --header 'api-key: $APIKEY'

{
  "items": [
    {
      "format": "reveal-directory",
      "version": 8,
      "blobId": 42723775736403107
    }
  ]
}
```

where `PROJECT`, `MODELID`, `REVISIONID` and `APIKEY` must be set in the environment variables. If the model isn't compatible the response will be an empty list, i.e.

```bash
{
  "items": []
}
```

If the model isn't compatible with `@cognite/reveal`, it must be reprocessed. This can be done by [uploading a new revision in Cognite Data Fusion](https://docs.cognite.com/cdf/3d/guides/3dmodels_upload.html). When uploading a new revision, asset mappings must be recreated. If the node hierarchy in the new revision is identical to the previous model node IDs should be identical and the asset mappings can be copied from one revision to the other by using the [get3DMappings](https://docs.cognite.com/api/v1/#operation/get3DMappings) and [create3DMappings](https://docs.cognite.com/api/v1/#operation/create3DMappings) API endpoints.

Another alternative is to use the experimental 'reprocess' endpoint which generates new model outputs for a 3D model and is less intrusive than uploading a new revision. Since this endpoint is experimental it's not publicly exposed in the API yet. Please contact [lars.moastuen@cognite.com](mailto:lars.moastuen@cognite.com) if you want to explore this option.

### Common issues

**`TypeError: e.applyMatrix4 is not a function`**

If you experience `TypeError: e.applyMatrix4 is not a function` after migrating from
`@cognite/3d-viewer` to `@cognite/reveal`, the problem is usually caused by missing or
outdated ThreeJS.

To fix this issue, install or update ThreeJS using the
[`three`-package](https://www.npmjs.com/package/three). This should match the version
used by `@cognite/reveal`.


<!-- SOURCE_END: reveal/documentation\versioned_docs\version-2.x\migration-guide.md -->

================================================================================


<!-- SOURCE_START: reveal/documentation\versioned_docs\version-2.x\overview.mdx -->
## File: reveal/documentation\versioned_docs\version-2.x\overview.mdx

---
id: overview
slug: /
title: Overview
description: Reveal is a JavaScript library for visualizing big 3D models on the web. It supports complex CAD models and large point clouds.
---

import useBaseUrl from '@docusaurus/useBaseUrl';

Reveal is a JavaScript library for visualizing big 3D models on the web.
It supports complex CAD models and large point clouds.
The library supports 3D model hosted by [Cognite Data Fusion (CDF)](https://docs.cognite.com/cdf/) which supports [ingestion of a variety of 3D formats](https://docs.cognite.com/cdf/3d/). If you do not have access you can use models provided through the [Open Industrial Data project](https://openindustrialdata.com/) for testing.

If you have previously used the previous version of Reveal,
[`@cognite/3d-viewer`](https://www.npmjs.com/package/@cognite/3d-viewer),
and want to migrate to this package, please see the [Migration guide](./migration-guide.md).
For details about the installation procedure and how to use Reveal in certain environments,
see the [Installation guide](./installation.mdx).

## CAD models

CAD (Computer-Aided Design) models are technical design 3D models. For the big asset industry these are typically very complex and can often consist of several million individual objects. To enable interactive visualization of such models [Cognite Data Fusion (CDF)](https://docs.cognite.com/cdf/) processes these models to optimize the geometry and the structure, enabling Reveal to visualize them on the web.

CAD models typically contain attributes/properties associated with each 3D object (also called node). These attributes can provide valuable metadata, such as extent, function, what system the object is part of and it's operation specifications. CDF and Reveal provide functionality for queries based on the attributes to perform filtering, styling and to collect information.

<img src={useBaseUrl('/img/cad-model.png')} alt="A grayscale CAD model" />

## Point cloud models

Point cloud models are 3D models generated from techniques such as 3D scanning or photogrammetry. [Cognite Data Fusion (CDF)](https://docs.cognite.com/cdf/) processes point clouds and stores them in a format suitable for visualization.

<img src={useBaseUrl('/img/pointcloud-model.png')} alt="Point cloud model" />

## Technology

Behind the scenes Reveal based on [WebGL](https://developer.mozilla.org/en-US/docs/Web/API/**WebGL_API**) through [ThreeJS](https://threejs.org/) and uses [potree-core](https://github.com/tentone/potree-core) for point cloud visualization. The library is written in [TypeScript](https://www.typescriptlang.org/) and uses [WebAssembly](https://webassembly.org/) modules written in [Rust](https://www.rust-lang.org/) to do much of the heavy-lifting.

Reveal is available on [Github](https://github.com/cognitedata/reveal). If you find issues, have a feature suggestion or a question, please register a ticket in our [issue tracker](https://github.com/cognitedata/reveal/issues).


<!-- SOURCE_END: reveal/documentation\versioned_docs\version-2.x\overview.mdx -->

================================================================================


<!-- SOURCE_START: reveal/documentation\versioned_docs\version-3.x\api\classes\cognite_reveal.AssetNodeCollection.md -->
## File: reveal/documentation\versioned_docs\version-3.x\api\classes\cognite_reveal.AssetNodeCollection.md

---
id: "cognite_reveal.AssetNodeCollection"
title: "Class: AssetNodeCollection"
sidebar_label: "AssetNodeCollection"
custom_edit_url: null
---

[@cognite/reveal](../modules/cognite_reveal.md).AssetNodeCollection

Represents a set of nodes associated with an [asset in Cognite Fusion](https://docs.cognite.com/api/v1/#tag/Assets)
linked to the 3D model using [asset mappings](https://docs.cognite.com/api/v1/#tag/3D-Asset-Mapping). A node
is considered to be part of an asset if it has a direct asset mapping or if one of its ancestors has an asset mapping
to the asset.

## Hierarchy

- [`NodeCollection`](cognite_reveal.NodeCollection.md)

   **`AssetNodeCollection`**

## Constructors

### constructor

 **new AssetNodeCollection**(`client`, `modelMetadataProvider`)

#### Parameters

| Name | Type |
| :------ | :------ |
| `client` | `default` |
| `modelMetadataProvider` | [`CdfModelNodeCollectionDataProvider`](../interfaces/cognite_reveal.CdfModelNodeCollectionDataProvider.md) |

#### Overrides

NodeCollection.constructor

#### Defined in

[packages/cad-styling/src/AssetNodeCollection.ts:36](https://github.com/cognitedata/reveal/blob/71be00fcc/viewer/packages/cad-styling/src/AssetNodeCollection.ts#L36)

## Properties

### classToken

 `Static` `Readonly` **classToken**: ``"AssetNodeCollection"``

#### Defined in

[packages/cad-styling/src/AssetNodeCollection.ts:27](https://github.com/cognitedata/reveal/blob/71be00fcc/viewer/packages/cad-styling/src/AssetNodeCollection.ts#L27)

## Accessors

### classToken

 `get` **classToken**(): `string`

#### Returns

`string`

#### Inherited from

NodeCollection.classToken

#### Defined in

[packages/cad-styling/src/NodeCollection.ts:23](https://github.com/cognitedata/reveal/blob/71be00fcc/viewer/packages/cad-styling/src/NodeCollection.ts#L23)

___

### isLoading

 `get` **isLoading**(): `boolean`

#### Returns

`boolean`

#### Overrides

NodeCollection.isLoading

#### Defined in

[packages/cad-styling/src/AssetNodeCollection.ts:43](https://github.com/cognitedata/reveal/blob/71be00fcc/viewer/packages/cad-styling/src/AssetNodeCollection.ts#L43)

## Methods

### clear

 **clear**(): `void`

#### Returns

`void`

#### Overrides

[NodeCollection](cognite_reveal.NodeCollection.md).[clear](cognite_reveal.NodeCollection.md#clear)

#### Defined in

[packages/cad-styling/src/AssetNodeCollection.ts:124](https://github.com/cognitedata/reveal/blob/71be00fcc/viewer/packages/cad-styling/src/AssetNodeCollection.ts#L124)

___

### executeFilter

 **executeFilter**(`filter`): `Promise`\<`void`\>

Updates the node collection to hold nodes associated with the asset given, or
assets within the bounding box or all assets associated with the 3D model.

#### Parameters

| Name | Type | Description |
| :------ | :------ | :------ |
| `filter` | `Object` |  |
| `filter.assetId?` | `number` | ID of a single [asset](https://docs.cognite.com/dev/concepts/resource_types/assets.html) (optional) |
| `filter.boundingBox?` | `Box3` | When provided, only assets within the provided bounds will be included in the filter. |

#### Returns

`Promise`\<`void`\>

#### Defined in

[packages/cad-styling/src/AssetNodeCollection.ts:54](https://github.com/cognitedata/reveal/blob/71be00fcc/viewer/packages/cad-styling/src/AssetNodeCollection.ts#L54)

___

### getAreas

 **getAreas**(): [`AreaCollection`](../interfaces/cognite_reveal.AreaCollection.md)

Returns areas surrounding the nodes in the collection. The areas
are boxes in "ThreeJS coordinates". Note that not all
implementations supports this.

#### Returns

[`AreaCollection`](../interfaces/cognite_reveal.AreaCollection.md)

#### Overrides

[NodeCollection](cognite_reveal.NodeCollection.md).[getAreas](cognite_reveal.NodeCollection.md#getareas)

#### Defined in

[packages/cad-styling/src/AssetNodeCollection.ts:135](https://github.com/cognitedata/reveal/blob/71be00fcc/viewer/packages/cad-styling/src/AssetNodeCollection.ts#L135)

___

### getFilter

 **getFilter**(): `Object`

#### Returns

`Object`

| Name | Type |
| :------ | :------ |
| `assetId?` | `number` |
| `boundingBox?` | `Box3` |

#### Defined in

[packages/cad-styling/src/AssetNodeCollection.ts:120](https://github.com/cognitedata/reveal/blob/71be00fcc/viewer/packages/cad-styling/src/AssetNodeCollection.ts#L120)

___

### getIndexSet

 **getIndexSet**(): [`IndexSet`](cognite_reveal.IndexSet.md)

#### Returns

[`IndexSet`](cognite_reveal.IndexSet.md)

#### Overrides

[NodeCollection](cognite_reveal.NodeCollection.md).[getIndexSet](cognite_reveal.NodeCollection.md#getindexset)

#### Defined in

[packages/cad-styling/src/AssetNodeCollection.ts:131](https://github.com/cognitedata/reveal/blob/71be00fcc/viewer/packages/cad-styling/src/AssetNodeCollection.ts#L131)

___

### off

 **off**(`event`, `listener`): `void`

#### Parameters

| Name | Type |
| :------ | :------ |
| `event` | ``"changed"`` |
| `listener` | () => `void` |

#### Returns

`void`

#### Inherited from

[NodeCollection](cognite_reveal.NodeCollection.md).[off](cognite_reveal.NodeCollection.md#off)

#### Defined in

[packages/cad-styling/src/NodeCollection.ts:32](https://github.com/cognitedata/reveal/blob/71be00fcc/viewer/packages/cad-styling/src/NodeCollection.ts#L32)

___

### on

 **on**(`event`, `listener`): `void`

#### Parameters

| Name | Type |
| :------ | :------ |
| `event` | ``"changed"`` |
| `listener` | () => `void` |

#### Returns

`void`

#### Inherited from

[NodeCollection](cognite_reveal.NodeCollection.md).[on](cognite_reveal.NodeCollection.md#on)

#### Defined in

[packages/cad-styling/src/NodeCollection.ts:27](https://github.com/cognitedata/reveal/blob/71be00fcc/viewer/packages/cad-styling/src/NodeCollection.ts#L27)

___

### serialize

 **serialize**(): [`SerializedNodeCollection`](../modules/cognite_reveal.md#serializednodecollection)

#### Returns

[`SerializedNodeCollection`](../modules/cognite_reveal.md#serializednodecollection)

#### Overrides

[NodeCollection](cognite_reveal.NodeCollection.md).[serialize](cognite_reveal.NodeCollection.md#serialize)

#### Defined in

[packages/cad-styling/src/AssetNodeCollection.ts:139](https://github.com/cognitedata/reveal/blob/71be00fcc/viewer/packages/cad-styling/src/AssetNodeCollection.ts#L139)


<!-- SOURCE_END: reveal/documentation\versioned_docs\version-3.x\api\classes\cognite_reveal.AssetNodeCollection.md -->

================================================================================


<!-- SOURCE_START: reveal/documentation\versioned_docs\version-3.x\api\classes\cognite_reveal.BoundingBoxClipper.md -->
## File: reveal/documentation\versioned_docs\version-3.x\api\classes\cognite_reveal.BoundingBoxClipper.md

---
id: "cognite_reveal.BoundingBoxClipper"
title: "Class: BoundingBoxClipper"
sidebar_label: "BoundingBoxClipper"
custom_edit_url: null
---

[@cognite/reveal](../modules/cognite_reveal.md).BoundingBoxClipper

## Constructors

### constructor

 **new BoundingBoxClipper**(`box?`)

#### Parameters

| Name | Type |
| :------ | :------ |
| `box?` | `Box3` |

#### Defined in

[packages/cad-model/src/utilities/BoundingBoxClipper.ts:18](https://github.com/cognitedata/reveal/blob/71be00fcc/viewer/packages/cad-model/src/utilities/BoundingBoxClipper.ts#L18)

## Accessors

### clippingPlanes

 `get` **clippingPlanes**(): `Plane`[]

#### Returns

`Plane`[]

#### Defined in

[packages/cad-model/src/utilities/BoundingBoxClipper.ts:104](https://github.com/cognitedata/reveal/blob/71be00fcc/viewer/packages/cad-model/src/utilities/BoundingBoxClipper.ts#L104)

___

### maxX

 `get` **maxX**(): `number`

#### Returns

`number`

#### Defined in

[packages/cad-model/src/utilities/BoundingBoxClipper.ts:55](https://github.com/cognitedata/reveal/blob/71be00fcc/viewer/packages/cad-model/src/utilities/BoundingBoxClipper.ts#L55)

 `set` **maxX**(`x`): `void`

#### Parameters

| Name | Type |
| :------ | :------ |
| `x` | `number` |

#### Returns

`void`

#### Defined in

[packages/cad-model/src/utilities/BoundingBoxClipper.ts:50](https://github.com/cognitedata/reveal/blob/71be00fcc/viewer/packages/cad-model/src/utilities/BoundingBoxClipper.ts#L50)

___

### maxY

 `get` **maxY**(): `number`

#### Returns

`number`

#### Defined in

[packages/cad-model/src/utilities/BoundingBoxClipper.ts:64](https://github.com/cognitedata/reveal/blob/71be00fcc/viewer/packages/cad-model/src/utilities/BoundingBoxClipper.ts#L64)

 `set` **maxY**(`y`): `void`

#### Parameters

| Name | Type |
| :------ | :------ |
| `y` | `number` |

#### Returns

`void`

#### Defined in

[packages/cad-model/src/utilities/BoundingBoxClipper.ts:59](https://github.com/cognitedata/reveal/blob/71be00fcc/viewer/packages/cad-model/src/utilities/BoundingBoxClipper.ts#L59)

___

### maxZ

 `get` **maxZ**(): `number`

#### Returns

`number`

#### Defined in

[packages/cad-model/src/utilities/BoundingBoxClipper.ts:73](https://github.com/cognitedata/reveal/blob/71be00fcc/viewer/packages/cad-model/src/utilities/BoundingBoxClipper.ts#L73)

 `set` **maxZ**(`z`): `void`

#### Parameters

| Name | Type |
| :------ | :------ |
| `z` | `number` |

#### Returns

`void`

#### Defined in

[packages/cad-model/src/utilities/BoundingBoxClipper.ts:68](https://github.com/cognitedata/reveal/blob/71be00fcc/viewer/packages/cad-model/src/utilities/BoundingBoxClipper.ts#L68)

___

### minX

 `get` **minX**(): `number`

#### Returns

`number`

#### Defined in

[packages/cad-model/src/utilities/BoundingBoxClipper.ts:28](https://github.com/cognitedata/reveal/blob/71be00fcc/viewer/packages/cad-model/src/utilities/BoundingBoxClipper.ts#L28)

 `set` **minX**(`x`): `void`

#### Parameters

| Name | Type |
| :------ | :------ |
| `x` | `number` |

#### Returns

`void`

#### Defined in

[packages/cad-model/src/utilities/BoundingBoxClipper.ts:23](https://github.com/cognitedata/reveal/blob/71be00fcc/viewer/packages/cad-model/src/utilities/BoundingBoxClipper.ts#L23)

___

### minY

 `get` **minY**(): `number`

#### Returns

`number`

#### Defined in

[packages/cad-model/src/utilities/BoundingBoxClipper.ts:37](https://github.com/cognitedata/reveal/blob/71be00fcc/viewer/packages/cad-model/src/utilities/BoundingBoxClipper.ts#L37)

 `set` **minY**(`y`): `void`

#### Parameters

| Name | Type |
| :------ | :------ |
| `y` | `number` |

#### Returns

`void`

#### Defined in

[packages/cad-model/src/utilities/BoundingBoxClipper.ts:32](https://github.com/cognitedata/reveal/blob/71be00fcc/viewer/packages/cad-model/src/utilities/BoundingBoxClipper.ts#L32)

___

### minZ

 `get` **minZ**(): `number`

#### Returns

`number`

#### Defined in

[packages/cad-model/src/utilities/BoundingBoxClipper.ts:46](https://github.com/cognitedata/reveal/blob/71be00fcc/viewer/packages/cad-model/src/utilities/BoundingBoxClipper.ts#L46)

 `set` **minZ**(`z`): `void`

#### Parameters

| Name | Type |
| :------ | :------ |
| `z` | `number` |

#### Returns

`void`

#### Defined in

[packages/cad-model/src/utilities/BoundingBoxClipper.ts:41](https://github.com/cognitedata/reveal/blob/71be00fcc/viewer/packages/cad-model/src/utilities/BoundingBoxClipper.ts#L41)


<!-- SOURCE_END: reveal/documentation\versioned_docs\version-3.x\api\classes\cognite_reveal.BoundingBoxClipper.md -->

================================================================================


<!-- SOURCE_START: reveal/documentation\versioned_docs\version-3.x\api\classes\cognite_reveal.CameraManagerHelper.md -->
## File: reveal/documentation\versioned_docs\version-3.x\api\classes\cognite_reveal.CameraManagerHelper.md

---
id: "cognite_reveal.CameraManagerHelper"
title: "Class: CameraManagerHelper"
sidebar_label: "CameraManagerHelper"
custom_edit_url: null
---

[@cognite/reveal](../modules/cognite_reveal.md).CameraManagerHelper

Helper methods for implementing a camera manager.

## Constructors

### constructor

 **new CameraManagerHelper**()

## Methods

### calculateCameraStateToFitBoundingBox

 `Static` **calculateCameraStateToFitBoundingBox**(`camera`, `box`, `radiusFactor?`): `Object`

Calculates camera position and target that allows to see the content of provided bounding box.

#### Parameters

| Name | Type | Default value | Description |
| :------ | :------ | :------ | :------ |
| `camera` | `PerspectiveCamera` | `undefined` | Used camera instance. |
| `box` | `Box3` | `undefined` | Bounding box to be fitted. |
| `radiusFactor` | `number` | `2` | The ratio of the distance from camera to center of box and radius of the box. |

#### Returns

`Object`

| Name | Type |
| :------ | :------ |
| `position` | `Vector3` |
| `target` | `Vector3` |

#### Defined in

[packages/camera-manager/src/CameraManagerHelper.ts:97](https://github.com/cognitedata/reveal/blob/71be00fcc/viewer/packages/camera-manager/src/CameraManagerHelper.ts#L97)

___

### calculateNewTargetFromRotation

 `Static` **calculateNewTargetFromRotation**(`camera`, `rotation`, `currentTarget`): `Vector3`

Calculates camera target based on new camera rotation.

#### Parameters

| Name | Type | Description |
| :------ | :------ | :------ |
| `camera` | `PerspectiveCamera` | Used camera instance. |
| `rotation` | `Quaternion` | New camera rotation in quaternion form. |
| `currentTarget` | `Vector3` | Current camera target. |

#### Returns

`Vector3`

#### Defined in

[packages/camera-manager/src/CameraManagerHelper.ts:42](https://github.com/cognitedata/reveal/blob/71be00fcc/viewer/packages/camera-manager/src/CameraManagerHelper.ts#L42)

___

### updateCameraNearAndFar

 `Static` **updateCameraNearAndFar**(`camera`, `combinedBbox`): `void`

Updates near and far plane of the camera based on the bounding box.

#### Parameters

| Name | Type | Description |
| :------ | :------ | :------ |
| `camera` | `PerspectiveCamera` | Used camera instance. |
| `combinedBbox` | `Box3` | Bounding box of all objects on the scene. |

#### Returns

`void`

#### Defined in

[packages/camera-manager/src/CameraManagerHelper.ts:66](https://github.com/cognitedata/reveal/blob/71be00fcc/viewer/packages/camera-manager/src/CameraManagerHelper.ts#L66)


<!-- SOURCE_END: reveal/documentation\versioned_docs\version-3.x\api\classes\cognite_reveal.CameraManagerHelper.md -->

================================================================================


<!-- SOURCE_START: reveal/documentation\versioned_docs\version-3.x\api\classes\cognite_reveal.ClusteredAreaCollection.md -->
## File: reveal/documentation\versioned_docs\version-3.x\api\classes\cognite_reveal.ClusteredAreaCollection.md

---
id: "cognite_reveal.ClusteredAreaCollection"
title: "Class: ClusteredAreaCollection"
sidebar_label: "ClusteredAreaCollection"
custom_edit_url: null
---

[@cognite/reveal](../modules/cognite_reveal.md).ClusteredAreaCollection

AreaCollection that stores a representative box set by merging
inserted boxes that are overlapping or close to each other.
It uses simple heuristics to determine which boxes are to be merged.

## Implements

- [`AreaCollection`](../interfaces/cognite_reveal.AreaCollection.md)

## Constructors

### constructor

 **new ClusteredAreaCollection**()

## Accessors

### isEmpty

 `get` **isEmpty**(): `boolean`

#### Returns

`boolean`

#### Implementation of

[AreaCollection](../interfaces/cognite_reveal.AreaCollection.md).[isEmpty](../interfaces/cognite_reveal.AreaCollection.md#isempty)

#### Defined in

[packages/cad-styling/src/prioritized/ClusteredAreaCollection.ts:16](https://github.com/cognitedata/reveal/blob/71be00fcc/viewer/packages/cad-styling/src/prioritized/ClusteredAreaCollection.ts#L16)

## Methods

### addAreas

 **addAreas**(`boxes`): `void`

Add areas to be covered by the representative set of this
AreaCollection.

#### Parameters

| Name | Type |
| :------ | :------ |
| `boxes` | `Iterable`\<`Box3`\> |

#### Returns

`void`

#### Implementation of

[AreaCollection](../interfaces/cognite_reveal.AreaCollection.md).[addAreas](../interfaces/cognite_reveal.AreaCollection.md#addareas)

#### Defined in

[packages/cad-styling/src/prioritized/ClusteredAreaCollection.ts:34](https://github.com/cognitedata/reveal/blob/71be00fcc/viewer/packages/cad-styling/src/prioritized/ClusteredAreaCollection.ts#L34)

___

### areas

 **areas**(): `Generator`\<`Box3`, `any`, `unknown`\>

Return some set of boxes that cover the boxes inserted with `addAreas`.
It is required that each inserted box is completely covered by some
subset of boxes in the set returned from `areas`

#### Returns

`Generator`\<`Box3`, `any`, `unknown`\>

#### Implementation of

[AreaCollection](../interfaces/cognite_reveal.AreaCollection.md).[areas](../interfaces/cognite_reveal.AreaCollection.md#areas)

#### Defined in

[packages/cad-styling/src/prioritized/ClusteredAreaCollection.ts:20](https://github.com/cognitedata/reveal/blob/71be00fcc/viewer/packages/cad-styling/src/prioritized/ClusteredAreaCollection.ts#L20)

___

### intersectWith

 **intersectWith**(`boxes`): `void`

Alter the representative set to cover only the intersection between the
representative set of this AreaCollection and the incoming boxes.
Note that the intersection of two representative sets A' and B' that
represent the original box sets A and B will cover the intersection between
A and B, and will thus be a valid representative set for the intersection of A and B.

#### Parameters

| Name | Type |
| :------ | :------ |
| `boxes` | `Iterable`\<`Box3`\> |

#### Returns

`void`

#### Implementation of

[AreaCollection](../interfaces/cognite_reveal.AreaCollection.md).[intersectWith](../interfaces/cognite_reveal.AreaCollection.md#intersectwith)

#### Defined in

[packages/cad-styling/src/prioritized/ClusteredAreaCollection.ts:38](https://github.com/cognitedata/reveal/blob/71be00fcc/viewer/packages/cad-styling/src/prioritized/ClusteredAreaCollection.ts#L38)

___

### intersectsBox

 **intersectsBox**(`box`): `boolean`

Return whether the input box intersects the AreaCollection.

#### Parameters

| Name | Type |
| :------ | :------ |
| `box` | `Box3` |

#### Returns

`boolean`

#### Implementation of

[AreaCollection](../interfaces/cognite_reveal.AreaCollection.md).[intersectsBox](../interfaces/cognite_reveal.AreaCollection.md#intersectsbox)

#### Defined in

[packages/cad-styling/src/prioritized/ClusteredAreaCollection.ts:24](https://github.com/cognitedata/reveal/blob/71be00fcc/viewer/packages/cad-styling/src/prioritized/ClusteredAreaCollection.ts#L24)


<!-- SOURCE_END: reveal/documentation\versioned_docs\version-3.x\api\classes\cognite_reveal.ClusteredAreaCollection.md -->

================================================================================


<!-- SOURCE_START: reveal/documentation\versioned_docs\version-3.x\api\classes\cognite_reveal.Cognite3DModel.md -->
## File: reveal/documentation\versioned_docs\version-3.x\api\classes\cognite_reveal.Cognite3DModel.md

---
id: "cognite_reveal.Cognite3DModel"
title: "Class: Cognite3DModel"
sidebar_label: "Cognite3DModel"
custom_edit_url: null
---

[@cognite/reveal](../modules/cognite_reveal.md).Cognite3DModel

## Hierarchy

- `Object3D`

   **`Cognite3DModel`**

## Implements

- [`CogniteModelBase`](../interfaces/cognite_reveal.CogniteModelBase.md)
- [`CdfModelNodeCollectionDataProvider`](../interfaces/cognite_reveal.CdfModelNodeCollectionDataProvider.md)

## Properties

### modelId

 `Readonly` **modelId**: `number`

The CDF model ID of the model.

#### Implementation of

[CdfModelNodeCollectionDataProvider](../interfaces/cognite_reveal.CdfModelNodeCollectionDataProvider.md).[modelId](../interfaces/cognite_reveal.CdfModelNodeCollectionDataProvider.md#modelid)

#### Defined in

[packages/cad-model/src/wrappers/Cognite3DModel.ts:57](https://github.com/cognitedata/reveal/blob/71be00fcc/viewer/packages/cad-model/src/wrappers/Cognite3DModel.ts#L57)

___

### revisionId

 `Readonly` **revisionId**: `number`

The CDF revision ID of the model.

#### Implementation of

[CdfModelNodeCollectionDataProvider](../interfaces/cognite_reveal.CdfModelNodeCollectionDataProvider.md).[revisionId](../interfaces/cognite_reveal.CdfModelNodeCollectionDataProvider.md#revisionid)

#### Defined in

[packages/cad-model/src/wrappers/Cognite3DModel.ts:61](https://github.com/cognitedata/reveal/blob/71be00fcc/viewer/packages/cad-model/src/wrappers/Cognite3DModel.ts#L61)

___

### type

 `Readonly` **type**: [`SupportedModelTypes`](../modules/cognite_reveal.md#supportedmodeltypes) = `'cad'`

#### Implementation of

[CogniteModelBase](../interfaces/cognite_reveal.CogniteModelBase.md).[type](../interfaces/cognite_reveal.CogniteModelBase.md#type)

#### Overrides

THREE.Object3D.type

#### Defined in

[packages/cad-model/src/wrappers/Cognite3DModel.ts:26](https://github.com/cognitedata/reveal/blob/71be00fcc/viewer/packages/cad-model/src/wrappers/Cognite3DModel.ts#L26)

## Accessors

### modelUnit

 `get` **modelUnit**(): ``""`` \| [`WellKnownUnit`](../modules/cognite_reveal.md#wellknownunit)

Returns the unit the coordinates for the model is stored. Returns an empty string
if no unit has been stored.
Note that coordinates in Reveal always are converted to meters using @see \{@link modelUnitToMetersFactor}.

#### Returns

``""`` \| [`WellKnownUnit`](../modules/cognite_reveal.md#wellknownunit)

#### Defined in

[packages/cad-model/src/wrappers/Cognite3DModel.ts:40](https://github.com/cognitedata/reveal/blob/71be00fcc/viewer/packages/cad-model/src/wrappers/Cognite3DModel.ts#L40)

___

### modelUnitToMetersFactor

 `get` **modelUnitToMetersFactor**(): `number`

Returns the conversion factor that converts from model coordinates to meters. Note that this can
return undefined if the model has been stored in an unsupported unit.

#### Returns

`number`

#### Defined in

[packages/cad-model/src/wrappers/Cognite3DModel.ts:50](https://github.com/cognitedata/reveal/blob/71be00fcc/viewer/packages/cad-model/src/wrappers/Cognite3DModel.ts#L50)

___

### nodeCount

 `get` **nodeCount**(): `number`

Returns the number of nodes in the model.

#### Returns

`number`

#### Implementation of

[CdfModelNodeCollectionDataProvider](../interfaces/cognite_reveal.CdfModelNodeCollectionDataProvider.md).[nodeCount](../interfaces/cognite_reveal.CdfModelNodeCollectionDataProvider.md#nodecount)

#### Defined in

[packages/cad-model/src/wrappers/Cognite3DModel.ts:480](https://github.com/cognitedata/reveal/blob/71be00fcc/viewer/packages/cad-model/src/wrappers/Cognite3DModel.ts#L480)

___

### styledNodeCollections

 `get` **styledNodeCollections**(): \{ `appearance`: [`NodeAppearance`](../modules/cognite_reveal.md#nodeappearance) ; `nodeCollection`: [`NodeCollection`](cognite_reveal.NodeCollection.md)  }[]

Returns all currently registered node collections and associated appearance.

#### Returns

\{ `appearance`: [`NodeAppearance`](../modules/cognite_reveal.md#nodeappearance) ; `nodeCollection`: [`NodeCollection`](cognite_reveal.NodeCollection.md)  }[]

#### Defined in

[packages/cad-model/src/wrappers/Cognite3DModel.ts:123](https://github.com/cognitedata/reveal/blob/71be00fcc/viewer/packages/cad-model/src/wrappers/Cognite3DModel.ts#L123)

## Methods

### assignStyledNodeCollection

 **assignStyledNodeCollection**(`nodeCollection`, `appearance`): `void`

Customizes rendering style for a set of nodes, e.g. to highlight, hide
or color code a set of 3D objects. This allows for custom look and feel
of the 3D model which is useful to highlight certain parts or to
color code the 3D model based on information (e.g. coloring the 3D model
by construction status).

The [NodeCollection](cognite_reveal.NodeCollection.md) can be updated dynamically and the rendered nodes will be
updated automatically as the styling changes. The appearance of the style nodes
cannot be changed.

When nodes are in several styled sets, the style is combined in the order
the sets were added, i.e. styled sets added late can overwrite styled sets added
early.

If the `nodeCollection` provided already has an assigned style, this style will
be replaced with style provided.

**`example`**
```js
model.setDefaultNodeAppearance({ rendererGhosted: true });
const visibleNodes = new TreeIndexNodeCollection(someTreeIndices);
model.assignStyledNodeCollection(visibleSet, { rendererGhosted: false });
```

#### Parameters

| Name | Type | Description |
| :------ | :------ | :------ |
| `nodeCollection` | [`NodeCollection`](cognite_reveal.NodeCollection.md) | Dynamic set of nodes to apply the provided appearance to. |
| `appearance` | [`NodeAppearance`](../modules/cognite_reveal.md#nodeappearance) | Appearance to style the provided set with. |

#### Returns

`void`

#### Defined in

[packages/cad-model/src/wrappers/Cognite3DModel.ts:154](https://github.com/cognitedata/reveal/blob/71be00fcc/viewer/packages/cad-model/src/wrappers/Cognite3DModel.ts#L154)

___

### dispose

 **dispose**(): `void`

Cleans up used resources.

#### Returns

`void`

#### Implementation of

[CogniteModelBase](../interfaces/cognite_reveal.CogniteModelBase.md).[dispose](../interfaces/cognite_reveal.CogniteModelBase.md#dispose)

#### Defined in

[packages/cad-model/src/wrappers/Cognite3DModel.ts:314](https://github.com/cognitedata/reveal/blob/71be00fcc/viewer/packages/cad-model/src/wrappers/Cognite3DModel.ts#L314)

___

### getAncestorTreeIndices

 **getAncestorTreeIndices**(`treeIndex`, `generation`): `Promise`\<[`NumericRange`](cognite_reveal.NumericRange.md)\>

Determines the tree index range of a subtree of an ancestor of the provided
node defined by a tree index.

#### Parameters

| Name | Type | Description |
| :------ | :------ | :------ |
| `treeIndex` | `number` | Tree index of node to find ancestor tree index range for. |
| `generation` | `number` | What "generation" to find. 0 is the node itself, 1 means parent, 2 means grandparent etc. If the node doesn't have as many ancestors, the root of the model is returned. This can be determined by checking that the range returned includes 0. |

#### Returns

`Promise`\<[`NumericRange`](cognite_reveal.NumericRange.md)\>

Tree index range of the subtree spanned by the ancestor at the
"generation" specified, or the root.

#### Defined in

[packages/cad-model/src/wrappers/Cognite3DModel.ts:339](https://github.com/cognitedata/reveal/blob/71be00fcc/viewer/packages/cad-model/src/wrappers/Cognite3DModel.ts#L339)

___

### getBoundingBoxByNodeId

 **getBoundingBoxByNodeId**(`nodeId`, `box?`): `Promise`\<`Box3`\>

Fetches a bounding box from the CDF by the nodeId.

**`example`**
```js
const box = new THREE.Box3()
const nodeId = 100500;
await model.getBoundingBoxByNodeId(nodeId, box);
// box now has the bounding box
```
```js
// the following code does the same
const box = await model.getBoundingBoxByNodeId(nodeId);
```

#### Parameters

| Name | Type | Description |
| :------ | :------ | :------ |
| `nodeId` | `number` |  |
| `box?` | `Box3` | Optional. Used to write result to. |

#### Returns

`Promise`\<`Box3`\>

#### Defined in

[packages/cad-model/src/wrappers/Cognite3DModel.ts:422](https://github.com/cognitedata/reveal/blob/71be00fcc/viewer/packages/cad-model/src/wrappers/Cognite3DModel.ts#L422)

___

### getBoundingBoxByTreeIndex

 **getBoundingBoxByTreeIndex**(`treeIndex`, `box?`): `Promise`\<`Box3`\>

Determine the bounding box of the node identified by the tree index provided. Note that this
function uses the CDF API to look up the bounding box.

**`example`**
```js
const box = new THREE.Box3()
const treeIndex = 42;
await model.getBoundingBoxByTreeIndex(treeIndex, box);
// box now has the bounding box
```
```js
// the following code does the same
const box = await model.getBoundingBoxByTreeIndex(treeIndex);
```

#### Parameters

| Name | Type | Description |
| :------ | :------ | :------ |
| `treeIndex` | `number` | Tree index of the node to find bounding box for. |
| `box?` | `Box3` | Optional preallocated container to hold the bounding box. |

#### Returns

`Promise`\<`Box3`\>

#### Defined in

[packages/cad-model/src/wrappers/Cognite3DModel.ts:456](https://github.com/cognitedata/reveal/blob/71be00fcc/viewer/packages/cad-model/src/wrappers/Cognite3DModel.ts#L456)

___

### getCameraConfiguration

 **getCameraConfiguration**(): [`CameraConfiguration`](../modules/cognite_reveal.md#cameraconfiguration)

Retrieves the camera position and target stored for the model. Typically this
is used to store a good starting position for a model. Returns `undefined` if there
isn't any stored camera configuration for the model.

#### Returns

[`CameraConfiguration`](../modules/cognite_reveal.md#cameraconfiguration)

#### Implementation of

[CogniteModelBase](../interfaces/cognite_reveal.CogniteModelBase.md).[getCameraConfiguration](../interfaces/cognite_reveal.CogniteModelBase.md#getcameraconfiguration)

#### Defined in

[packages/cad-model/src/wrappers/Cognite3DModel.ts:386](https://github.com/cognitedata/reveal/blob/71be00fcc/viewer/packages/cad-model/src/wrappers/Cognite3DModel.ts#L386)

___

### getDefaultNodeAppearance

 **getDefaultNodeAppearance**(): [`NodeAppearance`](../modules/cognite_reveal.md#nodeappearance)

Gets the default appearance for nodes that are not styled using
[assignStyledNodeCollection](cognite_reveal.Cognite3DModel.md#assignstylednodecollection).

#### Returns

[`NodeAppearance`](../modules/cognite_reveal.md#nodeappearance)

#### Defined in

[packages/cad-model/src/wrappers/Cognite3DModel.ts:116](https://github.com/cognitedata/reveal/blob/71be00fcc/viewer/packages/cad-model/src/wrappers/Cognite3DModel.ts#L116)

___

### getModelBoundingBox

 **getModelBoundingBox**(`outBbox?`, `restrictToMostGeometry?`): `Box3`

Determines the full bounding box of the model.

**`example`**
```js
const box = new THREE.Box3()
model.getModelBoundingBox(box);
// box now has the bounding box
```
```js
// the following code does the same
const box = model.getModelBoundingBox();
```

#### Parameters

| Name | Type | Description |
| :------ | :------ | :------ |
| `outBbox?` | `Box3` | Optional. Used to write result to. |
| `restrictToMostGeometry?` | `boolean` | Optional. When true, returned bounds are restricted to where most of the geometry is located. This is useful for models that have junk geometry located far from the "main" model. Added in version 1.3.0. |

#### Returns

`Box3`

Model bounding box.

#### Implementation of

[CogniteModelBase](../interfaces/cognite_reveal.CogniteModelBase.md).[getModelBoundingBox](../interfaces/cognite_reveal.CogniteModelBase.md#getmodelboundingbox)

#### Defined in

[packages/cad-model/src/wrappers/Cognite3DModel.ts:370](https://github.com/cognitedata/reveal/blob/71be00fcc/viewer/packages/cad-model/src/wrappers/Cognite3DModel.ts#L370)

___

### getModelTransformation

 **getModelTransformation**(`out?`): `Matrix4`

Gets transformation matrix of the model.

#### Parameters

| Name | Type | Description |
| :------ | :------ | :------ |
| `out?` | `Matrix4` | Preallocated `THREE.Matrix4` (optional). |

#### Returns

`Matrix4`

#### Implementation of

[CogniteModelBase](../interfaces/cognite_reveal.CogniteModelBase.md).[getModelTransformation](../interfaces/cognite_reveal.CogniteModelBase.md#getmodeltransformation)

#### Defined in

[packages/cad-model/src/wrappers/Cognite3DModel.ts:402](https://github.com/cognitedata/reveal/blob/71be00fcc/viewer/packages/cad-model/src/wrappers/Cognite3DModel.ts#L402)

___

### getSubtreeTreeIndices

 **getSubtreeTreeIndices**(`treeIndex`): `Promise`\<[`NumericRange`](cognite_reveal.NumericRange.md)\>

Determines the range of tree indices for a given subtree.

#### Parameters

| Name | Type | Description |
| :------ | :------ | :------ |
| `treeIndex` | `number` | Index of the root of the subtree to get the index range for. |

#### Returns

`Promise`\<[`NumericRange`](cognite_reveal.NumericRange.md)\>

#### Defined in

[packages/cad-model/src/wrappers/Cognite3DModel.ts:323](https://github.com/cognitedata/reveal/blob/71be00fcc/viewer/packages/cad-model/src/wrappers/Cognite3DModel.ts#L323)

___

### iterateNodesByTreeIndex

 **iterateNodesByTreeIndex**(`action`): `Promise`\<`void`\>

Iterates over all nodes in the model and applies the provided action to each node (identified by tree index).
The passed action is applied incrementally to avoid main thread blocking, meaning that the changes can be partially
applied until promise is resolved (iteration is done).

**`example`**
```js
const logIndex = (treeIndex) => console.log(treeIndex);
await model.iterateNodesByTreeIndex(logIndex); // 0, 1, 2, ...
```

#### Parameters

| Name | Type | Description |
| :------ | :------ | :------ |
| `action` | (`treeIndex`: `number`) => `void` | Function that will be called with a treeIndex argument. |

#### Returns

`Promise`\<`void`\>

Promise that is resolved once the iteration is done.

#### Defined in

[packages/cad-model/src/wrappers/Cognite3DModel.ts:473](https://github.com/cognitedata/reveal/blob/71be00fcc/viewer/packages/cad-model/src/wrappers/Cognite3DModel.ts#L473)

___

### iterateSubtreeByTreeIndex

 **iterateSubtreeByTreeIndex**(`treeIndex`, `action`): `Promise`\<`void`\>

Iterates over all nodes in a subtree of the model and applies the provided action to each node
(identified by tree index). The provided node is included in the visited set.  The passed action
is applied incrementally to avoid main thread blocking, meaning that the changes can be partially
applied until promise is resolved (iteration is done).

**`example`**
```js
// make a subtree to be gray
await model.iterateNodesByTreeIndex(treeIndex => {
  model.setNodeColorByTreeIndex(treeIndex, 127, 127, 127);
});
```

#### Parameters

| Name | Type | Description |
| :------ | :------ | :------ |
| `treeIndex` | `number` | Tree index of the top parent of the subtree. |
| `action` | (`treeIndex`: `number`) => `void` | Function that will be called with a treeIndex argument. |

#### Returns

`Promise`\<`void`\>

Promise that is resolved once the iteration is done.

#### Defined in

[packages/cad-model/src/wrappers/Cognite3DModel.ts:500](https://github.com/cognitedata/reveal/blob/71be00fcc/viewer/packages/cad-model/src/wrappers/Cognite3DModel.ts#L500)

___

### mapBoxFromCdfToModelCoordinates

 **mapBoxFromCdfToModelCoordinates**(`box`, `out?`): `Box3`

Maps from a 3D position in "CDF space" to coordinates in "ThreeJS model space".
This is necessary because CDF has a right-handed Z-up coordinate system while ThreeJS
uses a right-hand Y-up coordinate system. This function also accounts for transformation
applied to the model.

#### Parameters

| Name | Type | Description |
| :------ | :------ | :------ |
| `box` | `Box3` | The box in CDF model coordinates. |
| `out?` | `Box3` | Optional preallocated buffer for storing the result. May be same input as `box`. |

#### Returns

`Box3`

Transformed box.

#### Implementation of

[CdfModelNodeCollectionDataProvider](../interfaces/cognite_reveal.CdfModelNodeCollectionDataProvider.md).[mapBoxFromCdfToModelCoordinates](../interfaces/cognite_reveal.CdfModelNodeCollectionDataProvider.md#mapboxfromcdftomodelcoordinates)

#### Defined in

[packages/cad-model/src/wrappers/Cognite3DModel.ts:302](https://github.com/cognitedata/reveal/blob/71be00fcc/viewer/packages/cad-model/src/wrappers/Cognite3DModel.ts#L302)

___

### mapBoxFromModelToCdfCoordinates

 **mapBoxFromModelToCdfCoordinates**(`box`, `out?`): `Box3`

Maps from a 3D position in "ThreeJS model space" to coordinates in "CDF space".
This is necessary because CDF has a right-handed Z-up coordinate system while ThreeJS
uses a right-hand Y-up coordinate system. This function also accounts for transformation
applied to the model.

#### Parameters

| Name | Type | Description |
| :------ | :------ | :------ |
| `box` | `Box3` | The box in ThreeJS/model coordinates. |
| `out?` | `Box3` | Optional preallocated buffer for storing the result. May be same input as `box`. |

#### Returns

`Box3`

Transformed box.

#### Implementation of

[CdfModelNodeCollectionDataProvider](../interfaces/cognite_reveal.CdfModelNodeCollectionDataProvider.md).[mapBoxFromModelToCdfCoordinates](../interfaces/cognite_reveal.CdfModelNodeCollectionDataProvider.md#mapboxfrommodeltocdfcoordinates)

#### Defined in

[packages/cad-model/src/wrappers/Cognite3DModel.ts:284](https://github.com/cognitedata/reveal/blob/71be00fcc/viewer/packages/cad-model/src/wrappers/Cognite3DModel.ts#L284)

___

### mapFromCdfToModelCoordinates

 **mapFromCdfToModelCoordinates**(`p`, `out?`): `Vector3`

Maps a position retrieved from the CDF API (e.g. 3D node information) to
coordinates in "ThreeJS model space". This is necessary because CDF has a right-handed
Z-up coordinate system while ThreeJS uses a right-hand Y-up coordinate system.

#### Parameters

| Name | Type | Description |
| :------ | :------ | :------ |
| `p` | `Vector3` | The CDF coordinate to transform. |
| `out?` | `Vector3` | Optional preallocated buffer for storing the result. May be `p`. |

#### Returns

`Vector3`

Transformed position.

#### Defined in

[packages/cad-model/src/wrappers/Cognite3DModel.ts:248](https://github.com/cognitedata/reveal/blob/71be00fcc/viewer/packages/cad-model/src/wrappers/Cognite3DModel.ts#L248)

___

### mapNodeIdToTreeIndex

 **mapNodeIdToTreeIndex**(`nodeId`): `Promise`\<`number`\>

Maps a single node ID to tree index. This is useful when you e.g. have a
node ID from an asset mapping and want to highlight the given asset using
[mapNodeIdsToTreeIndices](cognite_reveal.Cognite3DModel.md#mapnodeidstotreeindices) is recommended for better performance when
mapping multiple IDs.

**`throws`** If an invalid/non-existant node ID is provided the function throws an error.

#### Parameters

| Name | Type | Description |
| :------ | :------ | :------ |
| `nodeId` | `number` | A Node ID to map to a tree index. |

#### Returns

`Promise`\<`number`\>

TreeIndex of the provided node.

#### Defined in

[packages/cad-model/src/wrappers/Cognite3DModel.ts:528](https://github.com/cognitedata/reveal/blob/71be00fcc/viewer/packages/cad-model/src/wrappers/Cognite3DModel.ts#L528)

___

### mapNodeIdsToTreeIndices

 **mapNodeIdsToTreeIndices**(`nodeIds`): `Promise`\<`number`[]\>

Maps a list of Node IDs to tree indices. This function is useful when you have
a list of nodes, e.g. from Asset Mappings, that you want to highlight, hide,
color etc in the viewer.

**`throws`** If an invalid/non-existant node ID is provided the function throws an error.

#### Parameters

| Name | Type | Description |
| :------ | :------ | :------ |
| `nodeIds` | `number`[] | List of node IDs to map to tree indices. |

#### Returns

`Promise`\<`number`[]\>

A list of tree indices corresponing to the elements in the input.

#### Defined in

[packages/cad-model/src/wrappers/Cognite3DModel.ts:514](https://github.com/cognitedata/reveal/blob/71be00fcc/viewer/packages/cad-model/src/wrappers/Cognite3DModel.ts#L514)

___

### mapPositionFromModelToCdfCoordinates

 **mapPositionFromModelToCdfCoordinates**(`p`, `out?`): `Vector3`

Maps from a 3D position in "ThreeJS model space" (e.g. a ray intersection coordinate)
to coordinates in "CDF space". This is necessary because CDF has a right-handed
Z-up coordinate system while ThreeJS uses a right-hand Y-up coordinate system.
This function also accounts for transformation applied to the model.

#### Parameters

| Name | Type | Description |
| :------ | :------ | :------ |
| `p` | `Vector3` | The ThreeJS coordinate to transform. |
| `out?` | `Vector3` | Optional preallocated buffer for storing the result. May be `p`. |

#### Returns

`Vector3`

Transformed position.

#### Defined in

[packages/cad-model/src/wrappers/Cognite3DModel.ts:266](https://github.com/cognitedata/reveal/blob/71be00fcc/viewer/packages/cad-model/src/wrappers/Cognite3DModel.ts#L266)

___

### mapTreeIndexToNodeId

 **mapTreeIndexToNodeId**(`treeIndex`): `Promise`\<`number`\>

Maps a single tree index to node ID for use with the API. If you have multiple
tree indices to map, [mapNodeIdsToTreeIndices](cognite_reveal.Cognite3DModel.md#mapnodeidstotreeindices) is recommended for better
performance.

**`throws`** If an invalid/non-existent node ID is provided the function throws an error.

#### Parameters

| Name | Type | Description |
| :------ | :------ | :------ |
| `treeIndex` | `number` | A tree index to map to a Node ID. |

#### Returns

`Promise`\<`number`\>

TreeIndex of the provided node.

#### Defined in

[packages/cad-model/src/wrappers/Cognite3DModel.ts:554](https://github.com/cognitedata/reveal/blob/71be00fcc/viewer/packages/cad-model/src/wrappers/Cognite3DModel.ts#L554)

___

### mapTreeIndicesToNodeIds

 **mapTreeIndicesToNodeIds**(`treeIndices`): `Promise`\<`number`[]\>

Maps a list of tree indices to node IDs for use with the Cognite SDK.
This function is useful if you have a list of tree indices, e.g. from
[Cognite3DModel.iterateSubtreeByTreeIndex](cognite_reveal.Cognite3DModel.md#iteratesubtreebytreeindex), and want to perform
some operations on these nodes using the SDK.

**`throws`** If an invalid tree index is provided the function throws an error.

#### Parameters

| Name | Type | Description |
| :------ | :------ | :------ |
| `treeIndices` | `number`[] | Tree indices to map to node IDs. |

#### Returns

`Promise`\<`number`[]\>

A list of node IDs corresponding to the elements of the input.

#### Defined in

[packages/cad-model/src/wrappers/Cognite3DModel.ts:542](https://github.com/cognitedata/reveal/blob/71be00fcc/viewer/packages/cad-model/src/wrappers/Cognite3DModel.ts#L542)

___

### removeAllStyledNodeCollections

 **removeAllStyledNodeCollections**(): `void`

Removes all styled collections, resetting the appearance of all nodes to the
default appearance.

#### Returns

`void`

#### Defined in

[packages/cad-model/src/wrappers/Cognite3DModel.ts:186](https://github.com/cognitedata/reveal/blob/71be00fcc/viewer/packages/cad-model/src/wrappers/Cognite3DModel.ts#L186)

___

### resetNodeTransform

 **resetNodeTransform**(`treeIndices`): `void`

Resets the transformation for the nodes given.

#### Parameters

| Name | Type | Description |
| :------ | :------ | :------ |
| `treeIndices` | [`NumericRange`](cognite_reveal.NumericRange.md) | Tree indices of the nodes to reset transforms for. |

#### Returns

`void`

#### Defined in

[packages/cad-model/src/wrappers/Cognite3DModel.ts:225](https://github.com/cognitedata/reveal/blob/71be00fcc/viewer/packages/cad-model/src/wrappers/Cognite3DModel.ts#L225)

___

### resetNodeTransformByTreeIndex

 **resetNodeTransformByTreeIndex**(`treeIndex`, `applyToChildren?`): `Promise`\<`number`\>

Remove override transform of the node by tree index.

#### Parameters

| Name | Type | Default value |
| :------ | :------ | :------ |
| `treeIndex` | `number` | `undefined` |
| `applyToChildren` | `boolean` | `true` |

#### Returns

`Promise`\<`number`\>

#### Defined in

[packages/cad-model/src/wrappers/Cognite3DModel.ts:234](https://github.com/cognitedata/reveal/blob/71be00fcc/viewer/packages/cad-model/src/wrappers/Cognite3DModel.ts#L234)

___

### setDefaultNodeAppearance

 **setDefaultNodeAppearance**(`appearance`): `void`

Sets the default appearance for nodes that are not styled using
[assignStyledNodeCollection](cognite_reveal.Cognite3DModel.md#assignstylednodecollection). Updating the default style can be an
expensive operation, so use with care.

#### Parameters

| Name | Type | Description |
| :------ | :------ | :------ |
| `appearance` | [`NodeAppearance`](../modules/cognite_reveal.md#nodeappearance) | Default node appearance. |

#### Returns

`void`

#### Defined in

[packages/cad-model/src/wrappers/Cognite3DModel.ts:108](https://github.com/cognitedata/reveal/blob/71be00fcc/viewer/packages/cad-model/src/wrappers/Cognite3DModel.ts#L108)

___

### setModelTransformation

 **setModelTransformation**(`matrix`): `void`

Sets transformation matrix of the model. This overrides the current transformation.

#### Parameters

| Name | Type | Description |
| :------ | :------ | :------ |
| `matrix` | `Matrix4` | Transformation matrix. |

#### Returns

`void`

#### Implementation of

[CogniteModelBase](../interfaces/cognite_reveal.CogniteModelBase.md).[setModelTransformation](../interfaces/cognite_reveal.CogniteModelBase.md#setmodeltransformation)

#### Defined in

[packages/cad-model/src/wrappers/Cognite3DModel.ts:394](https://github.com/cognitedata/reveal/blob/71be00fcc/viewer/packages/cad-model/src/wrappers/Cognite3DModel.ts#L394)

___

### setNodeTransform

 **setNodeTransform**(`treeIndices`, `transformMatrix`): `void`

Apply a transformation matrix to the tree indices given, changing
rotation, scale and/or position.

Note that setting multiple transformations for the same
node isn't supported and might lead to undefined results.

#### Parameters

| Name | Type | Description |
| :------ | :------ | :------ |
| `treeIndices` | [`NumericRange`](cognite_reveal.NumericRange.md) | Tree indices of nodes to apply the transformation to. |
| `transformMatrix` | `Matrix4` | Transformation to apply. |

#### Returns

`void`

#### Defined in

[packages/cad-model/src/wrappers/Cognite3DModel.ts:200](https://github.com/cognitedata/reveal/blob/71be00fcc/viewer/packages/cad-model/src/wrappers/Cognite3DModel.ts#L200)

___

### setNodeTransformByTreeIndex

 **setNodeTransformByTreeIndex**(`treeIndex`, `transform`, `applyToChildren?`): `Promise`\<`number`\>

Set override transform of the node by tree index.

#### Parameters

| Name | Type | Default value |
| :------ | :------ | :------ |
| `treeIndex` | `number` | `undefined` |
| `transform` | `Matrix4` | `undefined` |
| `applyToChildren` | `boolean` | `true` |

#### Returns

`Promise`\<`number`\>

#### Defined in

[packages/cad-model/src/wrappers/Cognite3DModel.ts:211](https://github.com/cognitedata/reveal/blob/71be00fcc/viewer/packages/cad-model/src/wrappers/Cognite3DModel.ts#L211)

___

### unassignStyledNodeCollection

 **unassignStyledNodeCollection**(`nodeCollection`): `void`

Removes styling for previously added styled collection, resetting the style to the default (or
the style imposed by other styled collections).

**`throws`** Error if node collection isn't assigned to the model.

#### Parameters

| Name | Type | Description |
| :------ | :------ | :------ |
| `nodeCollection` | [`NodeCollection`](cognite_reveal.NodeCollection.md) | Node collection previously added using [assignStyledNodeCollection](cognite_reveal.Cognite3DModel.md#assignstylednodecollection). |

#### Returns

`void`

#### Defined in

[packages/cad-model/src/wrappers/Cognite3DModel.ts:172](https://github.com/cognitedata/reveal/blob/71be00fcc/viewer/packages/cad-model/src/wrappers/Cognite3DModel.ts#L172)


<!-- SOURCE_END: reveal/documentation\versioned_docs\version-3.x\api\classes\cognite_reveal.Cognite3DModel.md -->

================================================================================


<!-- SOURCE_START: reveal/documentation\versioned_docs\version-3.x\api\classes\cognite_reveal.Cognite3DViewer.md -->
## File: reveal/documentation\versioned_docs\version-3.x\api\classes\cognite_reveal.Cognite3DViewer.md

---
id: "cognite_reveal.Cognite3DViewer"
title: "Class: Cognite3DViewer"
sidebar_label: "Cognite3DViewer"
custom_edit_url: null
---

[@cognite/reveal](../modules/cognite_reveal.md).Cognite3DViewer

## Constructors

### constructor

 **new Cognite3DViewer**(`options`)

#### Parameters

| Name | Type |
| :------ | :------ |
| `options` | [`Cognite3DViewerOptions`](../interfaces/cognite_reveal.Cognite3DViewerOptions.md) |

#### Defined in

[packages/api/src/public/migration/Cognite3DViewer.ts:204](https://github.com/cognitedata/reveal/blob/71be00fcc/viewer/packages/api/src/public/migration/Cognite3DViewer.ts#L204)

## Accessors

### cadBudget

 `get` **cadBudget**(): [`CadModelBudget`](../modules/cognite_reveal.md#cadmodelbudget)

Gets the current budget for downloading geometry for CAD models. Note that this
budget is shared between all added CAD models and not a per-model budget.

#### Returns

[`CadModelBudget`](../modules/cognite_reveal.md#cadmodelbudget)

#### Defined in

[packages/api/src/public/migration/Cognite3DViewer.ts:158](https://github.com/cognitedata/reveal/blob/71be00fcc/viewer/packages/api/src/public/migration/Cognite3DViewer.ts#L158)

 `set` **cadBudget**(`budget`): `void`

Sets the current budget for downloading geometry for CAD models. Note that this
budget is shared between all added CAD models and not a per-model budget.

#### Parameters

| Name | Type |
| :------ | :------ |
| `budget` | [`CadModelBudget`](../modules/cognite_reveal.md#cadmodelbudget) |

#### Returns

`void`

#### Defined in

[packages/api/src/public/migration/Cognite3DViewer.ts:168](https://github.com/cognitedata/reveal/blob/71be00fcc/viewer/packages/api/src/public/migration/Cognite3DViewer.ts#L168)

___

### cameraManager

 `get` **cameraManager**(): [`CameraManager`](../interfaces/cognite_reveal.CameraManager.md)

#### Returns

[`CameraManager`](../interfaces/cognite_reveal.CameraManager.md)

#### Defined in

[packages/api/src/public/migration/Cognite3DViewer.ts:498](https://github.com/cognitedata/reveal/blob/71be00fcc/viewer/packages/api/src/public/migration/Cognite3DViewer.ts#L498)

___

### domElement

 `get` **domElement**(): `HTMLElement`

The DOM element the viewer will insert its rendering canvas into.
The DOM element can be specified in the options when the viewer is created.
If not specified, the DOM element will be created automatically.
The DOM element cannot be changed after the viewer has been created.

#### Returns

`HTMLElement`

#### Defined in

[packages/api/src/public/migration/Cognite3DViewer.ts:96](https://github.com/cognitedata/reveal/blob/71be00fcc/viewer/packages/api/src/public/migration/Cognite3DViewer.ts#L96)

___

### models

 `get` **models**(): [`CogniteModelBase`](../interfaces/cognite_reveal.CogniteModelBase.md)[]

Gets a list of models currently added to the viewer.

#### Returns

[`CogniteModelBase`](../interfaces/cognite_reveal.CogniteModelBase.md)[]

#### Defined in

[packages/api/src/public/migration/Cognite3DViewer.ts:193](https://github.com/cognitedata/reveal/blob/71be00fcc/viewer/packages/api/src/public/migration/Cognite3DViewer.ts#L193)

___

### pointCloudBudget

 `get` **pointCloudBudget**(): [`PointCloudBudget`](../modules/cognite_reveal.md#pointcloudbudget)

Returns the point cloud budget. The budget is shared between all loaded
point cloud models.

#### Returns

[`PointCloudBudget`](../modules/cognite_reveal.md#pointcloudbudget)

#### Defined in

[packages/api/src/public/migration/Cognite3DViewer.ts:178](https://github.com/cognitedata/reveal/blob/71be00fcc/viewer/packages/api/src/public/migration/Cognite3DViewer.ts#L178)

 `set` **pointCloudBudget**(`budget`): `void`

Sets the point cloud budget. The budget is shared between all loaded
point cloud models.

#### Parameters

| Name | Type |
| :------ | :------ |
| `budget` | [`PointCloudBudget`](../modules/cognite_reveal.md#pointcloudbudget) |

#### Returns

`void`

#### Defined in

[packages/api/src/public/migration/Cognite3DViewer.ts:186](https://github.com/cognitedata/reveal/blob/71be00fcc/viewer/packages/api/src/public/migration/Cognite3DViewer.ts#L186)

___

### renderer

 `get` **renderer**(): `WebGLRenderer`

Returns the renderer used to produce images from 3D geometry.

#### Returns

`WebGLRenderer`

#### Defined in

[packages/api/src/public/migration/Cognite3DViewer.ts:103](https://github.com/cognitedata/reveal/blob/71be00fcc/viewer/packages/api/src/public/migration/Cognite3DViewer.ts#L103)

## Methods

### addCadModel

 **addCadModel**(`options`): `Promise`\<[`Cognite3DModel`](cognite_reveal.Cognite3DModel.md)\>

Add a new CAD 3D model to the viewer.
Call [Cognite3DViewer.fitCameraToModel](cognite_reveal.Cognite3DViewer.md#fitcameratomodel) to see the model after the model has loaded.

**`example`**
```js
const options = {
modelId:     'COGNITE_3D_MODEL_ID',
revisionId:  'COGNITE_3D_REVISION_ID',
};
viewer.addCadModel(options).then(model => {
viewer.fitCameraToModel(model, 0);
});
```

#### Parameters

| Name | Type |
| :------ | :------ |
| `options` | [`AddModelOptions`](../interfaces/cognite_reveal.AddModelOptions.md) |

#### Returns

`Promise`\<[`Cognite3DModel`](cognite_reveal.Cognite3DModel.md)\>

#### Defined in

[packages/api/src/public/migration/Cognite3DViewer.ts:594](https://github.com/cognitedata/reveal/blob/71be00fcc/viewer/packages/api/src/public/migration/Cognite3DViewer.ts#L594)

___

### addModel

 **addModel**(`options`): `Promise`\<[`CognitePointCloudModel`](cognite_reveal.CognitePointCloudModel.md) \| [`Cognite3DModel`](cognite_reveal.Cognite3DModel.md)\>

Add a new model to the viewer.
Call [Cognite3DViewer.fitCameraToModel](cognite_reveal.Cognite3DViewer.md#fitcameratomodel) to see the model after the model has loaded.

**`example`**
```js
const options = {
modelId:     'COGNITE_3D_MODEL_ID',
revisionId:  'COGNITE_3D_REVISION_ID',
};
viewer.addModel(options).then(model => {
viewer.fitCameraToModel(model, 0);
});
```

#### Parameters

| Name | Type |
| :------ | :------ |
| `options` | [`AddModelOptions`](../interfaces/cognite_reveal.AddModelOptions.md) |

#### Returns

`Promise`\<[`CognitePointCloudModel`](cognite_reveal.CognitePointCloudModel.md) \| [`Cognite3DModel`](cognite_reveal.Cognite3DModel.md)\>

#### Defined in

[packages/api/src/public/migration/Cognite3DViewer.ts:561](https://github.com/cognitedata/reveal/blob/71be00fcc/viewer/packages/api/src/public/migration/Cognite3DViewer.ts#L561)

___

### addObject3D

 **addObject3D**(`object`): `void`

Add a THREE.Object3D to the viewer.

**`example`**
```js
const sphere = new THREE.Mesh(
new THREE.SphereBufferGeometry(),
new THREE.MeshBasicMaterial()
);
viewer.addObject3D(sphere);
```

#### Parameters

| Name | Type |
| :------ | :------ |
| `object` | `Object3D`\<`Event`\> |

#### Returns

`void`

#### Defined in

[packages/api/src/public/migration/Cognite3DViewer.ts:734](https://github.com/cognitedata/reveal/blob/71be00fcc/viewer/packages/api/src/public/migration/Cognite3DViewer.ts#L734)

___

### addPointCloudModel

 **addPointCloudModel**(`options`): `Promise`\<[`CognitePointCloudModel`](cognite_reveal.CognitePointCloudModel.md)\>

Add a new pointcloud 3D model to the viewer.
Call [Cognite3DViewer.fitCameraToModel](cognite_reveal.Cognite3DViewer.md#fitcameratomodel) to see the model after the model has loaded.

**`example`**
```js
const options = {
modelId:     'COGNITE_3D_MODEL_ID',
revisionId:  'COGNITE_3D_REVISION_ID',
};
viewer.addPointCloudModel(options).then(model => {
viewer.fitCameraToModel(model, 0);
});
```

#### Parameters

| Name | Type |
| :------ | :------ |
| `options` | [`AddModelOptions`](../interfaces/cognite_reveal.AddModelOptions.md) |

#### Returns

`Promise`\<[`CognitePointCloudModel`](cognite_reveal.CognitePointCloudModel.md)\>

#### Defined in

[packages/api/src/public/migration/Cognite3DViewer.ts:622](https://github.com/cognitedata/reveal/blob/71be00fcc/viewer/packages/api/src/public/migration/Cognite3DViewer.ts#L622)

___

### determineModelType

 **determineModelType**(`modelId`, `revisionId`): `Promise`\<``""`` \| [`SupportedModelTypes`](../modules/cognite_reveal.md#supportedmodeltypes)\>

Use to determine of which type the model is.

**`example`**
```typescript
const viewer = new Cognite3DViewer(...);
const type = await viewer.determineModelType(options.modelId, options.revisionId)
let model: Cognite3DModel | CognitePointCloudModel
switch (type) {
  case 'cad':
    model = await viewer.addCadModel(options);
    break;
  case 'pointcloud':
    model = await viewer.addPointCloudModel(options);
    break;
  default:
    throw new Error('Model is not supported');
}
viewer.fitCameraToModel(model);
```

#### Parameters

| Name | Type | Description |
| :------ | :------ | :------ |
| `modelId` | `number` | The model's id. |
| `revisionId` | `number` | The model's revision id. |

#### Returns

`Promise`\<``""`` \| [`SupportedModelTypes`](../modules/cognite_reveal.md#supportedmodeltypes)\>

Empty string if type is not supported.

#### Defined in

[packages/api/src/public/migration/Cognite3DViewer.ts:701](https://github.com/cognitedata/reveal/blob/71be00fcc/viewer/packages/api/src/public/migration/Cognite3DViewer.ts#L701)

___

### dispose

 **dispose**(): `void`

Dispose of WebGL resources. Can be used to free up memory when the viewer is no longer in use.

**`see`** [https://threejs.org/docs/#manual/en/introduction/How-to-dispose-of-objects](https://threejs.org/docs/#manual/en/introduction/How-to-dispose-of-objects)
```ts
// Viewer is no longer in use, free up memory
viewer.dispose();
```.

#### Returns

`void`

#### Defined in

[packages/api/src/public/migration/Cognite3DViewer.ts:340](https://github.com/cognitedata/reveal/blob/71be00fcc/viewer/packages/api/src/public/migration/Cognite3DViewer.ts#L340)

___

### fitCameraToBoundingBox

 **fitCameraToBoundingBox**(`box`, `duration?`, `radiusFactor?`): `void`

Move camera to a place where the content of a bounding box is visible to the camera.

**`example`**
```js
// Fit camera to bounding box over 500 milliseconds
viewer.fitCameraToBoundingBox(boundingBox, 500);
```
```js
// Fit camera to bounding box instantaneously
viewer.fitCameraToBoundingBox(boundingBox, 0);
```
```js
// Place the camera closer to the bounding box
viewer.fitCameraToBoundingBox(boundingBox, 500, 2);
```

#### Parameters

| Name | Type | Default value | Description |
| :------ | :------ | :------ | :------ |
| `box` | `Box3` | `undefined` | The bounding box in world space. |
| `duration?` | `number` | `undefined` | The duration of the animation moving the camera. Set this to 0 (zero) to disable animation. |
| `radiusFactor` | `number` | `2` | The ratio of the distance from camera to center of box and radius of the box. |

#### Returns

`void`

#### Defined in

[packages/api/src/public/migration/Cognite3DViewer.ts:902](https://github.com/cognitedata/reveal/blob/71be00fcc/viewer/packages/api/src/public/migration/Cognite3DViewer.ts#L902)

___

### fitCameraToModel

 **fitCameraToModel**(`model`, `duration?`): `void`

Move camera to a place where the 3D model is visible.
It uses the bounding box of the 3D model and calls [Cognite3DViewer.fitCameraToBoundingBox](cognite_reveal.Cognite3DViewer.md#fitcameratoboundingbox).

**`example`**
```js
// Fit camera to model
viewer.fitCameraToModel(model);
```
```js
// Fit camera to model over 500 milliseconds
viewer.fitCameraToModel(model, 500);
```
```js
// Fit camera to model instantly
viewer.fitCameraToModel(model, 0);
```

#### Parameters

| Name | Type | Description |
| :------ | :------ | :------ |
| `model` | [`CogniteModelBase`](../interfaces/cognite_reveal.CogniteModelBase.md) | The 3D model. |
| `duration?` | `number` | The duration of the animation moving the camera. Set this to 0 (zero) to disable animation. |

#### Returns

`void`

#### Defined in

[packages/api/src/public/migration/Cognite3DViewer.ts:878](https://github.com/cognitedata/reveal/blob/71be00fcc/viewer/packages/api/src/public/migration/Cognite3DViewer.ts#L878)

___

### getCamera

 **getCamera**(): `PerspectiveCamera`

**`obvious`**

#### Returns

`PerspectiveCamera`

The THREE.Camera used for rendering.

#### Defined in

[packages/api/src/public/migration/Cognite3DViewer.ts:828](https://github.com/cognitedata/reveal/blob/71be00fcc/viewer/packages/api/src/public/migration/Cognite3DViewer.ts#L828)

___

### getClippingPlanes

 **getClippingPlanes**(): `Plane`[]

Returns the current active clipping planes.

#### Returns

`Plane`[]

#### Defined in

[packages/api/src/public/migration/Cognite3DViewer.ts:820](https://github.com/cognitedata/reveal/blob/71be00fcc/viewer/packages/api/src/public/migration/Cognite3DViewer.ts#L820)

___

### getIntersectionFromPixel

 **getIntersectionFromPixel**(`offsetX`, `offsetY`): `Promise`\<[`Intersection`](../modules/cognite_reveal.md#intersection)\>

Raycasting model(s) for finding where the ray intersects with the model.

**`see`** [https://en.wikipedia.org/wiki/Ray_casting](https://en.wikipedia.org/wiki/Ray_casting).

**`example`** For CAD model
```js
const offsetX = 50 // pixels from the left
const offsetY = 100 // pixels from the top
const intersection = await viewer.getIntersectionFromPixel(offsetX, offsetY);
if (intersection) // it was a hit
  console.log(
  'You hit model ', intersection.model,
  ' at the node with tree index ', intersection.treeIndex,
  ' at this exact point ', intersection.point
  );
```

**`example`** For point cloud
```js
const offsetX = 50 // pixels from the left
const offsetY = 100 // pixels from the top
const intersection = await viewer.getIntersectionFromPixel(offsetX, offsetY);
if (intersection) // it was a hit
  console.log(
  'You hit model ', intersection.model,
  ' at the point index ', intersection.pointIndex,
  ' at this exact point ', intersection.point
  );
```

#### Parameters

| Name | Type | Description |
| :------ | :------ | :------ |
| `offsetX` | `number` | X coordinate in pixels (relative to the domElement). |
| `offsetY` | `number` | Y coordinate in pixels (relative to the domElement). |

#### Returns

`Promise`\<[`Intersection`](../modules/cognite_reveal.md#intersection)\>

A promise that if there was an intersection then return the intersection object - otherwise it
returns `null` if there were no intersections.

#### Defined in

[packages/api/src/public/migration/Cognite3DViewer.ts:1047](https://github.com/cognitedata/reveal/blob/71be00fcc/viewer/packages/api/src/public/migration/Cognite3DViewer.ts#L1047)

 **getIntersectionFromPixel**(`offsetX`, `offsetY`, `options`): `Promise`\<[`Intersection`](../modules/cognite_reveal.md#intersection)\>

**`deprecated`** Since 3.1 options argument have no effect.

#### Parameters

| Name | Type |
| :------ | :------ |
| `offsetX` | `number` |
| `offsetY` | `number` |
| `options` | [`IntersectionFromPixelOptions`](../interfaces/cognite_reveal.IntersectionFromPixelOptions.md) |

#### Returns

`Promise`\<[`Intersection`](../modules/cognite_reveal.md#intersection)\>

#### Defined in

[packages/api/src/public/migration/Cognite3DViewer.ts:1051](https://github.com/cognitedata/reveal/blob/71be00fcc/viewer/packages/api/src/public/migration/Cognite3DViewer.ts#L1051)

___

### getScene

 **getScene**(): `Scene`

**`obvious`**

#### Returns

`Scene`

The THREE.Scene used for rendering.

#### Defined in

[packages/api/src/public/migration/Cognite3DViewer.ts:836](https://github.com/cognitedata/reveal/blob/71be00fcc/viewer/packages/api/src/public/migration/Cognite3DViewer.ts#L836)

___

### getScreenshot

 **getScreenshot**(`width?`, `height?`): `Promise`\<`string`\>

Take screenshot from the current camera position.

**`example`**
```js
// Take a screenshot with custom resolution
const url = await viewer.getScreenshot(1920, 1080);
```
```js
// Add a screenshot with resolution of the canvas to the page
const url = await viewer.getScreenshot();
const image = document.createElement('img');
image.src = url;
document.body.appendChild(url);
```

#### Parameters

| Name | Type | Description |
| :------ | :------ | :------ |
| `width` | `number` | Width of the final image. Default is current canvas size. |
| `height` | `number` | Height of the final image. Default is current canvas size. |

#### Returns

`Promise`\<`string`\>

A [Data URL](https://developer.mozilla.org/en-US/docs/Web/HTTP/Basics_of_HTTP/Data_URIs) of the image ('image/png').

#### Defined in

[packages/api/src/public/migration/Cognite3DViewer.ts:989](https://github.com/cognitedata/reveal/blob/71be00fcc/viewer/packages/api/src/public/migration/Cognite3DViewer.ts#L989)

___

### getVersion

 **getVersion**(): `string`

Returns reveal version installed.

#### Returns

`string`

#### Defined in

[packages/api/src/public/migration/Cognite3DViewer.ts:313](https://github.com/cognitedata/reveal/blob/71be00fcc/viewer/packages/api/src/public/migration/Cognite3DViewer.ts#L313)

___

### getViewState

 **getViewState**(): [`ViewerState`](../modules/cognite_reveal.md#viewerstate)

Gets the current viewer state which includes the camera pose as well as applied styling.

#### Returns

[`ViewerState`](../modules/cognite_reveal.md#viewerstate)

JSON object containing viewer state.

#### Defined in

[packages/api/src/public/migration/Cognite3DViewer.ts:525](https://github.com/cognitedata/reveal/blob/71be00fcc/viewer/packages/api/src/public/migration/Cognite3DViewer.ts#L525)

___

### loadCameraFromModel

 **loadCameraFromModel**(`model`): `void`

Attempts to load the camera settings from the settings stored for the
provided model. See [https://docs.cognite.com/api/v1/#operation/get3DRevision](https://docs.cognite.com/api/v1/#operation/get3DRevision)
and [https://docs.cognite.com/api/v1/#operation/update3DRevisions](https://docs.cognite.com/api/v1/#operation/update3DRevisions) for
information on how this setting is retrieved and stored. This setting can
also be changed through the 3D models management interface in Cognite Fusion.
If no camera configuration is stored in CDF, [Cognite3DViewer.fitCameraToModel](cognite_reveal.Cognite3DViewer.md#fitcameratomodel)
is used as a fallback.

#### Parameters

| Name | Type | Description |
| :------ | :------ | :------ |
| `model` | [`CogniteModelBase`](../interfaces/cognite_reveal.CogniteModelBase.md) | The model to load camera settings from. |

#### Returns

`void`

#### Defined in

[packages/api/src/public/migration/Cognite3DViewer.ts:850](https://github.com/cognitedata/reveal/blob/71be00fcc/viewer/packages/api/src/public/migration/Cognite3DViewer.ts#L850)

___

### off

 **off**(`event`, `callback`): `void`

Remove event listener from the viewer.
Call [Cognite3DViewer.on](cognite_reveal.Cognite3DViewer.md#on) to add event listener.

**`example`**
```js
viewer.off('click', onClick);
```

#### Parameters

| Name | Type |
| :------ | :------ |
| `event` | ``"click"`` \| ``"hover"`` |
| `callback` | [`PointerEventDelegate`](../modules/cognite_reveal.md#pointereventdelegate) |

#### Returns

`void`

#### Defined in

[packages/api/src/public/migration/Cognite3DViewer.ts:442](https://github.com/cognitedata/reveal/blob/71be00fcc/viewer/packages/api/src/public/migration/Cognite3DViewer.ts#L442)

 **off**(`event`, `callback`): `void`

Remove event listener from the viewer.
Call [Cognite3DViewer.on](cognite_reveal.Cognite3DViewer.md#on) to add event listener.

**`example`**
```js
viewer.off('cameraChange', onCameraChange);
```

#### Parameters

| Name | Type |
| :------ | :------ |
| `event` | ``"cameraChange"`` |
| `callback` | [`CameraChangeDelegate`](../modules/cognite_reveal.md#camerachangedelegate) |

#### Returns

`void`

#### Defined in

[packages/api/src/public/migration/Cognite3DViewer.ts:449](https://github.com/cognitedata/reveal/blob/71be00fcc/viewer/packages/api/src/public/migration/Cognite3DViewer.ts#L449)

 **off**(`event`, `callback`): `void`

Remove event listener from the viewer.
Call [Cognite3DViewer.on](cognite_reveal.Cognite3DViewer.md#on) to add event listener.

**`example`**
```js
viewer.off('sceneRendered', updateStats);
```

#### Parameters

| Name | Type |
| :------ | :------ |
| `event` | ``"sceneRendered"`` |
| `callback` | [`SceneRenderedDelegate`](../modules/cognite_reveal.md#scenerendereddelegate) |

#### Returns

`void`

#### Defined in

[packages/api/src/public/migration/Cognite3DViewer.ts:456](https://github.com/cognitedata/reveal/blob/71be00fcc/viewer/packages/api/src/public/migration/Cognite3DViewer.ts#L456)

 **off**(`event`, `callback`): `void`

Remove event listener from the viewer.
Call [Cognite3DViewer.on](cognite_reveal.Cognite3DViewer.md#on) to add event listener.

**`example`**
```js
viewer.off('disposed', clearAll);
```

#### Parameters

| Name | Type |
| :------ | :------ |
| `event` | ``"disposed"`` |
| `callback` | [`DisposedDelegate`](../modules/cognite_reveal.md#disposeddelegate) |

#### Returns

`void`

#### Defined in

[packages/api/src/public/migration/Cognite3DViewer.ts:463](https://github.com/cognitedata/reveal/blob/71be00fcc/viewer/packages/api/src/public/migration/Cognite3DViewer.ts#L463)

___

### on

 **on**(`event`, `callback`): `void`

Triggered when the viewer is disposed. Listeners should clean up any
resources held and remove the reference to the viewer.

#### Parameters

| Name | Type |
| :------ | :------ |
| `event` | ``"disposed"`` |
| `callback` | [`DisposedDelegate`](../modules/cognite_reveal.md#disposeddelegate) |

#### Returns

`void`

#### Defined in

[packages/api/src/public/migration/Cognite3DViewer.ts:375](https://github.com/cognitedata/reveal/blob/71be00fcc/viewer/packages/api/src/public/migration/Cognite3DViewer.ts#L375)

 **on**(`event`, `callback`): `void`

Add event listener to the viewer.
Call [Cognite3DViewer.off](cognite_reveal.Cognite3DViewer.md#off) to remove an event listener.

**`example`**
```js
const onClick = (event) => { console.log(event.offsetX, event.offsetY) };
viewer.on('click', onClick);
```

#### Parameters

| Name | Type |
| :------ | :------ |
| `event` | ``"click"`` \| ``"hover"`` |
| `callback` | [`PointerEventDelegate`](../modules/cognite_reveal.md#pointereventdelegate) |

#### Returns

`void`

#### Defined in

[packages/api/src/public/migration/Cognite3DViewer.ts:384](https://github.com/cognitedata/reveal/blob/71be00fcc/viewer/packages/api/src/public/migration/Cognite3DViewer.ts#L384)

 **on**(`event`, `callback`): `void`

Add event listener to the viewer.
Call [Cognite3DViewer.off](cognite_reveal.Cognite3DViewer.md#off) to remove an event listener.

**`example`**
```js
viewer.on('cameraChange', (position, target) => {
  console.log('Camera changed: ', position, target);
});
```

#### Parameters

| Name | Type |
| :------ | :------ |
| `event` | ``"cameraChange"`` |
| `callback` | [`CameraChangeDelegate`](../modules/cognite_reveal.md#camerachangedelegate) |

#### Returns

`void`

#### Defined in

[packages/api/src/public/migration/Cognite3DViewer.ts:393](https://github.com/cognitedata/reveal/blob/71be00fcc/viewer/packages/api/src/public/migration/Cognite3DViewer.ts#L393)

 **on**(`event`, `callback`): `void`

Event that is triggered immediatly after the scene has been rendered.

#### Parameters

| Name | Type | Description |
| :------ | :------ | :------ |
| `event` | ``"sceneRendered"`` | Metadata about the rendering frame. |
| `callback` | [`SceneRenderedDelegate`](../modules/cognite_reveal.md#scenerendereddelegate) | Callback to trigger when the event occurs. |

#### Returns

`void`

#### Defined in

[packages/api/src/public/migration/Cognite3DViewer.ts:399](https://github.com/cognitedata/reveal/blob/71be00fcc/viewer/packages/api/src/public/migration/Cognite3DViewer.ts#L399)

___

### removeModel

 **removeModel**(`model`): `void`

Removes a model that was previously added using [Cognite3DViewer.addModel](cognite_reveal.Cognite3DViewer.md#addmodel),
[Cognite3DViewer.addCadModel](cognite_reveal.Cognite3DViewer.md#addcadmodel) or [Cognite3DViewer.addPointCloudModel](cognite_reveal.Cognite3DViewer.md#addpointcloudmodel)
.

#### Parameters

| Name | Type |
| :------ | :------ |
| `model` | [`CogniteModelBase`](../interfaces/cognite_reveal.CogniteModelBase.md) |

#### Returns

`void`

#### Defined in

[packages/api/src/public/migration/Cognite3DViewer.ts:643](https://github.com/cognitedata/reveal/blob/71be00fcc/viewer/packages/api/src/public/migration/Cognite3DViewer.ts#L643)

___

### removeObject3D

 **removeObject3D**(`object`): `void`

Remove a THREE.Object3D from the viewer.

**`example`**
```js
const sphere = new THREE.Mesh(new THREE.SphereBufferGeometry(), new THREE.MeshBasicMaterial());
viewer.addObject3D(sphere);
viewer.removeObject3D(sphere);
```

#### Parameters

| Name | Type |
| :------ | :------ |
| `object` | `Object3D`\<`Event`\> |

#### Returns

`void`

#### Defined in

[packages/api/src/public/migration/Cognite3DViewer.ts:755](https://github.com/cognitedata/reveal/blob/71be00fcc/viewer/packages/api/src/public/migration/Cognite3DViewer.ts#L755)

___

### requestRedraw

 **requestRedraw**(): `void`

Typically used when you perform some changes and can't see them unless you move camera.

#### Returns

`void`

#### Defined in

[packages/api/src/public/migration/Cognite3DViewer.ts:909](https://github.com/cognitedata/reveal/blob/71be00fcc/viewer/packages/api/src/public/migration/Cognite3DViewer.ts#L909)

___

### setBackgroundColor

 **setBackgroundColor**(`color`): `void`

Sets the color used as the clear color of the renderer.

#### Parameters

| Name | Type |
| :------ | :------ |
| `color` | `Color` |

#### Returns

`void`

#### Defined in

[packages/api/src/public/migration/Cognite3DViewer.ts:772](https://github.com/cognitedata/reveal/blob/71be00fcc/viewer/packages/api/src/public/migration/Cognite3DViewer.ts#L772)

___

### setCameraManager

 **setCameraManager**(`cameraManager`, `cameraStateUpdate?`): `void`

Sets camera manager instance for current Cognite3Dviewer.

#### Parameters

| Name | Type | Default value | Description |
| :------ | :------ | :------ | :------ |
| `cameraManager` | [`CameraManager`](../interfaces/cognite_reveal.CameraManager.md) | `undefined` | Camera manager instance. |
| `cameraStateUpdate` | `boolean` | `true` | Whether to set current camera state to new camera manager. |

#### Returns

`void`

#### Defined in

[packages/api/src/public/migration/Cognite3DViewer.ts:507](https://github.com/cognitedata/reveal/blob/71be00fcc/viewer/packages/api/src/public/migration/Cognite3DViewer.ts#L507)

___

### setClippingPlanes

 **setClippingPlanes**(`clippingPlanes`): `void`

Sets per-pixel clipping planes. Pixels behind any of the planes will be sliced away.

**`example`**
```js
// Hide pixels with values less than 0 in the x direction
const plane = new THREE.Plane(new THREE.Vector3(1, 0, 0), 0);
viewer.setClippingPlanes([plane]);
```
```js
// Hide pixels with values greater than 20 in the x direction
 const plane = new THREE.Plane(new THREE.Vector3(-1, 0, 0), 20);
viewer.setClippingPlanes([plane]);
```
```js
// Hide pixels with values less than 0 in the x direction or greater than 0 in the y direction
const xPlane = new THREE.Plane(new THREE.Vector3(1, 0, 0), 0);
const yPlane = new THREE.Plane(new THREE.Vector3(0, -1, 0), 0);
viewer.setClippingPlanes([xPlane, yPlane]);
```
```js
// Hide pixels behind an arbitrary, non axis-aligned plane
 const plane = new THREE.Plane(new THREE.Vector3(1.5, 20, -19), 20);
viewer.setClippingPlanes([plane]);
```
```js
// Disable clipping planes
 viewer.setClippingPlanes([]);
```

#### Parameters

| Name | Type | Description |
| :------ | :------ | :------ |
| `clippingPlanes` | `Plane`[] | The planes to use for clipping. |

#### Returns

`void`

#### Defined in

[packages/api/src/public/migration/Cognite3DViewer.ts:812](https://github.com/cognitedata/reveal/blob/71be00fcc/viewer/packages/api/src/public/migration/Cognite3DViewer.ts#L812)

___

### setLogLevel

 **setLogLevel**(`level`): `void`

Sets the log level. Used for debugging.
Defaults to 'none' (which is identical to 'silent').

#### Parameters

| Name | Type |
| :------ | :------ |
| `level` | ``"error"`` \| ``"debug"`` \| ``"trace"`` \| ``"info"`` \| ``"warn"`` \| ``"silent"`` \| ``"none"`` |

#### Returns

`void`

#### Defined in

[packages/api/src/public/migration/Cognite3DViewer.ts:322](https://github.com/cognitedata/reveal/blob/71be00fcc/viewer/packages/api/src/public/migration/Cognite3DViewer.ts#L322)

___

### setViewState

 **setViewState**(`state`): `Promise`\<`void`\>

Restores camera settings from the state provided, and clears all current styled
node collections and applies the `state` object.

#### Parameters

| Name | Type | Description |
| :------ | :------ | :------ |
| `state` | [`ViewerState`](../modules/cognite_reveal.md#viewerstate) | Viewer state retrieved from [Cognite3DViewer.getViewState](cognite_reveal.Cognite3DViewer.md#getviewstate). |

#### Returns

`Promise`\<`void`\>

#### Defined in

[packages/api/src/public/migration/Cognite3DViewer.ts:535](https://github.com/cognitedata/reveal/blob/71be00fcc/viewer/packages/api/src/public/migration/Cognite3DViewer.ts#L535)

___

### worldToScreen

 **worldToScreen**(`point`, `normalize?`): `Vector2`

Convert a point in world space to its coordinates in the canvas. This can be used to place HTML objects near 3D objects on top of the 3D viewer.

**`see`** [https://www.w3schools.com/graphics/canvas_coordinates.asp](https://www.w3schools.com/graphics/canvas_coordinates.asp).

**`example`**
```js
const boundingBoxCenter = new THREE.Vector3();
// Find center of bounding box in world space
model.getBoundingBox(nodeId).getCenter(boundingBoxCenter);
// Screen coordinates of that point
const screenCoordinates = viewer.worldToScreen(boundingBoxCenter);
```
```js
const boundingBoxCenter = new THREE.Vector3();
// Find center of bounding box in world space
model.getBoundingBox(nodeId).getCenter(boundingBoxCenter);
// Screen coordinates of that point normalized in the range [0,1]
const screenCoordinates = viewer.worldToScreen(boundingBoxCenter, true);
```
```js
const boundingBoxCenter = new THREE.Vector3();
// Find center of bounding box in world space
model.getBoundingBox(nodeId).getCenter(boundingBoxCenter);
// Screen coordinates of that point
const screenCoordinates = viewer.worldToScreen(boundingBoxCenter);
if (screenCoordinates == null) {
  // Object not visible on screen
} else {
  // Object is visible on screen
}
```

#### Parameters

| Name | Type | Description |
| :------ | :------ | :------ |
| `point` | `Vector3` | World space coordinate. |
| `normalize?` | `boolean` | Optional. If true, coordinates are normalized into [0,1]. If false, the values are in the range [0, \<canvas_size>). |

#### Returns

`Vector2`

Returns 2D coordinates if the point is visible on screen, or `null` if object is outside screen.

#### Defined in

[packages/api/src/public/migration/Cognite3DViewer.ts:947](https://github.com/cognitedata/reveal/blob/71be00fcc/viewer/packages/api/src/public/migration/Cognite3DViewer.ts#L947)

___

### isBrowserSupported

 `Static` **isBrowserSupported**(): ``true``

For now it just always returns true.

**`see`** Https://developer.mozilla.org/en-US/docs/Web/API/HTMLCanvasElement/getContext#Browser_compatibility.

#### Returns

``true``

#### Defined in

[packages/api/src/public/migration/Cognite3DViewer.ts:86](https://github.com/cognitedata/reveal/blob/71be00fcc/viewer/packages/api/src/public/migration/Cognite3DViewer.ts#L86)


<!-- SOURCE_END: reveal/documentation\versioned_docs\version-3.x\api\classes\cognite_reveal.Cognite3DViewer.md -->

================================================================================


<!-- SOURCE_START: reveal/documentation\versioned_docs\version-3.x\api\classes\cognite_reveal.CognitePointCloudModel.md -->
## File: reveal/documentation\versioned_docs\version-3.x\api\classes\cognite_reveal.CognitePointCloudModel.md

---
id: "cognite_reveal.CognitePointCloudModel"
title: "Class: CognitePointCloudModel"
sidebar_label: "CognitePointCloudModel"
custom_edit_url: null
---

[@cognite/reveal](../modules/cognite_reveal.md).CognitePointCloudModel

## Hierarchy

- `Object3D`

   **`CognitePointCloudModel`**

## Implements

- [`CogniteModelBase`](../interfaces/cognite_reveal.CogniteModelBase.md)

## Properties

### modelId

 `Readonly` **modelId**: `number`

#### Defined in

[packages/pointclouds/src/CognitePointCloudModel.ts:21](https://github.com/cognitedata/reveal/blob/71be00fcc/viewer/packages/pointclouds/src/CognitePointCloudModel.ts#L21)

___

### revisionId

 `Readonly` **revisionId**: `number`

The modelId of the point cloud model in Cognite Data Fusion.

#### Defined in

[packages/pointclouds/src/CognitePointCloudModel.ts:25](https://github.com/cognitedata/reveal/blob/71be00fcc/viewer/packages/pointclouds/src/CognitePointCloudModel.ts#L25)

___

### type

 `Readonly` **type**: [`SupportedModelTypes`](../modules/cognite_reveal.md#supportedmodeltypes) = `'pointcloud'`

#### Implementation of

[CogniteModelBase](../interfaces/cognite_reveal.CogniteModelBase.md).[type](../interfaces/cognite_reveal.CogniteModelBase.md#type)

#### Overrides

THREE.Object3D.type

#### Defined in

[packages/pointclouds/src/CognitePointCloudModel.ts:20](https://github.com/cognitedata/reveal/blob/71be00fcc/viewer/packages/pointclouds/src/CognitePointCloudModel.ts#L20)

## Accessors

### pointColorType

 `get` **pointColorType**(): [`PotreePointColorType`](../enums/cognite_reveal.PotreePointColorType.md)

Determines how points currently are colored.

#### Returns

[`PotreePointColorType`](../enums/cognite_reveal.PotreePointColorType.md)

#### Defined in

[packages/pointclouds/src/CognitePointCloudModel.ts:147](https://github.com/cognitedata/reveal/blob/71be00fcc/viewer/packages/pointclouds/src/CognitePointCloudModel.ts#L147)

 `set` **pointColorType**(`type`): `void`

Specifies how points are colored.

**`default`** PotreePointColorType.Rgb

**`example`**
```js
model.pointColorType = PotreePointColorType.Rgb
```

#### Parameters

| Name | Type |
| :------ | :------ |
| `type` | [`PotreePointColorType`](../enums/cognite_reveal.PotreePointColorType.md) |

#### Returns

`void`

#### Defined in

[packages/pointclouds/src/CognitePointCloudModel.ts:159](https://github.com/cognitedata/reveal/blob/71be00fcc/viewer/packages/pointclouds/src/CognitePointCloudModel.ts#L159)

___

### pointShape

 `get` **pointShape**(): [`PotreePointShape`](../enums/cognite_reveal.PotreePointShape.md)

Sets the point shape of each rendered point in the point cloud.

**`default`** `PotreePointShape.Circle`

**`see`** [PotreePointShape](../enums/cognite_reveal.PotreePointShape.md).

#### Returns

[`PotreePointShape`](../enums/cognite_reveal.PotreePointShape.md)

#### Defined in

[packages/pointclouds/src/CognitePointCloudModel.ts:199](https://github.com/cognitedata/reveal/blob/71be00fcc/viewer/packages/pointclouds/src/CognitePointCloudModel.ts#L199)

 `set` **pointShape**(`shape`): `void`

Gets the point shape of each rendered point in the point cloud.

**`see`** [PotreePointShape](../enums/cognite_reveal.PotreePointShape.md).

#### Parameters

| Name | Type |
| :------ | :------ |
| `shape` | [`PotreePointShape`](../enums/cognite_reveal.PotreePointShape.md) |

#### Returns

`void`

#### Defined in

[packages/pointclouds/src/CognitePointCloudModel.ts:207](https://github.com/cognitedata/reveal/blob/71be00fcc/viewer/packages/pointclouds/src/CognitePointCloudModel.ts#L207)

___

### pointSize

 `get` **pointSize**(): `number`

Returns the size of each rendered point in the point cloud.

#### Returns

`number`

#### Defined in

[packages/pointclouds/src/CognitePointCloudModel.ts:166](https://github.com/cognitedata/reveal/blob/71be00fcc/viewer/packages/pointclouds/src/CognitePointCloudModel.ts#L166)

 `set` **pointSize**(`size`): `void`

Sets the size of each rendered point in the point cloud.

**`default`** `1`

#### Parameters

| Name | Type |
| :------ | :------ |
| `size` | `number` |

#### Returns

`void`

#### Defined in

[packages/pointclouds/src/CognitePointCloudModel.ts:174](https://github.com/cognitedata/reveal/blob/71be00fcc/viewer/packages/pointclouds/src/CognitePointCloudModel.ts#L174)

___

### pointSizeType

 `get` **pointSizeType**(): [`PotreePointSizeType`](../enums/cognite_reveal.PotreePointSizeType.md)

Get the point size type.

#### Returns

[`PotreePointSizeType`](../enums/cognite_reveal.PotreePointSizeType.md)

#### Defined in

[packages/pointclouds/src/CognitePointCloudModel.ts:181](https://github.com/cognitedata/reveal/blob/71be00fcc/viewer/packages/pointclouds/src/CognitePointCloudModel.ts#L181)

 `set` **pointSizeType**(`type`): `void`

Set the point size type for the point cloud.
The point size type can be either Fixed or Adaptive.

**`default`** `PotreePointSizeType.Adaptive`

#### Parameters

| Name | Type |
| :------ | :------ |
| `type` | [`PotreePointSizeType`](../enums/cognite_reveal.PotreePointSizeType.md) |

#### Returns

`void`

#### Defined in

[packages/pointclouds/src/CognitePointCloudModel.ts:190](https://github.com/cognitedata/reveal/blob/71be00fcc/viewer/packages/pointclouds/src/CognitePointCloudModel.ts#L190)

___

### visiblePointCount

 `get` **visiblePointCount**(): `number`

Returns the current number of visible/loaded points.

#### Returns

`number`

#### Defined in

[packages/pointclouds/src/CognitePointCloudModel.ts:140](https://github.com/cognitedata/reveal/blob/71be00fcc/viewer/packages/pointclouds/src/CognitePointCloudModel.ts#L140)

## Methods

### dispose

 **dispose**(): `void`

Used to clean up memory.

#### Returns

`void`

#### Implementation of

[CogniteModelBase](../interfaces/cognite_reveal.CogniteModelBase.md).[dispose](../interfaces/cognite_reveal.CogniteModelBase.md#dispose)

#### Defined in

[packages/pointclouds/src/CognitePointCloudModel.ts:49](https://github.com/cognitedata/reveal/blob/71be00fcc/viewer/packages/pointclouds/src/CognitePointCloudModel.ts#L49)

___

### getCameraConfiguration

 **getCameraConfiguration**(): [`CameraConfiguration`](../modules/cognite_reveal.md#cameraconfiguration)

Retrieves the camera position and target stored for the model. Typically this
is used to store a good starting position for a model. Returns `undefined` if there
isn't any stored camera configuration for the model.

#### Returns

[`CameraConfiguration`](../modules/cognite_reveal.md#cameraconfiguration)

#### Implementation of

[CogniteModelBase](../interfaces/cognite_reveal.CogniteModelBase.md).[getCameraConfiguration](../interfaces/cognite_reveal.CogniteModelBase.md#getcameraconfiguration)

#### Defined in

[packages/pointclouds/src/CognitePointCloudModel.ts:77](https://github.com/cognitedata/reveal/blob/71be00fcc/viewer/packages/pointclouds/src/CognitePointCloudModel.ts#L77)

___

### getClasses

 **getClasses**(): `number`[]

Returns a list of sorted classification codes present in the model.

#### Returns

`number`[]

A sorted list of classification codes from the model.

#### Defined in

[packages/pointclouds/src/CognitePointCloudModel.ts:133](https://github.com/cognitedata/reveal/blob/71be00fcc/viewer/packages/pointclouds/src/CognitePointCloudModel.ts#L133)

___

### getModelBoundingBox

 **getModelBoundingBox**(`outBbox?`): `Box3`

**`example`**
```js
const box = new THREE.Box3()
model.getModelBoundingBox(box);
// box now has the bounding box
```
```js
// the following code does the same
const box = model.getModelBoundingBox();
```

#### Parameters

| Name | Type | Description |
| :------ | :------ | :------ |
| `outBbox?` | `Box3` | Optional. Used to write result to. |

#### Returns

`Box3`

Model's bounding box.

#### Implementation of

[CogniteModelBase](../interfaces/cognite_reveal.CogniteModelBase.md).[getModelBoundingBox](../interfaces/cognite_reveal.CogniteModelBase.md#getmodelboundingbox)

#### Defined in

[packages/pointclouds/src/CognitePointCloudModel.ts:68](https://github.com/cognitedata/reveal/blob/71be00fcc/viewer/packages/pointclouds/src/CognitePointCloudModel.ts#L68)

___

### getModelTransformation

 **getModelTransformation**(`out?`): `Matrix4`

Gets transformation matrix of the model.

#### Parameters

| Name | Type | Description |
| :------ | :------ | :------ |
| `out?` | `Matrix4` | Preallocated `THREE.Matrix4` (optional). |

#### Returns

`Matrix4`

#### Implementation of

[CogniteModelBase](../interfaces/cognite_reveal.CogniteModelBase.md).[getModelTransformation](../interfaces/cognite_reveal.CogniteModelBase.md#getmodeltransformation)

#### Defined in

[packages/pointclouds/src/CognitePointCloudModel.ts:93](https://github.com/cognitedata/reveal/blob/71be00fcc/viewer/packages/pointclouds/src/CognitePointCloudModel.ts#L93)

___

### hasClass

 **hasClass**(`pointClass`): `boolean`

Returns true if the model has values with the given classification class.

#### Parameters

| Name | Type | Description |
| :------ | :------ | :------ |
| `pointClass` | `number` | ASPRS classification class code. Either one of the well known classes from [WellKnownAsprsPointClassCodes](../enums/cognite_reveal.WellKnownAsprsPointClassCodes.md) or a number for user defined classes. |

#### Returns

`boolean`

True if model has values in the class given.

#### Defined in

[packages/pointclouds/src/CognitePointCloudModel.ts:125](https://github.com/cognitedata/reveal/blob/71be00fcc/viewer/packages/pointclouds/src/CognitePointCloudModel.ts#L125)

___

### isClassVisible

 **isClassVisible**(`pointClass`): `boolean`

Determines if points from a given class are visible.

**`throws`** Error if the model doesn't have the class given.

#### Parameters

| Name | Type | Description |
| :------ | :------ | :------ |
| `pointClass` | `number` | ASPRS classification class code. Either one of the well known classes from [WellKnownAsprsPointClassCodes](../enums/cognite_reveal.WellKnownAsprsPointClassCodes.md) or a number for user defined classes. |

#### Returns

`boolean`

True if points from the given class will be visible.

#### Defined in

[packages/pointclouds/src/CognitePointCloudModel.ts:115](https://github.com/cognitedata/reveal/blob/71be00fcc/viewer/packages/pointclouds/src/CognitePointCloudModel.ts#L115)

___

### setClassVisible

 **setClassVisible**(`pointClass`, `visible`): `void`

Sets a visible filter on points of a given class.

**`throws`** Error if the model doesn't have the class given.

#### Parameters

| Name | Type | Description |
| :------ | :------ | :------ |
| `pointClass` | `number` | ASPRS classification class code. Either one of the well known classes from [WellKnownAsprsPointClassCodes](../enums/cognite_reveal.WellKnownAsprsPointClassCodes.md) or a number for user defined classes. |
| `visible` | `boolean` | Boolean flag that determines if the point class type should be visible or not. |

#### Returns

`void`

#### Defined in

[packages/pointclouds/src/CognitePointCloudModel.ts:104](https://github.com/cognitedata/reveal/blob/71be00fcc/viewer/packages/pointclouds/src/CognitePointCloudModel.ts#L104)

___

### setModelTransformation

 **setModelTransformation**(`transformationMatrix`): `void`

Sets transformation matrix of the model. This overrides the current transformation.

#### Parameters

| Name | Type |
| :------ | :------ |
| `transformationMatrix` | `Matrix4` |

#### Returns

`void`

#### Implementation of

[CogniteModelBase](../interfaces/cognite_reveal.CogniteModelBase.md).[setModelTransformation](../interfaces/cognite_reveal.CogniteModelBase.md#setmodeltransformation)

#### Defined in

[packages/pointclouds/src/CognitePointCloudModel.ts:85](https://github.com/cognitedata/reveal/blob/71be00fcc/viewer/packages/pointclouds/src/CognitePointCloudModel.ts#L85)


<!-- SOURCE_END: reveal/documentation\versioned_docs\version-3.x\api\classes\cognite_reveal.CognitePointCloudModel.md -->

================================================================================


<!-- SOURCE_START: reveal/documentation\versioned_docs\version-3.x\api\classes\cognite_reveal.ComboControls.md -->
## File: reveal/documentation\versioned_docs\version-3.x\api\classes\cognite_reveal.ComboControls.md

---
id: "cognite_reveal.ComboControls"
title: "Class: ComboControls"
sidebar_label: "ComboControls"
custom_edit_url: null
---

[@cognite/reveal](../modules/cognite_reveal.md).ComboControls

## Hierarchy

- `EventDispatcher`

   **`ComboControls`**

## Constructors

### constructor

 **new ComboControls**(`camera`, `domElement`)

#### Parameters

| Name | Type |
| :------ | :------ |
| `camera` | `PerspectiveCamera` \| `OrthographicCamera` |
| `domElement` | `HTMLElement` |

#### Overrides

EventDispatcher.constructor

#### Defined in

[packages/camera-manager/src/ComboControls.ts:108](https://github.com/cognitedata/reveal/blob/71be00fcc/viewer/packages/camera-manager/src/ComboControls.ts#L108)

## Properties

### EPSILON

 **EPSILON**: `number` = `0.001`

#### Defined in

[packages/camera-manager/src/ComboControls.ts:70](https://github.com/cognitedata/reveal/blob/71be00fcc/viewer/packages/camera-manager/src/ComboControls.ts#L70)

___

### dampingFactor

 **dampingFactor**: `number` = `0.25`

#### Defined in

[packages/camera-manager/src/ComboControls.ts:48](https://github.com/cognitedata/reveal/blob/71be00fcc/viewer/packages/camera-manager/src/ComboControls.ts#L48)

___

### dispose

 **dispose**: () => `void`

#### Type declaration

 (): `void`

##### Returns

`void`

#### Defined in

[packages/camera-manager/src/ComboControls.ts:71](https://github.com/cognitedata/reveal/blob/71be00fcc/viewer/packages/camera-manager/src/ComboControls.ts#L71)

___

### dollyFactor

 **dollyFactor**: `number` = `0.99`

#### Defined in

[packages/camera-manager/src/ComboControls.ts:52](https://github.com/cognitedata/reveal/blob/71be00fcc/viewer/packages/camera-manager/src/ComboControls.ts#L52)

___

### dynamicTarget

 **dynamicTarget**: `boolean` = `true`

#### Defined in

[packages/camera-manager/src/ComboControls.ts:49](https://github.com/cognitedata/reveal/blob/71be00fcc/viewer/packages/camera-manager/src/ComboControls.ts#L49)

___

### enableDamping

 **enableDamping**: `boolean` = `true`

#### Defined in

[packages/camera-manager/src/ComboControls.ts:47](https://github.com/cognitedata/reveal/blob/71be00fcc/viewer/packages/camera-manager/src/ComboControls.ts#L47)

___

### enableKeyboardNavigation

 **enableKeyboardNavigation**: `boolean` = `true`

#### Defined in

[packages/camera-manager/src/ComboControls.ts:61](https://github.com/cognitedata/reveal/blob/71be00fcc/viewer/packages/camera-manager/src/ComboControls.ts#L61)

___

### enabled

 **enabled**: `boolean` = `true`

#### Defined in

[packages/camera-manager/src/ComboControls.ts:46](https://github.com/cognitedata/reveal/blob/71be00fcc/viewer/packages/camera-manager/src/ComboControls.ts#L46)

___

### firstPersonRotationFactor

 **firstPersonRotationFactor**: `number` = `0.4`

#### Defined in

[packages/camera-manager/src/ComboControls.ts:58](https://github.com/cognitedata/reveal/blob/71be00fcc/viewer/packages/camera-manager/src/ComboControls.ts#L58)

___

### keyboardDollySpeed

 **keyboardDollySpeed**: `number` = `2`

#### Defined in

[packages/camera-manager/src/ComboControls.ts:65](https://github.com/cognitedata/reveal/blob/71be00fcc/viewer/packages/camera-manager/src/ComboControls.ts#L65)

___

### keyboardPanSpeed

 **keyboardPanSpeed**: `number` = `10`

#### Defined in

[packages/camera-manager/src/ComboControls.ts:66](https://github.com/cognitedata/reveal/blob/71be00fcc/viewer/packages/camera-manager/src/ComboControls.ts#L66)

___

### keyboardRotationSpeedAzimuth

 **keyboardRotationSpeedAzimuth**: `number` = `defaultKeyboardRotationSpeed`

#### Defined in

[packages/camera-manager/src/ComboControls.ts:62](https://github.com/cognitedata/reveal/blob/71be00fcc/viewer/packages/camera-manager/src/ComboControls.ts#L62)

___

### keyboardRotationSpeedPolar

 **keyboardRotationSpeedPolar**: `number` = `defaultKeyboardRotationSpeed`

#### Defined in

[packages/camera-manager/src/ComboControls.ts:63](https://github.com/cognitedata/reveal/blob/71be00fcc/viewer/packages/camera-manager/src/ComboControls.ts#L63)

___

### keyboardSpeedFactor

 **keyboardSpeedFactor**: `number` = `3`

#### Defined in

[packages/camera-manager/src/ComboControls.ts:67](https://github.com/cognitedata/reveal/blob/71be00fcc/viewer/packages/camera-manager/src/ComboControls.ts#L67)

___

### lookAtViewTarget

 **lookAtViewTarget**: `boolean` = `false`

#### Defined in

[packages/camera-manager/src/ComboControls.ts:76](https://github.com/cognitedata/reveal/blob/71be00fcc/viewer/packages/camera-manager/src/ComboControls.ts#L76)

___

### maxAzimuthAngle

 **maxAzimuthAngle**: `number` = `Infinity`

#### Defined in

[packages/camera-manager/src/ComboControls.ts:56](https://github.com/cognitedata/reveal/blob/71be00fcc/viewer/packages/camera-manager/src/ComboControls.ts#L56)

___

### maxDeltaDownscaleCoefficient

 **maxDeltaDownscaleCoefficient**: `number` = `1`

#### Defined in

[packages/camera-manager/src/ComboControls.ts:82](https://github.com/cognitedata/reveal/blob/71be00fcc/viewer/packages/camera-manager/src/ComboControls.ts#L82)

___

### maxDeltaRatio

 **maxDeltaRatio**: `number` = `8`

#### Defined in

[packages/camera-manager/src/ComboControls.ts:80](https://github.com/cognitedata/reveal/blob/71be00fcc/viewer/packages/camera-manager/src/ComboControls.ts#L80)

___

### maxPolarAngle

 **maxPolarAngle**: `number` = `Math.PI`

#### Defined in

[packages/camera-manager/src/ComboControls.ts:54](https://github.com/cognitedata/reveal/blob/71be00fcc/viewer/packages/camera-manager/src/ComboControls.ts#L54)

___

### maxZoom

 **maxZoom**: `number` = `Infinity`

#### Defined in

[packages/camera-manager/src/ComboControls.ts:73](https://github.com/cognitedata/reveal/blob/71be00fcc/viewer/packages/camera-manager/src/ComboControls.ts#L73)

___

### minAzimuthAngle

 **minAzimuthAngle**: `number` = `-Infinity`

#### Defined in

[packages/camera-manager/src/ComboControls.ts:55](https://github.com/cognitedata/reveal/blob/71be00fcc/viewer/packages/camera-manager/src/ComboControls.ts#L55)

___

### minDeltaDownscaleCoefficient

 **minDeltaDownscaleCoefficient**: `number` = `0.1`

#### Defined in

[packages/camera-manager/src/ComboControls.ts:81](https://github.com/cognitedata/reveal/blob/71be00fcc/viewer/packages/camera-manager/src/ComboControls.ts#L81)

___

### minDeltaRatio

 **minDeltaRatio**: `number` = `1`

#### Defined in

[packages/camera-manager/src/ComboControls.ts:79](https://github.com/cognitedata/reveal/blob/71be00fcc/viewer/packages/camera-manager/src/ComboControls.ts#L79)

___

### minDistance

 **minDistance**: `number` = `0.8`

#### Defined in

[packages/camera-manager/src/ComboControls.ts:50](https://github.com/cognitedata/reveal/blob/71be00fcc/viewer/packages/camera-manager/src/ComboControls.ts#L50)

___

### minPolarAngle

 **minPolarAngle**: `number` = `0`

#### Defined in

[packages/camera-manager/src/ComboControls.ts:53](https://github.com/cognitedata/reveal/blob/71be00fcc/viewer/packages/camera-manager/src/ComboControls.ts#L53)

___

### minZoom

 **minZoom**: `number` = `0`

#### Defined in

[packages/camera-manager/src/ComboControls.ts:72](https://github.com/cognitedata/reveal/blob/71be00fcc/viewer/packages/camera-manager/src/ComboControls.ts#L72)

___

### minZoomDistance

 **minZoomDistance**: `number` = `0.4`

#### Defined in

[packages/camera-manager/src/ComboControls.ts:51](https://github.com/cognitedata/reveal/blob/71be00fcc/viewer/packages/camera-manager/src/ComboControls.ts#L51)

___

### mouseFirstPersonRotationSpeed

 **mouseFirstPersonRotationSpeed**: `number`

#### Defined in

[packages/camera-manager/src/ComboControls.ts:64](https://github.com/cognitedata/reveal/blob/71be00fcc/viewer/packages/camera-manager/src/ComboControls.ts#L64)

___

### orthographicCameraDollyFactor

 **orthographicCameraDollyFactor**: `number` = `0.3`

#### Defined in

[packages/camera-manager/src/ComboControls.ts:74](https://github.com/cognitedata/reveal/blob/71be00fcc/viewer/packages/camera-manager/src/ComboControls.ts#L74)

___

### panDollyMinDistanceFactor

 **panDollyMinDistanceFactor**: `number` = `10.0`

#### Defined in

[packages/camera-manager/src/ComboControls.ts:57](https://github.com/cognitedata/reveal/blob/71be00fcc/viewer/packages/camera-manager/src/ComboControls.ts#L57)

___

### pinchEpsilon

 **pinchEpsilon**: `number` = `2`

#### Defined in

[packages/camera-manager/src/ComboControls.ts:68](https://github.com/cognitedata/reveal/blob/71be00fcc/viewer/packages/camera-manager/src/ComboControls.ts#L68)

___

### pinchPanSpeed

 **pinchPanSpeed**: `number` = `1`

#### Defined in

[packages/camera-manager/src/ComboControls.ts:69](https://github.com/cognitedata/reveal/blob/71be00fcc/viewer/packages/camera-manager/src/ComboControls.ts#L69)

___

### pointerRotationSpeedAzimuth

 **pointerRotationSpeedAzimuth**: `number` = `defaultPointerRotationSpeed`

#### Defined in

[packages/camera-manager/src/ComboControls.ts:59](https://github.com/cognitedata/reveal/blob/71be00fcc/viewer/packages/camera-manager/src/ComboControls.ts#L59)

___

### pointerRotationSpeedPolar

 **pointerRotationSpeedPolar**: `number` = `defaultPointerRotationSpeed`

#### Defined in

[packages/camera-manager/src/ComboControls.ts:60](https://github.com/cognitedata/reveal/blob/71be00fcc/viewer/packages/camera-manager/src/ComboControls.ts#L60)

___

### useScrollTarget

 **useScrollTarget**: `boolean` = `false`

#### Defined in

[packages/camera-manager/src/ComboControls.ts:77](https://github.com/cognitedata/reveal/blob/71be00fcc/viewer/packages/camera-manager/src/ComboControls.ts#L77)

___

### zoomToCursor

 **zoomToCursor**: `boolean` = `true`

#### Defined in

[packages/camera-manager/src/ComboControls.ts:78](https://github.com/cognitedata/reveal/blob/71be00fcc/viewer/packages/camera-manager/src/ComboControls.ts#L78)

## Accessors

### cameraRawRotation

 `get` **cameraRawRotation**(): `Quaternion`

Camera rotation to be used by the camera instead of target-based rotation.
This rotation is used only when set to non-default quaternion value (not identity rotation quaternion).
Externally, value is updated by `CameraManager` when `setState` method with non-zero rotation is called. Automatically
resets to default value when `setState` method is called with no rotation value.

#### Returns

`Quaternion`

#### Defined in

[packages/camera-manager/src/ComboControls.ts:258](https://github.com/cognitedata/reveal/blob/71be00fcc/viewer/packages/camera-manager/src/ComboControls.ts#L258)

## Methods

### getScrollTarget

 **getScrollTarget**(): `Vector3`

#### Returns

`Vector3`

#### Defined in

[packages/camera-manager/src/ComboControls.ts:270](https://github.com/cognitedata/reveal/blob/71be00fcc/viewer/packages/camera-manager/src/ComboControls.ts#L270)

___

### getState

 **getState**(): `Object`

#### Returns

`Object`

| Name | Type |
| :------ | :------ |
| `position` | `Vector3` |
| `target` | `Vector3` |

#### Defined in

[packages/camera-manager/src/ComboControls.ts:233](https://github.com/cognitedata/reveal/blob/71be00fcc/viewer/packages/camera-manager/src/ComboControls.ts#L233)

___

### setScrollTarget

 **setScrollTarget**(`target`): `void`

#### Parameters

| Name | Type |
| :------ | :------ |
| `target` | `Vector3` |

#### Returns

`void`

#### Defined in

[packages/camera-manager/src/ComboControls.ts:266](https://github.com/cognitedata/reveal/blob/71be00fcc/viewer/packages/camera-manager/src/ComboControls.ts#L266)

___

### setState

 **setState**(`position`, `target`): `void`

#### Parameters

| Name | Type |
| :------ | :------ |
| `position` | `Vector3` |
| `target` | `Vector3` |

#### Returns

`void`

#### Defined in

[packages/camera-manager/src/ComboControls.ts:241](https://github.com/cognitedata/reveal/blob/71be00fcc/viewer/packages/camera-manager/src/ComboControls.ts#L241)

___

### setViewTarget

 **setViewTarget**(`target`): `void`

#### Parameters

| Name | Type |
| :------ | :------ |
| `target` | `Vector3` |

#### Returns

`void`

#### Defined in

[packages/camera-manager/src/ComboControls.ts:262](https://github.com/cognitedata/reveal/blob/71be00fcc/viewer/packages/camera-manager/src/ComboControls.ts#L262)

___

### triggerCameraChangeEvent

 **triggerCameraChangeEvent**(): `void`

#### Returns

`void`

#### Defined in

[packages/camera-manager/src/ComboControls.ts:274](https://github.com/cognitedata/reveal/blob/71be00fcc/viewer/packages/camera-manager/src/ComboControls.ts#L274)

___

### update

 **update**(`deltaTime`, `forceUpdate?`): `boolean`

#### Parameters

| Name | Type | Default value |
| :------ | :------ | :------ |
| `deltaTime` | `number` | `undefined` |
| `forceUpdate` | `boolean` | `false` |

#### Returns

`boolean`

#### Defined in

[packages/camera-manager/src/ComboControls.ts:147](https://github.com/cognitedata/reveal/blob/71be00fcc/viewer/packages/camera-manager/src/ComboControls.ts#L147)


<!-- SOURCE_END: reveal/documentation\versioned_docs\version-3.x\api\classes\cognite_reveal.ComboControls.md -->

================================================================================


<!-- SOURCE_START: reveal/documentation\versioned_docs\version-3.x\api\classes\cognite_reveal.DefaultCameraManager.md -->
## File: reveal/documentation\versioned_docs\version-3.x\api\classes\cognite_reveal.DefaultCameraManager.md

---
id: "cognite_reveal.DefaultCameraManager"
title: "Class: DefaultCameraManager"
sidebar_label: "DefaultCameraManager"
custom_edit_url: null
---

[@cognite/reveal](../modules/cognite_reveal.md).DefaultCameraManager

Default implementation of [CameraManager](../interfaces/cognite_reveal.CameraManager.md). Uses target-based orbit controls combined with
keyboard and mouse navigation possibility. Supports automatic update of camera near and far
planes and animated change of camera position and target.

## Implements

- [`CameraManager`](../interfaces/cognite_reveal.CameraManager.md)

## Properties

### automaticControlsSensitivity

 **automaticControlsSensitivity**: `boolean` = `true`

When false, the sensitivity of the camera controls will not be updated automatically.
This can be useful to better control the sensitivity of the 3D navigation.

When not set, control the sensitivity of the camera using `viewer.cameraManager.cameraControls.minDistance`
and `viewer.cameraManager.cameraControls.maxDistance`.

#### Defined in

[packages/camera-manager/src/DefaultCameraManager.ts:85](https://github.com/cognitedata/reveal/blob/71be00fcc/viewer/packages/camera-manager/src/DefaultCameraManager.ts#L85)

___

### automaticNearFarPlane

 **automaticNearFarPlane**: `boolean` = `true`

When false, camera near and far planes will not be updated automatically (defaults to true).
This can be useful when you have custom content in the 3D view and need to better
control the view frustum.

When automatic camera near/far planes are disabled, you are responsible for setting
this on your own.

**`example`**
```
viewer.camera.near = 0.1;
viewer.camera.far = 1000.0;
viewer.camera.updateProjectionMatrix();
```

#### Defined in

[packages/camera-manager/src/DefaultCameraManager.ts:77](https://github.com/cognitedata/reveal/blob/71be00fcc/viewer/packages/camera-manager/src/DefaultCameraManager.ts#L77)

## Accessors

### cameraControls

 `get` **cameraControls**(): [`ComboControls`](cognite_reveal.ComboControls.md)

Gets instance of camera controls that are used by camera manager. See [ComboControls](cognite_reveal.ComboControls.md) for more
information on all adjustable properties.

**`deprecated`** Will be removed in 4.0.0.

#### Returns

[`ComboControls`](cognite_reveal.ComboControls.md)

#### Defined in

[packages/camera-manager/src/DefaultCameraManager.ts:144](https://github.com/cognitedata/reveal/blob/71be00fcc/viewer/packages/camera-manager/src/DefaultCameraManager.ts#L144)

___

### cameraControlsEnabled

 `get` **cameraControlsEnabled**(): `boolean`

Gets whether camera controls through mouse, touch and keyboard are enabled.

**`deprecated`** Will be removed in 4.0.0. Use [DefaultCameraManager.enabled](cognite_reveal.DefaultCameraManager.md#enabled) instead.

#### Returns

`boolean`

#### Defined in

[packages/camera-manager/src/DefaultCameraManager.ts:178](https://github.com/cognitedata/reveal/blob/71be00fcc/viewer/packages/camera-manager/src/DefaultCameraManager.ts#L178)

 `set` **cameraControlsEnabled**(`enabled`): `void`

Sets whether camera controls through mouse, touch and keyboard are enabled.
This can be useful to e.g. temporarily disable navigation when manipulating other
objects in the scene or when implementing a "cinematic" viewer.

**`deprecated`** Will be removed in 4.0.0. Use [DefaultCameraManager.enabled](cognite_reveal.DefaultCameraManager.md#enabled) instead.

#### Parameters

| Name | Type |
| :------ | :------ |
| `enabled` | `boolean` |

#### Returns

`void`

#### Defined in

[packages/camera-manager/src/DefaultCameraManager.ts:169](https://github.com/cognitedata/reveal/blob/71be00fcc/viewer/packages/camera-manager/src/DefaultCameraManager.ts#L169)

___

### enabled

 `get` **enabled**(): `boolean`

Gets whether camera controls through mouse, touch and keyboard are enabled.

#### Returns

`boolean`

#### Implementation of

[CameraManager](../interfaces/cognite_reveal.CameraManager.md).[enabled](../interfaces/cognite_reveal.CameraManager.md#enabled)

#### Defined in

[packages/camera-manager/src/DefaultCameraManager.ts:159](https://github.com/cognitedata/reveal/blob/71be00fcc/viewer/packages/camera-manager/src/DefaultCameraManager.ts#L159)

 `set` **enabled**(`enabled`): `void`

Sets whether camera controls through mouse, touch and keyboard are enabled.

#### Parameters

| Name | Type |
| :------ | :------ |
| `enabled` | `boolean` |

#### Returns

`void`

#### Implementation of

[CameraManager](../interfaces/cognite_reveal.CameraManager.md).[enabled](../interfaces/cognite_reveal.CameraManager.md#enabled)

#### Defined in

[packages/camera-manager/src/DefaultCameraManager.ts:151](https://github.com/cognitedata/reveal/blob/71be00fcc/viewer/packages/camera-manager/src/DefaultCameraManager.ts#L151)

___

### keyboardNavigationEnabled

 `get` **keyboardNavigationEnabled**(): `boolean`

Whether keyboard control of the camera is enabled/disabled.

#### Returns

`boolean`

#### Defined in

[packages/camera-manager/src/DefaultCameraManager.ts:192](https://github.com/cognitedata/reveal/blob/71be00fcc/viewer/packages/camera-manager/src/DefaultCameraManager.ts#L192)

 `set` **keyboardNavigationEnabled**(`enabled`): `void`

Sets whether keyboard control of the camera is enabled/disabled.

#### Parameters

| Name | Type |
| :------ | :------ |
| `enabled` | `boolean` |

#### Returns

`void`

#### Defined in

[packages/camera-manager/src/DefaultCameraManager.ts:185](https://github.com/cognitedata/reveal/blob/71be00fcc/viewer/packages/camera-manager/src/DefaultCameraManager.ts#L185)

## Methods

### dispose

 **dispose**(): `void`

#### Returns

`void`

#### Implementation of

[CameraManager](../interfaces/cognite_reveal.CameraManager.md).[dispose](../interfaces/cognite_reveal.CameraManager.md#dispose)

#### Defined in

[packages/camera-manager/src/DefaultCameraManager.ts:262](https://github.com/cognitedata/reveal/blob/71be00fcc/viewer/packages/camera-manager/src/DefaultCameraManager.ts#L262)

___

### fitCameraToBoundingBox

 **fitCameraToBoundingBox**(`box`, `duration?`, `radiusFactor?`): `void`

Moves camera to a place where the content of a bounding box is visible to the camera.

#### Parameters

| Name | Type | Default value |
| :------ | :------ | :------ |
| `box` | `Box3` | `undefined` |
| `duration?` | `number` | `undefined` |
| `radiusFactor` | `number` | `2` |

#### Returns

`void`

#### Implementation of

[CameraManager](../interfaces/cognite_reveal.CameraManager.md).[fitCameraToBoundingBox](../interfaces/cognite_reveal.CameraManager.md#fitcameratoboundingbox)

#### Defined in

[packages/camera-manager/src/DefaultCameraManager.ts:133](https://github.com/cognitedata/reveal/blob/71be00fcc/viewer/packages/camera-manager/src/DefaultCameraManager.ts#L133)

___

### getCamera

 **getCamera**(): `PerspectiveCamera`

Returns the camera used for rendering in [Cognite3DViewer](cognite_reveal.Cognite3DViewer.md).
Note that the camera will not be modified directly by Reveal.
Implementations must trigger the `cameraChange`-event whenever the
camera changes.

#### Returns

`PerspectiveCamera`

#### Implementation of

[CameraManager](../interfaces/cognite_reveal.CameraManager.md).[getCamera](../interfaces/cognite_reveal.CameraManager.md#getcamera)

#### Defined in

[packages/camera-manager/src/DefaultCameraManager.ts:196](https://github.com/cognitedata/reveal/blob/71be00fcc/viewer/packages/camera-manager/src/DefaultCameraManager.ts#L196)

___

### getCameraControlsOptions

 **getCameraControlsOptions**(): [`CameraControlsOptions`](../modules/cognite_reveal.md#cameracontrolsoptions)

Gets current camera controls options.

#### Returns

[`CameraControlsOptions`](../modules/cognite_reveal.md#cameracontrolsoptions)

#### Defined in

[packages/camera-manager/src/DefaultCameraManager.ts:237](https://github.com/cognitedata/reveal/blob/71be00fcc/viewer/packages/camera-manager/src/DefaultCameraManager.ts#L237)

___

### getCameraState

 **getCameraState**(): `Required`\<[`CameraState`](../modules/cognite_reveal.md#camerastate)\>

Get camera's state

#### Returns

`Required`\<[`CameraState`](../modules/cognite_reveal.md#camerastate)\>

#### Implementation of

[CameraManager](../interfaces/cognite_reveal.CameraManager.md).[getCameraState](../interfaces/cognite_reveal.CameraManager.md#getcamerastate)

#### Defined in

[packages/camera-manager/src/DefaultCameraManager.ts:226](https://github.com/cognitedata/reveal/blob/71be00fcc/viewer/packages/camera-manager/src/DefaultCameraManager.ts#L226)

___

### off

 **off**(`event`, `callback`): `void`

Unsubscribes from changes of the camera event.

#### Parameters

| Name | Type |
| :------ | :------ |
| `event` | ``"cameraChange"`` |
| `callback` | [`CameraChangeDelegate`](../modules/cognite_reveal.md#camerachangedelegate) |

#### Returns

`void`

#### Implementation of

[CameraManager](../interfaces/cognite_reveal.CameraManager.md).[off](../interfaces/cognite_reveal.CameraManager.md#off)

#### Defined in

[packages/camera-manager/src/DefaultCameraManager.ts:123](https://github.com/cognitedata/reveal/blob/71be00fcc/viewer/packages/camera-manager/src/DefaultCameraManager.ts#L123)

___

### on

 **on**(`event`, `callback`): `void`

Subscribes to changes of the camera event. This is used by Reveal to react on changes of the camera.

#### Parameters

| Name | Type |
| :------ | :------ |
| `event` | ``"cameraChange"`` |
| `callback` | [`CameraChangeDelegate`](../modules/cognite_reveal.md#camerachangedelegate) |

#### Returns

`void`

#### Implementation of

[CameraManager](../interfaces/cognite_reveal.CameraManager.md).[on](../interfaces/cognite_reveal.CameraManager.md#on)

#### Defined in

[packages/camera-manager/src/DefaultCameraManager.ts:113](https://github.com/cognitedata/reveal/blob/71be00fcc/viewer/packages/camera-manager/src/DefaultCameraManager.ts#L113)

___

### setCameraControlsOptions

 **setCameraControlsOptions**(`controlsOptions`): `void`

Sets camera controls options to customize camera controls modes. See [CameraControlsOptions](../modules/cognite_reveal.md#cameracontrolsoptions).

#### Parameters

| Name | Type | Description |
| :------ | :------ | :------ |
| `controlsOptions` | [`CameraControlsOptions`](../modules/cognite_reveal.md#cameracontrolsoptions) | JSON object with camera controls options. |

#### Returns

`void`

#### Defined in

[packages/camera-manager/src/DefaultCameraManager.ts:245](https://github.com/cognitedata/reveal/blob/71be00fcc/viewer/packages/camera-manager/src/DefaultCameraManager.ts#L245)

___

### setCameraState

 **setCameraState**(`state`): `void`

Sets camera state. All parameters are optional. Rotation and target can't be set at the same time,
if so, error will be thrown. Set rotation is preserved until next call of setCameraState with
empty rotation field.

#### Parameters

| Name | Type | Description |
| :------ | :------ | :------ |
| `state` | [`CameraState`](../modules/cognite_reveal.md#camerastate) | Camera state. |

#### Returns

`void`

#### Implementation of

[CameraManager](../interfaces/cognite_reveal.CameraManager.md).[setCameraState](../interfaces/cognite_reveal.CameraManager.md#setcamerastate)

#### Defined in

[packages/camera-manager/src/DefaultCameraManager.ts:206](https://github.com/cognitedata/reveal/blob/71be00fcc/viewer/packages/camera-manager/src/DefaultCameraManager.ts#L206)

___

### update

 **update**(`deltaTime`, `boundingBox`): `void`

Updates internal state of camera manager. Expected to update visual state of the camera
as well as it's near and far planes if needed. Called in `requestAnimationFrame`-loop.
Reveal performance affects frequency with which this method is called.

#### Parameters

| Name | Type |
| :------ | :------ |
| `deltaTime` | `number` |
| `boundingBox` | `Box3` |

#### Returns

`void`

#### Implementation of

[CameraManager](../interfaces/cognite_reveal.CameraManager.md).[update](../interfaces/cognite_reveal.CameraManager.md#update)

#### Defined in

[packages/camera-manager/src/DefaultCameraManager.ts:252](https://github.com/cognitedata/reveal/blob/71be00fcc/viewer/packages/camera-manager/src/DefaultCameraManager.ts#L252)


<!-- SOURCE_END: reveal/documentation\versioned_docs\version-3.x\api\classes\cognite_reveal.DefaultCameraManager.md -->

================================================================================


<!-- SOURCE_START: reveal/documentation\versioned_docs\version-3.x\api\classes\cognite_reveal.IndexSet.md -->
## File: reveal/documentation\versioned_docs\version-3.x\api\classes\cognite_reveal.IndexSet.md

---
id: "cognite_reveal.IndexSet"
title: "Class: IndexSet"
sidebar_label: "IndexSet"
custom_edit_url: null
---

[@cognite/reveal](../modules/cognite_reveal.md).IndexSet

## Constructors

### constructor

 **new IndexSet**(`values?`)

#### Parameters

| Name | Type |
| :------ | :------ |
| `values?` | `Iterable`\<`number`\> |

#### Defined in

[packages/utilities/src/indexset/IndexSet.ts:13](https://github.com/cognitedata/reveal/blob/71be00fcc/viewer/packages/utilities/src/indexset/IndexSet.ts#L13)

 **new IndexSet**(`values?`)

#### Parameters

| Name | Type |
| :------ | :------ |
| `values?` | [`NumericRange`](cognite_reveal.NumericRange.md) |

#### Defined in

[packages/utilities/src/indexset/IndexSet.ts:14](https://github.com/cognitedata/reveal/blob/71be00fcc/viewer/packages/utilities/src/indexset/IndexSet.ts#L14)

## Properties

### rootNode

 `Optional` **rootNode**: `IndexNode`

#### Defined in

[packages/utilities/src/indexset/IndexSet.ts:11](https://github.com/cognitedata/reveal/blob/71be00fcc/viewer/packages/utilities/src/indexset/IndexSet.ts#L11)

## Accessors

### count

 `get` **count**(): `number`

#### Returns

`number`

#### Defined in

[packages/utilities/src/indexset/IndexSet.ts:68](https://github.com/cognitedata/reveal/blob/71be00fcc/viewer/packages/utilities/src/indexset/IndexSet.ts#L68)

## Methods

### add

 **add**(`index`): `void`

#### Parameters

| Name | Type |
| :------ | :------ |
| `index` | `number` |

#### Returns

`void`

#### Defined in

[packages/utilities/src/indexset/IndexSet.ts:33](https://github.com/cognitedata/reveal/blob/71be00fcc/viewer/packages/utilities/src/indexset/IndexSet.ts#L33)

___

### addRange

 **addRange**(`range`): `void`

#### Parameters

| Name | Type |
| :------ | :------ |
| `range` | [`NumericRange`](cognite_reveal.NumericRange.md) |

#### Returns

`void`

#### Defined in

[packages/utilities/src/indexset/IndexSet.ts:39](https://github.com/cognitedata/reveal/blob/71be00fcc/viewer/packages/utilities/src/indexset/IndexSet.ts#L39)

___

### clear

 **clear**(): `void`

#### Returns

`void`

#### Defined in

[packages/utilities/src/indexset/IndexSet.ts:211](https://github.com/cognitedata/reveal/blob/71be00fcc/viewer/packages/utilities/src/indexset/IndexSet.ts#L211)

___

### clone

 **clone**(): [`IndexSet`](cognite_reveal.IndexSet.md)

#### Returns

[`IndexSet`](cognite_reveal.IndexSet.md)

#### Defined in

[packages/utilities/src/indexset/IndexSet.ts:215](https://github.com/cognitedata/reveal/blob/71be00fcc/viewer/packages/utilities/src/indexset/IndexSet.ts#L215)

___

### contains

 **contains**(`index`): `boolean`

#### Parameters

| Name | Type |
| :------ | :------ |
| `index` | `number` |

#### Returns

`boolean`

#### Defined in

[packages/utilities/src/indexset/IndexSet.ts:60](https://github.com/cognitedata/reveal/blob/71be00fcc/viewer/packages/utilities/src/indexset/IndexSet.ts#L60)

___

### differenceWith

 **differenceWith**(`otherSet`): [`IndexSet`](cognite_reveal.IndexSet.md)

#### Parameters

| Name | Type |
| :------ | :------ |
| `otherSet` | [`IndexSet`](cognite_reveal.IndexSet.md) |

#### Returns

[`IndexSet`](cognite_reveal.IndexSet.md)

#### Defined in

[packages/utilities/src/indexset/IndexSet.ts:135](https://github.com/cognitedata/reveal/blob/71be00fcc/viewer/packages/utilities/src/indexset/IndexSet.ts#L135)

___

### forEachRange

 **forEachRange**(`visitor`): `void`

#### Parameters

| Name | Type |
| :------ | :------ |
| `visitor` | (`range`: [`NumericRange`](cognite_reveal.NumericRange.md)) => `void` |

#### Returns

`void`

#### Defined in

[packages/utilities/src/indexset/IndexSet.ts:27](https://github.com/cognitedata/reveal/blob/71be00fcc/viewer/packages/utilities/src/indexset/IndexSet.ts#L27)

___

### hasIntersectionWith

 **hasIntersectionWith**(`otherSet`): `boolean`

#### Parameters

| Name | Type |
| :------ | :------ |
| `otherSet` | [`IndexSet`](cognite_reveal.IndexSet.md) \| `Set`\<`number`\> \| `Map`\<`number`, `number`\> |

#### Returns

`boolean`

#### Defined in

[packages/utilities/src/indexset/IndexSet.ts:145](https://github.com/cognitedata/reveal/blob/71be00fcc/viewer/packages/utilities/src/indexset/IndexSet.ts#L145)

___

### intersectWith

 **intersectWith**(`otherSet`): [`IndexSet`](cognite_reveal.IndexSet.md)

#### Parameters

| Name | Type |
| :------ | :------ |
| `otherSet` | [`IndexSet`](cognite_reveal.IndexSet.md) |

#### Returns

[`IndexSet`](cognite_reveal.IndexSet.md)

#### Defined in

[packages/utilities/src/indexset/IndexSet.ts:171](https://github.com/cognitedata/reveal/blob/71be00fcc/viewer/packages/utilities/src/indexset/IndexSet.ts#L171)

___

### invertedRanges

 **invertedRanges**(): [`NumericRange`](cognite_reveal.NumericRange.md)[]

#### Returns

[`NumericRange`](cognite_reveal.NumericRange.md)[]

#### Defined in

[packages/utilities/src/indexset/IndexSet.ts:105](https://github.com/cognitedata/reveal/blob/71be00fcc/viewer/packages/utilities/src/indexset/IndexSet.ts#L105)

___

### remove

 **remove**(`index`): `void`

#### Parameters

| Name | Type |
| :------ | :------ |
| `index` | `number` |

#### Returns

`void`

#### Defined in

[packages/utilities/src/indexset/IndexSet.ts:47](https://github.com/cognitedata/reveal/blob/71be00fcc/viewer/packages/utilities/src/indexset/IndexSet.ts#L47)

___

### removeRange

 **removeRange**(`range`): `void`

#### Parameters

| Name | Type |
| :------ | :------ |
| `range` | [`NumericRange`](cognite_reveal.NumericRange.md) |

#### Returns

`void`

#### Defined in

[packages/utilities/src/indexset/IndexSet.ts:52](https://github.com/cognitedata/reveal/blob/71be00fcc/viewer/packages/utilities/src/indexset/IndexSet.ts#L52)

___

### toIndexArray

 **toIndexArray**(): `number`[]

#### Returns

`number`[]

#### Defined in

[packages/utilities/src/indexset/IndexSet.ts:84](https://github.com/cognitedata/reveal/blob/71be00fcc/viewer/packages/utilities/src/indexset/IndexSet.ts#L84)

___

### toPlainSet

 **toPlainSet**(): `Set`\<`number`\>

#### Returns

`Set`\<`number`\>

#### Defined in

[packages/utilities/src/indexset/IndexSet.ts:98](https://github.com/cognitedata/reveal/blob/71be00fcc/viewer/packages/utilities/src/indexset/IndexSet.ts#L98)

___

### toRangeArray

 **toRangeArray**(): [`NumericRange`](cognite_reveal.NumericRange.md)[]

#### Returns

[`NumericRange`](cognite_reveal.NumericRange.md)[]

#### Defined in

[packages/utilities/src/indexset/IndexSet.ts:76](https://github.com/cognitedata/reveal/blob/71be00fcc/viewer/packages/utilities/src/indexset/IndexSet.ts#L76)

___

### unionWith

 **unionWith**(`otherSet`): [`IndexSet`](cognite_reveal.IndexSet.md)

#### Parameters

| Name | Type |
| :------ | :------ |
| `otherSet` | [`IndexSet`](cognite_reveal.IndexSet.md) |

#### Returns

[`IndexSet`](cognite_reveal.IndexSet.md)

#### Defined in

[packages/utilities/src/indexset/IndexSet.ts:123](https://github.com/cognitedata/reveal/blob/71be00fcc/viewer/packages/utilities/src/indexset/IndexSet.ts#L123)


<!-- SOURCE_END: reveal/documentation\versioned_docs\version-3.x\api\classes\cognite_reveal.IndexSet.md -->

================================================================================


<!-- SOURCE_START: reveal/documentation\versioned_docs\version-3.x\api\classes\cognite_reveal.IntersectionNodeCollection.md -->
## File: reveal/documentation\versioned_docs\version-3.x\api\classes\cognite_reveal.IntersectionNodeCollection.md

---
id: "cognite_reveal.IntersectionNodeCollection"
title: "Class: IntersectionNodeCollection"
sidebar_label: "IntersectionNodeCollection"
custom_edit_url: null
---

[@cognite/reveal](../modules/cognite_reveal.md).IntersectionNodeCollection

Node collection that is the intersection between a set of underlying node collections.

## Hierarchy

- `CombineNodeCollectionBase`

   **`IntersectionNodeCollection`**

## Constructors

### constructor

 **new IntersectionNodeCollection**(`nodeCollections?`)

#### Parameters

| Name | Type |
| :------ | :------ |
| `nodeCollections?` | [`NodeCollection`](cognite_reveal.NodeCollection.md)[] |

#### Overrides

CombineNodeCollectionBase.constructor

#### Defined in

[packages/cad-styling/src/IntersectionNodeCollection.ts:22](https://github.com/cognitedata/reveal/blob/71be00fcc/viewer/packages/cad-styling/src/IntersectionNodeCollection.ts#L22)

## Properties

### classToken

 `Static` `Readonly` **classToken**: ``"IntersectionNodeCollection"``

#### Defined in

[packages/cad-styling/src/IntersectionNodeCollection.ts:20](https://github.com/cognitedata/reveal/blob/71be00fcc/viewer/packages/cad-styling/src/IntersectionNodeCollection.ts#L20)

## Accessors

### classToken

 `get` **classToken**(): `string`

#### Returns

`string`

#### Inherited from

CombineNodeCollectionBase.classToken

#### Defined in

[packages/cad-styling/src/NodeCollection.ts:23](https://github.com/cognitedata/reveal/blob/71be00fcc/viewer/packages/cad-styling/src/NodeCollection.ts#L23)

___

### isLoading

 `get` **isLoading**(): `boolean`

**`override`**

#### Returns

`boolean`

#### Inherited from

CombineNodeCollectionBase.isLoading

#### Defined in

[packages/cad-styling/src/CombineNodeCollectionBase.ts:67](https://github.com/cognitedata/reveal/blob/71be00fcc/viewer/packages/cad-styling/src/CombineNodeCollectionBase.ts#L67)

## Methods

### add

 **add**(`nodeCollection`): `void`

#### Parameters

| Name | Type |
| :------ | :------ |
| `nodeCollection` | [`NodeCollection`](cognite_reveal.NodeCollection.md) |

#### Returns

`void`

#### Inherited from

CombineNodeCollectionBase.add

#### Defined in

[packages/cad-styling/src/CombineNodeCollectionBase.ts:26](https://github.com/cognitedata/reveal/blob/71be00fcc/viewer/packages/cad-styling/src/CombineNodeCollectionBase.ts#L26)

___

### clear

 **clear**(): `void`

Clears all underlying node collections.

#### Returns

`void`

#### Inherited from

CombineNodeCollectionBase.clear

#### Defined in

[packages/cad-styling/src/CombineNodeCollectionBase.ts:46](https://github.com/cognitedata/reveal/blob/71be00fcc/viewer/packages/cad-styling/src/CombineNodeCollectionBase.ts#L46)

___

### getAreas

 **getAreas**(): [`AreaCollection`](../interfaces/cognite_reveal.AreaCollection.md)

#### Returns

[`AreaCollection`](../interfaces/cognite_reveal.AreaCollection.md)

#### Overrides

CombineNodeCollectionBase.getAreas

#### Defined in

[packages/cad-styling/src/IntersectionNodeCollection.ts:52](https://github.com/cognitedata/reveal/blob/71be00fcc/viewer/packages/cad-styling/src/IntersectionNodeCollection.ts#L52)

___

### getIndexSet

 **getIndexSet**(): [`IndexSet`](cognite_reveal.IndexSet.md)

**`override`**

#### Returns

[`IndexSet`](cognite_reveal.IndexSet.md)

#### Inherited from

CombineNodeCollectionBase.getIndexSet

#### Defined in

[packages/cad-styling/src/CombineNodeCollectionBase.ts:59](https://github.com/cognitedata/reveal/blob/71be00fcc/viewer/packages/cad-styling/src/CombineNodeCollectionBase.ts#L59)

___

### makeDirty

 **makeDirty**(): `void`

#### Returns

`void`

#### Overrides

CombineNodeCollectionBase.makeDirty

#### Defined in

[packages/cad-styling/src/IntersectionNodeCollection.ts:46](https://github.com/cognitedata/reveal/blob/71be00fcc/viewer/packages/cad-styling/src/IntersectionNodeCollection.ts#L46)

___

### off

 **off**(`event`, `listener`): `void`

#### Parameters

| Name | Type |
| :------ | :------ |
| `event` | ``"changed"`` |
| `listener` | () => `void` |

#### Returns

`void`

#### Inherited from

CombineNodeCollectionBase.off

#### Defined in

[packages/cad-styling/src/NodeCollection.ts:32](https://github.com/cognitedata/reveal/blob/71be00fcc/viewer/packages/cad-styling/src/NodeCollection.ts#L32)

___

### on

 **on**(`event`, `listener`): `void`

#### Parameters

| Name | Type |
| :------ | :------ |
| `event` | ``"changed"`` |
| `listener` | () => `void` |

#### Returns

`void`

#### Inherited from

CombineNodeCollectionBase.on

#### Defined in

[packages/cad-styling/src/NodeCollection.ts:27](https://github.com/cognitedata/reveal/blob/71be00fcc/viewer/packages/cad-styling/src/NodeCollection.ts#L27)

___

### remove

 **remove**(`nodeCollection`): `void`

#### Parameters

| Name | Type |
| :------ | :------ |
| `nodeCollection` | [`NodeCollection`](cognite_reveal.NodeCollection.md) |

#### Returns

`void`

#### Inherited from

CombineNodeCollectionBase.remove

#### Defined in

[packages/cad-styling/src/CombineNodeCollectionBase.ts:32](https://github.com/cognitedata/reveal/blob/71be00fcc/viewer/packages/cad-styling/src/CombineNodeCollectionBase.ts#L32)

___

### serialize

 **serialize**(): [`SerializedNodeCollection`](../modules/cognite_reveal.md#serializednodecollection)

#### Returns

[`SerializedNodeCollection`](../modules/cognite_reveal.md#serializednodecollection)

#### Overrides

CombineNodeCollectionBase.serialize

#### Defined in

[packages/cad-styling/src/IntersectionNodeCollection.ts:26](https://github.com/cognitedata/reveal/blob/71be00fcc/viewer/packages/cad-styling/src/IntersectionNodeCollection.ts#L26)


<!-- SOURCE_END: reveal/documentation\versioned_docs\version-3.x\api\classes\cognite_reveal.IntersectionNodeCollection.md -->

================================================================================


<!-- SOURCE_START: reveal/documentation\versioned_docs\version-3.x\api\classes\cognite_reveal.InvertedNodeCollection.md -->
## File: reveal/documentation\versioned_docs\version-3.x\api\classes\cognite_reveal.InvertedNodeCollection.md

---
id: "cognite_reveal.InvertedNodeCollection"
title: "Class: InvertedNodeCollection"
sidebar_label: "InvertedNodeCollection"
custom_edit_url: null
---

[@cognite/reveal](../modules/cognite_reveal.md).InvertedNodeCollection

Node collection that inverts the result from another node collection.

## Hierarchy

- [`NodeCollection`](cognite_reveal.NodeCollection.md)

   **`InvertedNodeCollection`**

## Constructors

### constructor

 **new InvertedNodeCollection**(`model`, `innerSet`)

#### Parameters

| Name | Type |
| :------ | :------ |
| `model` | [`CdfModelNodeCollectionDataProvider`](../interfaces/cognite_reveal.CdfModelNodeCollectionDataProvider.md) |
| `innerSet` | [`NodeCollection`](cognite_reveal.NodeCollection.md) |

#### Overrides

NodeCollection.constructor

#### Defined in

[packages/cad-styling/src/InvertedNodeCollection.ts:21](https://github.com/cognitedata/reveal/blob/71be00fcc/viewer/packages/cad-styling/src/InvertedNodeCollection.ts#L21)

## Properties

### classToken

 `Static` `Readonly` **classToken**: ``"InvertedNodeCollection"``

#### Defined in

[packages/cad-styling/src/InvertedNodeCollection.ts:15](https://github.com/cognitedata/reveal/blob/71be00fcc/viewer/packages/cad-styling/src/InvertedNodeCollection.ts#L15)

## Accessors

### classToken

 `get` **classToken**(): `string`

#### Returns

`string`

#### Inherited from

NodeCollection.classToken

#### Defined in

[packages/cad-styling/src/NodeCollection.ts:23](https://github.com/cognitedata/reveal/blob/71be00fcc/viewer/packages/cad-styling/src/NodeCollection.ts#L23)

___

### isLoading

 `get` **isLoading**(): `boolean`

#### Returns

`boolean`

#### Overrides

NodeCollection.isLoading

#### Defined in

[packages/cad-styling/src/InvertedNodeCollection.ts:32](https://github.com/cognitedata/reveal/blob/71be00fcc/viewer/packages/cad-styling/src/InvertedNodeCollection.ts#L32)

## Methods

### clear

 **clear**(): `never`

Not supported.

**`throws`** Always throws an error.

#### Returns

`never`

#### Overrides

[NodeCollection](cognite_reveal.NodeCollection.md).[clear](cognite_reveal.NodeCollection.md#clear)

#### Defined in

[packages/cad-styling/src/InvertedNodeCollection.ts:58](https://github.com/cognitedata/reveal/blob/71be00fcc/viewer/packages/cad-styling/src/InvertedNodeCollection.ts#L58)

___

### getAreas

 **getAreas**(): [`AreaCollection`](../interfaces/cognite_reveal.AreaCollection.md)

Returns areas surrounding the nodes in the collection. The areas
are boxes in "ThreeJS coordinates". Note that not all
implementations supports this.

#### Returns

[`AreaCollection`](../interfaces/cognite_reveal.AreaCollection.md)

#### Overrides

[NodeCollection](cognite_reveal.NodeCollection.md).[getAreas](cognite_reveal.NodeCollection.md#getareas)

#### Defined in

[packages/cad-styling/src/InvertedNodeCollection.ts:47](https://github.com/cognitedata/reveal/blob/71be00fcc/viewer/packages/cad-styling/src/InvertedNodeCollection.ts#L47)

___

### getIndexSet

 **getIndexSet**(): [`IndexSet`](cognite_reveal.IndexSet.md)

#### Returns

[`IndexSet`](cognite_reveal.IndexSet.md)

#### Overrides

[NodeCollection](cognite_reveal.NodeCollection.md).[getIndexSet](cognite_reveal.NodeCollection.md#getindexset)

#### Defined in

[packages/cad-styling/src/InvertedNodeCollection.ts:36](https://github.com/cognitedata/reveal/blob/71be00fcc/viewer/packages/cad-styling/src/InvertedNodeCollection.ts#L36)

___

### off

 **off**(`event`, `listener`): `void`

#### Parameters

| Name | Type |
| :------ | :------ |
| `event` | ``"changed"`` |
| `listener` | () => `void` |

#### Returns

`void`

#### Inherited from

[NodeCollection](cognite_reveal.NodeCollection.md).[off](cognite_reveal.NodeCollection.md#off)

#### Defined in

[packages/cad-styling/src/NodeCollection.ts:32](https://github.com/cognitedata/reveal/blob/71be00fcc/viewer/packages/cad-styling/src/NodeCollection.ts#L32)

___

### on

 **on**(`event`, `listener`): `void`

#### Parameters

| Name | Type |
| :------ | :------ |
| `event` | ``"changed"`` |
| `listener` | () => `void` |

#### Returns

`void`

#### Inherited from

[NodeCollection](cognite_reveal.NodeCollection.md).[on](cognite_reveal.NodeCollection.md#on)

#### Defined in

[packages/cad-styling/src/NodeCollection.ts:27](https://github.com/cognitedata/reveal/blob/71be00fcc/viewer/packages/cad-styling/src/NodeCollection.ts#L27)

___

### serialize

 **serialize**(): [`SerializedNodeCollection`](../modules/cognite_reveal.md#serializednodecollection)

#### Returns

[`SerializedNodeCollection`](../modules/cognite_reveal.md#serializednodecollection)

#### Overrides

[NodeCollection](cognite_reveal.NodeCollection.md).[serialize](cognite_reveal.NodeCollection.md#serialize)

#### Defined in

[packages/cad-styling/src/InvertedNodeCollection.ts:51](https://github.com/cognitedata/reveal/blob/71be00fcc/viewer/packages/cad-styling/src/InvertedNodeCollection.ts#L51)


<!-- SOURCE_END: reveal/documentation\versioned_docs\version-3.x\api\classes\cognite_reveal.InvertedNodeCollection.md -->

================================================================================


<!-- SOURCE_START: reveal/documentation\versioned_docs\version-3.x\api\classes\cognite_reveal.NodeAppearanceProvider.md -->
## File: reveal/documentation\versioned_docs\version-3.x\api\classes\cognite_reveal.NodeAppearanceProvider.md

---
id: "cognite_reveal.NodeAppearanceProvider"
title: "Class: NodeAppearanceProvider"
sidebar_label: "NodeAppearanceProvider"
custom_edit_url: null
---

[@cognite/reveal](../modules/cognite_reveal.md).NodeAppearanceProvider

## Constructors

### constructor

 **new NodeAppearanceProvider**()

## Accessors

### isLoading

 `get` **isLoading**(): `boolean`

#### Returns

`boolean`

#### Defined in

[packages/cad-styling/src/NodeAppearanceProvider.ts:155](https://github.com/cognitedata/reveal/blob/71be00fcc/viewer/packages/cad-styling/src/NodeAppearanceProvider.ts#L155)

## Methods

### applyStyles

 **applyStyles**(`applyCb`): `void`

#### Parameters

| Name | Type |
| :------ | :------ |
| `applyCb` | `ApplyStyleDelegate` |

#### Returns

`void`

#### Defined in

[packages/cad-styling/src/NodeAppearanceProvider.ts:118](https://github.com/cognitedata/reveal/blob/71be00fcc/viewer/packages/cad-styling/src/NodeAppearanceProvider.ts#L118)

___

### assignStyledNodeCollection

 **assignStyledNodeCollection**(`nodeCollection`, `appearance`): `void`

#### Parameters

| Name | Type |
| :------ | :------ |
| `nodeCollection` | [`NodeCollection`](cognite_reveal.NodeCollection.md) |
| `appearance` | [`NodeAppearance`](../modules/cognite_reveal.md#nodeappearance) |

#### Returns

`void`

#### Defined in

[packages/cad-styling/src/NodeAppearanceProvider.ts:82](https://github.com/cognitedata/reveal/blob/71be00fcc/viewer/packages/cad-styling/src/NodeAppearanceProvider.ts#L82)

___

### clear

 **clear**(): `void`

#### Returns

`void`

#### Defined in

[packages/cad-styling/src/NodeAppearanceProvider.ts:146](https://github.com/cognitedata/reveal/blob/71be00fcc/viewer/packages/cad-styling/src/NodeAppearanceProvider.ts#L146)

___

### getPrioritizedAreas

 **getPrioritizedAreas**(): `PrioritizedArea`[]

#### Returns

`PrioritizedArea`[]

#### Defined in

[packages/cad-styling/src/NodeAppearanceProvider.ts:125](https://github.com/cognitedata/reveal/blob/71be00fcc/viewer/packages/cad-styling/src/NodeAppearanceProvider.ts#L125)

___

### off

 **off**(`event`, `listener`): `void`

#### Parameters

| Name | Type |
| :------ | :------ |
| `event` | ``"changed"`` |
| `listener` | () => `void` |

#### Returns

`void`

#### Defined in

[packages/cad-styling/src/NodeAppearanceProvider.ts:60](https://github.com/cognitedata/reveal/blob/71be00fcc/viewer/packages/cad-styling/src/NodeAppearanceProvider.ts#L60)

 **off**(`event`, `listener`): `void`

#### Parameters

| Name | Type |
| :------ | :------ |
| `event` | ``"loadingStateChanged"`` |
| `listener` | (`isLoading`: `boolean`) => `void` |

#### Returns

`void`

#### Defined in

[packages/cad-styling/src/NodeAppearanceProvider.ts:61](https://github.com/cognitedata/reveal/blob/71be00fcc/viewer/packages/cad-styling/src/NodeAppearanceProvider.ts#L61)

___

### on

 **on**(`event`, `listener`): `void`

#### Parameters

| Name | Type |
| :------ | :------ |
| `event` | ``"changed"`` |
| `listener` | () => `void` |

#### Returns

`void`

#### Defined in

[packages/cad-styling/src/NodeAppearanceProvider.ts:37](https://github.com/cognitedata/reveal/blob/71be00fcc/viewer/packages/cad-styling/src/NodeAppearanceProvider.ts#L37)

 **on**(`event`, `listener`): `void`

#### Parameters

| Name | Type |
| :------ | :------ |
| `event` | ``"loadingStateChanged"`` |
| `listener` | (`isLoading`: `boolean`) => `void` |

#### Returns

`void`

#### Defined in

[packages/cad-styling/src/NodeAppearanceProvider.ts:38](https://github.com/cognitedata/reveal/blob/71be00fcc/viewer/packages/cad-styling/src/NodeAppearanceProvider.ts#L38)

 **on**(`event`, `listener`): `void`

#### Parameters

| Name | Type |
| :------ | :------ |
| `event` | ``"prioritizedAreasChanged"`` |
| `listener` | () => `void` |

#### Returns

`void`

#### Defined in

[packages/cad-styling/src/NodeAppearanceProvider.ts:39](https://github.com/cognitedata/reveal/blob/71be00fcc/viewer/packages/cad-styling/src/NodeAppearanceProvider.ts#L39)

___

### unassignStyledNodeCollection

 **unassignStyledNodeCollection**(`nodeCollection`): `void`

#### Parameters

| Name | Type |
| :------ | :------ |
| `nodeCollection` | [`NodeCollection`](cognite_reveal.NodeCollection.md) |

#### Returns

`void`

#### Defined in

[packages/cad-styling/src/NodeAppearanceProvider.ts:106](https://github.com/cognitedata/reveal/blob/71be00fcc/viewer/packages/cad-styling/src/NodeAppearanceProvider.ts#L106)


<!-- SOURCE_END: reveal/documentation\versioned_docs\version-3.x\api\classes\cognite_reveal.NodeAppearanceProvider.md -->

================================================================================


<!-- SOURCE_START: reveal/documentation\versioned_docs\version-3.x\api\classes\cognite_reveal.NodeCollection.md -->
## File: reveal/documentation\versioned_docs\version-3.x\api\classes\cognite_reveal.NodeCollection.md

---
id: "cognite_reveal.NodeCollection"
title: "Class: NodeCollection"
sidebar_label: "NodeCollection"
custom_edit_url: null
---

[@cognite/reveal](../modules/cognite_reveal.md).NodeCollection

Abstract class for implementing a set of nodes to be styled.

## Hierarchy

- **`NodeCollection`**

   [`TreeIndexNodeCollection`](cognite_reveal.TreeIndexNodeCollection.md)

   [`PropertyFilterNodeCollection`](cognite_reveal.PropertyFilterNodeCollection.md)

   [`SinglePropertyFilterNodeCollection`](cognite_reveal.SinglePropertyFilterNodeCollection.md)

   [`AssetNodeCollection`](cognite_reveal.AssetNodeCollection.md)

   [`InvertedNodeCollection`](cognite_reveal.InvertedNodeCollection.md)

## Accessors

### classToken

 `get` **classToken**(): `string`

#### Returns

`string`

#### Defined in

[packages/cad-styling/src/NodeCollection.ts:23](https://github.com/cognitedata/reveal/blob/71be00fcc/viewer/packages/cad-styling/src/NodeCollection.ts#L23)

___

### isLoading

 `Abstract` `get` **isLoading**(): `boolean`

#### Returns

`boolean`

#### Defined in

[packages/cad-styling/src/NodeCollection.ts:37](https://github.com/cognitedata/reveal/blob/71be00fcc/viewer/packages/cad-styling/src/NodeCollection.ts#L37)

## Methods

### clear

 `Abstract` **clear**(): `void`

#### Returns

`void`

#### Defined in

[packages/cad-styling/src/NodeCollection.ts:45](https://github.com/cognitedata/reveal/blob/71be00fcc/viewer/packages/cad-styling/src/NodeCollection.ts#L45)

___

### getAreas

 `Abstract` **getAreas**(): [`AreaCollection`](../interfaces/cognite_reveal.AreaCollection.md)

Returns areas surrounding the nodes in the collection. The areas
are boxes in "ThreeJS coordinates". Note that not all
implementations supports this.

#### Returns

[`AreaCollection`](../interfaces/cognite_reveal.AreaCollection.md)

#### Defined in

[packages/cad-styling/src/NodeCollection.ts:44](https://github.com/cognitedata/reveal/blob/71be00fcc/viewer/packages/cad-styling/src/NodeCollection.ts#L44)

___

### getIndexSet

 `Abstract` **getIndexSet**(): [`IndexSet`](cognite_reveal.IndexSet.md)

#### Returns

[`IndexSet`](cognite_reveal.IndexSet.md)

#### Defined in

[packages/cad-styling/src/NodeCollection.ts:38](https://github.com/cognitedata/reveal/blob/71be00fcc/viewer/packages/cad-styling/src/NodeCollection.ts#L38)

___

### off

 **off**(`event`, `listener`): `void`

#### Parameters

| Name | Type |
| :------ | :------ |
| `event` | ``"changed"`` |
| `listener` | () => `void` |

#### Returns

`void`

#### Defined in

[packages/cad-styling/src/NodeCollection.ts:32](https://github.com/cognitedata/reveal/blob/71be00fcc/viewer/packages/cad-styling/src/NodeCollection.ts#L32)

___

### on

 **on**(`event`, `listener`): `void`

#### Parameters

| Name | Type |
| :------ | :------ |
| `event` | ``"changed"`` |
| `listener` | () => `void` |

#### Returns

`void`

#### Defined in

[packages/cad-styling/src/NodeCollection.ts:27](https://github.com/cognitedata/reveal/blob/71be00fcc/viewer/packages/cad-styling/src/NodeCollection.ts#L27)

___

### serialize

 `Abstract` **serialize**(): [`SerializedNodeCollection`](../modules/cognite_reveal.md#serializednodecollection)

#### Returns

[`SerializedNodeCollection`](../modules/cognite_reveal.md#serializednodecollection)

#### Defined in

[packages/cad-styling/src/NodeCollection.ts:46](https://github.com/cognitedata/reveal/blob/71be00fcc/viewer/packages/cad-styling/src/NodeCollection.ts#L46)


<!-- SOURCE_END: reveal/documentation\versioned_docs\version-3.x\api\classes\cognite_reveal.NodeCollection.md -->

================================================================================


<!-- SOURCE_START: reveal/documentation\versioned_docs\version-3.x\api\classes\cognite_reveal.NumericRange.md -->
## File: reveal/documentation\versioned_docs\version-3.x\api\classes\cognite_reveal.NumericRange.md

---
id: "cognite_reveal.NumericRange"
title: "Class: NumericRange"
sidebar_label: "NumericRange"
custom_edit_url: null
---

[@cognite/reveal](../modules/cognite_reveal.md).NumericRange

## Constructors

### constructor

 **new NumericRange**(`from`, `count`)

#### Parameters

| Name | Type |
| :------ | :------ |
| `from` | `number` |
| `count` | `number` |

#### Defined in

[packages/utilities/src/NumericRange.ts:10](https://github.com/cognitedata/reveal/blob/71be00fcc/viewer/packages/utilities/src/NumericRange.ts#L10)

## Properties

### count

 `Readonly` **count**: `number`

#### Defined in

[packages/utilities/src/NumericRange.ts:7](https://github.com/cognitedata/reveal/blob/71be00fcc/viewer/packages/utilities/src/NumericRange.ts#L7)

___

### from

 `Readonly` **from**: `number`

#### Defined in

[packages/utilities/src/NumericRange.ts:6](https://github.com/cognitedata/reveal/blob/71be00fcc/viewer/packages/utilities/src/NumericRange.ts#L6)

___

### toInclusive

 `Readonly` **toInclusive**: `number`

#### Defined in

[packages/utilities/src/NumericRange.ts:8](https://github.com/cognitedata/reveal/blob/71be00fcc/viewer/packages/utilities/src/NumericRange.ts#L8)

## Methods

### contains

 **contains**(`value`): `boolean`

#### Parameters

| Name | Type |
| :------ | :------ |
| `value` | `number` |

#### Returns

`boolean`

#### Defined in

[packages/utilities/src/NumericRange.ts:38](https://github.com/cognitedata/reveal/blob/71be00fcc/viewer/packages/utilities/src/NumericRange.ts#L38)

___

### equal

 **equal**(`other`): `boolean`

#### Parameters

| Name | Type |
| :------ | :------ |
| `other` | [`NumericRange`](cognite_reveal.NumericRange.md) |

#### Returns

`boolean`

#### Defined in

[packages/utilities/src/NumericRange.ts:34](https://github.com/cognitedata/reveal/blob/71be00fcc/viewer/packages/utilities/src/NumericRange.ts#L34)

___

### forEach

 **forEach**(`action`): `void`

#### Parameters

| Name | Type |
| :------ | :------ |
| `action` | (`value`: `number`) => `void` |

#### Returns

`void`

#### Defined in

[packages/utilities/src/NumericRange.ts:72](https://github.com/cognitedata/reveal/blob/71be00fcc/viewer/packages/utilities/src/NumericRange.ts#L72)

___

### intersectionWith

 **intersectionWith**(`range`): [`NumericRange`](cognite_reveal.NumericRange.md)

#### Parameters

| Name | Type |
| :------ | :------ |
| `range` | [`NumericRange`](cognite_reveal.NumericRange.md) |

#### Returns

[`NumericRange`](cognite_reveal.NumericRange.md)

#### Defined in

[packages/utilities/src/NumericRange.ts:50](https://github.com/cognitedata/reveal/blob/71be00fcc/viewer/packages/utilities/src/NumericRange.ts#L50)

___

### intersects

 **intersects**(`range`): `boolean`

#### Parameters

| Name | Type |
| :------ | :------ |
| `range` | [`NumericRange`](cognite_reveal.NumericRange.md) |

#### Returns

`boolean`

#### Defined in

[packages/utilities/src/NumericRange.ts:42](https://github.com/cognitedata/reveal/blob/71be00fcc/viewer/packages/utilities/src/NumericRange.ts#L42)

___

### intersectsOrCoinciding

 **intersectsOrCoinciding**(`range`): `boolean`

#### Parameters

| Name | Type |
| :------ | :------ |
| `range` | [`NumericRange`](cognite_reveal.NumericRange.md) |

#### Returns

`boolean`

#### Defined in

[packages/utilities/src/NumericRange.ts:46](https://github.com/cognitedata/reveal/blob/71be00fcc/viewer/packages/utilities/src/NumericRange.ts#L46)

___

### isInside

 **isInside**(`range`): `boolean`

#### Parameters

| Name | Type |
| :------ | :------ |
| `range` | [`NumericRange`](cognite_reveal.NumericRange.md) |

#### Returns

`boolean`

#### Defined in

[packages/utilities/src/NumericRange.ts:61](https://github.com/cognitedata/reveal/blob/71be00fcc/viewer/packages/utilities/src/NumericRange.ts#L61)

___

### toArray

 **toArray**(): `number`[]

#### Returns

`number`[]

#### Defined in

[packages/utilities/src/NumericRange.ts:30](https://github.com/cognitedata/reveal/blob/71be00fcc/viewer/packages/utilities/src/NumericRange.ts#L30)

___

### toString

 **toString**(): `string`

#### Returns

`string`

#### Defined in

[packages/utilities/src/NumericRange.ts:78](https://github.com/cognitedata/reveal/blob/71be00fcc/viewer/packages/utilities/src/NumericRange.ts#L78)

___

### union

 **union**(`range`): [`NumericRange`](cognite_reveal.NumericRange.md)

#### Parameters

| Name | Type |
| :------ | :------ |
| `range` | [`NumericRange`](cognite_reveal.NumericRange.md) |

#### Returns

[`NumericRange`](cognite_reveal.NumericRange.md)

#### Defined in

[packages/utilities/src/NumericRange.ts:65](https://github.com/cognitedata/reveal/blob/71be00fcc/viewer/packages/utilities/src/NumericRange.ts#L65)

___

### values

 **values**(): `Generator`\<`number`, `any`, `unknown`\>

#### Returns

`Generator`\<`number`, `any`, `unknown`\>

#### Defined in

[packages/utilities/src/NumericRange.ts:24](https://github.com/cognitedata/reveal/blob/71be00fcc/viewer/packages/utilities/src/NumericRange.ts#L24)

___

### createFromInterval

 `Static` **createFromInterval**(`from`, `toInclusive`): [`NumericRange`](cognite_reveal.NumericRange.md)

#### Parameters

| Name | Type |
| :------ | :------ |
| `from` | `number` |
| `toInclusive` | `number` |

#### Returns

[`NumericRange`](cognite_reveal.NumericRange.md)

#### Defined in

[packages/utilities/src/NumericRange.ts:20](https://github.com/cognitedata/reveal/blob/71be00fcc/viewer/packages/utilities/src/NumericRange.ts#L20)

___

### isNumericRange

 `Static` **isNumericRange**(`value`): value is NumericRange

#### Parameters

| Name | Type |
| :------ | :------ |
| `value` | `any` |

#### Returns

value is NumericRange

#### Defined in

[packages/utilities/src/NumericRange.ts:82](https://github.com/cognitedata/reveal/blob/71be00fcc/viewer/packages/utilities/src/NumericRange.ts#L82)


<!-- SOURCE_END: reveal/documentation\versioned_docs\version-3.x\api\classes\cognite_reveal.NumericRange.md -->

================================================================================


<!-- SOURCE_START: reveal/documentation\versioned_docs\version-3.x\api\classes\cognite_reveal.PropertyFilterNodeCollection.md -->
## File: reveal/documentation\versioned_docs\version-3.x\api\classes\cognite_reveal.PropertyFilterNodeCollection.md

---
id: "cognite_reveal.PropertyFilterNodeCollection"
title: "Class: PropertyFilterNodeCollection"
sidebar_label: "PropertyFilterNodeCollection"
custom_edit_url: null
---

[@cognite/reveal](../modules/cognite_reveal.md).PropertyFilterNodeCollection

Represents a set of nodes that has matching node properties to a provided filter. Note that
a node is considered to match if it or a [NodeCollection](cognite_reveal.NodeCollection.md) ancestors match the filter.

## Hierarchy

- [`NodeCollection`](cognite_reveal.NodeCollection.md)

   **`PropertyFilterNodeCollection`**

## Constructors

### constructor

 **new PropertyFilterNodeCollection**(`client`, `model`, `options?`)

#### Parameters

| Name | Type |
| :------ | :------ |
| `client` | `default` |
| `model` | [`CdfModelNodeCollectionDataProvider`](../interfaces/cognite_reveal.CdfModelNodeCollectionDataProvider.md) |
| `options` | `PropertyFilterNodeCollectionOptions` |

#### Overrides

NodeCollection.constructor

#### Defined in

[packages/cad-styling/src/PropertyFilterNodeCollection.ts:53](https://github.com/cognitedata/reveal/blob/71be00fcc/viewer/packages/cad-styling/src/PropertyFilterNodeCollection.ts#L53)

## Properties

### classToken

 `Static` `Readonly` **classToken**: ``"PropertyFilterNodeCollection"``

#### Defined in

[packages/cad-styling/src/PropertyFilterNodeCollection.ts:38](https://github.com/cognitedata/reveal/blob/71be00fcc/viewer/packages/cad-styling/src/PropertyFilterNodeCollection.ts#L38)

## Accessors

### classToken

 `get` **classToken**(): `string`

#### Returns

`string`

#### Inherited from

NodeCollection.classToken

#### Defined in

[packages/cad-styling/src/NodeCollection.ts:23](https://github.com/cognitedata/reveal/blob/71be00fcc/viewer/packages/cad-styling/src/NodeCollection.ts#L23)

___

### isLoading

 `get` **isLoading**(): `boolean`

#### Returns

`boolean`

#### Overrides

NodeCollection.isLoading

#### Defined in

[packages/cad-styling/src/PropertyFilterNodeCollection.ts:64](https://github.com/cognitedata/reveal/blob/71be00fcc/viewer/packages/cad-styling/src/PropertyFilterNodeCollection.ts#L64)

## Methods

### clear

 **clear**(): `void`

Clears the node collection and interrupts any ongoing operations.

#### Returns

`void`

#### Overrides

[NodeCollection](cognite_reveal.NodeCollection.md).[clear](cognite_reveal.NodeCollection.md#clear)

#### Defined in

[packages/cad-styling/src/PropertyFilterNodeCollection.ts:126](https://github.com/cognitedata/reveal/blob/71be00fcc/viewer/packages/cad-styling/src/PropertyFilterNodeCollection.ts#L126)

___

### executeFilter

 **executeFilter**(`filter`): `Promise`\<`void`\>

Populates the node collection with nodes matching the provided filter. This will replace
the current nodes held by the filter.

**`example`**
```
set.executeFilter({ 'PDMS': { 'Module': 'AQ550' }});
```

#### Parameters

| Name | Type | Description |
| :------ | :------ | :------ |
| `filter` | `Object` | A filter for matching node properties. |

#### Returns

`Promise`\<`void`\>

#### Defined in

[packages/cad-styling/src/PropertyFilterNodeCollection.ts:77](https://github.com/cognitedata/reveal/blob/71be00fcc/viewer/packages/cad-styling/src/PropertyFilterNodeCollection.ts#L77)

___

### getAreas

 **getAreas**(): [`AreaCollection`](../interfaces/cognite_reveal.AreaCollection.md)

Returns areas surrounding the nodes in the collection. The areas
are boxes in "ThreeJS coordinates". Note that not all
implementations supports this.

#### Returns

[`AreaCollection`](../interfaces/cognite_reveal.AreaCollection.md)

#### Overrides

[NodeCollection](cognite_reveal.NodeCollection.md).[getAreas](cognite_reveal.NodeCollection.md#getareas)

#### Defined in

[packages/cad-styling/src/PropertyFilterNodeCollection.ts:138](https://github.com/cognitedata/reveal/blob/71be00fcc/viewer/packages/cad-styling/src/PropertyFilterNodeCollection.ts#L138)

___

### getIndexSet

 **getIndexSet**(): [`IndexSet`](cognite_reveal.IndexSet.md)

#### Returns

[`IndexSet`](cognite_reveal.IndexSet.md)

#### Overrides

[NodeCollection](cognite_reveal.NodeCollection.md).[getIndexSet](cognite_reveal.NodeCollection.md#getindexset)

#### Defined in

[packages/cad-styling/src/PropertyFilterNodeCollection.ts:134](https://github.com/cognitedata/reveal/blob/71be00fcc/viewer/packages/cad-styling/src/PropertyFilterNodeCollection.ts#L134)

___

### off

 **off**(`event`, `listener`): `void`

#### Parameters

| Name | Type |
| :------ | :------ |
| `event` | ``"changed"`` |
| `listener` | () => `void` |

#### Returns

`void`

#### Inherited from

[NodeCollection](cognite_reveal.NodeCollection.md).[off](cognite_reveal.NodeCollection.md#off)

#### Defined in

[packages/cad-styling/src/NodeCollection.ts:32](https://github.com/cognitedata/reveal/blob/71be00fcc/viewer/packages/cad-styling/src/NodeCollection.ts#L32)

___

### on

 **on**(`event`, `listener`): `void`

#### Parameters

| Name | Type |
| :------ | :------ |
| `event` | ``"changed"`` |
| `listener` | () => `void` |

#### Returns

`void`

#### Inherited from

[NodeCollection](cognite_reveal.NodeCollection.md).[on](cognite_reveal.NodeCollection.md#on)

#### Defined in

[packages/cad-styling/src/NodeCollection.ts:27](https://github.com/cognitedata/reveal/blob/71be00fcc/viewer/packages/cad-styling/src/NodeCollection.ts#L27)

___

### serialize

 **serialize**(): [`SerializedNodeCollection`](../modules/cognite_reveal.md#serializednodecollection)

#### Returns

[`SerializedNodeCollection`](../modules/cognite_reveal.md#serializednodecollection)

#### Overrides

[NodeCollection](cognite_reveal.NodeCollection.md).[serialize](cognite_reveal.NodeCollection.md#serialize)

#### Defined in

[packages/cad-styling/src/PropertyFilterNodeCollection.ts:142](https://github.com/cognitedata/reveal/blob/71be00fcc/viewer/packages/cad-styling/src/PropertyFilterNodeCollection.ts#L142)


<!-- SOURCE_END: reveal/documentation\versioned_docs\version-3.x\api\classes\cognite_reveal.PropertyFilterNodeCollection.md -->

================================================================================


<!-- SOURCE_START: reveal/documentation\versioned_docs\version-3.x\api\classes\cognite_reveal.SinglePropertyFilterNodeCollection.md -->
## File: reveal/documentation\versioned_docs\version-3.x\api\classes\cognite_reveal.SinglePropertyFilterNodeCollection.md

---
id: "cognite_reveal.SinglePropertyFilterNodeCollection"
title: "Class: SinglePropertyFilterNodeCollection"
sidebar_label: "SinglePropertyFilterNodeCollection"
custom_edit_url: null
---

[@cognite/reveal](../modules/cognite_reveal.md).SinglePropertyFilterNodeCollection

Node collection that filters nodes based on a node property from a list of values, similarly to how
`SELECT ... IN (...)` works. This is useful when looking up nodes based on a list of identifiers,
nodes within a set of areas or systems. The node set is optimized for matching with properties with
a large number of values (i.e. thousands).

## Hierarchy

- [`NodeCollection`](cognite_reveal.NodeCollection.md)

   **`SinglePropertyFilterNodeCollection`**

## Constructors

### constructor

 **new SinglePropertyFilterNodeCollection**(`client`, `model`, `options?`)

Construct a new node set.

#### Parameters

| Name | Type | Description |
| :------ | :------ | :------ |
| `client` | `default` | \{@link CogniteClient} authenticated to the project the model is loaded from. |
| `model` | [`CdfModelNodeCollectionDataProvider`](../interfaces/cognite_reveal.CdfModelNodeCollectionDataProvider.md) | CAD model. |
| `options` | `PropertyFilterNodeCollectionOptions` |  |

#### Overrides

NodeCollection.constructor

#### Defined in

[packages/cad-styling/src/SinglePropertyFilterNodeCollection.ts:50](https://github.com/cognitedata/reveal/blob/71be00fcc/viewer/packages/cad-styling/src/SinglePropertyFilterNodeCollection.ts#L50)

## Properties

### classToken

 `Static` `Readonly` **classToken**: ``"SinglePropertyNodeCollection"``

#### Defined in

[packages/cad-styling/src/SinglePropertyFilterNodeCollection.ts:29](https://github.com/cognitedata/reveal/blob/71be00fcc/viewer/packages/cad-styling/src/SinglePropertyFilterNodeCollection.ts#L29)

## Accessors

### classToken

 `get` **classToken**(): `string`

#### Returns

`string`

#### Inherited from

NodeCollection.classToken

#### Defined in

[packages/cad-styling/src/NodeCollection.ts:23](https://github.com/cognitedata/reveal/blob/71be00fcc/viewer/packages/cad-styling/src/NodeCollection.ts#L23)

___

### isLoading

 `get` **isLoading**(): `boolean`

#### Returns

`boolean`

#### Overrides

NodeCollection.isLoading

#### Defined in

[packages/cad-styling/src/SinglePropertyFilterNodeCollection.ts:61](https://github.com/cognitedata/reveal/blob/71be00fcc/viewer/packages/cad-styling/src/SinglePropertyFilterNodeCollection.ts#L61)

## Methods

### clear

 **clear**(): `void`

Clears the node set and interrupts any ongoing operations.

#### Returns

`void`

#### Overrides

[NodeCollection](cognite_reveal.NodeCollection.md).[clear](cognite_reveal.NodeCollection.md#clear)

#### Defined in

[packages/cad-styling/src/SinglePropertyFilterNodeCollection.ts:125](https://github.com/cognitedata/reveal/blob/71be00fcc/viewer/packages/cad-styling/src/SinglePropertyFilterNodeCollection.ts#L125)

___

### executeFilter

 **executeFilter**(`propertyCategory`, `propertyKey`, `propertyValues`): `Promise`\<`void`\>

Execute filter asynchronously, replacing any existing filter active. When \{@link propertyValues}
contains more than 1000 elements, the operation will be split into multiple batches that
are executed in parallel. Note that when providing a \{@link PropertyFilterNodeCollectionOptions.requestPartitions}
during construction of the node set, the total number of batches will be requestPartitions*numberOfBatches.

#### Parameters

| Name | Type | Description |
| :------ | :------ | :------ |
| `propertyCategory` | `string` | Node property category, e.g. `'PDMS'`. |
| `propertyKey` | `string` | Node property key, e.g. `':FU'`. |
| `propertyValues` | `string`[] | Lookup values, e.g. `["AR100APG539","AP500INF534","AP400INF553", ...]` |

#### Returns

`Promise`\<`void`\>

#### Defined in

[packages/cad-styling/src/SinglePropertyFilterNodeCollection.ts:75](https://github.com/cognitedata/reveal/blob/71be00fcc/viewer/packages/cad-styling/src/SinglePropertyFilterNodeCollection.ts#L75)

___

### getAreas

 **getAreas**(): [`AreaCollection`](../interfaces/cognite_reveal.AreaCollection.md)

Returns areas surrounding the nodes in the collection. The areas
are boxes in "ThreeJS coordinates". Note that not all
implementations supports this.

#### Returns

[`AreaCollection`](../interfaces/cognite_reveal.AreaCollection.md)

#### Overrides

[NodeCollection](cognite_reveal.NodeCollection.md).[getAreas](cognite_reveal.NodeCollection.md#getareas)

#### Defined in

[packages/cad-styling/src/SinglePropertyFilterNodeCollection.ts:137](https://github.com/cognitedata/reveal/blob/71be00fcc/viewer/packages/cad-styling/src/SinglePropertyFilterNodeCollection.ts#L137)

___

### getIndexSet

 **getIndexSet**(): [`IndexSet`](cognite_reveal.IndexSet.md)

#### Returns

[`IndexSet`](cognite_reveal.IndexSet.md)

#### Overrides

[NodeCollection](cognite_reveal.NodeCollection.md).[getIndexSet](cognite_reveal.NodeCollection.md#getindexset)

#### Defined in

[packages/cad-styling/src/SinglePropertyFilterNodeCollection.ts:133](https://github.com/cognitedata/reveal/blob/71be00fcc/viewer/packages/cad-styling/src/SinglePropertyFilterNodeCollection.ts#L133)

___

### off

 **off**(`event`, `listener`): `void`

#### Parameters

| Name | Type |
| :------ | :------ |
| `event` | ``"changed"`` |
| `listener` | () => `void` |

#### Returns

`void`

#### Inherited from

[NodeCollection](cognite_reveal.NodeCollection.md).[off](cognite_reveal.NodeCollection.md#off)

#### Defined in

[packages/cad-styling/src/NodeCollection.ts:32](https://github.com/cognitedata/reveal/blob/71be00fcc/viewer/packages/cad-styling/src/NodeCollection.ts#L32)

___

### on

 **on**(`event`, `listener`): `void`

#### Parameters

| Name | Type |
| :------ | :------ |
| `event` | ``"changed"`` |
| `listener` | () => `void` |

#### Returns

`void`

#### Inherited from

[NodeCollection](cognite_reveal.NodeCollection.md).[on](cognite_reveal.NodeCollection.md#on)

#### Defined in

[packages/cad-styling/src/NodeCollection.ts:27](https://github.com/cognitedata/reveal/blob/71be00fcc/viewer/packages/cad-styling/src/NodeCollection.ts#L27)

___

### serialize

 **serialize**(): [`SerializedNodeCollection`](../modules/cognite_reveal.md#serializednodecollection)

#### Returns

[`SerializedNodeCollection`](../modules/cognite_reveal.md#serializednodecollection)

#### Overrides

[NodeCollection](cognite_reveal.NodeCollection.md).[serialize](cognite_reveal.NodeCollection.md#serialize)

#### Defined in

[packages/cad-styling/src/SinglePropertyFilterNodeCollection.ts:147](https://github.com/cognitedata/reveal/blob/71be00fcc/viewer/packages/cad-styling/src/SinglePropertyFilterNodeCollection.ts#L147)


<!-- SOURCE_END: reveal/documentation\versioned_docs\version-3.x\api\classes\cognite_reveal.SinglePropertyFilterNodeCollection.md -->

================================================================================


<!-- SOURCE_START: reveal/documentation\versioned_docs\version-3.x\api\classes\cognite_reveal.TreeIndexNodeCollection.md -->
## File: reveal/documentation\versioned_docs\version-3.x\api\classes\cognite_reveal.TreeIndexNodeCollection.md

---
id: "cognite_reveal.TreeIndexNodeCollection"
title: "Class: TreeIndexNodeCollection"
sidebar_label: "TreeIndexNodeCollection"
custom_edit_url: null
---

[@cognite/reveal](../modules/cognite_reveal.md).TreeIndexNodeCollection

Node collection that holds a set of nodes defined by a set of tree indices.

## Hierarchy

- [`NodeCollection`](cognite_reveal.NodeCollection.md)

   **`TreeIndexNodeCollection`**

## Constructors

### constructor

 **new TreeIndexNodeCollection**(`treeIndexSet?`)

#### Parameters

| Name | Type |
| :------ | :------ |
| `treeIndexSet?` | [`IndexSet`](cognite_reveal.IndexSet.md) |

#### Overrides

NodeCollection.constructor

#### Defined in

[packages/cad-styling/src/TreeIndexNodeCollection.ts:23](https://github.com/cognitedata/reveal/blob/71be00fcc/viewer/packages/cad-styling/src/TreeIndexNodeCollection.ts#L23)

 **new TreeIndexNodeCollection**(`treeIndices?`)

#### Parameters

| Name | Type |
| :------ | :------ |
| `treeIndices?` | `Iterable`\<`number`\> |

#### Overrides

NodeCollection.constructor

#### Defined in

[packages/cad-styling/src/TreeIndexNodeCollection.ts:24](https://github.com/cognitedata/reveal/blob/71be00fcc/viewer/packages/cad-styling/src/TreeIndexNodeCollection.ts#L24)

 **new TreeIndexNodeCollection**(`treeIndexRange?`)

#### Parameters

| Name | Type |
| :------ | :------ |
| `treeIndexRange?` | [`NumericRange`](cognite_reveal.NumericRange.md) |

#### Overrides

NodeCollection.constructor

#### Defined in

[packages/cad-styling/src/TreeIndexNodeCollection.ts:25](https://github.com/cognitedata/reveal/blob/71be00fcc/viewer/packages/cad-styling/src/TreeIndexNodeCollection.ts#L25)

## Properties

### classToken

 `Static` `Readonly` **classToken**: ``"TreeIndexNodeCollection"``

#### Defined in

[packages/cad-styling/src/TreeIndexNodeCollection.ts:18](https://github.com/cognitedata/reveal/blob/71be00fcc/viewer/packages/cad-styling/src/TreeIndexNodeCollection.ts#L18)

## Accessors

### classToken

 `get` **classToken**(): `string`

#### Returns

`string`

#### Inherited from

NodeCollection.classToken

#### Defined in

[packages/cad-styling/src/NodeCollection.ts:23](https://github.com/cognitedata/reveal/blob/71be00fcc/viewer/packages/cad-styling/src/NodeCollection.ts#L23)

___

### isLoading

 `get` **isLoading**(): `boolean`

#### Returns

`boolean`

#### Overrides

NodeCollection.isLoading

#### Defined in

[packages/cad-styling/src/TreeIndexNodeCollection.ts:99](https://github.com/cognitedata/reveal/blob/71be00fcc/viewer/packages/cad-styling/src/TreeIndexNodeCollection.ts#L99)

## Methods

### addAreaPoints

 **addAreaPoints**(`points`): `void`

Add points to this node collection's area set.
This effectively adds boxes of size 1x1x1 meter with the points as their centers.

#### Parameters

| Name | Type |
| :------ | :------ |
| `points` | `Vector3`[] |

#### Returns

`void`

#### Defined in

[packages/cad-styling/src/TreeIndexNodeCollection.ts:85](https://github.com/cognitedata/reveal/blob/71be00fcc/viewer/packages/cad-styling/src/TreeIndexNodeCollection.ts#L85)

___

### addAreas

 **addAreas**(`areas`): `void`

Add areas to this node collection's area set.
Nearby areas may be clustered and merged together to keep
the number of areas in the set small.

#### Parameters

| Name | Type |
| :------ | :------ |
| `areas` | `Box3`[] |

#### Returns

`void`

#### Defined in

[packages/cad-styling/src/TreeIndexNodeCollection.ts:73](https://github.com/cognitedata/reveal/blob/71be00fcc/viewer/packages/cad-styling/src/TreeIndexNodeCollection.ts#L73)

___

### clear

 **clear**(): `void`

Sets this set to hold an empty set.

#### Returns

`void`

#### Overrides

[NodeCollection](cognite_reveal.NodeCollection.md).[clear](cognite_reveal.NodeCollection.md#clear)

#### Defined in

[packages/cad-styling/src/TreeIndexNodeCollection.ts:45](https://github.com/cognitedata/reveal/blob/71be00fcc/viewer/packages/cad-styling/src/TreeIndexNodeCollection.ts#L45)

___

### clearAreas

 **clearAreas**(): `void`

#### Returns

`void`

#### Defined in

[packages/cad-styling/src/TreeIndexNodeCollection.ts:95](https://github.com/cognitedata/reveal/blob/71be00fcc/viewer/packages/cad-styling/src/TreeIndexNodeCollection.ts#L95)

___

### getAreas

 **getAreas**(): [`AreaCollection`](../interfaces/cognite_reveal.AreaCollection.md)

Returns areas surrounding the nodes in the collection. The areas
are boxes in "ThreeJS coordinates". Note that not all
implementations supports this.

#### Returns

[`AreaCollection`](../interfaces/cognite_reveal.AreaCollection.md)

#### Overrides

[NodeCollection](cognite_reveal.NodeCollection.md).[getAreas](cognite_reveal.NodeCollection.md#getareas)

#### Defined in

[packages/cad-styling/src/TreeIndexNodeCollection.ts:54](https://github.com/cognitedata/reveal/blob/71be00fcc/viewer/packages/cad-styling/src/TreeIndexNodeCollection.ts#L54)

___

### getIndexSet

 **getIndexSet**(): [`IndexSet`](cognite_reveal.IndexSet.md)

#### Returns

[`IndexSet`](cognite_reveal.IndexSet.md)

#### Overrides

[NodeCollection](cognite_reveal.NodeCollection.md).[getIndexSet](cognite_reveal.NodeCollection.md#getindexset)

#### Defined in

[packages/cad-styling/src/TreeIndexNodeCollection.ts:50](https://github.com/cognitedata/reveal/blob/71be00fcc/viewer/packages/cad-styling/src/TreeIndexNodeCollection.ts#L50)

___

### off

 **off**(`event`, `listener`): `void`

#### Parameters

| Name | Type |
| :------ | :------ |
| `event` | ``"changed"`` |
| `listener` | () => `void` |

#### Returns

`void`

#### Inherited from

[NodeCollection](cognite_reveal.NodeCollection.md).[off](cognite_reveal.NodeCollection.md#off)

#### Defined in

[packages/cad-styling/src/NodeCollection.ts:32](https://github.com/cognitedata/reveal/blob/71be00fcc/viewer/packages/cad-styling/src/NodeCollection.ts#L32)

___

### on

 **on**(`event`, `listener`): `void`

#### Parameters

| Name | Type |
| :------ | :------ |
| `event` | ``"changed"`` |
| `listener` | () => `void` |

#### Returns

`void`

#### Inherited from

[NodeCollection](cognite_reveal.NodeCollection.md).[on](cognite_reveal.NodeCollection.md#on)

#### Defined in

[packages/cad-styling/src/NodeCollection.ts:27](https://github.com/cognitedata/reveal/blob/71be00fcc/viewer/packages/cad-styling/src/NodeCollection.ts#L27)

___

### serialize

 **serialize**(): [`SerializedNodeCollection`](../modules/cognite_reveal.md#serializednodecollection)

#### Returns

[`SerializedNodeCollection`](../modules/cognite_reveal.md#serializednodecollection)

#### Overrides

[NodeCollection](cognite_reveal.NodeCollection.md).[serialize](cognite_reveal.NodeCollection.md#serialize)

#### Defined in

[packages/cad-styling/src/TreeIndexNodeCollection.ts:103](https://github.com/cognitedata/reveal/blob/71be00fcc/viewer/packages/cad-styling/src/TreeIndexNodeCollection.ts#L103)

___

### updateSet

 **updateSet**(`treeIndices`): `void`

#### Parameters

| Name | Type |
| :------ | :------ |
| `treeIndices` | [`IndexSet`](cognite_reveal.IndexSet.md) |

#### Returns

`void`

#### Defined in

[packages/cad-styling/src/TreeIndexNodeCollection.ts:37](https://github.com/cognitedata/reveal/blob/71be00fcc/viewer/packages/cad-styling/src/TreeIndexNodeCollection.ts#L37)


<!-- SOURCE_END: reveal/documentation\versioned_docs\version-3.x\api\classes\cognite_reveal.TreeIndexNodeCollection.md -->

================================================================================


<!-- SOURCE_START: reveal/documentation\versioned_docs\version-3.x\api\classes\cognite_reveal.UnionNodeCollection.md -->
## File: reveal/documentation\versioned_docs\version-3.x\api\classes\cognite_reveal.UnionNodeCollection.md

---
id: "cognite_reveal.UnionNodeCollection"
title: "Class: UnionNodeCollection"
sidebar_label: "UnionNodeCollection"
custom_edit_url: null
---

[@cognite/reveal](../modules/cognite_reveal.md).UnionNodeCollection

Node collection that takes the set union of multiple node collections.

## Hierarchy

- `CombineNodeCollectionBase`

   **`UnionNodeCollection`**

## Constructors

### constructor

 **new UnionNodeCollection**(`nodeCollections?`)

#### Parameters

| Name | Type |
| :------ | :------ |
| `nodeCollections?` | [`NodeCollection`](cognite_reveal.NodeCollection.md)[] |

#### Overrides

CombineNodeCollectionBase.constructor

#### Defined in

[packages/cad-styling/src/UnionNodeCollection.ts:21](https://github.com/cognitedata/reveal/blob/71be00fcc/viewer/packages/cad-styling/src/UnionNodeCollection.ts#L21)

## Properties

### classToken

 `Static` `Readonly` **classToken**: ``"UnionNodeCollection"``

#### Defined in

[packages/cad-styling/src/UnionNodeCollection.ts:19](https://github.com/cognitedata/reveal/blob/71be00fcc/viewer/packages/cad-styling/src/UnionNodeCollection.ts#L19)

## Accessors

### classToken

 `get` **classToken**(): `string`

#### Returns

`string`

#### Inherited from

CombineNodeCollectionBase.classToken

#### Defined in

[packages/cad-styling/src/NodeCollection.ts:23](https://github.com/cognitedata/reveal/blob/71be00fcc/viewer/packages/cad-styling/src/NodeCollection.ts#L23)

___

### isLoading

 `get` **isLoading**(): `boolean`

**`override`**

#### Returns

`boolean`

#### Inherited from

CombineNodeCollectionBase.isLoading

#### Defined in

[packages/cad-styling/src/CombineNodeCollectionBase.ts:67](https://github.com/cognitedata/reveal/blob/71be00fcc/viewer/packages/cad-styling/src/CombineNodeCollectionBase.ts#L67)

## Methods

### add

 **add**(`nodeCollection`): `void`

#### Parameters

| Name | Type |
| :------ | :------ |
| `nodeCollection` | [`NodeCollection`](cognite_reveal.NodeCollection.md) |

#### Returns

`void`

#### Inherited from

CombineNodeCollectionBase.add

#### Defined in

[packages/cad-styling/src/CombineNodeCollectionBase.ts:26](https://github.com/cognitedata/reveal/blob/71be00fcc/viewer/packages/cad-styling/src/CombineNodeCollectionBase.ts#L26)

___

### clear

 **clear**(): `void`

Clears all underlying node collections.

#### Returns

`void`

#### Inherited from

CombineNodeCollectionBase.clear

#### Defined in

[packages/cad-styling/src/CombineNodeCollectionBase.ts:46](https://github.com/cognitedata/reveal/blob/71be00fcc/viewer/packages/cad-styling/src/CombineNodeCollectionBase.ts#L46)

___

### getAreas

 **getAreas**(): [`AreaCollection`](../interfaces/cognite_reveal.AreaCollection.md)

#### Returns

[`AreaCollection`](../interfaces/cognite_reveal.AreaCollection.md)

#### Overrides

CombineNodeCollectionBase.getAreas

#### Defined in

[packages/cad-styling/src/UnionNodeCollection.ts:45](https://github.com/cognitedata/reveal/blob/71be00fcc/viewer/packages/cad-styling/src/UnionNodeCollection.ts#L45)

___

### getIndexSet

 **getIndexSet**(): [`IndexSet`](cognite_reveal.IndexSet.md)

**`override`**

#### Returns

[`IndexSet`](cognite_reveal.IndexSet.md)

#### Inherited from

CombineNodeCollectionBase.getIndexSet

#### Defined in

[packages/cad-styling/src/CombineNodeCollectionBase.ts:59](https://github.com/cognitedata/reveal/blob/71be00fcc/viewer/packages/cad-styling/src/CombineNodeCollectionBase.ts#L59)

___

### off

 **off**(`event`, `listener`): `void`

#### Parameters

| Name | Type |
| :------ | :------ |
| `event` | ``"changed"`` |
| `listener` | () => `void` |

#### Returns

`void`

#### Inherited from

CombineNodeCollectionBase.off

#### Defined in

[packages/cad-styling/src/NodeCollection.ts:32](https://github.com/cognitedata/reveal/blob/71be00fcc/viewer/packages/cad-styling/src/NodeCollection.ts#L32)

___

### on

 **on**(`event`, `listener`): `void`

#### Parameters

| Name | Type |
| :------ | :------ |
| `event` | ``"changed"`` |
| `listener` | () => `void` |

#### Returns

`void`

#### Inherited from

CombineNodeCollectionBase.on

#### Defined in

[packages/cad-styling/src/NodeCollection.ts:27](https://github.com/cognitedata/reveal/blob/71be00fcc/viewer/packages/cad-styling/src/NodeCollection.ts#L27)

___

### remove

 **remove**(`nodeCollection`): `void`

#### Parameters

| Name | Type |
| :------ | :------ |
| `nodeCollection` | [`NodeCollection`](cognite_reveal.NodeCollection.md) |

#### Returns

`void`

#### Inherited from

CombineNodeCollectionBase.remove

#### Defined in

[packages/cad-styling/src/CombineNodeCollectionBase.ts:32](https://github.com/cognitedata/reveal/blob/71be00fcc/viewer/packages/cad-styling/src/CombineNodeCollectionBase.ts#L32)

___

### serialize

 **serialize**(): [`SerializedNodeCollection`](../modules/cognite_reveal.md#serializednodecollection)

#### Returns

[`SerializedNodeCollection`](../modules/cognite_reveal.md#serializednodecollection)

#### Overrides

CombineNodeCollectionBase.serialize

#### Defined in

[packages/cad-styling/src/UnionNodeCollection.ts:25](https://github.com/cognitedata/reveal/blob/71be00fcc/viewer/packages/cad-styling/src/UnionNodeCollection.ts#L25)


<!-- SOURCE_END: reveal/documentation\versioned_docs\version-3.x\api\classes\cognite_reveal.UnionNodeCollection.md -->

================================================================================


<!-- SOURCE_START: reveal/documentation\versioned_docs\version-3.x\api\classes\cognite_reveal_extensions_datasource.CdfModelIdentifier.md -->
## File: reveal/documentation\versioned_docs\version-3.x\api\classes\cognite_reveal_extensions_datasource.CdfModelIdentifier.md

---
id: "cognite_reveal_extensions_datasource.CdfModelIdentifier"
title: "Class: CdfModelIdentifier"
sidebar_label: "CdfModelIdentifier"
custom_edit_url: null
---

[@cognite/reveal/extensions/datasource](../modules/cognite_reveal_extensions_datasource.md).CdfModelIdentifier

Identifies a 3D model stored in CDF by the combination of a modelId, a revisionId
and a format.

## Implements

- [`ModelIdentifier`](../interfaces/cognite_reveal_extensions_datasource.ModelIdentifier.md)

## Constructors

### constructor

 **new CdfModelIdentifier**(`modelId`, `revisionId`)

#### Parameters

| Name | Type |
| :------ | :------ |
| `modelId` | `number` |
| `revisionId` | `number` |

#### Defined in

[packages/modeldata-api/src/CdfModelIdentifier.ts:16](https://github.com/cognitedata/reveal/blob/71be00fcc/viewer/packages/modeldata-api/src/CdfModelIdentifier.ts#L16)

## Properties

### modelId

 `Readonly` **modelId**: `number`

#### Defined in

[packages/modeldata-api/src/CdfModelIdentifier.ts:13](https://github.com/cognitedata/reveal/blob/71be00fcc/viewer/packages/modeldata-api/src/CdfModelIdentifier.ts#L13)

___

### revealInternalId

 `Readonly` **revealInternalId**: `symbol`

Unique ID of the model.

#### Implementation of

[ModelIdentifier](../interfaces/cognite_reveal_extensions_datasource.ModelIdentifier.md).[revealInternalId](../interfaces/cognite_reveal_extensions_datasource.ModelIdentifier.md#revealinternalid)

#### Defined in

[packages/modeldata-api/src/CdfModelIdentifier.ts:11](https://github.com/cognitedata/reveal/blob/71be00fcc/viewer/packages/modeldata-api/src/CdfModelIdentifier.ts#L11)

___

### revisionId

 `Readonly` **revisionId**: `number`

#### Defined in

[packages/modeldata-api/src/CdfModelIdentifier.ts:14](https://github.com/cognitedata/reveal/blob/71be00fcc/viewer/packages/modeldata-api/src/CdfModelIdentifier.ts#L14)

## Methods

### toString

 **toString**(): `string`

#### Returns

`string`

#### Defined in

[packages/modeldata-api/src/CdfModelIdentifier.ts:22](https://github.com/cognitedata/reveal/blob/71be00fcc/viewer/packages/modeldata-api/src/CdfModelIdentifier.ts#L22)


<!-- SOURCE_END: reveal/documentation\versioned_docs\version-3.x\api\classes\cognite_reveal_extensions_datasource.CdfModelIdentifier.md -->

================================================================================


<!-- SOURCE_START: reveal/documentation\versioned_docs\version-3.x\api\classes\cognite_reveal_tools.AxisViewTool.md -->
## File: reveal/documentation\versioned_docs\version-3.x\api\classes\cognite_reveal_tools.AxisViewTool.md

---
id: "cognite_reveal_tools.AxisViewTool"
title: "Class: AxisViewTool"
sidebar_label: "AxisViewTool"
custom_edit_url: null
---

[@cognite/reveal/tools](../modules/cognite_reveal_tools.md).AxisViewTool

## Hierarchy

- [`Cognite3DViewerToolBase`](cognite_reveal_tools.Cognite3DViewerToolBase.md)

   **`AxisViewTool`**

## Constructors

### constructor

 **new AxisViewTool**(`viewer`, `config?`)

#### Parameters

| Name | Type |
| :------ | :------ |
| `viewer` | [`Cognite3DViewer`](cognite_reveal.Cognite3DViewer.md) |
| `config?` | [`AxisBoxConfig`](../modules/cognite_reveal_tools.md#axisboxconfig) |

#### Overrides

[Cognite3DViewerToolBase](cognite_reveal_tools.Cognite3DViewerToolBase.md).[constructor](cognite_reveal_tools.Cognite3DViewerToolBase.md#constructor)

#### Defined in

[packages/tools/src/AxisView/AxisViewTool.ts:42](https://github.com/cognitedata/reveal/blob/71be00fcc/viewer/packages/tools/src/AxisView/AxisViewTool.ts#L42)

## Methods

### dispose

 **dispose**(): `void`

Disposes the element and triggeres the 'disposed' event before clearing the list
of dipose-listeners.

#### Returns

`void`

#### Overrides

[Cognite3DViewerToolBase](cognite_reveal_tools.Cognite3DViewerToolBase.md).[dispose](cognite_reveal_tools.Cognite3DViewerToolBase.md#dispose)

#### Defined in

[packages/tools/src/AxisView/AxisViewTool.ts:66](https://github.com/cognitedata/reveal/blob/71be00fcc/viewer/packages/tools/src/AxisView/AxisViewTool.ts#L66)

___

### off

 **off**(`event`, `handler`): `void`

Unregisters an event handler for the 'disposed'-event.

#### Parameters

| Name | Type |
| :------ | :------ |
| `event` | ``"disposed"`` |
| `handler` | () => `void` |

#### Returns

`void`

#### Inherited from

[Cognite3DViewerToolBase](cognite_reveal_tools.Cognite3DViewerToolBase.md).[off](cognite_reveal_tools.Cognite3DViewerToolBase.md#off)

#### Defined in

[packages/tools/src/Cognite3DViewerToolBase.ts:37](https://github.com/cognitedata/reveal/blob/71be00fcc/viewer/packages/tools/src/Cognite3DViewerToolBase.ts#L37)


<!-- SOURCE_END: reveal/documentation\versioned_docs\version-3.x\api\classes\cognite_reveal_tools.AxisViewTool.md -->

================================================================================


<!-- SOURCE_START: reveal/documentation\versioned_docs\version-3.x\api\classes\cognite_reveal_tools.Cognite3DViewerToolBase.md -->
## File: reveal/documentation\versioned_docs\version-3.x\api\classes\cognite_reveal_tools.Cognite3DViewerToolBase.md

---
id: "cognite_reveal_tools.Cognite3DViewerToolBase"
title: "Class: Cognite3DViewerToolBase"
sidebar_label: "Cognite3DViewerToolBase"
custom_edit_url: null
---

[@cognite/reveal/tools](../modules/cognite_reveal_tools.md).Cognite3DViewerToolBase

Base class for tools attaching to a @see \{@link Cognite3DViewer}.

## Hierarchy

- **`Cognite3DViewerToolBase`**

   [`HtmlOverlayTool`](cognite_reveal_tools.HtmlOverlayTool.md)

   [`ExplodedViewTool`](cognite_reveal_tools.ExplodedViewTool.md)

   [`DebugCameraTool`](cognite_reveal_tools.DebugCameraTool.md)

   [`AxisViewTool`](cognite_reveal_tools.AxisViewTool.md)

   [`GeomapTool`](cognite_reveal_tools.GeomapTool.md)

   [`TimelineTool`](cognite_reveal_tools.TimelineTool.md)

   [`DebugLoadedSectorsTool`](cognite_reveal_tools.DebugLoadedSectorsTool.md)

   [`MeasurementTool`](cognite_reveal_tools.MeasurementTool.md)

## Constructors

### constructor

 **new Cognite3DViewerToolBase**()

## Methods

### dispose

 **dispose**(): `void`

Disposes the element and triggeres the 'disposed' event before clearing the list
of dipose-listeners.

#### Returns

`void`

#### Defined in

[packages/tools/src/Cognite3DViewerToolBase.ts:52](https://github.com/cognitedata/reveal/blob/71be00fcc/viewer/packages/tools/src/Cognite3DViewerToolBase.ts#L52)

___

### off

 **off**(`event`, `handler`): `void`

Unregisters an event handler for the 'disposed'-event.

#### Parameters

| Name | Type |
| :------ | :------ |
| `event` | ``"disposed"`` |
| `handler` | () => `void` |

#### Returns

`void`

#### Defined in

[packages/tools/src/Cognite3DViewerToolBase.ts:37](https://github.com/cognitedata/reveal/blob/71be00fcc/viewer/packages/tools/src/Cognite3DViewerToolBase.ts#L37)


<!-- SOURCE_END: reveal/documentation\versioned_docs\version-3.x\api\classes\cognite_reveal_tools.Cognite3DViewerToolBase.md -->

================================================================================


<!-- SOURCE_START: reveal/documentation\versioned_docs\version-3.x\api\classes\cognite_reveal_tools.DebugCameraTool.md -->
## File: reveal/documentation\versioned_docs\version-3.x\api\classes\cognite_reveal_tools.DebugCameraTool.md

---
id: "cognite_reveal_tools.DebugCameraTool"
title: "Class: DebugCameraTool"
sidebar_label: "DebugCameraTool"
custom_edit_url: null
---

[@cognite/reveal/tools](../modules/cognite_reveal_tools.md).DebugCameraTool

## Hierarchy

- [`Cognite3DViewerToolBase`](cognite_reveal_tools.Cognite3DViewerToolBase.md)

   **`DebugCameraTool`**

## Constructors

### constructor

 **new DebugCameraTool**(`viewer`)

#### Parameters

| Name | Type |
| :------ | :------ |
| `viewer` | [`Cognite3DViewer`](cognite_reveal.Cognite3DViewer.md) |

#### Overrides

[Cognite3DViewerToolBase](cognite_reveal_tools.Cognite3DViewerToolBase.md).[constructor](cognite_reveal_tools.Cognite3DViewerToolBase.md#constructor)

#### Defined in

[packages/tools/src/DebugCameraTool.ts:20](https://github.com/cognitedata/reveal/blob/71be00fcc/viewer/packages/tools/src/DebugCameraTool.ts#L20)

## Methods

### dispose

 **dispose**(): `void`

Removes all elements and detaches from the viewer.

**`override`**

#### Returns

`void`

#### Overrides

[Cognite3DViewerToolBase](cognite_reveal_tools.Cognite3DViewerToolBase.md).[dispose](cognite_reveal_tools.Cognite3DViewerToolBase.md#dispose)

#### Defined in

[packages/tools/src/DebugCameraTool.ts:32](https://github.com/cognitedata/reveal/blob/71be00fcc/viewer/packages/tools/src/DebugCameraTool.ts#L32)

___

### hideCameraHelper

 **hideCameraHelper**(): `void`

#### Returns

`void`

#### Defined in

[packages/tools/src/DebugCameraTool.ts:43](https://github.com/cognitedata/reveal/blob/71be00fcc/viewer/packages/tools/src/DebugCameraTool.ts#L43)

___

### off

 **off**(`event`, `handler`): `void`

Unregisters an event handler for the 'disposed'-event.

#### Parameters

| Name | Type |
| :------ | :------ |
| `event` | ``"disposed"`` |
| `handler` | () => `void` |

#### Returns

`void`

#### Inherited from

[Cognite3DViewerToolBase](cognite_reveal_tools.Cognite3DViewerToolBase.md).[off](cognite_reveal_tools.Cognite3DViewerToolBase.md#off)

#### Defined in

[packages/tools/src/Cognite3DViewerToolBase.ts:37](https://github.com/cognitedata/reveal/blob/71be00fcc/viewer/packages/tools/src/Cognite3DViewerToolBase.ts#L37)

___

### showCameraHelper

 **showCameraHelper**(): `void`

#### Returns

`void`

#### Defined in

[packages/tools/src/DebugCameraTool.ts:37](https://github.com/cognitedata/reveal/blob/71be00fcc/viewer/packages/tools/src/DebugCameraTool.ts#L37)


<!-- SOURCE_END: reveal/documentation\versioned_docs\version-3.x\api\classes\cognite_reveal_tools.DebugCameraTool.md -->

================================================================================


<!-- SOURCE_START: reveal/documentation\versioned_docs\version-3.x\api\classes\cognite_reveal_tools.DebugLoadedSectorsTool.md -->
## File: reveal/documentation\versioned_docs\version-3.x\api\classes\cognite_reveal_tools.DebugLoadedSectorsTool.md

---
id: "cognite_reveal_tools.DebugLoadedSectorsTool"
title: "Class: DebugLoadedSectorsTool"
sidebar_label: "DebugLoadedSectorsTool"
custom_edit_url: null
---

[@cognite/reveal/tools](../modules/cognite_reveal_tools.md).DebugLoadedSectorsTool

## Hierarchy

- [`Cognite3DViewerToolBase`](cognite_reveal_tools.Cognite3DViewerToolBase.md)

   **`DebugLoadedSectorsTool`**

## Constructors

### constructor

 **new DebugLoadedSectorsTool**(`viewer`, `options?`)

#### Parameters

| Name | Type |
| :------ | :------ |
| `viewer` | [`Cognite3DViewer`](cognite_reveal.Cognite3DViewer.md) |
| `options` | [`DebugLoadedSectorsToolOptions`](../modules/cognite_reveal_tools.md#debugloadedsectorstooloptions) |

#### Overrides

[Cognite3DViewerToolBase](cognite_reveal_tools.Cognite3DViewerToolBase.md).[constructor](cognite_reveal_tools.Cognite3DViewerToolBase.md#constructor)

#### Defined in

[packages/tools/src/DebugLoadedSectorsTool.ts:28](https://github.com/cognitedata/reveal/blob/71be00fcc/viewer/packages/tools/src/DebugLoadedSectorsTool.ts#L28)

## Methods

### dispose

 **dispose**(): `void`

Disposes the element and triggeres the 'disposed' event before clearing the list
of dipose-listeners.

#### Returns

`void`

#### Overrides

[Cognite3DViewerToolBase](cognite_reveal_tools.Cognite3DViewerToolBase.md).[dispose](cognite_reveal_tools.Cognite3DViewerToolBase.md#dispose)

#### Defined in

[packages/tools/src/DebugLoadedSectorsTool.ts:48](https://github.com/cognitedata/reveal/blob/71be00fcc/viewer/packages/tools/src/DebugLoadedSectorsTool.ts#L48)

___

### off

 **off**(`event`, `handler`): `void`

Unregisters an event handler for the 'disposed'-event.

#### Parameters

| Name | Type |
| :------ | :------ |
| `event` | ``"disposed"`` |
| `handler` | () => `void` |

#### Returns

`void`

#### Inherited from

[Cognite3DViewerToolBase](cognite_reveal_tools.Cognite3DViewerToolBase.md).[off](cognite_reveal_tools.Cognite3DViewerToolBase.md#off)

#### Defined in

[packages/tools/src/Cognite3DViewerToolBase.ts:37](https://github.com/cognitedata/reveal/blob/71be00fcc/viewer/packages/tools/src/Cognite3DViewerToolBase.ts#L37)

___

### setOptions

 **setOptions**(`options`): `void`

#### Parameters

| Name | Type |
| :------ | :------ |
| `options` | [`DebugLoadedSectorsToolOptions`](../modules/cognite_reveal_tools.md#debugloadedsectorstooloptions) |

#### Returns

`void`

#### Defined in

[packages/tools/src/DebugLoadedSectorsTool.ts:36](https://github.com/cognitedata/reveal/blob/71be00fcc/viewer/packages/tools/src/DebugLoadedSectorsTool.ts#L36)

___

### showSectorBoundingBoxes

 **showSectorBoundingBoxes**(`model`): `void`

#### Parameters

| Name | Type |
| :------ | :------ |
| `model` | [`Cognite3DModel`](cognite_reveal.Cognite3DModel.md) |

#### Returns

`void`

#### Defined in

[packages/tools/src/DebugLoadedSectorsTool.ts:52](https://github.com/cognitedata/reveal/blob/71be00fcc/viewer/packages/tools/src/DebugLoadedSectorsTool.ts#L52)


<!-- SOURCE_END: reveal/documentation\versioned_docs\version-3.x\api\classes\cognite_reveal_tools.DebugLoadedSectorsTool.md -->

================================================================================


<!-- SOURCE_START: reveal/documentation\versioned_docs\version-3.x\api\classes\cognite_reveal_tools.ExplodedViewTool.md -->
## File: reveal/documentation\versioned_docs\version-3.x\api\classes\cognite_reveal_tools.ExplodedViewTool.md

---
id: "cognite_reveal_tools.ExplodedViewTool"
title: "Class: ExplodedViewTool"
sidebar_label: "ExplodedViewTool"
custom_edit_url: null
---

[@cognite/reveal/tools](../modules/cognite_reveal_tools.md).ExplodedViewTool

## Hierarchy

- [`Cognite3DViewerToolBase`](cognite_reveal_tools.Cognite3DViewerToolBase.md)

   **`ExplodedViewTool`**

## Constructors

### constructor

 **new ExplodedViewTool**(`treeIndex`, `cadModel`)

#### Parameters

| Name | Type |
| :------ | :------ |
| `treeIndex` | `number` |
| `cadModel` | [`Cognite3DModel`](cognite_reveal.Cognite3DModel.md) |

#### Overrides

[Cognite3DViewerToolBase](cognite_reveal_tools.Cognite3DViewerToolBase.md).[constructor](cognite_reveal_tools.Cognite3DViewerToolBase.md#constructor)

#### Defined in

[packages/tools/src/ExplodedViewTool.ts:18](https://github.com/cognitedata/reveal/blob/71be00fcc/viewer/packages/tools/src/ExplodedViewTool.ts#L18)

## Accessors

### readyPromise

 `get` **readyPromise**(): `Promise`\<`void`\>

#### Returns

`Promise`\<`void`\>

#### Defined in

[packages/tools/src/ExplodedViewTool.ts:14](https://github.com/cognitedata/reveal/blob/71be00fcc/viewer/packages/tools/src/ExplodedViewTool.ts#L14)

## Methods

### dispose

 **dispose**(): `void`

Disposes the element and triggeres the 'disposed' event before clearing the list
of dipose-listeners.

#### Returns

`void`

#### Inherited from

[Cognite3DViewerToolBase](cognite_reveal_tools.Cognite3DViewerToolBase.md).[dispose](cognite_reveal_tools.Cognite3DViewerToolBase.md#dispose)

#### Defined in

[packages/tools/src/Cognite3DViewerToolBase.ts:52](https://github.com/cognitedata/reveal/blob/71be00fcc/viewer/packages/tools/src/Cognite3DViewerToolBase.ts#L52)

___

### expand

 **expand**(`expandRadius`): `Promise`\<`void`\>

#### Parameters

| Name | Type |
| :------ | :------ |
| `expandRadius` | `number` |

#### Returns

`Promise`\<`void`\>

#### Defined in

[packages/tools/src/ExplodedViewTool.ts:29](https://github.com/cognitedata/reveal/blob/71be00fcc/viewer/packages/tools/src/ExplodedViewTool.ts#L29)

___

### off

 **off**(`event`, `handler`): `void`

Unregisters an event handler for the 'disposed'-event.

#### Parameters

| Name | Type |
| :------ | :------ |
| `event` | ``"disposed"`` |
| `handler` | () => `void` |

#### Returns

`void`

#### Inherited from

[Cognite3DViewerToolBase](cognite_reveal_tools.Cognite3DViewerToolBase.md).[off](cognite_reveal_tools.Cognite3DViewerToolBase.md#off)

#### Defined in

[packages/tools/src/Cognite3DViewerToolBase.ts:37](https://github.com/cognitedata/reveal/blob/71be00fcc/viewer/packages/tools/src/Cognite3DViewerToolBase.ts#L37)

___

### reset

 **reset**(): `void`

#### Returns

`void`

#### Defined in

[packages/tools/src/ExplodedViewTool.ts:46](https://github.com/cognitedata/reveal/blob/71be00fcc/viewer/packages/tools/src/ExplodedViewTool.ts#L46)


<!-- SOURCE_END: reveal/documentation\versioned_docs\version-3.x\api\classes\cognite_reveal_tools.ExplodedViewTool.md -->

================================================================================


<!-- SOURCE_START: reveal/documentation\versioned_docs\version-3.x\api\classes\cognite_reveal_tools.GeomapTool.md -->
## File: reveal/documentation\versioned_docs\version-3.x\api\classes\cognite_reveal_tools.GeomapTool.md

---
id: "cognite_reveal_tools.GeomapTool"
title: "Class: GeomapTool"
sidebar_label: "GeomapTool"
custom_edit_url: null
---

[@cognite/reveal/tools](../modules/cognite_reveal_tools.md).GeomapTool

The `GeomapTool` is a geolocation for the models and allow the user to place them on the maps.

## Hierarchy

- [`Cognite3DViewerToolBase`](cognite_reveal_tools.Cognite3DViewerToolBase.md)

   **`GeomapTool`**

## Constructors

### constructor

 **new GeomapTool**(`viewer`, `config`)

#### Parameters

| Name | Type |
| :------ | :------ |
| `viewer` | [`Cognite3DViewer`](cognite_reveal.Cognite3DViewer.md) |
| `config` | [`MapConfig`](../modules/cognite_reveal_tools.md#mapconfig) |

#### Overrides

[Cognite3DViewerToolBase](cognite_reveal_tools.Cognite3DViewerToolBase.md).[constructor](cognite_reveal_tools.Cognite3DViewerToolBase.md#constructor)

#### Defined in

[packages/tools/src/Geomap/GeomapTool.ts:19](https://github.com/cognitedata/reveal/blob/71be00fcc/viewer/packages/tools/src/Geomap/GeomapTool.ts#L19)

## Methods

### dispose

 **dispose**(): `void`

Disposes the element and triggeres the 'disposed' event before clearing the list
of dipose-listeners.

#### Returns

`void`

#### Overrides

[Cognite3DViewerToolBase](cognite_reveal_tools.Cognite3DViewerToolBase.md).[dispose](cognite_reveal_tools.Cognite3DViewerToolBase.md#dispose)

#### Defined in

[packages/tools/src/Geomap/GeomapTool.ts:36](https://github.com/cognitedata/reveal/blob/71be00fcc/viewer/packages/tools/src/Geomap/GeomapTool.ts#L36)

___

### latLongToWorldCoordinates

 **latLongToWorldCoordinates**(`latLong`): `Object`

Converts Latitude & Longitude into Vector2 World coordinates on the Map

#### Parameters

| Name | Type | Description |
| :------ | :------ | :------ |
| `latLong` | `LatLongPosition` | Latitude & Longitude |

#### Returns

`Object`

| Name | Type |
| :------ | :------ |
| `x` | `number` |
| `y` | `number` |

#### Defined in

[packages/tools/src/Geomap/GeomapTool.ts:32](https://github.com/cognitedata/reveal/blob/71be00fcc/viewer/packages/tools/src/Geomap/GeomapTool.ts#L32)

___

### off

 **off**(`event`, `handler`): `void`

Unregisters an event handler for the 'disposed'-event.

#### Parameters

| Name | Type |
| :------ | :------ |
| `event` | ``"disposed"`` |
| `handler` | () => `void` |

#### Returns

`void`

#### Inherited from

[Cognite3DViewerToolBase](cognite_reveal_tools.Cognite3DViewerToolBase.md).[off](cognite_reveal_tools.Cognite3DViewerToolBase.md#off)

#### Defined in

[packages/tools/src/Cognite3DViewerToolBase.ts:37](https://github.com/cognitedata/reveal/blob/71be00fcc/viewer/packages/tools/src/Cognite3DViewerToolBase.ts#L37)


<!-- SOURCE_END: reveal/documentation\versioned_docs\version-3.x\api\classes\cognite_reveal_tools.GeomapTool.md -->

================================================================================


<!-- SOURCE_START: reveal/documentation\versioned_docs\version-3.x\api\classes\cognite_reveal_tools.HtmlOverlayTool.md -->
## File: reveal/documentation\versioned_docs\version-3.x\api\classes\cognite_reveal_tools.HtmlOverlayTool.md

---
id: "cognite_reveal_tools.HtmlOverlayTool"
title: "Class: HtmlOverlayTool"
sidebar_label: "HtmlOverlayTool"
custom_edit_url: null
---

[@cognite/reveal/tools](../modules/cognite_reveal_tools.md).HtmlOverlayTool

Manages HTMLoverlays for @see \{@link Cognite3DViewer}. Attaches HTML elements to a
3D position and updates its position/visibility as user moves the camera. This is
useful to create HTML overlays to highlight information about key positions in the 3D model.

Attached elements *must* have CSS style 'position: absolute'. It's also recommended
in most cases to have styles 'pointer-events: none' and 'touch-action: none' to avoid
interfering with 3D navigation. Consider also applying 'transform: translate(-50%, -50%)'
to anchor the center of the element rather than the top-left corner. In some cases the
`zIndex`-attribute is necessary for the element to appear on top of the viewer.

**`example`**
```js
const el = document.createElement('div');
el.style.position = 'absolute'; // Required!
// Anchor to center of element
el.style.transform = 'translate(-50%, -50%)';
// Avoid being target for events
el.style.pointerEvents = 'none;
el.style.touchAction = 'none';
// Render in front of other elements
el.style.zIndex = 10;

el.style.color = 'red';
el.innerHtml = '<h1>Overlay</h1>';

const overlayTool = new HtmlOverlayTool(viewer);
overlayTool.add(el, new THREE.Vector3(10, 10, 10));
// ...
overlayTool.remove(el);
// or, to remove all attached elements
overlayTool.clear();

// detach the tool from the viewer
overlayTool.dispose();
```

## Hierarchy

- [`Cognite3DViewerToolBase`](cognite_reveal_tools.Cognite3DViewerToolBase.md)

   **`HtmlOverlayTool`**

## Constructors

### constructor

 **new HtmlOverlayTool**(`viewer`, `options?`)

#### Parameters

| Name | Type |
| :------ | :------ |
| `viewer` | [`Cognite3DViewer`](cognite_reveal.Cognite3DViewer.md) |
| `options?` | `HtmlOverlayToolOptions` |

#### Overrides

[Cognite3DViewerToolBase](cognite_reveal_tools.Cognite3DViewerToolBase.md).[constructor](cognite_reveal_tools.Cognite3DViewerToolBase.md#constructor)

#### Defined in

[packages/tools/src/HtmlOverlay/HtmlOverlayTool.ts:166](https://github.com/cognitedata/reveal/blob/71be00fcc/viewer/packages/tools/src/HtmlOverlay/HtmlOverlayTool.ts#L166)

## Accessors

### elements

 `get` **elements**(): \{ `element`: `HTMLElement` ; `position3D`: `Vector3`  }[]

Returns all added HTML elements along with their 3D positions.

#### Returns

\{ `element`: `HTMLElement` ; `position3D`: `Vector3`  }[]

#### Defined in

[packages/tools/src/HtmlOverlay/HtmlOverlayTool.ts:186](https://github.com/cognitedata/reveal/blob/71be00fcc/viewer/packages/tools/src/HtmlOverlay/HtmlOverlayTool.ts#L186)

## Methods

### add

 **add**(`htmlElement`, `position3D`, `options?`): `void`

Registers a HTML overlay that will be updated on rendering.

#### Parameters

| Name | Type |
| :------ | :------ |
| `htmlElement` | `HTMLElement` |
| `position3D` | `Vector3` |
| `options` | [`HtmlOverlayOptions`](../modules/cognite_reveal_tools.md#htmloverlayoptions) |

#### Returns

`void`

#### Defined in

[packages/tools/src/HtmlOverlay/HtmlOverlayTool.ts:210](https://github.com/cognitedata/reveal/blob/71be00fcc/viewer/packages/tools/src/HtmlOverlay/HtmlOverlayTool.ts#L210)

___

### clear

 **clear**(): `void`

Removes all attached HTML overlay elements.

#### Returns

`void`

#### Defined in

[packages/tools/src/HtmlOverlay/HtmlOverlayTool.ts:258](https://github.com/cognitedata/reveal/blob/71be00fcc/viewer/packages/tools/src/HtmlOverlay/HtmlOverlayTool.ts#L258)

___

### dispose

 **dispose**(): `void`

Removes all elements and detaches from the viewer.

**`override`**

#### Returns

`void`

#### Overrides

[Cognite3DViewerToolBase](cognite_reveal_tools.Cognite3DViewerToolBase.md).[dispose](cognite_reveal_tools.Cognite3DViewerToolBase.md#dispose)

#### Defined in

[packages/tools/src/HtmlOverlay/HtmlOverlayTool.ts:196](https://github.com/cognitedata/reveal/blob/71be00fcc/viewer/packages/tools/src/HtmlOverlay/HtmlOverlayTool.ts#L196)

___

### forceUpdate

 **forceUpdate**(): `void`

Updates positions of all overlays. This is automatically managed and there
shouldn't be any reason to trigger this unless the attached elements are
modified externally.

Calling this function often might cause degraded performance.

#### Returns

`void`

#### Defined in

[packages/tools/src/HtmlOverlay/HtmlOverlayTool.ts:292](https://github.com/cognitedata/reveal/blob/71be00fcc/viewer/packages/tools/src/HtmlOverlay/HtmlOverlayTool.ts#L292)

___

### off

 **off**(`event`, `handler`): `void`

Unregisters an event handler for the 'disposed'-event.

#### Parameters

| Name | Type |
| :------ | :------ |
| `event` | ``"disposed"`` |
| `handler` | () => `void` |

#### Returns

`void`

#### Inherited from

[Cognite3DViewerToolBase](cognite_reveal_tools.Cognite3DViewerToolBase.md).[off](cognite_reveal_tools.Cognite3DViewerToolBase.md#off)

#### Defined in

[packages/tools/src/Cognite3DViewerToolBase.ts:37](https://github.com/cognitedata/reveal/blob/71be00fcc/viewer/packages/tools/src/Cognite3DViewerToolBase.ts#L37)

___

### remove

 **remove**(`htmlElement`): `void`

Removes a overlay and removes it from the DOM.

#### Parameters

| Name | Type |
| :------ | :------ |
| `htmlElement` | `HTMLElement` |

#### Returns

`void`

#### Defined in

[packages/tools/src/HtmlOverlay/HtmlOverlayTool.ts:246](https://github.com/cognitedata/reveal/blob/71be00fcc/viewer/packages/tools/src/HtmlOverlay/HtmlOverlayTool.ts#L246)

___

### visible

 **visible**(`enable`): `void`

Hide/unhide all HTML overlay elements.

#### Parameters

| Name | Type |
| :------ | :------ |
| `enable` | `boolean` |

#### Returns

`void`

#### Defined in

[packages/tools/src/HtmlOverlay/HtmlOverlayTool.ts:270](https://github.com/cognitedata/reveal/blob/71be00fcc/viewer/packages/tools/src/HtmlOverlay/HtmlOverlayTool.ts#L270)


<!-- SOURCE_END: reveal/documentation\versioned_docs\version-3.x\api\classes\cognite_reveal_tools.HtmlOverlayTool.md -->

================================================================================


<!-- SOURCE_START: reveal/documentation\versioned_docs\version-3.x\api\classes\cognite_reveal_tools.Keyframe.md -->
## File: reveal/documentation\versioned_docs\version-3.x\api\classes\cognite_reveal_tools.Keyframe.md

---
id: "cognite_reveal_tools.Keyframe"
title: "Class: Keyframe"
sidebar_label: "Keyframe"
custom_edit_url: null
---

[@cognite/reveal/tools](../modules/cognite_reveal_tools.md).Keyframe

Timeline Key Frames contains parameters to access Nodes, Styles for the Timeline

## Constructors

### constructor

 **new Keyframe**(`model`, `date`)

#### Parameters

| Name | Type |
| :------ | :------ |
| `model` | [`Cognite3DModel`](cognite_reveal.Cognite3DModel.md) |
| `date` | `Date` |

#### Defined in

[packages/tools/src/Timeline/Keyframe.ts:17](https://github.com/cognitedata/reveal/blob/71be00fcc/viewer/packages/tools/src/Timeline/Keyframe.ts#L17)

## Methods

### activate

 **activate**(): `void`

Assigns the styles for the node set for the model for this Keyframe

#### Returns

`void`

#### Defined in

[packages/tools/src/Timeline/Keyframe.ts:33](https://github.com/cognitedata/reveal/blob/71be00fcc/viewer/packages/tools/src/Timeline/Keyframe.ts#L33)

___

### assignStyledNodeCollection

 **assignStyledNodeCollection**(`nodeCollection`, `nodeAppearance`): `void`

Add node & style to the collection. If the collection has been added, the style is updated to the
appearance provided.

#### Parameters

| Name | Type | Description |
| :------ | :------ | :------ |
| `nodeCollection` | [`NodeCollection`](cognite_reveal.NodeCollection.md) | Node set to apply the Styles |
| `nodeAppearance` | [`NodeAppearance`](../modules/cognite_reveal.md#nodeappearance) | Style to assign to the node collection |

#### Returns

`void`

#### Defined in

[packages/tools/src/Timeline/Keyframe.ts:54](https://github.com/cognitedata/reveal/blob/71be00fcc/viewer/packages/tools/src/Timeline/Keyframe.ts#L54)

___

### deactivate

 **deactivate**(): `void`

Removes the style for the model

#### Returns

`void`

#### Defined in

[packages/tools/src/Timeline/Keyframe.ts:42](https://github.com/cognitedata/reveal/blob/71be00fcc/viewer/packages/tools/src/Timeline/Keyframe.ts#L42)

___

### getKeyframeDate

 **getKeyframeDate**(): `Date`

Get date of the Keyframe

#### Returns

`Date`

date

#### Defined in

[packages/tools/src/Timeline/Keyframe.ts:26](https://github.com/cognitedata/reveal/blob/71be00fcc/viewer/packages/tools/src/Timeline/Keyframe.ts#L26)

___

### unassignStyledNodeCollection

 **unassignStyledNodeCollection**(`nodeCollection`): `void`

Remove Node & Style for this keyframe's nodeCollection and nodeAppearance

#### Parameters

| Name | Type | Description |
| :------ | :------ | :------ |
| `nodeCollection` | [`NodeCollection`](cognite_reveal.NodeCollection.md) | Nodes to be unassign from node collection |

#### Returns

`void`

#### Defined in

[packages/tools/src/Timeline/Keyframe.ts:69](https://github.com/cognitedata/reveal/blob/71be00fcc/viewer/packages/tools/src/Timeline/Keyframe.ts#L69)


<!-- SOURCE_END: reveal/documentation\versioned_docs\version-3.x\api\classes\cognite_reveal_tools.Keyframe.md -->

================================================================================


<!-- SOURCE_START: reveal/documentation\versioned_docs\version-3.x\api\classes\cognite_reveal_tools.MeasurementTool.md -->
## File: reveal/documentation\versioned_docs\version-3.x\api\classes\cognite_reveal_tools.MeasurementTool.md

---
id: "cognite_reveal_tools.MeasurementTool"
title: "Class: MeasurementTool"
sidebar_label: "MeasurementTool"
custom_edit_url: null
---

[@cognite/reveal/tools](../modules/cognite_reveal_tools.md).MeasurementTool

Enables @see \{@link Cognite3DViewer} to perform a point to point measurement.
This can be achieved by selecting a point on the 3D Object and drag the pointer to
required point to get measurement of the distance.
The tools default measurement is in "Meters" as supported in Reveal, but it also provides
user to customise the measuring units based on their convinience with the callback.

**`example`**
```js
const measurementTool = new MeasurementTool(viewer);
measurementTool.enterMeasurementMode();
// ...
measurementTool.exitMeasurementMode();

// detach the tool from the viewer
measurementTool.dispose();
```

**`example`**
```jsx runnable
const measurementTool = new MeasurementTool(viewer, {distanceToLabelCallback: (distanceInMeters) => {
   // 1 meters = 3.281 feet
   const distancesInFeet = distanceInMeters * 3.281;
   return { distanceInMeters: distancesInFeet, units: 'ft'};
 }});
 measurementTool.enterMeasurementMode();
```

## Hierarchy

- [`Cognite3DViewerToolBase`](cognite_reveal_tools.Cognite3DViewerToolBase.md)

   **`MeasurementTool`**

## Constructors

### constructor

 **new MeasurementTool**(`viewer`, `options?`)

#### Parameters

| Name | Type |
| :------ | :------ |
| `viewer` | [`Cognite3DViewer`](cognite_reveal.Cognite3DViewer.md) |
| `options?` | [`MeasurementOptions`](../modules/cognite_reveal_tools.md#measurementoptions) |

#### Overrides

[Cognite3DViewerToolBase](cognite_reveal_tools.Cognite3DViewerToolBase.md).[constructor](cognite_reveal_tools.Cognite3DViewerToolBase.md#constructor)

#### Defined in

[packages/tools/src/Measurement/MeasurementTool.ts:87](https://github.com/cognitedata/reveal/blob/71be00fcc/viewer/packages/tools/src/Measurement/MeasurementTool.ts#L87)

## Accessors

### isInMeasurementMode

 `get` **isInMeasurementMode**(): `boolean`

Returns measurement mode state, is measurement mode started or ended.

#### Returns

`boolean`

#### Defined in

[packages/tools/src/Measurement/MeasurementTool.ts:53](https://github.com/cognitedata/reveal/blob/71be00fcc/viewer/packages/tools/src/Measurement/MeasurementTool.ts#L53)

## Methods

### dispose

 **dispose**(): `void`

Dispose Measurement Tool.

#### Returns

`void`

#### Overrides

[Cognite3DViewerToolBase](cognite_reveal_tools.Cognite3DViewerToolBase.md).[dispose](cognite_reveal_tools.Cognite3DViewerToolBase.md#dispose)

#### Defined in

[packages/tools/src/Measurement/MeasurementTool.ts:340](https://github.com/cognitedata/reveal/blob/71be00fcc/viewer/packages/tools/src/Measurement/MeasurementTool.ts#L340)

___

### enterMeasurementMode

 **enterMeasurementMode**(): `void`

Enter into point to point measurement mode.

#### Returns

`void`

#### Defined in

[packages/tools/src/Measurement/MeasurementTool.ts:228](https://github.com/cognitedata/reveal/blob/71be00fcc/viewer/packages/tools/src/Measurement/MeasurementTool.ts#L228)

___

### exitMeasurementMode

 **exitMeasurementMode**(): `void`

Exit measurement mode.

#### Returns

`void`

#### Defined in

[packages/tools/src/Measurement/MeasurementTool.ts:240](https://github.com/cognitedata/reveal/blob/71be00fcc/viewer/packages/tools/src/Measurement/MeasurementTool.ts#L240)

___

### getAllMeasurements

 **getAllMeasurements**(): [`Measurement`](../modules/cognite_reveal_tools.md#measurement)[]

Get all measurements from [Cognite3DViewer](cognite_reveal.Cognite3DViewer.md).

#### Returns

[`Measurement`](../modules/cognite_reveal_tools.md#measurement)[]

Array of Measurements containing Id, start point, end point & measured distance.

#### Defined in

[packages/tools/src/Measurement/MeasurementTool.ts:333](https://github.com/cognitedata/reveal/blob/71be00fcc/viewer/packages/tools/src/Measurement/MeasurementTool.ts#L333)

___

### off

 **off**(`event`, `callback`): `void`

Unsubscribe to the Measurement event

**`example`**
```js
measurementTool.off('disposed', onMeasurementDispose);
```

#### Parameters

| Name | Type | Description |
| :------ | :------ | :------ |
| `event` | ``"disposed"`` | `MeasurementEvents` event |
| `callback` | [`DisposedDelegate`](../modules/cognite_reveal.md#disposeddelegate) | Callback to measurements events |

#### Returns

`void`

#### Overrides

[Cognite3DViewerToolBase](cognite_reveal_tools.Cognite3DViewerToolBase.md).[off](cognite_reveal_tools.Cognite3DViewerToolBase.md#off)

#### Defined in

[packages/tools/src/Measurement/MeasurementTool.ts:172](https://github.com/cognitedata/reveal/blob/71be00fcc/viewer/packages/tools/src/Measurement/MeasurementTool.ts#L172)

 **off**(`event`, `callback`): `void`

Unsubscribe to the Measurement event

**`example`**
```js
measurementTool.off('added', onMeasurementAdded);
```

#### Parameters

| Name | Type | Description |
| :------ | :------ | :------ |
| `event` | ``"added"`` | `MeasurementEvents` event |
| `callback` | [`MeasurementAddedDelegate`](../modules/cognite_reveal_tools.md#measurementaddeddelegate) | Callback to measurements events |

#### Returns

`void`

#### Overrides

Cognite3DViewerToolBase.off

#### Defined in

[packages/tools/src/Measurement/MeasurementTool.ts:180](https://github.com/cognitedata/reveal/blob/71be00fcc/viewer/packages/tools/src/Measurement/MeasurementTool.ts#L180)

 **off**(`event`, `callback`): `void`

Unsubscribe to the Measurement event

**`example`**
```js
measurementTool.off('started', onMeasurementStarted);
```

#### Parameters

| Name | Type | Description |
| :------ | :------ | :------ |
| `event` | ``"started"`` | `MeasurementEvents` event |
| `callback` | [`MeasurementStartedDelegate`](../modules/cognite_reveal_tools.md#measurementstarteddelegate) | Callback to measurements events |

#### Returns

`void`

#### Overrides

Cognite3DViewerToolBase.off

#### Defined in

[packages/tools/src/Measurement/MeasurementTool.ts:188](https://github.com/cognitedata/reveal/blob/71be00fcc/viewer/packages/tools/src/Measurement/MeasurementTool.ts#L188)

 **off**(`event`, `callback`): `void`

Unsubscribe to the Measurement event

**`example`**
```js
measurementTool.off('ended', onMeasurementEnded);
```

#### Parameters

| Name | Type | Description |
| :------ | :------ | :------ |
| `event` | ``"ended"`` | `MeasurementEvents` event |
| `callback` | [`MeasurementEndedDelegate`](../modules/cognite_reveal_tools.md#measurementendeddelegate) | Callback to measurements events |

#### Returns

`void`

#### Overrides

Cognite3DViewerToolBase.off

#### Defined in

[packages/tools/src/Measurement/MeasurementTool.ts:196](https://github.com/cognitedata/reveal/blob/71be00fcc/viewer/packages/tools/src/Measurement/MeasurementTool.ts#L196)

___

### on

 **on**(`event`, `callback`): `void`

Triggered when the tool is disposed. Listeners should clean up any
resources held and remove the reference to the tool.

**`example`**
```js
measurementTool.on('disposed', onMeasurementDispose);
```

#### Parameters

| Name | Type | Description |
| :------ | :------ | :------ |
| `event` | ``"disposed"`` | `MeasurementEvents` event |
| `callback` | [`DisposedDelegate`](../modules/cognite_reveal.md#disposeddelegate) | Callback to measurements events |

#### Returns

`void`

#### Overrides

Cognite3DViewerToolBase.on

#### Defined in

[packages/tools/src/Measurement/MeasurementTool.ts:110](https://github.com/cognitedata/reveal/blob/71be00fcc/viewer/packages/tools/src/Measurement/MeasurementTool.ts#L110)

 **on**(`event`, `callback`): `void`

Triggered when a measurement is added into the Cognite3DViewer.

**`example`**
```js
measurementTool.on('added', onMeasurementAdded);
```

#### Parameters

| Name | Type | Description |
| :------ | :------ | :------ |
| `event` | ``"added"`` | `MeasurementEvents` event |
| `callback` | [`MeasurementAddedDelegate`](../modules/cognite_reveal_tools.md#measurementaddeddelegate) | Callback to measurements events |

#### Returns

`void`

#### Overrides

Cognite3DViewerToolBase.on

#### Defined in

[packages/tools/src/Measurement/MeasurementTool.ts:119](https://github.com/cognitedata/reveal/blob/71be00fcc/viewer/packages/tools/src/Measurement/MeasurementTool.ts#L119)

 **on**(`event`, `callback`): `void`

Triggered when a measurement mode is started.

**`example`**
```js
measurementTool.on('started', onMeasurementStarted);
```

#### Parameters

| Name | Type | Description |
| :------ | :------ | :------ |
| `event` | ``"started"`` | `MeasurementEvents` event |
| `callback` | [`MeasurementStartedDelegate`](../modules/cognite_reveal_tools.md#measurementstarteddelegate) | Callback to measurements events |

#### Returns

`void`

#### Overrides

Cognite3DViewerToolBase.on

#### Defined in

[packages/tools/src/Measurement/MeasurementTool.ts:128](https://github.com/cognitedata/reveal/blob/71be00fcc/viewer/packages/tools/src/Measurement/MeasurementTool.ts#L128)

 **on**(`event`, `callback`): `void`

Triggered when measurement mode is ended.

**`example`**
```js
measurementTool.on('ended', onMeasurementEnded);
```

#### Parameters

| Name | Type | Description |
| :------ | :------ | :------ |
| `event` | ``"ended"`` | `MeasurementEvents` event |
| `callback` | [`MeasurementEndedDelegate`](../modules/cognite_reveal_tools.md#measurementendeddelegate) | Callback to measurements events |

#### Returns

`void`

#### Overrides

Cognite3DViewerToolBase.on

#### Defined in

[packages/tools/src/Measurement/MeasurementTool.ts:137](https://github.com/cognitedata/reveal/blob/71be00fcc/viewer/packages/tools/src/Measurement/MeasurementTool.ts#L137)

___

### removeAllMeasurements

 **removeAllMeasurements**(): `void`

Removes all measurements from the Cognite3DViewer.

#### Returns

`void`

#### Defined in

[packages/tools/src/Measurement/MeasurementTool.ts:269](https://github.com/cognitedata/reveal/blob/71be00fcc/viewer/packages/tools/src/Measurement/MeasurementTool.ts#L269)

___

### removeMeasurement

 **removeMeasurement**(`measurement`): `void`

Removes a measurement from the Cognite3DViewer.

#### Parameters

| Name | Type | Description |
| :------ | :------ | :------ |
| `measurement` | [`Measurement`](../modules/cognite_reveal_tools.md#measurement) | Measurement to be removed from Cognite3DViewer. |

#### Returns

`void`

#### Defined in

[packages/tools/src/Measurement/MeasurementTool.ts:254](https://github.com/cognitedata/reveal/blob/71be00fcc/viewer/packages/tools/src/Measurement/MeasurementTool.ts#L254)

___

### setLineOptions

 **setLineOptions**(`options`): `void`

Sets Measurement line width, color and label units value for the next measurment.

#### Parameters

| Name | Type | Description |
| :------ | :------ | :------ |
| `options` | [`MeasurementOptions`](../modules/cognite_reveal_tools.md#measurementoptions) | MeasurementOptions to set line width, color and callback for custom operation on measurement labels. |

#### Returns

`void`

#### Defined in

[packages/tools/src/Measurement/MeasurementTool.ts:290](https://github.com/cognitedata/reveal/blob/71be00fcc/viewer/packages/tools/src/Measurement/MeasurementTool.ts#L290)

___

### setMeasurementLabelsVisible

 **setMeasurementLabelsVisible**(`enable`): `void`

Sets the visiblity of labels in the Measurement.

#### Parameters

| Name | Type |
| :------ | :------ |
| `enable` | `boolean` |

#### Returns

`void`

#### Defined in

[packages/tools/src/Measurement/MeasurementTool.ts:282](https://github.com/cognitedata/reveal/blob/71be00fcc/viewer/packages/tools/src/Measurement/MeasurementTool.ts#L282)

___

### updateLineColor

 **updateLineColor**(`measurement`, `color`): `void`

Update selected line color.

#### Parameters

| Name | Type | Description |
| :------ | :------ | :------ |
| `measurement` | [`Measurement`](../modules/cognite_reveal_tools.md#measurement) | Measurement to be updated. |
| `color` | `Color` | Color of the measuring line. |

#### Returns

`void`

#### Defined in

[packages/tools/src/Measurement/MeasurementTool.ts:318](https://github.com/cognitedata/reveal/blob/71be00fcc/viewer/packages/tools/src/Measurement/MeasurementTool.ts#L318)

___

### updateLineWidth

 **updateLineWidth**(`measurement`, `lineWidth`): `void`

Update selected line width.

#### Parameters

| Name | Type | Description |
| :------ | :------ | :------ |
| `measurement` | [`Measurement`](../modules/cognite_reveal_tools.md#measurement) | Measurement to be updated. |
| `lineWidth` | `number` | Width of the measuring line. |

#### Returns

`void`

#### Defined in

[packages/tools/src/Measurement/MeasurementTool.ts:302](https://github.com/cognitedata/reveal/blob/71be00fcc/viewer/packages/tools/src/Measurement/MeasurementTool.ts#L302)


<!-- SOURCE_END: reveal/documentation\versioned_docs\version-3.x\api\classes\cognite_reveal_tools.MeasurementTool.md -->

================================================================================


<!-- SOURCE_START: reveal/documentation\versioned_docs\version-3.x\api\classes\cognite_reveal_tools.TimelineTool.md -->
## File: reveal/documentation\versioned_docs\version-3.x\api\classes\cognite_reveal_tools.TimelineTool.md

---
id: "cognite_reveal_tools.TimelineTool"
title: "Class: TimelineTool"
sidebar_label: "TimelineTool"
custom_edit_url: null
---

[@cognite/reveal/tools](../modules/cognite_reveal_tools.md).TimelineTool

Tool to applying styles to nodes based on date to play them over in Timeline

## Hierarchy

- [`Cognite3DViewerToolBase`](cognite_reveal_tools.Cognite3DViewerToolBase.md)

   **`TimelineTool`**

## Constructors

### constructor

 **new TimelineTool**(`cadModel`)

#### Parameters

| Name | Type |
| :------ | :------ |
| `cadModel` | [`Cognite3DModel`](cognite_reveal.Cognite3DModel.md) |

#### Overrides

[Cognite3DViewerToolBase](cognite_reveal_tools.Cognite3DViewerToolBase.md).[constructor](cognite_reveal_tools.Cognite3DViewerToolBase.md#constructor)

#### Defined in

[packages/tools/src/Timeline/TimelineTool.ts:22](https://github.com/cognitedata/reveal/blob/71be00fcc/viewer/packages/tools/src/Timeline/TimelineTool.ts#L22)

## Methods

### createKeyframe

 **createKeyframe**(`date`): [`Keyframe`](cognite_reveal_tools.Keyframe.md)

Create Key frame for the Timeline

#### Parameters

| Name | Type | Description |
| :------ | :------ | :------ |
| `date` | `Date` | date value by Date.now() since January 1, 1970 |

#### Returns

[`Keyframe`](cognite_reveal_tools.Keyframe.md)

#### Defined in

[packages/tools/src/Timeline/TimelineTool.ts:63](https://github.com/cognitedata/reveal/blob/71be00fcc/viewer/packages/tools/src/Timeline/TimelineTool.ts#L63)

___

### dispose

 **dispose**(): `void`

Disposes the element and triggeres the 'disposed' event before clearing the list
of dipose-listeners.

#### Returns

`void`

#### Overrides

[Cognite3DViewerToolBase](cognite_reveal_tools.Cognite3DViewerToolBase.md).[dispose](cognite_reveal_tools.Cognite3DViewerToolBase.md#dispose)

#### Defined in

[packages/tools/src/Timeline/TimelineTool.ts:184](https://github.com/cognitedata/reveal/blob/71be00fcc/viewer/packages/tools/src/Timeline/TimelineTool.ts#L184)

___

### getAllKeyframes

 **getAllKeyframes**(): [`Keyframe`](cognite_reveal_tools.Keyframe.md)[]

Provides all Keyframes in the Timeline

#### Returns

[`Keyframe`](cognite_reveal_tools.Keyframe.md)[]

All Keyframes in Timeline

#### Defined in

[packages/tools/src/Timeline/TimelineTool.ts:180](https://github.com/cognitedata/reveal/blob/71be00fcc/viewer/packages/tools/src/Timeline/TimelineTool.ts#L180)

___

### getKeyframeByDate

 **getKeyframeByDate**(`date`): [`Keyframe`](cognite_reveal_tools.Keyframe.md)

Returns the keyframe at the date given, or undefined if not found.

#### Parameters

| Name | Type |
| :------ | :------ |
| `date` | `Date` |

#### Returns

[`Keyframe`](cognite_reveal_tools.Keyframe.md)

#### Defined in

[packages/tools/src/Timeline/TimelineTool.ts:76](https://github.com/cognitedata/reveal/blob/71be00fcc/viewer/packages/tools/src/Timeline/TimelineTool.ts#L76)

___

### off

 **off**(`event`, `handler`): `void`

Unregisters an event handler for the 'disposed'-event.

#### Parameters

| Name | Type |
| :------ | :------ |
| `event` | ``"disposed"`` |
| `handler` | () => `void` |

#### Returns

`void`

#### Inherited from

[Cognite3DViewerToolBase](cognite_reveal_tools.Cognite3DViewerToolBase.md).[off](cognite_reveal_tools.Cognite3DViewerToolBase.md#off)

#### Defined in

[packages/tools/src/Cognite3DViewerToolBase.ts:37](https://github.com/cognitedata/reveal/blob/71be00fcc/viewer/packages/tools/src/Cognite3DViewerToolBase.ts#L37)

___

### pause

 **pause**(): `void`

Pause any ongoing playback

#### Returns

`void`

#### Defined in

[packages/tools/src/Timeline/TimelineTool.ts:161](https://github.com/cognitedata/reveal/blob/71be00fcc/viewer/packages/tools/src/Timeline/TimelineTool.ts#L161)

___

### play

 **play**(`startDate`, `endDate`, `totalDurationInMilliSeconds`): `void`

Starts playback of Timeline

#### Parameters

| Name | Type | Description |
| :------ | :------ | :------ |
| `startDate` | `Date` | Keyframe date to start the Playback of Keyframes |
| `endDate` | `Date` | Keyframe date to stop the Playback of Keyframes |
| `totalDurationInMilliSeconds` | `number` | Number of milliseconds for all Keyframe within startDate & endDate to be rendered |

#### Returns

`void`

#### Defined in

[packages/tools/src/Timeline/TimelineTool.ts:110](https://github.com/cognitedata/reveal/blob/71be00fcc/viewer/packages/tools/src/Timeline/TimelineTool.ts#L110)

___

### removeKeyframe

 **removeKeyframe**(`keyframe`): `void`

Removes the Keyframe from the timeline. Does nothing if the keyframe isn't part of the timeline.

#### Parameters

| Name | Type | Description |
| :------ | :------ | :------ |
| `keyframe` | [`Keyframe`](cognite_reveal_tools.Keyframe.md) | Keyframe to be removed from the timeline |

#### Returns

`void`

#### Defined in

[packages/tools/src/Timeline/TimelineTool.ts:84](https://github.com/cognitedata/reveal/blob/71be00fcc/viewer/packages/tools/src/Timeline/TimelineTool.ts#L84)

___

### removeKeyframeByDate

 **removeKeyframeByDate**(`date`): `void`

Removes the Keyframe from the Timeline

#### Parameters

| Name | Type | Description |
| :------ | :------ | :------ |
| `date` | `Date` | Date of the Keyframe to be removed from the Timeline |

#### Returns

`void`

#### Defined in

[packages/tools/src/Timeline/TimelineTool.ts:96](https://github.com/cognitedata/reveal/blob/71be00fcc/viewer/packages/tools/src/Timeline/TimelineTool.ts#L96)

___

### resume

 **resume**(): `void`

Resume any paused playback

#### Returns

`void`

#### Defined in

[packages/tools/src/Timeline/TimelineTool.ts:170](https://github.com/cognitedata/reveal/blob/71be00fcc/viewer/packages/tools/src/Timeline/TimelineTool.ts#L170)

___

### stop

 **stop**(): `void`

Stops any ongoing playback

#### Returns

`void`

#### Defined in

[packages/tools/src/Timeline/TimelineTool.ts:151](https://github.com/cognitedata/reveal/blob/71be00fcc/viewer/packages/tools/src/Timeline/TimelineTool.ts#L151)

___

### subscribe

 **subscribe**(`event`, `listener`): `void`

Subscribe to the Date changed event

#### Parameters

| Name | Type | Description |
| :------ | :------ | :------ |
| `event` | ``"dateChanged"`` | `dateChanged` event |
| `listener` | [`TimelineDateUpdateDelegate`](../modules/cognite_reveal_tools.md#timelinedateupdatedelegate) | Listen to Timeline date Update during Playback |

#### Returns

`void`

#### Defined in

[packages/tools/src/Timeline/TimelineTool.ts:34](https://github.com/cognitedata/reveal/blob/71be00fcc/viewer/packages/tools/src/Timeline/TimelineTool.ts#L34)

___

### unsubscribe

 **unsubscribe**(`event`, `listener`): `void`

Unsubscribe to the Date changed event

#### Parameters

| Name | Type | Description |
| :------ | :------ | :------ |
| `event` | ``"dateChanged"`` | `dateChanged` event |
| `listener` | [`TimelineDateUpdateDelegate`](../modules/cognite_reveal_tools.md#timelinedateupdatedelegate) | Remove Listen to Timeline date Update |

#### Returns

`void`

#### Defined in

[packages/tools/src/Timeline/TimelineTool.ts:49](https://github.com/cognitedata/reveal/blob/71be00fcc/viewer/packages/tools/src/Timeline/TimelineTool.ts#L49)


<!-- SOURCE_END: reveal/documentation\versioned_docs\version-3.x\api\classes\cognite_reveal_tools.TimelineTool.md -->

================================================================================


<!-- SOURCE_START: reveal/documentation\versioned_docs\version-3.x\api\enums\cognite_reveal.NodeOutlineColor.md -->
## File: reveal/documentation\versioned_docs\version-3.x\api\enums\cognite_reveal.NodeOutlineColor.md

---
id: "cognite_reveal.NodeOutlineColor"
title: "Enumeration: NodeOutlineColor"
sidebar_label: "NodeOutlineColor"
custom_edit_url: null
---

[@cognite/reveal](../modules/cognite_reveal.md).NodeOutlineColor

## Enumeration Members

### Black

 **Black**

#### Defined in

[packages/cad-styling/src/NodeAppearance.ts:8](https://github.com/cognitedata/reveal/blob/71be00fcc/viewer/packages/cad-styling/src/NodeAppearance.ts#L8)

___

### Blue

 **Blue**

#### Defined in

[packages/cad-styling/src/NodeAppearance.ts:10](https://github.com/cognitedata/reveal/blob/71be00fcc/viewer/packages/cad-styling/src/NodeAppearance.ts#L10)

___

### Cyan

 **Cyan**

#### Defined in

[packages/cad-styling/src/NodeAppearance.ts:9](https://github.com/cognitedata/reveal/blob/71be00fcc/viewer/packages/cad-styling/src/NodeAppearance.ts#L9)

___

### Green

 **Green**

#### Defined in

[packages/cad-styling/src/NodeAppearance.ts:11](https://github.com/cognitedata/reveal/blob/71be00fcc/viewer/packages/cad-styling/src/NodeAppearance.ts#L11)

___

### NoOutline

 **NoOutline**

#### Defined in

[packages/cad-styling/src/NodeAppearance.ts:6](https://github.com/cognitedata/reveal/blob/71be00fcc/viewer/packages/cad-styling/src/NodeAppearance.ts#L6)

___

### Orange

 **Orange**

#### Defined in

[packages/cad-styling/src/NodeAppearance.ts:13](https://github.com/cognitedata/reveal/blob/71be00fcc/viewer/packages/cad-styling/src/NodeAppearance.ts#L13)

___

### Red

 **Red**

#### Defined in

[packages/cad-styling/src/NodeAppearance.ts:12](https://github.com/cognitedata/reveal/blob/71be00fcc/viewer/packages/cad-styling/src/NodeAppearance.ts#L12)

___

### White

 **White**

#### Defined in

[packages/cad-styling/src/NodeAppearance.ts:7](https://github.com/cognitedata/reveal/blob/71be00fcc/viewer/packages/cad-styling/src/NodeAppearance.ts#L7)


<!-- SOURCE_END: reveal/documentation\versioned_docs\version-3.x\api\enums\cognite_reveal.NodeOutlineColor.md -->

================================================================================


<!-- SOURCE_START: reveal/documentation\versioned_docs\version-3.x\api\enums\cognite_reveal.PotreePointColorType.md -->
## File: reveal/documentation\versioned_docs\version-3.x\api\enums\cognite_reveal.PotreePointColorType.md

---
id: "cognite_reveal.PotreePointColorType"
title: "Enumeration: PotreePointColorType"
sidebar_label: "PotreePointColorType"
custom_edit_url: null
---

[@cognite/reveal](../modules/cognite_reveal.md).PotreePointColorType

## Enumeration Members

### Classification

 **Classification**

#### Defined in

[packages/pointclouds/src/potree-three-loader/rendering/enums.ts:34](https://github.com/cognitedata/reveal/blob/71be00fcc/viewer/packages/pointclouds/src/potree-three-loader/rendering/enums.ts#L34)

___

### Color

 **Color**

#### Defined in

[packages/pointclouds/src/potree-three-loader/rendering/enums.ts:25](https://github.com/cognitedata/reveal/blob/71be00fcc/viewer/packages/pointclouds/src/potree-three-loader/rendering/enums.ts#L25)

___

### Composite

 **Composite**

#### Defined in

[packages/pointclouds/src/potree-three-loader/rendering/enums.ts:40](https://github.com/cognitedata/reveal/blob/71be00fcc/viewer/packages/pointclouds/src/potree-three-loader/rendering/enums.ts#L40)

___

### Depth

 **Depth**

#### Defined in

[packages/pointclouds/src/potree-three-loader/rendering/enums.ts:26](https://github.com/cognitedata/reveal/blob/71be00fcc/viewer/packages/pointclouds/src/potree-three-loader/rendering/enums.ts#L26)

___

### Elevation

 **Elevation**

#### Defined in

[packages/pointclouds/src/potree-three-loader/rendering/enums.ts:28](https://github.com/cognitedata/reveal/blob/71be00fcc/viewer/packages/pointclouds/src/potree-three-loader/rendering/enums.ts#L28)

___

### Height

 **Height**

#### Defined in

[packages/pointclouds/src/potree-three-loader/rendering/enums.ts:27](https://github.com/cognitedata/reveal/blob/71be00fcc/viewer/packages/pointclouds/src/potree-three-loader/rendering/enums.ts#L27)

___

### Intensity

 **Intensity**

#### Defined in

[packages/pointclouds/src/potree-three-loader/rendering/enums.ts:29](https://github.com/cognitedata/reveal/blob/71be00fcc/viewer/packages/pointclouds/src/potree-three-loader/rendering/enums.ts#L29)

___

### IntensityGradient

 **IntensityGradient**

#### Defined in

[packages/pointclouds/src/potree-three-loader/rendering/enums.ts:30](https://github.com/cognitedata/reveal/blob/71be00fcc/viewer/packages/pointclouds/src/potree-three-loader/rendering/enums.ts#L30)

___

### LevelOfDetail

 **LevelOfDetail**

#### Defined in

[packages/pointclouds/src/potree-three-loader/rendering/enums.ts:32](https://github.com/cognitedata/reveal/blob/71be00fcc/viewer/packages/pointclouds/src/potree-three-loader/rendering/enums.ts#L32)

___

### Lod

 **Lod**

#### Defined in

[packages/pointclouds/src/potree-three-loader/rendering/enums.ts:31](https://github.com/cognitedata/reveal/blob/71be00fcc/viewer/packages/pointclouds/src/potree-three-loader/rendering/enums.ts#L31)

___

### Normal

 **Normal**

#### Defined in

[packages/pointclouds/src/potree-three-loader/rendering/enums.ts:37](https://github.com/cognitedata/reveal/blob/71be00fcc/viewer/packages/pointclouds/src/potree-three-loader/rendering/enums.ts#L37)

___

### Phong

 **Phong**

#### Defined in

[packages/pointclouds/src/potree-three-loader/rendering/enums.ts:38](https://github.com/cognitedata/reveal/blob/71be00fcc/viewer/packages/pointclouds/src/potree-three-loader/rendering/enums.ts#L38)

___

### PointIndex

 **PointIndex**

#### Defined in

[packages/pointclouds/src/potree-three-loader/rendering/enums.ts:33](https://github.com/cognitedata/reveal/blob/71be00fcc/viewer/packages/pointclouds/src/potree-three-loader/rendering/enums.ts#L33)

___

### ReturnNumber

 **ReturnNumber**

#### Defined in

[packages/pointclouds/src/potree-three-loader/rendering/enums.ts:35](https://github.com/cognitedata/reveal/blob/71be00fcc/viewer/packages/pointclouds/src/potree-three-loader/rendering/enums.ts#L35)

___

### Rgb

 **Rgb**

#### Defined in

[packages/pointclouds/src/potree-three-loader/rendering/enums.ts:24](https://github.com/cognitedata/reveal/blob/71be00fcc/viewer/packages/pointclouds/src/potree-three-loader/rendering/enums.ts#L24)

___

### RgbHeight

 **RgbHeight**

#### Defined in

[packages/pointclouds/src/potree-three-loader/rendering/enums.ts:39](https://github.com/cognitedata/reveal/blob/71be00fcc/viewer/packages/pointclouds/src/potree-three-loader/rendering/enums.ts#L39)

___

### Source

 **Source**

#### Defined in

[packages/pointclouds/src/potree-three-loader/rendering/enums.ts:36](https://github.com/cognitedata/reveal/blob/71be00fcc/viewer/packages/pointclouds/src/potree-three-loader/rendering/enums.ts#L36)


<!-- SOURCE_END: reveal/documentation\versioned_docs\version-3.x\api\enums\cognite_reveal.PotreePointColorType.md -->

================================================================================


<!-- SOURCE_START: reveal/documentation\versioned_docs\version-3.x\api\enums\cognite_reveal.PotreePointShape.md -->
## File: reveal/documentation\versioned_docs\version-3.x\api\enums\cognite_reveal.PotreePointShape.md

---
id: "cognite_reveal.PotreePointShape"
title: "Enumeration: PotreePointShape"
sidebar_label: "PotreePointShape"
custom_edit_url: null
---

[@cognite/reveal](../modules/cognite_reveal.md).PotreePointShape

## Enumeration Members

### Circle

 **Circle**

#### Defined in

[packages/pointclouds/src/potree-three-loader/rendering/enums.ts:9](https://github.com/cognitedata/reveal/blob/71be00fcc/viewer/packages/pointclouds/src/potree-three-loader/rendering/enums.ts#L9)

___

### Paraboloid

 **Paraboloid**

#### Defined in

[packages/pointclouds/src/potree-three-loader/rendering/enums.ts:10](https://github.com/cognitedata/reveal/blob/71be00fcc/viewer/packages/pointclouds/src/potree-three-loader/rendering/enums.ts#L10)

___

### Square

 **Square**

#### Defined in

[packages/pointclouds/src/potree-three-loader/rendering/enums.ts:8](https://github.com/cognitedata/reveal/blob/71be00fcc/viewer/packages/pointclouds/src/potree-three-loader/rendering/enums.ts#L8)


<!-- SOURCE_END: reveal/documentation\versioned_docs\version-3.x\api\enums\cognite_reveal.PotreePointShape.md -->

================================================================================


<!-- SOURCE_START: reveal/documentation\versioned_docs\version-3.x\api\enums\cognite_reveal.PotreePointSizeType.md -->
## File: reveal/documentation\versioned_docs\version-3.x\api\enums\cognite_reveal.PotreePointSizeType.md

---
id: "cognite_reveal.PotreePointSizeType"
title: "Enumeration: PotreePointSizeType"
sidebar_label: "PotreePointSizeType"
custom_edit_url: null
---

[@cognite/reveal](../modules/cognite_reveal.md).PotreePointSizeType

## Enumeration Members

### Adaptive

 **Adaptive**

#### Defined in

[packages/pointclouds/src/potree-three-loader/rendering/enums.ts:4](https://github.com/cognitedata/reveal/blob/71be00fcc/viewer/packages/pointclouds/src/potree-three-loader/rendering/enums.ts#L4)

___

### Attenuated

 **Attenuated**

#### Defined in

[packages/pointclouds/src/potree-three-loader/rendering/enums.ts:3](https://github.com/cognitedata/reveal/blob/71be00fcc/viewer/packages/pointclouds/src/potree-three-loader/rendering/enums.ts#L3)

___

### Fixed

 **Fixed**

#### Defined in

[packages/pointclouds/src/potree-three-loader/rendering/enums.ts:2](https://github.com/cognitedata/reveal/blob/71be00fcc/viewer/packages/pointclouds/src/potree-three-loader/rendering/enums.ts#L2)


<!-- SOURCE_END: reveal/documentation\versioned_docs\version-3.x\api\enums\cognite_reveal.PotreePointSizeType.md -->

================================================================================


<!-- SOURCE_START: reveal/documentation\versioned_docs\version-3.x\api\enums\cognite_reveal.WellKnownAsprsPointClassCodes.md -->
## File: reveal/documentation\versioned_docs\version-3.x\api\enums\cognite_reveal.WellKnownAsprsPointClassCodes.md

---
id: "cognite_reveal.WellKnownAsprsPointClassCodes"
title: "Enumeration: WellKnownAsprsPointClassCodes"
sidebar_label: "WellKnownAsprsPointClassCodes"
custom_edit_url: null
---

[@cognite/reveal](../modules/cognite_reveal.md).WellKnownAsprsPointClassCodes

ASPRS well known point class types.

**`see`** [http://www.asprs.org/wp-content/uploads/2019/03/LAS_1_4_r14.pdf](http://www.asprs.org/wp-content/uploads/2019/03/LAS_1_4_r14.pdf) (page 30)

## Enumeration Members

### BridgeDeck

 **BridgeDeck**

Note that [WellKnownAsprsPointClassCodes.ReservedOrBridgeDeck](cognite_reveal.WellKnownAsprsPointClassCodes.md#reservedorbridgedeck) has been used
historically.

#### Defined in

[packages/pointclouds/src/types.ts:59](https://github.com/cognitedata/reveal/blob/71be00fcc/viewer/packages/pointclouds/src/types.ts#L59)

___

### Building

 **Building**

#### Defined in

[packages/pointclouds/src/types.ts:24](https://github.com/cognitedata/reveal/blob/71be00fcc/viewer/packages/pointclouds/src/types.ts#L24)

___

### Created

 **Created**

Created, never classified.

#### Defined in

[packages/pointclouds/src/types.ts:18](https://github.com/cognitedata/reveal/blob/71be00fcc/viewer/packages/pointclouds/src/types.ts#L18)

___

### Default

 **Default**

Special value for all other classes. Some point in Potree might be in this class

#### Defined in

[packages/pointclouds/src/types.ts:14](https://github.com/cognitedata/reveal/blob/71be00fcc/viewer/packages/pointclouds/src/types.ts#L14)

___

### Ground

 **Ground**

#### Defined in

[packages/pointclouds/src/types.ts:20](https://github.com/cognitedata/reveal/blob/71be00fcc/viewer/packages/pointclouds/src/types.ts#L20)

___

### HighNoise

 **HighNoise**

High point, or "high noise".
Note that [WellKnownAsprsPointClassCodes.ReservedOrHighPoint](cognite_reveal.WellKnownAsprsPointClassCodes.md#reservedorhighpoint) has been used
historically.

#### Defined in

[packages/pointclouds/src/types.ts:65](https://github.com/cognitedata/reveal/blob/71be00fcc/viewer/packages/pointclouds/src/types.ts#L65)

___

### HighVegetation

 **HighVegetation**

#### Defined in

[packages/pointclouds/src/types.ts:23](https://github.com/cognitedata/reveal/blob/71be00fcc/viewer/packages/pointclouds/src/types.ts#L23)

___

### IgnoredGround

 **IgnoredGround**

E.g. breakline proximity.

#### Defined in

[packages/pointclouds/src/types.ts:73](https://github.com/cognitedata/reveal/blob/71be00fcc/viewer/packages/pointclouds/src/types.ts#L73)

___

### LowPoint

 **LowPoint**

Low point, typically "low noise".

#### Defined in

[packages/pointclouds/src/types.ts:28](https://github.com/cognitedata/reveal/blob/71be00fcc/viewer/packages/pointclouds/src/types.ts#L28)

___

### LowVegetation

 **LowVegetation**

#### Defined in

[packages/pointclouds/src/types.ts:21](https://github.com/cognitedata/reveal/blob/71be00fcc/viewer/packages/pointclouds/src/types.ts#L21)

___

### MedVegetation

 **MedVegetation**

#### Defined in

[packages/pointclouds/src/types.ts:22](https://github.com/cognitedata/reveal/blob/71be00fcc/viewer/packages/pointclouds/src/types.ts#L22)

___

### OverheadStructure

 **OverheadStructure**

E.g. conveyors, mining equipment, traffic lights.

#### Defined in

[packages/pointclouds/src/types.ts:69](https://github.com/cognitedata/reveal/blob/71be00fcc/viewer/packages/pointclouds/src/types.ts#L69)

___

### Rail

 **Rail**

#### Defined in

[packages/pointclouds/src/types.ts:35](https://github.com/cognitedata/reveal/blob/71be00fcc/viewer/packages/pointclouds/src/types.ts#L35)

___

### ReservedOrBridgeDeck

 **ReservedOrBridgeDeck**

In previous revisions of LAS this was "Bridge deck", but in more recent
revisions this value is reserved.

#### Defined in

[packages/pointclouds/src/types.ts:41](https://github.com/cognitedata/reveal/blob/71be00fcc/viewer/packages/pointclouds/src/types.ts#L41)

___

### ReservedOrHighPoint

 **ReservedOrHighPoint**

In previous revisions of LAS this was High point ("high noise"), in more recent
revisions this value is reserved.

#### Defined in

[packages/pointclouds/src/types.ts:33](https://github.com/cognitedata/reveal/blob/71be00fcc/viewer/packages/pointclouds/src/types.ts#L33)

___

### RoadSurface

 **RoadSurface**

#### Defined in

[packages/pointclouds/src/types.ts:36](https://github.com/cognitedata/reveal/blob/71be00fcc/viewer/packages/pointclouds/src/types.ts#L36)

___

### Snow

 **Snow**

#### Defined in

[packages/pointclouds/src/types.ts:74](https://github.com/cognitedata/reveal/blob/71be00fcc/viewer/packages/pointclouds/src/types.ts#L74)

___

### TemporalExclusion

 **TemporalExclusion**

Features excluded due to changes over time between data sources  e.g., water
levels, landslides, permafrost

#### Defined in

[packages/pointclouds/src/types.ts:79](https://github.com/cognitedata/reveal/blob/71be00fcc/viewer/packages/pointclouds/src/types.ts#L79)

___

### TransmissionTower

 **TransmissionTower**

#### Defined in

[packages/pointclouds/src/types.ts:50](https://github.com/cognitedata/reveal/blob/71be00fcc/viewer/packages/pointclouds/src/types.ts#L50)

___

### Unclassified

 **Unclassified**

#### Defined in

[packages/pointclouds/src/types.ts:19](https://github.com/cognitedata/reveal/blob/71be00fcc/viewer/packages/pointclouds/src/types.ts#L19)

___

### UserDefinableOffset

 **UserDefinableOffset**

First user definable class identifier (64).
Values up to and including 63 are reserved

#### Defined in

[packages/pointclouds/src/types.ts:85](https://github.com/cognitedata/reveal/blob/71be00fcc/viewer/packages/pointclouds/src/types.ts#L85)

___

### Water

 **Water**

#### Defined in

[packages/pointclouds/src/types.ts:34](https://github.com/cognitedata/reveal/blob/71be00fcc/viewer/packages/pointclouds/src/types.ts#L34)

___

### WireConductor

 **WireConductor**

Wire conductor (phase).

#### Defined in

[packages/pointclouds/src/types.ts:49](https://github.com/cognitedata/reveal/blob/71be00fcc/viewer/packages/pointclouds/src/types.ts#L49)

___

### WireGuard

 **WireGuard**

Wire guard shield.

#### Defined in

[packages/pointclouds/src/types.ts:45](https://github.com/cognitedata/reveal/blob/71be00fcc/viewer/packages/pointclouds/src/types.ts#L45)

___

### WireStructureConnector

 **WireStructureConnector**

Wire-structure connector (e.g. insulator).

#### Defined in

[packages/pointclouds/src/types.ts:54](https://github.com/cognitedata/reveal/blob/71be00fcc/viewer/packages/pointclouds/src/types.ts#L54)


<!-- SOURCE_END: reveal/documentation\versioned_docs\version-3.x\api\enums\cognite_reveal.WellKnownAsprsPointClassCodes.md -->

================================================================================


<!-- SOURCE_START: reveal/documentation\versioned_docs\version-3.x\api\enums\cognite_reveal_extensions_datasource.File3dFormat.md -->
## File: reveal/documentation\versioned_docs\version-3.x\api\enums\cognite_reveal_extensions_datasource.File3dFormat.md

---
id: "cognite_reveal_extensions_datasource.File3dFormat"
title: "Enumeration: File3dFormat"
sidebar_label: "File3dFormat"
custom_edit_url: null
---

[@cognite/reveal/extensions/datasource](../modules/cognite_reveal_extensions_datasource.md).File3dFormat

## Enumeration Members

### AnyFormat

 **AnyFormat**

#### Defined in

[packages/modeldata-api/src/types.ts:41](https://github.com/cognitedata/reveal/blob/71be00fcc/viewer/packages/modeldata-api/src/types.ts#L41)

___

### EptPointCloud

 **EptPointCloud**

#### Defined in

[packages/modeldata-api/src/types.ts:32](https://github.com/cognitedata/reveal/blob/71be00fcc/viewer/packages/modeldata-api/src/types.ts#L32)

___

### GltfCadModel

 **GltfCadModel**

Reveal v9 and above (GLTF based output)

#### Defined in

[packages/modeldata-api/src/types.ts:40](https://github.com/cognitedata/reveal/blob/71be00fcc/viewer/packages/modeldata-api/src/types.ts#L40)

___

### RevealCadModel

 **RevealCadModel**

V8 models only due to bug for version checks in Reveal \<3.0

#### Defined in

[packages/modeldata-api/src/types.ts:36](https://github.com/cognitedata/reveal/blob/71be00fcc/viewer/packages/modeldata-api/src/types.ts#L36)


<!-- SOURCE_END: reveal/documentation\versioned_docs\version-3.x\api\enums\cognite_reveal_extensions_datasource.File3dFormat.md -->

================================================================================


<!-- SOURCE_START: reveal/documentation\versioned_docs\version-3.x\api\enums\cognite_reveal_tools.BingMapImageFormat.md -->
## File: reveal/documentation\versioned_docs\version-3.x\api\enums\cognite_reveal_tools.BingMapImageFormat.md

---
id: "cognite_reveal_tools.BingMapImageFormat"
title: "Enumeration: BingMapImageFormat"
sidebar_label: "BingMapImageFormat"
custom_edit_url: null
---

[@cognite/reveal/tools](../modules/cognite_reveal_tools.md).BingMapImageFormat

Bing Map Tile Image formats

## Enumeration Members

### GIF

 **GIF**

#### Defined in

[packages/tools/src/Geomap/MapConfig.ts:87](https://github.com/cognitedata/reveal/blob/71be00fcc/viewer/packages/tools/src/Geomap/MapConfig.ts#L87)

___

### JPEG

 **JPEG**

#### Defined in

[packages/tools/src/Geomap/MapConfig.ts:88](https://github.com/cognitedata/reveal/blob/71be00fcc/viewer/packages/tools/src/Geomap/MapConfig.ts#L88)

___

### PNG

 **PNG**

#### Defined in

[packages/tools/src/Geomap/MapConfig.ts:89](https://github.com/cognitedata/reveal/blob/71be00fcc/viewer/packages/tools/src/Geomap/MapConfig.ts#L89)


<!-- SOURCE_END: reveal/documentation\versioned_docs\version-3.x\api\enums\cognite_reveal_tools.BingMapImageFormat.md -->

================================================================================


<!-- SOURCE_START: reveal/documentation\versioned_docs\version-3.x\api\enums\cognite_reveal_tools.BingMapType.md -->
## File: reveal/documentation\versioned_docs\version-3.x\api\enums\cognite_reveal_tools.BingMapType.md

---
id: "cognite_reveal_tools.BingMapType"
title: "Enumeration: BingMapType"
sidebar_label: "BingMapType"
custom_edit_url: null
---

[@cognite/reveal/tools](../modules/cognite_reveal_tools.md).BingMapType

Bing Map View (aerial, road, bird's eye view of the map)

## Enumeration Members

### Aerial

 **Aerial**

#### Defined in

[packages/tools/src/Geomap/MapConfig.ts:76](https://github.com/cognitedata/reveal/blob/71be00fcc/viewer/packages/tools/src/Geomap/MapConfig.ts#L76)

___

### Aerial\_Labels

 **Aerial\_Labels**

#### Defined in

[packages/tools/src/Geomap/MapConfig.ts:78](https://github.com/cognitedata/reveal/blob/71be00fcc/viewer/packages/tools/src/Geomap/MapConfig.ts#L78)

___

### Oblique

 **Oblique**

#### Defined in

[packages/tools/src/Geomap/MapConfig.ts:79](https://github.com/cognitedata/reveal/blob/71be00fcc/viewer/packages/tools/src/Geomap/MapConfig.ts#L79)

___

### Oblique\_Labels

 **Oblique\_Labels**

#### Defined in

[packages/tools/src/Geomap/MapConfig.ts:80](https://github.com/cognitedata/reveal/blob/71be00fcc/viewer/packages/tools/src/Geomap/MapConfig.ts#L80)

___

### Road

 **Road**

#### Defined in

[packages/tools/src/Geomap/MapConfig.ts:77](https://github.com/cognitedata/reveal/blob/71be00fcc/viewer/packages/tools/src/Geomap/MapConfig.ts#L77)


<!-- SOURCE_END: reveal/documentation\versioned_docs\version-3.x\api\enums\cognite_reveal_tools.BingMapType.md -->

================================================================================


<!-- SOURCE_START: reveal/documentation\versioned_docs\version-3.x\api\enums\cognite_reveal_tools.Corner.md -->
## File: reveal/documentation\versioned_docs\version-3.x\api\enums\cognite_reveal_tools.Corner.md

---
id: "cognite_reveal_tools.Corner"
title: "Enumeration: Corner"
sidebar_label: "Corner"
custom_edit_url: null
---

[@cognite/reveal/tools](../modules/cognite_reveal_tools.md).Corner

A corner of the viewer.

## Enumeration Members

### BottomLeft

 **BottomLeft**

#### Defined in

[packages/tools/src/AxisView/types.ts:100](https://github.com/cognitedata/reveal/blob/71be00fcc/viewer/packages/tools/src/AxisView/types.ts#L100)

___

### BottomRight

 **BottomRight**

#### Defined in

[packages/tools/src/AxisView/types.ts:101](https://github.com/cognitedata/reveal/blob/71be00fcc/viewer/packages/tools/src/AxisView/types.ts#L101)

___

### TopLeft

 **TopLeft**

#### Defined in

[packages/tools/src/AxisView/types.ts:99](https://github.com/cognitedata/reveal/blob/71be00fcc/viewer/packages/tools/src/AxisView/types.ts#L99)

___

### TopRight

 **TopRight**

#### Defined in

[packages/tools/src/AxisView/types.ts:98](https://github.com/cognitedata/reveal/blob/71be00fcc/viewer/packages/tools/src/AxisView/types.ts#L98)


<!-- SOURCE_END: reveal/documentation\versioned_docs\version-3.x\api\enums\cognite_reveal_tools.Corner.md -->

================================================================================


<!-- SOURCE_START: reveal/documentation\versioned_docs\version-3.x\api\enums\cognite_reveal_tools.HereMapImageFormat.md -->
## File: reveal/documentation\versioned_docs\version-3.x\api\enums\cognite_reveal_tools.HereMapImageFormat.md

---
id: "cognite_reveal_tools.HereMapImageFormat"
title: "Enumeration: HereMapImageFormat"
sidebar_label: "HereMapImageFormat"
custom_edit_url: null
---

[@cognite/reveal/tools](../modules/cognite_reveal_tools.md).HereMapImageFormat

Here Map Tiles Image Format

## Enumeration Members

### JPG

 **JPG**

#### Defined in

[packages/tools/src/Geomap/MapConfig.ts:118](https://github.com/cognitedata/reveal/blob/71be00fcc/viewer/packages/tools/src/Geomap/MapConfig.ts#L118)

___

### PNG

 **PNG**

#### Defined in

[packages/tools/src/Geomap/MapConfig.ts:116](https://github.com/cognitedata/reveal/blob/71be00fcc/viewer/packages/tools/src/Geomap/MapConfig.ts#L116)

___

### PNG8

 **PNG8**

#### Defined in

[packages/tools/src/Geomap/MapConfig.ts:117](https://github.com/cognitedata/reveal/blob/71be00fcc/viewer/packages/tools/src/Geomap/MapConfig.ts#L117)


<!-- SOURCE_END: reveal/documentation\versioned_docs\version-3.x\api\enums\cognite_reveal_tools.HereMapImageFormat.md -->

================================================================================


<!-- SOURCE_START: reveal/documentation\versioned_docs\version-3.x\api\enums\cognite_reveal_tools.HereMapScheme.md -->
## File: reveal/documentation\versioned_docs\version-3.x\api\enums\cognite_reveal_tools.HereMapScheme.md

---
id: "cognite_reveal_tools.HereMapScheme"
title: "Enumeration: HereMapScheme"
sidebar_label: "HereMapScheme"
custom_edit_url: null
---

[@cognite/reveal/tools](../modules/cognite_reveal_tools.md).HereMapScheme

Here Map View Scheme like day, night, satellite, terrain

## Enumeration Members

### Day

 **Day**

#### Defined in

[packages/tools/src/Geomap/MapConfig.ts:106](https://github.com/cognitedata/reveal/blob/71be00fcc/viewer/packages/tools/src/Geomap/MapConfig.ts#L106)

___

### Night

 **Night**

#### Defined in

[packages/tools/src/Geomap/MapConfig.ts:107](https://github.com/cognitedata/reveal/blob/71be00fcc/viewer/packages/tools/src/Geomap/MapConfig.ts#L107)

___

### Satellite

 **Satellite**

#### Defined in

[packages/tools/src/Geomap/MapConfig.ts:109](https://github.com/cognitedata/reveal/blob/71be00fcc/viewer/packages/tools/src/Geomap/MapConfig.ts#L109)

___

### Terrain

 **Terrain**

#### Defined in

[packages/tools/src/Geomap/MapConfig.ts:108](https://github.com/cognitedata/reveal/blob/71be00fcc/viewer/packages/tools/src/Geomap/MapConfig.ts#L108)


<!-- SOURCE_END: reveal/documentation\versioned_docs\version-3.x\api\enums\cognite_reveal_tools.HereMapScheme.md -->

================================================================================


<!-- SOURCE_START: reveal/documentation\versioned_docs\version-3.x\api\enums\cognite_reveal_tools.HereMapType.md -->
## File: reveal/documentation\versioned_docs\version-3.x\api\enums\cognite_reveal_tools.HereMapType.md

---
id: "cognite_reveal_tools.HereMapType"
title: "Enumeration: HereMapType"
sidebar_label: "HereMapType"
custom_edit_url: null
---

[@cognite/reveal/tools](../modules/cognite_reveal_tools.md).HereMapType

Here Map types

## Enumeration Members

### Aerial

 **Aerial**

#### Defined in

[packages/tools/src/Geomap/MapConfig.ts:96](https://github.com/cognitedata/reveal/blob/71be00fcc/viewer/packages/tools/src/Geomap/MapConfig.ts#L96)

___

### Base

 **Base**

#### Defined in

[packages/tools/src/Geomap/MapConfig.ts:97](https://github.com/cognitedata/reveal/blob/71be00fcc/viewer/packages/tools/src/Geomap/MapConfig.ts#L97)

___

### Pano

 **Pano**

#### Defined in

[packages/tools/src/Geomap/MapConfig.ts:98](https://github.com/cognitedata/reveal/blob/71be00fcc/viewer/packages/tools/src/Geomap/MapConfig.ts#L98)

___

### Traffic

 **Traffic**

#### Defined in

[packages/tools/src/Geomap/MapConfig.ts:99](https://github.com/cognitedata/reveal/blob/71be00fcc/viewer/packages/tools/src/Geomap/MapConfig.ts#L99)


<!-- SOURCE_END: reveal/documentation\versioned_docs\version-3.x\api\enums\cognite_reveal_tools.HereMapType.md -->

================================================================================


<!-- SOURCE_START: reveal/documentation\versioned_docs\version-3.x\api\enums\cognite_reveal_tools.MapboxImageFormat.md -->
## File: reveal/documentation\versioned_docs\version-3.x\api\enums\cognite_reveal_tools.MapboxImageFormat.md

---
id: "cognite_reveal_tools.MapboxImageFormat"
title: "Enumeration: MapboxImageFormat"
sidebar_label: "MapboxImageFormat"
custom_edit_url: null
---

[@cognite/reveal/tools](../modules/cognite_reveal_tools.md).MapboxImageFormat

Mapbox Map image tile format

## Enumeration Members

### JPG70

 **JPG70**

#### Defined in

[packages/tools/src/Geomap/MapConfig.ts:66](https://github.com/cognitedata/reveal/blob/71be00fcc/viewer/packages/tools/src/Geomap/MapConfig.ts#L66)

___

### JPG80

 **JPG80**

#### Defined in

[packages/tools/src/Geomap/MapConfig.ts:67](https://github.com/cognitedata/reveal/blob/71be00fcc/viewer/packages/tools/src/Geomap/MapConfig.ts#L67)

___

### JPG90

 **JPG90**

#### Defined in

[packages/tools/src/Geomap/MapConfig.ts:68](https://github.com/cognitedata/reveal/blob/71be00fcc/viewer/packages/tools/src/Geomap/MapConfig.ts#L68)

___

### PNG

 **PNG**

#### Defined in

[packages/tools/src/Geomap/MapConfig.ts:61](https://github.com/cognitedata/reveal/blob/71be00fcc/viewer/packages/tools/src/Geomap/MapConfig.ts#L61)

___

### PNG128

 **PNG128**

#### Defined in

[packages/tools/src/Geomap/MapConfig.ts:64](https://github.com/cognitedata/reveal/blob/71be00fcc/viewer/packages/tools/src/Geomap/MapConfig.ts#L64)

___

### PNG256

 **PNG256**

#### Defined in

[packages/tools/src/Geomap/MapConfig.ts:65](https://github.com/cognitedata/reveal/blob/71be00fcc/viewer/packages/tools/src/Geomap/MapConfig.ts#L65)

___

### PNG32

 **PNG32**

#### Defined in

[packages/tools/src/Geomap/MapConfig.ts:62](https://github.com/cognitedata/reveal/blob/71be00fcc/viewer/packages/tools/src/Geomap/MapConfig.ts#L62)

___

### PNG64

 **PNG64**

#### Defined in

[packages/tools/src/Geomap/MapConfig.ts:63](https://github.com/cognitedata/reveal/blob/71be00fcc/viewer/packages/tools/src/Geomap/MapConfig.ts#L63)

___

### PNGRAW

 **PNGRAW**

#### Defined in

[packages/tools/src/Geomap/MapConfig.ts:69](https://github.com/cognitedata/reveal/blob/71be00fcc/viewer/packages/tools/src/Geomap/MapConfig.ts#L69)


<!-- SOURCE_END: reveal/documentation\versioned_docs\version-3.x\api\enums\cognite_reveal_tools.MapboxImageFormat.md -->

================================================================================


<!-- SOURCE_START: reveal/documentation\versioned_docs\version-3.x\api\enums\cognite_reveal_tools.MapboxMode.md -->
## File: reveal/documentation\versioned_docs\version-3.x\api\enums\cognite_reveal_tools.MapboxMode.md

---
id: "cognite_reveal_tools.MapboxMode"
title: "Enumeration: MapboxMode"
sidebar_label: "MapboxMode"
custom_edit_url: null
---

[@cognite/reveal/tools](../modules/cognite_reveal_tools.md).MapboxMode

Map data for Mapbox

## Enumeration Members

### Map\_Id

 **Map\_Id**

Access the map data using a map id or Tileset id. For details see https://docs.mapbox.com/help/glossary/tileset-id/

#### Defined in

[packages/tools/src/Geomap/MapConfig.ts:26](https://github.com/cognitedata/reveal/blob/71be00fcc/viewer/packages/tools/src/Geomap/MapConfig.ts#L26)

___

### Style

 **Style**

Access the map data using a map style. For details see https://docs.mapbox.com/api/maps/styles/

#### Defined in

[packages/tools/src/Geomap/MapConfig.ts:22](https://github.com/cognitedata/reveal/blob/71be00fcc/viewer/packages/tools/src/Geomap/MapConfig.ts#L22)


<!-- SOURCE_END: reveal/documentation\versioned_docs\version-3.x\api\enums\cognite_reveal_tools.MapboxMode.md -->

================================================================================


<!-- SOURCE_START: reveal/documentation\versioned_docs\version-3.x\api\enums\cognite_reveal_tools.MapboxStyle.md -->
## File: reveal/documentation\versioned_docs\version-3.x\api\enums\cognite_reveal_tools.MapboxStyle.md

---
id: "cognite_reveal_tools.MapboxStyle"
title: "Enumeration: MapboxStyle"
sidebar_label: "MapboxStyle"
custom_edit_url: null
---

[@cognite/reveal/tools](../modules/cognite_reveal_tools.md).MapboxStyle

Mapbox Map Style, these are pre-defined styles using map/tileset id, created in Mapbox Studio style editor.
This is used when MapboxMode.Style is used for mode.

## Enumeration Members

### Dark

 **Dark**

#### Defined in

[packages/tools/src/Geomap/MapConfig.ts:37](https://github.com/cognitedata/reveal/blob/71be00fcc/viewer/packages/tools/src/Geomap/MapConfig.ts#L37)

___

### Light

 **Light**

#### Defined in

[packages/tools/src/Geomap/MapConfig.ts:36](https://github.com/cognitedata/reveal/blob/71be00fcc/viewer/packages/tools/src/Geomap/MapConfig.ts#L36)

___

### Navigation\_Day

 **Navigation\_Day**

#### Defined in

[packages/tools/src/Geomap/MapConfig.ts:40](https://github.com/cognitedata/reveal/blob/71be00fcc/viewer/packages/tools/src/Geomap/MapConfig.ts#L40)

___

### Navigation\_Guide\_Day

 **Navigation\_Guide\_Day**

#### Defined in

[packages/tools/src/Geomap/MapConfig.ts:42](https://github.com/cognitedata/reveal/blob/71be00fcc/viewer/packages/tools/src/Geomap/MapConfig.ts#L42)

___

### Navigation\_Guide\_Night

 **Navigation\_Guide\_Night**

#### Defined in

[packages/tools/src/Geomap/MapConfig.ts:43](https://github.com/cognitedata/reveal/blob/71be00fcc/viewer/packages/tools/src/Geomap/MapConfig.ts#L43)

___

### Navigation\_Night

 **Navigation\_Night**

#### Defined in

[packages/tools/src/Geomap/MapConfig.ts:41](https://github.com/cognitedata/reveal/blob/71be00fcc/viewer/packages/tools/src/Geomap/MapConfig.ts#L41)

___

### Outdoor

 **Outdoor**

#### Defined in

[packages/tools/src/Geomap/MapConfig.ts:35](https://github.com/cognitedata/reveal/blob/71be00fcc/viewer/packages/tools/src/Geomap/MapConfig.ts#L35)

___

### Satellite

 **Satellite**

#### Defined in

[packages/tools/src/Geomap/MapConfig.ts:38](https://github.com/cognitedata/reveal/blob/71be00fcc/viewer/packages/tools/src/Geomap/MapConfig.ts#L38)

___

### Satellite\_Streets

 **Satellite\_Streets**

#### Defined in

[packages/tools/src/Geomap/MapConfig.ts:39](https://github.com/cognitedata/reveal/blob/71be00fcc/viewer/packages/tools/src/Geomap/MapConfig.ts#L39)

___

### Streets

 **Streets**

#### Defined in

[packages/tools/src/Geomap/MapConfig.ts:34](https://github.com/cognitedata/reveal/blob/71be00fcc/viewer/packages/tools/src/Geomap/MapConfig.ts#L34)


<!-- SOURCE_END: reveal/documentation\versioned_docs\version-3.x\api\enums\cognite_reveal_tools.MapboxStyle.md -->

================================================================================


<!-- SOURCE_START: reveal/documentation\versioned_docs\version-3.x\api\enums\cognite_reveal_tools.MapProviders.md -->
## File: reveal/documentation\versioned_docs\version-3.x\api\enums\cognite_reveal_tools.MapProviders.md

---
id: "cognite_reveal_tools.MapProviders"
title: "Enumeration: MapProviders"
sidebar_label: "MapProviders"
custom_edit_url: null
---

[@cognite/reveal/tools](../modules/cognite_reveal_tools.md).MapProviders

Supported map Providers Bing, Here & Mapbox

## Enumeration Members

### BingMap

 **BingMap**

#### Defined in

[packages/tools/src/Geomap/MapConfig.ts:9](https://github.com/cognitedata/reveal/blob/71be00fcc/viewer/packages/tools/src/Geomap/MapConfig.ts#L9)

___

### HereMap

 **HereMap**

#### Defined in

[packages/tools/src/Geomap/MapConfig.ts:10](https://github.com/cognitedata/reveal/blob/71be00fcc/viewer/packages/tools/src/Geomap/MapConfig.ts#L10)

___

### MapboxMap

 **MapboxMap**

#### Defined in

[packages/tools/src/Geomap/MapConfig.ts:11](https://github.com/cognitedata/reveal/blob/71be00fcc/viewer/packages/tools/src/Geomap/MapConfig.ts#L11)

___

### OpenStreetMap

 **OpenStreetMap**

#### Defined in

[packages/tools/src/Geomap/MapConfig.ts:12](https://github.com/cognitedata/reveal/blob/71be00fcc/viewer/packages/tools/src/Geomap/MapConfig.ts#L12)


<!-- SOURCE_END: reveal/documentation\versioned_docs\version-3.x\api\enums\cognite_reveal_tools.MapProviders.md -->

================================================================================


<!-- SOURCE_START: reveal/documentation\versioned_docs\version-3.x\api\index.md -->
## File: reveal/documentation\versioned_docs\version-3.x\api\index.md

---
id: "index"
title: "@cognite/reveal"
sidebar_label: "Readme"
sidebar_position: 0
custom_edit_url: null
---

`@cognite/reveal` has three modules:
- [@cognite/reveal](#module-cognitereveal) is the main module and has the main entry point of Reveal, [`Cognite3DViewer`](#class-cognite3dviewer). CAD models are represented by [`Cognite3DModel`](#class-cognite3dmodel) and points clouds by [`CognitePointCloudModel`](#class-cognitepointcloudmodel).
- [@congite/reveal/tools](#module-cogniterevealtools) contains a set of tools, e.g. [`AxisViewTool`](#class-axisviewtool), [`GeomapTool`](#class-geomaptool), [`TimelineTool`](#class-timelinetool), [`ExplodedViewTool`](#class-explodedviewtool) and [`HtmlOverlayTool`](#class-htmloverlaytool) that works with `Cognite3DViewer`.
- [@cognite/reveal/extensions/datasource](#module-cogniterevealextensionsdatasource) allows providing custom data sources for geometry and model metadata.


<!-- SOURCE_END: reveal/documentation\versioned_docs\version-3.x\api\index.md -->

================================================================================


<!-- SOURCE_START: reveal/documentation\versioned_docs\version-3.x\api\interfaces\cognite_reveal.AddModelOptions.md -->
## File: reveal/documentation\versioned_docs\version-3.x\api\interfaces\cognite_reveal.AddModelOptions.md

---
id: "cognite_reveal.AddModelOptions"
title: "Interface: AddModelOptions"
sidebar_label: "AddModelOptions"
custom_edit_url: null
---

[@cognite/reveal](../modules/cognite_reveal.md).AddModelOptions

## Properties

### geometryFilter

 `Optional` **geometryFilter**: [`GeometryFilter`](../modules/cognite_reveal.md#geometryfilter)

#### Defined in

[packages/api/src/public/migration/types.ts:176](https://github.com/cognitedata/reveal/blob/71be00fcc/viewer/packages/api/src/public/migration/types.ts#L176)

___

### localPath

 `Optional` **localPath**: `string`

#### Defined in

[packages/api/src/public/migration/types.ts:175](https://github.com/cognitedata/reveal/blob/71be00fcc/viewer/packages/api/src/public/migration/types.ts#L175)

___

### modelId

 **modelId**: `number`

#### Defined in

[packages/api/src/public/migration/types.ts:172](https://github.com/cognitedata/reveal/blob/71be00fcc/viewer/packages/api/src/public/migration/types.ts#L172)

___

### revisionId

 **revisionId**: `number`

#### Defined in

[packages/api/src/public/migration/types.ts:173](https://github.com/cognitedata/reveal/blob/71be00fcc/viewer/packages/api/src/public/migration/types.ts#L173)


<!-- SOURCE_END: reveal/documentation\versioned_docs\version-3.x\api\interfaces\cognite_reveal.AddModelOptions.md -->

================================================================================


<!-- SOURCE_START: reveal/documentation\versioned_docs\version-3.x\api\interfaces\cognite_reveal.AreaCollection.md -->
## File: reveal/documentation\versioned_docs\version-3.x\api\interfaces\cognite_reveal.AreaCollection.md

---
id: "cognite_reveal.AreaCollection"
title: "Interface: AreaCollection"
sidebar_label: "AreaCollection"
custom_edit_url: null
---

[@cognite/reveal](../modules/cognite_reveal.md).AreaCollection

Represents a collection of areas/axis-aligned
bounding boxes for use e.g. for load prioritization. Implementations
are not expected to store all areas inserted with `addAreas`,
but rather some "representative box set" covering the inserted areas.
Performance will be better the fewer boxes the representative set contains,
while the effectiveness of node prioritization will suffer if the
representative set covers too much area that is not part
of the inserted boxes

## Implemented by

- [`ClusteredAreaCollection`](../classes/cognite_reveal.ClusteredAreaCollection.md)

## Properties

### isEmpty

 `Readonly` **isEmpty**: `boolean`

#### Defined in

[packages/cad-styling/src/prioritized/AreaCollection.ts:16](https://github.com/cognitedata/reveal/blob/71be00fcc/viewer/packages/cad-styling/src/prioritized/AreaCollection.ts#L16)

## Methods

### addAreas

 **addAreas**(`boxes`): `void`

Add areas to be covered by the representative set of this
AreaCollection.

#### Parameters

| Name | Type |
| :------ | :------ |
| `boxes` | `Iterable`\<`Box3`\> |

#### Returns

`void`

#### Defined in

[packages/cad-styling/src/prioritized/AreaCollection.ts:34](https://github.com/cognitedata/reveal/blob/71be00fcc/viewer/packages/cad-styling/src/prioritized/AreaCollection.ts#L34)

___

### areas

 **areas**(): `Generator`\<`Box3`, `any`, `unknown`\>

Return some set of boxes that cover the boxes inserted with `addAreas`.
It is required that each inserted box is completely covered by some
subset of boxes in the set returned from `areas`

#### Returns

`Generator`\<`Box3`, `any`, `unknown`\>

#### Defined in

[packages/cad-styling/src/prioritized/AreaCollection.ts:23](https://github.com/cognitedata/reveal/blob/71be00fcc/viewer/packages/cad-styling/src/prioritized/AreaCollection.ts#L23)

___

### intersectWith

 **intersectWith**(`boxes`): `void`

Alter the representative set to cover only the intersection between the
representative set of this AreaCollection and the incoming boxes.
Note that the intersection of two representative sets A' and B' that
represent the original box sets A and B will cover the intersection between
A and B, and will thus be a valid representative set for the intersection of A and B.

#### Parameters

| Name | Type |
| :------ | :------ |
| `boxes` | `Iterable`\<`Box3`\> |

#### Returns

`void`

#### Defined in

[packages/cad-styling/src/prioritized/AreaCollection.ts:43](https://github.com/cognitedata/reveal/blob/71be00fcc/viewer/packages/cad-styling/src/prioritized/AreaCollection.ts#L43)

___

### intersectsBox

 **intersectsBox**(`box`): `boolean`

Return whether the input box intersects the AreaCollection.

#### Parameters

| Name | Type |
| :------ | :------ |
| `box` | `Box3` |

#### Returns

`boolean`

#### Defined in

[packages/cad-styling/src/prioritized/AreaCollection.ts:28](https://github.com/cognitedata/reveal/blob/71be00fcc/viewer/packages/cad-styling/src/prioritized/AreaCollection.ts#L28)


<!-- SOURCE_END: reveal/documentation\versioned_docs\version-3.x\api\interfaces\cognite_reveal.AreaCollection.md -->

================================================================================


<!-- SOURCE_START: reveal/documentation\versioned_docs\version-3.x\api\interfaces\cognite_reveal.CameraManager.md -->
## File: reveal/documentation\versioned_docs\version-3.x\api\interfaces\cognite_reveal.CameraManager.md

---
id: "cognite_reveal.CameraManager"
title: "Interface: CameraManager"
sidebar_label: "CameraManager"
custom_edit_url: null
---

[@cognite/reveal](../modules/cognite_reveal.md).CameraManager

Interface for manager responsible for all manipulations to the camera,
including animations and modification of state. Implementations are responsible for
providing a `THREE.PerspectiveCamera` instance to [Cognite3DViewer](../classes/cognite_reveal.Cognite3DViewer.md). Implementations
must trigger the `cameraChange`-event when camera is changed.
The default implementation is [DefaultCameraManager](../classes/cognite_reveal.DefaultCameraManager.md).

## Implemented by

- [`DefaultCameraManager`](../classes/cognite_reveal.DefaultCameraManager.md)

## Properties

### enabled

 `Optional` **enabled**: `boolean`

Enables or disables camera manager. When disabled, camera manager shouldn't consume or react to any DOM events.

#### Defined in

[packages/camera-manager/src/CameraManager.ts:81](https://github.com/cognitedata/reveal/blob/71be00fcc/viewer/packages/camera-manager/src/CameraManager.ts#L81)

## Methods

### dispose

 **dispose**(): `void`

**`obvious`**

#### Returns

`void`

#### Defined in

[packages/camera-manager/src/CameraManager.ts:77](https://github.com/cognitedata/reveal/blob/71be00fcc/viewer/packages/camera-manager/src/CameraManager.ts#L77)

___

### fitCameraToBoundingBox

 **fitCameraToBoundingBox**(`boundingBox`, `duration?`, `radiusFactor?`): `void`

Moves camera to a place where the content of a bounding box is visible to the camera.

#### Parameters

| Name | Type | Description |
| :------ | :------ | :------ |
| `boundingBox` | `Box3` | - |
| `duration?` | `number` | The duration of the animation moving the camera. |
| `radiusFactor?` | `number` | The ratio of the distance from camera to center of box and radius of the box. |

#### Returns

`void`

#### Defined in

[packages/camera-manager/src/CameraManager.ts:65](https://github.com/cognitedata/reveal/blob/71be00fcc/viewer/packages/camera-manager/src/CameraManager.ts#L65)

___

### getCamera

 **getCamera**(): `PerspectiveCamera`

Returns the camera used for rendering in [Cognite3DViewer](../classes/cognite_reveal.Cognite3DViewer.md).
Note that the camera will not be modified directly by Reveal.
Implementations must trigger the `cameraChange`-event whenever the
camera changes.

#### Returns

`PerspectiveCamera`

#### Defined in

[packages/camera-manager/src/CameraManager.ts:21](https://github.com/cognitedata/reveal/blob/71be00fcc/viewer/packages/camera-manager/src/CameraManager.ts#L21)

___

### getCameraState

 **getCameraState**(): `Required`\<[`CameraState`](../modules/cognite_reveal.md#camerastate)\>

Get camera's state

#### Returns

`Required`\<[`CameraState`](../modules/cognite_reveal.md#camerastate)\>

Camera state: position, target and rotation.

#### Defined in

[packages/camera-manager/src/CameraManager.ts:44](https://github.com/cognitedata/reveal/blob/71be00fcc/viewer/packages/camera-manager/src/CameraManager.ts#L44)

___

### off

 **off**(`event`, `callback`): `void`

Unsubscribes from changes of the camera event.

#### Parameters

| Name | Type | Description |
| :------ | :------ | :------ |
| `event` | ``"cameraChange"`` | Name of the event. |
| `callback` | [`CameraChangeDelegate`](../modules/cognite_reveal.md#camerachangedelegate) | Callback function to be unsubscribed. |

#### Returns

`void`

#### Defined in

[packages/camera-manager/src/CameraManager.ts:57](https://github.com/cognitedata/reveal/blob/71be00fcc/viewer/packages/camera-manager/src/CameraManager.ts#L57)

___

### on

 **on**(`event`, `callback`): `void`

Subscribes to changes of the camera event. This is used by Reveal to react on changes of the camera.

#### Parameters

| Name | Type | Description |
| :------ | :------ | :------ |
| `event` | ``"cameraChange"`` | Name of the event. |
| `callback` | [`CameraChangeDelegate`](../modules/cognite_reveal.md#camerachangedelegate) | Callback to be called when the event is fired. |

#### Returns

`void`

#### Defined in

[packages/camera-manager/src/CameraManager.ts:51](https://github.com/cognitedata/reveal/blob/71be00fcc/viewer/packages/camera-manager/src/CameraManager.ts#L51)

___

### setCameraState

 **setCameraState**(`state`): `void`

Set camera's state. Rotation and target can't be set at the same time as they could conflict,
should throw an error if both are passed with non-zero value inside state.

**`example`**
```js
// store position, target
const { position, target } = cameraManager.getCameraState();
// restore position, target
cameraManager.setCameraState({ position, target });
```

#### Parameters

| Name | Type | Description |
| :------ | :------ | :------ |
| `state` | [`CameraState`](../modules/cognite_reveal.md#camerastate) | Camera state, all fields are optional. |

#### Returns

`void`

#### Defined in

[packages/camera-manager/src/CameraManager.ts:38](https://github.com/cognitedata/reveal/blob/71be00fcc/viewer/packages/camera-manager/src/CameraManager.ts#L38)

___

### update

 **update**(`deltaTime`, `boundingBox`): `void`

Updates internal state of camera manager. Expected to update visual state of the camera
as well as it's near and far planes if needed. Called in `requestAnimationFrame`-loop.
Reveal performance affects frequency with which this method is called.

#### Parameters

| Name | Type | Description |
| :------ | :------ | :------ |
| `deltaTime` | `number` | Delta time since last update in seconds. |
| `boundingBox` | `Box3` | Global bounding box of the model(s) and any custom objects added to the scene. |

#### Returns

`void`

#### Defined in

[packages/camera-manager/src/CameraManager.ts:73](https://github.com/cognitedata/reveal/blob/71be00fcc/viewer/packages/camera-manager/src/CameraManager.ts#L73)


<!-- SOURCE_END: reveal/documentation\versioned_docs\version-3.x\api\interfaces\cognite_reveal.CameraManager.md -->

================================================================================


<!-- SOURCE_START: reveal/documentation\versioned_docs\version-3.x\api\interfaces\cognite_reveal.CdfModelNodeCollectionDataProvider.md -->
## File: reveal/documentation\versioned_docs\version-3.x\api\interfaces\cognite_reveal.CdfModelNodeCollectionDataProvider.md

---
id: "cognite_reveal.CdfModelNodeCollectionDataProvider"
title: "Interface: CdfModelNodeCollectionDataProvider"
sidebar_label: "CdfModelNodeCollectionDataProvider"
custom_edit_url: null
---

[@cognite/reveal](../modules/cognite_reveal.md).CdfModelNodeCollectionDataProvider

Provides metadata needed to get asset mappings for a CDF 3D model

## Implemented by

- [`Cognite3DModel`](../classes/cognite_reveal.Cognite3DModel.md)

## Properties

### modelId

 **modelId**: `number`

Model and revision IDs for the model

#### Defined in

[packages/cad-styling/src/CdfModelNodeCollectionDataProvider.ts:29](https://github.com/cognitedata/reveal/blob/71be00fcc/viewer/packages/cad-styling/src/CdfModelNodeCollectionDataProvider.ts#L29)

___

### nodeCount

 **nodeCount**: `number`

Total count of nodes in the model

#### Defined in

[packages/cad-styling/src/CdfModelNodeCollectionDataProvider.ts:24](https://github.com/cognitedata/reveal/blob/71be00fcc/viewer/packages/cad-styling/src/CdfModelNodeCollectionDataProvider.ts#L24)

___

### revisionId

 **revisionId**: `number`

#### Defined in

[packages/cad-styling/src/CdfModelNodeCollectionDataProvider.ts:30](https://github.com/cognitedata/reveal/blob/71be00fcc/viewer/packages/cad-styling/src/CdfModelNodeCollectionDataProvider.ts#L30)

## Methods

### mapBoxFromCdfToModelCoordinates

 **mapBoxFromCdfToModelCoordinates**(`box`, `out?`): `Box3`

Maps a box from CDF space to Reveal space

#### Parameters

| Name | Type |
| :------ | :------ |
| `box` | `Box3` |
| `out?` | `Box3` |

#### Returns

`Box3`

#### Defined in

[packages/cad-styling/src/CdfModelNodeCollectionDataProvider.ts:19](https://github.com/cognitedata/reveal/blob/71be00fcc/viewer/packages/cad-styling/src/CdfModelNodeCollectionDataProvider.ts#L19)

___

### mapBoxFromModelToCdfCoordinates

 **mapBoxFromModelToCdfCoordinates**(`box`, `out?`): `Box3`

Maps a box from Reveal space to CDF space

#### Parameters

| Name | Type |
| :------ | :------ |
| `box` | `Box3` |
| `out?` | `Box3` |

#### Returns

`Box3`

#### Defined in

[packages/cad-styling/src/CdfModelNodeCollectionDataProvider.ts:14](https://github.com/cognitedata/reveal/blob/71be00fcc/viewer/packages/cad-styling/src/CdfModelNodeCollectionDataProvider.ts#L14)


<!-- SOURCE_END: reveal/documentation\versioned_docs\version-3.x\api\interfaces\cognite_reveal.CdfModelNodeCollectionDataProvider.md -->

================================================================================


<!-- SOURCE_START: reveal/documentation\versioned_docs\version-3.x\api\interfaces\cognite_reveal.Cognite3DViewerOptions.md -->
## File: reveal/documentation\versioned_docs\version-3.x\api\interfaces\cognite_reveal.Cognite3DViewerOptions.md

---
id: "cognite_reveal.Cognite3DViewerOptions"
title: "Interface: Cognite3DViewerOptions"
sidebar_label: "Cognite3DViewerOptions"
custom_edit_url: null
---

[@cognite/reveal](../modules/cognite_reveal.md).Cognite3DViewerOptions

## Properties

### antiAliasingHint

 `Optional` **antiAliasingHint**: ``"disabled"`` \| ``"fxaa"`` \| ``"msaa2+fxaa"`` \| ``"msaa4+fxaa"`` \| ``"msaa8+fxaa"`` \| ``"msaa16+fxaa"`` \| ``"msaa2"`` \| ``"msaa4"`` \| ``"msaa8"`` \| ``"msaa16"``

Hints Reveal to use a given anti-aliasing technique.

Fast approximate anti-aliasing (FXAA) is a fast technique that will remove some, but not all aliasing effects. See
https://en.wikipedia.org/wiki/Fast_approximate_anti-aliasing.

Multi-sampling anti-aliasinbg (MSAA) is a technique for taking multiple samples per pixel to avoid aliasing effects.
This mode requires WebGL 2. See https://www.khronos.org/opengl/wiki/Multisampling.

The combined modes will apply both MSAA and FXAA anti-aliasing and yields the best visual result.

When using the MSAA modes combined with FXAA Reveal will fall back to FXAA on WebGL 1. There is no fallback for the
"plain" MSAA modes on WebGL 1.

Currently the default mode is FXAA, but this is subject to change.

#### Defined in

[packages/api/src/public/migration/types.ts:93](https://github.com/cognitedata/reveal/blob/71be00fcc/viewer/packages/api/src/public/migration/types.ts#L93)

___

### cameraManager

 `Optional` **cameraManager**: [`CameraManager`](cognite_reveal.CameraManager.md)

Camera manager instance that is used for controlling the camera.
It is responsible for all manipulations that are done with the camera,
including animations and modification of state. Also, gives ability
to provide custom `THREE.PerspectiveCamera` instance to [Cognite3DViewer](../classes/cognite_reveal.Cognite3DViewer.md).
Default implementation is [DefaultCameraManager](../classes/cognite_reveal.DefaultCameraManager.md).

#### Defined in

[packages/api/src/public/migration/types.ts:64](https://github.com/cognitedata/reveal/blob/71be00fcc/viewer/packages/api/src/public/migration/types.ts#L64)

___

### continuousModelStreaming

 `Optional` **continuousModelStreaming**: `boolean`

Allows for controlling if geometry streaming should be halted when
the camera is moving. Note that this option should left to false on
low-end devices as more loading can cause frame drops.

Default value is set to false.

#### Defined in

[packages/api/src/public/migration/types.ts:149](https://github.com/cognitedata/reveal/blob/71be00fcc/viewer/packages/api/src/public/migration/types.ts#L149)

___

### customDataSource

 `Optional` **customDataSource**: [`DataSource`](cognite_reveal_extensions_datasource.DataSource.md)

Allows providing a custom data source that Reveal will
use to load model data. Note that some features might not
work when implementing a custom data source. Please refer
to the Reveal documentation for details.

Note that the data source must support [CdfModelIdentifier](../classes/cognite_reveal_extensions_datasource.CdfModelIdentifier.md).

This cannot be used together with \{@link _localModels}.

#### Defined in

[packages/api/src/public/migration/types.ts:140](https://github.com/cognitedata/reveal/blob/71be00fcc/viewer/packages/api/src/public/migration/types.ts#L140)

___

### domElement

 `Optional` **domElement**: `HTMLElement`

An existing DOM element that we will render canvas into.

#### Defined in

[packages/api/src/public/migration/types.ts:33](https://github.com/cognitedata/reveal/blob/71be00fcc/viewer/packages/api/src/public/migration/types.ts#L33)

___

### enableEdges

 `Optional` **enableEdges**: `boolean`

Enables / disables visualizing the edges of geometry. Defaults to true.

#### Defined in

[packages/api/src/public/migration/types.ts:125](https://github.com/cognitedata/reveal/blob/71be00fcc/viewer/packages/api/src/public/migration/types.ts#L125)

___

### loadingIndicatorStyle

 `Optional` **loadingIndicatorStyle**: `Object`

Style the loading indicator.

#### Type declaration

| Name | Type | Description |
| :------ | :------ | :------ |
| `opacity` | `number` | Opacity of the spinner in fractions. Valid values are between 0.2 and 1.0. Defaults to 1.0. |
| `placement` | ``"topLeft"`` \| ``"topRight"`` \| ``"bottomLeft"`` \| ``"bottomRight"`` | What corner the spinner should be placed in. Defaults top topLeft. |

#### Defined in

[packages/api/src/public/migration/types.ts:46](https://github.com/cognitedata/reveal/blob/71be00fcc/viewer/packages/api/src/public/migration/types.ts#L46)

___

### logMetrics

 `Optional` **logMetrics**: `boolean`

Send anonymous usage statistics.

#### Defined in

[packages/api/src/public/migration/types.ts:36](https://github.com/cognitedata/reveal/blob/71be00fcc/viewer/packages/api/src/public/migration/types.ts#L36)

___

### onLoading

 `Optional` **onLoading**: [`OnLoadingCallback`](../modules/cognite_reveal.md#onloadingcallback)

Callback to download stream progress.

#### Defined in

[packages/api/src/public/migration/types.ts:128](https://github.com/cognitedata/reveal/blob/71be00fcc/viewer/packages/api/src/public/migration/types.ts#L128)

___

### pointCloudEffects

 `Optional` **pointCloudEffects**: `Object`

Point cloud visualisation effects parameteres.

#### Type declaration

| Name | Type | Description |
| :------ | :------ | :------ |
| `pointBlending?` | `boolean` | Point blending effect, creates more "stable" texture on objects surfaces if point sizing is big enough. Can cause significant decrease in performance on some machines. |

#### Defined in

[packages/api/src/public/migration/types.ts:114](https://github.com/cognitedata/reveal/blob/71be00fcc/viewer/packages/api/src/public/migration/types.ts#L114)

___

### renderTargetOptions

 `Optional` **renderTargetOptions**: `Object`

Render to offscreen buffer instead of canvas.

#### Type declaration

| Name | Type |
| :------ | :------ |
| `autoSetSize?` | `boolean` |
| `target` | `WebGLRenderTarget` |

#### Defined in

[packages/api/src/public/migration/types.ts:41](https://github.com/cognitedata/reveal/blob/71be00fcc/viewer/packages/api/src/public/migration/types.ts#L41)

___

### renderer

 `Optional` **renderer**: `WebGLRenderer`

Renderer used to visualize model (optional).

#### Defined in

[packages/api/src/public/migration/types.ts:66](https://github.com/cognitedata/reveal/blob/71be00fcc/viewer/packages/api/src/public/migration/types.ts#L66)

___

### rendererResolutionThreshold

 `Optional` **rendererResolutionThreshold**: `number`

Generally Reveal will follow the resolution given by the size
of the encapsulating DOM element of the Canvas [Cognite3DViewerOptions.domElement](cognite_reveal.Cognite3DViewerOptions.md#domelement).
To ensure managable performance, Reveal will by default set an upper threshold to limit
the resolution. Setting the [Cognite3DViewerOptions.rendererResolutionThreshold](cognite_reveal.Cognite3DViewerOptions.md#rendererresolutionthreshold) will
set this upper limit of what resolution Reveal will allow.

#### Defined in

[packages/api/src/public/migration/types.ts:75](https://github.com/cognitedata/reveal/blob/71be00fcc/viewer/packages/api/src/public/migration/types.ts#L75)

___

### sdk

 **sdk**: `default`

Initialized connection to CDF used to load data.

#### Defined in

[packages/api/src/public/migration/types.ts:30](https://github.com/cognitedata/reveal/blob/71be00fcc/viewer/packages/api/src/public/migration/types.ts#L30)

___

### ssaoQualityHint

 `Optional` **ssaoQualityHint**: ``"disabled"`` \| ``"medium"`` \| ``"high"`` \| ``"veryhigh"``

Hints the renderer of the quality it should aim for for screen space ambient occlusion,
an effect creating shadows and that gives the rendered image more depth.

#### Defined in

[packages/api/src/public/migration/types.ts:109](https://github.com/cognitedata/reveal/blob/71be00fcc/viewer/packages/api/src/public/migration/types.ts#L109)


<!-- SOURCE_END: reveal/documentation\versioned_docs\version-3.x\api\interfaces\cognite_reveal.Cognite3DViewerOptions.md -->

================================================================================


<!-- SOURCE_START: reveal/documentation\versioned_docs\version-3.x\api\interfaces\cognite_reveal.CogniteModelBase.md -->
## File: reveal/documentation\versioned_docs\version-3.x\api\interfaces\cognite_reveal.CogniteModelBase.md

---
id: "cognite_reveal.CogniteModelBase"
title: "Interface: CogniteModelBase"
sidebar_label: "CogniteModelBase"
custom_edit_url: null
---

[@cognite/reveal](../modules/cognite_reveal.md).CogniteModelBase

## Implemented by

- [`Cognite3DModel`](../classes/cognite_reveal.Cognite3DModel.md)
- [`CognitePointCloudModel`](../classes/cognite_reveal.CognitePointCloudModel.md)

## Properties

### type

 `Readonly` **type**: [`SupportedModelTypes`](../modules/cognite_reveal.md#supportedmodeltypes)

#### Defined in

[packages/model-base/src/CogniteModelBase.ts:13](https://github.com/cognitedata/reveal/blob/71be00fcc/viewer/packages/model-base/src/CogniteModelBase.ts#L13)

## Methods

### dispose

 **dispose**(): `void`

#### Returns

`void`

#### Defined in

[packages/model-base/src/CogniteModelBase.ts:14](https://github.com/cognitedata/reveal/blob/71be00fcc/viewer/packages/model-base/src/CogniteModelBase.ts#L14)

___

### getCameraConfiguration

 **getCameraConfiguration**(): [`CameraConfiguration`](../modules/cognite_reveal.md#cameraconfiguration)

#### Returns

[`CameraConfiguration`](../modules/cognite_reveal.md#cameraconfiguration)

#### Defined in

[packages/model-base/src/CogniteModelBase.ts:16](https://github.com/cognitedata/reveal/blob/71be00fcc/viewer/packages/model-base/src/CogniteModelBase.ts#L16)

___

### getModelBoundingBox

 **getModelBoundingBox**(`outBbox?`, `restrictToMostGeometry?`): `Box3`

#### Parameters

| Name | Type |
| :------ | :------ |
| `outBbox?` | `Box3` |
| `restrictToMostGeometry?` | `boolean` |

#### Returns

`Box3`

#### Defined in

[packages/model-base/src/CogniteModelBase.ts:15](https://github.com/cognitedata/reveal/blob/71be00fcc/viewer/packages/model-base/src/CogniteModelBase.ts#L15)

___

### getModelTransformation

 **getModelTransformation**(`out?`): `Matrix4`

#### Parameters

| Name | Type |
| :------ | :------ |
| `out?` | `Matrix4` |

#### Returns

`Matrix4`

#### Defined in

[packages/model-base/src/CogniteModelBase.ts:18](https://github.com/cognitedata/reveal/blob/71be00fcc/viewer/packages/model-base/src/CogniteModelBase.ts#L18)

___

### setModelTransformation

 **setModelTransformation**(`matrix`): `void`

#### Parameters

| Name | Type |
| :------ | :------ |
| `matrix` | `Matrix4` |

#### Returns

`void`

#### Defined in

[packages/model-base/src/CogniteModelBase.ts:17](https://github.com/cognitedata/reveal/blob/71be00fcc/viewer/packages/model-base/src/CogniteModelBase.ts#L17)


<!-- SOURCE_END: reveal/documentation\versioned_docs\version-3.x\api\interfaces\cognite_reveal.CogniteModelBase.md -->

================================================================================


<!-- SOURCE_START: reveal/documentation\versioned_docs\version-3.x\api\interfaces\cognite_reveal.IntersectionFromPixelOptions.md -->
## File: reveal/documentation\versioned_docs\version-3.x\api\interfaces\cognite_reveal.IntersectionFromPixelOptions.md

---
id: "cognite_reveal.IntersectionFromPixelOptions"
title: "Interface: IntersectionFromPixelOptions"
sidebar_label: "IntersectionFromPixelOptions"
custom_edit_url: null
---

[@cognite/reveal](../modules/cognite_reveal.md).IntersectionFromPixelOptions

Options to control how [Cognite3DViewer.getIntersectionFromPixel](../classes/cognite_reveal.Cognite3DViewer.md#getintersectionfrompixel) behaves.

**`deprecated`** Since 3.1 these options have no effect.

## Properties

### pointIntersectionThreshold

 `Optional` **pointIntersectionThreshold**: `number`

Threshold (in meters) for how close a point must be an intersection
ray for it to be considered an intersection for point clouds. Defaults
to 0.05.

**`deprecated`** Since 3.1, threshold doesn't affect picking because of new, GPU based method.

#### Defined in

[packages/api/src/public/migration/types.ts:226](https://github.com/cognitedata/reveal/blob/71be00fcc/viewer/packages/api/src/public/migration/types.ts#L226)


<!-- SOURCE_END: reveal/documentation\versioned_docs\version-3.x\api\interfaces\cognite_reveal.IntersectionFromPixelOptions.md -->

================================================================================


<!-- SOURCE_START: reveal/documentation\versioned_docs\version-3.x\api\interfaces\cognite_reveal_extensions_datasource.BlobOutputMetadata.md -->
## File: reveal/documentation\versioned_docs\version-3.x\api\interfaces\cognite_reveal_extensions_datasource.BlobOutputMetadata.md

---
id: "cognite_reveal_extensions_datasource.BlobOutputMetadata"
title: "Interface: BlobOutputMetadata"
sidebar_label: "BlobOutputMetadata"
custom_edit_url: null
---

[@cognite/reveal/extensions/datasource](../modules/cognite_reveal_extensions_datasource.md).BlobOutputMetadata

## Properties

### blobId

 **blobId**: `number`

#### Defined in

[packages/modeldata-api/src/types.ts:45](https://github.com/cognitedata/reveal/blob/71be00fcc/viewer/packages/modeldata-api/src/types.ts#L45)

___

### format

 **format**: `string`

#### Defined in

[packages/modeldata-api/src/types.ts:46](https://github.com/cognitedata/reveal/blob/71be00fcc/viewer/packages/modeldata-api/src/types.ts#L46)

___

### version

 **version**: `number`

#### Defined in

[packages/modeldata-api/src/types.ts:47](https://github.com/cognitedata/reveal/blob/71be00fcc/viewer/packages/modeldata-api/src/types.ts#L47)


<!-- SOURCE_END: reveal/documentation\versioned_docs\version-3.x\api\interfaces\cognite_reveal_extensions_datasource.BlobOutputMetadata.md -->

================================================================================


<!-- SOURCE_START: reveal/documentation\versioned_docs\version-3.x\api\interfaces\cognite_reveal_extensions_datasource.DataSource.md -->
## File: reveal/documentation\versioned_docs\version-3.x\api\interfaces\cognite_reveal_extensions_datasource.DataSource.md

---
id: "cognite_reveal_extensions_datasource.DataSource"
title: "Interface: DataSource"
sidebar_label: "DataSource"
custom_edit_url: null
---

[@cognite/reveal/extensions/datasource](../modules/cognite_reveal_extensions_datasource.md).DataSource

Describes how Reveal data is stored, and provides means to create custom storage providers
that Reveal will fetch data from.

## Methods

### getModelDataProvider

 **getModelDataProvider**(): [`ModelDataProvider`](cognite_reveal_extensions_datasource.ModelDataProvider.md)

Gets a client that is able to download geometry and other files
for models.

#### Returns

[`ModelDataProvider`](cognite_reveal_extensions_datasource.ModelDataProvider.md)

#### Defined in

[packages/data-source/src/DataSource.ts:28](https://github.com/cognitedata/reveal/blob/71be00fcc/viewer/packages/data-source/src/DataSource.ts#L28)

___

### getModelMetadataProvider

 **getModelMetadataProvider**(): [`ModelMetadataProvider`](cognite_reveal_extensions_datasource.ModelMetadataProvider.md)

Gets a metadata provider for models.

#### Returns

[`ModelMetadataProvider`](cognite_reveal_extensions_datasource.ModelMetadataProvider.md)

#### Defined in

[packages/data-source/src/DataSource.ts:22](https://github.com/cognitedata/reveal/blob/71be00fcc/viewer/packages/data-source/src/DataSource.ts#L22)

___

### getNodesApiClient

 **getNodesApiClient**(): [`NodesApiClient`](cognite_reveal_extensions_datasource.NodesApiClient.md)

Gets a node API client that is able to fetch data about
models.

#### Returns

[`NodesApiClient`](cognite_reveal_extensions_datasource.NodesApiClient.md)

#### Defined in

[packages/data-source/src/DataSource.ts:17](https://github.com/cognitedata/reveal/blob/71be00fcc/viewer/packages/data-source/src/DataSource.ts#L17)


<!-- SOURCE_END: reveal/documentation\versioned_docs\version-3.x\api\interfaces\cognite_reveal_extensions_datasource.DataSource.md -->

================================================================================


<!-- SOURCE_START: reveal/documentation\versioned_docs\version-3.x\api\interfaces\cognite_reveal_extensions_datasource.ModelDataProvider.md -->
## File: reveal/documentation\versioned_docs\version-3.x\api\interfaces\cognite_reveal_extensions_datasource.ModelDataProvider.md

---
id: "cognite_reveal_extensions_datasource.ModelDataProvider"
title: "Interface: ModelDataProvider"
sidebar_label: "ModelDataProvider"
custom_edit_url: null
---

[@cognite/reveal/extensions/datasource](../modules/cognite_reveal_extensions_datasource.md).ModelDataProvider

Provides data for 3D models.

## Hierarchy

- `JsonFileProvider`

- `BinaryFileProvider`

   **`ModelDataProvider`**

## Methods

### getBinaryFile

 **getBinaryFile**(`baseUrl`, `fileName`): `Promise`\<`ArrayBuffer`\>

Downloads a binary blob.

#### Parameters

| Name | Type | Description |
| :------ | :------ | :------ |
| `baseUrl` | `string` | Base URL of the model. |
| `fileName` | `string` | Filename of binary file. |

#### Returns

`Promise`\<`ArrayBuffer`\>

#### Overrides

BinaryFileProvider.getBinaryFile

#### Defined in

[packages/modeldata-api/src/types.ts:28](https://github.com/cognitedata/reveal/blob/71be00fcc/viewer/packages/modeldata-api/src/types.ts#L28)

___

### getJsonFile

 **getJsonFile**(`baseUrl`, `fileName`): `Promise`\<`any`\>

Download and parse a JSON file and return the resulting struct.

#### Parameters

| Name | Type | Description |
| :------ | :------ | :------ |
| `baseUrl` | `string` | Base URL of the model. |
| `fileName` | `string` | Filename of JSON file. |

#### Returns

`Promise`\<`any`\>

#### Overrides

JsonFileProvider.getJsonFile

#### Defined in

[packages/modeldata-api/src/types.ts:22](https://github.com/cognitedata/reveal/blob/71be00fcc/viewer/packages/modeldata-api/src/types.ts#L22)


<!-- SOURCE_END: reveal/documentation\versioned_docs\version-3.x\api\interfaces\cognite_reveal_extensions_datasource.ModelDataProvider.md -->

================================================================================


<!-- SOURCE_START: reveal/documentation\versioned_docs\version-3.x\api\interfaces\cognite_reveal_extensions_datasource.ModelIdentifier.md -->
## File: reveal/documentation\versioned_docs\version-3.x\api\interfaces\cognite_reveal_extensions_datasource.ModelIdentifier.md

---
id: "cognite_reveal_extensions_datasource.ModelIdentifier"
title: "Interface: ModelIdentifier"
sidebar_label: "ModelIdentifier"
custom_edit_url: null
---

[@cognite/reveal/extensions/datasource](../modules/cognite_reveal_extensions_datasource.md).ModelIdentifier

Identifies a 3D model. Typically, implementations will use [CdfModelIdentifier](../classes/cognite_reveal_extensions_datasource.CdfModelIdentifier.md).

## Implemented by

- [`CdfModelIdentifier`](../classes/cognite_reveal_extensions_datasource.CdfModelIdentifier.md)

## Properties

### revealInternalId

 `Readonly` **revealInternalId**: `symbol`

Unique ID of the model.

#### Defined in

[packages/modeldata-api/src/ModelIdentifier.ts:12](https://github.com/cognitedata/reveal/blob/71be00fcc/viewer/packages/modeldata-api/src/ModelIdentifier.ts#L12)


<!-- SOURCE_END: reveal/documentation\versioned_docs\version-3.x\api\interfaces\cognite_reveal_extensions_datasource.ModelIdentifier.md -->

================================================================================


<!-- SOURCE_START: reveal/documentation\versioned_docs\version-3.x\api\interfaces\cognite_reveal_extensions_datasource.ModelMetadataProvider.md -->
## File: reveal/documentation\versioned_docs\version-3.x\api\interfaces\cognite_reveal_extensions_datasource.ModelMetadataProvider.md

---
id: "cognite_reveal_extensions_datasource.ModelMetadataProvider"
title: "Interface: ModelMetadataProvider"
sidebar_label: "ModelMetadataProvider"
custom_edit_url: null
---

[@cognite/reveal/extensions/datasource](../modules/cognite_reveal_extensions_datasource.md).ModelMetadataProvider

Provides metadata for 3D models.

## Methods

### getModelCamera

 **getModelCamera**(`identifier`): `Promise`\<\{ `position`: `Vector3` ; `target`: `Vector3`  }\>

#### Parameters

| Name | Type |
| :------ | :------ |
| `identifier` | [`ModelIdentifier`](cognite_reveal_extensions_datasource.ModelIdentifier.md) |

#### Returns

`Promise`\<\{ `position`: `Vector3` ; `target`: `Vector3`  }\>

#### Defined in

[packages/modeldata-api/src/ModelMetadataProvider.ts:14](https://github.com/cognitedata/reveal/blob/71be00fcc/viewer/packages/modeldata-api/src/ModelMetadataProvider.ts#L14)

___

### getModelMatrix

 **getModelMatrix**(`identifier`, `format`): `Promise`\<`Matrix4`\>

#### Parameters

| Name | Type |
| :------ | :------ |
| `identifier` | [`ModelIdentifier`](cognite_reveal_extensions_datasource.ModelIdentifier.md) |
| `format` | `string` |

#### Returns

`Promise`\<`Matrix4`\>

#### Defined in

[packages/modeldata-api/src/ModelMetadataProvider.ts:15](https://github.com/cognitedata/reveal/blob/71be00fcc/viewer/packages/modeldata-api/src/ModelMetadataProvider.ts#L15)

___

### getModelOutputs

 **getModelOutputs**(`modelIdentifier`): `Promise`\<[`BlobOutputMetadata`](cognite_reveal_extensions_datasource.BlobOutputMetadata.md)[]\>

#### Parameters

| Name | Type |
| :------ | :------ |
| `modelIdentifier` | [`ModelIdentifier`](cognite_reveal_extensions_datasource.ModelIdentifier.md) |

#### Returns

`Promise`\<[`BlobOutputMetadata`](cognite_reveal_extensions_datasource.BlobOutputMetadata.md)[]\>

#### Defined in

[packages/modeldata-api/src/ModelMetadataProvider.ts:12](https://github.com/cognitedata/reveal/blob/71be00fcc/viewer/packages/modeldata-api/src/ModelMetadataProvider.ts#L12)

___

### getModelUri

 **getModelUri**(`identifier`, `formatMetadata`): `Promise`\<`string`\>

#### Parameters

| Name | Type |
| :------ | :------ |
| `identifier` | [`ModelIdentifier`](cognite_reveal_extensions_datasource.ModelIdentifier.md) |
| `formatMetadata` | [`BlobOutputMetadata`](cognite_reveal_extensions_datasource.BlobOutputMetadata.md) |

#### Returns

`Promise`\<`string`\>

#### Defined in

[packages/modeldata-api/src/ModelMetadataProvider.ts:13](https://github.com/cognitedata/reveal/blob/71be00fcc/viewer/packages/modeldata-api/src/ModelMetadataProvider.ts#L13)


<!-- SOURCE_END: reveal/documentation\versioned_docs\version-3.x\api\interfaces\cognite_reveal_extensions_datasource.ModelMetadataProvider.md -->

================================================================================


<!-- SOURCE_START: reveal/documentation\versioned_docs\version-3.x\api\interfaces\cognite_reveal_extensions_datasource.NodesApiClient.md -->
## File: reveal/documentation\versioned_docs\version-3.x\api\interfaces\cognite_reveal_extensions_datasource.NodesApiClient.md

---
id: "cognite_reveal_extensions_datasource.NodesApiClient"
title: "Interface: NodesApiClient"
sidebar_label: "NodesApiClient"
custom_edit_url: null
---

[@cognite/reveal/extensions/datasource](../modules/cognite_reveal_extensions_datasource.md).NodesApiClient

Client for retrieving metadata information about CAD nodes.

## Methods

### determineNodeAncestorsByNodeId

 **determineNodeAncestorsByNodeId**(`modelId`, `revisionId`, `nodeId`, `generation`): `Promise`\<\{ `subtreeSize`: `number` ; `treeIndex`: `number`  }\>

Determine ancestor subtree span of a given node. If the node doesn't have an
ancestor at the generation given, the span of the root node is returned.

#### Parameters

| Name | Type | Description |
| :------ | :------ | :------ |
| `modelId` | `number` | ID of 3D model |
| `revisionId` | `number` | ID of 3D model revision |
| `nodeId` | `number` | Node ID of node |
| `generation` | `number` | Generation to retrieve (0 means node itself, 1 is parent, 2 grand-parent etc). |

#### Returns

`Promise`\<\{ `subtreeSize`: `number` ; `treeIndex`: `number`  }\>

#### Defined in

[packages/nodes-api/src/NodesApiClient.ts:51](https://github.com/cognitedata/reveal/blob/71be00fcc/viewer/packages/nodes-api/src/NodesApiClient.ts#L51)

___

### determineTreeIndexAndSubtreeSizesByNodeIds

 **determineTreeIndexAndSubtreeSizesByNodeIds**(`modelId`, `revisionId`, `nodeIds`): `Promise`\<\{ `subtreeSize`: `number` ; `treeIndex`: `number`  }[]\>

Determines tree index and subtreeSize (i.e. span of the subtree a node is parent
of) given a set of node IDs.

#### Parameters

| Name | Type |
| :------ | :------ |
| `modelId` | `number` |
| `revisionId` | `number` |
| `nodeIds` | `number`[] |

#### Returns

`Promise`\<\{ `subtreeSize`: `number` ; `treeIndex`: `number`  }[]\>

#### Defined in

[packages/nodes-api/src/NodesApiClient.ts:37](https://github.com/cognitedata/reveal/blob/71be00fcc/viewer/packages/nodes-api/src/NodesApiClient.ts#L37)

___

### getBoundingBoxesByNodeIds

 **getBoundingBoxesByNodeIds**(`modelId`, `revisionId`, `nodeIds`): `Promise`\<`Box3`[]\>

Determines the bounds of the individual nodes provided. Note that the returned
boxes will be in "CDF coordinates" and not transformed using
the model transformation for the given model.

#### Parameters

| Name | Type | Description |
| :------ | :------ | :------ |
| `modelId` | `number` | ID of 3D model |
| `revisionId` | `number` | ID of 3D model revision |
| `nodeIds` | `number`[] | Node IDs of nodes |

#### Returns

`Promise`\<`Box3`[]\>

#### Defined in

[packages/nodes-api/src/NodesApiClient.ts:67](https://github.com/cognitedata/reveal/blob/71be00fcc/viewer/packages/nodes-api/src/NodesApiClient.ts#L67)

___

### mapNodeIdsToTreeIndices

 **mapNodeIdsToTreeIndices**(`modelId`, `revisionId`, `nodeIds`): `Promise`\<`number`[]\>

Maps a set of "node IDs" that identify nodes, to the respective
"tree indexes".

#### Parameters

| Name | Type |
| :------ | :------ |
| `modelId` | `number` |
| `revisionId` | `number` |
| `nodeIds` | `number`[] |

#### Returns

`Promise`\<`number`[]\>

#### Defined in

[packages/nodes-api/src/NodesApiClient.ts:27](https://github.com/cognitedata/reveal/blob/71be00fcc/viewer/packages/nodes-api/src/NodesApiClient.ts#L27)

___

### mapTreeIndicesToNodeIds

 **mapTreeIndicesToNodeIds**(`modelId`, `revisionId`, `treeIndices`): `Promise`\<`number`[]\>

Maps a set of "tree indexes" that identify nodes, to the respective
"node IDs".

#### Parameters

| Name | Type |
| :------ | :------ |
| `modelId` | `number` |
| `revisionId` | `number` |
| `treeIndices` | `number`[] |

#### Returns

`Promise`\<`number`[]\>

#### Defined in

[packages/nodes-api/src/NodesApiClient.ts:17](https://github.com/cognitedata/reveal/blob/71be00fcc/viewer/packages/nodes-api/src/NodesApiClient.ts#L17)


<!-- SOURCE_END: reveal/documentation\versioned_docs\version-3.x\api\interfaces\cognite_reveal_extensions_datasource.NodesApiClient.md -->

================================================================================


<!-- SOURCE_START: reveal/documentation\versioned_docs\version-3.x\api\modules\cognite_reveal.md -->
## File: reveal/documentation\versioned_docs\version-3.x\api\modules\cognite_reveal.md

---
id: "cognite_reveal"
title: "Module: @cognite/reveal"
sidebar_label: "@cognite/reveal"
sidebar_position: 0
custom_edit_url: null
---

## Enumerations

- [NodeOutlineColor](../enums/cognite_reveal.NodeOutlineColor.md)
- [PotreePointColorType](../enums/cognite_reveal.PotreePointColorType.md)
- [PotreePointShape](../enums/cognite_reveal.PotreePointShape.md)
- [PotreePointSizeType](../enums/cognite_reveal.PotreePointSizeType.md)
- [WellKnownAsprsPointClassCodes](../enums/cognite_reveal.WellKnownAsprsPointClassCodes.md)

## Classes

- [AssetNodeCollection](../classes/cognite_reveal.AssetNodeCollection.md)
- [BoundingBoxClipper](../classes/cognite_reveal.BoundingBoxClipper.md)
- [CameraManagerHelper](../classes/cognite_reveal.CameraManagerHelper.md)
- [ClusteredAreaCollection](../classes/cognite_reveal.ClusteredAreaCollection.md)
- [Cognite3DModel](../classes/cognite_reveal.Cognite3DModel.md)
- [Cognite3DViewer](../classes/cognite_reveal.Cognite3DViewer.md)
- [CognitePointCloudModel](../classes/cognite_reveal.CognitePointCloudModel.md)
- [ComboControls](../classes/cognite_reveal.ComboControls.md)
- [DefaultCameraManager](../classes/cognite_reveal.DefaultCameraManager.md)
- [IndexSet](../classes/cognite_reveal.IndexSet.md)
- [IntersectionNodeCollection](../classes/cognite_reveal.IntersectionNodeCollection.md)
- [InvertedNodeCollection](../classes/cognite_reveal.InvertedNodeCollection.md)
- [NodeAppearanceProvider](../classes/cognite_reveal.NodeAppearanceProvider.md)
- [NodeCollection](../classes/cognite_reveal.NodeCollection.md)
- [NumericRange](../classes/cognite_reveal.NumericRange.md)
- [PropertyFilterNodeCollection](../classes/cognite_reveal.PropertyFilterNodeCollection.md)
- [SinglePropertyFilterNodeCollection](../classes/cognite_reveal.SinglePropertyFilterNodeCollection.md)
- [TreeIndexNodeCollection](../classes/cognite_reveal.TreeIndexNodeCollection.md)
- [UnionNodeCollection](../classes/cognite_reveal.UnionNodeCollection.md)

## Interfaces

- [AddModelOptions](../interfaces/cognite_reveal.AddModelOptions.md)
- [AreaCollection](../interfaces/cognite_reveal.AreaCollection.md)
- [CameraManager](../interfaces/cognite_reveal.CameraManager.md)
- [CdfModelNodeCollectionDataProvider](../interfaces/cognite_reveal.CdfModelNodeCollectionDataProvider.md)
- [Cognite3DViewerOptions](../interfaces/cognite_reveal.Cognite3DViewerOptions.md)
- [CogniteModelBase](../interfaces/cognite_reveal.CogniteModelBase.md)
- [IntersectionFromPixelOptions](../interfaces/cognite_reveal.IntersectionFromPixelOptions.md)

## Type Aliases

### CadIntersection

 **CadIntersection**: `Object`

#### Type declaration

| Name | Type | Description |
| :------ | :------ | :------ |
| `distanceToCamera` | `number` | Distance from the camera to the intersection. |
| `model` | [`Cognite3DModel`](../classes/cognite_reveal.Cognite3DModel.md) | The model that was intersected. |
| `point` | `THREE.Vector3` | Coordinate of the intersection. |
| `treeIndex` | `number` | Tree index of the intersected 3D node. |
| `type` | ``"cad"`` | The intersection type. |

#### Defined in

[packages/api/src/public/migration/types.ts:179](https://github.com/cognitedata/reveal/blob/71be00fcc/viewer/packages/api/src/public/migration/types.ts#L179)

___

### CadModelBudget

 **CadModelBudget**: `Object`

Represents a measurement of how much geometry can be loaded.

#### Type declaration

| Name | Type | Description |
| :------ | :------ | :------ |
| `highDetailProximityThreshold` | `number` | Sectors within this distance from the camera will always be loaded in high details.  **`deprecated`** This is only used for 3D models processed prior to the Reveal 3.0 release (Q1 2022). |
| `maximumRenderCost` | `number` | Maximum render cost. This number can be thought of as triangle count, although the number doesn't match this directly. |

#### Defined in

[packages/cad-geometry-loaders/src/CadModelBudget.ts:10](https://github.com/cognitedata/reveal/blob/71be00fcc/viewer/packages/cad-geometry-loaders/src/CadModelBudget.ts#L10)

___

### CameraChangeDelegate

 **CameraChangeDelegate**: (`position`: `THREE.Vector3`, `target`: `THREE.Vector3`) => `void`

#### Type declaration

 (`position`, `target`): `void`

##### Parameters

| Name | Type |
| :------ | :------ |
| `position` | `THREE.Vector3` |
| `target` | `THREE.Vector3` |

##### Returns

`void`

#### Defined in

[packages/camera-manager/src/types.ts:85](https://github.com/cognitedata/reveal/blob/71be00fcc/viewer/packages/camera-manager/src/types.ts#L85)

___

### CameraConfiguration

 **CameraConfiguration**: `Object`

Represents a camera configuration, consisting of a camera position and target.

#### Type declaration

| Name | Type |
| :------ | :------ |
| `position` | `THREE.Vector3` |
| `target` | `THREE.Vector3` |

#### Defined in

[packages/utilities/src/CameraConfiguration.ts:8](https://github.com/cognitedata/reveal/blob/71be00fcc/viewer/packages/utilities/src/CameraConfiguration.ts#L8)

___

### CameraControlsOptions

 **CameraControlsOptions**: `Object`

#### Type declaration

| Name | Type | Description |
| :------ | :------ | :------ |
| `changeCameraTargetOnClick?` | `boolean` | Enables or disables change of camera target on mouse click. New target is then set to the point of the model under current cursor position.  Default is false. |
| `mouseWheelAction?` | ``"zoomToTarget"`` \| ``"zoomPastCursor"`` \| ``"zoomToCursor"`` | Sets mouse wheel initiated action.  Modes:  'zoomToTarget' - zooms just to the current target (center of the screen) of the camera.  'zoomPastCursor' - zooms in the direction of the ray coming from camera through cursor screen position, allows going through objects.  'zoomToCursor' - mouse wheel scroll zooms towards the point on the model where cursor is hovering over, doesn't allow going through objects.  Default is 'zoomPastCursor'. |

#### Defined in

[packages/camera-manager/src/types.ts:5](https://github.com/cognitedata/reveal/blob/71be00fcc/viewer/packages/camera-manager/src/types.ts#L5)

___

### CameraState

 **CameraState**: `Object`

#### Type declaration

| Name | Type | Description |
| :------ | :------ | :------ |
| `position?` | `THREE.Vector3` | Camera position in world space. |
| `rotation?` | `THREE.Quaternion` | Camera local rotation in quaternion form. |
| `target?` | `THREE.Vector3` | Camera target in world space. |

#### Defined in

[packages/camera-manager/src/types.ts:66](https://github.com/cognitedata/reveal/blob/71be00fcc/viewer/packages/camera-manager/src/types.ts#L66)

___

### DisposedDelegate

 **DisposedDelegate**: () => `void`

#### Type declaration

 (): `void`

##### Returns

`void`

#### Defined in

[packages/utilities/src/events/types.ts:20](https://github.com/cognitedata/reveal/blob/71be00fcc/viewer/packages/utilities/src/events/types.ts#L20)

___

### GeometryFilter

 **GeometryFilter**: `Object`

#### Type declaration

| Name | Type | Description |
| :------ | :------ | :------ |
| `boundingBox?` | `THREE.Box3` | The bounds to load geometry within. By default this box is in CDF coordinate space which will be transformed into coordinates relative to the model using the the model transformation which can be specified using [the CDF API](https://docs.cognite.com/api/v1/#operation/update3DRevisions), or set in [Cognite Fusion](https://fusion.cognite.com/).  **`see`** [isBoundingBoxInModelCoordinates](cognite_reveal.md#isboundingboxinmodelcoordinates). |
| `isBoundingBoxInModelCoordinates?` | `boolean` | When set, the geometry filter \{@link boundingBox} will be considered to be in "Reveal/ThreeJS space". Rather than CDF space which is the default. When using Reveal space, the model transformation which can be specified using [the CDF API](https://docs.cognite.com/api/v1/#operation/update3DRevisions), or set in [Cognite Fusion](https://fusion.cognite.com/). |

#### Defined in

[packages/cad-model/src/types.ts:21](https://github.com/cognitedata/reveal/blob/71be00fcc/viewer/packages/cad-model/src/types.ts#L21)

___

### Intersection

 **Intersection**: [`CadIntersection`](cognite_reveal.md#cadintersection) \| `PointCloudIntersection`

#### Defined in

[packages/api/src/public/migration/types.ts:206](https://github.com/cognitedata/reveal/blob/71be00fcc/viewer/packages/api/src/public/migration/types.ts#L206)

___

### LoadingStateChangeListener

 **LoadingStateChangeListener**: (`loadingState`: `LoadingState`) => `any`

#### Type declaration

 (`loadingState`): `any`

Handler for events about data being loaded.

##### Parameters

| Name | Type |
| :------ | :------ |
| `loadingState` | `LoadingState` |

##### Returns

`any`

#### Defined in

[packages/api/src/public/types.ts:30](https://github.com/cognitedata/reveal/blob/71be00fcc/viewer/packages/api/src/public/types.ts#L30)

___

### ModelState

 **ModelState**: `Object`

#### Type declaration

| Name | Type |
| :------ | :------ |
| `defaultNodeAppearance` | [`NodeAppearance`](cognite_reveal.md#nodeappearance) |
| `modelId` | `number` |
| `revisionId` | `number` |
| `styledSets` | \{ `appearance`: [`NodeAppearance`](cognite_reveal.md#nodeappearance) ; `options?`: `any` ; `state`: `any` ; `token`: `string`  }[] |

#### Defined in

[packages/api/src/utilities/ViewStateHelper.ts:31](https://github.com/cognitedata/reveal/blob/71be00fcc/viewer/packages/api/src/utilities/ViewStateHelper.ts#L31)

___

### NodeAppearance

 **NodeAppearance**: `Object`

Type for defining node appearance profiles to style a 3D CAD model.

**`see`** [DefaultNodeAppearance](cognite_reveal.md#defaultnodeappearance)

#### Type declaration

| Name | Type | Description |
| :------ | :------ | :------ |
| `color?` | [`number`, `number`, `number`] | Overrides the default color of the node in RGB. Each component is in range [0, 255]. `[0, 0, 0]` means no override. |
| `outlineColor?` | [`NodeOutlineColor`](../enums/cognite_reveal.NodeOutlineColor.md) | When set, an outline is drawn around the node to make it stand out. |
| `prioritizedForLoadingHint?` | `number` | When provided, this value can be used to prioritize certain areas of the 3D model to be loaded. This can be useful to prioritize key objects in the 3D model to always be loaded.  When non-zero, sectors containing geometry in the vicinity of the prioritized sectors are given an *extra* priority. Recommended values are in range 1 (somewhat higher priority to be loaded) to 10 (very likely to be loaded). Usually values around 4-5 is recommended.  Prioritized nodes are loaded at the expense of non-prioritized areas. There are no guarantees that the nodes are actually loaded, and the more prioritized areas/nodes provided, the less likely it is that the hint is obeyed.  Extra priority doesn't accumulate when sectors are prioritized because they intersect/contain several nodes.  **This is an advanced feature and not recommended for most users**   **`version`** Only works with 3D models converted later than Q4 2021. |
| `renderGhosted?` | `boolean` | When set to true, the node is rendered ghosted, i.e. transparent with a fixed color. This has no effect if [renderInFront](cognite_reveal.md#renderinfront) is `true`. |
| `renderInFront?` | `boolean` | When set to true, the node is rendered in front of all other nodes even if it's occluded. Note that this take precedence over [renderGhosted](cognite_reveal.md#renderghosted). |
| `visible?` | `boolean` | Overrides the visibility of the node. |

#### Defined in

[packages/cad-styling/src/NodeAppearance.ts:20](https://github.com/cognitedata/reveal/blob/71be00fcc/viewer/packages/cad-styling/src/NodeAppearance.ts#L20)

___

### NodeCollectionDescriptor

 **NodeCollectionDescriptor**: `Object`

#### Type declaration

| Name | Type |
| :------ | :------ |
| `options?` | `any` |
| `state` | `any` |
| `token` | [`TypeName`](cognite_reveal.md#typename) |

#### Defined in

[packages/cad-styling/src/NodeCollectionDeserializer.ts:22](https://github.com/cognitedata/reveal/blob/71be00fcc/viewer/packages/cad-styling/src/NodeCollectionDeserializer.ts#L22)

___

### NodeCollectionSerializationContext

 **NodeCollectionSerializationContext**: `Object`

#### Type declaration

| Name | Type |
| :------ | :------ |
| `client` | `CogniteClient` |
| `model` | [`CdfModelNodeCollectionDataProvider`](../interfaces/cognite_reveal.CdfModelNodeCollectionDataProvider.md) |

#### Defined in

[packages/cad-styling/src/NodeCollectionDeserializer.ts:21](https://github.com/cognitedata/reveal/blob/71be00fcc/viewer/packages/cad-styling/src/NodeCollectionDeserializer.ts#L21)

___

### OnLoadingCallback

 **OnLoadingCallback**: (`itemsLoaded`: `number`, `itemsRequested`: `number`, `itemsCulled`: `number`) => `void`

#### Type declaration

 (`itemsLoaded`, `itemsRequested`, `itemsCulled`): `void`

##### Parameters

| Name | Type |
| :------ | :------ |
| `itemsLoaded` | `number` |
| `itemsRequested` | `number` |
| `itemsCulled` | `number` |

##### Returns

`void`

#### Defined in

[packages/api/src/public/migration/types.ts:23](https://github.com/cognitedata/reveal/blob/71be00fcc/viewer/packages/api/src/public/migration/types.ts#L23)

___

### PointCloudBudget

 **PointCloudBudget**: `Object`

Represents a budget of how many point from point clouds can be
loaded at the same time.

#### Type declaration

| Name | Type | Description |
| :------ | :------ | :------ |
| `numberOfPoints` | `number` | Total number of points that can be loaded for all point clouds models accumulated. |

#### Defined in

[packages/pointclouds/src/PointCloudBudget.ts:10](https://github.com/cognitedata/reveal/blob/71be00fcc/viewer/packages/pointclouds/src/PointCloudBudget.ts#L10)

___

### PointerEventDelegate

 **PointerEventDelegate**: (`event`: `PointerEventData`) => `void`

#### Type declaration

 (`event`): `void`

##### Parameters

| Name | Type |
| :------ | :------ |
| `event` | `PointerEventData` |

##### Returns

`void`

#### Defined in

[packages/utilities/src/events/types.ts:9](https://github.com/cognitedata/reveal/blob/71be00fcc/viewer/packages/utilities/src/events/types.ts#L9)

___

### RevealOptions

 **RevealOptions**: `Object`

**`property`** logMetrics Might be used to disable usage statistics.

**`property`** nodeAppearanceProvider Style node by tree-index.

**`property`** internal Internals are for internal usage only (like unit-testing).

#### Type declaration

| Name | Type |
| :------ | :------ |
| `continuousModelStreaming?` | `boolean` |
| `internal?` | \{ `cad?`: `InternalRevealCadOptions`  } |
| `internal.cad?` | `InternalRevealCadOptions` |
| `logMetrics?` | `boolean` |
| `outputRenderTarget?` | \{ `autoSize?`: `boolean` ; `target`: `THREE.WebGLRenderTarget`  } |
| `outputRenderTarget.autoSize?` | `boolean` |
| `outputRenderTarget.target` | `THREE.WebGLRenderTarget` |
| `renderOptions?` | `RenderOptions` |
| `rendererResolutionThreshold?` | `number` |

#### Defined in

[packages/api/src/public/types.ts:16](https://github.com/cognitedata/reveal/blob/71be00fcc/viewer/packages/api/src/public/types.ts#L16)

___

### SceneRenderedDelegate

 **SceneRenderedDelegate**: (`event`: \{ `camera`: `THREE.PerspectiveCamera` ; `frameNumber`: `number` ; `renderTime`: `number` ; `renderer`: `THREE.WebGLRenderer`  }) => `void`

#### Type declaration

 (`event`): `void`

##### Parameters

| Name | Type |
| :------ | :------ |
| `event` | `Object` |
| `event.camera` | `THREE.PerspectiveCamera` |
| `event.frameNumber` | `number` |
| `event.renderTime` | `number` |
| `event.renderer` | `THREE.WebGLRenderer` |

##### Returns

`void`

#### Defined in

[packages/utilities/src/events/types.ts:26](https://github.com/cognitedata/reveal/blob/71be00fcc/viewer/packages/utilities/src/events/types.ts#L26)

___

### SerializedNodeCollection

 **SerializedNodeCollection**: `Object`

#### Type declaration

| Name | Type |
| :------ | :------ |
| `options?` | `any` |
| `state` | `any` |
| `token` | `string` |

#### Defined in

[packages/cad-styling/src/SerializedNodeCollection.ts:4](https://github.com/cognitedata/reveal/blob/71be00fcc/viewer/packages/cad-styling/src/SerializedNodeCollection.ts#L4)

___

### SupportedModelTypes

 **SupportedModelTypes**: ``"pointcloud"`` \| ``"cad"``

#### Defined in

[packages/model-base/src/SupportedModelTypes.ts:4](https://github.com/cognitedata/reveal/blob/71be00fcc/viewer/packages/model-base/src/SupportedModelTypes.ts#L4)

___

### TypeName

 **TypeName**: `string`

#### Defined in

[packages/cad-styling/src/NodeCollectionDeserializer.ts:20](https://github.com/cognitedata/reveal/blob/71be00fcc/viewer/packages/cad-styling/src/NodeCollectionDeserializer.ts#L20)

___

### ViewerState

 **ViewerState**: `Object`

#### Type declaration

| Name | Type |
| :------ | :------ |
| `camera?` | \{ `position`: \{ `x`: `number` ; `y`: `number` ; `z`: `number`  } ; `target`: \{ `x`: `number` ; `y`: `number` ; `z`: `number`  }  } |
| `camera.position` | \{ `x`: `number` ; `y`: `number` ; `z`: `number`  } |
| `camera.position.x` | `number` |
| `camera.position.y` | `number` |
| `camera.position.z` | `number` |
| `camera.target` | \{ `x`: `number` ; `y`: `number` ; `z`: `number`  } |
| `camera.target.x` | `number` |
| `camera.target.y` | `number` |
| `camera.target.z` | `number` |
| `clippingPlanes?` | `ClippingPlanesState`[] |
| `models?` | [`ModelState`](cognite_reveal.md#modelstate)[] |

#### Defined in

[packages/api/src/utilities/ViewStateHelper.ts:15](https://github.com/cognitedata/reveal/blob/71be00fcc/viewer/packages/api/src/utilities/ViewStateHelper.ts#L15)

___

### WellKnownUnit

 **WellKnownUnit**: ``"Meters"`` \| ``"Centimeters"`` \| ``"Millimeters"`` \| ``"Micrometers"`` \| ``"Kilometers"`` \| ``"Feet"`` \| ``"Inches"`` \| ``"Yards"`` \| ``"Miles"`` \| ``"Mils"`` \| ``"Microinches"``

Units supported by [Cognite3DModel](../classes/cognite_reveal.Cognite3DModel.md).

#### Defined in

[packages/cad-model/src/types.ts:8](https://github.com/cognitedata/reveal/blob/71be00fcc/viewer/packages/cad-model/src/types.ts#L8)

## Variables

### DefaultNodeAppearance

 `Const` **DefaultNodeAppearance**: `Object`

A set of default node appearances used in Reveal.

#### Type declaration

| Name | Type |
| :------ | :------ |
| `Default` | [`NodeAppearance`](cognite_reveal.md#nodeappearance) |
| `Ghosted` | [`NodeAppearance`](cognite_reveal.md#nodeappearance) |
| `Hidden` | [`NodeAppearance`](cognite_reveal.md#nodeappearance) |
| `Highlighted` | \{ `color?`: [`number`, `number`, `number`] ; `outlineColor?`: [`NodeOutlineColor`](../enums/cognite_reveal.NodeOutlineColor.md) ; `prioritizedForLoadingHint?`: `number` ; `renderGhosted?`: `boolean` ; `renderInFront?`: `boolean` ; `visible?`: `boolean`  } |
| `Highlighted.color?` | [`number`, `number`, `number`] |
| `Highlighted.outlineColor?` | [`NodeOutlineColor`](../enums/cognite_reveal.NodeOutlineColor.md) |
| `Highlighted.prioritizedForLoadingHint?` | `number` |
| `Highlighted.renderGhosted?` | `boolean` |
| `Highlighted.renderInFront?` | `boolean` |
| `Highlighted.visible?` | `boolean` |
| `InFront` | [`NodeAppearance`](cognite_reveal.md#nodeappearance) |
| `Outlined` | [`NodeAppearance`](cognite_reveal.md#nodeappearance) |

#### Defined in

[packages/cad-styling/src/NodeAppearance.ts:109](https://github.com/cognitedata/reveal/blob/71be00fcc/viewer/packages/cad-styling/src/NodeAppearance.ts#L109)

___

### REVEAL\_VERSION

 `Const` **REVEAL\_VERSION**: `string` = `process.env.VERSION`

#### Defined in

[packages/api/index.ts:15](https://github.com/cognitedata/reveal/blob/71be00fcc/viewer/packages/api/index.ts#L15)

___

### revealEnv

 `Const` **revealEnv**: `Object`

Used to specify custom url for worker/wasm files
in cases when you need the latest local files or CDN is blocked by CSP.

#### Type declaration

| Name | Type |
| :------ | :------ |
| `publicPath` | `string` |

#### Defined in

[packages/utilities/src/revealEnv.ts:9](https://github.com/cognitedata/reveal/blob/71be00fcc/viewer/packages/utilities/src/revealEnv.ts#L9)

## Functions

### registerCustomNodeCollectionType

 **registerCustomNodeCollectionType**\<`T`\>(`nodeCollectionType`, `deserializer`): `void`

#### Type parameters

| Name | Type |
| :------ | :------ |
| `T` | extends [`NodeCollection`](../classes/cognite_reveal.NodeCollection.md)\<`T`\> |

#### Parameters

| Name | Type |
| :------ | :------ |
| `nodeCollectionType` | `string` |
| `deserializer` | (`descriptor`: [`NodeCollectionDescriptor`](cognite_reveal.md#nodecollectiondescriptor), `context`: [`NodeCollectionSerializationContext`](cognite_reveal.md#nodecollectionserializationcontext)) => `Promise`\<`T`\> |

#### Returns

`void`

#### Defined in

[packages/cad-styling/src/NodeCollectionDeserializer.ts:147](https://github.com/cognitedata/reveal/blob/71be00fcc/viewer/packages/cad-styling/src/NodeCollectionDeserializer.ts#L147)


<!-- SOURCE_END: reveal/documentation\versioned_docs\version-3.x\api\modules\cognite_reveal.md -->

================================================================================


<!-- SOURCE_START: reveal/documentation\versioned_docs\version-3.x\api\modules\cognite_reveal_extensions_datasource.md -->
## File: reveal/documentation\versioned_docs\version-3.x\api\modules\cognite_reveal_extensions_datasource.md

---
id: "cognite_reveal_extensions_datasource"
title: "Module: @cognite/reveal/extensions/datasource"
sidebar_label: "@cognite/reveal/extensions/datasource"
sidebar_position: 0
custom_edit_url: null
---

## Enumerations

- [File3dFormat](../enums/cognite_reveal_extensions_datasource.File3dFormat.md)

## Classes

- [CdfModelIdentifier](../classes/cognite_reveal_extensions_datasource.CdfModelIdentifier.md)

## Interfaces

- [BlobOutputMetadata](../interfaces/cognite_reveal_extensions_datasource.BlobOutputMetadata.md)
- [DataSource](../interfaces/cognite_reveal_extensions_datasource.DataSource.md)
- [ModelDataProvider](../interfaces/cognite_reveal_extensions_datasource.ModelDataProvider.md)
- [ModelIdentifier](../interfaces/cognite_reveal_extensions_datasource.ModelIdentifier.md)
- [ModelMetadataProvider](../interfaces/cognite_reveal_extensions_datasource.ModelMetadataProvider.md)
- [NodesApiClient](../interfaces/cognite_reveal_extensions_datasource.NodesApiClient.md)


<!-- SOURCE_END: reveal/documentation\versioned_docs\version-3.x\api\modules\cognite_reveal_extensions_datasource.md -->

================================================================================


<!-- SOURCE_START: reveal/documentation\versioned_docs\version-3.x\api\modules\cognite_reveal_tools.md -->
## File: reveal/documentation\versioned_docs\version-3.x\api\modules\cognite_reveal_tools.md

---
id: "cognite_reveal_tools"
title: "Module: @cognite/reveal/tools"
sidebar_label: "@cognite/reveal/tools"
sidebar_position: 0
custom_edit_url: null
---

## Enumerations

- [BingMapImageFormat](../enums/cognite_reveal_tools.BingMapImageFormat.md)
- [BingMapType](../enums/cognite_reveal_tools.BingMapType.md)
- [Corner](../enums/cognite_reveal_tools.Corner.md)
- [HereMapImageFormat](../enums/cognite_reveal_tools.HereMapImageFormat.md)
- [HereMapScheme](../enums/cognite_reveal_tools.HereMapScheme.md)
- [HereMapType](../enums/cognite_reveal_tools.HereMapType.md)
- [MapProviders](../enums/cognite_reveal_tools.MapProviders.md)
- [MapboxImageFormat](../enums/cognite_reveal_tools.MapboxImageFormat.md)
- [MapboxMode](../enums/cognite_reveal_tools.MapboxMode.md)
- [MapboxStyle](../enums/cognite_reveal_tools.MapboxStyle.md)

## Classes

- [AxisViewTool](../classes/cognite_reveal_tools.AxisViewTool.md)
- [Cognite3DViewerToolBase](../classes/cognite_reveal_tools.Cognite3DViewerToolBase.md)
- [DebugCameraTool](../classes/cognite_reveal_tools.DebugCameraTool.md)
- [DebugLoadedSectorsTool](../classes/cognite_reveal_tools.DebugLoadedSectorsTool.md)
- [ExplodedViewTool](../classes/cognite_reveal_tools.ExplodedViewTool.md)
- [GeomapTool](../classes/cognite_reveal_tools.GeomapTool.md)
- [HtmlOverlayTool](../classes/cognite_reveal_tools.HtmlOverlayTool.md)
- [Keyframe](../classes/cognite_reveal_tools.Keyframe.md)
- [MeasurementTool](../classes/cognite_reveal_tools.MeasurementTool.md)
- [TimelineTool](../classes/cognite_reveal_tools.TimelineTool.md)

## Type Aliases

### AbsolutePosition

 **AbsolutePosition**: `Object`

Absolute position in pixels.

#### Type declaration

| Name | Type |
| :------ | :------ |
| `xAbsolute` | `number` |
| `yAbsolute` | `number` |

#### Defined in

[packages/tools/src/AxisView/types.ts:47](https://github.com/cognitedata/reveal/blob/71be00fcc/viewer/packages/tools/src/AxisView/types.ts#L47)

___

### AxisBoxCompassConfig

 **AxisBoxCompassConfig**: `Object`

Configuration of the compass.

#### Type declaration

| Name | Type | Description |
| :------ | :------ | :------ |
| `fontColor?` | `THREE.Color` | - |
| `fontSize?` | `number` | - |
| `labelDelta?` | `number` | Offset in radians of the orientation indicator. |
| `ringLabel?` | `string` | Label of the orientation indicator. Defaults to 'N' for north. |
| `tickColor?` | `THREE.Color` | - |

#### Defined in

[packages/tools/src/AxisView/types.ts:79](https://github.com/cognitedata/reveal/blob/71be00fcc/viewer/packages/tools/src/AxisView/types.ts#L79)

___

### AxisBoxConfig

 **AxisBoxConfig**: `Object`

Configuration of [AxisViewTool](../classes/cognite_reveal_tools.AxisViewTool.md).

#### Type declaration

| Name | Type | Description |
| :------ | :------ | :------ |
| `animationSpeed?` | `number` | How long the camera animation lasts when clicking a face of the orientation box. |
| `compass?` | [`AxisBoxCompassConfig`](cognite_reveal_tools.md#axisboxcompassconfig) | Configuration of the compass "base" of the tool. |
| `faces?` | \{ `xNegativeFace?`: [`AxisBoxFaceConfig`](cognite_reveal_tools.md#axisboxfaceconfig) ; `xPositiveFace?`: [`AxisBoxFaceConfig`](cognite_reveal_tools.md#axisboxfaceconfig) ; `yNegativeFace?`: [`AxisBoxFaceConfig`](cognite_reveal_tools.md#axisboxfaceconfig) ; `yPositiveFace?`: [`AxisBoxFaceConfig`](cognite_reveal_tools.md#axisboxfaceconfig) ; `zNegativeFace?`: [`AxisBoxFaceConfig`](cognite_reveal_tools.md#axisboxfaceconfig) ; `zPositiveFace?`: [`AxisBoxFaceConfig`](cognite_reveal_tools.md#axisboxfaceconfig)  } | Configuration for each of the faces of the orientation box. Note that Reveal uses a right-handed Y up coordinate system, which might differ from the original model space. To account for this, you might want to reassign labels of the faces. |
| `faces.xNegativeFace?` | [`AxisBoxFaceConfig`](cognite_reveal_tools.md#axisboxfaceconfig) | - |
| `faces.xPositiveFace?` | [`AxisBoxFaceConfig`](cognite_reveal_tools.md#axisboxfaceconfig) | - |
| `faces.yNegativeFace?` | [`AxisBoxFaceConfig`](cognite_reveal_tools.md#axisboxfaceconfig) | - |
| `faces.yPositiveFace?` | [`AxisBoxFaceConfig`](cognite_reveal_tools.md#axisboxfaceconfig) | - |
| `faces.zNegativeFace?` | [`AxisBoxFaceConfig`](cognite_reveal_tools.md#axisboxfaceconfig) | - |
| `faces.zPositiveFace?` | [`AxisBoxFaceConfig`](cognite_reveal_tools.md#axisboxfaceconfig) | - |
| `position?` | [`AbsolutePosition`](cognite_reveal_tools.md#absoluteposition) \| [`RelativePosition`](cognite_reveal_tools.md#relativeposition) | Position, either absolute or relative. |
| `size?` | `number` | Size in pixels of the axis tool. |

#### Defined in

[packages/tools/src/AxisView/types.ts:10](https://github.com/cognitedata/reveal/blob/71be00fcc/viewer/packages/tools/src/AxisView/types.ts#L10)

___

### AxisBoxFaceConfig

 **AxisBoxFaceConfig**: `Object`

Configuration of each face of the orientation box.

#### Type declaration

| Name | Type | Description |
| :------ | :------ | :------ |
| `faceColor?` | `THREE.Color` | - |
| `fontColor?` | `THREE.Color` | - |
| `fontSize?` | `number` | - |
| `label?` | `string` | Label of the respective face, e.g. 'X' or 'Right'. |
| `outlineColor?` | `THREE.Color` | - |
| `outlineSize?` | `number` | - |

#### Defined in

[packages/tools/src/AxisView/types.ts:64](https://github.com/cognitedata/reveal/blob/71be00fcc/viewer/packages/tools/src/AxisView/types.ts#L64)

___

### BingMapConfig

 **BingMapConfig**: `Object`

#### Type declaration

| Name | Type | Description |
| :------ | :------ | :------ |
| `APIKey` | `string` | Bing Map API Key |
| `provider` | [`BingMap`](../enums/cognite_reveal_tools.MapProviders.md#bingmap) | - |
| `type?` | [`BingMapType`](../enums/cognite_reveal_tools.BingMapType.md) | The type of the map used. |

#### Defined in

[packages/tools/src/Geomap/MapConfig.ts:121](https://github.com/cognitedata/reveal/blob/71be00fcc/viewer/packages/tools/src/Geomap/MapConfig.ts#L121)

___

### DebugLoadedSectorsToolOptions

 **DebugLoadedSectorsToolOptions**: `Object`

#### Type declaration

| Name | Type |
| :------ | :------ |
| `colorBy?` | ``"depth"`` \| ``"lod"`` \| ``"loadedTimestamp"`` \| ``"drawcalls"`` \| ``"random"`` |
| `leafsOnly?` | `boolean` |
| `sectorPathFilterRegex?` | `string` |
| `showDetailedSectors?` | `boolean` |
| `showDiscardedSectors?` | `boolean` |
| `showSimpleSectors?` | `boolean` |

#### Defined in

[packages/tools/src/DebugLoadedSectorsTool.ts:13](https://github.com/cognitedata/reveal/blob/71be00fcc/viewer/packages/tools/src/DebugLoadedSectorsTool.ts#L13)

___

### HereMapConfig

 **HereMapConfig**: `Object`

#### Type declaration

| Name | Type | Description |
| :------ | :------ | :------ |
| `APIKey` | `string` | Here map API Key |
| `appCode?` | `string` | Service application code token. |
| `imageFormat?` | [`HereMapImageFormat`](../enums/cognite_reveal_tools.HereMapImageFormat.md) | Map image tile format |
| `provider` | [`HereMap`](../enums/cognite_reveal_tools.MapProviders.md#heremap) | - |
| `scheme?` | `string` | Specifies the view scheme |
| `size?` | `number` | Returned tile map image size. The following sizes are supported: - 256 - 512 - 128 (deprecated, although usage is still accepted) |
| `style?` | [`HereMapType`](../enums/cognite_reveal_tools.HereMapType.md) | The type of maps to be used. |

#### Defined in

[packages/tools/src/Geomap/MapConfig.ts:133](https://github.com/cognitedata/reveal/blob/71be00fcc/viewer/packages/tools/src/Geomap/MapConfig.ts#L133)

___

### HtmlOverlayCreateClusterDelegate

 **HtmlOverlayCreateClusterDelegate**: (`overlayElements`: \{ `htmlElement`: `HTMLElement` ; `userData`: `any`  }[]) => `HTMLElement`

#### Type declaration

 (`overlayElements`): `HTMLElement`

Callback that is triggered when a set of overlays are clustered together in
[HtmlOverlayTool](../classes/cognite_reveal_tools.HtmlOverlayTool.md).

##### Parameters

| Name | Type |
| :------ | :------ |
| `overlayElements` | \{ `htmlElement`: `HTMLElement` ; `userData`: `any`  }[] |

##### Returns

`HTMLElement`

#### Defined in

[packages/tools/src/HtmlOverlay/HtmlOverlayTool.ts:32](https://github.com/cognitedata/reveal/blob/71be00fcc/viewer/packages/tools/src/HtmlOverlay/HtmlOverlayTool.ts#L32)

___

### HtmlOverlayOptions

 **HtmlOverlayOptions**: `Object`

Options for an overlay added using [HtmlOverlayTool.add](../classes/cognite_reveal_tools.HtmlOverlayTool.md#add).

#### Type declaration

| Name | Type | Description |
| :------ | :------ | :------ |
| `positionUpdatedCallback?` | [`HtmlOverlayPositionUpdatedDelegate`](cognite_reveal_tools.md#htmloverlaypositionupdateddelegate) | Callback that is triggered whenever the position of the overlay is updated. Optional. |
| `userData?` | `any` | Optional user specified data that is provided to the [HtmlOverlayCreateClusterDelegate](cognite_reveal_tools.md#htmloverlaycreateclusterdelegate) and [HtmlOverlayPositionUpdatedDelegate](cognite_reveal_tools.md#htmloverlaypositionupdateddelegate). |

#### Defined in

[packages/tools/src/HtmlOverlay/HtmlOverlayTool.ts:42](https://github.com/cognitedata/reveal/blob/71be00fcc/viewer/packages/tools/src/HtmlOverlay/HtmlOverlayTool.ts#L42)

___

### HtmlOverlayPositionUpdatedDelegate

 **HtmlOverlayPositionUpdatedDelegate**: (`element`: `HTMLElement`, `position2D`: `THREE.Vector2`, `position3D`: `THREE.Vector3`, `distanceToCamera`: `number`, `userData`: `any`) => `void`

#### Type declaration

 (`element`, `position2D`, `position3D`, `distanceToCamera`, `userData`): `void`

Callback that is triggered whenever the 2D position of an overlay is updated
in [HtmlOverlayTool](../classes/cognite_reveal_tools.HtmlOverlayTool.md).

##### Parameters

| Name | Type |
| :------ | :------ |
| `element` | `HTMLElement` |
| `position2D` | `THREE.Vector2` |
| `position3D` | `THREE.Vector3` |
| `distanceToCamera` | `number` |
| `userData` | `any` |

##### Returns

`void`

#### Defined in

[packages/tools/src/HtmlOverlay/HtmlOverlayTool.ts:20](https://github.com/cognitedata/reveal/blob/71be00fcc/viewer/packages/tools/src/HtmlOverlay/HtmlOverlayTool.ts#L20)

___

### MapConfig

 **MapConfig**: \{ `latlong`: `LatLongPosition`  } & [`BingMapConfig`](cognite_reveal_tools.md#bingmapconfig) \| [`HereMapConfig`](cognite_reveal_tools.md#heremapconfig) \| [`MapboxConfig`](cognite_reveal_tools.md#mapboxconfig) \| `OpenStreetMapConfig`

Maps Configuration of [GeomapTool](../classes/cognite_reveal_tools.GeomapTool.md).

#### Defined in

[packages/tools/src/Geomap/MapConfig.ts:198](https://github.com/cognitedata/reveal/blob/71be00fcc/viewer/packages/tools/src/Geomap/MapConfig.ts#L198)

___

### MapboxConfig

 **MapboxConfig**: `Object`

#### Type declaration

| Name | Type | Description |
| :------ | :------ | :------ |
| `APIKey` | `string` | Mapbox API Key |
| `id` | `string` | Map style or map ID if the mode is set to MAP_ID |
| `mode?` | [`MapboxMode`](../enums/cognite_reveal_tools.MapboxMode.md) | Map tile access mode - MapboxMode.STYLE - MapboxMode.MAP_ID |
| `provider` | [`MapboxMap`](../enums/cognite_reveal_tools.MapProviders.md#mapboxmap) | - |
| `tileFormat?` | [`MapboxImageFormat`](../enums/cognite_reveal_tools.MapboxImageFormat.md) | Map image tile format |
| `useHDPI?` | `boolean` | Flag to indicate if should use high resolution tiles |

#### Defined in

[packages/tools/src/Geomap/MapConfig.ts:169](https://github.com/cognitedata/reveal/blob/71be00fcc/viewer/packages/tools/src/Geomap/MapConfig.ts#L169)

___

### Measurement

 **Measurement**: `Object`

#### Type declaration

| Name | Type |
| :------ | :------ |
| `distanceInMeters` | `number` |
| `endPoint` | `THREE.Vector3` |
| `measurementId` | `number` |
| `startPoint` | `THREE.Vector3` |

#### Defined in

[packages/tools/src/Measurement/MeasurementManager.ts:11](https://github.com/cognitedata/reveal/blob/71be00fcc/viewer/packages/tools/src/Measurement/MeasurementManager.ts#L11)

___

### MeasurementAddedDelegate

 **MeasurementAddedDelegate**: (`event`: \{ `distanceInMeters`: `number` ; `endPoint`: `THREE.Vector3` ; `measurementId`: `number` ; `startPoint`: `THREE.Vector3`  }) => `void`

#### Type declaration

 (`event`): `void`

Delegate for measurement added events.

##### Parameters

| Name | Type |
| :------ | :------ |
| `event` | `Object` |
| `event.distanceInMeters` | `number` |
| `event.endPoint` | `THREE.Vector3` |
| `event.measurementId` | `number` |
| `event.startPoint` | `THREE.Vector3` |

##### Returns

`void`

#### Defined in

[packages/tools/src/Measurement/types.ts:13](https://github.com/cognitedata/reveal/blob/71be00fcc/viewer/packages/tools/src/Measurement/types.ts#L13)

___

### MeasurementEndedDelegate

 **MeasurementEndedDelegate**: () => `void`

#### Type declaration

 (): `void`

Delegate for measurement ended events.

##### Returns

`void`

#### Defined in

[packages/tools/src/Measurement/types.ts:28](https://github.com/cognitedata/reveal/blob/71be00fcc/viewer/packages/tools/src/Measurement/types.ts#L28)

___

### MeasurementOptions

 **MeasurementOptions**: `Object`

Measurement tool option with user custom callback, line width & color.

#### Type declaration

| Name | Type | Description |
| :------ | :------ | :------ |
| `color?` | `THREE.Color` | Line color in 32 bit hex. |
| `distanceToLabelCallback?` | `DistanceToLabelDelegate` | - |
| `lineWidth?` | `number` | Line width in cm. Note that the minium drawn line will be ~2 pixels. |

#### Defined in

[packages/tools/src/Measurement/types.ts:33](https://github.com/cognitedata/reveal/blob/71be00fcc/viewer/packages/tools/src/Measurement/types.ts#L33)

___

### MeasurementStartedDelegate

 **MeasurementStartedDelegate**: () => `void`

#### Type declaration

 (): `void`

Delegate for measurement started events.

##### Returns

`void`

#### Defined in

[packages/tools/src/Measurement/types.ts:23](https://github.com/cognitedata/reveal/blob/71be00fcc/viewer/packages/tools/src/Measurement/types.ts#L23)

___

### RelativePosition

 **RelativePosition**: `Object`

Relative position from a corner of the viewer
and a given padding.

#### Type declaration

| Name | Type |
| :------ | :------ |
| `corner` | [`Corner`](../enums/cognite_reveal_tools.Corner.md) |
| `padding` | `THREE.Vector2` |

#### Defined in

[packages/tools/src/AxisView/types.ts:56](https://github.com/cognitedata/reveal/blob/71be00fcc/viewer/packages/tools/src/AxisView/types.ts#L56)

___

### TimelineDateUpdateDelegate

 **TimelineDateUpdateDelegate**: (`event`: \{ `activeKeyframe`: [`Keyframe`](../classes/cognite_reveal_tools.Keyframe.md) \| `undefined` ; `date`: `Date` ; `endDate`: `Date` ; `startDate`: `Date`  }) => `void`

#### Type declaration

 (`event`): `void`

Delegate for Timeline Date update

##### Parameters

| Name | Type |
| :------ | :------ |
| `event` | `Object` |
| `event.activeKeyframe` | [`Keyframe`](../classes/cognite_reveal_tools.Keyframe.md) \| `undefined` |
| `event.date` | `Date` |
| `event.endDate` | `Date` |
| `event.startDate` | `Date` |

##### Returns

`void`

#### Defined in

[packages/tools/src/Timeline/types.ts:8](https://github.com/cognitedata/reveal/blob/71be00fcc/viewer/packages/tools/src/Timeline/types.ts#L8)


<!-- SOURCE_END: reveal/documentation\versioned_docs\version-3.x\api\modules\cognite_reveal_tools.md -->

================================================================================


<!-- SOURCE_START: reveal/documentation\versioned_docs\version-3.x\api\modules.md -->
## File: reveal/documentation\versioned_docs\version-3.x\api\modules.md

---
id: "modules"
title: "@cognite/reveal"
sidebar_label: "Table of contents"
sidebar_position: 0.5
hide_table_of_contents: true
custom_edit_url: null
---

## Modules

- [@cognite/reveal](modules/cognite_reveal.md)
- [@cognite/reveal/extensions/datasource](modules/cognite_reveal_extensions_datasource.md)
- [@cognite/reveal/tools](modules/cognite_reveal_tools.md)


<!-- SOURCE_END: reveal/documentation\versioned_docs\version-3.x\api\modules.md -->

================================================================================


<!-- SOURCE_START: reveal/documentation\versioned_docs\version-3.x\api_readme.md -->
## File: reveal/documentation\versioned_docs\version-3.x\api_readme.md

`@cognite/reveal` has three modules:
- [@cognite/reveal](#module-cognitereveal) is the main module and has the main entry point of Reveal, [`Cognite3DViewer`](#class-cognite3dviewer). CAD models are represented by [`Cognite3DModel`](#class-cognite3dmodel) and points clouds by [`CognitePointCloudModel`](#class-cognitepointcloudmodel).
- [@congite/reveal/tools](#module-cogniterevealtools) contains a set of tools, e.g. [`AxisViewTool`](#class-axisviewtool), [`GeomapTool`](#class-geomaptool), [`TimelineTool`](#class-timelinetool), [`ExplodedViewTool`](#class-explodedviewtool) and [`HtmlOverlayTool`](#class-htmloverlaytool) that works with `Cognite3DViewer`.
- [@cognite/reveal/extensions/datasource](#module-cogniterevealextensionsdatasource) allows providing custom data sources for geometry and model metadata.

<!-- SOURCE_END: reveal/documentation\versioned_docs\version-3.x\api_readme.md -->

================================================================================


<!-- SOURCE_START: reveal/documentation\versioned_docs\version-3.x\concepts.md -->
## File: reveal/documentation\versioned_docs\version-3.x\concepts.md

---
id: concepts
title: Concepts
description: This page explains some basic concepts implemented by Reveal.
---

This page explains some basic concepts implemented by Reveal.

## CAD model structure

CAD models are typically structured in a tree structure, where larger components or groups of components are located near the root and individual pieces of equipment are located in near the leaf nodes. The hierarchy is defined by the source model and is processed and stored in CDF for efficient lookup and traversal. In Reveal, each of the nodes in the tree is called a "3D node". Each of the 3D nodes can have associated properties defined by the source model. Note that not all 3D nodes will contain geometry - in fact in most models only leaf nodes will contain geometry.

### Tree indices and node IDs

When processing 3D models in CDF, two IDs associated with each 3D node; tree index and node ID.

Tree indices are running numbers starting at 0 at the root 3D node increased by one for each traversed node. Node IDs are generated based on the name and placement in the node hierarchy. Node IDs are considered stable as long as the placement in the hierarchy is unchanged, while tree indices are not. For this reason, [Asset Mappings](https://docs.cognite.com/api/v1/#tag/3D-Asset-Mapping) are based on node IDs.

Reveal provides functionality for mapping between the two concepts by using `Cognite3DModel.mapNodeIdsToTreeIndices` and `Cognite3DModel.mapTreeIndicesToNodeIds`. Note however that these functions can be slow.


<!-- SOURCE_END: reveal/documentation\versioned_docs\version-3.x\concepts.md -->

================================================================================


<!-- SOURCE_START: reveal/documentation\versioned_docs\version-3.x\examples\antialiasing.mdx -->
## File: reveal/documentation\versioned_docs\version-3.x\examples\antialiasing.mdx

---
id: antialiasing
title: Enabling anti-aliasing
description: Shows the effects of the different anti-aliasing approaches supported by Reveal
---

import useBaseUrl from '@docusaurus/useBaseUrl';


Anti-aliasing is a technique to reduce the aliasing effects in the rendered result, and improves visual quality.

Reveal supports several anti-aliasing modes:
- [Fast approximate anti-aliasing (FXAA)](https://en.wikipedia.org/wiki/Fast_approximate_anti-aliasing) - a fast 
technique that reduces anti-aliasing at modest cost.
- [Multi-sample anti-antialiasing (MSAA)](https://en.wikipedia.org/wiki/Multisample_anti-aliasing) - hardware supported
supersampling technique. This produces high-quality anti-aliasing at some performance cost depending on how many samples
is taken per output pixel. Reveal supports 4, 8 or 16 samples. This mode is only supported on WebGL 2 (currently this 
means desktop computers, most Android devices, but not iOS - see [caniuse.com](https://caniuse.com/webgl2)).
- MSAA + FXAA - a combination of both modes where an FXAA pass is performed after the MSAA pass.
- Disabled - no anti-aliasing.

<a target='_blank' href={useBaseUrl('/img/antialias-comparison.png')}>
  <img src={useBaseUrl('/img/antialias-comparison.png')} alt="Comparison of different anti-aliasing techniques" />
</a>
It might be hard to notice the difference in a scaled image, click the image to open the full resolution image.

By default [Fast approximate anti-aliasing (FXAA)](https://en.wikipedia.org/wiki/Fast_approximate_anti-aliasing) is used.
This mode works on both WebGL 1 and WebGL 2. If WebGL 2 isn't supported, FXAA is used as a fallback.


```jsx
const viewer = new Cognite3DViewer(
  { 
    sdk: client, 
    antiAliasingHint: 'msaa4+fxaa' 
  });
```

Modes currently supported are `'disabled'`, `'fxaa'`, `'msaa2+fxaa'`, `'msaa4+fxaa'`, `'msaa8+fxaa'`, `'msaa16+fxaa'`,
`'msaa2'`, `'msaa4'`, `'msaa8'` and `'msaa16'`.

:::note
The examples in this documentation use `msaa4+fxaa`.
:::

<!-- SOURCE_END: reveal/documentation\versioned_docs\version-3.x\examples\antialiasing.mdx -->

================================================================================


<!-- SOURCE_START: reveal/documentation\versioned_docs\version-3.x\examples\axisviewtool.mdx -->
## File: reveal/documentation\versioned_docs\version-3.x\examples\axisviewtool.mdx

---
id: axisviewtool
title: Axis cross tool
description: Axis cross tool to show orientation of the model.
---

import { DemoWrapper } from '@site/versioned_docs/version-3.x/components/DemoWrapper';
import useBaseUrl from '@docusaurus/useBaseUrl';

To effectivly navigate a 3D model it is often useful to have an helper to show the orientation of the model. The `AxisViewTool` is
a configurable overlay that shows the current orientation of the model. It also reacts to clicks, orienting the camera to face
clicked.

<img src={useBaseUrl('/img/axisviewtool.png')} alt="AxisViewTool" />

The appearance of the tool is highly configurable, with options to set:
- Background color of each face of the orientation box
- Labels, font size and font color of each face
- Outline width and color of each face
- Compass north-orientation, label, font color and size
- Compass tick color
- Animation speed when clicking a face of the orientation box
- Size and padding
- Position - either absolute, or relative to a corner of the viewer

<DemoWrapper />

## Basic example

By default, the axis tool will be placed in the lower right corner
of the viewer, and initialization is very easy:

```jsx runnable-3x
// import { AxisViewTool } from '@cognite/reveal/tools';

new AxisViewTool(viewer);
```

## Customize axis cross position

It is possible to specify a custom position for the axis tool.
Position can be specified using either `RelativePosition` or `AbsolutePosition`.
Using `AbsolutePosition` will position the axis cross at a specific position within the canvas of the viewer.

:::note
The Y axis is positive upwards, meaning that 0 is at the bottom of the viewer.
:::

```jsx runnable-3x
// import { AxisViewTool } from '@cognite/reveal/tools';

new AxisViewTool(viewer, {
  position: {
    xAbsolute: viewer.domElement.clientWidth / 2 - 64,
    yAbsolute: 10
  },
  size: 128
});
```



Using `RelativePosition` will position the axis cross relative to a specific corner (will also handle screen resize).

```jsx runnable-3x
// import { AxisViewTool, Corner } from '@cognite/reveal/tools';

const axisConfig = {
  position: {
    corner: Corner.TopRight,
    padding: new THREE.Vector2(50, 50)
  }
};
new AxisViewTool(viewer, axisConfig);
```

## Customize axis cross size and animation speed

When clicking a face of the orientation box, the camera will move to face the respective direction.
The animation speed of this movement can be configured. Size of the axis tool is also configurable.


```jsx runnable-3x
// import { AxisViewTool } from '@cognite/reveal/tools';

const axisConfig = {
  animationSpeed: 2000, // Suuuuuper-slow
  size: 256 // In pixels
};
new AxisViewTool(viewer, axisConfig);
```


## Customize orientation faces

Each of the faces of the orientation box can be styled.

```jsx runnable-3x
// import { AxisViewTool } from '@cognite/reveal/tools';

const axisConfig = {
  faces: {
    xNegativeFace: {
      label: 'Left',
      fontColor: new THREE.Color('white'),
      faceColor: new THREE.Color(0x660000)
    },
    xPositiveFace: {
      label: 'Right',
      fontColor: new THREE.Color('white'),
      faceColor: new THREE.Color(0x660000)
    },
    yNegativeFace: {
      label: 'Down',
      fontColor: new THREE.Color('white'),
      faceColor: new THREE.Color(0x006600)
    },
    yPositiveFace: {
      label: 'Top',
      fontColor: new THREE.Color('white'),
      faceColor: new THREE.Color(0x006600)
    },
    zNegativeFace: {
      label: 'Back',
      fontColor: new THREE.Color('white'),
      faceColor: new THREE.Color(0x000066)
    },
    zPositiveFace: {
      label: 'Front',
      fontColor: new THREE.Color('white'),
      faceColor: new THREE.Color(0x000066)
    }
  }
};
new AxisViewTool(viewer, axisConfig);
```

In addition to the settings demonstrated above, the following settings can be set:
- `fontSize` - size of the label font. Automatically determined when undefined
- `outlineColor` - color of the outline of each of the faces
- `outlineSize` - width of the outline. Automatically determine when undefined

## Customize compass

The compass at the base can be customized to change the orientation label (which
defaults to N for North), font color and size and tick color.


```jsx runnable-3x
// import { AxisViewTool } from '@cognite/reveal/tools';

const axisConfig = {
  compass: {
    ringLabel: 'S',
    labelDelta: 0, // Place at South
    fontColor: new THREE.Color('white'),
    tickColor: new THREE.Color('white')
  }
};
new AxisViewTool(viewer, axisConfig);
```


<!-- SOURCE_END: reveal/documentation\versioned_docs\version-3.x\examples\axisviewtool.mdx -->

================================================================================


<!-- SOURCE_START: reveal/documentation\versioned_docs\version-3.x\examples\cad-2doverlay.mdx -->
## File: reveal/documentation\versioned_docs\version-3.x\examples\cad-2doverlay.mdx

---
id: cad-2doverlay
title: HTML overlays
description: Demo shows how to add an HTML overlay over 3D objects.
---

import { DemoWrapper } from '@site/versioned_docs/version-3.x/components/DemoWrapper';
import useBaseUrl from '@docusaurus/useBaseUrl';

A common requirement for a 3D application is to add information overlays hovering over 3D objects
to provide details or draw the attention to a given point. This can be done by placing HTML elements over the 3D canvas
that follows the object it's attached to. `HtmlOverlayTool` is a convinience tool to manage overlays. The tool
also supports "clustering", i.e. that overlapping elements are combined into a single element to avoid clustering.

Note that these overlays always will be placed on top of the 3D viewer, they will not be hidden when the object is
obscured by other objects. To achieve this it's necessary to use custom 3D objects.

<DemoWrapper />

Attaching HTML elements to 3D objects/positions requires the following operations:

1. Create an HTML element and apply style `position: absolute` to the element. There also some other recommended
   styles that should be applied (see below).
2. Determine 3D world coordinate of the pivot point (e.g. using intersection when user clicks an object)
3. Attach overlay using `HtmlOverlayTool.add`.

This will attach the overlay to the 2D position corresponding to the 3D coordinate, then it will provide the updated
coordinate whenever navigating the viewer.

:::note
The following CSS style is recommended for overlays:
```css
position: absolute; /* Required */

/* Anchor to the center of the element and ignore events */
transform: translate(-50%, -50%);
pointer-events: none;
touch-action: none;
user-select: none;
```
:::

```jsx runnable-3x
// import { HtmlOverlayTool } from '@cognite/reveal/tools';

function createOverlay() {
  const element = document.createElement('div');
  element.innerText = `Overlay!`;
  element.style.cssText = `
    position: absolute;

    /* Anchor to the center of the element and ignore events */
    transform: translate(-50%, -50%);
    pointer-events: none;
    touch-action: none;
    user-select: none;

    /* Make it look nice */
    padding: 10px;
    minHeight: 50px;
    color: #fff;
    background: #232323da;
    borderRadius: 0.25em;
    border: '#ffffff22 solid 2px;
  `;
  return element;
}

// Attach overlay on click
const overlays = new HtmlOverlayTool(viewer);
viewer.on('click', async event => {
  // Find 3D coordinate of what the user clicks
  const intersection = await viewer.getIntersectionFromPixel(event.offsetX, event.offsetY);
  if (intersection) {
    const el = createOverlay();
    overlays.add(el, intersection.point);
    // Remove overlay after 5 seconds
    setTimeout(() => overlays.remove(el), 5000);
  }
});
```

It's also possible to apply styling based on the position of the
overlay, e.g. to vary the opacity of the overlay based on distance
from the camera. To do this, provide an `options`-argument with a
`positionUpdatedCallback` to `HtmlOverlayTool.add`. This
callback is triggered every time the HTML overlay is updated.

```js runnable-3x
// import { HtmlOverlayTool } from '@cognite/reveal/tools';

function createOverlay(pressure) {
  const color = pressure < 30 ? '#fff' : (pressure > 80 ? '#aa1100' : '#aaaa00');
  const element = document.createElement('div');
  element.innerText = `${pressure} PSI`;
  element.style.cssText = `
    position: absolute;

    /* Anchor to the center of the element and ignore events */
    transform: translate(-50%, -50%);
    pointer-events: none;
    touch-action: none;
    user-select: none;

    /* Make it look nice */
    padding: 10px;
    color: ${color};
    background: #232323da;
    borderRadius: 0.25em;
    border: '#ffffff22 solid 2px;
  `;
  return element;
}

const overlays = new HtmlOverlayTool(viewer);
viewer.on('click', async event => {
  // Find 3D coordinate of what the user clicks
  const intersection = await viewer.getIntersectionFromPixel(event.offsetX, event.offsetY);
  if (intersection) {
    const pressure = Math.floor(Math.random() * 110);
    const el = createOverlay(pressure);
    const options = {
      positionUpdatedCallback: (element, position2D, position3D, distanceToCamera, userData) => {
        // Compute opacity based on distance to camera
        const opacity = 0.3 + 0.7 * (1.0 - (Math.min(Math.max(distanceToCamera, 10), 110) - 10) / 100.0);
        element.style.opacity = opacity;
      }
    };
    overlays.add(el, intersection.point, options);
  }
});
```

As shown above, overlays can be removed using `remove()`. It is also possible to remove all
overlays by calling `clear()` or by disposing the tool using `dispose()`. The tool cannot
be used after calling `dispose()`.

Overlays can change visibility of elements with `visible(true/false)`, which will unhide/hide all the elements in the overlay.

## Clustering overlays

The overlay tool also support clustering of elements. When enabled, the tool will detect
overlapping HTML elements and combine them into a single element by invoking a callback
factory for creating a "composite" element. This is useful to avoid cluttering when theres
a high number of overlays in the view.

Clustering is enabled by providing an options-argument to the constructor or `HtmlOverlayTool`
and provide a cluster mode and a callback for creating a "composite element" based on
a set a set of clustered overlay elements. Currently the only mode supported is `overlapByScreenSpace`
which causes overlay elements that overlap on screen to be replaced with a composite
element.

Each overlay added to `HtmlOverlayTool` may have assosciated, custom `userData`. This data
can be used to create custom labels for composite elements.

In the following example, overlays are added on click in the model. When overlays overlap
they are replaced with composite elements. `userData` is used to display a value range
of the underlying overlay elements.

```js runnable-3x
// import { HtmlOverlayTool } from '@cognite/reveal/tools';

function createOverlay(text) {
  const element = document.createElement('div');
  element.innerText = text;
  element.style.cssText = `
    position: absolute;

    /* Anchor to the center of the element and ignore events */
    transform: translate(-50%, -50%);
    pointer-events: none;
    touch-action: none;
    user-select: none;

    /* Make it look nice */
    padding: 10px;
    minHeight: 50px;
    color: #fff;
    background: #232323da;
    borderRadius: 0.25em;
    border: '#ffffff22 solid 2px;
  `;
  return element;
}

function createClusterElementCallback(cluster) {
  const minPressure = cluster.reduce((min, x) => Math.min(x.userData.pressure, min), Infinity);
  const maxPressure = cluster.reduce((max, x) => Math.max(x.userData.pressure, max), -Infinity);
  const compositeElement = createOverlay(`${minPressure}-${maxPressure} PSI`);
  compositeElement.style.color = '#999';
  return compositeElement;
}

const overlays = new HtmlOverlayTool(viewer, {
    clusteringOptions: { mode: 'overlapInScreenSpace', createClusterElementCallback }
  });
viewer.on('click', async event => {
  // Find 3D coordinate of what the user clicks
  const intersection = await viewer.getIntersectionFromPixel(event.offsetX, event.offsetY);
  if (intersection) {
    const pressure = Math.floor(Math.random() * 110);
    const el = createOverlay(`${pressure} PSI`);
    overlays.add(el, intersection.point, { userData: { pressure } });
  }
});
```

<!-- SOURCE_END: reveal/documentation\versioned_docs\version-3.x\examples\cad-2doverlay.mdx -->

================================================================================


<!-- SOURCE_START: reveal/documentation\versioned_docs\version-3.x\examples\cad-3dobjects.mdx -->
## File: reveal/documentation\versioned_docs\version-3.x\examples\cad-3dobjects.mdx

---
id: cad-3dobjects
title: Add custom 3D objects
description: Extend the scene with custom ThreeJS objects.
---

import { DemoWrapper } from '@site/versioned_docs/version-3.x/components/DemoWrapper';
import useBaseUrl from '@docusaurus/useBaseUrl';

Sometimes it's useful to add custom content to the 3D scene to model data Reveal doesn't
support or to customize the 3D environment. Reveal supports this by using the
`Cognite3DViewer.addObject3D`-function which accepts [ThreeJS](https://threejs.org/) objects.

:::note
There are a few restrictions to the 3D content that is to be combined with Reveal models:
- Reveal uses an "implicit lighting model", i.e. no lights are added to the scene. If you
need lights this needs to be added to the viewer scene.
- Geometry is expected to use "default depth testing", meaning
[`THREE.Material.depthTest`](https://threejs.org/docs/#api/en/materials/Material.depthTest) must be `true`,
[`THREE.Material.depthWrite`](https://threejs.org/docs/#api/en/materials/Material.depthWrite) must  `true` and
[`THREE.Material.depthFunc`](https://threejs.org/docs/#api/en/materials/Material.depthFunc) must be `LessEqualDepth`.
You might experience unexpected results if you are using materials where this doesn't hold.
- Objects with opacity less than 1.0 will appear transparent regardless of if
[`THREE.Material.transparent`](https://threejs.org/docs/?q=Material#api/en/materials/Material.transparent) is `true` or
`false`. The final composited image is always blended as if
[`THREE.Material.blendDst`](https://threejs.org/docs/?q=Material#api/en/materials/Material.blendDst) is
`OneMinusSrcAlphaFactor` and the blending settings on the material won't have any effect on the composition.
:::

<!-- :::tip
Reveal uses an "implicit lighting model", i.e. no lights are added to the scene. If you
need lights this needs to be added to the viewer scene.
::: -->

<DemoWrapper />

## Adding markers to the scene on clicks

The following example reacts to clicks in the scene and adds markers to the positions clicked.

```jsx runnable-3x
const markerGeometry = new THREE.SphereGeometry(1, 10, 10);
const markerMaterial = new THREE.MeshBasicMaterial({
  color: 'blue',
  transparent: true,
  opacity: 0.7
});
viewer.on('click', async event => {
  const intersection = await viewer.getIntersectionFromPixel(event.offsetX, event.offsetY);
  if (intersection) {
    const marker = new THREE.Mesh(markerGeometry, markerMaterial);
    marker.position.copy(intersection.point);
    viewer.addObject3D(marker);
  }
});
```

## Add environment

To make a model feel more natural it might be useful to add an environment. The following
example adds sky and a sea effect for the example oil rig.

<img
  src={useBaseUrl('/img/cad-skyandocean.png')}
  alt="Oil rig with sky and ocean"
/>

Below you'll find [an interactive example](#interactive-example), but first lets walk through
the different parts.
See the bottom of this page for an interactive example.

First, let's encapsulate the model in a large sky-textured sphere to create an illusion of
skies. The sphere map is available from [Free HDR - EXR SKIES-blog](http://freepanorama.blogspot.com/).

```js
const modelCenterAtSeaLevel = model
  .getModelBoundingBox()
  .getCenter(new THREE.Vector3());
modelCenterAtSeaLevel.y = 0.0;

// Skybox
const skyBox = new THREE.Mesh(
  new THREE.SphereGeometry(3000, 15, 15),
  new THREE.MeshBasicMaterial({
    side: THREE.BackSide,
    // Skybox texture from http://freepanorama.blogspot.com/2010/01/sky7-spherical.html
    map: new THREE.TextureLoader().load(urls.skyUrl),
  })
);
skyBox.position.copy(modelCenterAtSeaLevel);
viewer.addObject3D(skyBox);
```

This looks a bit better, but the oil rig appears to be floating mid-air at this point. Lets
add an ocean. A plane is rendered at the sea level.

```js
// Water
const waterGeometry = new THREE.PlaneGeometry(6000, 6000, 63, 63);

const material = new THREE.MeshBasicMaterial({
  map: new THREE.TextureLoader().load(
      'https://threejs.org/examples/textures/water.jpg',
      (texture) => {
      texture.wrapS = texture.wrapT = THREE.RepeatWrapping;
    }),
  color: { value: new THREE.Color(0x0099ff)},
  side: THREE.DoubleSide
});

const water = new THREE.Mesh(waterGeometry, material);
// Make the ocean horizontal
water.rotation.x = -Math.PI / 2;
water.position.copy(modelCenterAtSeaLevel);
viewer.addObject3D(water);
```

### Interactive example

Below is the complete code for adding a skybox and ocean to the scene.

```jsx runnable-3x
const modelCenterAtSeaLevel = model
  .getModelBoundingBox()
  .getCenter(new THREE.Vector3());
modelCenterAtSeaLevel.y = 0.0;

// Skybox
const skyBox = new THREE.Mesh(
  new THREE.SphereGeometry(3000, 15, 15),
  new THREE.MeshBasicMaterial({
    side: THREE.BackSide,
    // Skybox texture from http://freepanorama.blogspot.com/2010/01/sky7-spherical.html
    map: new THREE.TextureLoader().load(urls.skyUrl),
  })
);
skyBox.position.copy(modelCenterAtSeaLevel);
viewer.addObject3D(skyBox);

// Water
const waterGeometry = new THREE.PlaneGeometry(6000, 6000, 63, 63);

const material = new THREE.MeshBasicMaterial({
  map: new THREE.TextureLoader().load(
      'https://upload.wikimedia.org/wikipedia/commons/thumb/b/b3/Water_texture_1390894_Nevit.jpg/2048px-Water_texture_1390894_Nevit.jpg',
      (texture) => {
      texture.wrapS = texture.wrapT = THREE.RepeatWrapping;
    }),
  color: { value: new THREE.Color(0x0099ff)},
  side: THREE.DoubleSide
});

const water = new THREE.Mesh(waterGeometry, material);
// Make the ocean horizontal
water.rotation.x = -Math.PI / 2;
water.position.copy(modelCenterAtSeaLevel);
viewer.addObject3D(water);

//Make sure the Skybox & ocean plane have applied textures
setTimeout(() => {
  viewer.requestRedraw();
}, 100);

```


<!-- SOURCE_END: reveal/documentation\versioned_docs\version-3.x\examples\cad-3dobjects.mdx -->

================================================================================


<!-- SOURCE_START: reveal/documentation\versioned_docs\version-3.x\examples\cad-basic.mdx -->
## File: reveal/documentation\versioned_docs\version-3.x\examples\cad-basic.mdx

---
id: cad-basic
title: Loading CAD models
description: Demo shows how to load 3d models from CDF with Cognite3DViewer.
---

`Cognite3DViewer` is a component that eases the migration from [@cognite/3d-viewer](https://www.npmjs.com/package/@cognite/3d-viewer).
It has mostly the same API and could be used when you don't need to control the scene or render loop,
i.e., just want to view some 3d models from CDF.

import { DemoWrapper } from '@site/versioned_docs/version-3.x/components/DemoWrapper';

<DemoWrapper />

```jsx
import { CogniteClient } from '@cognite/sdk';
import { Cognite3DViewer } from '@cognite/reveal';

const loginManager = new LoginManager('publicdata', 'api');
const client = new CogniteClient({
  appId: 'myCadAppId',
  project: loginManager.project,
  getToken: async () => loginManager.getToken()
});

await client.authenticate();

// some div in your html page for Cognite3DViewer to insert a canvas
const domElement = document.getElementById('canvas-wrapper');

async function main() {
  const viewer = new Cognite3DViewer({ sdk: client, domElement });

  // load a model and add it on 3d scene
  // https://console.cognitedata.com/publicdata/3d-models/4715379429968321/revisions/5688854005909501
  const model = await viewer.addModel({
    modelId: 3356984403684032,
    revisionId: 6664823881595566,
  });
  viewer.loadCameraFromModel(model);

  // call viewer.dispose() when you don't need the viewer anymore
}
main();
```

`CogniteClient` version 6 and later requires a `getToken` function for authentication.
For this documentation we have made a class called `LoginManager` that handles this. To
access the `publicdata` project used in the examples in this documentation, you may use the `LoginManager` [class yourself](https://github.com/cognitedata/reveal/blob/a722e6ef34e026be9fa88d90e97bcf94a6610432/documentation/docs/utils/LoginManager.ts). Note that
accessing data in other projects may require different authentication flows not supported by the LoginManager.
You can read more about different types of authentication flows in [the CogniteClient documentation](https://docs.cognite.com/dev/guides/sdk/js/authentication/).

Models can be temporarily hidden using `Cognite3DModel.visible`. Note that
the viewer must be explicitly re-rendered after setting the visibility flag:

```js runnable-3x
model.visible = false;
viewer.requestRedraw();

setTimeout(() => {
  model.visible = true;
  viewer.requestRedraw();
}, 5000);
```

Hiding models doesn't free any memory occupied by the model and should only be used
to temporarily hide a model when it's expected that it will shortly be shown again.

To also reclaim memory and permanently unloading the model, use
`Cognite3DViewer.removeModel()`:

```js runnable-3x
viewer.removeModel(model)
```

## Setting custom background image

The recommended way to set a custom background image for Reveal is to add the image as background to the DOM and then setting the clear alpha of the renderer to 0.
See an example of this below.

```js runnable-3x
viewer.renderer.setClearAlpha(0.0);
viewer.domElement.style.backgroundImage = "url('https://i.imgur.com/8tcxHWh.jpeg')";
```

## Only loading a part of the model

In some cases, it might be useful to restrict the area for which geometry is loaded to only show a partial
view. This can be done using a `geometryFilter` which allows only loading geometry within a provided box:

```js runnable-3x
viewer.models.forEach(x => viewer.removeModel(x));

async function addFilteredModel() {
  const model = await viewer.addModel({
    modelId: 3356984403684032,
    revisionId: 6664823881595566,
    geometryFilter: {
      // Only load geometry inside a box around origin with 50x50 horizontal extent and 10 vertical extent.
      boundingBox: new THREE.Box3(new THREE.Vector3(75, 50, 49), new THREE.Vector3(125, 100, 59))
    }
  });
  viewer.fitCameraToModel(model);
}
addFilteredModel();
```

By default, the bounds provided must be in "CDF coordinates". This is e.g. suitable if you are retrieving coordinates
directly from the [Nodes API](https://docs.cognite.com/api/v1/#operation/get3DNodes) to for instance show the area
around a given node. If the coordinates are in "Reveal coordinates" (i.e. in
[the WebGL coordinate system](https://www.tutorialspoint.com/webgl/webgl_basics.htm)) the `geometryFilter` can be
set up using `isBoundingBoxInModelCoordinates`:

```js runnable-3x
viewer.models.forEach(x => viewer.removeModel(x));

async function addFilteredModel() {
  const model = await viewer.addModel({
    modelId: 3356984403684032,
    revisionId: 6664823881595566,
    geometryFilter: {
      // Only load geometry inside a box around origin with 50x50 horizontal extent and 10 vertical extent.
      boundingBox: new THREE.Box3(new THREE.Vector3(75, 49, -100), new THREE.Vector3(125, 59, -50)),
      // Instruct Reveal that the coordinates already are relative to the coordinates of the model
      isBoundingBoxInModelCoordinates: true
    }
  });
  viewer.fitCameraToModel(model);
}
addFilteredModel();
```


<!-- SOURCE_END: reveal/documentation\versioned_docs\version-3.x\examples\cad-basic.mdx -->

================================================================================


<!-- SOURCE_START: reveal/documentation\versioned_docs\version-3.x\examples\cad-explode.mdx -->
## File: reveal/documentation\versioned_docs\version-3.x\examples\cad-explode.mdx

---
id: cad-explode
title: Exploded view tool
description: Demo use the exploded view tool to explode and inspect a given node subtree.
---

import { DemoWrapper } from '@site/versioned_docs/version-3.x/components/DemoWrapper';
import useBaseUrl from '@docusaurus/useBaseUrl';

This section describes the exploded view tool, which contains helper functions and logic for inspecting and exploding a given asset.
The constructor of this tool needs to be supplied with a [tree index](../concepts.md) which is the tree index of the root of the asset, and an instance of the `Cognite3DModel` that the asset belongs to.

:::note
For performance reasons, the root tree index must have a subtree size of less than 1000, else it will throw an error.
:::

<DemoWrapper />

`ExplodedViewTool` contains two instance methods: `expand` and `reset`.
`expand` takes a float describing how far the individual nodes should be expanded (this will vary based on the initial vector between the node and root).
`reset` resets the tool and any transform that has been applied to any nodes.

:::note
`ExplodedViewTool` contains a promise: `readyPromise`, which indicates when the tool is ready to be used.
This indicates if the tool has cached necessary data from the Cognite Fusion API to determine the individual locations of the nodes in the subtree.
:::

Below is an example that expands a given pipe asset (that has a tree index of `570730`) which is animated by a sine function.
Another good usecase would be to bind the `expand` function to a slider which the user can manipulate to expand the asset.


```jsx runnable-3x
// import { ExplodedViewTool } from '@cognite/reveal/tools';
async function animate() {
  const rootTreeIndex = 570730;

  const explodeTool = new ExplodedViewTool(rootTreeIndex, model);

  model.setDefaultNodeAppearance(DefaultNodeAppearance.Hidden);
  const explodedIndices = new TreeIndexNodeCollection(
    await model.getSubtreeTreeIndices(rootTreeIndex)
  );
  model.assignStyledNodeCollection(explodedIndices, DefaultNodeAppearance.Default);

  const rootBoundingBox = await model.getBoundingBoxByTreeIndex(rootTreeIndex);
  viewer.fitCameraToBoundingBox(rootBoundingBox, 0);
  await explodeTool.readyPromise;

  const clock = new THREE.Clock(true);
  clock.start();

  setInterval(() =>{
    const elapsedTime = clock.getElapsedTime();
    const expandRadius = Math.sin(elapsedTime) * 0.5 + 0.5;
    explodeTool.expand(expandRadius);
  }, 20);
}
animate();
```


<!-- SOURCE_END: reveal/documentation\versioned_docs\version-3.x\examples\cad-explode.mdx -->

================================================================================


<!-- SOURCE_START: reveal/documentation\versioned_docs\version-3.x\examples\cad-prioritized-nodes.mdx -->
## File: reveal/documentation\versioned_docs\version-3.x\examples\cad-prioritized-nodes.mdx

---
id: cad-prioritized-nodes
title: Prioritize nodes for loading
describe: Reveal may be instructed to treat specific nodes as "prioritized" with regards to geometry streaming.
---

import { DemoWrapper } from '@site/versioned_docs/version-3.x/components/DemoWrapper';

A developer may assign nodes of a model as "prioritized" in relation to geometry loading.
By giving nodes a "prioritization weight", a developer can influence Reveal to load, or keep loaded, certain parts of a model when it would otherwise discard them in favor of e.g. geometry that is closer to the camera. Note that assigning prioritization weights to nodes does not guarantee that they will be loaded at all times; the loader will still account for the rendering budget.

Nodes are given load priority through the node styling API. The `NodeAppearance` type (see [Cad Styling](cad-styling)) includes the optional field `prioritizedForLoadingHint` which can be used to provide a load priority to the node collection. Higher values will make the related geometry more likely to be loaded. While any number can be used as the load priority, it is recommended to use values between 1 and 10. 5 is considered a reasonable default value.

Not all node collection types support the priority hint. An overview of current support is provided in the following table.

| NodeCollectionType                   | Supports `prioritizedForLoadingHint`? |
| ------------------------------------ | ------------------------------------- |
| `TreeIndexNodeCollection`            | Must be manually provided, see below  |
| `PropertyFilterNodeCollection`       | Yes                                   |
| `SinglePropertyFilterNodeCollection` | Yes                                   |
| `AssetNodeCollection`                | Yes                                   |
| `InvertedNodeCollection`             | No                                    |
| `UnionNodeCollection`                | Yes                                   |
| `IntersectionNodeCollection`         | Yes                                   |

:::note
Currently, `TreeIndexNodeCollection` does not take responsibility to compute the location of the geometry it holds, which the loader needs to prioritize the geometry. Alternatively, the developer may supply this information themselves by using the `addAreaPoints()` and `addAreas()` methods on the `TreeIndexNodeCollection`.
:::

A node collection that is the result of an operation (e.g. a union) involving another node collection that does not support `prioritizedForLoadingHint`, will not support the `prioritizedForLoadingHint` field either.

## Prioritize highlighted nodes for loading

Many use cases in Reveal involve highlighting a few nodes while the rest of the model is hidden or ghosted. These use cases can benefit from the prioritization feature. Assigning a priority to the nodes of interest in addition to the hightlighting, makes them more likely to be loaded even when the camera is far away:

```js
// import { SinglePropertyFilterNodeCollection } from '@cognite/reveal'

const nodeSet = new SinglePropertyFilterNodeCollection(sdk, model, { requestPartitions: 10 });
const names = ['/60-EL-9016-Q200-E01', '/60-EL-9016-Q200-E02', '/60-EL-9016-Q200-E03'];
nodeSet.executeFilter('Item', 'Name', names);

model.setDefaultNodeAppearance(DefaultNodeAppearance.Ghosted);
model.assignStyledNodeCollection(nodeSet, { ...DefaultNodeAppearance.Highlighted, prioritizedForLoadingHint: 5 });
```

<!-- SOURCE_END: reveal/documentation\versioned_docs\version-3.x\examples\cad-prioritized-nodes.mdx -->

================================================================================


<!-- SOURCE_START: reveal/documentation\versioned_docs\version-3.x\examples\cad-save-viewerstate.mdx -->
## File: reveal/documentation\versioned_docs\version-3.x\examples\cad-save-viewerstate.mdx

---
id: cad-save-viewerstate
title: Saving viewer state
description: Demo shows how to save viewerstate of 3d models from CDF with Cognite3DViewer.
---
import { DemoWrapper } from '@site/versioned_docs/version-3.x/components/DemoWrapper';

Reveal supports saving the camera state and styled filters that have been applied to the loaded model(s).
This functionality can help support sharing links and local storage of a given view.
Internally the input to a given filter is stored and is replayed when restoring the view.
This usually means that substantially less data needs to be serialized in order to share the given state of the viewer.
The serialized JSON blob also keeps information about styling/filtering of the model by storing all [styled sets](./cad-styling.mdx).

<DemoWrapper />

## Getting the viewer state
In the example below we apply some filter to our loaded model using the `NodeCollection` type from [Styling CAD models](./cad-styling.mdx).
Then we can call the ```viewer.getViewState()``` function which return a serialized JSON blob containing the view state.
Depending on the application, the view state can be additionally transformed into e.g. a URL parameter and transferred through a link.

In the example below, we keep simply print it to the developer console.

```js runnable-3x
const allPipes = new PropertyFilterNodeCollection(sdk, model);
allPipes.executeFilter({'PDMS': {'Type': 'PIPE'}});
model.setDefaultNodeAppearance(DefaultNodeAppearance.Ghosted);
model.assignStyledNodeCollection(allPipes, { renderGhosted: false, color: [40, 200, 20] } );

console.log(JSON.stringify(viewer.getViewState(), null, 2));
```

## Setting the viewer state
Restoring the viewer state is simply a matter of feeding back the JSON blob retrieved from ```const myState = viewer.getViewState()``` into ```viewer.setViewState(myState)```.
In the example below, a previously stored state is applied which applies a red color to nodes that have an attribute `'PDMS.Type'`.

:::note
Setting the viewer state assumes that model has already been loaded.
An error will be thrown if a given state is loaded for a model which does not exist.
:::

```js runnable-3x

const myState = {
  "camera": {
    "position": {
      "x": 165.603,
      "y": 41.649,
      "z": -10.940
    },
    "target": {
      "x": 130.537,
      "y": 49.138,
      "z": -119.095
    }
  },
  "models": [
    {
      "defaultNodeAppearance": {
        "renderGhosted": true
      },
      "modelId": 3356984403684032,
      "revisionId": 6049696084265067,
      "styledSets": [
        {
          "token": "PropertyFilterNodeCollection",
          "state": {
            "PDMS": {
              "Type": "PIPE"
            }
          },
          "options": {
            "requestPartitions": 1
          },
          "appearance": {
            "renderGhosted": false,
            "color": [
              200,
              40,
              20
            ]
          }
        }
      ]
    }
  ]
};

viewer.setViewState(myState);
```

## Serializing and deserializing custom node collections

When working with styled custom node collections, the Reveal viewer needs to know how to serialize and deserialize the set.
Serialization is handled through the abstract method `serialize` which needs to be implemented when extending `NodeCollection`.
The output of `serialize` is of type `SerializedNodeCollection` and contains a `token` which is used to recreate
the `NodeCollection` during deserialization, and a `state` object which contains the data needed to restore
the `NodeCollection`. It is up to the application developer to fill this state object with any nessesary
data needed to recreate the state of the `NodeCollection`. An optional `options` object can also be supplied
containing any metadata for loading data (e.g. the number of API calls to fetch the needed data in parallel).
The contents returned from `serialize` is contained in the result of `getViewState`.

In addition to serialization, Reveal also needs to know how to recreate the custom `NodeCollection` during
deserialization. This is done by calling the free-function `registerCustomNodeCollectionType` with the same `token`
defined by the custom `NodeCollection` and a lambda function which instantiates and restore the state of
the `NodeCollection`. The lambda function has two parameters: the `descriptor` containing the state and
options which should be applied to the `NodeCollection` and the context containing an instance of
the [CogniteClient from the Cognite SDK](https://docs.cognite.com/dev/guides/sdk/js/) and the `Cognite3DModel`
which the `NodeCollection` was originally applied to. It is up to the application developer how and if they
want to use the context and/or descriptor, but it is provided as a convinience.

An example of a simple custom `NodeCollection` can be seen below.
For more information on creating a custom `NodeCollection`, see [create custom node collections](cad-styling-custom).

```js
// import { IndexSet, NodeCollection, registerCustomNodeCollectionType } from '@cognite/reveal';

class MyNodeCollection extends NodeCollection {

  isLoading = false;
  _indexSet = new IndexSet();

  constructor(model) {
    // token used for serialization / deserialization
    super('MyNodeCollection');

    for (let i = 0; i < model.nodeCount / 2; i++) {
      this._indexSet.add(i);
    }
  }

  getIndexSet() {
    return this._indexSet;
  }

  serialize() {
    return {
      token: this.classToken,
      state: this._indexSet.toRangeArray()
    }
  }

  clear() {
    this._indexSet.clear();
    this.notifyChanged();
  }
}

// Register deserializer for type
registerCustomNodeCollectionType(
  'MyNodeCollection',
  (descriptor, context) => {
    return Promise.resolve(new MyNodeCollection(context.model));
  }
);
```


<!-- SOURCE_END: reveal/documentation\versioned_docs\version-3.x\examples\cad-save-viewerstate.mdx -->

================================================================================


<!-- SOURCE_START: reveal/documentation\versioned_docs\version-3.x\examples\cad-styling-assets.mdx -->
## File: reveal/documentation\versioned_docs\version-3.x\examples\cad-styling-assets.mdx

---
id: cad-styling-assets
title: Filtering nodes by assets
describe: Applying styles to assets and assosciated asset mappings from Cognite Fusion
---

import { DemoWrapper } from '@site/versioned_docs/version-3.x/components/DemoWrapper';

In Cognite Data Fusion, assets and asset hierarchies are digital representations of objects
or groups of objects from the physical world. Assets can be assosciated with different data
types, such as documents, time series and events and serves as a "hub" to look up data for
physical equipment. See [Cognite Data Fusion documentation](https://docs.cognite.com/dev/concepts/resource_types/assets.html)
for more information about assets.

3D nodes can be ["asset mapped"](https://docs.cognite.com/api/v1/#tag/3D-Asset-Mapping) to
assets in Cognite Data Fusion. Reveal supports styling nodes mapped to an asset by using
`AssetNodeCollection`.

<DemoWrapper />

# Style all asset mapped nodes

If no options are provided, `AssetNodeCollection` includes all asset mapped nodes
for the model:

```js runnable-3x
const allAssetMappedNodes = new AssetNodeCollection(sdk, model);
// When no asset ID is provided, all nodes mapped to assets are included
allAssetMappedNodes.executeFilter({});
model.setDefaultNodeAppearance(DefaultNodeAppearance.Ghosted);
model.assignStyledNodeCollection(allAssetMappedNodes, { renderGhosted: false, outlineColor: NodeOutlineColor.Cyan } );
```

# Style a given asset

It is also possible to only style nodes mapped to a single asset. Assets are identified by their
'ID':

```js runnable-3x
const assetNodes = new AssetNodeCollection(sdk, model);
assetNodes.executeFilter({ assetId: 4222791488928479 });
model.setDefaultNodeAppearance(DefaultNodeAppearance.Ghosted);
model.assignStyledNodeCollection(assetNodes, { renderGhosted: false, outlineColor: NodeOutlineColor.Cyan } );
```

Note that there is no way to list multiple assets directly with `AssetNodeCollection`, but This
can be achieved by using `UnionNodeCollection` in combination with several `AssetNodeCollection`s.

# Style assets within an area

To support proximity lookups, Reveal supports styling assets within a certain area defined by a bounding box. It's
sufficient for an asset to intersect the provided bounds, it doesn't need to be fully inside.

:::note
The bounding box is defined in "Reveal coordinates" -
[a right handed, Y up coordinate system](https://www.youtube.com/watch?v=TGbMzoJqV7c) - which might differ
from the "native model coordinates" stored in Cognite Fusion. `AssetNodeCollection` will automatically map from
"Reveal coordinates" to "native model coordinates" using `Cognite3DModel.mapBoxFromModelToCdfCoordinates`.
:::

```js runnable-3x
const areaOfInterest = new THREE.Box3().setFromCenterAndSize(
  new THREE.Vector3(140, 67, -110),
  new THREE.Vector3(10, 5, 10)
);
const assetsWithinAreaNodes = new AssetNodeCollection(sdk, model);
assetsWithinAreaNodes.executeFilter({ boundingBox: areaOfInterest });
model.setDefaultNodeAppearance(DefaultNodeAppearance.Hidden);
model.assignStyledNodeCollection(assetsWithinAreaNodes, { visible: true } );

// Simple helper to show the area of interest
const boxMaterial = new THREE.MeshBasicMaterial({wireframe: true, color: 0xffff00 });
const boxMesh = new THREE.Mesh(new THREE.BoxGeometry(), boxMaterial);
areaOfInterest.getCenter(boxMesh.position);
areaOfInterest.getSize(boxMesh.scale);
viewer.addObject3D(boxMesh);
```


<!-- SOURCE_END: reveal/documentation\versioned_docs\version-3.x\examples\cad-styling-assets.mdx -->

================================================================================


<!-- SOURCE_START: reveal/documentation\versioned_docs\version-3.x\examples\cad-styling-custom.mdx -->
## File: reveal/documentation\versioned_docs\version-3.x\examples\cad-styling-custom.mdx

---
id: cad-styling-custom
title: Custom node collections
describe: Create custom node collections to filter based on custom data sources and mechanisms
---

import { DemoWrapper } from '@site/versioned_docs/version-3.x/components/DemoWrapper';

In many cases applications will need to filter 3D nodes by some custom data source or mechanism. This
is done by extending the `NodeCollection`-class. This class generates an `IndexSet` and
provides notification when the set has changed. Implementations should
be non-blocking - slow operations should be executed async and the set should
be incrementally updated to avoid blocking the viewer.

<DemoWrapper />

# Simple, static node collection

```js runnable-3x
// import { NodeCollection, DefaultNodeAppearance, ClusteredAreaCollection } from '@cognite/reveal';

class MyNodeCollection extends NodeCollection {
  isLoading = false;

  constructor(model) {
    super('MyNodeCollection'); // Token for (de)serialization
    this._nodeCount = model.nodeCount;
    this._indexSet = new IndexSet();

    for (let i = 0; i < model.nodeCount; i += 100) {
      this._indexSet.add(i);
    }
  }

  getIndexSet() {
    return this._indexSet;
  }

  getAreas() {
    if (this._areas) {
      return this._areas;
    }

    const indices = this._indexSet.toIndexArray();

    // getBoundingBoxesForIndices() may use the SDK or a NodesApiClient to fetch
    // the bounding boxes of the relevant nodes
    const boxes = getBoundingBoxesForIndices(indices);

    this._areas = new ClusteredAreaCollection();
    this._areas.addAreas(boxes);

    return this._areas;
  }

  clear() {
    this._indexSet.clear();
    this.notifyChanged();
  }
}

const myNodes = new MyNodeCollection(model);
model.setDefaultNodeAppearance(DefaultNodeAppearance.Ghosted);
model.assignStyledNodeCollection(myNodes, { renderGhosted: false, color: [40, 200, 20] } );
```

See also [guide on (de)serializing node collections](cad-save-viewerstate#serializing-and-deserializing-custom-node-colletions).

# Details about IndexSet

`IndexSet` is a specialized implementation of [`Set<number>`](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Set)
that is optimized for storing ranges of numbers. This is a common case for nodes as typically a
subtree will have the same styling applied.

Although `IndexSet` supports adding and removing individual elements using `add()` and `remove()`, the best
performance is achieved by using `addRange()` and `removeRange()` whenever possible.

Also note that changes to the underlying `IndexSet` held by a `NodeCollection` isn't automatically propagated
to be visible in the rendered result. In order to trigger an update after changing the underlying `IndexSet`,
use `NodeCollection.notifyChanged()` (protected function). Note that this function should not be triggered too often
as it might take some time to apply the changes.


<!-- SOURCE_END: reveal/documentation\versioned_docs\version-3.x\examples\cad-styling-custom.mdx -->

================================================================================


<!-- SOURCE_START: reveal/documentation\versioned_docs\version-3.x\examples\cad-styling-nodes.mdx -->
## File: reveal/documentation\versioned_docs\version-3.x\examples\cad-styling-nodes.mdx

---
id: cad-styling-nodes
title: Filtering nodes by node properties
describe: Applying styles to nodes based on node properties/attributes
---

import { DemoWrapper } from '@site/versioned_docs/version-3.x/components/DemoWrapper';

3D nodes may have associated attribute/property data. Reveal allows for filtering based on
these properties, allowing queries such as "all pipes", "nodes within module P600" or "nodes
with status S5". Combinations are also possible by using `UnionNodeCollection` and `IntersectionNodeCollection`.

`PropertyFilterNodeCollection` is used to query nodes based on node properties. It's possible to specify
multiple criterias which will be combined using `AND` - i.e. all criterias must be met for a node
to match. To emulate `OR`, use `UnionNodeCollection`.

Note that if a node is in a `PropertyFilterNodeCollection` all of its children will also be
in the set.

:::note
The test model used in the documentation site is lacking good node properties and the quality of
the examples shown is therefor restricted as a result of this. To best utilize the filtering APIs
we recommend providing a rich 3D models with a good set of high-quality attributes associated with
the nodes.
:::

<DemoWrapper />

## Show all pipes

If nodes in the 3D model has an attribute `'PDMS.Type'`, `PropertyFilterNodeCollection` can be used to
retrieve nodes of a certain type. In the following example, only pipes are accepted:

```js runnable-3x
// import { PropertyFilterNodeCollection, DefaultNodeAppearance } from '@cognite/reveal';

const allPipes = new PropertyFilterNodeCollection(sdk, model);
allPipes.executeFilter({ PDMS: { Type: 'PIPE' } });
model.setDefaultNodeAppearance(DefaultNodeAppearance.Ghosted);
model.assignStyledNodeCollection(allPipes, {
  renderGhosted: false,
  color: [40, 200, 20],
});
```

## Partitioning requests

For filters that match a lot of nodes, [paritioned requests](https://docs.cognite.com/api/v1/#section/Parallel-retrieval)
might increase the performance radically by fetching result from the server in parallel.
To partition requests, provide the number of partitions using the `requestPartitions`-option
to the `PropertyFilterNodeCollection`-constructor:

```js runnable-3x
// import { PropertyFilterNodeCollection, DefaultNodeAppearance, NodeOutlineColor } from '@cognite/reveal';

const nodesFromFile = new PropertyFilterNodeCollection(sdk, model, {
  requestPartitions: 10,
});
// All nodes originating from a given file
nodesFromFile.executeFilter({ Item: { 'Source File': 'PRO-S_CD-MUM.nwd' } });
model.setDefaultNodeAppearance(DefaultNodeAppearance.Ghosted);
model.assignStyledNodeCollection(nodesFromFile, {
  renderGhosted: false,
  outlineColor: NodeOutlineColor.Orange,
});
```

To compare speed-up, set `requestPartitions` to `1`.

## Combining filters

Often one would want to match multiple criterias of the same type. Lets say we want to find all
mechanical equipment with purpose 'STU'. We can either execute this as a single query, or as two
seperate queries.

When doing this as a single query, no `IntersectionNodeCollection` is necessary and the code is quite compact:

```js runnable-3x
// import { PropertyFilterNodeCollection, DefaultNodeAppearance } from '@cognite/reveal';

const stuMechNodes = new PropertyFilterNodeCollection(sdk, model);
stuMechNodes.executeFilter({ PDMS: { ':capDisc': 'MECH', Purpose: 'STU' } });

model.setDefaultNodeAppearance(DefaultNodeAppearance.Ghosted);
model.assignStyledNodeCollection(stuMechNodes, {
  renderGhosted: false,
  color: [40, 200, 20],
});
```

Combining two separate queries requires the use of `IntersectionNodeCollection`:

```js runnable-3x
// import { PropertyFilterNodeCollection, IntersectionNodeCollection, DefaultNodeAppearance } from '@cognite/reveal';

const mechNodes = new PropertyFilterNodeCollection(sdk, model);
mechNodes.executeFilter({ PDMS: { ':capDisc': 'MECH' } });

const stuNodes = new PropertyFilterNodeCollection(sdk, model);
stuNodes.executeFilter({ PDMS: { Purpose: 'STU' } });

const combined = new IntersectionNodeCollection();
combined.add(mechNodes);
combined.add(stuNodes);

model.setDefaultNodeAppearance(DefaultNodeAppearance.Ghosted);
model.assignStyledNodeCollection(combined, {
  renderGhosted: false,
  color: [40, 200, 20],
});
```

The two approaches has their pros and cons. Often it will be faster to combine the
filters into a single query as this will reduce the result set returned from the
server. However, if the different combinations will be configured run-time (e.g.
the user will want to show 'ARCH'-nodes within the 'STU'-purpose) it might
be better to use two separate queries and combine the results. Also, the latter
approach also allows for more complex types of filters.

## Matching nodes with a list of values

There might be situations where an application has a long list of identifiers of nodes to show
or style. In this case, `SinglePropertyFilterNodeCollection` might be useful. This class will match
one node property towards many values - e.g. a node identifier towards a list of IDs. This node set
supports thousands of IDs - `PropertyFilterNodeCollection` only supports one matching value.

```js runnable-3x
// import { SinglePropertyFilterNodeCollection, DefaultNodeAppearance } from '@cognite/reveal';

const nodeSet = new SinglePropertyFilterNodeCollection(sdk, model, {
  requestPartitions: 10,
});
const names = [];
for (let q = 240; q < 300; q++) {
  for (let e = 1; e <= 9; e++) {
    const name = `/60-EL-9016-Q${q}-E0${e}`;
    names.push(name);
  }
}
model.setDefaultNodeAppearance(DefaultNodeAppearance.Ghosted);
model.assignStyledNodeCollection(nodeSet, {
  renderGhosted: false,
  outlineColor: NodeOutlineColor.Orange,
});

nodeSet.executeFilter('Item', 'Name', names).then(() => {
  // Create boxes around the areas to make it easier for users to find areas in the 3D model to explore
  const areas = Array.from(nodeSet.getAreas().areas());
  for (const area of areas) {
    viewer.addObject3D(new THREE.Box3Helper(area));
  }
});
```

## Inverting filters

Often it is interesting to invert results from filters to find elements that does not match the query. This
can be done using `InvertedNodeCollection`.

```js runnable-3x
// import { PropertyFilterNodeCollection, InvertedNodeCollection, DefaultNodeAppearance } from '@cognite/reveal';

const livingQuarters = new PropertyFilterNodeCollection(sdk, model);
livingQuarters.executeFilter({ Item: { Name: '/SLP/S/LQ' } });
const notLivingQuarters = new InvertedNodeCollection(model, livingQuarters);

model.setDefaultNodeAppearance({
  outlineColor: NodeOutlineColor.Red,
  color: [120, 50, 0],
});
model.assignStyledNodeCollection(notLivingQuarters, {
  outlineColor: NodeOutlineColor.NoOutline,
  color: [0, 0, 0],
});
```


<!-- SOURCE_END: reveal/documentation\versioned_docs\version-3.x\examples\cad-styling-nodes.mdx -->

================================================================================


<!-- SOURCE_START: reveal/documentation\versioned_docs\version-3.x\examples\cad-styling.mdx -->
## File: reveal/documentation\versioned_docs\version-3.x\examples\cad-styling.mdx

---
id: cad-styling
title: Introduction
describe: Reveal supports styling individual nodes by assigning appearance profiles.
---

import { DemoWrapper } from '@site/versioned_docs/version-3.x/components/DemoWrapper';

Reveal supports flexible styling of individual nodes (objects) in the 3D model. Styles can
be compromised of several attributes to customize the visualization through the `NodeAppearance`-type:

| Field                       | Field type                  | Description                                           |
| --------------------------- | --------------------------- | ----------------------------------------------------- |
| `color`                     | `[number, number, number]?` | Override color by setting RGB values in range [0,255], e.g `[255, 0, 0]` (red). `[0, 0, 0]` means no override.  |
| `visible`                   | `boolean?`                  | When false, the node(s) will be invisible             |
| `renderInFront`             | `boolean?`                  | When true, the node(s) are rendered in front of other geometry |
| `renderGhosted`             | `boolean?`                  | When true, the node(s) are rendered in transparent gray |
| `outlineColor`              | `NodeOutlineColor?`         | Adds an outline to the objects from a set of predefined colors |
| `prioritizedForLoadingHint` | `number?`                   | Assigns a prioritization weight to this node collection, influencing load priority. See [Prioritize nodes for loading](cad-prioritized-nodes).

These attributes can be combined to customize the look of nodes. For convinience, a set of default appearances are
provided in the `DefaultNodeAppearance`-constant:

| Appearance           | Description                                                                      |
| ------------------- | -------------------------------------------------------------------------------- |
| `Default`           | No overrides, use colors from the CAD model                                      |
| `Ghosted`           | Render node(s) 'ghosted', i.e. make them translucent gray                        |
| `Outlined`          | Outline node(s) with a white outline                                             |
| `Hidden`            | Hide node(s)                                                                     |
| `InFront`           | Render node(s) in front of all other nodes                                       |
| `Highlighted`       | Highlight the node(s). Combination of `InFront`, `Outlined` and a custom color   |

These "appearance profiles"/styles are assigned to one or more nodes defined by a `NodeCollection`-instance. A `NodeCollection`
identifies 3D nodes by `treeIndex`. There are several implementations of `NodeCollection`:

| Class                          |                                                                                  |
| ------------------------------ | -------------------------------------------------------------------------------- |
| `TreeIndexNodeCollection`      | A set of nodes defined by a list of tree indices. Can be updated with a new set of indices. |
| `PropertyFilterNodeCollection` | A set of nodes defined by a query to the 3D backend to find nodes that matches one or more properties/attributes. |
| `SinglePropertyFilterNodeCollection` | Similar to `PropertyFilterNodeCollection`, but only matches one node property to many values (e.g. for looking up nodes with a list of IDs). |
| `AssetNodeCollection`          | A set of nodes defined by [asset mappings](https://docs.cognite.com/api/v1/#tag/3D-Asset-Mapping) linking 3D nodes to [assets](https://docs.cognite.com/dev/concepts/resource_types/assets.html). |
| `InvertedNodeCollection`       | Inverts the result of a node collection to match the opposite nodes (i.e. a NOT-operator). |
| `UnionNodeCollection`          | Combines nodes from several node colletions by finding the [set union](https://en.wikipedia.org/wiki/Union_(set_theory)"). |
| `InersectionNodeCollection`    | Combines nodes from several node colletions by finding the [set intersection](https://en.wikipedia.org/wiki/Intersection_(set_theory)). |
| `NodeCollection`               | Abstract base class for node collections. Extend to [implement custom node collections](cad-styling-custom). |

It's also possible [implement custom node collections](cad-styling-custom). This can be useful for specialized queries or to load
sets from custom data sources.

`Cognite3DModel.assignStyledNodeCollection` and `unassignStyledNodeCollection` is used to manage styled set associated with a model:

```js
// import { TreeIndexNodeCollection, DefaultNodeAppearance, NumericRange } from '@cognite/reveal'

// you can start from binding styles to an empty set and populate it later
const myNodes = new TreeIndexNodeCollection();
model.assignStyledNodeCollection(myNodes, DefaultNodeAppearance.Highlighted);

// later you might want to update the set as user does something, for example, selects an asset
// note that other styling sets might have different API for updates, for example `executeFilter`
const nodeTreeIndex = 0;
const nodeSubtreeSize = 100000;
myNodes.updateSet(new IndexSet(new NumericRange(nodeTreeIndex, nodeSubtreeSize)));

// if you want to change appearance of your existing set you can assign a new style
model.assignStyledNodeCollection(myNodes, DefaultNodeAppearance.Ghosted);

// and when you don't need to style this set anymore, just remove it completely
model.unassignStyledNodeCollection(myNodes);
```

Styling is "additive", meaning that styles from multiple styled sets are accumulated per node, much
like how multiple classes are combined when working with CSS. Styled sets are applied first-in first-out (FIFO)
in the order the are added.

```js
// import { TreeIndexNodeCollection, DefaultNodeAppearance, NumericRange } from '@cognite/reveal'

// you can start from binding styles to an empty set and populate it later
const set1 = new TreeIndexNodeCollection(NumericRange.createFromInterval(0, 100));
model.assignStyledNodeCollection(set1, { color: [ 255, 0, 0 ] });
const set2 = new TreeIndexNodeCollection(NumericRange.createFromInterval(50, 150));
model.assignStyledNodeCollection(set2, { outlineColor: NodeOutlineColor.White });

// [0..49] will be colored red
// [50..100] will be colored red and have a white outline
// [101..150] will have the default color and a white outline
```

:::note
The API for styling nodes has changed substantially since Reveal 1.x and upgrading Reveal
will require manual steps to implement styling.
:::

## Examples

<DemoWrapper />

To play around with the different styling options, we can use `Cognite3DModel.setDefaultNodeAppearance`.
A few example styles are shown below.

### Ghosted style

```js runnable-3x
model.setDefaultNodeAppearance(DefaultNodeAppearance.Ghosted);
```

### Highlighted

```js runnable-3x
model.setDefaultNodeAppearance(DefaultNodeAppearance.Highlighted);
```

### Outline and custom color

By creating custom styles you have a powerful tool to customize how the model looks.

```js runnable-3x
model.setDefaultNodeAppearance({ color: [0, 200, 0], outlineColor: NodeOutlineColor.Orange });
```

Note that `outlineColor` restricts the choice of color to a predefined set. This is
a restriction imposed to reduce storage space for outlines to only 3 bits. The choice
of colors is:

```ts
enum NodeOutlineColor {
  NoOutline = 0,
  White = 1,
  Black = 2,
  Cyan = 3,
  Blue = 4,
  Green = 5,
  Red = 6,
  Orange = 7
}
```


<!-- SOURCE_END: reveal/documentation\versioned_docs\version-3.x\examples\cad-styling.mdx -->

================================================================================


<!-- SOURCE_START: reveal/documentation\versioned_docs\version-3.x\examples\cad-transform-override.mdx -->
## File: reveal/documentation\versioned_docs\version-3.x\examples\cad-transform-override.mdx

---
id: cad-transform-override
title: Override CAD nodes transforms
description: Reveal supports overriding transforms of individual objects by providing tree indices to identify 3D nodes
---

import { DemoWrapper } from '@site/versioned_docs/version-3.x/components/DemoWrapper';
import useBaseUrl from '@docusaurus/useBaseUrl';

Reveal supports overriding transforms of individual objects by providing [tree indices to identify 3D nodes.](../concepts.md)

Note that any transformation override is applied with respect to the THREE.js world coordinate space. Also note that the node transform is not accounted for when determining geometry to load. Due to this node transforms shouldn't apply too drastic changes to the position and extend of the nodes. For model wide changes `Cognite3DModel.setModelTransformation` should be used instead.
Also note that non-uniform scaling of nodes are not currently supported and may give unexpected results.

## Examples

<DemoWrapper />

### Setting node transform

Setting the transform of a given node is done by `Cognite3DModel.setNodeTransformByTreeIndex` and takes a tree index,
a matrix transformation and a flag if the transformation also should be applied to children of the given node.



```jsx runnable-3x
const transform = new THREE.Matrix4();
transform.setPosition(new THREE.Vector3(10, 10, 0));
model.setNodeTransformByTreeIndex(532261, transform, true);
```

### Reset node transform


Resetting the transformation is done with `Cognite3DModel.resetNodeTransformByTreeIndex` and takes the given tree index,

and a flag that determines if the node transform reset also should be applied to any child nodes of the given tree index.

```jsx runnable-3x
model.resetNodeTransformByTreeIndex(532261, true);
```

### Animations

Creating animations is a matter of applying transformations multiple times. As stated above, any transformation

is applied in the global world coordinate system of THREE.js. This means that if you want to rotate a model around a given point (and not around the world origin),
you first need to transform the model to that given point, then rotate, then transform back into the world coordinate space. An example of this is done below to create an animation
of the crane rotating. First we get the center of the bounding box for node with id `533010` which is close to the base of the crane.
Then we set up an interval which triggers a function that transforms the entire crane (`532261`): first to the base of the crane, then rotates the model,
then transforms it back, thus giving us the wanted rotation. Keep in mind that [THREE.js uses column matrix notation](https://threejs.org/docs/#api/en/math/Matrix4), such that

the following statement:

```js
  const matrixOverride = modelToWorld.multiply(rotationMatrix.multiply(worldToModel));
```

first applies `worldToModel`, then `rotationMatrix` and finally `modelToWorld`.

```jsx runnable-3x
async function animate() {
  const boundingBox = await model.getBoundingBoxByTreeIndex(533010);
  const center = boundingBox.getCenter(new THREE.Vector3());

  const modelToWorld = new THREE.Matrix4();
  const worldToModel = new THREE.Matrix4();
  const rotationMatrix = new THREE.Matrix4();

  const clock = new THREE.Clock(true);
  clock.start();

  const intervalID = setInterval(function () {
    clock.getElapsedTime();

    modelToWorld.setPosition(center);
    worldToModel.copy(modelToWorld.clone().invert());

    const newRotation = new THREE.Euler(0, -Math.PI * clock.elapsedTime / 20, 0);
    rotationMatrix.makeRotationFromEuler(newRotation);

    const matrixOverride = modelToWorld.multiply(rotationMatrix.multiply(worldToModel));

    model.setNodeTransformByTreeIndex(532261, matrixOverride, true);

    if (clock.elapsedTime >= 10) clearInterval(intervalID);
  }, 20);
}

animate();
```


<!-- SOURCE_END: reveal/documentation\versioned_docs\version-3.x\examples\cad-transform-override.mdx -->

================================================================================


<!-- SOURCE_START: reveal/documentation\versioned_docs\version-3.x\examples\click-reactions-cad.mdx -->
## File: reveal/documentation\versioned_docs\version-3.x\examples\click-reactions-cad.mdx

---
id: click-reactions-cad
title: Reacting to clicks in CAD models
description: Detecting intersections from clicks in CAD models
---

Determining clicks is important in applications with an interactive 3D model. Cognite Reveal supports
mappings clicks on the 2D rendered result to a 3D position and to determine what object is clicked.
`Cognite3DViewer.on('click', ...)` is used to detect clicks in the 3D model, while
`Cognite3DViewer.getIntersectionFromPixel` is used to determine clicked 3D world position and point from
a mouse click.

import { DemoWrapper } from '@site/versioned_docs/version-3.x/components/DemoWrapper';

<DemoWrapper />

## Detecting clicked objects

The following example detects intersections at clicked positions and marks the intersected positions
using a red sphere.

```js runnable-3x
viewer.on('click', async event => {
  const intersection = await viewer.getIntersectionFromPixel(
    event.offsetX, event.offsetY
  );
  if (intersection) {
    const nodeId = await model.mapTreeIndexToNodeId(intersection.treeIndex);
    const toPresent = { treeIndex: intersection.treeIndex, nodeId, point: intersection.point };
    alert(`Clicked object!: ${JSON.stringify(toPresent)}`);
  };
});
```

## Highlighting clicked objects

It's quite common to highlight clicked objects. This can be achieved by using [the node styling API](./cad-styling.mdx).

```js runnable-3x
const selectedNodes = new TreeIndexNodeCollection();
model.assignStyledNodeCollection(selectedNodes, DefaultNodeAppearance.Highlighted);

viewer.on('click', async event => {
  const intersection = await viewer.getIntersectionFromPixel(
    event.offsetX, event.offsetY
  );
  if (intersection) {
    // Replace current selection
    selectedNodes.updateSet(new IndexSet([intersection.treeIndex]));
  };
});
```

In CAD models, it's quite common that equipment consists of many small geometry parts. Often it's desirable to
highlight the entire equipment (e.g. a tank) and not just the individual pieces (e.g. a valve connected to the tank).
This can be achieved by determining the ancestor tree indices of the clicked geometry. `Cognite3DModel.getAncestorTreeIndices()`
can be used to determine this.

```js runnable-3x
const selectedNodes = new TreeIndexNodeCollection();
model.assignStyledNodeCollection(selectedNodes, DefaultNodeAppearance.Highlighted);

viewer.on('click', async event => {
  const intersection = await viewer.getIntersectionFromPixel(
    event.offsetX, event.offsetY
  );
  if (intersection) {
    // Retrieve tree indices of parent. Second argument is used to control what ancestor level to retrieve;
    // 1 is direct parent, 2 is grand-parent etc
    const parentRange = await model.getAncestorTreeIndices(intersection.treeIndex, 1);
    // Replace current selection
    selectedNodes.updateSet(new IndexSet(parentRange));
  };
});
```


<!-- SOURCE_END: reveal/documentation\versioned_docs\version-3.x\examples\click-reactions-cad.mdx -->

================================================================================


<!-- SOURCE_START: reveal/documentation\versioned_docs\version-3.x\examples\click-reactions-pointcloud.mdx -->
## File: reveal/documentation\versioned_docs\version-3.x\examples\click-reactions-pointcloud.mdx

---
id: click-reactions-pointcloud
title: Reacting to clicks in point cloud models
description: Detecting intersections from clicks in point cloud models
---

While point clouds doesn't have a concept of nodes, applications can detect clicked points. Just like with
CAD models, `Cognite3DViewer.getIntersectionFromPixel` is used to determine world position and point from
a mouse click.

import { DemoWrapper } from '@site/versioned_docs/version-3.x/components/DemoWrapper';

<DemoWrapper modelType="pointcloud" />

## Detecting clicked positions

The following example detects intersections at clicked positions and marks the intersected positions
using a red sphere.

```js runnable-3x
viewer.on('click', async event => {
  const intersection = await viewer.getIntersectionFromPixel(
    event.offsetX, event.offsetY
  );
  if (intersection) {
    const sphere = new THREE.Mesh(new THREE.SphereGeometry(0.1),
      new THREE.MeshBasicMaterial({ wireframe: true, color: 'red' }));
    sphere.position.copy(intersection.point);
    viewer.addObject3D(sphere);
  };
});
```

## Controlling the intersection threshold
:::note
Since v3.1.0 setting threshold doesn't have any effect because of new GPU-based picking method. Will be fully removed in v4.0.0.
:::
By default, points within 5 cm of an intersection ray is considered to be intersecting. For point clouds of large
physical assets this is usually a good value, but for point clouds with large extends (e.g. geographical point clouds)
this threshold might be too small.

The intersection threshold can be changed using the `pointIntersectionThreshold` option of `getIntersectionFromPixel`:

```js
const options = { pointIntersectionThreshold: 1.0 /* 1 m */ };
const intersection = await viewer.getIntersectionFromPixel(event.offsetX, event.offsetY, options);
```


<!-- SOURCE_END: reveal/documentation\versioned_docs\version-3.x\examples\click-reactions-pointcloud.mdx -->

================================================================================


<!-- SOURCE_START: reveal/documentation\versioned_docs\version-3.x\examples\clipping.mdx -->
## File: reveal/documentation\versioned_docs\version-3.x\examples\clipping.mdx

---
id: clipping
title: Clipping/slicing planes
describe: Reveal support adding a number of clipping planes to "cut through" the models.
---

import { DemoWrapper } from '@site/versioned_docs/version-3.x/components/DemoWrapper';
import useBaseUrl from '@docusaurus/useBaseUrl';

Clipping planes, also called slicing planes, can be used to "cut through" the model to reveal the interior. This is
useful to isolate interesting parts of the model and hide obscuring geometry. Reveal supports having multiple clipping planes
in arbitrary position and orientation. When clipping planes are active,
the amount of geometry loaded might be reduced since culled geometry doesn't need
to be loaded (or rather loaded in a lower detail level).

<video preload="auto" autoPlay="autoplay" loop controls>
  <source src={useBaseUrl('/img/cad-clipping.webm')} />
</video>

## Examples

<DemoWrapper />

### Single, fixed clipping plane

Clipping planes are defined by providing zero or more [`THREE.Plane`](https://threejs.org/docs/#api/en/math/Plane)
to `Cognite3DViewer.setClippingPlanes`. The clipping planes are activated for all models and
replaces any active clipping planes.

Typically, [setFromNormalAndCoplanarPoint](https://threejs.org/docs/#api/en/math/Plane.setFromNormalAndCoplanarPoint)
is used to create clipping planes. This function accepts a direction that defines the orientation of
the plane and a point on the plane. For example, the following
code will create a clipping plane that only accepts geometry below `Y = 55`:

```jsx runnable-3x
const orientation = new THREE.Vector3(0, -1, 0);
const point = new THREE.Vector3(0, 55, 0);
const plane = new THREE.Plane().setFromNormalAndCoplanarPoint(orientation, point);
viewer.setClippingPlanes([plane]);
```

### Animated clipping plane

Planes can be manipulated runtime and effects will have an effect in the viewer. Note however that rendering must be
triggered after updating the plane before the change will have a visual effect. This can be done using
`Cognite3DViewer.requestRedraw()` or simply set new planes using `Cognite3DViewer.setClippingPlanes`.

Below is an example animates a clipping plane by ping-ponging the plane in the vertical direction.

```js runnable-3x
const bbox = model.getModelBoundingBox();

const orientation = new THREE.Vector3(0, -1, 0);
const point = new THREE.Vector3(0, bbox.max.y, 0);
const plane = new THREE.Plane();
plane.setFromNormalAndCoplanarPoint(orientation, point);
viewer.setClippingPlanes([plane]);

const start = performance.now();
setInterval(() => {
  // Ping-pong plane between top of model and half-way to the bottom
  const dt = (performance.now() - start) / 1000.0
  const s = 0.5 * (Math.sin(Math.PI * dt / 10.0) + 1.0);
  point.y = bbox.max.y - (bbox.max.y - bbox.min.y) / 2.0 * s;
  plane.setFromNormalAndCoplanarPoint(orientation, point);

  viewer.requestRedraw();
}, 1000 / 60);
```

:::note
Updating `THREE.Plane`-instances will not trigger data loading. To manually trigger data loading after doing
substantial changes to the clipping planes, use `Cognite3DViewer.setClippingPlanes`. Note that the example
above performs substantial changes to the planes without loading data. In a real application it's recommended
to not load data during animation, but initiate data after an animation is completed.
:::

### Interactable clipping planes

Often it's required to have interactive clipping planes that the user can modify. The following example
show how [ThreeJS DragControls](https://threejs.org/docs/#examples/en/controls/DragControls) can be used
to manipulate the clipping planes.

After running this snippet the clipping plane can be manipulated by dragging the white manipulator.

```js runnable-3x
// import { DragControls } from 'three/examples/jsm/controls/DragControls';

const bounds = model.getModelBoundingBox();

// Create draggable sphere at the center of bounds
const initialDragPosition = new THREE.Vector3(bounds.min.x, 0.5*(bounds.max.y + bounds.min.y), bounds.min.z);
const draggerGeometry = new THREE.SphereGeometry(5);
const draggerMaterial = new THREE.MeshBasicMaterial({ color: 'white' });
const draggerMesh = new THREE.Mesh(draggerGeometry, draggerMaterial);
draggerMesh.position.copy(initialDragPosition);
viewer.addObject3D(draggerMesh);

// Prepare a clipping plane
const orientation = new THREE.Vector3(0, -1, 0);
const plane = new THREE.Plane();
plane.setFromNormalAndCoplanarPoint(orientation, initialDragPosition);
viewer.setClippingPlanes([plane]);


// Handle drag events
const controls = new DragControls([draggerMesh], viewer.getCamera(), viewer.domElement);
controls.addEventListener('drag', () => {
  // Fix XZ-poistion
  draggerMesh.position.set(initialDragPosition.x, draggerMesh.position.y, initialDragPosition.z);
  draggerMesh.updateWorldMatrix();
  // Update clipping plane
  plane.setFromNormalAndCoplanarPoint(new THREE.Vector3(0, -1, 0), draggerMesh.position);
  viewer.requestRedraw();
});

// When we are hovering over a sphere we want to disable viewer controls
controls.addEventListener('hoveron', () => {
  viewer.cameraManager.cameraControlsEnabled = false;
  draggerMaterial.color.set('gray');
  viewer.requestRedraw();
});

// And turn them back on when we stop hovering over it
controls.addEventListener('hoveroff', () => {
  viewer.cameraManager.cameraControlsEnabled = true;
  draggerMaterial.color.set('white');
  viewer.requestRedraw();
});
```

### CAD geometry filter

A special type of clipping is to provide a "geometry filter" when loading the model. A geometry filter restricts the
area to load geometry for and is specified when the model is created. Geometry filters not only hides clipped geometry,
it unloads unnecessary geometry to save memory and improve rendering performance.

```js
const min = new THREE.Vector3(10, 20, 30);
const max = new THREE.Vector3(20, 30, 40);
viewer.addModel({
  modelId,
  revisionId,
  geometryFilter: {
    boundingBox: new THREE.Box3(min, max)
  }
});
```

:::note
Geometry filters are static and cannot be changed after creating the model. Instead, remove and re-add the model,
or use regular clipping planes if they change frequently.
:::


<!-- SOURCE_END: reveal/documentation\versioned_docs\version-3.x\examples\clipping.mdx -->

================================================================================


<!-- SOURCE_START: reveal/documentation\versioned_docs\version-3.x\examples\combine-models.mdx -->
## File: reveal/documentation\versioned_docs\version-3.x\examples\combine-models.mdx

---
id: combine-models
title: Combining multiple models
description: Load multiple models in the same viewer and apply transformation to correctly place the models
---

`Cognite3DViewer` supports combining multiple CAD- and point cloud-models into one view and lets
users interact with them as if they were one model. This is done by simply adding multiple models
using `Cognite3DViewer.addModel`, `Cognite3DViewer.addCadModel` or `Cognite3DViewer.addPointCloudModel`.

import { DemoWrapper } from '@site/versioned_docs/version-3.x/components/DemoWrapper';

<DemoWrapper />

## Modify coordinate systems

In many cases, it will be necessary to apply some transformation to the models to make them be in the same
coordinate system. This can be done using `setModelTransformation` with a [`THREE.Matrix4`](https://threejs.org/docs/#api/en/math/Matrix4)
representing the transformation. Note that each 3D model stored in Cognite Data Fusion will have an associated
model transformation that is loaded when the model is added. When updating `setModelTransformation` this model transformation
should also be applied to ensure that the axis system is correct.

The following example shows how to modify the coordinate system of a point cloud model to make it fit with a CAD model.

```js runnable-3x
async function updateModelTransformation() {
  const pointCloudModel = await viewer.addModel({
    modelId: 5564365369975452 ,
    revisionId: 2817572261344477,
  })

  // Retrieve default transformation
  const modelTransformation = pointCloudModel.getModelTransformation();
  // Apply translation
  const translation = new THREE.Matrix4().makeTranslation(140, 75, -110);
  modelTransformation.multiply(translation);
  // Update model transformation
  pointCloudModel.setModelTransformation(modelTransformation);

  viewer.fitCameraToModel(pointCloudModel);
}

updateModelTransformation();
```

## Use geometry filters to extract parts of a model

Geometry filters allows only loading geometry within a specified box. By loading the same model with different geometry
filters, several subsections of the same model can be loaded in the same viewer.

```js runnable-3x
viewer.models.forEach(x => viewer.removeModel(x));

async function addFilteredModel(box) {
  const model = await viewer.addModel({
    modelId: 3356984403684032,
    revisionId: 6664823881595566,
    geometryFilter: {
      boundingBox: box,
      isBoundingBoxInModelCoordinates: true
    }
  });
  return model;
}

const center = new THREE.Vector3(100, 25, -75);
const sliceOffset = new THREE.Vector3(0, 20, 0);
const sliceSize = new THREE.Vector3(100, 10, 100);

const sliceColors = [
  [200, 0, 0],
  [0, 200, 0],
  [0, 0, 200],
  [200, 200, 0],
  [200, 0, 200]
]
for (let i = 0; i < 5; i++) {
  const sliceCenter = sliceOffset.clone().multiplyScalar(i).add(center);
  const sliceBounds = new THREE.Box3().setFromCenterAndSize(sliceCenter, sliceSize);
  const sliceColor = [...sliceColors[i]];

  addFilteredModel(sliceBounds).then(model => {
    model.setDefaultNodeAppearance({ color: sliceColor });
  });
}
```

:::note
Geometry filters should not overlap as this will cause the same geometry to be loaded and
visualized more than once.
:::


<!-- SOURCE_END: reveal/documentation\versioned_docs\version-3.x\examples\combine-models.mdx -->

================================================================================


<!-- SOURCE_START: reveal/documentation\versioned_docs\version-3.x\examples\controlsmodes.mdx -->
## File: reveal/documentation\versioned_docs\version-3.x\examples\controlsmodes.mdx

---
id: controlsmodes
title: Camera controls modes
description: Usage of different camera controls modes
---

import { DemoWrapper } from '@site/versioned_docs/version-3.x/components/DemoWrapper';
import useBaseUrl from '@docusaurus/useBaseUrl';

Reveal allows you to use different camera controls modes. You can set different controls modes using `setCameraControlsOptions` method of `Cognite3DViewer` class in runtime. Configurable parameters are described in `CameraControlsOptions` type (see API Reference for details).

<DemoWrapper />

#### Mouse wheel action
Property `mouseWheelAction` describes what happens when user initiate a mouse wheel scroll. Possible valuses are:

| Value | Description |
| ----- | ----------- |
| `zoomToTarget` | zooms just to the current target (center of the screen) of the camera. |
| `zoomPastCursor` |  zooms in the direction of the ray coming from camera through cursor screen position, allows going through objects. |
| `zoomToCursor` | mouse wheel scroll zooms towards the point on the model where cursor is hovering over, doesn't allow going through objects. |

Default value is `zoomPastCursor`.

#### On click camera target change

Property `changeCameraTargetOnClick` enables or disables camera target change based on mouse clicks. When enabled, mouse click sets camera target to the point on the model where cursor is hovering over.

Default value is `false`.

Example of setting different camera controls options:

```jsx runnable-3x
const newControlsOptions = {
  mouseWheelAction: 'zoomToCursor',
  changeCameraTargetOnClick: true,
};

viewer.cameraManager.setCameraControlsOptions(newControlsOptions);
```


<!-- SOURCE_END: reveal/documentation\versioned_docs\version-3.x\examples\controlsmodes.mdx -->

================================================================================


<!-- SOURCE_START: reveal/documentation\versioned_docs\version-3.x\examples\node-visiting.mdx -->
## File: reveal/documentation\versioned_docs\version-3.x\examples\node-visiting.mdx

---
id: node-visiting
title: Node visitor functions
describe: Reveal has functions for iterating over nodes, either all nodes in a 3D model or a subtree of a parent node.
---

import { DemoWrapper } from '@site/versioned_docs/version-3.x/components/DemoWrapper';

Reveal has functions for iterating over CAD nodes, either all nodes in a 3D model or a subtree of a parent node.
Note that all functions are async, and the action that you pass is not applied immediately. A single model can
have millions of nodes. To avoid long blocking operations the action is applied in blocks, allowing for an
interactive page while the action is being applied.

<DemoWrapper />

## Iterate over all nodes

This example only demonstrates how iteration over model nodes performed gradually.

```jsx runnable-3x
async function visitAllNodes() {
  let sum = 0;
  await model.iterateNodesByTreeIndex(treeIndex => sum = sum + treeIndex)
  alert('Iteration is done! Sum of all tree indexes is ' + sum);
}
visitAllNodes();
```

## Iterate over subtree nodes

`Cognite3DModel.iterateSubtreeByTreeIndex` iterates over all descendants of a node by tree index. The provided
tree index is included in the set of visited nodes. The following example sets the color of all descendants of
a node. This mimics the functionality of `Cognite3DModel.setNodesColorsByTreeIndex` with `applyToChildren`
set to `true`.

```jsx runnable-3x
async function visitSubtree() {
  let sum = 0;
  await model.iterateSubtreeByTreeIndex(917985, treeIndex => sum = sum + treeIndex);
  alert('Iteration is done! Sum of all tree indexes in subtree is ' + sum);
}
visitSubtree();
```


<!-- SOURCE_END: reveal/documentation\versioned_docs\version-3.x\examples\node-visiting.mdx -->

================================================================================


<!-- SOURCE_START: reveal/documentation\versioned_docs\version-3.x\examples\point-to-point-measurement.mdx -->
## File: reveal/documentation\versioned_docs\version-3.x\examples\point-to-point-measurement.mdx

---
id: point-to-point-measurement
title: Point to point measurement
description: Demo shows how to measure point to point distance in Reveal.
---

import { DemoWrapper } from '@site/versioned_docs/version-3.x/components/DemoWrapper';
import useBaseUrl from '@docusaurus/useBaseUrl';

The `MeasurementTool` is a measuring tool for point to point distance in 3D models, by clicking to- and from-points. The default measurement unit is meters, but the tool provides callbacks to allow configuring the unit.
When exiting from the tool, all the measurement will be removed from the `Cognite3DViewer`. Note that the precision the tool can provide is limited, and the tool should only be used for approximate measurement - not high precision measurement for e.g. construction.

To effectively edit measuring line properties, tool is configurable with `MeasurementOptions` options to set
- Custom label content for each measurement.
- Size of line width in meters.
- Color of line.

:::tip
`CameraControlsOptions.changeCameraTargetOnClick` should be set to `false` to avoid click event registering for camera when `MeasurementTool` is active. Also avoid any custom click-handler that might interfere with the measurement tool.
:::

<DemoWrapper />

## Point to point distance measurment
To enter point-to-point measurement mode, use `MeasurementTool.enterMeasurementMode()`. This will register events for handling mouse clicks and touch events to allow placing the measurement end-points. Note that the tool is optimized for use with mouse.

To exit measurement mode, call `exitMeasurementMode()`. The tool will also exit measurement mode if user presses Escape key.

```jsx runnable-3x
// import { MeasurementTool } from '@cognite/reveal/tools';

const measurementTool = new MeasurementTool(viewer);
measurementTool.enterMeasurementMode();
```

## Events
The tool exposes events for subscribing to measurement start, end & added. In the below example, the mouse cursor is changed to a cross-hair while measuring.

```jsx runnable-3x
// import { MeasurementTool } from '@cognite/reveal/tools';
const measurementTool = new MeasurementTool(viewer);

// Subscribe to measurement events
measurementTool.on('started',
  () => viewer.domElement.style.cursor = 'crosshair');
measurementTool.on('ended',
  () => viewer.domElement.attributeStyleMap.delete('cursor'));
measurementTool.on('added', (measurement) => {
  alert(`Measurement added with ${JSON.stringify(measurement.distanceInMeters)} distance!`);
  measurementTool.exitMeasurementMode();
});

measurementTool.enterMeasurementMode();
```



### Mode of measurement
To get the mode of measurement `MeasurementTool.isInMeasurementMode`. It returns `true` if the measurement is active else `false`.


## Set width, color & label units of the measuring line
To change width, color of the line and label units, use `MeasurementTool.setLineOptions(options: MeasurementOptions)`. MeasurementOptions expects
  - `distanceToLabelCallback` : callback for custom operation on measurement labels
  - `lineWidth` : number - units in meters
  - `color` : THREE.color

The updated line width, color and label units will be applied for the next measuring distance.

```jsx runnable-3x
// import { MeasurementTool } from '@cognite/reveal/tools';

const lineOptions = {
  distanceToLabelCallback: (distanceInMeters) => {
  // 1 meter = 100 centimeter
  return `${(distanceInMeters * 100).toFixed(2)} cm`;
  },
  lineWidth: 0.1,
  color: new THREE.Color(0xff0000)
};
const measurementTool = new MeasurementTool(viewer);
measurementTool.enterMeasurementMode();

//Update line width, color and label units for the next measuring line.
measurementTool.setLineOptions(lineOptions);
```

### Get all measurement
To get all measurements added the tool provides `MeasurementTool.getAllMeasurements()` which will
return an array of measurements of type `Measurement`, having below details
  - `measurementId` : unique id of measurement.
  - `startPoint` : start point of the measurement.
  - `endPoint` : end point of the measurement.
  - `distanceInMeters` : measured distance in meters.
```jsx runnable-3x
// import { MeasurementTool } from '@cognite/reveal/tools';

const measurementTool = new MeasurementTool(viewer);
measurementTool.enterMeasurementMode();

//add measurements

//get all measurements
setTimeout(() => {
  const measurements = measurementTool.getAllMeasurements();
  measurements.forEach(measurement => {
    alert(measurement.distanceInMeters);
  });
}, 6000);
```

### Change appearance of existing measurement
To change existing measurement line width or color, use `MeasurementTool.updateLineWidth(lineWidth: number)` or `MeasurementTool.updateLineColor(color: THREE.Color)`

```jsx runnable-3x
// import { MeasurementTool } from '@cognite/reveal/tools';

const measurementTool = new MeasurementTool(viewer);
setInterval(() => {
  const measurements = measurementTool.getAllMeasurements();
  console.log(measurements);
  for (const measurement of measurements) {
    const color = Math.floor(Math.random() * 16777215);
    const lineWidth = (Math.random() * 1.0) + 0.2;
    measurementTool.updateLineColor(measurement, new THREE.Color(color));
    measurementTool.updateLineWidth(measurement, lineWidth);
  }
}, 200);
measurementTool.enterMeasurementMode();
```

### Remove measurement
To remove a measurement from the viewer, we have `MeasurementTool.removeMeasurement(measurement: Measurement)`
  - `measurement` : Measurement to be removed.

```jsx runnable-3x
// import { MeasurementTool } from '@cognite/reveal/tools';

const measurementTool = new MeasurementTool(viewer);
measurementTool.enterMeasurementMode();

//remove the first measurement in the added list
setTimeout(() => {
  const measurements = measurementTool.getAllMeasurements();

  if (measurements[0]) {
    measurementTool.removeMeasurement(measurements[0]);
  }
}, 6000);
```

To remove all measurement from the viewer, use `MeasurementTool.removeAllMeasurement()`

### Label visibility
Measurement labels can be hidden/visible using `MeasurementTool.showMeasurementLabels(enable: boolean)`.
```jsx
// Hide all measurement lables
measurementTool.showMeasurementLabels(false);
```


<!-- SOURCE_END: reveal/documentation\versioned_docs\version-3.x\examples\point-to-point-measurement.mdx -->

================================================================================


<!-- SOURCE_START: reveal/documentation\versioned_docs\version-3.x\examples\pointcloud.mdx -->
## File: reveal/documentation\versioned_docs\version-3.x\examples\pointcloud.mdx

---
id: pointcloud
title: Pointcloud models
description: Usage of pointcloud models with Cognite3DViewer
---

import useBaseUrl from '@docusaurus/useBaseUrl';

`@cognite/reveal` supports point clouds through a third-party library, [`three-loader`](https://github.com/pnext/three-loader) that is
included in the Reveal codebase and modified for our needs. Most of the internal point cloud logic is based on [`potree`](https://github.com/potree/potree/).
The viewer supports loading both point clouds and CAD models at the same time. Point clouds can be generated from various sources including
[laser scans](https://en.wikipedia.org/wiki/Laser_scanning) and [photogrammetry models](https://en.wikipedia.org/wiki/Photogrammetry).
Loading point clouds is done with identical code to when [loading CAD models](./cad-basic) - Reveal will determine that the model
is a point cloud model and act accordingly.

import { DemoWrapper } from '@site/versioned_docs/version-3.x/components/DemoWrapper';

<DemoWrapper modelType="pointcloud" />

```jsx
import { CogniteClient } from '@cognite/sdk';
import { Cognite3DViewer } from '@cognite/reveal';

const loginManager = new LoginManager('publicdata', 'api');
const client = new CogniteClient({
  appId: 'myPointCloudAppId',
  project: loginManager.project,
  getToken: async () => loginManager.getToken()
});

// some div in your html page for Cognite3DViewer to insert a canvas
const domElement = document.getElementById('canvas-wrapper');

async function main() {
  // to view models from CDF authentication is required

  await client.authenticate();

  const viewer = new Cognite3DViewer({ sdk: client, domElement });

    // load a model and add it on 3d scene
    // https://console.cognitedata.com/publicdata/3d-models/4715379429968321/revisions/5688854005909501
    const model = await viewer.addModel({
      modelId: 4715379429968321,
      revisionId: 5688854005909501,
    });
    viewer.loadCameraFromModel(model);

    // call viewer.dispose() when you don't need the viewer anymore
  }
  main();
```

## Point size

You can use `pointSize` property to set the size of each rendered point in a point cloud model.

```js runnable-3x
model.pointSize = 0.1;
```

## Point budget

The point budget limits the number of points loaded and rendered at any given time,
which helps to adapt performance requirements to the capabilities of different hardware.
Recommended values are between 500.000 and 10.000.000. The budget is shared among all
loaded point clouds.

```js runnable-3x
viewer.pointCloudBudget = { numberOfPoints: 500000 };
```

## Point shape

You can set the point shape of each rendered point in the point cloud. Values are defined by `PotreePointShape` enum.

```js runnable-3x
// import { PotreePointShape } from '@cognite/reveal';
model.pointShape = PotreePointShape.Square;
```

## Point color type

You can specify in which way points should be colored. Values are defined by `PotreePointColorType` enum.

```js runnable-3x
// import { PotreePointColorType } from '@cognite/reveal'
model.pointColorType = PotreePointColorType.Depth;
```

Other useful coloring schemes are `Rgb` (color) , `Classification` (color by point class) and `Intensity`
(strength of the backscattered signal in a laser scan).

## Point cloud post processing effects

Users can enable various post processing effects for point cloud rendering. One of them is the "point blending" effect
which produces a more "stable" rendering of surfaces within the point cloud model but it comes with a cost of
decreased performance.

<a target='_blank' href={useBaseUrl('/img/point-blending.jpg')}>
  <img src={useBaseUrl('/img/point-blending.jpg')} alt="Illustration of point blending effect" />
</a>

You can enable the described effect by passing a corresponding property on initialization of `Cognite3DViewer`:
```jsx
const viewer = new Cognite3DViewer(
  {
    sdk: client,
    pointCloudEffects: {
      pointBlending: true
    }
  });
```

## Classification filtering

Some point clouds have classification information associated with each point.  This can
be used for coloring or to filter the point cloud.

:::note
The demonstration model doesn't have classification data so the examples below are not
runnable.
:::

To list classes available in a point cloud model, use `CognitePointCloudModel.getClasses`:

```js
const classes = model.getClasses();
for (const pointClass of classes) {
  console.log(pointClass); // Prints a numeric class code
}
```

It's also possible to check if a model has a given class by using `CognitePointCloudModel.hasClass`.
A list of well-known point class codes are defined in `WellKnownAsprsPointClassCodes`. These definitions
by the [ASPRS LAS 1.4 specifications](http://www.asprs.org/wp-content/uploads/2019/03/LAS_1_4_r14.pdf).

To filter away certain classes, use `CognitePointCloudModel.setClassVisible`:

```js
model.setClassVisible(WellKnownAsprsPointClassCodes.Ground, false);
```

To check if a class currently is visible, use `isClassVisible`:

```js
const visible = model.isClassVisible(WellKnownAsprsPointClassCodes.Ground);
```

## Unloading models

Point clouds (and CAD models) can be unloaded using `Cognite3DViewer.removeModel()`:

```js runnable-3x
viewer.removeModel(model)
```


<!-- SOURCE_END: reveal/documentation\versioned_docs\version-3.x\examples\pointcloud.mdx -->

================================================================================


<!-- SOURCE_START: reveal/documentation\versioned_docs\version-3.x\examples\timeline.mdx -->
## File: reveal/documentation\versioned_docs\version-3.x\examples\timeline.mdx

---
id: timelinetool
title: Timeline tool
describe: Applying styles to nodes based on date with Play & Stop
---

import { DemoWrapper } from '@site/versioned_docs/version-3.x/components/DemoWrapper';

Reveal allows for applying styles to nodes based on date property and can be viewed as a playable entity
where node styles are applied to different nodes which can be used to showcase progress of the model construction.
The API is influenced by the [node styling API](cad-styling) and it's recommended to read up on this documentation before reading this document.

:::note
The test data used in the documentation site is for testing and to show the capabilities of the tool.
The examples shown is therefore might not be a ideal model construction progression.
:::

<DemoWrapper />

## Timeline

The timeline tool provides ability to apply styles by date. It works by creating a set of "keyframes"  for provided dates.
Each keyframe has a set of associated styled node collections.

### Creating keyframes
To create a `Keyframe`, use `createKeyframe(date: Date)`
- `date` - Date reference for the keyframe

```jsx
const keyframe = timeline.createKeyframe(new Date('2021-10-05'));
```

### Add styled node collections to keyframes
Tool provides feature to add nodes & styles to a Keyframe or number of Keyframes or to all of the Keyframes.
For more information on assigning styles please refer [CAD Styling](cad-styling).

```jsx
const nodes = new AssetNodeCollection(sdk, model);
keyframe.assignStyledNodeCollection(nodes, { renderGhosted: false, color: [150, 200, 120] });
```

### Remove styled node collections from keyframes

Styled node collections can be removed from keyframes.
`unassignStyledNodeCollection(nodeCollection: NodeCollection)`
- `nodeCollection` - Node set to be removed from keyframes.

```jsx
keyframe.unassignStyledNodeCollection(nodes);
```

### Play timelines
We use `play(startDate: Date, endDate: Date, durationInMilliSeconds: number)`
- `startDate` - Keyframe date to start the playback of the timeline keyframes.
- `endDate` - Keyframe date to stop the playback of the timeline keyframes.
- `durationInMilliSeconds` - Number of milli-seconds for the full playback of keyframes.

Note that the dates doesn't need to match the keyframe dates - the playback will be performed on a "virtual" timeline that is linear in time and update the styling whenever a new keyframe is activated. Only one keyframe will be active at any given time, i.e. the model will only have styling from one keyframe active at any time.

```js runnable-3x
// import { DefaultNodeAppearance, TreeIndexNodeCollection } from '@cognite/reveal';
// import { TimelineTool, Keyframe } from '@cognite/reveal/tools';

function createProgressBarContainer() {
  const container = document.createElement('div');
  container.style.cssText = `
    background: #333;
    border-radius: 13px;
    width: 500px;
    height: 25px;
    padding: 3px;
    align-items: center;
    justify-content: center;
    position: relative;
    transform: translate(-50%, -50%);
    left: 50%;
    bottom: 20px;
  `;
  return container;
}

function createProgressBar() {
  const progress = document.createElement('div');
  progress.style.cssText = `
    /* Progress after moving to next Keyframe */
    content: '';
    display: block;
    background: DodgerBlue;
    width: 0%;
    height: 20px;
    border-radius: 9px;
    position: relative;
  `;
  return progress;
}

model.setDefaultNodeAppearance({color: [200, 20, 0]});

const timeline = new TimelineTool(model);

for (let i = 0; i < 20; i++) {
  const indexSet = new IndexSet();
  indexSet.addRange(new NumericRange(0, (i+1)*60000));
  const nodes = new TreeIndexNodeCollection(indexSet);
  const keyframe = timeline.createKeyframe(new Date(`2020-01-${i+1}`));
  keyframe.assignStyledNodeCollection(nodes, { color: [20, 200, 0] });
}

// div element Cognite3DViewer to insert into the canvas
const domElement = document.getElementById('demo-wrapper');
const container = createProgressBarContainer();
const progressBar = createProgressBar();
container.appendChild(progressBar);
domElement.appendChild(container);

const durationMs = 20000;
const startDate = new Date('2020-01-01');
const endDate = new Date('2020-01-20');
timeline.subscribe('dateChanged', (data) => {
  const progress = ((data.date.getTime() - data.startDate.getTime()) / (data.endDate.getTime() - data.startDate.getTime()) * 100);
  progressBar.style.width = `${progress}%`;
  });

timeline.play(startDate, endDate, durationMs);
```

### Stop timeline playback

```jsx
timeline.stop();
```

### Pause timeline

```jsx
timeline.pause();
```

### Resume timeline

```jsx
timeline.resume();
```

### Get Keyframe by Date
`getKeyframeByDate(date: Date)`
- `date` - Date of the Keyframe which needs retrived.

```jsx
const keyframe = timeline.getKeyframeByDate(new Date('2021-10-06'));
```

### Reacting to date changes while in playback mode
While in the play state, the tool emits events which will be helpful for the users to calculate the progression of the playback of the timeline.
The tool provides a `TimelineDateUpdateDelegate` event which can be subscribed to received below data.
- `date` - Virtual date which can be used to calculate progression.
- `activeKeyframe` - Current active `Keyframe` in the playback.
- `startDate` - Virtual date to start the playback of the timeline.
- `endDate` - Virtual date to stop the playback of the timeline.

:::note
If we have subscribed to `dateChanged` event and if there are no active Keyframe during Timeline playback, than `activeKeyframe` data will be `undefined` value.
:::

```jsx
// import { TimelineDateUpdateDelegate } from '@cognite/reveal/tools';

timeline.subscribe('dateChanged', (data) => {
  const date = data.date;
  const keyframe = data.activeKeyframe;
  const startDate = data.startDate;
  const endDate = data.endDate;
});
```

To unsubscribe from `TimelineDateUpdateDelegate` event

```jsx
timeline.unsubscribe('dateChanged', (data) => {});
```

### Removing Keyframe
#### By Date
To remove any Keyframe, use `removeKeyframeByDate(date: Date)`
- `date` - Date of the Keyframe which needs to be removed from the Timeline.

```jsx
timeline.removeKeyframeByDate(new Date('2021-10-07'));
```

#### By Keyframe
To remove any Keyframe, use `removeKeyframe(keyframe: Keyframe)`
- `keyframe` - Keyframe to be removed from the Timeline.

```jsx
timeline.removeKeyframe(keyframeMechNodes);
```

### Keyframes in Timeline
Gets all Keyframes in the Timeline

```jsx
const allKeyframes = timeline.getAllKeyframes();
```


<!-- SOURCE_END: reveal/documentation\versioned_docs\version-3.x\examples\timeline.mdx -->

================================================================================


<!-- SOURCE_START: reveal/documentation\versioned_docs\version-3.x\extending\camera-manager.mdx -->
## File: reveal/documentation\versioned_docs\version-3.x\extending\camera-manager.mdx

---
id: camera-manager
title: Custom CameraManager
description: Shows how to implement custom CameraManager to enable new camera manipulation features.
---

import useBaseUrl from '@docusaurus/useBaseUrl';

By default `Cognite3DViewer` uses `DefaultCameraManager` class to manage user interaction with the camera.
In certain cases it can be useful to customize behaviour of the camera:

- Need to provide custom `THREE.PerspectiveCamera` object to `Cognite3DViewer`
- Need to extend camera controls to any specific case that is not covered by current implementation


## Overview

To create a custom camera manager class, `CameraManager` interface from `@cognite/reveal` must be implemented
and provided to `Cognite3DViewer` on construction using the `cameraManager`-option. You can also set camera manager
in runtime by calling `setCameraManager` method of `Cognite3DViewer` class. Interface looks like this:

```js
export interface CameraManager {
  /**
   * Returns the camera used for rendering in {@link Cognite3DViewer}.
   * Note that the camera will not be modified directly by Reveal.
   * Implementations must trigger the `cameraChange`-event whenever the
   * camera changes.
   */
  getCamera(): THREE.PerspectiveCamera;
  /**
   * Set camera's state. Rotation and target can't be set at the same time. as they could conflict,
   * should throw an error if both are passed with non-zero value inside state.
   *
   * @param state Camera state, all fields are optional.
   * @param state.position Camera position in world space.
   * @param state.target Camera target in world space.
   * @param state.rotation Camera local rotation in quaternion form.
   * @example
   * ```js
   * // store position, target
   * const { position, target } = cameraManager.getCameraState();
   * // restore position, target
   * cameraManager.setCameraState({ position, target });
   * ```
   */
  setCameraState(state: CameraState): void;

  /**
   * Get camera's state
   * @returns Camera state: position, target and rotation.
   */
  getCameraState(): Required<CameraState>;

  /**
   * Subscribes to changes of the camera event. This is used by Reveal to react on changes of the camera.
   * @param event Name of the event.
   * @param callback Callback to be called when the event is fired.
   */
  on(event: 'cameraChange', callback: CameraChangedEvent): void;
  /**
   * Unsubscribes from changes of the camera event.
   * @param event Name of the event.
   * @param callback Callback function to be unsubscribed.
   */
  off(event: 'cameraChange', callback: CameraChangedEvent): void;

  /**
   * Moves camera to a place where the content of a bounding box is visible to the camera.
   * @param box The bounding box in world space.
   * @param duration The duration of the animation moving the camera.
   * @param radiusFactor The ratio of the distance from camera to center of box and radius of the box.
   */
  fitCameraToBoundingBox(boundingBox: THREE.Box3, duration?: number, radiusFactor?: number): void;
  /**
   * Updates internal state of camera manager. Expected to update visual state of the camera
   * as well as it's near and far planes if needed. Called in `requestAnimationFrame`-loop.
   * Reveal performance affects frequency with which this method is called.
   * @param deltaTime Delta time since last update in seconds.
   * @param boundingBox Global bounding box of the model(s) and any custom objects added to the scene.
   */
  update(deltaTime: number, boundingBox: THREE.Box3): void;
  /**
   * @obvious
   */
  dispose(): void;
}

```

Main implementation specific functions are `setCameraState`, `fitCameraToBoundingBox` and `update`. 
Setting state shouldn't be possible when `rotation` and `target` are passed at the same time because they could conflict.
When implementing these functions you can use a helper class `CameraManagerHelper` that contains some useful methods.

## Example implementation

Here is an example implementation of a custom camera manager that utilizes standard ThreeJS [`OrbitControls`](https://threejs.org/docs/index.html?q=orbit#examples/en/controls/OrbitControls) for mouse movement:

```js
import * as THREE from 'three'
import { OrbitControls } from 'three/examples/jsm/controls/OrbitControls';

import { CameraManager, CameraManagerHelper, CameraState, CameraChangeDelegate } from '@cognite/reveal';

export class CustomCameraManager implements CameraManager {
    private _domElement: HTMLElement;
    private _camera: THREE.PerspectiveCamera;
    private _controls: OrbitControls;
    private readonly _cameraChangedListener: Array<CameraChangeDelegate> = [];

    constructor(domElement: HTMLElement, camera: THREE.PerspectiveCamera) {
        this._domElement = domElement;
        this._camera = camera;
        this._controls = new OrbitControls(this._camera, domElement);
        this._controls.enableDamping = true;
        this._controls.dampingFactor = 0.3;

        this._controls.addEventListener('change', () => {
            this._cameraChangedListener.forEach( cb => cb(this._camera.position, this._controls.target));
        });
    }

    set enabled(value: boolean) {
        this._controls.enabled = value;
    }

    get enabled(): boolean {
        return this._controls.enabled;
    }

    getCamera(): THREE.PerspectiveCamera {
        return this._camera;
    }

    setCameraState(state: CameraState): void {
        if (state.rotation && state.target) throw new Error("Can't set both rotation and target");
        const position = state.position ?? this._camera.position;
        const rotation = state.rotation ?? this._camera.quaternion;
        const target = state.target ?? ( state.rotation ? 
            CameraManagerHelper.calculateNewTargetFromRotation(
                this._camera, state.rotation, this._controls.target) : 
            this._controls.target);

        this._camera.position.copy(position);
        this._controls.target.copy(target);
        this._camera.quaternion.copy(rotation);
    }

    getCameraState(): Required<CameraState> {
        return {
            position: this._camera.position.clone(),
            target: this._controls.target.clone(),
            rotation: this._camera.quaternion.clone(),
        }
    }

    on(event: "cameraChange", callback: CameraChangeDelegate): void {
        this._cameraChangedListener.push(callback);
    }

    off(event: "cameraChange", callback: CameraChangeDelegate): void {
        const index  = this._cameraChangedListener.indexOf(callback);
        if (index !== -1) {
            this._cameraChangedListener.splice(index, 1);
        }
    }

    fitCameraToBoundingBox(boundingBox: THREE.Box3, duration?: number, radiusFactor?: number): void {
        const { position, target } = CameraManagerHelper.calculateCameraStateToFitBoundingBox(this._camera, boundingBox, radiusFactor);

        this.setCameraState({ position, target });
    }

    update(deltaTime: number, boundingBox: THREE.Box3): void {
        this._controls.update();
        CameraManagerHelper.updateCameraNearAndFar(this._camera, boundingBox);
    }

    dispose(): void {
        this._controls.dispose();
        this._cameraChangedListener.splice(0);
    }
}
```
As you can see, implementation can be quite simple. There are three things that you should really pay extra attention to:
1. `'cameraChange'` event must be fired every time camera position or rotation changes to trigger redraw in Reveal.
2. For the `setCameraState` method you should properly handle how change in rotation and target affects the camera and corresponds with 
the behaviour of camera controls (`OrbitControls` in this case). For calculating camera target from rotation you can use `calculateNewTargetFromRotation` method of `CameraManagerHelper` .
3. Inside `update` method you should update `near` and `far` planes of the camera, which can be easily done using `updateCameraNearAndFar` method of `CameraManagerHelper`. 


<!-- SOURCE_END: reveal/documentation\versioned_docs\version-3.x\extending\camera-manager.mdx -->

================================================================================


<!-- SOURCE_START: reveal/documentation\versioned_docs\version-3.x\extending\datasource.mdx -->
## File: reveal/documentation\versioned_docs\version-3.x\extending\datasource.mdx

---
id: datasource
title: Use a custom data source
description: Shows how to write a data source to customize how Reveal reads data.
---

import useBaseUrl from '@docusaurus/useBaseUrl';

Reveal is designed to retrieve data from [Cognite Data Fusion (CDF)](https://docs.cognite.com/cdf/).
In certain scenarios it might be useful to customize how Reveal retrieves data, to e.g.:

- Introduce application specific caching to reduce network traffic
- Improve responsiveness in areas with limited connectivity
- Introduce extra logging of network activity related to 3D
- Store models locally

Note that certain features relies on connectivity to CDF and won't work without a connection.

## Overview

To implement a custom data source, DataSource from `@cognite/reveal/extensions/datasource` must be implemented
and provided to `Cognite3DViewer` on construction using the `customDataSource`-option, which in turn
provides instances of three interfaces:

| Interface               | Description                                                                                                   |
| ----------------------- | ------------------------------------------------------------------------------------------------------------- |
| `ModelMetadataProvider` | Provides access to metadata about models, including "base URL", camera information and model transformation.  |
| `ModelDataProvider`     | Access to geometry files and JSON description files for 3D models given URLs.                                 |
| `NodesApiClient`        | Provides access to metadata about 3D nodes, such as bounding box and ancestors.                               |

Some of the interface functions are required, some are optional at the cost of reduced functionality in Reveal. See details below.


## ModelMetadataProvider

`ModelMetadataProvider` is responsible for determining the "base URL" for a model, determine
the "model transformation" and the default camera.

Implementations can assume that all identifiers will be of type `CdfModelIdentifier`:

```js
class CdfModelIdentifier implements ModelIdentifier {
  readonly revealInternalId: symbol;
  readonly modelFormat: File3dFormat;
  readonly modelId: number;     // CDF ModelID
  readonly revisionId: number;  // CDF RevisionID
}
```

| Function/Field          | Required?                                  | Description                                                      |
| ----------------------- | ------------------------------------------ | ---------------------------------------------------------------- |
| `getModelUri()`         | Yes                                        | Determine the base URL that will be used when download metadata and geometry using `ModelDataProvider`. |
| `getModelCamera()`      | No - return `undefined` to use default     | Return an initial camera pose for the model                      |
| `getModelMatrix()`      | Yes, but value can be hardcoded.           | Returns an transformation matrix for transforming from stored coordinates to Reveal coordinates (see below) |
| `getModelOutputs()`     | Yes                                        | Returns an object describing the set of valid formats and version for the given model |

`getModelUri()` returns a "base URL" that will be passed to `ModelDataProvider.getBinaryFile()` and `getJsonFile()`. Note that
it's up to `ModelDataProvider` how this base URL is handled and it is possible to use this base URL as 
some other identifier, e.g. a folder on disk or ID of a blob storage. `getModelUri()` accepts `BlobOutputMetadata` as input which 
defines the format, version, and if applicable, the "blob id" of the output.

`getModelMatrix()` is responsible for converting from stored geometry coordinates to Reveal coordinates (right-handed, Y up). This 
is required for models stored in different orientation in CDF. For CAD models, most models are stored in a right-handed Z up coordinate system, and will need
a transformation. By default, this transformation can be expressed as:

<img src={useBaseUrl('/img/default-cad-matrix.png')} alt="Default CAD to Reveal orientation matrix" />

This corresponds to a 180 degree rotation around the X axis:

```js
new THREE.Matrix4().makeRotationFromEuler(new THREE.Euler(-Math.PI / 2, 0, 0));
```

For point clouds, models are usually stored right-handed Y up and requires no transformation. In this case,
the identity matrix should be returned instead:

```js
new THREE.Matrix4().identity();
```

In addition to the model identifier, the methods can accept the format of the output which describes which output format that is used for the given model/revision.

`getModelOutputs()` returns a list of supported outputs for a given model/revision.
The `BlobOutputMetadata` type includes the format, version, and if applicable, the "blob id" of the model. 


### Example implementation

This simple implementation provides metadata for models stored locally and provides 
default camera and model transformation.

Notice that each of the functions asserts that the identifier is a `CdfModelIdentifier`. Currently, 
this should always be true.

```js
import { 
  CdfModelIdentifier, 
  ModelIdentifier,
  ModelMetaDataProvider
} from '@cognite/reveal/extensions/datasource';

class MyModelMetaDataProvider implements ModelMetaDataProvider {
  getModelUri(identifier: ModelIdentifier, formatMetadata: BlobOutputMetadata): Promise<string> {
    if (!(identifier instanceof CdfModelIdentifier)) {
      throw new Error('Unexpected identifier');
    }
    // Base URL of where geometry files are stored
    // This will be passed to ModelDataProvider.getJsonFile() and getBinaryFile()
    return Promise.resolve(`https://localhost/models/${identifier.modelId}/revision/${identifier.revisionId}`);
  }

  getModelCamera(identifier: ModelIdentifier): Promise< { position: THREE.Vector3; target: THREE.Vector3 } | undefined> {
    if (!(identifier instanceof CdfModelIdentifier)) {
      throw new Error('Unexpected identifier');
    }
    // Use default camera
    return Promise.resolve(undefined);
  }

  getModelMatrix(identifier: ModelIdentifier, format: File3dFormat | string): Promise<THREE.Matrix4> {
    if (!(identifier instanceof CdfModelIdentifier)) {
      throw new Error('Unexpected identifier');
    }
    // CAD models are usually stored in Z-up, while Reveal uses Y-up, so
    // we need to account for this
    const cadModelToReveal = new THREE.Matrix4().makeRotationFromEuler(new THREE.Euler(-Math.PI / 2, 0, 0));
    return Promise.resolve(cadModelToReveal);
  }

  getModelOutputs(modelIdentifier: ModelIdentifier): Promise<BlobOutputMetadata[]> {
    // Indicates that the supported output for this model is of type File3dFormat.RevealCadModel and version 8
    
    // BlobId refers to a remote identifier for a blob storage, but since this simply fetches
    // the model locally, it can be set to -1
    return Promise.resolve([
      {
        blobId: -1,
        format: File3dFormat.RevealCadModel,
        version: 8
      }
    ]);
  }
}
```

## ModelDataProvider

`ModelDataProvider` is responsible for receiving files by URL.

| Function/Field          | Required?                                  | Description                                                      |
| ----------------------- | ------------------------------------------ | ---------------------------------------------------------------- |
| `getBinaryFile()`       | Yes                                        | Retrieves a binary blob. Used to download CAD geometry and point clouds  |
| `getJsonFile()`         | Yes                                        | Retrieves JSON data. This is used to retrieve metadata about models |

### Example implementation

The following example simply downloads files using `fetch()`. Note that
it's up to the implementation to decide how to retrieve data, and that 
data doesn't necessarily need to be downloaded over HTTP.

```js
import { ModelDataProvider } from '@cognite/reveal/extensions/datasource';

class MyModelDataProvider implements ModelDataProvider {
  async getJsonFile(baseUrl: string, fileName: string): Promise<any> {
    const url = `${baseUrl}/${fileName}`;
    const response = await fetch(url);
    if (!response.ok) {
      throw new Error(`Could not fetch '${url}'`);
    }
    return response.json();
  }

  async getBinaryFile(baseUrl: string, fileName: string): Promise<ArrayBuffer> {
    const url = `${baseUrl}/${fileName}`;
    const response = await fetch(url);
    if (!response.ok) {
      throw new Error(`Could not fetch '${url}'`);
    }
    return response.arrayBuffer();
  }
}
```

## NodesApiClient

The API client is responsible for providing metadata about 3D CAD nodes, including node bounding boxes and parent/child relationships between nodes.

| Function/Field              | Required by<br />(in `Cognite3DModel`)          | Description                                                      |
| --------------------------- | ------------------------------------------ | ----------------------------------------------------------------- |
| `mapTreeIndicesToNodeIds()` | `mapTreeIndexToNodeId()`, `mapTreeIndicesToNodeIds()`, `getBoundingBoxByTreeIndex()` | Maps from Reveal tree indices to CDF node IDs used to identify nodes in CDF |
| `mapNodeIdsToTreeIndices()` | No, but recommended to have a 1:1 mapping  | Reverse mapping of `mapTreeIndicesToNodeIds()`                   |
| `determineTreeIndexAndSubtreeSizesByNodeIds()` | No                      | Determines the "span" of a node identified by a CDF node ID (i.e. the tree index and how many descendants it has including the node itself). |
| `determineNodeAncestorsByNodeId()` | No                                  | Find "ancestor span" of a node identified by the CDF node ID. Returns data on same format as function above. |
| `getBoundingBoxesByNodeIds()` | No                                          | Determines the individual bounds of each node, specified by their CDF node IDs. |

### Example implementation

```js
class MyNodesApiClient implements NodesApiClient {
  mapTreeIndicesToNodeIds(modelId: number, revisionId: number, treeIndices: number[]): Promise<number[]> {
    // Map 1:1 - pretend treeIndices == nodeIds
    return Promise.resolve(treeIndices);
  }
  mapNodeIdsToTreeIndices(modelId: number, revisionId: number, nodeIds: number[]): Promise<number[]> {
    // Map 1:1 - pretend treeIndices == nodeIds
    return Promise.resolve(nodeIds);
  }
  determineTreeIndexAndSubtreeSizesByNodeIds(modelId: number, revisionId: number, nodeIds: number[]): Promise<{treeIndex: number; subtreeSize: number }[]> {
    throw new Error('Not supported.');
  }
  determineNodeAncestorsByNodeId(modelId: number, revisionId: number, nodeId: number, generation: number): Promise<{treeIndex: number; subtreeSize: number }> {
    throw new Error('Not supported.');
  }
  getBoundingBoxesByNodeIds(modelId: number, revisionId: number, nodeIds: number[]): Promise<THREE.Box3[]> {
    throw new Error('Not supported.');
  }
}
```

## Unsupported features

There's a few features that is not backed by the `DataSource`-API and hence won't be affected by the implementation. The most
notable feature is the [CAD styling API](../examples/cad-styling) which in large is backed by `CogniteClient`. To use the styling API with
custom data sources, you will need to [create custom node collections](../examples/cad-styling-custom) or [use `TreeIndexNodeCollection`](../examples/cad-styling).

Currently there are restrictions in the [the API for saving viewer state](../examples/cad-save-viewerstate) causing `Cognite3DViewer.setViewState` not
to work with a custom `DataSource`. This might change in the future.


<!-- SOURCE_END: reveal/documentation\versioned_docs\version-3.x\extending\datasource.mdx -->

================================================================================


<!-- SOURCE_START: reveal/documentation\versioned_docs\version-3.x\installation.mdx -->
## File: reveal/documentation\versioned_docs\version-3.x\installation.mdx

---
id: installation
title: Installation
description: Reveal installation guide
---

The library has a peer-dependency on [Cognite Data Fusion JS-SDK](https://www.npmjs.com/package/@cognite/sdk)
which must be installed as a dependency in the client application that uses Reveal.

```bash npm2yarn
npm install @cognite/reveal @cognite/sdk
```

If you will be using ThreeJS directly from the application, you will also need to install the correct version of ThreeJS and
types information if you are using TypeScript:

```bash npm2yarn
npm install three@<version>
npm install --save-dev @types/three@<version>
```

Please find the correct version of ThreeJS in [the release documentation on Github](https://github.com/cognitedata/reveal/releases/).

## Regarding WebWorkers

Reveal uses [Web Workers](https://developer.mozilla.org/en-US/docs/Web/API/Web_Workers_API) and [WebAssembly](https://webassembly.org/)
to handle 3D geometry. This causes some problems when bundling and loading packages from NPM.
Some effort might therefore be needed before Reveal can be used in your project depending on how the servers hosting your application are configured.

There are two different types of deployment scenarios:

1. Projects where Cognite [CDN](https://en.wikipedia.org/wiki/Content_delivery_network)
`apps-cdn.cognitedata.com` is available
(no restrictive [`Content-Security-Policy`](https://developer.mozilla.org/en-US/docs/Web/HTTP/CSP)-headers are set, or apps-cdn is whitelisted)

2. Projects with [CSP](https://developer.mozilla.org/en-US/docs/Web/HTTP/CSP)
that forbids to fetch scripts from `apps-cdn.cognitedata.com`.

By default, Reveal will try to fetch its worker/WASM files from `apps-cdn.cognitedata.com`.
If there are no CSP in your project that forbids that, Reveal should work out of the box without any additional steps.

In case if you see an error like the following in your development console:

> Refused to load the script 'https://apps-cdn.cognitedata.com/@cognite/reveal-parser-worker@1.1.0/reveal.parser.worker.js' because it violates the following Content Security Policy directive: "script-src 'self' https://localhost:* blob:"

See the steps below.

## Installation for projects with Content-Security-Policy

What you'll need to do is to host worker/wasm files at some server from which your browser can download and run js code.

Before going with any of the steps below, consider to just whitelist Cognite CDN in your Content-Security-Policy.
All you need to do is to add into your CSP:
* [script-src](https://developer.mozilla.org/en-US/docs/Web/HTTP/Headers/Content-Security-Policy/script-src) `apps-cdn.cognitedata.com`
* [worker-src](https://developer.mozilla.org/en-US/docs/Web/HTTP/Headers/Content-Security-Policy/worker-src) `blob:` (only the first option described below doesn't need `worker-src blob:`)


Also, notice that because Safari browser [doesn't support](https://caniuse.com/#search=instantiateStreaming)
`WebAssembly.InstantiateStreaming` yet, so it uses `WebAssembly.instantiate` which requires
`script-src: unsafe-eval` to be presented in CSP. Evaluate security risks before adding `unsafe-eval` to your CSP.

If whitelisting of `apps-cdn.cognitedata.com` is not an options for you, go with one of the steps below.

<!-- check the anchor links if change this title -->
### Option 1: include Web Worker and WebAssembly files as static assets in your project

Copy all files from `/node_modules/@cognite/reveal-parser-worker/dist/local`
to some static folder in your project. E.g., for React projects, the typical folder is `/public`.

You can add this command to your build scripts:

```
cp ./node_modules/@cognite/reveal-parser-worker/dist/local/* ./public/reveal-worker
```

The point is that parser-worker files should be available under some network path
like in that case `https://localhost:xxxx/reveal-worker/reveal.parser.worker.js` if you can see
script content in your browser you're almost done.

The only thing left is to tell the reveal library from which path workers should be fetched.
To do that, use `revealEnv`:

```js
import { revealEnv, Cognite3DViewer } from '@cognite/reveal';
revealEnv.publicPath = `/reveal-worker/`;

// ... then use reveal normally ...
const viewer = new Cognite3DViewer(/*...*/)
```

<!--- be careful with the indentation here --->

  <details>
    <summary>Other copying options</summary>

  Below are few more convenient options for copying if you don't like having that command in your package.json:

```bash
  cp ./node_modules/@cognite/reveal-parser-worker/dist/local/* ./public/reveal-worker
```

#### Option 1.1: Copy worker files locally in a create-react-app based project

1. Install [react-app-rewired](https://github.com/timarney/react-app-rewired). It's required to slightly modify react-scripts from create-react-app without running `eject`

    ```bash npm2yarn
    npm install react-app-rewired --save-dev
    ```

1. 'Flip' the existing calls to `react-scripts` in `npm` scripts for start, build and test

   ```diff title="/package.json"
     "scripts": {
   -   "start": "react-scripts start",
   +   "start": "react-app-rewired start",
   -   "build": "react-scripts build",
   +   "build": "react-app-rewired build",
   -   "test": "react-scripts test",
   +   "test": "react-app-rewired test",
       "eject": "react-scripts eject"
   }
   ```

1. Install [copy-webpack-plugin](https://webpack.js.org/plugins/copy-webpack-plugin/)

   ```bash npm2yarn
    npm install copy-webpack-plugin --save-dev
    ```

1. Create a `config-overrides.js` file in the root directory with the following content

    ```javascript title="./config-overrides.js"
    const CopyWebpackPlugin = require('copy-webpack-plugin');

    const revealSource = 'node_modules/@cognite/reveal';

    module.exports = function override(config) {
      if (!config.plugins) {
        // eslint-disable-next-line no-param-reassign
        config.plugins = [];
      }

      // that's for 6.x version of webpack-copy-plugin
      // if you use 5.x just put content of patterns into constructor
      // new CopyWebpackPlugin([ /* { from, to } */ ])
      config.plugins.push(
        new CopyWebpackPlugin({
          patterns: [
            {
              from: `${revealSource}/**/*.worker.js`,
              to: '.',
              flatten: true,
            },
            {
              from: `${revealSource}/**/*.wasm`,
              to: '.',
              flatten: true,
            },
          ],
        })
      );

      return config;
    };
    ```

Now all `*.worker.js` and `*.wasm` files from `@cognite/reveal` should be copied into your output folder when you run build.

#### Option 1.2: Copy worker files locally for non-create-react-app based projects

Just make sure that you have `*.worker.js` and `*.wasm` files from `@cognite/reveal` in your output folder.

If you use webpack, you might want to add [copy-webpack-plugin@^5.1.1](https://webpack.js.org/plugins/copy-webpack-plugin/)
in your `webpack.config.js`

```javascript
// webpack.config.js
const revealSource = 'node_modules/@cognite/reveal';

{
  /* ... */
  plugins: [
    new CopyWebpackPlugin({
      patterns: [
        {
          from: `${revealSource}/**/*.worker.js`,
          to: '.',
          flatten: true,
        },
        {
          from: `${revealSource}/**/*.wasm`,
          to: '.',
          flatten: true,
        },
      ],
    })
  ]
}
```

  </details>

### Option 2: host Web Worker and WebAssembly files externally

In case if there is no such `/public` or similar folder in your project, you're likely using a different service
to host static assets. The domain of that service is probably whitelisted in Content Security Policy and can be used to host the necessary files.

In that case, the only thing you can do is to build the reveal-parser-worker from sources with correct `publicPath`.

Let's say your static server has that URL `https://static.server/` and you can upload the files
at some folder, e.g. `parser-worker` folder. So files should be available at `https://static.server/parser-worker/`

Then all you need to do is:

1. Clone or download [@cognite/reveal](https://github.com/cognitedata/reveal).
2. `cd ./reveal/parser-worker`
3. Consult `parser-worker/README.md` and install the necessary build tools
4. You will need to set `PUBLIC_PATH` env variable that points at your static server.
Run the build with that env variable. You will see the `publicPath` printed to console during the build.

<Tabs
  groupId="operating-systems"
  defaultValue="bash"
  values={[
    {label: 'Bash', value: 'bash'},
    {label: 'Windows', value: 'win'},
  ]
}>
<TabItem value="bash">

```bash
PUBLIC_PATH="https://static.server/parser-worker/" yarn build:prod
```
</TabItem>
<TabItem value="win">

```bash
set PUBLIC_PATH="https://static.server/parser-worker/" && yarn build:prod
```
</TabItem>
</Tabs>

If you set the environment variable correctly, you should see it printed to console during the build:

```log
>  <webpack-log>: Worker local build config:
>  <webpack-log>:  { publicPath: 'https://static.server/parser-worker/' }
```

5. Take the files from `./parser-worker/dist/local` and host them on your CDN at the path you specified  `https://static.server/parser-worker/`.

6. In your project, specify `revealEnv.publicPath`

```js
import { revealEnv, Cognite3DViewer } from '@cognite/reveal';
revealEnv.publicPath = `https://static.server/parser-worker/`;

// ... then use reveal normally ...
const viewer = new Cognite3DViewer(/*...*/)
```

Everything should work fine now.

### A note on Content-type header for .wasm files

:::tip important
Make sure your server sends `*.wasm` files with `Content-type: application/wasm` header.
:::

Sometimes servers don't have correct MIME type set for wasm files.
In that case you might notice this message in a browser console when it fetches a `.wasm` file:

> Uncaught (in promise) TypeError: Failed to execute 'compile' on 'WebAssembly': Incorrect response MIME type. Expected 'application/wasm'.

In that case you'll need to configure your server to set the `Content-type: application/wasm` header for `*.wasm` files.
If you use the nginx add [types](https://nginx.org/en/docs/http/ngx_http_core_module.html#types) in the config
or edit the [mime.types file](https://www.nginx.com/resources/wiki/start/topics/examples/full/#mime-types).

```types title="/mime.types"
types {
    application/wasm wasm;
}
```


<!-- SOURCE_END: reveal/documentation\versioned_docs\version-3.x\installation.mdx -->

================================================================================


<!-- SOURCE_START: reveal/documentation\versioned_docs\version-3.x\migration-guide.md -->
## File: reveal/documentation\versioned_docs\version-3.x\migration-guide.md

---
id: migration-guide
title: Migrating from previous versions
hide_title: true
description: This page describes the differences between Reveal 1 and 2. It also walks through how to migrate from the previous Cognite 3D viewer (@cognite/3d-viewer).
---

import { DemoWrapper } from '@site/docs/components/DemoWrapper';

This article describes how to migrate between different major versions of Reveal and from the old `@cognite/3d-viewer` package.

1. [Migrating from Reveal 1.x](#migrating-from-reveal-1x)
1. [Migrating from @cognite/3d-viewer](#migrating-from-cognite3dviewer)

## Migrating from Reveal 1.x

There are some important differences between version 1 and version 2 of `@cognite/reveal` which might require changes in the build configuration and code. The most important changes are:

- The node styling/filtering API has been reworked and will require changes. See below for more information.
- [ThreeJS](https://www.npmjs.com/package/three) and [@types/three](https://www.npmjs.com/package/@types/three) is included in the package, so it's no longer necessary to include this in the application you are using Reveal from if you are not using ThreeJS directly.
- `Cognite3DViewer.getIntersectionFromPixel` is now async.

### Migrating to the new node styling API

Before reading this chapter it's recommended to read through [the introduction to the new styling and filtering API](examples/cad-styling).

In the 2.0 of release of Reveal, the filtering and styling API changed drastically - breaking existing
functionality. Migrating to version 2 will most likely require code changes, but these should often
be quite limited and lead to a simplification of the code base along with an increase in filtering- and
styling performance.

In previous versions of Reveal, styling was done by a set of functions for explicitly applying
styling to a node identified by a tree index (and optionally all its children).
- Visibility - `hideNodeByTreeIndex()`, `showNodeByTreeIndex()`, `hideAllNodes()` and `showAllNodes()`
- Color override - `setNodeColorByTreeIndex()`, `setAllNodeColors()`, `resetNodeColorByTreeIndex()` and `resetAllNodeColors()`
- Ghost nodes - `ghostNodeByTreeIndex()`, `unghostNodeByTreeIndex()`, `ghostAllNodes()` and `unghostAllNodes()`
- Highlighting - `selectNodeByTreeIndex()`, `deselectNodeByTreeIndex()` and `deselectAllNodes()`

This allowed flexible styling of nodes, but required many individual calls to update each node, causing degraded
performance. The new API instead requires a set of styles which nodes are assigned to. It is preferable not to have
too many styles - both in terms of performance and to avoid a cluttered view for the end user.

The previous styling options maps quite directly to the new API. Visibility is controlled by `NodeAppearance.visible`,
color override by `NodeAppearance.color` and ghost mode by `NodeAppearance.renderGhosted`. However, there is no
direct mapping between what was previously called 'selection' or 'highlighting', this is now a combination of
`NodeAppearance.color`, `NodeAppearance.renderInFront` and `NodeAppearance.outlineColor`. This means that the new API
introduces additional flexibility - e.g. an object can have an outline, but not be rendered in front of other objects. For
convenience, the new API comes with a set of default styles available through [`DefaultNodeAppearance`](examples/cad-styling).

A commonly used functionality is to apply a default style to all nodes and to style a few selected nodes with a different
style to make them stand out. Before, this could be achieved using a `ghostAllNodes`, `hideAllNodes` and `setAllNodeColors` to
apply the default styling, and a combination of the different per-node styling functions mentioned above to style the
nodes that should stand out. In Reveal 2, this is replaced by `Cognite3DModel.setDefaultNodeAppearance` which is a style that will be applied to any node that is not styled by another styled set.

### Using TreeIndexNodeCollection to migrate existing filtering logic

<DemoWrapper />

In general, it is recommended to use the [specialized `NodeCollection`-implementations](examples/cad-styling) for best performance. However,
it is possible to use `TreeIndexNodeCollection` as a migration step and simple use cases. This allows the use of previously implemented logic for
populating the set based on some application specific logic.

As an example, consider an application that has some logic for only showing objects that are part of the 'EA'-function. In previous versions
this could be achieved by doing:

```js
model.hideAllNodes();
sdk.revisions3D.list3DNodes(model.modelId, model.revisionId,
  {
    limit: 1000,
    properties: { PDMS: { Function: 'EA' } }
  })
  .autoPagingEach(node => {
    for (let i = 0; i < node.subtreeSize; i++) {
      model.showNodeByTreeIndex(node.treeIndex + i);
    }
  });
```

Now, the same can be implemented using:

```js runnable
// import { TreeIndexNodeCollection, IndexSet } from '@cognite/reveal';

const visibleSet = new IndexSet();
const visibleNodes = new TreeIndexNodeCollection(visibleSet);
model.setDefaultNodeAppearance(DefaultNodeAppearance.Hidden);
model.assignStyledNodeCollection(visibleNodes, DefaultNodeAppearance.Default);

// Populate set
sdk.revisions3D.list3DNodes(model.modelId, model.revisionId,
  {
    limit: 1000,
    properties: { PDMS: { Function: 'EA' } }
  })
  .autoPagingEach(node => {
    visibleSet.addRange(new NumericRange(node.treeIndex, node.subtreeSize));
  })
  .then(() => {
    // Note! We only trigger update to have effect on the rendered viewer after
    // _all_ nodes have been retrieved. A better approach might be to trigger
    // an update after each batch of nodes have been fetch from the SDK.
    // However, avoid calling updateSet() too often as it can take some time
    // to complete.
    visibleNodes.updateSet(visibleSet);
  });
```

Note that the styling is set up before any nodes actually are fetched and that the
set is populated asynchronously.

:::note
This example could easily have been migrated using `TreeIndexNodeCollection`, but in
other cases this might not be as straight forward as shown.
:::

#### A note on `applyToAllChildren` to style all descendants of a node

In previous versions, all styling functions accepted an optional `applyToAllChildren`-argument.
When this was `true`, Reveal would apply the styling to all descendants. When migrating
to the new version, adding the root tree index of the subtree to `TreeIndexNodeCollection` will not have
the same result. When you also have a `subtreeSize` available, use `TreeIndexNodeCollection.addRange` with
`new NumericRange(treeIndex, subtreeSize)` to add the full subtree. If you don't know the
`subtreeSize`, `Cognite3DModel.getSubtreeIndices()` can be used to get the full range of tree indices.

```js
// In Reveal 1.x:
// model.hideNodeByTreeIndex(subtreeRootTreeIndex, true);

//  Wrong - will only affect a single tree index, not all descendants
const indexSet = new IndexSet();
indexSet.add(subtreeRootIndex);
const nodes = new TreeIndexNodeCollection(indexSet);
model.assignStyledNodeCollection(nodes, { visible: false });

//  Correct - all descendants are affected
const indexSet = new IndexSet();
indexSet.addRange(await model.getSubtreeIndices(subtreeRootIndex));
const nodes = new TreeIndexNodeCollection(indexSet);
model.assignStyledNodeCollection(nodes, { visible: false });
```

## Migrating from [@cognite/3dviewer](https://www.npmjs.com/package/@cognite/3d-viewer)

:::warning
This section describes how to migrate from `@cognite/3d-viewer` to Reveal version 1. It doesn't take into account changes
between Reveal versions 1 and 2.
:::


`@cognite/3d-viewer` is an older version of Reveal that has similar functionality to this package. However, some important differences caused us to switch the package name to `@cognite/reveal`.

- `@cognite/3d-viewer` downloads all geometry when a model is loaded. This causes higher initial loading time, but potentially increases the performance once the data has been loaded. It also limits the size of the models that can be loaded. The new version, `@cognite/reveal`, is based on "streaming geometry" which downloads necessary geometry within a budget as the camera moved. This enables support for very complex 3D models and reduces the initial loading time.
- `@cognite/3d-viewer` supports styling 3D nodes by node ID. In `@cognite/reveal` the recommended approach is to use tree indices instead. See [Styling nodes](#styling-nodes) for more information. For an introduction to the differences between these concepts, see [Concepts](./concepts.md). The new component supports [mapping between the two identifiers](#accessing-node-information-and-mapping-between-node-ids-and-tree-indices) when necessary.
- `@cognite/3d-viewer` supports photogrammetry models through textures while `@cognite/reveal` supports photogrammetry through point clouds. This is due to the heavy processing load textures places on processing.
- `@cognite/reveal` supports styling a 3D node and all it's children in one operation. In `@cognite/3d-viewer` it's necessary to iterate over all children and manually apply the same change to all nodes.
- `@cognite/reveal` supports point cloud models. This is not supported in `@cognite/3d-viewer`.
- `@cognite/reveal` requires new output file formats. See [Preparing models](#preparing-models-for-use) below for details.

### API changes

The APIs are very similar and the functionality provided in `@cognite/reveal` should feel familiar. There are several operations supported in `@cognite/3d-viewer` which isn't supported by `@cognite/reveal`, but these have been replaced by alternatives that should provide similar functionality.

### Styling nodes

In `@cognite/3d-viewer`, there are several functions for manipulating the styling of 3D nodes. These functions identify nodes by their node IDs. In `@cognite/reveal` similar functions exist, but these identify the nodes by their tree indices. It's therefor necessary to migrate to the new functions.

#### Coloring nodes

- `Cognite3DModel.setNodeColor(nodeId, r, g, b)` has been replaced by `setNodeColorByTreeIndex(treeIndex, r, g, b, applyToChildren?)`
- `Cognite3DModel.resetNodeColor(nodeId)` has been replaced by `resetNodeColorByTreeIndex(treeIndex, applyToChildren?)`
- `Cognite3DModel.getNodeColor(nodeId)` is no longer supported
- `Cognite3DModel.resetAllNodeColors()` has been added to the API

The new functions identify nodes by tree index rather than node ID. It also supports applying the same color to all children of the identified node. Note that the functions identifying nodes by node ID will work, but will be slower and use is not recommended.

#### Selecting/highlighting nodes

- `Cognite3DModel.selectNode(nodeId)` has been replaced by `selectNodeByTreeIndex(treeIndex, applyToChildren?)`
- `Cognite3DModel.deselectNode(nodeId)` has been replaced by `deselectNodeByTreeIndex(treeIndex, applyToChildren?)`
- `Cognite3DModel.deselectAllNodes()` works equally in both components

The new functions identify nodes by tree index rather than node ID. It also supports selecting/highlighting all children of the identified node. Note that the functions identifying nodes by node ID will work, but will be slower and use is not recommended.

#### Controlling node visibility

- `Cognite3DModel.showNode(nodeId)` has been replaced by `showNodeByTreeIndex(treeIndex, applyToChildren?)`
- `Cognite3DModel.hideNode(nodeId)` has been replaced by `hideNodeByTreeIndex(treeIndex, applyToChildren?)`
- `Cognite3DModel.showAllNodes()` works equally in both components
- `Cognite3DModel.hideAllNodes(makeGray?)` doesn't support setting `makeGray` any longer

The new functions identify nodes by tree index rather than node ID. It also supports showing/hiding all children of the identified node. Note that the functions identifying nodes by node ID will work, but will be slower and use is not recommended.

### Node visitor functions

Reveal has functions for iterating over nodes, either all nodes in a 3D model or a subtree of a parent node.
Notice that all functions are async, and the action that you pass is not applied immediately.
A single model can have millions of nodes. That's why the iteration functions call the passed action step by step.
You can see it in action in our [node visiting example](./examples/node-visiting.mdx) where colors are applied gradually to nodes.

- `Cognite3DModel.iterateNodes(action: (nodeId, treeIndex) => void): Promise<boolean>` has been replaced by `iterateNodesByTreeIndex(action: (treeIndex) => void): Promise<void>`. Returns promise which resolves once iteration has done.
- `Cognite3DModel.iterateSubtree(nodeId, action: (nodeId, treeIndex) => void, treeIndex?, subtreeSize?)` has been replaced by `iterateSubtreeByTreeIndex(treeIndex, action: (treeIndex) => void): Promise<number>`. Returns promise which resolves once iteration has done.

### Accessing node information and mapping between node IDs and tree indices

Reveal supports accessing information about 3D nodes through the [Cognite SDK](https://cognitedata.github.io/cognite-sdk-js/classes/revisions3dapi.html). However, the SDK identifies nodes by node ID, not tree index. It might be necessary to map between the two concepts. The following functions provide such functionality:

- `async Cognite3DModel.mapNodeIdToTreeIndex(nodeId)`
- `async Cognite3DModel.mapNodeIdsToTreeIndices(nodeIds)`
- `async Cognite3DModel.mapTreeIndexToNodeId(treeIndex)`
- `async Cognite3DModel.mapTreeIndicesToNodeIds(treeIndices)`

Note that the operation requires communication with CDF servers and should be kept at a minimum. It's recommended to use the functions that accepts a list of nodes to map whenever possible. Batching requests is recommended to achieve the best performance.

Access to node information such as name, bounding box and properties/attributes is done through the [3D revision API](https://cognitedata.github.io/cognite-sdk-js/classes/revisions3dapi.html), specifically:

- [`list3DNodes`](https://cognitedata.github.io/cognite-sdk-js/classes/revisions3dapi.html#list3dnodes) for retrieving a set of nodes using a filter
- [`list3DNodeAncestors`](https://cognitedata.github.io/cognite-sdk-js/classes/revisions3dapi.html#list3dnodeancestors) for retrieving ancestors of a specific node
- [`retrieve3DNodes`](https://cognitedata.github.io/cognite-sdk-js/classes/revisions3dapi.html#retrieve3dnodes) for retrieving a set of nodes identified by their node ids

The API for accessing node information has not changed `@cognite/3d-viewer`, but since Reveal now uses tree indices explicit mapping tree index to node ID is necessary.

### Working with asset mappings

[3D Asset Mappings](https://docs.cognite.com/api/v1/#tag/3D-Asset-Mapping) enables mapping 3D nodes to [assets](https://docs.cognite.com/api/v1/#tag/Assets). A mapping is a link from `assetId` to `nodeId`, so to use these with Reveal it's necessary to [map these to tree indices](#accessing-node-information-and-mapping-between-node-ids-and-tree-indices).

### Ray picking and intersection for handling click events

In `@cognite/3d-viewer` `Cognite3dViewer.getIntersectionFromPixel` optionally accepts a `model`-argument to restrict the result to a single model. Support for this has been removed
in `@cognite/reveal`. Previously `getIntersectionFromPixel` would return a struct with both `nodeId` and `treeIndex`. Now this has been changed to only include `treeIndex` (to
determine `nodeId` use `async Cognite3DModel.mapTreeIndexToNodeId(treeIndex)`).

### Other differences

There are a few other noticeable changes from `@cognite/3d-viewer` and `@cognite/reveal`:

- `@cognite/3d-viewer` supports local caching to reduce the time to load previously opened 3D models. Currently, this is not supported by `@cognite/reveal`, but the need for such functionality is reduced by adding streaming capabilities.
- In `@cognite/3d-viewer` `Cognite3DViewer.addModel(...)` will always return a `Cognite3DModel`. In `@cognite/reveal` this function might also return a `CognitePointCloudModel`. To explicitly add a CAD model or point cloud model use `Cognite3DViewer.addCadModel(...)` or `Cognite3DViewer.addPointCloudModel(...)`
- `Cognite3DViewer.loadCameraFromModel(...)`] has been added for loading camera settings from CDF when available.
- Due to the way `@cognite/reveal` streams data, the `OnProgressData` is no longer exported, and the `addModel` function
  no longer accepts an `onProgress` parameter. Because of this the `onComplete` option in `Cognite3DViewer.addModel` has
  been deprecated. To monitor loading activity, use the `onLoading`-callback provided as an option when constructing `Cognite3DViewer`.
- `Cognite3DViewer.getCamera()` can now be used to access the `THREE.Camera` of the viewer. Note that this camera shouldn't be
  modified.
- `Cognite3DViewer.addModel` no longer supports options `localPath`, `orthographicCamera` and `onComplete`. Point clouds currently
  don't support `geometryFilter`.
- Textures are not supported by `@cognite/reveal`. Models can be loaded, but textures are not applied to the geometry.
- `@cognite/reveal` supports several [anti-alias techniques](https://en.wikipedia.org/wiki/Spatial_anti-aliasing) which might improve visual quality at some performance cost. To use these new modes, see the `antiAliasingHint`-option provided in the `Cognite3dViewer`-constructor.

### Preparing models

`@cognite/reveal` requires new output file formats which means that 3D models that have been converted before June 2020 might need reconversion. To determine if a model needs reconversion, the [listModelRevisionOutputs API endpoint](https://docs.cognite.com/api/v1/#operation/list3dModelOutputs) can be used with URL parameter `format=reveal-directory`. This can be done using the SDK, e.g.:

```jsx
// Switch these with your project/model identifier
const project = 'publicdata';
const modelId = 4715379429968321;
const revisionId = 5688854005909501;

// Prepare a SDK client and authenticate
const sdk = new CogniteClient({
  appId: 'cognite.reveal.docs.IsModelCompatible',
});
await sdk.loginWithOAuth({ type: 'CDF_OAUTH', options: { project }}); // With Cognite authentication flow
await sdk.authenticate();

// Request a list of formats
const url = `https://api.cognitedata.com/api/v1/projects/${project}/3d/models/${modelId}/revisions/${revisionId}/outputs`;
const response = await sdk.get(url, { params: { format: 'reveal-directory' } });

// Determine if there's compatible outputs
const hasCompatibleOutputs = response.data.items.length > 0;
alert(`Is model compatible with @cognite/reveal: ${hasCompatibleOutputs}`);
```

Or by using `curl` (requires a [Cognite API key or access token](https://docs.cognite.com/dev/guides/iam/authentication.html#api-keys)):

```bash
> curl "https://api.cognitedata.com/api/v1/projects/$PROJECT/3d/models/$MODELID/revisions/$REVISIONID/outputs?format=reveal-directory" --header 'api-key: $APIKEY'

{
  "items": [
    {
      "format": "reveal-directory",
      "version": 8,
      "blobId": 42723775736403107
    }
  ]
}
```

where `PROJECT`, `MODELID`, `REVISIONID` and `APIKEY` must be set in the environment variables. If the model isn't compatible the response will be an empty list, i.e.

```bash
{
  "items": []
}
```

If the model isn't compatible with `@cognite/reveal`, it must be reprocessed. This can be done by [uploading a new revision in Cognite Data Fusion](https://docs.cognite.com/cdf/3d/guides/3dmodels_upload.html). When uploading a new revision, asset mappings must be recreated. If the node hierarchy in the new revision is identical to the previous model node IDs should be identical and the asset mappings can be copied from one revision to the other by using the [get3DMappings](https://docs.cognite.com/api/v1/#operation/get3DMappings) and [create3DMappings](https://docs.cognite.com/api/v1/#operation/create3DMappings) API endpoints.

Another alternative is to use the experimental 'reprocess' endpoint which generates new model outputs for a 3D model and is less intrusive than uploading a new revision. Since this endpoint is experimental it's not publicly exposed in the API yet. Please contact [lars.moastuen@cognite.com](mailto:lars.moastuen@cognite.com) if you want to explore this option.

### Common issues

**`TypeError: e.applyMatrix4 is not a function`**

If you experience `TypeError: e.applyMatrix4 is not a function` after migrating from
`@cognite/3d-viewer` to `@cognite/reveal`, the problem is usually caused by missing or
outdated ThreeJS.

To fix this issue, install or update ThreeJS using the
[`three`-package](https://www.npmjs.com/package/three). This should match the version
used by `@cognite/reveal`.


<!-- SOURCE_END: reveal/documentation\versioned_docs\version-3.x\migration-guide.md -->

================================================================================


<!-- SOURCE_START: reveal/documentation\versioned_docs\version-3.x\overview.mdx -->
## File: reveal/documentation\versioned_docs\version-3.x\overview.mdx

---
id: overview
slug: /
title: Overview
description: Reveal is a JavaScript library for visualizing big 3D models on the web. It supports complex CAD models and large point clouds.
---

import useBaseUrl from '@docusaurus/useBaseUrl';

Reveal is a JavaScript library for visualizing big 3D models on the web.
It supports complex CAD models and large point clouds.
The library supports 3D model hosted by [Cognite Data Fusion (CDF)](https://docs.cognite.com/cdf/) which supports [ingestion of a variety of 3D formats](https://docs.cognite.com/cdf/3d/). If you do not have access you can use models provided through the [Open Industrial Data project](https://openindustrialdata.com/) for testing.

If you have previously used the previous version of Reveal,
[`@cognite/3d-viewer`](https://www.npmjs.com/package/@cognite/3d-viewer),
and want to migrate to this package, please see the [Migration guide](./migration-guide.md).
For details about the installation procedure and how to use Reveal in certain environments,
see the [Installation guide](./installation.mdx).

## CAD models

CAD (Computer-Aided Design) models are technical design 3D models. For the big asset industry these are typically very complex and can often consist of several million individual objects. To enable interactive visualization of such models [Cognite Data Fusion (CDF)](https://docs.cognite.com/cdf/) processes these models to optimize the geometry and the structure, enabling Reveal to visualize them on the web.

CAD models typically contain attributes/properties associated with each 3D object (also called node). These attributes can provide valuable metadata, such as extent, function, what system the object is part of and it's operation specifications. CDF and Reveal provide functionality for queries based on the attributes to perform filtering, styling and to collect information.

<img src={useBaseUrl('/img/cad-model.png')} alt="A grayscale CAD model" />

## Point cloud models

Point cloud models are 3D models generated from techniques such as 3D scanning or photogrammetry. [Cognite Data Fusion (CDF)](https://docs.cognite.com/cdf/) processes point clouds and stores them in a format suitable for visualization.

<img src={useBaseUrl('/img/pointcloud-model.png')} alt="Point cloud model" />

## Technology

Behind the scenes Reveal based on [WebGL](https://developer.mozilla.org/en-US/docs/Web/API/**WebGL_API**) through [ThreeJS](https://threejs.org/) and uses [potree-core](https://github.com/tentone/potree-core) for point cloud visualization. The library is written in [TypeScript](https://www.typescriptlang.org/) and uses [WebAssembly](https://webassembly.org/) modules written in [Rust](https://www.rust-lang.org/) to do much of the heavy-lifting.

Reveal is available on [Github](https://github.com/cognitedata/reveal). If you find issues, have a feature suggestion or a question, please register a ticket in our [issue tracker](https://github.com/cognitedata/reveal/issues).


<!-- SOURCE_END: reveal/documentation\versioned_docs\version-3.x\overview.mdx -->

================================================================================


<!-- SOURCE_START: reveal/documentation\versioned_docs\version-4.x\api\@cognite\reveal\classes\AnnotationIdPointCloudObjectCollection.md -->
## File: reveal/documentation\versioned_docs\version-4.x\api\@cognite\reveal\classes\AnnotationIdPointCloudObjectCollection.md

# Class: AnnotationIdPointCloudObjectCollection

A simple PointCloudObjectCollection that consists of an explicitly provided list of annotation IDs

## Extends

- [`PointCloudObjectCollection`](PointCloudObjectCollection.md)

## Constructors

### new AnnotationIdPointCloudObjectCollection()

> **new AnnotationIdPointCloudObjectCollection**(`ids`): [`AnnotationIdPointCloudObjectCollection`](AnnotationIdPointCloudObjectCollection.md)

#### Parameters

 **ids**: `Iterable`\<`number`\>

#### Returns

[`AnnotationIdPointCloudObjectCollection`](AnnotationIdPointCloudObjectCollection.md)

#### Overrides

[`PointCloudObjectCollection`](PointCloudObjectCollection.md) . [`constructor`](PointCloudObjectCollection.md#constructors)

#### Defined in

[packages/pointcloud-styling/src/AnnotationIdPointCloudObjectCollection.ts:13](https://github.com/cognitedata/reveal/blob/2acd9d17229d2bc8e309653b4d6a39ad941e44f1/viewer/packages/pointcloud-styling/src/AnnotationIdPointCloudObjectCollection.ts#L13)

## Accessors

### isLoading

> `get` **isLoading**(): `false`

#### Returns

`false`

whether the collection is still loading data in the background i.e. not yet ready for use

#### Overrides

[`PointCloudObjectCollection`](PointCloudObjectCollection.md) . [`isLoading`](PointCloudObjectCollection.md#isloading)

#### Defined in

[packages/pointcloud-styling/src/AnnotationIdPointCloudObjectCollection.ts:22](https://github.com/cognitedata/reveal/blob/2acd9d17229d2bc8e309653b4d6a39ad941e44f1/viewer/packages/pointcloud-styling/src/AnnotationIdPointCloudObjectCollection.ts#L22)

## Methods

### getAnnotationIds()

> **getAnnotationIds**(): `Iterable`\<`number`\>

#### Returns

`Iterable`\<`number`\>

annotation IDs of the annotations for the objects represented by this PointCloudObjectCollection instance

#### Overrides

[`PointCloudObjectCollection`](PointCloudObjectCollection.md) . [`getAnnotationIds`](PointCloudObjectCollection.md#getannotationids)

#### Defined in

[packages/pointcloud-styling/src/AnnotationIdPointCloudObjectCollection.ts:18](https://github.com/cognitedata/reveal/blob/2acd9d17229d2bc8e309653b4d6a39ad941e44f1/viewer/packages/pointcloud-styling/src/AnnotationIdPointCloudObjectCollection.ts#L18)

***

### off()

> **off**(`event`, `listener`): `void`

#### Parameters

 **event**: `"changed"`

 **listener**

#### Returns

`void`

#### Inherited from

[`PointCloudObjectCollection`](PointCloudObjectCollection.md) . [`off`](PointCloudObjectCollection.md#off)

#### Defined in

[packages/pointcloud-styling/src/PointCloudObjectCollection.ts:30](https://github.com/cognitedata/reveal/blob/2acd9d17229d2bc8e309653b4d6a39ad941e44f1/viewer/packages/pointcloud-styling/src/PointCloudObjectCollection.ts#L30)

***

### on()

> **on**(`event`, `listener`): `void`

#### Parameters

 **event**: `"changed"`

 **listener**

#### Returns

`void`

#### Inherited from

[`PointCloudObjectCollection`](PointCloudObjectCollection.md) . [`on`](PointCloudObjectCollection.md#on)

#### Defined in

[packages/pointcloud-styling/src/PointCloudObjectCollection.ts:25](https://github.com/cognitedata/reveal/blob/2acd9d17229d2bc8e309653b4d6a39ad941e44f1/viewer/packages/pointcloud-styling/src/PointCloudObjectCollection.ts#L25)


<!-- SOURCE_END: reveal/documentation\versioned_docs\version-4.x\api\@cognite\reveal\classes\AnnotationIdPointCloudObjectCollection.md -->

================================================================================


<!-- SOURCE_START: reveal/documentation\versioned_docs\version-4.x\api\@cognite\reveal\classes\AssetNodeCollection.md -->
## File: reveal/documentation\versioned_docs\version-4.x\api\@cognite\reveal\classes\AssetNodeCollection.md

# Class: AssetNodeCollection

Represents a set of nodes associated with an [asset in Cognite Fusion][https://docs.cognite.com/api/v1/#tag/Assets](https://docs.cognite.com/api/v1/#tag/Assets)
linked to the 3D model using [asset mappings][https://docs.cognite.com/api/v1/#tag/3D-Asset-Mapping](https://docs.cognite.com/api/v1/#tag/3D-Asset-Mapping). A node
is considered to be part of an asset if it has a direct asset mapping or if one of its ancestors has an asset mapping
to the asset.

## Extends

- [`NodeCollection`](NodeCollection.md)

## Constructors

### new AssetNodeCollection()

> **new AssetNodeCollection**(`client`, `modelMetadataProvider`): [`AssetNodeCollection`](AssetNodeCollection.md)

#### Parameters

 **client**: `CogniteClient`

 **modelMetadataProvider**: [`CdfModelNodeCollectionDataProvider`](../interfaces/CdfModelNodeCollectionDataProvider.md)

#### Returns

[`AssetNodeCollection`](AssetNodeCollection.md)

#### Overrides

`NodeCollection.constructor`

#### Defined in

[packages/cad-styling/src/AssetNodeCollection.ts:36](https://github.com/cognitedata/reveal/blob/2acd9d17229d2bc8e309653b4d6a39ad941e44f1/viewer/packages/cad-styling/src/AssetNodeCollection.ts#L36)

## Properties

### classToken

> `readonly` `static` **classToken**: `"AssetNodeCollection"` = `'AssetNodeCollection'`

#### Defined in

[packages/cad-styling/src/AssetNodeCollection.ts:27](https://github.com/cognitedata/reveal/blob/2acd9d17229d2bc8e309653b4d6a39ad941e44f1/viewer/packages/cad-styling/src/AssetNodeCollection.ts#L27)

## Accessors

### classToken

> `get` **classToken**(): `string`

#### Returns

`string`

#### Inherited from

[`NodeCollection`](NodeCollection.md) . [`classToken`](NodeCollection.md#classtoken)

#### Defined in

[packages/cad-styling/src/NodeCollection.ts:23](https://github.com/cognitedata/reveal/blob/2acd9d17229d2bc8e309653b4d6a39ad941e44f1/viewer/packages/cad-styling/src/NodeCollection.ts#L23)

***

### isLoading

> `get` **isLoading**(): `boolean`

#### Returns

`boolean`

#### Overrides

[`NodeCollection`](NodeCollection.md) . [`isLoading`](NodeCollection.md#isloading)

#### Defined in

[packages/cad-styling/src/AssetNodeCollection.ts:43](https://github.com/cognitedata/reveal/blob/2acd9d17229d2bc8e309653b4d6a39ad941e44f1/viewer/packages/cad-styling/src/AssetNodeCollection.ts#L43)

## Methods

### clear()

> **clear**(): `void`

#### Returns

`void`

#### Overrides

[`NodeCollection`](NodeCollection.md) . [`clear`](NodeCollection.md#clear)

#### Defined in

[packages/cad-styling/src/AssetNodeCollection.ts:139](https://github.com/cognitedata/reveal/blob/2acd9d17229d2bc8e309653b4d6a39ad941e44f1/viewer/packages/cad-styling/src/AssetNodeCollection.ts#L139)

***

### executeFilter()

> **executeFilter**(`filter`): `Promise`\<`void`\>

Updates the node collection to hold nodes associated with the asset given, or
assets within the bounding box or all assets associated with the 3D model.

#### Parameters

 **filter**

 **filter.assetId?**: `number`

ID of a single [asset][https://docs.cognite.com/dev/concepts/resource_types/assets.html](https://docs.cognite.com/dev/concepts/resource_types/assets.html) (optional)

 **filter.boundingBox?**: `Box3`

When provided, only assets within the provided bounds will be included in the filter.

#### Returns

`Promise`\<`void`\>

#### Defined in

[packages/cad-styling/src/AssetNodeCollection.ts:54](https://github.com/cognitedata/reveal/blob/2acd9d17229d2bc8e309653b4d6a39ad941e44f1/viewer/packages/cad-styling/src/AssetNodeCollection.ts#L54)

***

### getAreas()

> **getAreas**(): [`AreaCollection`](../interfaces/AreaCollection.md)

Returns areas surrounding the nodes in the collection. The areas
are boxes in "ThreeJS coordinates". Note that not all
implementations supports this.

#### Returns

[`AreaCollection`](../interfaces/AreaCollection.md)

#### Overrides

[`NodeCollection`](NodeCollection.md) . [`getAreas`](NodeCollection.md#getareas)

#### Defined in

[packages/cad-styling/src/AssetNodeCollection.ts:151](https://github.com/cognitedata/reveal/blob/2acd9d17229d2bc8e309653b4d6a39ad941e44f1/viewer/packages/cad-styling/src/AssetNodeCollection.ts#L151)

***

### getFilter()

> **getFilter**(): `undefined` \| `object`

#### Returns

`undefined` \| `object`

#### Defined in

[packages/cad-styling/src/AssetNodeCollection.ts:135](https://github.com/cognitedata/reveal/blob/2acd9d17229d2bc8e309653b4d6a39ad941e44f1/viewer/packages/cad-styling/src/AssetNodeCollection.ts#L135)

***

### getIndexSet()

> **getIndexSet**(): [`IndexSet`](IndexSet.md)

#### Returns

[`IndexSet`](IndexSet.md)

#### Overrides

[`NodeCollection`](NodeCollection.md) . [`getIndexSet`](NodeCollection.md#getindexset)

#### Defined in

[packages/cad-styling/src/AssetNodeCollection.ts:147](https://github.com/cognitedata/reveal/blob/2acd9d17229d2bc8e309653b4d6a39ad941e44f1/viewer/packages/cad-styling/src/AssetNodeCollection.ts#L147)

***

### off()

> **off**(`event`, `listener`): `void`

#### Parameters

 **event**: `"changed"`

 **listener**

#### Returns

`void`

#### Inherited from

[`NodeCollection`](NodeCollection.md) . [`off`](NodeCollection.md#off)

#### Defined in

[packages/cad-styling/src/NodeCollection.ts:32](https://github.com/cognitedata/reveal/blob/2acd9d17229d2bc8e309653b4d6a39ad941e44f1/viewer/packages/cad-styling/src/NodeCollection.ts#L32)

***

### on()

> **on**(`event`, `listener`): `void`

#### Parameters

 **event**: `"changed"`

 **listener**

#### Returns

`void`

#### Inherited from

[`NodeCollection`](NodeCollection.md) . [`on`](NodeCollection.md#on)

#### Defined in

[packages/cad-styling/src/NodeCollection.ts:27](https://github.com/cognitedata/reveal/blob/2acd9d17229d2bc8e309653b4d6a39ad941e44f1/viewer/packages/cad-styling/src/NodeCollection.ts#L27)

***

### serialize()

> **serialize**(): [`SerializedNodeCollection`](../type-aliases/SerializedNodeCollection.md)

#### Returns

[`SerializedNodeCollection`](../type-aliases/SerializedNodeCollection.md)

#### Overrides

[`NodeCollection`](NodeCollection.md) . [`serialize`](NodeCollection.md#serialize)

#### Defined in

[packages/cad-styling/src/AssetNodeCollection.ts:155](https://github.com/cognitedata/reveal/blob/2acd9d17229d2bc8e309653b4d6a39ad941e44f1/viewer/packages/cad-styling/src/AssetNodeCollection.ts#L155)


<!-- SOURCE_END: reveal/documentation\versioned_docs\version-4.x\api\@cognite\reveal\classes\AssetNodeCollection.md -->

================================================================================


<!-- SOURCE_START: reveal/documentation\versioned_docs\version-4.x\api\@cognite\reveal\classes\BoundingBoxClipper.md -->
## File: reveal/documentation\versioned_docs\version-4.x\api\@cognite\reveal\classes\BoundingBoxClipper.md

# Class: BoundingBoxClipper

## Constructors

### new BoundingBoxClipper()

> **new BoundingBoxClipper**(`box`?): [`BoundingBoxClipper`](BoundingBoxClipper.md)

#### Parameters

 **box?**: `Box3`

#### Returns

[`BoundingBoxClipper`](BoundingBoxClipper.md)

#### Defined in

[packages/cad-model/src/utilities/BoundingBoxClipper.ts:18](https://github.com/cognitedata/reveal/blob/2acd9d17229d2bc8e309653b4d6a39ad941e44f1/viewer/packages/cad-model/src/utilities/BoundingBoxClipper.ts#L18)

## Accessors

### clippingPlanes

> `get` **clippingPlanes**(): `Plane`[]

#### Returns

`Plane`[]

#### Defined in

[packages/cad-model/src/utilities/BoundingBoxClipper.ts:104](https://github.com/cognitedata/reveal/blob/2acd9d17229d2bc8e309653b4d6a39ad941e44f1/viewer/packages/cad-model/src/utilities/BoundingBoxClipper.ts#L104)

***

### maxX

> `get` **maxX**(): `number`

> `set` **maxX**(`x`): `void`

#### Parameters

 **x**: `number`

#### Returns

`number`

#### Defined in

[packages/cad-model/src/utilities/BoundingBoxClipper.ts:55](https://github.com/cognitedata/reveal/blob/2acd9d17229d2bc8e309653b4d6a39ad941e44f1/viewer/packages/cad-model/src/utilities/BoundingBoxClipper.ts#L55)

***

### maxY

> `get` **maxY**(): `number`

> `set` **maxY**(`y`): `void`

#### Parameters

 **y**: `number`

#### Returns

`number`

#### Defined in

[packages/cad-model/src/utilities/BoundingBoxClipper.ts:64](https://github.com/cognitedata/reveal/blob/2acd9d17229d2bc8e309653b4d6a39ad941e44f1/viewer/packages/cad-model/src/utilities/BoundingBoxClipper.ts#L64)

***

### maxZ

> `get` **maxZ**(): `number`

> `set` **maxZ**(`z`): `void`

#### Parameters

 **z**: `number`

#### Returns

`number`

#### Defined in

[packages/cad-model/src/utilities/BoundingBoxClipper.ts:73](https://github.com/cognitedata/reveal/blob/2acd9d17229d2bc8e309653b4d6a39ad941e44f1/viewer/packages/cad-model/src/utilities/BoundingBoxClipper.ts#L73)

***

### minX

> `get` **minX**(): `number`

> `set` **minX**(`x`): `void`

#### Parameters

 **x**: `number`

#### Returns

`number`

#### Defined in

[packages/cad-model/src/utilities/BoundingBoxClipper.ts:28](https://github.com/cognitedata/reveal/blob/2acd9d17229d2bc8e309653b4d6a39ad941e44f1/viewer/packages/cad-model/src/utilities/BoundingBoxClipper.ts#L28)

***

### minY

> `get` **minY**(): `number`

> `set` **minY**(`y`): `void`

#### Parameters

 **y**: `number`

#### Returns

`number`

#### Defined in

[packages/cad-model/src/utilities/BoundingBoxClipper.ts:37](https://github.com/cognitedata/reveal/blob/2acd9d17229d2bc8e309653b4d6a39ad941e44f1/viewer/packages/cad-model/src/utilities/BoundingBoxClipper.ts#L37)

***

### minZ

> `get` **minZ**(): `number`

> `set` **minZ**(`z`): `void`

#### Parameters

 **z**: `number`

#### Returns

`number`

#### Defined in

[packages/cad-model/src/utilities/BoundingBoxClipper.ts:46](https://github.com/cognitedata/reveal/blob/2acd9d17229d2bc8e309653b4d6a39ad941e44f1/viewer/packages/cad-model/src/utilities/BoundingBoxClipper.ts#L46)


<!-- SOURCE_END: reveal/documentation\versioned_docs\version-4.x\api\@cognite\reveal\classes\BoundingBoxClipper.md -->

================================================================================


<!-- SOURCE_START: reveal/documentation\versioned_docs\version-4.x\api\@cognite\reveal\classes\CameraManagerHelper.md -->
## File: reveal/documentation\versioned_docs\version-4.x\api\@cognite\reveal\classes\CameraManagerHelper.md

# Class: CameraManagerHelper

Helper methods for implementing a camera manager.

## Constructors

### new CameraManagerHelper()

> **new CameraManagerHelper**(): [`CameraManagerHelper`](CameraManagerHelper.md)

#### Returns

[`CameraManagerHelper`](CameraManagerHelper.md)

## Methods

### calculateCameraStateToFitBoundingBox()

> `static` **calculateCameraStateToFitBoundingBox**(`camera`, `boundingBox`, `radiusFactor`): `object`

Calculates camera position and target that allows to see the content of provided bounding box.

#### Parameters

 **camera**: `PerspectiveCamera`

Used camera instance.

 **boundingBox**: `Box3`

Bounding box to be fitted.

 **radiusFactor**: `number` = `2`

The ratio of the distance from camera to center of box and radius of the box.

#### Returns

`object`

##### position

> **position**: `Vector3`

##### target

> **target**: `Vector3`

#### Defined in

[packages/camera-manager/src/CameraManagerHelper.ts:111](https://github.com/cognitedata/reveal/blob/2acd9d17229d2bc8e309653b4d6a39ad941e44f1/viewer/packages/camera-manager/src/CameraManagerHelper.ts#L111)

***

### calculateNewRotationFromTarget()

> `static` **calculateNewRotationFromTarget**(`camera`, `newTarget`): `Quaternion`

Calculates camera rotation from target

#### Parameters

 **camera**: `PerspectiveCamera`

Used Camera instance

 **newTarget**: `Vector3`

The target to compute rotation from

#### Returns

`Quaternion`

New camera rotationg

#### Defined in

[packages/camera-manager/src/CameraManagerHelper.ts:70](https://github.com/cognitedata/reveal/blob/2acd9d17229d2bc8e309653b4d6a39ad941e44f1/viewer/packages/camera-manager/src/CameraManagerHelper.ts#L70)

***

### calculateNewTargetFromRotation()

> `static` **calculateNewTargetFromRotation**(`camera`, `rotation`, `currentTarget`, `position`): `Vector3`

Calculates camera target based on new camera rotation.

#### Parameters

 **camera**: `PerspectiveCamera`

Used camera instance.

 **rotation**: `Quaternion`

New camera rotation in quaternion form.

 **currentTarget**: `Vector3`

Current camera target.

 **position**: `Vector3`

New camera position.

#### Returns

`Vector3`

#### Defined in

[packages/camera-manager/src/CameraManagerHelper.ts:43](https://github.com/cognitedata/reveal/blob/2acd9d17229d2bc8e309653b4d6a39ad941e44f1/viewer/packages/camera-manager/src/CameraManagerHelper.ts#L43)

***

### updateCameraNearAndFar()

> `static` **updateCameraNearAndFar**(`camera`, `boundingBox`): `void`

Updates near and far plane of the camera based on the bounding box.

#### Parameters

 **camera**: `PerspectiveCamera`

Used camera instance.

 **boundingBox**: `Box3`

Bounding box of all objects on the scene.

#### Returns

`void`

#### Defined in

[packages/camera-manager/src/CameraManagerHelper.ts:80](https://github.com/cognitedata/reveal/blob/2acd9d17229d2bc8e309653b4d6a39ad941e44f1/viewer/packages/camera-manager/src/CameraManagerHelper.ts#L80)


<!-- SOURCE_END: reveal/documentation\versioned_docs\version-4.x\api\@cognite\reveal\classes\CameraManagerHelper.md -->

================================================================================


<!-- SOURCE_START: reveal/documentation\versioned_docs\version-4.x\api\@cognite\reveal\classes\CdfNodeCollectionBase.md -->
## File: reveal/documentation\versioned_docs\version-4.x\api\@cognite\reveal\classes\CdfNodeCollectionBase.md

# Class: `abstract` CdfNodeCollectionBase

Abstract class for implementing a set of nodes to be styled.

## Extends

- [`NodeCollection`](NodeCollection.md)

## Extended by

- [`NodeIdNodeCollection`](NodeIdNodeCollection.md)
- [`PropertyFilterNodeCollection`](PropertyFilterNodeCollection.md)
- [`SinglePropertyFilterNodeCollection`](SinglePropertyFilterNodeCollection.md)

## Constructors

### new CdfNodeCollectionBase()

> **new CdfNodeCollectionBase**(`classToken`, `model`): [`CdfNodeCollectionBase`](CdfNodeCollectionBase.md)

#### Parameters

 **classToken**: `string`

 **model**: [`CdfModelNodeCollectionDataProvider`](../interfaces/CdfModelNodeCollectionDataProvider.md)

#### Returns

[`CdfNodeCollectionBase`](CdfNodeCollectionBase.md)

#### Overrides

`NodeCollection.constructor`

#### Defined in

[packages/cad-styling/src/CdfNodeCollectionBase.ts:20](https://github.com/cognitedata/reveal/blob/2acd9d17229d2bc8e309653b4d6a39ad941e44f1/viewer/packages/cad-styling/src/CdfNodeCollectionBase.ts#L20)

## Accessors

### classToken

> `get` **classToken**(): `string`

#### Returns

`string`

#### Inherited from

[`NodeCollection`](NodeCollection.md) . [`classToken`](NodeCollection.md#classtoken)

#### Defined in

[packages/cad-styling/src/NodeCollection.ts:23](https://github.com/cognitedata/reveal/blob/2acd9d17229d2bc8e309653b4d6a39ad941e44f1/viewer/packages/cad-styling/src/NodeCollection.ts#L23)

***

### isLoading

> `get` **isLoading**(): `boolean`

#### Returns

`boolean`

#### Overrides

[`NodeCollection`](NodeCollection.md) . [`isLoading`](NodeCollection.md#isloading)

#### Defined in

[packages/cad-styling/src/CdfNodeCollectionBase.ts:25](https://github.com/cognitedata/reveal/blob/2acd9d17229d2bc8e309653b4d6a39ad941e44f1/viewer/packages/cad-styling/src/CdfNodeCollectionBase.ts#L25)

## Methods

### clear()

> **clear**(): `void`

Clears the node collection and interrupts any ongoing operations.

#### Returns

`void`

#### Overrides

[`NodeCollection`](NodeCollection.md) . [`clear`](NodeCollection.md#clear)

#### Defined in

[packages/cad-styling/src/CdfNodeCollectionBase.ts:69](https://github.com/cognitedata/reveal/blob/2acd9d17229d2bc8e309653b4d6a39ad941e44f1/viewer/packages/cad-styling/src/CdfNodeCollectionBase.ts#L69)

***

### getAreas()

> **getAreas**(): [`AreaCollection`](../interfaces/AreaCollection.md)

Returns areas surrounding the nodes in the collection. The areas
are boxes in "ThreeJS coordinates". Note that not all
implementations supports this.

#### Returns

[`AreaCollection`](../interfaces/AreaCollection.md)

#### Overrides

[`NodeCollection`](NodeCollection.md) . [`getAreas`](NodeCollection.md#getareas)

#### Defined in

[packages/cad-styling/src/CdfNodeCollectionBase.ts:81](https://github.com/cognitedata/reveal/blob/2acd9d17229d2bc8e309653b4d6a39ad941e44f1/viewer/packages/cad-styling/src/CdfNodeCollectionBase.ts#L81)

***

### getIndexSet()

> **getIndexSet**(): [`IndexSet`](IndexSet.md)

#### Returns

[`IndexSet`](IndexSet.md)

#### Overrides

[`NodeCollection`](NodeCollection.md) . [`getIndexSet`](NodeCollection.md#getindexset)

#### Defined in

[packages/cad-styling/src/CdfNodeCollectionBase.ts:77](https://github.com/cognitedata/reveal/blob/2acd9d17229d2bc8e309653b4d6a39ad941e44f1/viewer/packages/cad-styling/src/CdfNodeCollectionBase.ts#L77)

***

### off()

> **off**(`event`, `listener`): `void`

#### Parameters

 **event**: `"changed"`

 **listener**

#### Returns

`void`

#### Inherited from

[`NodeCollection`](NodeCollection.md) . [`off`](NodeCollection.md#off)

#### Defined in

[packages/cad-styling/src/NodeCollection.ts:32](https://github.com/cognitedata/reveal/blob/2acd9d17229d2bc8e309653b4d6a39ad941e44f1/viewer/packages/cad-styling/src/NodeCollection.ts#L32)

***

### on()

> **on**(`event`, `listener`): `void`

#### Parameters

 **event**: `"changed"`

 **listener**

#### Returns

`void`

#### Inherited from

[`NodeCollection`](NodeCollection.md) . [`on`](NodeCollection.md#on)

#### Defined in

[packages/cad-styling/src/NodeCollection.ts:27](https://github.com/cognitedata/reveal/blob/2acd9d17229d2bc8e309653b4d6a39ad941e44f1/viewer/packages/cad-styling/src/NodeCollection.ts#L27)

***

### serialize()

> `abstract` **serialize**(): [`SerializedNodeCollection`](../type-aliases/SerializedNodeCollection.md)

#### Returns

[`SerializedNodeCollection`](../type-aliases/SerializedNodeCollection.md)

#### Inherited from

[`NodeCollection`](NodeCollection.md) . [`serialize`](NodeCollection.md#serialize)

#### Defined in

[packages/cad-styling/src/NodeCollection.ts:46](https://github.com/cognitedata/reveal/blob/2acd9d17229d2bc8e309653b4d6a39ad941e44f1/viewer/packages/cad-styling/src/NodeCollection.ts#L46)


<!-- SOURCE_END: reveal/documentation\versioned_docs\version-4.x\api\@cognite\reveal\classes\CdfNodeCollectionBase.md -->

================================================================================


<!-- SOURCE_START: reveal/documentation\versioned_docs\version-4.x\api\@cognite\reveal\classes\ClusteredAreaCollection.md -->
## File: reveal/documentation\versioned_docs\version-4.x\api\@cognite\reveal\classes\ClusteredAreaCollection.md

# Class: ClusteredAreaCollection

AreaCollection that stores a representative box set by merging
inserted boxes that are overlapping or close to each other.
It uses simple heuristics to determine which boxes are to be merged.

## Implements

- [`AreaCollection`](../interfaces/AreaCollection.md)

## Constructors

### new ClusteredAreaCollection()

> **new ClusteredAreaCollection**(): [`ClusteredAreaCollection`](ClusteredAreaCollection.md)

#### Returns

[`ClusteredAreaCollection`](ClusteredAreaCollection.md)

## Accessors

### isEmpty

> `get` **isEmpty**(): `boolean`

#### Returns

`boolean`

#### Implementation of

[`AreaCollection`](../interfaces/AreaCollection.md) . [`isEmpty`](../interfaces/AreaCollection.md#isempty)

#### Defined in

[packages/cad-styling/src/prioritized/ClusteredAreaCollection.ts:17](https://github.com/cognitedata/reveal/blob/2acd9d17229d2bc8e309653b4d6a39ad941e44f1/viewer/packages/cad-styling/src/prioritized/ClusteredAreaCollection.ts#L17)

## Methods

### addAreas()

> **addAreas**(`boxes`): `void`

Add areas to be covered by the representative set of this
AreaCollection.

#### Parameters

 **boxes**: `Iterable`\<`Box3`\>

#### Returns

`void`

#### Implementation of

[`AreaCollection`](../interfaces/AreaCollection.md) . [`addAreas`](../interfaces/AreaCollection.md#addareas)

#### Defined in

[packages/cad-styling/src/prioritized/ClusteredAreaCollection.ts:35](https://github.com/cognitedata/reveal/blob/2acd9d17229d2bc8e309653b4d6a39ad941e44f1/viewer/packages/cad-styling/src/prioritized/ClusteredAreaCollection.ts#L35)

***

### areas()

> **areas**(): `Generator`\<`Box3`, `any`, `unknown`\>

Return some set of boxes that cover the boxes inserted with `addAreas`.
It is required that each inserted box is completely covered by some
subset of boxes in the set returned from `areas`

#### Returns

`Generator`\<`Box3`, `any`, `unknown`\>

#### Implementation of

[`AreaCollection`](../interfaces/AreaCollection.md) . [`areas`](../interfaces/AreaCollection.md#areas)

#### Defined in

[packages/cad-styling/src/prioritized/ClusteredAreaCollection.ts:21](https://github.com/cognitedata/reveal/blob/2acd9d17229d2bc8e309653b4d6a39ad941e44f1/viewer/packages/cad-styling/src/prioritized/ClusteredAreaCollection.ts#L21)

***

### intersectWith()

> **intersectWith**(`boxes`): `void`

Alter the representative set to cover only the intersection between the
representative set of this AreaCollection and the incoming boxes.
Note that the intersection of two representative sets A' and B' that
represent the original box sets A and B will cover the intersection between
A and B, and will thus be a valid representative set for the intersection of A and B.

#### Parameters

 **boxes**: `Iterable`\<`Box3`\>

#### Returns

`void`

#### Implementation of

[`AreaCollection`](../interfaces/AreaCollection.md) . [`intersectWith`](../interfaces/AreaCollection.md#intersectwith)

#### Defined in

[packages/cad-styling/src/prioritized/ClusteredAreaCollection.ts:39](https://github.com/cognitedata/reveal/blob/2acd9d17229d2bc8e309653b4d6a39ad941e44f1/viewer/packages/cad-styling/src/prioritized/ClusteredAreaCollection.ts#L39)

***

### intersectsBox()

> **intersectsBox**(`box`): `boolean`

Return whether the input box intersects the AreaCollection.

#### Parameters

 **box**: `Box3`

#### Returns

`boolean`

#### Implementation of

[`AreaCollection`](../interfaces/AreaCollection.md) . [`intersectsBox`](../interfaces/AreaCollection.md#intersectsbox)

#### Defined in

[packages/cad-styling/src/prioritized/ClusteredAreaCollection.ts:25](https://github.com/cognitedata/reveal/blob/2acd9d17229d2bc8e309653b4d6a39ad941e44f1/viewer/packages/cad-styling/src/prioritized/ClusteredAreaCollection.ts#L25)


<!-- SOURCE_END: reveal/documentation\versioned_docs\version-4.x\api\@cognite\reveal\classes\ClusteredAreaCollection.md -->

================================================================================


<!-- SOURCE_START: reveal/documentation\versioned_docs\version-4.x\api\@cognite\reveal\classes\Cognite3DViewer.md -->
## File: reveal/documentation\versioned_docs\version-4.x\api\@cognite\reveal\classes\Cognite3DViewer.md

# Class: Cognite3DViewer

## Constructors

### new Cognite3DViewer()

> **new Cognite3DViewer**(`options`): [`Cognite3DViewer`](Cognite3DViewer.md)

#### Parameters

 **options**: [`Cognite3DViewerOptions`](../interfaces/Cognite3DViewerOptions.md)

#### Returns

[`Cognite3DViewer`](Cognite3DViewer.md)

#### Defined in

[packages/api/src/public/migration/Cognite3DViewer.ts:259](https://github.com/cognitedata/reveal/blob/2acd9d17229d2bc8e309653b4d6a39ad941e44f1/viewer/packages/api/src/public/migration/Cognite3DViewer.ts#L259)

## Accessors

### cadBudget

> `get` **cadBudget**(): [`CadModelBudget`](../type-aliases/CadModelBudget.md)

Gets the current budget for downloading geometry for CAD models. Note that this
budget is shared between all added CAD models and not a per-model budget.

> `set` **cadBudget**(`budget`): `void`

Sets the current budget for downloading geometry for CAD models. Note that this
budget is shared between all added CAD models and not a per-model budget.

#### Parameters

 **budget**: [`CadModelBudget`](../type-aliases/CadModelBudget.md)

#### Returns

[`CadModelBudget`](../type-aliases/CadModelBudget.md)

#### Defined in

[packages/api/src/public/migration/Cognite3DViewer.ts:213](https://github.com/cognitedata/reveal/blob/2acd9d17229d2bc8e309653b4d6a39ad941e44f1/viewer/packages/api/src/public/migration/Cognite3DViewer.ts#L213)

***

### cameraManager

> `get` **cameraManager**(): [`CameraManager`](../interfaces/CameraManager.md)

#### Returns

[`CameraManager`](../interfaces/CameraManager.md)

#### Defined in

[packages/api/src/public/migration/Cognite3DViewer.ts:664](https://github.com/cognitedata/reveal/blob/2acd9d17229d2bc8e309653b4d6a39ad941e44f1/viewer/packages/api/src/public/migration/Cognite3DViewer.ts#L664)

***

### canvas

> `get` **canvas**(): `HTMLCanvasElement`

Returns the rendering canvas, the DOM element where the renderer draws its output.

#### Returns

`HTMLCanvasElement`

#### Defined in

[packages/api/src/public/migration/Cognite3DViewer.ts:125](https://github.com/cognitedata/reveal/blob/2acd9d17229d2bc8e309653b4d6a39ad941e44f1/viewer/packages/api/src/public/migration/Cognite3DViewer.ts#L125)

***

### domElement

> `get` **domElement**(): `HTMLElement`

The DOM element the viewer will insert its rendering canvas into.
The DOM element can be specified in the options when the viewer is created.
If not specified, the DOM element will be created automatically.
The DOM element cannot be changed after the viewer has been created.

#### Returns

`HTMLElement`

#### Defined in

[packages/api/src/public/migration/Cognite3DViewer.ts:135](https://github.com/cognitedata/reveal/blob/2acd9d17229d2bc8e309653b4d6a39ad941e44f1/viewer/packages/api/src/public/migration/Cognite3DViewer.ts#L135)

***

### models

> `get` **models**(): [`CogniteModel`](../type-aliases/CogniteModel.md)[]

Gets a list of models currently added to the viewer.

#### Returns

[`CogniteModel`](../type-aliases/CogniteModel.md)[]

#### Defined in

[packages/api/src/public/migration/Cognite3DViewer.ts:248](https://github.com/cognitedata/reveal/blob/2acd9d17229d2bc8e309653b4d6a39ad941e44f1/viewer/packages/api/src/public/migration/Cognite3DViewer.ts#L248)

***

### pointCloudBudget

> `get` **pointCloudBudget**(): [`PointCloudBudget`](../type-aliases/PointCloudBudget.md)

Returns the point cloud budget. The budget is shared between all loaded
point cloud models.

> `set` **pointCloudBudget**(`budget`): `void`

Sets the point cloud budget. The budget is shared between all loaded
point cloud models.

#### Parameters

 **budget**: [`PointCloudBudget`](../type-aliases/PointCloudBudget.md)

#### Returns

[`PointCloudBudget`](../type-aliases/PointCloudBudget.md)

#### Defined in

[packages/api/src/public/migration/Cognite3DViewer.ts:233](https://github.com/cognitedata/reveal/blob/2acd9d17229d2bc8e309653b4d6a39ad941e44f1/viewer/packages/api/src/public/migration/Cognite3DViewer.ts#L233)

***

### renderParameters

> `get` **renderParameters**(): [`RenderParameters`](../type-aliases/RenderParameters.md)

Returns parameters of THREE.WebGLRenderer used by the viewer.

#### Returns

[`RenderParameters`](../type-aliases/RenderParameters.md)

#### Defined in

[packages/api/src/public/migration/Cognite3DViewer.ts:142](https://github.com/cognitedata/reveal/blob/2acd9d17229d2bc8e309653b4d6a39ad941e44f1/viewer/packages/api/src/public/migration/Cognite3DViewer.ts#L142)

## Methods

### add360ImageSet()

#### add360ImageSet(datasource, dataModelIdentifier)

> **add360ImageSet**(`datasource`, `dataModelIdentifier`): `Promise` \<[`Image360Collection`](../interfaces/Image360Collection.md)\>

Adds a set of 360 images to the scene from the /datamodels API in Cognite Data Fusion.

##### Parameters

 **datasource**: `"datamodels"`

The data data source which holds the references to the 360 image sets.

 **dataModelIdentifier**: [`Image360DataModelIdentifier`](../type-aliases/Image360DataModelIdentifier.md)

The search parameters to apply when querying Cognite Datamodels that contains the 360 images.

##### Returns

`Promise` \<[`Image360Collection`](../interfaces/Image360Collection.md)\>

##### Defined in

[packages/api/src/public/migration/Cognite3DViewer.ts:837](https://github.com/cognitedata/reveal/blob/2acd9d17229d2bc8e309653b4d6a39ad941e44f1/viewer/packages/api/src/public/migration/Cognite3DViewer.ts#L837)

#### add360ImageSet(datasource, eventFilter, add360ImageOptions)

> **add360ImageSet**(`datasource`, `eventFilter`, `add360ImageOptions`?): `Promise` \<[`Image360Collection`](../interfaces/Image360Collection.md)\>

Adds a set of 360 images to the scene from the /events API in Cognite Data Fusion.

##### Parameters

 **datasource**: `"events"`

The CDF data source which holds the references to the 360 image sets.

 **eventFilter**

The metadata filter to apply when querying events that contains the 360 images.

 **add360ImageOptions?**: [`AddImage360Options`](../type-aliases/AddImage360Options.md)

Options for behaviours when adding 360 images.

##### Returns

`Promise` \<[`Image360Collection`](../interfaces/Image360Collection.md)\>

##### Example

```js
const eventFilter = { site_id: "12345" };
await viewer.add360ImageSet('events', eventFilter);
```

##### Defined in

[packages/api/src/public/migration/Cognite3DViewer.ts:852](https://github.com/cognitedata/reveal/blob/2acd9d17229d2bc8e309653b4d6a39ad941e44f1/viewer/packages/api/src/public/migration/Cognite3DViewer.ts#L852)

***

### addCadModel()

> **addCadModel**(`options`): `Promise` \<[`CogniteCadModel`](CogniteCadModel.md)\>

Add a new CAD 3D model to the viewer.
Call [Cognite3DViewer.fitCameraToModel](Cognite3DViewer.md#fitcameratomodel) to see the model after the model has loaded.

#### Parameters

 **options**: [`AddModelOptions`](../interfaces/AddModelOptions.md)

#### Returns

`Promise` \<[`CogniteCadModel`](CogniteCadModel.md)\>

#### Example

```js
const options = {
modelId:     'COGNITE_3D_MODEL_ID',
revisionId:  'COGNITE_3D_REVISION_ID',
};
viewer.addCadModel(options).then(model => {
viewer.fitCameraToModel(model, 0);
});
```

#### Defined in

[packages/api/src/public/migration/Cognite3DViewer.ts:759](https://github.com/cognitedata/reveal/blob/2acd9d17229d2bc8e309653b4d6a39ad941e44f1/viewer/packages/api/src/public/migration/Cognite3DViewer.ts#L759)

***

### addCustomObject()

> **addCustomObject**(`customObject`): `void`

**`Beta`**

Add a CustomObject to the viewer.

#### Parameters

 **customObject**: [`ICustomObject`](../interfaces/ICustomObject.md)

#### Returns

`void`

#### Example

```js
const sphere = new THREE.Mesh(
new THREE.SphereGeometry(),
new THREE.MeshBasicMaterial()
);
const customObject = CustomObject(sphere);
customObject.isPartOfBoundingBox = false;
viewer.addCustomObject(customObject);
```

#### Defined in

[packages/api/src/public/migration/Cognite3DViewer.ts:1078](https://github.com/cognitedata/reveal/blob/2acd9d17229d2bc8e309653b4d6a39ad941e44f1/viewer/packages/api/src/public/migration/Cognite3DViewer.ts#L1078)

***

### addModel()

> **addModel**(`options`): `Promise` \<[`CogniteModel`](../type-aliases/CogniteModel.md)\>

Add a new model to the viewer.
Call [Cognite3DViewer.fitCameraToModel](Cognite3DViewer.md#fitcameratomodel) to see the model after the model has loaded.

#### Parameters

 **options**: [`AddModelOptions`](../interfaces/AddModelOptions.md)

#### Returns

`Promise` \<[`CogniteModel`](../type-aliases/CogniteModel.md)\>

#### Example

```js
const options = {
modelId:     'COGNITE_3D_MODEL_ID',
revisionId:  'COGNITE_3D_REVISION_ID',
};
viewer.addModel(options).then(model => {
viewer.fitCameraToModel(model, 0);
});
```

#### Defined in

[packages/api/src/public/migration/Cognite3DViewer.ts:717](https://github.com/cognitedata/reveal/blob/2acd9d17229d2bc8e309653b4d6a39ad941e44f1/viewer/packages/api/src/public/migration/Cognite3DViewer.ts#L717)

***

### addObject3D()

> **addObject3D**(`object`): `void`

Add a THREE.Object3D to the viewer.

#### Parameters

 **object**: `Object3D`\<`Object3DEventMap`\>

#### Returns

`void`

#### Example

```js
const sphere = new THREE.Mesh(
new THREE.SphereGeometry(),
new THREE.MeshBasicMaterial()
);
viewer.addObject3D(sphere);
```

#### Defined in

[packages/api/src/public/migration/Cognite3DViewer.ts:1052](https://github.com/cognitedata/reveal/blob/2acd9d17229d2bc8e309653b4d6a39ad941e44f1/viewer/packages/api/src/public/migration/Cognite3DViewer.ts#L1052)

***

### addPointCloudModel()

> **addPointCloudModel**(`options`): `Promise` \<[`CognitePointCloudModel`](CognitePointCloudModel.md)\>

Add a new pointcloud 3D model to the viewer.
Call [Cognite3DViewer.fitCameraToModel](Cognite3DViewer.md#fitcameratomodel) to see the model after the model has loaded.

#### Parameters

 **options**: [`AddModelOptions`](../interfaces/AddModelOptions.md)

#### Returns

`Promise` \<[`CognitePointCloudModel`](CognitePointCloudModel.md)\>

#### Example

```js
const options = {
modelId:     'COGNITE_3D_MODEL_ID',
revisionId:  'COGNITE_3D_REVISION_ID',
};
viewer.addPointCloudModel(options).then(model => {
viewer.fitCameraToModel(model, 0);
});
```

#### Defined in

[packages/api/src/public/migration/Cognite3DViewer.ts:803](https://github.com/cognitedata/reveal/blob/2acd9d17229d2bc8e309653b4d6a39ad941e44f1/viewer/packages/api/src/public/migration/Cognite3DViewer.ts#L803)

***

### createCustomObjectIntersectInput()

> **createCustomObjectIntersectInput**(`pixelCoords`): [`CustomObjectIntersectInput`](CustomObjectIntersectInput.md)

**`Beta`**

Creates and initialize a CustomObjectIntersectInput to be used by CustomObject.intersectIfCloser method.

#### Parameters

 **pixelCoords**: `Vector2`

A Vector2 containing pixel coordinates relative to the 3D viewer.

#### Returns

[`CustomObjectIntersectInput`](CustomObjectIntersectInput.md)

A CustomObjectIntersectInput ready to use.

#### Defined in

[packages/api/src/public/migration/Cognite3DViewer.ts:1518](https://github.com/cognitedata/reveal/blob/2acd9d17229d2bc8e309653b4d6a39ad941e44f1/viewer/packages/api/src/public/migration/Cognite3DViewer.ts#L1518)

***

### determineModelType()

> **determineModelType**(`modelId`, `revisionId`): `Promise`\<`""` \| [`SupportedModelTypes`](../type-aliases/SupportedModelTypes.md)\>

Use to determine of which type the model is.

#### Parameters

 **modelId**: `number`

The model's id.

 **revisionId**: `number`

The model's revision id.

#### Returns

`Promise`\<`""` \| [`SupportedModelTypes`](../type-aliases/SupportedModelTypes.md)\>

Empty string if type is not supported.

#### Example

```typescript
const viewer = new Cognite3DViewer(...);
const type = await viewer.determineModelType(options.modelId, options.revisionId)
let model: CogniteModel
switch (type) {
  case 'cad':
    model = await viewer.addCadModel(options);
    break;
  case 'pointcloud':
    model = await viewer.addPointCloudModel(options);
    break;
  default:
    throw new Error('Model is not supported');
}
viewer.fitCameraToModel(model);
```

#### Defined in

[packages/api/src/public/migration/Cognite3DViewer.ts:1010](https://github.com/cognitedata/reveal/blob/2acd9d17229d2bc8e309653b4d6a39ad941e44f1/viewer/packages/api/src/public/migration/Cognite3DViewer.ts#L1010)

***

### dispose()

> **dispose**(): `void`

Dispose of WebGL resources. Can be used to free up memory when the viewer is no longer in use.

#### Returns

`void`

#### See

[https://threejs.org/docs/#manual/en/introduction/How-to-dispose-of-objects](https://threejs.org/docs/#manual/en/introduction/How-to-dispose-of-objects)
```js
// Viewer is no longer in use, free up memory
viewer.dispose();
```

#### Defined in

[packages/api/src/public/migration/Cognite3DViewer.ts:447](https://github.com/cognitedata/reveal/blob/2acd9d17229d2bc8e309653b4d6a39ad941e44f1/viewer/packages/api/src/public/migration/Cognite3DViewer.ts#L447)

***

### enter360Image()

> **enter360Image**(`image360`, `revision`?): `Promise`\<`void`\>

Enter visualization of a 360 image.

#### Parameters

 **image360**: [`Image360`](../interfaces/Image360.md)

The 360 image to enter.

 **revision?**: [`Image360Revision`](../interfaces/Image360Revision.md)

The image revision to use. If not provided the newest revision will be shown.

#### Returns

`Promise`\<`void`\>

#### Defined in

[packages/api/src/public/migration/Cognite3DViewer.ts:927](https://github.com/cognitedata/reveal/blob/2acd9d17229d2bc8e309653b4d6a39ad941e44f1/viewer/packages/api/src/public/migration/Cognite3DViewer.ts#L927)

***

### exit360Image()

> **exit360Image**(): `void`

Exit visualization of the 360 image.

#### Returns

`void`

#### Defined in

[packages/api/src/public/migration/Cognite3DViewer.ts:937](https://github.com/cognitedata/reveal/blob/2acd9d17229d2bc8e309653b4d6a39ad941e44f1/viewer/packages/api/src/public/migration/Cognite3DViewer.ts#L937)

***

### fitCameraToBoundingBox()

> **fitCameraToBoundingBox**(`box`, `duration`?, `radiusFactor`?): `void`

Move camera to a place where the content of a bounding box is visible to the camera.

#### Parameters

 **box**: `Box3`

The bounding box in world space.

 **duration?**: `number`

The duration of the animation moving the camera. Set this to 0 (zero) to disable animation.

 **radiusFactor?**: `number` = `2`

The ratio of the distance from camera to center of box and radius of the box.

#### Returns

`void`

#### Example

```js
// Fit camera to bounding box over 500 milliseconds
viewer.fitCameraToBoundingBox(boundingBox, 500);
```
```js
// Fit camera to bounding box instantaneously
viewer.fitCameraToBoundingBox(boundingBox, 0);
```
```js
// Place the camera closer to the bounding box
viewer.fitCameraToBoundingBox(boundingBox, 500, 2);
```

#### Defined in

[packages/api/src/public/migration/Cognite3DViewer.ts:1303](https://github.com/cognitedata/reveal/blob/2acd9d17229d2bc8e309653b4d6a39ad941e44f1/viewer/packages/api/src/public/migration/Cognite3DViewer.ts#L1303)

***

### fitCameraToModel()

> **fitCameraToModel**(`model`, `duration`?): `void`

Move camera to a place where the 3D model is visible.
It uses the bounding box of the 3D model and calls [Cognite3DViewer.fitCameraToBoundingBox](Cognite3DViewer.md#fitcameratoboundingbox).

#### Parameters

 **model**: [`CogniteModel`](../type-aliases/CogniteModel.md)

The 3D model.

 **duration?**: `number`

The duration of the animation moving the camera. Set this to 0 (zero) to disable animation.

#### Returns

`void`

#### Example

```js
// Fit camera to model
viewer.fitCameraToModel(model);
```
```js
// Fit camera to model over 500 milliseconds
viewer.fitCameraToModel(model, 500);
```
```js
// Fit camera to model instantly
viewer.fitCameraToModel(model, 0);
```

#### Defined in

[packages/api/src/public/migration/Cognite3DViewer.ts:1258](https://github.com/cognitedata/reveal/blob/2acd9d17229d2bc8e309653b4d6a39ad941e44f1/viewer/packages/api/src/public/migration/Cognite3DViewer.ts#L1258)

***

### fitCameraToModels()

> **fitCameraToModels**(`models`?, `duration`?, `restrictToMostGeometry`?): `void`

Move camera to a place where a set of 3D models are visible.

#### Parameters

 **models?**: [`CogniteModel`](../type-aliases/CogniteModel.md)[]

Optional 3D models to focus the camera on. If no models are provided the camera will fit to all models.

 **duration?**: `number`

The duration of the animation moving the camera. Set this to 0 (zero) to disable animation.

 **restrictToMostGeometry?**: `boolean` = `false`

If true, attempt to remove junk geometry from the boundingBox to allow setting a good camera position.

#### Returns

`void`

#### Defined in

[packages/api/src/public/migration/Cognite3DViewer.ts:1269](https://github.com/cognitedata/reveal/blob/2acd9d17229d2bc8e309653b4d6a39ad941e44f1/viewer/packages/api/src/public/migration/Cognite3DViewer.ts#L1269)

***

### get360AnnotationIntersectionFromPixel()

> **get360AnnotationIntersectionFromPixel**(`offsetX`, `offsetY`): `Promise`\<`null` \| [`Image360AnnotationIntersection`](../type-aliases/Image360AnnotationIntersection.md)\>

Check for intersections with 360 annotations through the given pixel.
Similar to [Cognite3DViewer.getIntersectionFromPixel](Cognite3DViewer.md#getintersectionfrompixel), but checks 360 image annotations
instead of models.

#### Parameters

 **offsetX**: `number`

 **offsetY**: `number`

#### Returns

`Promise`\<`null` \| [`Image360AnnotationIntersection`](../type-aliases/Image360AnnotationIntersection.md)\>

#### Defined in

[packages/api/src/public/migration/Cognite3DViewer.ts:1635](https://github.com/cognitedata/reveal/blob/2acd9d17229d2bc8e309653b4d6a39ad941e44f1/viewer/packages/api/src/public/migration/Cognite3DViewer.ts#L1635)

***

### get360ImageCollections()

> **get360ImageCollections**(): [`Image360Collection`](../interfaces/Image360Collection.md)[]

Returns a list of added 360 image collections.

#### Returns

[`Image360Collection`](../interfaces/Image360Collection.md)[]

#### Defined in

[packages/api/src/public/migration/Cognite3DViewer.ts:891](https://github.com/cognitedata/reveal/blob/2acd9d17229d2bc8e309653b4d6a39ad941e44f1/viewer/packages/api/src/public/migration/Cognite3DViewer.ts#L891)

***

### getActive360ImageInfo()

> **getActive360ImageInfo**(): `undefined` \| [`Image360WithCollection`](../type-aliases/Image360WithCollection.md)

Returns the currently entered 360 image.

#### Returns

`undefined` \| [`Image360WithCollection`](../type-aliases/Image360WithCollection.md)

#### Defined in

[packages/api/src/public/migration/Cognite3DViewer.ts:898](https://github.com/cognitedata/reveal/blob/2acd9d17229d2bc8e309653b4d6a39ad941e44f1/viewer/packages/api/src/public/migration/Cognite3DViewer.ts#L898)

***

### getAnyIntersectionFromPixel()

> **getAnyIntersectionFromPixel**(`pixelCoords`, `options`?): `Promise`\<`undefined` \| [`AnyIntersection`](../type-aliases/AnyIntersection.md)\>

**`Beta`**

Raycasting model(s) for finding where the ray intersects with all models, including custom objects.

#### Parameters

 **pixelCoords**: `Vector2`

Pixel coordinate in pixels (relative to the domElement).

 **options?**

 **options.predicate?**

Check whether a CustomObject should be intersected.

 **options.stopOnHitting360Icon?**: `boolean`

#### Returns

`Promise`\<`undefined` \| [`AnyIntersection`](../type-aliases/AnyIntersection.md)\>

A promise that if there was an intersection then return the intersection object - otherwise it
returns `null` if there were no intersections.

#### Defined in

[packages/api/src/public/migration/Cognite3DViewer.ts:1576](https://github.com/cognitedata/reveal/blob/2acd9d17229d2bc8e309653b4d6a39ad941e44f1/viewer/packages/api/src/public/migration/Cognite3DViewer.ts#L1576)

***

### ~~getClippingPlanes()~~

> **getClippingPlanes**(): `Plane`[]

Returns the current active global clipping planes.

#### Returns

`Plane`[]

#### Deprecated

Use [Cognite3DViewer.getGlobalClippingPlanes](Cognite3DViewer.md#getglobalclippingplanes) instead.

#### Defined in

[packages/api/src/public/migration/Cognite3DViewer.ts:1201](https://github.com/cognitedata/reveal/blob/2acd9d17229d2bc8e309653b4d6a39ad941e44f1/viewer/packages/api/src/public/migration/Cognite3DViewer.ts#L1201)

***

### getGlobalClippingPlanes()

> **getGlobalClippingPlanes**(): `Plane`[]

Returns the current active global clipping planes.

#### Returns

`Plane`[]

#### Defined in

[packages/api/src/public/migration/Cognite3DViewer.ts:1208](https://github.com/cognitedata/reveal/blob/2acd9d17229d2bc8e309653b4d6a39ad941e44f1/viewer/packages/api/src/public/migration/Cognite3DViewer.ts#L1208)

***

### getIntersectionFromPixel()

> **getIntersectionFromPixel**(`offsetX`, `offsetY`): `Promise`\<`null` \| [`Intersection`](../type-aliases/Intersection.md)\>

Raycasting model(s) for finding where the ray intersects with the model.

#### Parameters

 **offsetX**: `number`

X coordinate in pixels (relative to the domElement).

 **offsetY**: `number`

Y coordinate in pixels (relative to the domElement).

#### Returns

`Promise`\<`null` \| [`Intersection`](../type-aliases/Intersection.md)\>

A promise that if there was an intersection then return the intersection object - otherwise it
returns `null` if there were no intersections.

#### See

[https://en.wikipedia.org/wiki/Ray_casting](https://en.wikipedia.org/wiki/Ray_casting) For more details on Ray casting.

#### Examples

```js
const offsetX = 50 // pixels from the left
const offsetY = 100 // pixels from the top
const intersection = await viewer.getIntersectionFromPixel(offsetX, offsetY);
if (intersection) // it was a hit
  console.log(
  'You hit model ', intersection.model,
  ' at the node with tree index ', intersection.treeIndex,
  ' at this exact point ', intersection.point
  );
```

```js
const offsetX = 50 // pixels from the left
const offsetY = 100 // pixels from the top
const intersection = await viewer.getIntersectionFromPixel(offsetX, offsetY);
if (intersection) // it was a hit
  console.log(
  'You hit model ', intersection.model,
  ' at the point index ', intersection.pointIndex,
  ' at this exact point ', intersection.point
  );
```

#### Defined in

[packages/api/src/public/migration/Cognite3DViewer.ts:1559](https://github.com/cognitedata/reveal/blob/2acd9d17229d2bc8e309653b4d6a39ad941e44f1/viewer/packages/api/src/public/migration/Cognite3DViewer.ts#L1559)

***

### getNormalizedPixelCoordinates()

> **getNormalizedPixelCoordinates**(`pixelCoords`): `Vector2`

Converts a pixel coordinate to normalized device coordinate (in range [-1, 1]).

#### Parameters

 **pixelCoords**: `Vector2`

A Vector2 containing pixel coordinates relative to the 3D viewer.

#### Returns

`Vector2`

A Vector2 containing the normalized device coordinate (in range [-1, 1]).

#### Defined in

[packages/api/src/public/migration/Cognite3DViewer.ts:1499](https://github.com/cognitedata/reveal/blob/2acd9d17229d2bc8e309653b4d6a39ad941e44f1/viewer/packages/api/src/public/migration/Cognite3DViewer.ts#L1499)

***

### getPixelCoordinatesFromEvent()

> **getPixelCoordinatesFromEvent**(`event`): `Vector2`

Determines clicked or touched pixel coordinate as offset.

#### Parameters

 **event**: `PointerEvent` \| `WheelEvent`

An PointerEvent or WheelEvent.

#### Returns

`Vector2`

A Vector2 containing pixel coordinates relative to the 3D viewer.

#### Defined in

[packages/api/src/public/migration/Cognite3DViewer.ts:1508](https://github.com/cognitedata/reveal/blob/2acd9d17229d2bc8e309653b4d6a39ad941e44f1/viewer/packages/api/src/public/migration/Cognite3DViewer.ts#L1508)

***

### getSceneBoundingBox()

> **getSceneBoundingBox**(): `Box3`

**`Beta`**

Returns the union of all bounding boxes in reveal, including custom objects.

#### Returns

`Box3`

#### Defined in

[packages/api/src/public/migration/Cognite3DViewer.ts:1216](https://github.com/cognitedata/reveal/blob/2acd9d17229d2bc8e309653b4d6a39ad941e44f1/viewer/packages/api/src/public/migration/Cognite3DViewer.ts#L1216)

***

### getScreenshot()

> **getScreenshot**(`width`, `height`, `includeUI`): `Promise`\<`string`\>

Take a screenshot from the current camera position. When drawing UI, only the viewer DOM element and its children will be included in the image.
The DOM is scaled to fit any provided resolution, and as a result some elements can be positioned incorrectly in regards to the 3D render.

`html2canvas` is used to draw UI and this has some limitations on what CSS properties it is able to render. See [the html2canvas documentation](https://html2canvas.hertzen.com/documentation) for details.

#### Parameters

 **width**: `number` = `...`

Width of the final image. Default is current canvas size.

 **height**: `number` = `...`

Height of the final image. Default is current canvas size.

 **includeUI**: `boolean` = `true`

If false the screenshot will include only the rendered 3D. Default is true.

#### Returns

`Promise`\<`string`\>

A [Data URL](https://developer.mozilla.org/en-US/docs/Web/HTTP/Basics_of_HTTP/Data_URIs) of the image ('image/png').

#### Example

```js
// Take a screenshot with custom resolution
const url = await viewer.getScreenshot(1920, 1080);
```
```js
// Add a screenshot with resolution of the canvas to the page
const url = await viewer.getScreenshot();
const image = document.createElement('img');
image.src = url;
document.body.appendChild(image);
```

#### Defined in

[packages/api/src/public/migration/Cognite3DViewer.ts:1397](https://github.com/cognitedata/reveal/blob/2acd9d17229d2bc8e309653b4d6a39ad941e44f1/viewer/packages/api/src/public/migration/Cognite3DViewer.ts#L1397)

***

### getVersion()

> **getVersion**(): `string`

Returns reveal version installed.

#### Returns

`string`

#### Defined in

[packages/api/src/public/migration/Cognite3DViewer.ts:420](https://github.com/cognitedata/reveal/blob/2acd9d17229d2bc8e309653b4d6a39ad941e44f1/viewer/packages/api/src/public/migration/Cognite3DViewer.ts#L420)

***

### getViewState()

> **getViewState**(): [`ViewerState`](../type-aliases/ViewerState.md)

Gets the current viewer state which includes the camera pose as well as applied styling.

#### Returns

[`ViewerState`](../type-aliases/ViewerState.md)

JSON object containing viewer state.

#### Defined in

[packages/api/src/public/migration/Cognite3DViewer.ts:681](https://github.com/cognitedata/reveal/blob/2acd9d17229d2bc8e309653b4d6a39ad941e44f1/viewer/packages/api/src/public/migration/Cognite3DViewer.ts#L681)

***

### loadCameraFromModel()

> **loadCameraFromModel**(`model`): `void`

Attempts to load the camera settings from the settings stored for the
provided model. See [https://docs.cognite.com/api/v1/#operation/get3DRevision](https://docs.cognite.com/api/v1/#operation/get3DRevision)
and [https://docs.cognite.com/api/v1/#operation/update3DRevisions](https://docs.cognite.com/api/v1/#operation/update3DRevisions) for
information on how this setting is retrieved and stored. This setting can
also be changed through the 3D models management interface in Cognite Fusion.
If no camera configuration is stored in CDF, [Cognite3DViewer.fitCameraToModel](Cognite3DViewer.md#fitcameratomodel)
is used as a fallback.

#### Parameters

 **model**: [`CogniteModel`](../type-aliases/CogniteModel.md)

The model to load camera settings from.

#### Returns

`void`

#### Defined in

[packages/api/src/public/migration/Cognite3DViewer.ts:1230](https://github.com/cognitedata/reveal/blob/2acd9d17229d2bc8e309653b4d6a39ad941e44f1/viewer/packages/api/src/public/migration/Cognite3DViewer.ts#L1230)

***

### off()

Remove event listener from the viewer.
Call [Cognite3DViewer.on](Cognite3DViewer.md#on) to add event listener.

#### Param

#### Param

#### off(event, callback)

> **off**(`event`, `callback`): `void`

##### Parameters

 **event**: `"click"` \| `"hover"`

 **callback**: [`PointerEventDelegate`](../type-aliases/PointerEventDelegate.md)

##### Returns

`void`

##### Example

```js
viewer.off('click', onClick);
```

##### Defined in

[packages/api/src/public/migration/Cognite3DViewer.ts:583](https://github.com/cognitedata/reveal/blob/2acd9d17229d2bc8e309653b4d6a39ad941e44f1/viewer/packages/api/src/public/migration/Cognite3DViewer.ts#L583)

#### off(event, callback)

> **off**(`event`, `callback`): `void`

##### Parameters

 **event**: `"cameraChange"`

 **callback**: [`CameraChangeDelegate`](../type-aliases/CameraChangeDelegate.md)

##### Returns

`void`

##### Example

```js
viewer.off('cameraChange', onCameraChange);
```

##### Defined in

[packages/api/src/public/migration/Cognite3DViewer.ts:590](https://github.com/cognitedata/reveal/blob/2acd9d17229d2bc8e309653b4d6a39ad941e44f1/viewer/packages/api/src/public/migration/Cognite3DViewer.ts#L590)

#### off(event, callback)

> **off**(`event`, `callback`): `void`

##### Parameters

 **event**: `"cameraStop"`

 **callback**: [`CameraStopDelegate`](../type-aliases/CameraStopDelegate.md)

##### Returns

`void`

##### Example

```js
viewer.off('cameraStop', onCameraStop);
```

##### Defined in

[packages/api/src/public/migration/Cognite3DViewer.ts:597](https://github.com/cognitedata/reveal/blob/2acd9d17229d2bc8e309653b4d6a39ad941e44f1/viewer/packages/api/src/public/migration/Cognite3DViewer.ts#L597)

#### off(event, callback)

> **off**(`event`, `callback`): `void`

Unsubscribe the 'beforeSceneRendered'-event previously subscribed with [Cognite3DViewer.on](Cognite3DViewer.md#on).

##### Parameters

 **event**: `"beforeSceneRendered"`

 **callback**: [`BeforeSceneRenderedDelegate`](../type-aliases/BeforeSceneRenderedDelegate.md)

##### Returns

`void`

##### Defined in

[packages/api/src/public/migration/Cognite3DViewer.ts:601](https://github.com/cognitedata/reveal/blob/2acd9d17229d2bc8e309653b4d6a39ad941e44f1/viewer/packages/api/src/public/migration/Cognite3DViewer.ts#L601)

#### off(event, callback)

> **off**(`event`, `callback`): `void`

##### Parameters

 **event**: `"sceneRendered"`

 **callback**: [`SceneRenderedDelegate`](../type-aliases/SceneRenderedDelegate.md)

##### Returns

`void`

##### Example

```js
viewer.off('sceneRendered', updateStats);
```

##### Defined in

[packages/api/src/public/migration/Cognite3DViewer.ts:608](https://github.com/cognitedata/reveal/blob/2acd9d17229d2bc8e309653b4d6a39ad941e44f1/viewer/packages/api/src/public/migration/Cognite3DViewer.ts#L608)

#### off(event, callback)

> **off**(`event`, `callback`): `void`

##### Parameters

 **event**: `"disposed"`

 **callback**: [`DisposedDelegate`](../type-aliases/DisposedDelegate.md)

##### Returns

`void`

##### Example

```js
viewer.off('disposed', clearAll);
```

##### Defined in

[packages/api/src/public/migration/Cognite3DViewer.ts:615](https://github.com/cognitedata/reveal/blob/2acd9d17229d2bc8e309653b4d6a39ad941e44f1/viewer/packages/api/src/public/migration/Cognite3DViewer.ts#L615)

***

### on()

Add event listener to the viewer.
Call [Cognite3DViewer.off](Cognite3DViewer.md#off) to remove an event listener.

#### Param

#### Param

#### on(event, callback)

> **on**(`event`, `callback`): `void`

Triggered when the viewer is disposed. Listeners should clean up any
resources held and remove the reference to the viewer.

##### Parameters

 **event**: `"disposed"`

 **callback**: [`DisposedDelegate`](../type-aliases/DisposedDelegate.md)

##### Returns

`void`

##### Defined in

[packages/api/src/public/migration/Cognite3DViewer.ts:490](https://github.com/cognitedata/reveal/blob/2acd9d17229d2bc8e309653b4d6a39ad941e44f1/viewer/packages/api/src/public/migration/Cognite3DViewer.ts#L490)

#### on(event, callback)

> **on**(`event`, `callback`): `void`

##### Parameters

 **event**: `"click"` \| `"hover"`

 **callback**: [`PointerEventDelegate`](../type-aliases/PointerEventDelegate.md)

##### Returns

`void`

##### Example

```js
const onClick = (event) => { console.log(event.offsetX, event.offsetY) };
viewer.on('click', onClick);
```

##### Defined in

[packages/api/src/public/migration/Cognite3DViewer.ts:499](https://github.com/cognitedata/reveal/blob/2acd9d17229d2bc8e309653b4d6a39ad941e44f1/viewer/packages/api/src/public/migration/Cognite3DViewer.ts#L499)

#### on(event, callback)

> **on**(`event`, `callback`): `void`

##### Parameters

 **event**: `"cameraChange"`

 **callback**: [`CameraChangeDelegate`](../type-aliases/CameraChangeDelegate.md)

##### Returns

`void`

##### Example

```js
viewer.on('cameraChange', (position, target) => {
  console.log('Camera changed: ', position, target);
});
```

##### Defined in

[packages/api/src/public/migration/Cognite3DViewer.ts:508](https://github.com/cognitedata/reveal/blob/2acd9d17229d2bc8e309653b4d6a39ad941e44f1/viewer/packages/api/src/public/migration/Cognite3DViewer.ts#L508)

#### on(event, callback)

> **on**(`event`, `callback`): `void`

##### Parameters

 **event**: `"cameraStop"`

 **callback**: [`CameraStopDelegate`](../type-aliases/CameraStopDelegate.md)

##### Returns

`void`

##### Example

```js
viewer.on('cameraStop', () => {
  console.log('Camera stopped');
});
```

##### Defined in

[packages/api/src/public/migration/Cognite3DViewer.ts:517](https://github.com/cognitedata/reveal/blob/2acd9d17229d2bc8e309653b4d6a39ad941e44f1/viewer/packages/api/src/public/migration/Cognite3DViewer.ts#L517)

#### on(event, callback)

> **on**(`event`, `callback`): `void`

Event that is triggered immediately before the scene is rendered.

##### Parameters

 **event**: `"beforeSceneRendered"`

Metadata about the rendering frame.

 **callback**: [`BeforeSceneRenderedDelegate`](../type-aliases/BeforeSceneRenderedDelegate.md)

Callback to trigger when event occurs.

##### Returns

`void`

##### Defined in

[packages/api/src/public/migration/Cognite3DViewer.ts:523](https://github.com/cognitedata/reveal/blob/2acd9d17229d2bc8e309653b4d6a39ad941e44f1/viewer/packages/api/src/public/migration/Cognite3DViewer.ts#L523)

#### on(event, callback)

> **on**(`event`, `callback`): `void`

Event that is triggered immediately after the scene has been rendered.

##### Parameters

 **event**: `"sceneRendered"`

Metadata about the rendering frame.

 **callback**: [`SceneRenderedDelegate`](../type-aliases/SceneRenderedDelegate.md)

Callback to trigger when the event occurs.

##### Returns

`void`

##### Defined in

[packages/api/src/public/migration/Cognite3DViewer.ts:529](https://github.com/cognitedata/reveal/blob/2acd9d17229d2bc8e309653b4d6a39ad941e44f1/viewer/packages/api/src/public/migration/Cognite3DViewer.ts#L529)

***

### remove360ImageSet()

> **remove360ImageSet**(`imageCollection`): `void`

Removes a previously added 360 image collection from the viewer.

#### Parameters

 **imageCollection**: [`Image360Collection`](../interfaces/Image360Collection.md)

Collection to remove.

#### Returns

`void`

#### Defined in

[packages/api/src/public/migration/Cognite3DViewer.ts:918](https://github.com/cognitedata/reveal/blob/2acd9d17229d2bc8e309653b4d6a39ad941e44f1/viewer/packages/api/src/public/migration/Cognite3DViewer.ts#L918)

***

### ~~remove360Images()~~

> **remove360Images**(...`image360Entities`): `Promise`\<`void`\>

Remove a set of 360 images.

#### Parameters

 ...**image360Entities**: [`Image360`](../interfaces/Image360.md)[]

#### Returns

`Promise`\<`void`\>

#### Deprecated

#### Defined in

[packages/api/src/public/migration/Cognite3DViewer.ts:907](https://github.com/cognitedata/reveal/blob/2acd9d17229d2bc8e309653b4d6a39ad941e44f1/viewer/packages/api/src/public/migration/Cognite3DViewer.ts#L907)

***

### removeCustomObject()

> **removeCustomObject**(`customObject`): `void`

**`Beta`**

Remove a CustomObject from the viewer.

#### Parameters

 **customObject**: [`ICustomObject`](../interfaces/ICustomObject.md)

#### Returns

`void`

#### Example

```js
const sphere = new THREE.Mesh(new THREE.SphereGeometry(), new THREE.MeshBasicMaterial());
const customObject = CustomObject(sphere);
viewer.addCustomObject(sphere);
viewer.removeCustomObject(sphere);
```

#### Defined in

[packages/api/src/public/migration/Cognite3DViewer.ts:1121](https://github.com/cognitedata/reveal/blob/2acd9d17229d2bc8e309653b4d6a39ad941e44f1/viewer/packages/api/src/public/migration/Cognite3DViewer.ts#L1121)

***

### removeModel()

> **removeModel**(`model`): `void`

Removes a model that was previously added using [Cognite3DViewer.addModel](Cognite3DViewer.md#addmodel),
[Cognite3DViewer.addCadModel](Cognite3DViewer.md#addcadmodel) or [Cognite3DViewer.addPointCloudModel](Cognite3DViewer.md#addpointcloudmodel)
.

#### Parameters

 **model**: [`CogniteModel`](../type-aliases/CogniteModel.md)

#### Returns

`void`

#### Defined in

[packages/api/src/public/migration/Cognite3DViewer.ts:950](https://github.com/cognitedata/reveal/blob/2acd9d17229d2bc8e309653b4d6a39ad941e44f1/viewer/packages/api/src/public/migration/Cognite3DViewer.ts#L950)

***

### removeObject3D()

> **removeObject3D**(`object`): `void`

Remove a THREE.Object3D from the viewer.

#### Parameters

 **object**: `Object3D`\<`Object3DEventMap`\>

#### Returns

`void`

#### Example

```js
const sphere = new THREE.Mesh(new THREE.SphereGeometry(), new THREE.MeshBasicMaterial());
viewer.addObject3D(sphere);
viewer.removeObject3D(sphere);
```

#### Defined in

[packages/api/src/public/migration/Cognite3DViewer.ts:1100](https://github.com/cognitedata/reveal/blob/2acd9d17229d2bc8e309653b4d6a39ad941e44f1/viewer/packages/api/src/public/migration/Cognite3DViewer.ts#L1100)

***

### requestRedraw()

> **requestRedraw**(): `void`

Typically used when you perform some changes and can't see them unless you move camera.

#### Returns

`void`

#### Defined in

[packages/api/src/public/migration/Cognite3DViewer.ts:1310](https://github.com/cognitedata/reveal/blob/2acd9d17229d2bc8e309653b4d6a39ad941e44f1/viewer/packages/api/src/public/migration/Cognite3DViewer.ts#L1310)

***

### setBackgroundColor()

> **setBackgroundColor**(`backgroundColor`): `void`

Sets the color used as the clear color of the renderer.

#### Parameters

 **backgroundColor**

 **backgroundColor.alpha?**: `number`

 **backgroundColor.color?**: `Color`

#### Returns

`void`

#### Defined in

[packages/api/src/public/migration/Cognite3DViewer.ts:1138](https://github.com/cognitedata/reveal/blob/2acd9d17229d2bc8e309653b4d6a39ad941e44f1/viewer/packages/api/src/public/migration/Cognite3DViewer.ts#L1138)

***

### setCameraManager()

> **setCameraManager**(`cameraManager`): `void`

Sets the active camera manager instance for current Cognite3Dviewer.

#### Parameters

 **cameraManager**: [`CameraManager`](../interfaces/CameraManager.md)

Camera manager instance.

#### Returns

`void`

#### Defined in

[packages/api/src/public/migration/Cognite3DViewer.ts:672](https://github.com/cognitedata/reveal/blob/2acd9d17229d2bc8e309653b4d6a39ad941e44f1/viewer/packages/api/src/public/migration/Cognite3DViewer.ts#L672)

***

### ~~setClippingPlanes()~~

> **setClippingPlanes**(`clippingPlanes`): `void`

Sets per-pixel clipping planes. Pixels behind any of the planes will be sliced away.

#### Parameters

 **clippingPlanes**: `Plane`[]

#### Returns

`void`

#### Deprecated

Use [Cognite3DViewer.setGlobalClippingPlanes](Cognite3DViewer.md#setglobalclippingplanes) instead.

#### Defined in

[packages/api/src/public/migration/Cognite3DViewer.ts:1193](https://github.com/cognitedata/reveal/blob/2acd9d17229d2bc8e309653b4d6a39ad941e44f1/viewer/packages/api/src/public/migration/Cognite3DViewer.ts#L1193)

***

### setGlobalClippingPlanes()

> **setGlobalClippingPlanes**(`clippingPlanes`): `void`

Sets per-pixel clipping planes. Pixels behind any of the planes will be sliced away.

#### Parameters

 **clippingPlanes**: `Plane`[]

The planes to use for clipping.

#### Returns

`void`

#### Example

```js
// Hide pixels with values less than 0 in the x direction
const plane = new THREE.Plane(new THREE.Vector3(1, 0, 0), 0);
viewer.setGlobalClippingPlanes([plane]);
```
```js
// Hide pixels with values greater than 20 in the x direction
 const plane = new THREE.Plane(new THREE.Vector3(-1, 0, 0), 20);
viewer.setGlobalClippingPlanes([plane]);
```
```js
// Hide pixels with values less than 0 in the x direction or greater than 0 in the y direction
const xPlane = new THREE.Plane(new THREE.Vector3(1, 0, 0), 0);
const yPlane = new THREE.Plane(new THREE.Vector3(0, -1, 0), 0);
viewer.setGlobalClippingPlanes([xPlane, yPlane]);
```
```js
// Hide pixels behind an arbitrary, non axis-aligned plane
 const plane = new THREE.Plane(new THREE.Vector3(1.5, 20, -19), 20);
viewer.setGlobalClippingPlanes([plane]);
```
```js
// Disable clipping planes
 viewer.setGlobalClippingPlanes([]);
```

#### Defined in

[packages/api/src/public/migration/Cognite3DViewer.ts:1183](https://github.com/cognitedata/reveal/blob/2acd9d17229d2bc8e309653b4d6a39ad941e44f1/viewer/packages/api/src/public/migration/Cognite3DViewer.ts#L1183)

***

### setLogLevel()

> **setLogLevel**(`level`): `void`

Sets the log level. Used for debugging.
Defaults to 'none' (which is identical to 'silent').

#### Parameters

 **level**: `"error"` \| `"none"` \| `"debug"` \| `"trace"` \| `"info"` \| `"warn"` \| `"silent"`

#### Returns

`void`

#### Defined in

[packages/api/src/public/migration/Cognite3DViewer.ts:429](https://github.com/cognitedata/reveal/blob/2acd9d17229d2bc8e309653b4d6a39ad941e44f1/viewer/packages/api/src/public/migration/Cognite3DViewer.ts#L429)

***

### setResolutionOptions()

> **setResolutionOptions**(`options`): `void`

Set options to control resolution of the viewer. This includes
settings for max resolution and limiting resolution when moving the camera.

#### Parameters

 **options**: [`ResolutionOptions`](../type-aliases/ResolutionOptions.md)

Options to apply.

#### Returns

`void`

#### Defined in

[packages/api/src/public/migration/Cognite3DViewer.ts:407](https://github.com/cognitedata/reveal/blob/2acd9d17229d2bc8e309653b4d6a39ad941e44f1/viewer/packages/api/src/public/migration/Cognite3DViewer.ts#L407)

***

### setViewState()

> **setViewState**(`state`): `Promise`\<`void`\>

Restores camera settings from the state provided, and clears all current styled
node collections and applies the `state` object.

#### Parameters

 **state**: [`ViewerState`](../type-aliases/ViewerState.md)

Viewer state retrieved from [Cognite3DViewer.getViewState](Cognite3DViewer.md#getviewstate).

#### Returns

`Promise`\<`void`\>

#### Defined in

[packages/api/src/public/migration/Cognite3DViewer.ts:691](https://github.com/cognitedata/reveal/blob/2acd9d17229d2bc8e309653b4d6a39ad941e44f1/viewer/packages/api/src/public/migration/Cognite3DViewer.ts#L691)

***

### worldToScreen()

> **worldToScreen**(`point`, `normalize`?): `null` \| `Vector2`

Convert a point in world space to its coordinates in the canvas. This can be used to place HTML objects near 3D objects on top of the 3D viewer.

#### Parameters

 **point**: `Vector3`

World space coordinate.

 **normalize?**: `boolean`

Optional. If true, coordinates are normalized into [0,1]. If false, the values are in the range [0, \<canvas_size\>).

#### Returns

`null` \| `Vector2`

Returns 2D coordinates if the point is visible on screen, or `null` if object is outside screen.

#### See

[https://www.w3schools.com/graphics/canvas_coordinates.asp](https://www.w3schools.com/graphics/canvas_coordinates.asp) For details on HTML Canvas Coordinates.

#### Example

```js
const boundingBoxCenter = new THREE.Vector3();
// Find center of bounding box in world space
model.getBoundingBox(nodeId).getCenter(boundingBoxCenter);
// Screen coordinates of that point
const screenCoordinates = viewer.worldToScreen(boundingBoxCenter);
```
```js
const boundingBoxCenter = new THREE.Vector3();
// Find center of bounding box in world space
model.getBoundingBox(nodeId).getCenter(boundingBoxCenter);
// Screen coordinates of that point normalized in the range [0,1]
const screenCoordinates = viewer.worldToScreen(boundingBoxCenter, true);
```
```js
const boundingBoxCenter = new THREE.Vector3();
// Find center of bounding box in world space
model.getBoundingBox(nodeId).getCenter(boundingBoxCenter);
// Screen coordinates of that point
const screenCoordinates = viewer.worldToScreen(boundingBoxCenter);
if (screenCoordinates == null) {
  // Object not visible on screen
} else {
  // Object is visible on screen
}
```

#### Defined in

[packages/api/src/public/migration/Cognite3DViewer.ts:1348](https://github.com/cognitedata/reveal/blob/2acd9d17229d2bc8e309653b4d6a39ad941e44f1/viewer/packages/api/src/public/migration/Cognite3DViewer.ts#L1348)


<!-- SOURCE_END: reveal/documentation\versioned_docs\version-4.x\api\@cognite\reveal\classes\Cognite3DViewer.md -->

================================================================================


<!-- SOURCE_START: reveal/documentation\versioned_docs\version-4.x\api\@cognite\reveal\classes\CogniteCadModel.md -->
## File: reveal/documentation\versioned_docs\version-4.x\api\@cognite\reveal\classes\CogniteCadModel.md

# Class: CogniteCadModel

Provides metadata needed to get asset mappings for a CDF 3D model

## Implements

- [`CdfModelNodeCollectionDataProvider`](../interfaces/CdfModelNodeCollectionDataProvider.md)

## Properties

### modelId

> `readonly` **modelId**: `number`

The CDF model ID of the model.

#### Implementation of

[`CdfModelNodeCollectionDataProvider`](../interfaces/CdfModelNodeCollectionDataProvider.md) . [`modelId`](../interfaces/CdfModelNodeCollectionDataProvider.md#modelid)

#### Defined in

[packages/cad-model/src/wrappers/CogniteCadModel.ts:77](https://github.com/cognitedata/reveal/blob/2acd9d17229d2bc8e309653b4d6a39ad941e44f1/viewer/packages/cad-model/src/wrappers/CogniteCadModel.ts#L77)

***

### revisionId

> `readonly` **revisionId**: `number`

The CDF revision ID of the model.

#### Implementation of

[`CdfModelNodeCollectionDataProvider`](../interfaces/CdfModelNodeCollectionDataProvider.md) . [`revisionId`](../interfaces/CdfModelNodeCollectionDataProvider.md#revisionid)

#### Defined in

[packages/cad-model/src/wrappers/CogniteCadModel.ts:81](https://github.com/cognitedata/reveal/blob/2acd9d17229d2bc8e309653b4d6a39ad941e44f1/viewer/packages/cad-model/src/wrappers/CogniteCadModel.ts#L81)

***

### type

> `readonly` **type**: [`SupportedModelTypes`](../type-aliases/SupportedModelTypes.md) = `'cad'`

#### Defined in

[packages/cad-model/src/wrappers/CogniteCadModel.ts:28](https://github.com/cognitedata/reveal/blob/2acd9d17229d2bc8e309653b4d6a39ad941e44f1/viewer/packages/cad-model/src/wrappers/CogniteCadModel.ts#L28)

## Accessors

### modelUnit

> `get` **modelUnit**(): `""` \| [`WellKnownUnit`](../type-aliases/WellKnownUnit.md)

Returns the unit the coordinates for the model is stored. Returns an empty string
if no unit has been stored.
Note that coordinates in Reveal always are converted to meters using [CogniteCadModel.modelUnitToMetersFactor](CogniteCadModel.md#modelunittometersfactor).

#### Returns

`""` \| [`WellKnownUnit`](../type-aliases/WellKnownUnit.md)

#### Defined in

[packages/cad-model/src/wrappers/CogniteCadModel.ts:42](https://github.com/cognitedata/reveal/blob/2acd9d17229d2bc8e309653b4d6a39ad941e44f1/viewer/packages/cad-model/src/wrappers/CogniteCadModel.ts#L42)

***

### modelUnitToMetersFactor

> `get` **modelUnitToMetersFactor**(): `undefined` \| `number`

Returns the conversion factor that converts from model coordinates to meters. Note that this can
return undefined if the model has been stored in an unsupported unit.

#### Returns

`undefined` \| `number`

#### Defined in

[packages/cad-model/src/wrappers/CogniteCadModel.ts:52](https://github.com/cognitedata/reveal/blob/2acd9d17229d2bc8e309653b4d6a39ad941e44f1/viewer/packages/cad-model/src/wrappers/CogniteCadModel.ts#L52)

***

### nodeCount

> `get` **nodeCount**(): `number`

Returns the number of nodes in the model.

#### Returns

`number`

#### Implementation of

[`CdfModelNodeCollectionDataProvider`](../interfaces/CdfModelNodeCollectionDataProvider.md) . [`nodeCount`](../interfaces/CdfModelNodeCollectionDataProvider.md#nodecount)

#### Defined in

[packages/cad-model/src/wrappers/CogniteCadModel.ts:541](https://github.com/cognitedata/reveal/blob/2acd9d17229d2bc8e309653b4d6a39ad941e44f1/viewer/packages/cad-model/src/wrappers/CogniteCadModel.ts#L541)

***

### styledNodeCollections

> `get` **styledNodeCollections**(): `object`[]

Returns all currently registered node collections and associated appearance.

#### Returns

`object`[]

#### Defined in

[packages/cad-model/src/wrappers/CogniteCadModel.ts:144](https://github.com/cognitedata/reveal/blob/2acd9d17229d2bc8e309653b4d6a39ad941e44f1/viewer/packages/cad-model/src/wrappers/CogniteCadModel.ts#L144)

***

### visible

> `get` **visible**(): `boolean`

Returns the model visibility.

> `set` **visible**(`value`): `void`

Sets the model visibility.

#### Example

```js
model.visible = false
```

#### Parameters

 **value**: `boolean`

#### Returns

`boolean`

#### Defined in

[packages/cad-model/src/wrappers/CogniteCadModel.ts:70](https://github.com/cognitedata/reveal/blob/2acd9d17229d2bc8e309653b4d6a39ad941e44f1/viewer/packages/cad-model/src/wrappers/CogniteCadModel.ts#L70)

## Methods

### assignStyledNodeCollection()

> **assignStyledNodeCollection**(`nodeCollection`, `appearance`, `importance`): `void`

Customizes rendering style for a set of nodes, e.g. to highlight, hide
or color code a set of 3D objects. This allows for custom look and feel
of the 3D model which is useful to highlight certain parts or to
color code the 3D model based on information (e.g. coloring the 3D model
by construction status).

The [NodeCollection](NodeCollection.md) can be updated dynamically and the rendered nodes will be
updated automatically as the styling changes. The appearance of the style nodes
cannot be changed.

When nodes are in several styled sets, the style is combined in the order
the sets were added, i.e. styled sets added late can overwrite styled sets added
early.

If the `nodeCollection` provided already has an assigned style, this style will
be replaced with style provided.

#### Parameters

 **nodeCollection**: [`NodeCollection`](NodeCollection.md)

Dynamic set of nodes to apply the provided appearance to.

 **appearance**: [`NodeAppearance`](../type-aliases/NodeAppearance.md)

Appearance to style the provided set with.

 **importance**: `number` = `0`

The importance of this style. Can be used to manually order the order of styles, this can avoid the order of adding styles affecting the outcome. Optional and defaults to 0.

#### Returns

`void`

#### Example

```js
model.setDefaultNodeAppearance({ rendererGhosted: true });
const visibleNodes = new TreeIndexNodeCollection(someTreeIndices);
model.assignStyledNodeCollection(visibleSet, { rendererGhosted: false });
```

#### Defined in

[packages/cad-model/src/wrappers/CogniteCadModel.ts:176](https://github.com/cognitedata/reveal/blob/2acd9d17229d2bc8e309653b4d6a39ad941e44f1/viewer/packages/cad-model/src/wrappers/CogniteCadModel.ts#L176)

***

### dispose()

> **dispose**(): `void`

Cleans up used resources.

#### Returns

`void`

#### Defined in

[packages/cad-model/src/wrappers/CogniteCadModel.ts:317](https://github.com/cognitedata/reveal/blob/2acd9d17229d2bc8e309653b4d6a39ad941e44f1/viewer/packages/cad-model/src/wrappers/CogniteCadModel.ts#L317)

***

### getAncestorTreeIndices()

> **getAncestorTreeIndices**(`treeIndex`, `generation`): `Promise` \<[`NumericRange`](NumericRange.md)\>

Determines the tree index range of a subtree of an ancestor of the provided
node defined by a tree index.

#### Parameters

 **treeIndex**: `number`

Tree index of node to find ancestor tree index range for.

 **generation**: `number`

What "generation" to find. 0 is the node itself,
1 means parent, 2 means grandparent etc. If the node doesn't have as many
ancestors, the root of the model is returned. This can be determined by checking
that the range returned includes 0.

#### Returns

`Promise` \<[`NumericRange`](NumericRange.md)\>

Tree index range of the subtree spanned by the ancestor at the
"generation" specified, or the root.

#### Defined in

[packages/cad-model/src/wrappers/CogniteCadModel.ts:341](https://github.com/cognitedata/reveal/blob/2acd9d17229d2bc8e309653b4d6a39ad941e44f1/viewer/packages/cad-model/src/wrappers/CogniteCadModel.ts#L341)

***

### getBoundingBoxByNodeId()

> **getBoundingBoxByNodeId**(`nodeId`, `box`?): `Promise`\<`Box3`\>

Fetches a bounding box from the CDF by the nodeId.

#### Parameters

 **nodeId**: `number`

 **box?**: `Box3`

Optional. Used to write result to.

#### Returns

`Promise`\<`Box3`\>

#### Example

```js
const box = new THREE.Box3()
const nodeId = 100500;
await model.getBoundingBoxByNodeId(nodeId, box);
// box now has the bounding box
```
```js
// the following code does the same
const box = await model.getBoundingBoxByNodeId(nodeId);
```

#### Defined in

[packages/cad-model/src/wrappers/CogniteCadModel.ts:471](https://github.com/cognitedata/reveal/blob/2acd9d17229d2bc8e309653b4d6a39ad941e44f1/viewer/packages/cad-model/src/wrappers/CogniteCadModel.ts#L471)

***

### getBoundingBoxByTreeIndex()

> **getBoundingBoxByTreeIndex**(`treeIndex`, `box`?): `Promise`\<`Box3`\>

Determine the bounding box of the node identified by the tree index provided. Note that this
function uses the CDF API to look up the bounding box.

#### Parameters

 **treeIndex**: `number`

Tree index of the node to find bounding box for.

 **box?**: `Box3`

Optional preallocated container to hold the bounding box.

#### Returns

`Promise`\<`Box3`\>

#### Example

```js
const box = new THREE.Box3()
const treeIndex = 42;
await model.getBoundingBoxByTreeIndex(treeIndex, box);
// box now has the bounding box
```
```js
// the following code does the same
const box = await model.getBoundingBoxByTreeIndex(treeIndex);
```

#### Defined in

[packages/cad-model/src/wrappers/CogniteCadModel.ts:517](https://github.com/cognitedata/reveal/blob/2acd9d17229d2bc8e309653b4d6a39ad941e44f1/viewer/packages/cad-model/src/wrappers/CogniteCadModel.ts#L517)

***

### getBoundingBoxesByNodeIds()

> **getBoundingBoxesByNodeIds**(`nodeIds`): `Promise`\<`Box3`[]\>

Fetches a bounding box from the CDF by a list of nodeIds.

#### Parameters

 **nodeIds**: `number`[]

#### Returns

`Promise`\<`Box3`[]\>

#### Example

```js
const box = await model.getBoundingBoxByNodeIds([158239, 192837]);
```

#### Defined in

[packages/cad-model/src/wrappers/CogniteCadModel.ts:486](https://github.com/cognitedata/reveal/blob/2acd9d17229d2bc8e309653b4d6a39ad941e44f1/viewer/packages/cad-model/src/wrappers/CogniteCadModel.ts#L486)

***

### getCameraConfiguration()

> **getCameraConfiguration**(): `undefined` \| [`CameraConfiguration`](../type-aliases/CameraConfiguration.md)

Retrieves the camera position and target stored for the model. Typically this
is used to store a good starting position for a model. Returns `undefined` if there
isn't any stored camera configuration for the model.

#### Returns

`undefined` \| [`CameraConfiguration`](../type-aliases/CameraConfiguration.md)

#### Defined in

[packages/cad-model/src/wrappers/CogniteCadModel.ts:388](https://github.com/cognitedata/reveal/blob/2acd9d17229d2bc8e309653b4d6a39ad941e44f1/viewer/packages/cad-model/src/wrappers/CogniteCadModel.ts#L388)

***

### getCdfToDefaultModelTransformation()

> **getCdfToDefaultModelTransformation**(`out`?): `Matrix4`

Gets transformation from CDF space to ThreeJS space,
which includes any additional "default" transformations assigned to this model.
Does not include any custom transformations set by [CogniteCadModel.setModelTransformation](CogniteCadModel.md#setmodeltransformation)

#### Parameters

 **out?**: `Matrix4`

Preallocated `THREE.Matrix4` (optional)

#### Returns

`Matrix4`

#### Implementation of

[`CdfModelNodeCollectionDataProvider`](../interfaces/CdfModelNodeCollectionDataProvider.md) . [`getCdfToDefaultModelTransformation`](../interfaces/CdfModelNodeCollectionDataProvider.md#getcdftodefaultmodeltransformation)

#### Defined in

[packages/cad-model/src/wrappers/CogniteCadModel.ts:431](https://github.com/cognitedata/reveal/blob/2acd9d17229d2bc8e309653b4d6a39ad941e44f1/viewer/packages/cad-model/src/wrappers/CogniteCadModel.ts#L431)

***

### getDefaultNodeAppearance()

> **getDefaultNodeAppearance**(): [`NodeAppearance`](../type-aliases/NodeAppearance.md)

Gets the default appearance for nodes that are not styled using
[CogniteCadModel.assignStyledNodeCollection](CogniteCadModel.md#assignstylednodecollection).

#### Returns

[`NodeAppearance`](../type-aliases/NodeAppearance.md)

#### Defined in

[packages/cad-model/src/wrappers/CogniteCadModel.ts:137](https://github.com/cognitedata/reveal/blob/2acd9d17229d2bc8e309653b4d6a39ad941e44f1/viewer/packages/cad-model/src/wrappers/CogniteCadModel.ts#L137)

***

### getModelBoundingBox()

> **getModelBoundingBox**(`outBoundingBox`?, `restrictToMostGeometry`?): `Box3`

Determines the full bounding box of the model.

#### Parameters

 **outBoundingBox?**: `Box3`

Optional. Used to write result to.

 **restrictToMostGeometry?**: `boolean`

Optional. When true, returned bounds are restricted to
where most of the geometry is located. This is useful for models that have junk geometry
located far from the "main" model. Added in version 1.3.0.

#### Returns

`Box3`

Model bounding box.

#### Example

```js
const boundingBox = new THREE.Box3()
model.getModelBoundingBox(boundingBox);
// boundingBox now has the bounding box
```
```js
// the following code does the same
const boundingBox = model.getModelBoundingBox();
```

#### Defined in

[packages/cad-model/src/wrappers/CogniteCadModel.ts:372](https://github.com/cognitedata/reveal/blob/2acd9d17229d2bc8e309653b4d6a39ad941e44f1/viewer/packages/cad-model/src/wrappers/CogniteCadModel.ts#L372)

***

### getModelClippingPlanes()

> **getModelClippingPlanes**(): `Plane`[]

Get the clipping planes for this model.

#### Returns

`Plane`[]

#### Defined in

[packages/cad-model/src/wrappers/CogniteCadModel.ts:421](https://github.com/cognitedata/reveal/blob/2acd9d17229d2bc8e309653b4d6a39ad941e44f1/viewer/packages/cad-model/src/wrappers/CogniteCadModel.ts#L421)

***

### getModelTransformation()

> **getModelTransformation**(`out`?): `Matrix4`

Gets transformation matrix that has previously been set with [CogniteCadModel.setModelTransformation](CogniteCadModel.md#setmodeltransformation).

#### Parameters

 **out?**: `Matrix4`

Preallocated `THREE.Matrix4` (optional).

#### Returns

`Matrix4`

#### Implementation of

[`CdfModelNodeCollectionDataProvider`](../interfaces/CdfModelNodeCollectionDataProvider.md) . [`getModelTransformation`](../interfaces/CdfModelNodeCollectionDataProvider.md#getmodeltransformation)

#### Defined in

[packages/cad-model/src/wrappers/CogniteCadModel.ts:406](https://github.com/cognitedata/reveal/blob/2acd9d17229d2bc8e309653b4d6a39ad941e44f1/viewer/packages/cad-model/src/wrappers/CogniteCadModel.ts#L406)

***

### getSubtreeTreeIndices()

> **getSubtreeTreeIndices**(`treeIndex`): `Promise` \<[`NumericRange`](NumericRange.md)\>

Determines the range of tree indices for a given subtree.

#### Parameters

 **treeIndex**: `number`

Index of the root of the subtree to get the index range for.

#### Returns

`Promise` \<[`NumericRange`](NumericRange.md)\>

#### Defined in

[packages/cad-model/src/wrappers/CogniteCadModel.ts:325](https://github.com/cognitedata/reveal/blob/2acd9d17229d2bc8e309653b4d6a39ad941e44f1/viewer/packages/cad-model/src/wrappers/CogniteCadModel.ts#L325)

***

### iterateNodesByTreeIndex()

> **iterateNodesByTreeIndex**(`action`): `Promise`\<`void`\>

Iterates over all nodes in the model and applies the provided action to each node (identified by tree index).
The passed action is applied incrementally to avoid main thread blocking, meaning that the changes can be partially
applied until promise is resolved (iteration is done).

#### Parameters

 **action**

Function that will be called with a treeIndex argument.

#### Returns

`Promise`\<`void`\>

Promise that is resolved once the iteration is done.

#### Example

```js
const logIndex = (treeIndex) => console.log(treeIndex);
await model.iterateNodesByTreeIndex(logIndex); // 0, 1, 2, ...
```

#### Defined in

[packages/cad-model/src/wrappers/CogniteCadModel.ts:534](https://github.com/cognitedata/reveal/blob/2acd9d17229d2bc8e309653b4d6a39ad941e44f1/viewer/packages/cad-model/src/wrappers/CogniteCadModel.ts#L534)

***

### iterateSubtreeByTreeIndex()

> **iterateSubtreeByTreeIndex**(`treeIndex`, `action`): `Promise`\<`void`\>

Iterates over all nodes in a subtree of the model and applies the provided action to each node
(identified by tree index). The provided node is included in the visited set.  The passed action
is applied incrementally to avoid main thread blocking, meaning that the changes can be partially
applied until promise is resolved (iteration is done).

#### Parameters

 **treeIndex**: `number`

Tree index of the top parent of the subtree.

 **action**

Function that will be called with a treeIndex argument.

#### Returns

`Promise`\<`void`\>

Promise that is resolved once the iteration is done.

#### Example

```js
// make a subtree to be gray
await model.iterateNodesByTreeIndex(treeIndex => {
  model.setNodeColorByTreeIndex(treeIndex, 127, 127, 127);
});
```

#### Defined in

[packages/cad-model/src/wrappers/CogniteCadModel.ts:561](https://github.com/cognitedata/reveal/blob/2acd9d17229d2bc8e309653b4d6a39ad941e44f1/viewer/packages/cad-model/src/wrappers/CogniteCadModel.ts#L561)

***

### mapBoxFromCdfToModelCoordinates()

> **mapBoxFromCdfToModelCoordinates**(`box`, `out`): `Box3`

Map bounding box from CDF to model space, taking the model's custom transformation into account

#### Parameters

 **box**: `Box3`

Box to compute transformation from

 **out**: `Box3` = `...`

Optional pre-allocated box

#### Returns

`Box3`

#### Defined in

[packages/cad-model/src/wrappers/CogniteCadModel.ts:450](https://github.com/cognitedata/reveal/blob/2acd9d17229d2bc8e309653b4d6a39ad941e44f1/viewer/packages/cad-model/src/wrappers/CogniteCadModel.ts#L450)

***

### mapNodeIdToTreeIndex()

> **mapNodeIdToTreeIndex**(`nodeId`): `Promise`\<`number`\>

Maps a single node ID to tree index. This is useful when you e.g. have a
node ID from an asset mapping and want to highlight the given asset using
[CogniteCadModel.mapNodeIdsToTreeIndices](CogniteCadModel.md#mapnodeidstotreeindices) is recommended for better performance when
mapping multiple IDs.

#### Parameters

 **nodeId**: `number`

A Node ID to map to a tree index.

#### Returns

`Promise`\<`number`\>

TreeIndex of the provided node.

#### Throws

If an invalid/non-existant node ID is provided the function throws an error.

#### Defined in

[packages/cad-model/src/wrappers/CogniteCadModel.ts:589](https://github.com/cognitedata/reveal/blob/2acd9d17229d2bc8e309653b4d6a39ad941e44f1/viewer/packages/cad-model/src/wrappers/CogniteCadModel.ts#L589)

***

### mapNodeIdsToTreeIndices()

> **mapNodeIdsToTreeIndices**(`nodeIds`): `Promise`\<`number`[]\>

Maps a list of Node IDs to tree indices. This function is useful when you have
a list of nodes, e.g. from Asset Mappings, that you want to highlight, hide,
color etc in the viewer.

#### Parameters

 **nodeIds**: `number`[]

List of node IDs to map to tree indices.

#### Returns

`Promise`\<`number`[]\>

A list of tree indices corresponing to the elements in the input.

#### Throws

If an invalid/non-existant node ID is provided the function throws an error.

#### Defined in

[packages/cad-model/src/wrappers/CogniteCadModel.ts:575](https://github.com/cognitedata/reveal/blob/2acd9d17229d2bc8e309653b4d6a39ad941e44f1/viewer/packages/cad-model/src/wrappers/CogniteCadModel.ts#L575)

***

### mapPointFromCdfToModelCoordinates()

> **mapPointFromCdfToModelCoordinates**(`point`, `out`): `Vector3`

Map point from CDF to model space, taking the model's custom transformation into account

#### Parameters

 **point**: `Vector3`

Point to compute transformation from

 **out**: `Vector3` = `...`

Optional pre-allocated point

#### Returns

`Vector3`

#### Defined in

[packages/cad-model/src/wrappers/CogniteCadModel.ts:440](https://github.com/cognitedata/reveal/blob/2acd9d17229d2bc8e309653b4d6a39ad941e44f1/viewer/packages/cad-model/src/wrappers/CogniteCadModel.ts#L440)

***

### mapTreeIndexToNodeId()

> **mapTreeIndexToNodeId**(`treeIndex`): `Promise`\<`number`\>

Maps a single tree index to node ID for use with the API. If you have multiple
tree indices to map, [CogniteCadModel.mapNodeIdsToTreeIndices](CogniteCadModel.md#mapnodeidstotreeindices) is recommended for better
performance.

#### Parameters

 **treeIndex**: `number`

A tree index to map to a Node ID.

#### Returns

`Promise`\<`number`\>

TreeIndex of the provided node.

#### Throws

If an invalid/non-existent node ID is provided the function throws an error.

#### Defined in

[packages/cad-model/src/wrappers/CogniteCadModel.ts:615](https://github.com/cognitedata/reveal/blob/2acd9d17229d2bc8e309653b4d6a39ad941e44f1/viewer/packages/cad-model/src/wrappers/CogniteCadModel.ts#L615)

***

### mapTreeIndicesToNodeIds()

> **mapTreeIndicesToNodeIds**(`treeIndices`): `Promise`\<`number`[]\>

Maps a list of tree indices to node IDs for use with the Cognite SDK.
This function is useful if you have a list of tree indices, e.g. from
[CogniteCadModel.iterateSubtreeByTreeIndex](CogniteCadModel.md#iteratesubtreebytreeindex), and want to perform
some operations on these nodes using the SDK.

#### Parameters

 **treeIndices**: `number`[]

Tree indices to map to node IDs.

#### Returns

`Promise`\<`number`[]\>

A list of node IDs corresponding to the elements of the input.

#### Throws

If an invalid tree index is provided the function throws an error.

#### Defined in

[packages/cad-model/src/wrappers/CogniteCadModel.ts:603](https://github.com/cognitedata/reveal/blob/2acd9d17229d2bc8e309653b4d6a39ad941e44f1/viewer/packages/cad-model/src/wrappers/CogniteCadModel.ts#L603)

***

### removeAllStyledNodeCollections()

> **removeAllStyledNodeCollections**(): `void`

Removes all styled collections, resetting the appearance of all nodes to the
default appearance.

#### Returns

`void`

#### Defined in

[packages/cad-model/src/wrappers/CogniteCadModel.ts:209](https://github.com/cognitedata/reveal/blob/2acd9d17229d2bc8e309653b4d6a39ad941e44f1/viewer/packages/cad-model/src/wrappers/CogniteCadModel.ts#L209)

***

### resetNodeTransform()

> **resetNodeTransform**(`treeIndices`): `void`

Resets the transformation for the nodes given.

#### Parameters

 **treeIndices**: [`NumericRange`](NumericRange.md)

Tree indices of the nodes to reset transforms for.

#### Returns

`void`

#### Defined in

[packages/cad-model/src/wrappers/CogniteCadModel.ts:295](https://github.com/cognitedata/reveal/blob/2acd9d17229d2bc8e309653b4d6a39ad941e44f1/viewer/packages/cad-model/src/wrappers/CogniteCadModel.ts#L295)

***

### resetNodeTransformByTreeIndex()

> **resetNodeTransformByTreeIndex**(`treeIndex`, `applyToChildren`): `Promise`\<`number`\>

Remove override transform of the node by tree index.

#### Parameters

 **treeIndex**: `number`

 **applyToChildren**: `boolean` = `true`

#### Returns

`Promise`\<`number`\>

#### Defined in

[packages/cad-model/src/wrappers/CogniteCadModel.ts:308](https://github.com/cognitedata/reveal/blob/2acd9d17229d2bc8e309653b4d6a39ad941e44f1/viewer/packages/cad-model/src/wrappers/CogniteCadModel.ts#L308)

***

### setDefaultNodeAppearance()

> **setDefaultNodeAppearance**(`appearance`): `void`

Sets the default appearance for nodes that are not styled using
[CogniteCadModel.assignStyledNodeCollection](CogniteCadModel.md#assignstylednodecollection). Updating the default style can be an
expensive operation, so use with care.

#### Parameters

 **appearance**: [`NodeAppearance`](../type-aliases/NodeAppearance.md)

Default node appearance.

#### Returns

`void`

#### Defined in

[packages/cad-model/src/wrappers/CogniteCadModel.ts:129](https://github.com/cognitedata/reveal/blob/2acd9d17229d2bc8e309653b4d6a39ad941e44f1/viewer/packages/cad-model/src/wrappers/CogniteCadModel.ts#L129)

***

### setModelClippingPlanes()

> **setModelClippingPlanes**(`clippingPlanes`): `void`

Sets the clipping planes for this model. They will be combined with the
global clipping planes.

#### Parameters

 **clippingPlanes**: `Plane`[]

#### Returns

`void`

#### Defined in

[packages/cad-model/src/wrappers/CogniteCadModel.ts:414](https://github.com/cognitedata/reveal/blob/2acd9d17229d2bc8e309653b4d6a39ad941e44f1/viewer/packages/cad-model/src/wrappers/CogniteCadModel.ts#L414)

***

### setModelTransformation()

> **setModelTransformation**(`matrix`): `void`

Sets transformation matrix of the model. This overrides the current transformation.

#### Parameters

 **matrix**: `Matrix4`

Transformation matrix.

#### Returns

`void`

#### Defined in

[packages/cad-model/src/wrappers/CogniteCadModel.ts:396](https://github.com/cognitedata/reveal/blob/2acd9d17229d2bc8e309653b4d6a39ad941e44f1/viewer/packages/cad-model/src/wrappers/CogniteCadModel.ts#L396)

***

### setNodeTransform()

> **setNodeTransform**(`treeIndices`, `transformMatrix`, `boundingBox`?, `space`?): `void`

Apply a transformation matrix to the tree indices given, changing
rotation, scale and/or position.

Note that setting multiple transformations for the same
node isn't supported and might lead to undefined results.

#### Parameters

 **treeIndices**: [`NumericRange`](NumericRange.md)

Tree indices of nodes to apply the transformation to.

 **transformMatrix**: `Matrix4`

Transformation to apply.

 **boundingBox?**: `Box3`

Optional bounding box for the nodes before any transformation is applied. If given, it is assumed that all the nodes' geometry fit inside.

 **space?**: `"model"` \| `"world"` = `'world'`

Space to apply the transformation in. Defaults to 'world'.

#### Returns

`void`

#### Defined in

[packages/cad-model/src/wrappers/CogniteCadModel.ts:225](https://github.com/cognitedata/reveal/blob/2acd9d17229d2bc8e309653b4d6a39ad941e44f1/viewer/packages/cad-model/src/wrappers/CogniteCadModel.ts#L225)

***

### setNodeTransformByTreeIndex()

> **setNodeTransformByTreeIndex**(`treeIndex`, `transform`, `applyToChildren`, `space`): `Promise`\<`number`\>

Set override transform of the node by tree index.

#### Parameters

 **treeIndex**: `number`

 **transform**: `Matrix4`

 **applyToChildren**: `boolean` = `true`

 **space**: `"model"` \| `"world"` = `'world'`

#### Returns

`Promise`\<`number`\>

#### Defined in

[packages/cad-model/src/wrappers/CogniteCadModel.ts:279](https://github.com/cognitedata/reveal/blob/2acd9d17229d2bc8e309653b4d6a39ad941e44f1/viewer/packages/cad-model/src/wrappers/CogniteCadModel.ts#L279)

***

### unassignStyledNodeCollection()

> **unassignStyledNodeCollection**(`nodeCollection`): `void`

Removes styling for previously added styled collection, resetting the style to the default (or
the style imposed by other styled collections).

#### Parameters

 **nodeCollection**: [`NodeCollection`](NodeCollection.md)

Node collection previously added using [CogniteCadModel.assignStyledNodeCollection](CogniteCadModel.md#assignstylednodecollection).

#### Returns

`void`

#### Throws

Error if node collection isn't assigned to the model.

#### Defined in

[packages/cad-model/src/wrappers/CogniteCadModel.ts:195](https://github.com/cognitedata/reveal/blob/2acd9d17229d2bc8e309653b4d6a39ad941e44f1/viewer/packages/cad-model/src/wrappers/CogniteCadModel.ts#L195)


<!-- SOURCE_END: reveal/documentation\versioned_docs\version-4.x\api\@cognite\reveal\classes\CogniteCadModel.md -->

================================================================================


<!-- SOURCE_START: reveal/documentation\versioned_docs\version-4.x\api\@cognite\reveal\classes\CognitePointCloudModel.md -->
## File: reveal/documentation\versioned_docs\version-4.x\api\@cognite\reveal\classes\CognitePointCloudModel.md

# Class: CognitePointCloudModel

## Properties

### modelId

> `readonly` **modelId**: `number`

#### Defined in

[packages/pointclouds/src/CognitePointCloudModel.ts:30](https://github.com/cognitedata/reveal/blob/2acd9d17229d2bc8e309653b4d6a39ad941e44f1/viewer/packages/pointclouds/src/CognitePointCloudModel.ts#L30)

***

### revisionId

> `readonly` **revisionId**: `number`

The modelId of the point cloud model in Cognite Data Fusion.

#### Defined in

[packages/pointclouds/src/CognitePointCloudModel.ts:34](https://github.com/cognitedata/reveal/blob/2acd9d17229d2bc8e309653b4d6a39ad941e44f1/viewer/packages/pointclouds/src/CognitePointCloudModel.ts#L34)

***

### type

> `readonly` **type**: [`SupportedModelTypes`](../type-aliases/SupportedModelTypes.md) = `'pointcloud'`

#### Defined in

[packages/pointclouds/src/CognitePointCloudModel.ts:29](https://github.com/cognitedata/reveal/blob/2acd9d17229d2bc8e309653b4d6a39ad941e44f1/viewer/packages/pointclouds/src/CognitePointCloudModel.ts#L29)

## Accessors

### pointColorType

> `get` **pointColorType**(): [`PointColorType`](../enumerations/PointColorType.md)

Determines how points currently are colored.

> `set` **pointColorType**(`type`): `void`

Specifies how points are colored.

#### Default

```ts
PointColorType.Rgb
```

#### Example

```js
model.pointColorType = PointColorType.Rgb
```

#### Parameters

 **type**: [`PointColorType`](../enumerations/PointColorType.md)

#### Returns

[`PointColorType`](../enumerations/PointColorType.md)

#### Defined in

[packages/pointclouds/src/CognitePointCloudModel.ts:186](https://github.com/cognitedata/reveal/blob/2acd9d17229d2bc8e309653b4d6a39ad941e44f1/viewer/packages/pointclouds/src/CognitePointCloudModel.ts#L186)

***

### pointShape

> `get` **pointShape**(): [`PointShape`](../enumerations/PointShape.md)

Sets the point shape of each rendered point in the point cloud.

#### Default

`PointShape.Circle`

#### See

[PointShape](../enumerations/PointShape.md).

> `set` **pointShape**(`shape`): `void`

Gets the point shape of each rendered point in the point cloud.

#### See

[PointShape](../enumerations/PointShape.md).

#### Parameters

 **shape**: [`PointShape`](../enumerations/PointShape.md)

#### Returns

[`PointShape`](../enumerations/PointShape.md)

#### Defined in

[packages/pointclouds/src/CognitePointCloudModel.ts:238](https://github.com/cognitedata/reveal/blob/2acd9d17229d2bc8e309653b4d6a39ad941e44f1/viewer/packages/pointclouds/src/CognitePointCloudModel.ts#L238)

***

### pointSize

> `get` **pointSize**(): `number`

Returns the size of each rendered point in the point cloud.

> `set` **pointSize**(`size`): `void`

Sets the size of each rendered point in the point cloud.

#### Default

`1`

#### Parameters

 **size**: `number`

#### Returns

`number`

#### Defined in

[packages/pointclouds/src/CognitePointCloudModel.ts:205](https://github.com/cognitedata/reveal/blob/2acd9d17229d2bc8e309653b4d6a39ad941e44f1/viewer/packages/pointclouds/src/CognitePointCloudModel.ts#L205)

***

### pointSizeType

> `get` **pointSizeType**(): [`PointSizeType`](../enumerations/PointSizeType.md)

Get the point size type.

> `set` **pointSizeType**(`type`): `void`

Set the point size type for the point cloud.
The point size type can be either Fixed or Adaptive.

#### Default

`PointSizeType.Adaptive`

#### Parameters

 **type**: [`PointSizeType`](../enumerations/PointSizeType.md)

#### Returns

[`PointSizeType`](../enumerations/PointSizeType.md)

#### Defined in

[packages/pointclouds/src/CognitePointCloudModel.ts:220](https://github.com/cognitedata/reveal/blob/2acd9d17229d2bc8e309653b4d6a39ad941e44f1/viewer/packages/pointclouds/src/CognitePointCloudModel.ts#L220)

***

### stylableObjectCount

> `get` **stylableObjectCount**(): `number`

#### Returns

`number`

The number of stylable objects

#### Defined in

[packages/pointclouds/src/CognitePointCloudModel.ts:358](https://github.com/cognitedata/reveal/blob/2acd9d17229d2bc8e309653b4d6a39ad941e44f1/viewer/packages/pointclouds/src/CognitePointCloudModel.ts#L358)

***

### styledCollections

> `get` **styledCollections**(): [`StyledPointCloudObjectCollection`](StyledPointCloudObjectCollection.md)[]

Gets the object collections that have been assigned a style

#### Returns

[`StyledPointCloudObjectCollection`](StyledPointCloudObjectCollection.md)[]

All object collections and their associated style

#### Defined in

[packages/pointclouds/src/CognitePointCloudModel.ts:303](https://github.com/cognitedata/reveal/blob/2acd9d17229d2bc8e309653b4d6a39ad941e44f1/viewer/packages/pointclouds/src/CognitePointCloudModel.ts#L303)

***

### visible

> `get` **visible**(): `boolean`

Returns the model visibility.

> `set` **visible**(`value`): `void`

Sets the model visibility.

#### Example

```js
model.visible = false
```

#### Parameters

 **value**: `boolean`

#### Returns

`boolean`

#### Defined in

[packages/pointclouds/src/CognitePointCloudModel.ts:264](https://github.com/cognitedata/reveal/blob/2acd9d17229d2bc8e309653b4d6a39ad941e44f1/viewer/packages/pointclouds/src/CognitePointCloudModel.ts#L264)

***

### visiblePointCount

> `get` **visiblePointCount**(): `number`

Returns the current number of visible/loaded points.

#### Returns

`number`

#### Defined in

[packages/pointclouds/src/CognitePointCloudModel.ts:179](https://github.com/cognitedata/reveal/blob/2acd9d17229d2bc8e309653b4d6a39ad941e44f1/viewer/packages/pointclouds/src/CognitePointCloudModel.ts#L179)

## Methods

### assignStyledObjectCollection()

> **assignStyledObjectCollection**(`objectCollection`, `appearance`): `void`

Assign a style to a collection of objects. If the object collection has been assigned
a style previously, the previous style will be replaced by the new one.

#### Parameters

 **objectCollection**: [`PointCloudObjectCollection`](PointCloudObjectCollection.md)

The object collection to assign a style to

 **appearance**: [`PointCloudAppearance`](../type-aliases/PointCloudAppearance.md)

The style to assign to the object collection

#### Returns

`void`

#### Defined in

[packages/pointclouds/src/CognitePointCloudModel.ts:313](https://github.com/cognitedata/reveal/blob/2acd9d17229d2bc8e309653b4d6a39ad941e44f1/viewer/packages/pointclouds/src/CognitePointCloudModel.ts#L313)

***

### dispose()

> **dispose**(): `void`

Used to clean up memory.

#### Returns

`void`

#### Defined in

[packages/pointclouds/src/CognitePointCloudModel.ts:58](https://github.com/cognitedata/reveal/blob/2acd9d17229d2bc8e309653b4d6a39ad941e44f1/viewer/packages/pointclouds/src/CognitePointCloudModel.ts#L58)

***

### getCameraConfiguration()

> **getCameraConfiguration**(): `undefined` \| [`CameraConfiguration`](../type-aliases/CameraConfiguration.md)

Retrieves the camera position and target stored for the model. Typically this
is used to store a good starting position for a model. Returns `undefined` if there
isn't any stored camera configuration for the model.

#### Returns

`undefined` \| [`CameraConfiguration`](../type-aliases/CameraConfiguration.md)

#### Defined in

[packages/pointclouds/src/CognitePointCloudModel.ts:84](https://github.com/cognitedata/reveal/blob/2acd9d17229d2bc8e309653b4d6a39ad941e44f1/viewer/packages/pointclouds/src/CognitePointCloudModel.ts#L84)

***

### getCdfToDefaultModelTransformation()

> **getCdfToDefaultModelTransformation**(`out`?): `Matrix4`

Gets transformation from CDF space to ThreeJS space,
which includes any additional "default" transformations assigned to this model.
Does not include any custom transformations set by [CognitePointCloudModel.setModelTransformation](CognitePointCloudModel.md#setmodeltransformation)

#### Parameters

 **out?**: `Matrix4`

Preallocated `THREE.Matrix4` (optional)

#### Returns

`Matrix4`

#### Defined in

[packages/pointclouds/src/CognitePointCloudModel.ts:111](https://github.com/cognitedata/reveal/blob/2acd9d17229d2bc8e309653b4d6a39ad941e44f1/viewer/packages/pointclouds/src/CognitePointCloudModel.ts#L111)

***

### getClasses()

> **getClasses**(): `object`[]

Returns a list of sorted classification names and codes present in the model.
Names will be the custom names provided by the user, or a default one if none have been provided.

#### Returns

`object`[]

A sorted list of classification codes and names from the model.

#### Defined in

[packages/pointclouds/src/CognitePointCloudModel.ts:172](https://github.com/cognitedata/reveal/blob/2acd9d17229d2bc8e309653b4d6a39ad941e44f1/viewer/packages/pointclouds/src/CognitePointCloudModel.ts#L172)

***

### getDefaultPointCloudAppearance()

> **getDefaultPointCloudAppearance**(): [`PointCloudAppearance`](../type-aliases/PointCloudAppearance.md)

Gets default point appearance

#### Returns

[`PointCloudAppearance`](../type-aliases/PointCloudAppearance.md)

#### Defined in

[packages/pointclouds/src/CognitePointCloudModel.ts:286](https://github.com/cognitedata/reveal/blob/2acd9d17229d2bc8e309653b4d6a39ad941e44f1/viewer/packages/pointclouds/src/CognitePointCloudModel.ts#L286)

***

### getModelBoundingBox()

> **getModelBoundingBox**(`outBoundingBox`?): `Box3`

#### Parameters

 **outBoundingBox?**: `Box3`

Optional. Used to write result to.

#### Returns

`Box3`

Model's bounding box.

#### Example

```js
const boundingBox = new THREE.Box3()
model.getModelBoundingBox(boundingBox);
// boundingBox now has the bounding box
```
```js
// the following code does the same
const boundingBox = model.getModelBoundingBox();
```

#### Defined in

[packages/pointclouds/src/CognitePointCloudModel.ts:75](https://github.com/cognitedata/reveal/blob/2acd9d17229d2bc8e309653b4d6a39ad941e44f1/viewer/packages/pointclouds/src/CognitePointCloudModel.ts#L75)

***

### getModelClippingPlanes()

> **getModelClippingPlanes**(): `Plane`[]

Get the clipping planes for this model.

#### Returns

`Plane`[]

#### Defined in

[packages/pointclouds/src/CognitePointCloudModel.ts:279](https://github.com/cognitedata/reveal/blob/2acd9d17229d2bc8e309653b4d6a39ad941e44f1/viewer/packages/pointclouds/src/CognitePointCloudModel.ts#L279)

***

### getModelTransformation()

> **getModelTransformation**(`out`?): `Matrix4`

Gets transformation matrix that has previously been
set with [CognitePointCloudModel.setModelTransformation](CognitePointCloudModel.md#setmodeltransformation).

#### Parameters

 **out?**: `Matrix4`

Preallocated `THREE.Matrix4` (optional).

#### Returns

`Matrix4`

#### Defined in

[packages/pointclouds/src/CognitePointCloudModel.ts:101](https://github.com/cognitedata/reveal/blob/2acd9d17229d2bc8e309653b4d6a39ad941e44f1/viewer/packages/pointclouds/src/CognitePointCloudModel.ts#L101)

***

### hasClass()

> **hasClass**(`pointClass`): `boolean`

Returns true if the model has values with the given classification class.

#### Parameters

 **pointClass**: `number`

ASPRS classification class code. Either one of the well known
classes from [WellKnownAsprsPointClassCodes](../enumerations/WellKnownAsprsPointClassCodes.md) or a number for user defined classes.

#### Returns

`boolean`

True if model has values in the class given.

#### Defined in

[packages/pointclouds/src/CognitePointCloudModel.ts:163](https://github.com/cognitedata/reveal/blob/2acd9d17229d2bc8e309653b4d6a39ad941e44f1/viewer/packages/pointclouds/src/CognitePointCloudModel.ts#L163)

***

### isClassVisible()

> **isClassVisible**(`pointClass`): `boolean`

Determines if points from a given class are visible.

#### Parameters

 **pointClass**: `number`

ASPRS classification class code. Either one of the well known
classes from [WellKnownAsprsPointClassCodes](../enumerations/WellKnownAsprsPointClassCodes.md) or a number for user defined classes.

#### Returns

`boolean`

True if points from the given class will be visible.

#### Throws

Error if the model doesn't have the class given.

#### Defined in

[packages/pointclouds/src/CognitePointCloudModel.ts:153](https://github.com/cognitedata/reveal/blob/2acd9d17229d2bc8e309653b4d6a39ad941e44f1/viewer/packages/pointclouds/src/CognitePointCloudModel.ts#L153)

***

### mapBoxFromCdfToModelCoordinates()

> **mapBoxFromCdfToModelCoordinates**(`box`, `out`): `Box3`

Map bounding box from CDF to model space, taking the model's custom transformation into account

#### Parameters

 **box**: `Box3`

Box to compute transformation from

 **out**: `Box3` = `...`

Optional pre-allocated box

#### Returns

`Box3`

#### Defined in

[packages/pointclouds/src/CognitePointCloudModel.ts:130](https://github.com/cognitedata/reveal/blob/2acd9d17229d2bc8e309653b4d6a39ad941e44f1/viewer/packages/pointclouds/src/CognitePointCloudModel.ts#L130)

***

### mapPointFromCdfToModelCoordinates()

> **mapPointFromCdfToModelCoordinates**(`point`, `out`): `Vector3`

Map point from CDF to model space, taking the model's custom transformation into account

#### Parameters

 **point**: `Vector3`

Point to compute transformation from

 **out**: `Vector3` = `...`

Optional pre-allocated point

#### Returns

`Vector3`

#### Defined in

[packages/pointclouds/src/CognitePointCloudModel.ts:120](https://github.com/cognitedata/reveal/blob/2acd9d17229d2bc8e309653b4d6a39ad941e44f1/viewer/packages/pointclouds/src/CognitePointCloudModel.ts#L120)

***

### removeAllStyledObjectCollections()

> **removeAllStyledObjectCollections**(): `void`

Removes styling on all object collections in this model

#### Returns

`void`

#### Defined in

[packages/pointclouds/src/CognitePointCloudModel.ts:350](https://github.com/cognitedata/reveal/blob/2acd9d17229d2bc8e309653b4d6a39ad941e44f1/viewer/packages/pointclouds/src/CognitePointCloudModel.ts#L350)

***

### setClassVisible()

> **setClassVisible**(`pointClass`, `visible`): `void`

Sets a visible filter on points of a given class.

#### Parameters

 **pointClass**: `number`

ASPRS classification class code. Either one of the well known
classes from [WellKnownAsprsPointClassCodes](../enumerations/WellKnownAsprsPointClassCodes.md) or a number for user defined classes.

 **visible**: `boolean`

Boolean flag that determines if the point class type should be visible or not.

#### Returns

`void`

#### Throws

Error if the model doesn't have the class given.

#### Defined in

[packages/pointclouds/src/CognitePointCloudModel.ts:142](https://github.com/cognitedata/reveal/blob/2acd9d17229d2bc8e309653b4d6a39ad941e44f1/viewer/packages/pointclouds/src/CognitePointCloudModel.ts#L142)

***

### setDefaultPointCloudAppearance()

> **setDefaultPointCloudAppearance**(`appearance`): `void`

Sets default apparance for points that are not styled otherwise

#### Parameters

 **appearance**: [`PointCloudAppearance`](../type-aliases/PointCloudAppearance.md)

Appearance to assign as default

#### Returns

`void`

#### Defined in

[packages/pointclouds/src/CognitePointCloudModel.ts:294](https://github.com/cognitedata/reveal/blob/2acd9d17229d2bc8e309653b4d6a39ad941e44f1/viewer/packages/pointclouds/src/CognitePointCloudModel.ts#L294)

***

### setModelClippingPlanes()

> **setModelClippingPlanes**(`clippingPlanes`): `void`

Sets the clipping planes for this model. They will be combined with the
global clipping planes.

#### Parameters

 **clippingPlanes**: `Plane`[]

#### Returns

`void`

#### Defined in

[packages/pointclouds/src/CognitePointCloudModel.ts:272](https://github.com/cognitedata/reveal/blob/2acd9d17229d2bc8e309653b4d6a39ad941e44f1/viewer/packages/pointclouds/src/CognitePointCloudModel.ts#L272)

***

### setModelTransformation()

> **setModelTransformation**(`transformationMatrix`): `void`

Sets transformation matrix of the model. This overrides the current transformation.

#### Parameters

 **transformationMatrix**: `Matrix4`

The new transformation matrix

#### Returns

`void`

#### Defined in

[packages/pointclouds/src/CognitePointCloudModel.ts:92](https://github.com/cognitedata/reveal/blob/2acd9d17229d2bc8e309653b4d6a39ad941e44f1/viewer/packages/pointclouds/src/CognitePointCloudModel.ts#L92)

***

### traverseStylableObjects()

> **traverseStylableObjects**(`callback`): `void`

Iterates through all stylable objects for this model

#### Parameters

 **callback**

#### Returns

`void`

#### Example

```js
model.traverseStylableObjects(
    annotationMetadata => console.log(annotationMetadata.annotationId)
);
```

#### Defined in

[packages/pointclouds/src/CognitePointCloudModel.ts:371](https://github.com/cognitedata/reveal/blob/2acd9d17229d2bc8e309653b4d6a39ad941e44f1/viewer/packages/pointclouds/src/CognitePointCloudModel.ts#L371)

***

### unassignStyledObjectCollection()

> **unassignStyledObjectCollection**(`objectCollection`): `void`

Unassign style from an already styled object collection.

#### Parameters

 **objectCollection**: [`PointCloudObjectCollection`](PointCloudObjectCollection.md)

The object collection from which to remove the style

#### Returns

`void`

#### Defined in

[packages/pointclouds/src/CognitePointCloudModel.ts:331](https://github.com/cognitedata/reveal/blob/2acd9d17229d2bc8e309653b4d6a39ad941e44f1/viewer/packages/pointclouds/src/CognitePointCloudModel.ts#L331)


<!-- SOURCE_END: reveal/documentation\versioned_docs\version-4.x\api\@cognite\reveal\classes\CognitePointCloudModel.md -->

================================================================================


<!-- SOURCE_START: reveal/documentation\versioned_docs\version-4.x\api\@cognite\reveal\classes\CombineNodeCollectionBase.md -->
## File: reveal/documentation\versioned_docs\version-4.x\api\@cognite\reveal\classes\CombineNodeCollectionBase.md

# Class: `abstract` CombineNodeCollectionBase

Node collection that combines the result from multiple underlying node collections.

## Extends

- [`NodeCollection`](NodeCollection.md)

## Extended by

- [`IntersectionNodeCollection`](IntersectionNodeCollection.md)
- [`UnionNodeCollection`](UnionNodeCollection.md)

## Constructors

### new CombineNodeCollectionBase()

> **new CombineNodeCollectionBase**(`classToken`, `nodeCollections`?): [`CombineNodeCollectionBase`](CombineNodeCollectionBase.md)

#### Parameters

 **classToken**: `string`

 **nodeCollections?**: [`NodeCollection`](NodeCollection.md)[]

#### Returns

[`CombineNodeCollectionBase`](CombineNodeCollectionBase.md)

#### Overrides

`NodeCollection.constructor`

#### Defined in

[packages/cad-styling/src/CombineNodeCollectionBase.ts:17](https://github.com/cognitedata/reveal/blob/2acd9d17229d2bc8e309653b4d6a39ad941e44f1/viewer/packages/cad-styling/src/CombineNodeCollectionBase.ts#L17)

## Accessors

### classToken

> `get` **classToken**(): `string`

#### Returns

`string`

#### Inherited from

[`NodeCollection`](NodeCollection.md) . [`classToken`](NodeCollection.md#classtoken)

#### Defined in

[packages/cad-styling/src/NodeCollection.ts:23](https://github.com/cognitedata/reveal/blob/2acd9d17229d2bc8e309653b4d6a39ad941e44f1/viewer/packages/cad-styling/src/NodeCollection.ts#L23)

***

### isLoading

> `get` **isLoading**(): `boolean`

**`Override`**

#### Returns

`boolean`

#### Overrides

[`NodeCollection`](NodeCollection.md) . [`isLoading`](NodeCollection.md#isloading)

#### Defined in

[packages/cad-styling/src/CombineNodeCollectionBase.ts:67](https://github.com/cognitedata/reveal/blob/2acd9d17229d2bc8e309653b4d6a39ad941e44f1/viewer/packages/cad-styling/src/CombineNodeCollectionBase.ts#L67)

## Methods

### add()

> **add**(`nodeCollection`): `void`

#### Parameters

 **nodeCollection**: [`NodeCollection`](NodeCollection.md)

#### Returns

`void`

#### Defined in

[packages/cad-styling/src/CombineNodeCollectionBase.ts:26](https://github.com/cognitedata/reveal/blob/2acd9d17229d2bc8e309653b4d6a39ad941e44f1/viewer/packages/cad-styling/src/CombineNodeCollectionBase.ts#L26)

***

### clear()

> **clear**(): `void`

Clears all underlying node collections.

#### Returns

`void`

#### Overrides

[`NodeCollection`](NodeCollection.md) . [`clear`](NodeCollection.md#clear)

#### Defined in

[packages/cad-styling/src/CombineNodeCollectionBase.ts:46](https://github.com/cognitedata/reveal/blob/2acd9d17229d2bc8e309653b4d6a39ad941e44f1/viewer/packages/cad-styling/src/CombineNodeCollectionBase.ts#L46)

***

### getAreas()

> `abstract` **getAreas**(): [`AreaCollection`](../interfaces/AreaCollection.md)

Returns areas surrounding the nodes in the collection. The areas
are boxes in "ThreeJS coordinates". Note that not all
implementations supports this.

#### Returns

[`AreaCollection`](../interfaces/AreaCollection.md)

#### Overrides

[`NodeCollection`](NodeCollection.md) . [`getAreas`](NodeCollection.md#getareas)

#### Defined in

[packages/cad-styling/src/CombineNodeCollectionBase.ts:73](https://github.com/cognitedata/reveal/blob/2acd9d17229d2bc8e309653b4d6a39ad941e44f1/viewer/packages/cad-styling/src/CombineNodeCollectionBase.ts#L73)

***

### getIndexSet()

> **getIndexSet**(): [`IndexSet`](IndexSet.md)

**`Override`**

#### Returns

[`IndexSet`](IndexSet.md)

#### Overrides

[`NodeCollection`](NodeCollection.md) . [`getIndexSet`](NodeCollection.md#getindexset)

#### Defined in

[packages/cad-styling/src/CombineNodeCollectionBase.ts:59](https://github.com/cognitedata/reveal/blob/2acd9d17229d2bc8e309653b4d6a39ad941e44f1/viewer/packages/cad-styling/src/CombineNodeCollectionBase.ts#L59)

***

### off()

> **off**(`event`, `listener`): `void`

#### Parameters

 **event**: `"changed"`

 **listener**

#### Returns

`void`

#### Inherited from

[`NodeCollection`](NodeCollection.md) . [`off`](NodeCollection.md#off)

#### Defined in

[packages/cad-styling/src/NodeCollection.ts:32](https://github.com/cognitedata/reveal/blob/2acd9d17229d2bc8e309653b4d6a39ad941e44f1/viewer/packages/cad-styling/src/NodeCollection.ts#L32)

***

### on()

> **on**(`event`, `listener`): `void`

#### Parameters

 **event**: `"changed"`

 **listener**

#### Returns

`void`

#### Inherited from

[`NodeCollection`](NodeCollection.md) . [`on`](NodeCollection.md#on)

#### Defined in

[packages/cad-styling/src/NodeCollection.ts:27](https://github.com/cognitedata/reveal/blob/2acd9d17229d2bc8e309653b4d6a39ad941e44f1/viewer/packages/cad-styling/src/NodeCollection.ts#L27)

***

### remove()

> **remove**(`nodeCollection`): `void`

#### Parameters

 **nodeCollection**: [`NodeCollection`](NodeCollection.md)

#### Returns

`void`

#### Defined in

[packages/cad-styling/src/CombineNodeCollectionBase.ts:32](https://github.com/cognitedata/reveal/blob/2acd9d17229d2bc8e309653b4d6a39ad941e44f1/viewer/packages/cad-styling/src/CombineNodeCollectionBase.ts#L32)

***

### serialize()

> `abstract` **serialize**(): [`SerializedNodeCollection`](../type-aliases/SerializedNodeCollection.md)

#### Returns

[`SerializedNodeCollection`](../type-aliases/SerializedNodeCollection.md)

#### Overrides

[`NodeCollection`](NodeCollection.md) . [`serialize`](NodeCollection.md#serialize)

#### Defined in

[packages/cad-styling/src/CombineNodeCollectionBase.ts:71](https://github.com/cognitedata/reveal/blob/2acd9d17229d2bc8e309653b4d6a39ad941e44f1/viewer/packages/cad-styling/src/CombineNodeCollectionBase.ts#L71)


<!-- SOURCE_END: reveal/documentation\versioned_docs\version-4.x\api\@cognite\reveal\classes\CombineNodeCollectionBase.md -->

================================================================================


<!-- SOURCE_START: reveal/documentation\versioned_docs\version-4.x\api\@cognite\reveal\classes\ComboControls.md -->
## File: reveal/documentation\versioned_docs\version-4.x\api\@cognite\reveal\classes\ComboControls.md

# Class: ComboControls

## Extends

- `EventDispatcher` \<[`ComboControlsEventType`](../type-aliases/ComboControlsEventType.md)\>

## Constructors

### new ComboControls()

> **new ComboControls**(`camera`, `domElement`): [`ComboControls`](ComboControls.md)

#### Parameters

 **camera**: `PerspectiveCamera` \| `OrthographicCamera`

 **domElement**: `HTMLElement`

#### Returns

[`ComboControls`](ComboControls.md)

#### Overrides

`EventDispatcher<ComboControlsEventType>.constructor`

#### Defined in

[packages/camera-manager/src/ComboControls.ts:68](https://github.com/cognitedata/reveal/blob/2acd9d17229d2bc8e309653b4d6a39ad941e44f1/viewer/packages/camera-manager/src/ComboControls.ts#L68)

## Properties

### dispose()

> **dispose**: () => `void`

#### Returns

`void`

#### Defined in

[packages/camera-manager/src/ComboControls.ts:38](https://github.com/cognitedata/reveal/blob/2acd9d17229d2bc8e309653b4d6a39ad941e44f1/viewer/packages/camera-manager/src/ComboControls.ts#L38)

## Accessors

### cameraRawRotation

> `get` **cameraRawRotation**(): `Quaternion`

Camera rotation to be used by the camera instead of target-based rotation.
This rotation is used only when set to non-default quaternion value (not identity rotation quaternion).
Externally, value is updated by `CameraManager` when `setState` method with non-zero rotation is called. Automatically
resets to default value when `setState` method is called with no rotation value.

#### Returns

`Quaternion`

#### Defined in

[packages/camera-manager/src/ComboControls.ts:130](https://github.com/cognitedata/reveal/blob/2acd9d17229d2bc8e309653b4d6a39ad941e44f1/viewer/packages/camera-manager/src/ComboControls.ts#L130)

***

### enabled

> `get` **enabled**(): `boolean`

Returns true if these controls are enabled.

> `set` **enabled**(`newEnabledValue`): `void`

Sets the enabled state of these controls.

#### Parameters

 **newEnabledValue**: `boolean`

#### Returns

`boolean`

#### Defined in

[packages/camera-manager/src/ComboControls.ts:108](https://github.com/cognitedata/reveal/blob/2acd9d17229d2bc8e309653b4d6a39ad941e44f1/viewer/packages/camera-manager/src/ComboControls.ts#L108)

***

### options

> `get` **options**(): `Readonly` \<[`ComboControlsOptions`](../type-aliases/ComboControlsOptions.md)\>

Gets current Combo Controls options.

> `set` **options**(`options`): `void`

Sets Combo Controls options.

Only the provided options will be changed, any undefined options will be kept as is.

#### Parameters

 **options**: `Partial` \<[`ComboControlsOptions`](../type-aliases/ComboControlsOptions.md)\>

#### Returns

`Readonly` \<[`ComboControlsOptions`](../type-aliases/ComboControlsOptions.md)\>

#### Defined in

[packages/camera-manager/src/ComboControls.ts:92](https://github.com/cognitedata/reveal/blob/2acd9d17229d2bc8e309653b4d6a39ad941e44f1/viewer/packages/camera-manager/src/ComboControls.ts#L92)

## Methods

### getScrollTarget()

> **getScrollTarget**(): `Vector3`

#### Returns

`Vector3`

#### Defined in

[packages/camera-manager/src/ComboControls.ts:138](https://github.com/cognitedata/reveal/blob/2acd9d17229d2bc8e309653b4d6a39ad941e44f1/viewer/packages/camera-manager/src/ComboControls.ts#L138)

***

### getState()

> **getState**(): `object`

#### Returns

`object`

##### position

> **position**: `Vector3`

##### target

> **target**: `Vector3`

#### Defined in

[packages/camera-manager/src/ComboControls.ts:142](https://github.com/cognitedata/reveal/blob/2acd9d17229d2bc8e309653b4d6a39ad941e44f1/viewer/packages/camera-manager/src/ComboControls.ts#L142)

***

### setScrollTarget()

> **setScrollTarget**(`target`): `void`

#### Parameters

 **target**: `Vector3`

#### Returns

`void`

#### Defined in

[packages/camera-manager/src/ComboControls.ts:149](https://github.com/cognitedata/reveal/blob/2acd9d17229d2bc8e309653b4d6a39ad941e44f1/viewer/packages/camera-manager/src/ComboControls.ts#L149)

***

### setState()

> **setState**(`position`, `target`): `void`

#### Parameters

 **position**: `Vector3`

 **target**: `Vector3`

#### Returns

`void`

#### Defined in

[packages/camera-manager/src/ComboControls.ts:153](https://github.com/cognitedata/reveal/blob/2acd9d17229d2bc8e309653b4d6a39ad941e44f1/viewer/packages/camera-manager/src/ComboControls.ts#L153)

***

### setViewTarget()

> **setViewTarget**(`target`): `void`

#### Parameters

 **target**: `Vector3`

#### Returns

`void`

#### Defined in

[packages/camera-manager/src/ComboControls.ts:164](https://github.com/cognitedata/reveal/blob/2acd9d17229d2bc8e309653b4d6a39ad941e44f1/viewer/packages/camera-manager/src/ComboControls.ts#L164)

***

### triggerCameraChangeEvent()

> **triggerCameraChangeEvent**(): `void`

#### Returns

`void`

#### Defined in

[packages/camera-manager/src/ComboControls.ts:260](https://github.com/cognitedata/reveal/blob/2acd9d17229d2bc8e309653b4d6a39ad941e44f1/viewer/packages/camera-manager/src/ComboControls.ts#L260)

***

### update()

> **update**(`deltaTimeS`, `forceUpdate`): `boolean`

#### Parameters

 **deltaTimeS**: `number`

 **forceUpdate**: `boolean` = `false`

#### Returns

`boolean`

#### Defined in

[packages/camera-manager/src/ComboControls.ts:197](https://github.com/cognitedata/reveal/blob/2acd9d17229d2bc8e309653b4d6a39ad941e44f1/viewer/packages/camera-manager/src/ComboControls.ts#L197)


<!-- SOURCE_END: reveal/documentation\versioned_docs\version-4.x\api\@cognite\reveal\classes\ComboControls.md -->

================================================================================


<!-- SOURCE_START: reveal/documentation\versioned_docs\version-4.x\api\@cognite\reveal\classes\CustomObject.md -->
## File: reveal/documentation\versioned_docs\version-4.x\api\@cognite\reveal\classes\CustomObject.md

# Class: CustomObject

**`Beta`**

This class encasulate a Object3D, and made it possible to add flags to it.
It might be extended with more flags in the future.

## Implements

- [`ICustomObject`](../interfaces/ICustomObject.md)

## Constructors

### new CustomObject()

> **new CustomObject**(`object`): [`CustomObject`](CustomObject.md)

**`Beta`**

Constructor

#### Parameters

 **object**: `Object3D`\<`Object3DEventMap`\>

#### Returns

[`CustomObject`](CustomObject.md)

#### Defined in

[packages/utilities/src/customObject/CustomObject.ts:26](https://github.com/cognitedata/reveal/blob/2acd9d17229d2bc8e309653b4d6a39ad941e44f1/viewer/packages/utilities/src/customObject/CustomObject.ts#L26)

## Accessors

### isPartOfBoundingBox

> `get` **isPartOfBoundingBox**(): `boolean`

**`Beta`**

Set or get whether it should be part of the combined bounding box or not.
Default is true.

> `set` **isPartOfBoundingBox**(`value`): `void`

**`Beta`**

#### Parameters

 **value**: `boolean`

#### Returns

`boolean`

#### Implementation of

[`ICustomObject`](../interfaces/ICustomObject.md) . [`isPartOfBoundingBox`](../interfaces/ICustomObject.md#ispartofboundingbox)

#### Defined in

[packages/utilities/src/customObject/CustomObject.ts:43](https://github.com/cognitedata/reveal/blob/2acd9d17229d2bc8e309653b4d6a39ad941e44f1/viewer/packages/utilities/src/customObject/CustomObject.ts#L43)

***

### object

> `get` **object**(): `Object3D`\<`Object3DEventMap`\>

**`Beta`**

Get the Object3D

#### Returns

`Object3D`\<`Object3DEventMap`\>

#### Implementation of

[`ICustomObject`](../interfaces/ICustomObject.md) . [`object`](../interfaces/ICustomObject.md#object)

#### Defined in

[packages/utilities/src/customObject/CustomObject.ts:34](https://github.com/cognitedata/reveal/blob/2acd9d17229d2bc8e309653b4d6a39ad941e44f1/viewer/packages/utilities/src/customObject/CustomObject.ts#L34)

***

### shouldPick

> `get` **shouldPick**(): `boolean`

**`Beta`**

Set or get whether it should be picked by the camera manager
Default is false.

> `set` **shouldPick**(`value`): `void`

**`Beta`**

#### Parameters

 **value**: `boolean`

#### Returns

`boolean`

#### Implementation of

[`ICustomObject`](../interfaces/ICustomObject.md) . [`shouldPick`](../interfaces/ICustomObject.md#shouldpick)

#### Defined in

[packages/utilities/src/customObject/CustomObject.ts:56](https://github.com/cognitedata/reveal/blob/2acd9d17229d2bc8e309653b4d6a39ad941e44f1/viewer/packages/utilities/src/customObject/CustomObject.ts#L56)

***

### shouldPickBoundingBox

> `get` **shouldPickBoundingBox**(): `boolean`

**`Beta`**

Set or get whether it should be also give the bounding box when picked by the camera
Default is false.

> `set` **shouldPickBoundingBox**(`value`): `void`

**`Beta`**

#### Parameters

 **value**: `boolean`

#### Returns

`boolean`

#### Implementation of

[`ICustomObject`](../interfaces/ICustomObject.md) . [`shouldPickBoundingBox`](../interfaces/ICustomObject.md#shouldpickboundingbox)

#### Defined in

[packages/utilities/src/customObject/CustomObject.ts:69](https://github.com/cognitedata/reveal/blob/2acd9d17229d2bc8e309653b4d6a39ad941e44f1/viewer/packages/utilities/src/customObject/CustomObject.ts#L69)

***

### useDepthTest

> `get` **useDepthTest**(): `boolean`

**`Beta`**

Get whether it should be rendered with depth test (on top on other objects)
Default is true.

> `set` **useDepthTest**(`value`): `void`

**`Beta`**

#### Parameters

 **value**: `boolean`

#### Returns

`boolean`

#### Implementation of

[`ICustomObject`](../interfaces/ICustomObject.md) . [`useDepthTest`](../interfaces/ICustomObject.md#usedepthtest)

#### Defined in

[packages/utilities/src/customObject/CustomObject.ts:82](https://github.com/cognitedata/reveal/blob/2acd9d17229d2bc8e309653b4d6a39ad941e44f1/viewer/packages/utilities/src/customObject/CustomObject.ts#L82)

## Methods

### beforeRender()

> **beforeRender**(`_camera`): `void`

**`Beta`**

This method is called before rendering of the custom object

#### Parameters

 **\_camera**: `PerspectiveCamera`

#### Returns

`void`

#### Implementation of

[`ICustomObject`](../interfaces/ICustomObject.md) . [`beforeRender`](../interfaces/ICustomObject.md#beforerender)

#### Defined in

[packages/utilities/src/customObject/CustomObject.ts:139](https://github.com/cognitedata/reveal/blob/2acd9d17229d2bc8e309653b4d6a39ad941e44f1/viewer/packages/utilities/src/customObject/CustomObject.ts#L139)

***

### getBoundingBox()

> **getBoundingBox**(`target`): `Box3`

**`Beta`**

Get the bounding box from the object

#### Parameters

 **target**: `Box3`

#### Returns

`Box3`

#### Implementation of

[`ICustomObject`](../interfaces/ICustomObject.md) . [`getBoundingBox`](../interfaces/ICustomObject.md#getboundingbox)

#### Defined in

[packages/utilities/src/customObject/CustomObject.ts:94](https://github.com/cognitedata/reveal/blob/2acd9d17229d2bc8e309653b4d6a39ad941e44f1/viewer/packages/utilities/src/customObject/CustomObject.ts#L94)

***

### intersectIfCloser()

> **intersectIfCloser**(`intersectInput`, `closestDistance`): `undefined` \| [`CustomObjectIntersection`](../type-aliases/CustomObjectIntersection.md)

**`Beta`**

Intersect the object with the raycaster.
This function can be overridden to provide custom intersection logic.

#### Parameters

 **intersectInput**: [`CustomObjectIntersectInput`](CustomObjectIntersectInput.md)

 **closestDistance**: `undefined` \| `number`

#### Returns

`undefined` \| [`CustomObjectIntersection`](../type-aliases/CustomObjectIntersection.md)

#### Implementation of

[`ICustomObject`](../interfaces/ICustomObject.md) . [`intersectIfCloser`](../interfaces/ICustomObject.md#intersectifcloser)

#### Defined in

[packages/utilities/src/customObject/CustomObject.ts:104](https://github.com/cognitedata/reveal/blob/2acd9d17229d2bc8e309653b4d6a39ad941e44f1/viewer/packages/utilities/src/customObject/CustomObject.ts#L104)


<!-- SOURCE_END: reveal/documentation\versioned_docs\version-4.x\api\@cognite\reveal\classes\CustomObject.md -->

================================================================================


<!-- SOURCE_START: reveal/documentation\versioned_docs\version-4.x\api\@cognite\reveal\classes\CustomObjectIntersectInput.md -->
## File: reveal/documentation\versioned_docs\version-4.x\api\@cognite\reveal\classes\CustomObjectIntersectInput.md

# Class: CustomObjectIntersectInput

**`Beta`**

This class is used as input for intersecting custom objects

## Constructors

### new CustomObjectIntersectInput()

> **new CustomObjectIntersectInput**(`normalizedCoords`, `camera`, `clippingPlanes`): [`CustomObjectIntersectInput`](CustomObjectIntersectInput.md)

**`Beta`**

#### Parameters

 **normalizedCoords**: `Vector2`

 **camera**: `PerspectiveCamera`

 **clippingPlanes**: `undefined` \| `Plane`[] = `undefined`

#### Returns

[`CustomObjectIntersectInput`](CustomObjectIntersectInput.md)

#### Defined in

[packages/utilities/src/customObject/CustomObjectIntersectInput.ts:18](https://github.com/cognitedata/reveal/blob/2acd9d17229d2bc8e309653b4d6a39ad941e44f1/viewer/packages/utilities/src/customObject/CustomObjectIntersectInput.ts#L18)

## Properties

### camera

> `readonly` **camera**: `PerspectiveCamera`

**`Beta`**

#### Defined in

[packages/utilities/src/customObject/CustomObjectIntersectInput.ts:14](https://github.com/cognitedata/reveal/blob/2acd9d17229d2bc8e309653b4d6a39ad941e44f1/viewer/packages/utilities/src/customObject/CustomObjectIntersectInput.ts#L14)

***

### clippingPlanes

> `readonly` **clippingPlanes**: `undefined` \| `Plane`[]

**`Beta`**

#### Defined in

[packages/utilities/src/customObject/CustomObjectIntersectInput.ts:15](https://github.com/cognitedata/reveal/blob/2acd9d17229d2bc8e309653b4d6a39ad941e44f1/viewer/packages/utilities/src/customObject/CustomObjectIntersectInput.ts#L15)

***

### normalizedCoords

> `readonly` **normalizedCoords**: `Vector2`

**`Beta`**

#### Defined in

[packages/utilities/src/customObject/CustomObjectIntersectInput.ts:13](https://github.com/cognitedata/reveal/blob/2acd9d17229d2bc8e309653b4d6a39ad941e44f1/viewer/packages/utilities/src/customObject/CustomObjectIntersectInput.ts#L13)

***

### raycaster

> `readonly` **raycaster**: `Raycaster`

**`Beta`**

#### Defined in

[packages/utilities/src/customObject/CustomObjectIntersectInput.ts:16](https://github.com/cognitedata/reveal/blob/2acd9d17229d2bc8e309653b4d6a39ad941e44f1/viewer/packages/utilities/src/customObject/CustomObjectIntersectInput.ts#L16)

## Methods

### isVisible()

> **isVisible**(`point`): `boolean`

**`Beta`**

#### Parameters

 **point**: `Vector3`

#### Returns

`boolean`

#### Defined in

[packages/utilities/src/customObject/CustomObjectIntersectInput.ts:25](https://github.com/cognitedata/reveal/blob/2acd9d17229d2bc8e309653b4d6a39ad941e44f1/viewer/packages/utilities/src/customObject/CustomObjectIntersectInput.ts#L25)


<!-- SOURCE_END: reveal/documentation\versioned_docs\version-4.x\api\@cognite\reveal\classes\CustomObjectIntersectInput.md -->

================================================================================


<!-- SOURCE_START: reveal/documentation\versioned_docs\version-4.x\api\@cognite\reveal\classes\DebouncedCameraStopEventTrigger.md -->
## File: reveal/documentation\versioned_docs\version-4.x\api\@cognite\reveal\classes\DebouncedCameraStopEventTrigger.md

# Class: DebouncedCameraStopEventTrigger

Simple helper class to trigger a stop event whenever a camera manager's
camera hasn't changed for a little while.

## Constructors

### new DebouncedCameraStopEventTrigger()

> **new DebouncedCameraStopEventTrigger**(`cameraManager`, `debounceTimeMs`): [`DebouncedCameraStopEventTrigger`](DebouncedCameraStopEventTrigger.md)

#### Parameters

 **cameraManager**: [`CameraManager`](../interfaces/CameraManager.md)

 **debounceTimeMs**: `number` = `100`

#### Returns

[`DebouncedCameraStopEventTrigger`](DebouncedCameraStopEventTrigger.md)

#### Defined in

[packages/camera-manager/src/utils/DebouncedCameraStopEventTrigger.ts:21](https://github.com/cognitedata/reveal/blob/2acd9d17229d2bc8e309653b4d6a39ad941e44f1/viewer/packages/camera-manager/src/utils/DebouncedCameraStopEventTrigger.ts#L21)

## Methods

### dispose()

> **dispose**(): `void`

Deallocate resources associated with this object

#### Returns

`void`

#### Defined in

[packages/camera-manager/src/utils/DebouncedCameraStopEventTrigger.ts:45](https://github.com/cognitedata/reveal/blob/2acd9d17229d2bc8e309653b4d6a39ad941e44f1/viewer/packages/camera-manager/src/utils/DebouncedCameraStopEventTrigger.ts#L45)

***

### subscribe()

> **subscribe**(`callback`): `void`

Subscribe to the stop events generated by this trigger

#### Parameters

 **callback**: [`CameraStopDelegate`](../type-aliases/CameraStopDelegate.md)

#### Returns

`void`

#### Defined in

[packages/camera-manager/src/utils/DebouncedCameraStopEventTrigger.ts:31](https://github.com/cognitedata/reveal/blob/2acd9d17229d2bc8e309653b4d6a39ad941e44f1/viewer/packages/camera-manager/src/utils/DebouncedCameraStopEventTrigger.ts#L31)

***

### unsubscribe()

> **unsubscribe**(`callback`): `void`

Unsubscribe from the stop events

#### Parameters

 **callback**: [`CameraStopDelegate`](../type-aliases/CameraStopDelegate.md)

#### Returns

`void`

#### Defined in

[packages/camera-manager/src/utils/DebouncedCameraStopEventTrigger.ts:38](https://github.com/cognitedata/reveal/blob/2acd9d17229d2bc8e309653b4d6a39ad941e44f1/viewer/packages/camera-manager/src/utils/DebouncedCameraStopEventTrigger.ts#L38)


<!-- SOURCE_END: reveal/documentation\versioned_docs\version-4.x\api\@cognite\reveal\classes\DebouncedCameraStopEventTrigger.md -->

================================================================================


<!-- SOURCE_START: reveal/documentation\versioned_docs\version-4.x\api\@cognite\reveal\classes\DefaultCameraManager.md -->
## File: reveal/documentation\versioned_docs\version-4.x\api\@cognite\reveal\classes\DefaultCameraManager.md

# Class: DefaultCameraManager

Default implementation of [CameraManager](../interfaces/CameraManager.md). Uses target-based orbit controls combined with
keyboard and mouse navigation possibility. Supports automatic update of camera near and far
planes and animated change of camera position and target.

## Implements

- [`CameraManager`](../interfaces/CameraManager.md)

## Properties

### automaticControlsSensitivity

> **automaticControlsSensitivity**: `boolean` = `true`

When false, the sensitivity of the camera controls will not be updated automatically.
This can be useful to better control the sensitivity of the 3D navigation.

When not set, control the sensitivity of the camera using `viewer.cameraManager.cameraControls.minDistance`
and `viewer.cameraManager.cameraControls.maxDistance`.

#### Defined in

[packages/camera-manager/src/DefaultCameraManager.ts:108](https://github.com/cognitedata/reveal/blob/2acd9d17229d2bc8e309653b4d6a39ad941e44f1/viewer/packages/camera-manager/src/DefaultCameraManager.ts#L108)

***

### automaticNearFarPlane

> **automaticNearFarPlane**: `boolean` = `true`

When false, camera near and far planes will not be updated automatically (defaults to true).
This can be useful when you have custom content in the 3D view and need to better
control the view frustum.

When automatic camera near/far planes are disabled, you are responsible for setting
this on your own.

#### Example

```
viewer.camera.near = 0.1;
viewer.camera.far = 1000.0;
viewer.camera.updateProjectionMatrix();
```

#### Defined in

[packages/camera-manager/src/DefaultCameraManager.ts:100](https://github.com/cognitedata/reveal/blob/2acd9d17229d2bc8e309653b4d6a39ad941e44f1/viewer/packages/camera-manager/src/DefaultCameraManager.ts#L100)

## Accessors

### keyboardNavigationEnabled

> `get` **keyboardNavigationEnabled**(): `boolean`

Whether keyboard control of the camera is enabled/disabled.

> `set` **keyboardNavigationEnabled**(`enabled`): `void`

Sets whether keyboard control of the camera is enabled/disabled.

#### Parameters

 **enabled**: `boolean`

#### Returns

`boolean`

#### Defined in

[packages/camera-manager/src/DefaultCameraManager.ts:194](https://github.com/cognitedata/reveal/blob/2acd9d17229d2bc8e309653b4d6a39ad941e44f1/viewer/packages/camera-manager/src/DefaultCameraManager.ts#L194)

## Methods

### activate()

> **activate**(`cameraManager`?): `void`

Set this manager as active and enable controls.

Should update CameraManager.enabled to reflect the state of the manager.
Note that this is called automatically when a new CameraManager is set on the viewer.

#### Parameters

 **cameraManager?**: [`CameraManager`](../interfaces/CameraManager.md)

Previously used camera manager.

#### Returns

`void`

#### Implementation of

[`CameraManager`](../interfaces/CameraManager.md) . [`activate`](../interfaces/CameraManager.md#activate)

#### Defined in

[packages/camera-manager/src/DefaultCameraManager.ts:237](https://github.com/cognitedata/reveal/blob/2acd9d17229d2bc8e309653b4d6a39ad941e44f1/viewer/packages/camera-manager/src/DefaultCameraManager.ts#L237)

***

### deactivate()

> **deactivate**(): `void`

Deactivate this manager and disable controls.

Should update CameraManager.enabled to reflect the state of the manager.
Note that this is called automatically when a new CameraManager is set on the viewer.

#### Returns

`void`

#### Implementation of

[`CameraManager`](../interfaces/CameraManager.md) . [`deactivate`](../interfaces/CameraManager.md#deactivate)

#### Defined in

[packages/camera-manager/src/DefaultCameraManager.ts:251](https://github.com/cognitedata/reveal/blob/2acd9d17229d2bc8e309653b4d6a39ad941e44f1/viewer/packages/camera-manager/src/DefaultCameraManager.ts#L251)

***

### dispose()

> **dispose**(): `void`

#### Returns

`void`

#### Implementation of

[`CameraManager`](../interfaces/CameraManager.md) . [`dispose`](../interfaces/CameraManager.md#dispose)

#### Obvious

#### Defined in

[packages/camera-manager/src/DefaultCameraManager.ts:289](https://github.com/cognitedata/reveal/blob/2acd9d17229d2bc8e309653b4d6a39ad941e44f1/viewer/packages/camera-manager/src/DefaultCameraManager.ts#L289)

***

### fitCameraToBoundingBox()

> **fitCameraToBoundingBox**(`box`, `duration`?, `radiusFactor`?): `void`

Moves camera to a place where the content of a bounding box is visible to the camera.

#### Parameters

 **box**: `Box3`

The bounding box in world space.

 **duration?**: `number`

The duration of the animation moving the camera.

 **radiusFactor?**: `number` = `2`

The ratio of the distance from camera to center of box and radius of the box.

#### Returns

`void`

#### Implementation of

[`CameraManager`](../interfaces/CameraManager.md) . [`fitCameraToBoundingBox`](../interfaces/CameraManager.md#fitcameratoboundingbox)

#### Defined in

[packages/camera-manager/src/DefaultCameraManager.ts:164](https://github.com/cognitedata/reveal/blob/2acd9d17229d2bc8e309653b4d6a39ad941e44f1/viewer/packages/camera-manager/src/DefaultCameraManager.ts#L164)

***

### getCamera()

> **getCamera**(): `PerspectiveCamera`

Returns the camera used for rendering the viewer.
Note that the camera will not be modified directly by Reveal.
Implementations must trigger the `cameraChange`-event whenever the
camera changes.

#### Returns

`PerspectiveCamera`

#### Implementation of

[`CameraManager`](../interfaces/CameraManager.md) . [`getCamera`](../interfaces/CameraManager.md#getcamera)

#### Defined in

[packages/camera-manager/src/DefaultCameraManager.ts:198](https://github.com/cognitedata/reveal/blob/2acd9d17229d2bc8e309653b4d6a39ad941e44f1/viewer/packages/camera-manager/src/DefaultCameraManager.ts#L198)

***

### getCameraControlsOptions()

> **getCameraControlsOptions**(): [`CameraControlsOptions`](../type-aliases/CameraControlsOptions.md)

Gets current camera controls options.

#### Returns

[`CameraControlsOptions`](../type-aliases/CameraControlsOptions.md)

#### Defined in

[packages/camera-manager/src/DefaultCameraManager.ts:262](https://github.com/cognitedata/reveal/blob/2acd9d17229d2bc8e309653b4d6a39ad941e44f1/viewer/packages/camera-manager/src/DefaultCameraManager.ts#L262)

***

### getCameraState()

> **getCameraState**(): `Required` \<[`CameraState`](../type-aliases/CameraState.md)\>

Get camera's state

#### Returns

`Required` \<[`CameraState`](../type-aliases/CameraState.md)\>

Camera state: position, target and rotation.

#### Implementation of

[`CameraManager`](../interfaces/CameraManager.md) . [`getCameraState`](../interfaces/CameraManager.md#getcamerastate)

#### Defined in

[packages/camera-manager/src/DefaultCameraManager.ts:229](https://github.com/cognitedata/reveal/blob/2acd9d17229d2bc8e309653b4d6a39ad941e44f1/viewer/packages/camera-manager/src/DefaultCameraManager.ts#L229)

***

### getComboControlsOptions()

> **getComboControlsOptions**(): `Readonly` \<[`ComboControlsOptions`](../type-aliases/ComboControlsOptions.md)\>

Gets current Combo Controls options.

#### Returns

`Readonly` \<[`ComboControlsOptions`](../type-aliases/ComboControlsOptions.md)\>

#### Defined in

[packages/camera-manager/src/DefaultCameraManager.ts:172](https://github.com/cognitedata/reveal/blob/2acd9d17229d2bc8e309653b4d6a39ad941e44f1/viewer/packages/camera-manager/src/DefaultCameraManager.ts#L172)

***

### off()

> **off**(`event`, `callback`): `void`

Unsubscribes from changes of the camera event.

#### Parameters

 **event**: `"cameraChange"` \| `"cameraStop"`

The event type.

 **callback**: [`CameraEventDelegate`](../type-aliases/CameraEventDelegate.md)

Callback function to be unsubscribed.

#### Returns

`void`

#### Implementation of

[`CameraManager`](../interfaces/CameraManager.md) . [`off`](../interfaces/CameraManager.md#off)

#### Defined in

[packages/camera-manager/src/DefaultCameraManager.ts:151](https://github.com/cognitedata/reveal/blob/2acd9d17229d2bc8e309653b4d6a39ad941e44f1/viewer/packages/camera-manager/src/DefaultCameraManager.ts#L151)

***

### on()

> **on**(`event`, `callback`): `void`

Subscribes to events on this camera manager. There are several event types:
'cameraChange' - Subscribes to changes of the camera. This is used by Reveal to react on changes of the camera.
'cameraStop' - Subscribes to events indicating the camera has stopped

#### Parameters

 **event**: `"cameraChange"` \| `"cameraStop"`

The event type.

 **callback**: [`CameraEventDelegate`](../type-aliases/CameraEventDelegate.md)

Callback to be called when the event is fired.

#### Returns

`void`

#### Implementation of

[`CameraManager`](../interfaces/CameraManager.md) . [`on`](../interfaces/CameraManager.md#on)

#### Defined in

[packages/camera-manager/src/DefaultCameraManager.ts:138](https://github.com/cognitedata/reveal/blob/2acd9d17229d2bc8e309653b4d6a39ad941e44f1/viewer/packages/camera-manager/src/DefaultCameraManager.ts#L138)

***

### setCameraControlsOptions()

> **setCameraControlsOptions**(`controlsOptions`): `void`

Sets camera controls options to customize camera controls modes. See [CameraControlsOptions](../type-aliases/CameraControlsOptions.md).

#### Parameters

 **controlsOptions**: [`CameraControlsOptions`](../type-aliases/CameraControlsOptions.md)

JSON object with camera controls options.

#### Returns

`void`

#### Defined in

[packages/camera-manager/src/DefaultCameraManager.ts:270](https://github.com/cognitedata/reveal/blob/2acd9d17229d2bc8e309653b4d6a39ad941e44f1/viewer/packages/camera-manager/src/DefaultCameraManager.ts#L270)

***

### setCameraState()

> **setCameraState**(`state`): `void`

Sets camera state. All parameters are optional. Rotation and target can't be set at the same time,
if so, error will be thrown. Set rotation is preserved until next call of setCameraState with
empty rotation field.

#### Parameters

 **state**: [`CameraState`](../type-aliases/CameraState.md)

Camera state.
*

#### Returns

`void`

#### Implementation of

[`CameraManager`](../interfaces/CameraManager.md) . [`setCameraState`](../interfaces/CameraManager.md#setcamerastate)

#### Defined in

[packages/camera-manager/src/DefaultCameraManager.ts:208](https://github.com/cognitedata/reveal/blob/2acd9d17229d2bc8e309653b4d6a39ad941e44f1/viewer/packages/camera-manager/src/DefaultCameraManager.ts#L208)

***

### setComboControlsOptions()

> **setComboControlsOptions**(`options`): `void`

Sets Combo Controls options.
Only provided options will be changed, any undefined options will be kept as is.

#### Parameters

 **options**: `Partial` \<[`ComboControlsOptions`](../type-aliases/ComboControlsOptions.md)\>

#### Returns

`void`

#### Defined in

[packages/camera-manager/src/DefaultCameraManager.ts:180](https://github.com/cognitedata/reveal/blob/2acd9d17229d2bc8e309653b4d6a39ad941e44f1/viewer/packages/camera-manager/src/DefaultCameraManager.ts#L180)

***

### update()

> **update**(`deltaTime`, `boundingBox`): `void`

Updates internal state of camera manager. Expected to update visual state of the camera
as well as it's near and far planes if needed. Called in `requestAnimationFrame`-loop.
Reveal performance affects frequency with which this method is called.

#### Parameters

 **deltaTime**: `number`

Delta time since last update in seconds.

 **boundingBox**: `Box3`

Global bounding box of the model(s) and any custom objects added to the scene.

#### Returns

`void`

#### Implementation of

[`CameraManager`](../interfaces/CameraManager.md) . [`update`](../interfaces/CameraManager.md#update)

#### Defined in

[packages/camera-manager/src/DefaultCameraManager.ts:280](https://github.com/cognitedata/reveal/blob/2acd9d17229d2bc8e309653b4d6a39ad941e44f1/viewer/packages/camera-manager/src/DefaultCameraManager.ts#L280)


<!-- SOURCE_END: reveal/documentation\versioned_docs\version-4.x\api\@cognite\reveal\classes\DefaultCameraManager.md -->

================================================================================


<!-- SOURCE_START: reveal/documentation\versioned_docs\version-4.x\api\@cognite\reveal\classes\FlexibleControlsOptions.md -->
## File: reveal/documentation\versioned_docs\version-4.x\api\@cognite\reveal\classes\FlexibleControlsOptions.md

# Class: FlexibleControlsOptions

**`Beta`**

## Constructors

### new FlexibleControlsOptions()

> **new FlexibleControlsOptions**(): [`FlexibleControlsOptions`](FlexibleControlsOptions.md)

**`Beta`**

#### Returns

[`FlexibleControlsOptions`](FlexibleControlsOptions.md)

## Properties

### animationDuration

> **animationDuration**: `number` = `300`

**`Beta`**

#### Defined in

[packages/camera-manager/src/Flexible/FlexibleControlsOptions.ts:33](https://github.com/cognitedata/reveal/blob/2acd9d17229d2bc8e309653b4d6a39ad941e44f1/viewer/packages/camera-manager/src/Flexible/FlexibleControlsOptions.ts#L33)

***

### automaticNearFarPlane

> **automaticNearFarPlane**: `boolean` = `true`

**`Beta`**

#### Defined in

[packages/camera-manager/src/Flexible/FlexibleControlsOptions.ts:48](https://github.com/cognitedata/reveal/blob/2acd9d17229d2bc8e309653b4d6a39ad941e44f1/viewer/packages/camera-manager/src/Flexible/FlexibleControlsOptions.ts#L48)

***

### automaticSensitivity

> **automaticSensitivity**: `boolean` = `true`

**`Beta`**

#### Defined in

[packages/camera-manager/src/Flexible/FlexibleControlsOptions.ts:52](https://github.com/cognitedata/reveal/blob/2acd9d17229d2bc8e309653b4d6a39ad941e44f1/viewer/packages/camera-manager/src/Flexible/FlexibleControlsOptions.ts#L52)

***

### controlsType

> **controlsType**: [`FlexibleControlsType`](../enumerations/FlexibleControlsType.md) = `FlexibleControlsType.Orbit`

**`Beta`**

#### Defined in

[packages/camera-manager/src/Flexible/FlexibleControlsOptions.ts:23](https://github.com/cognitedata/reveal/blob/2acd9d17229d2bc8e309653b4d6a39ad941e44f1/viewer/packages/camera-manager/src/Flexible/FlexibleControlsOptions.ts#L23)

***

### dampingFactor

> **dampingFactor**: `number` = `0.25`

**`Beta`**

#### Defined in

[packages/camera-manager/src/Flexible/FlexibleControlsOptions.ts:46](https://github.com/cognitedata/reveal/blob/2acd9d17229d2bc8e309653b4d6a39ad941e44f1/viewer/packages/camera-manager/src/Flexible/FlexibleControlsOptions.ts#L46)

***

### defaultFov

> **defaultFov**: `number` = `60`

**`Beta`**

#### Defined in

[packages/camera-manager/src/Flexible/FlexibleControlsOptions.ts:89](https://github.com/cognitedata/reveal/blob/2acd9d17229d2bc8e309653b4d6a39ad941e44f1/viewer/packages/camera-manager/src/Flexible/FlexibleControlsOptions.ts#L89)

***

### enableChangeControlsTypeOn123Key

> **enableChangeControlsTypeOn123Key**: `boolean` = `true`

**`Beta`**

#### Defined in

[packages/camera-manager/src/Flexible/FlexibleControlsOptions.ts:29](https://github.com/cognitedata/reveal/blob/2acd9d17229d2bc8e309653b4d6a39ad941e44f1/viewer/packages/camera-manager/src/Flexible/FlexibleControlsOptions.ts#L29)

***

### enableDamping

> **enableDamping**: `boolean` = `true`

**`Beta`**

#### Defined in

[packages/camera-manager/src/Flexible/FlexibleControlsOptions.ts:45](https://github.com/cognitedata/reveal/blob/2acd9d17229d2bc8e309653b4d6a39ad941e44f1/viewer/packages/camera-manager/src/Flexible/FlexibleControlsOptions.ts#L45)

***

### enableKeyboardNavigation

> **enableKeyboardNavigation**: `boolean` = `true`

**`Beta`**

#### Defined in

[packages/camera-manager/src/Flexible/FlexibleControlsOptions.ts:30](https://github.com/cognitedata/reveal/blob/2acd9d17229d2bc8e309653b4d6a39ad941e44f1/viewer/packages/camera-manager/src/Flexible/FlexibleControlsOptions.ts#L30)

***

### innerMarkerColor

> **innerMarkerColor**: `string` = `'#FFFFFF'`

**`Beta`**

#### Defined in

[packages/camera-manager/src/Flexible/FlexibleControlsOptions.ts:95](https://github.com/cognitedata/reveal/blob/2acd9d17229d2bc8e309653b4d6a39ad941e44f1/viewer/packages/camera-manager/src/Flexible/FlexibleControlsOptions.ts#L95)

***

### keyboardDollySpeed

> **keyboardDollySpeed**: `number` = `200`

**`Beta`**

#### Defined in

[packages/camera-manager/src/Flexible/FlexibleControlsOptions.ts:77](https://github.com/cognitedata/reveal/blob/2acd9d17229d2bc8e309653b4d6a39ad941e44f1/viewer/packages/camera-manager/src/Flexible/FlexibleControlsOptions.ts#L77)

***

### keyboardFastMoveFactor

> **keyboardFastMoveFactor**: `number` = `5`

**`Beta`**

#### Defined in

[packages/camera-manager/src/Flexible/FlexibleControlsOptions.ts:78](https://github.com/cognitedata/reveal/blob/2acd9d17229d2bc8e309653b4d6a39ad941e44f1/viewer/packages/camera-manager/src/Flexible/FlexibleControlsOptions.ts#L78)

***

### keyboardFastRotationFactor

> **keyboardFastRotationFactor**: `number` = `2`

**`Beta`**

#### Defined in

[packages/camera-manager/src/Flexible/FlexibleControlsOptions.ts:62](https://github.com/cognitedata/reveal/blob/2acd9d17229d2bc8e309653b4d6a39ad941e44f1/viewer/packages/camera-manager/src/Flexible/FlexibleControlsOptions.ts#L62)

***

### keyboardPanSpeed

> **keyboardPanSpeed**: `number` = `100`

**`Beta`**

#### Defined in

[packages/camera-manager/src/Flexible/FlexibleControlsOptions.ts:76](https://github.com/cognitedata/reveal/blob/2acd9d17229d2bc8e309653b4d6a39ad941e44f1/viewer/packages/camera-manager/src/Flexible/FlexibleControlsOptions.ts#L76)

***

### keyboardRotationSpeedAzimuth

> **keyboardRotationSpeedAzimuth**: `number` = `DEFAULT_KEYBOARD_ROTATION_SPEED`

**`Beta`**

#### Defined in

[packages/camera-manager/src/Flexible/FlexibleControlsOptions.ts:60](https://github.com/cognitedata/reveal/blob/2acd9d17229d2bc8e309653b4d6a39ad941e44f1/viewer/packages/camera-manager/src/Flexible/FlexibleControlsOptions.ts#L60)

***

### keyboardRotationSpeedPolar

> **keyboardRotationSpeedPolar**: `number`

**`Beta`**

#### Defined in

[packages/camera-manager/src/Flexible/FlexibleControlsOptions.ts:61](https://github.com/cognitedata/reveal/blob/2acd9d17229d2bc8e309653b4d6a39ad941e44f1/viewer/packages/camera-manager/src/Flexible/FlexibleControlsOptions.ts#L61)

***

### keyboardSpeed

> **keyboardSpeed**: `number` = `1`

**`Beta`**

#### Defined in

[packages/camera-manager/src/Flexible/FlexibleControlsOptions.ts:75](https://github.com/cognitedata/reveal/blob/2acd9d17229d2bc8e309653b4d6a39ad941e44f1/viewer/packages/camera-manager/src/Flexible/FlexibleControlsOptions.ts#L75)

***

### maxAzimuthAngle

> **maxAzimuthAngle**: `number` = `Infinity`

**`Beta`**

#### Defined in

[packages/camera-manager/src/Flexible/FlexibleControlsOptions.ts:42](https://github.com/cognitedata/reveal/blob/2acd9d17229d2bc8e309653b4d6a39ad941e44f1/viewer/packages/camera-manager/src/Flexible/FlexibleControlsOptions.ts#L42)

***

### maxOrthographicZoom

> **maxOrthographicZoom**: `number` = `Infinity`

**`Beta`**

#### Defined in

[packages/camera-manager/src/Flexible/FlexibleControlsOptions.ts:67](https://github.com/cognitedata/reveal/blob/2acd9d17229d2bc8e309653b4d6a39ad941e44f1/viewer/packages/camera-manager/src/Flexible/FlexibleControlsOptions.ts#L67)

***

### maxPolarAngle

> **maxPolarAngle**: `number`

**`Beta`**

#### Defined in

[packages/camera-manager/src/Flexible/FlexibleControlsOptions.ts:40](https://github.com/cognitedata/reveal/blob/2acd9d17229d2bc8e309653b4d6a39ad941e44f1/viewer/packages/camera-manager/src/Flexible/FlexibleControlsOptions.ts#L40)

***

### maxSensitivity

> **maxSensitivity**: `number` = `0.8`

**`Beta`**

#### Defined in

[packages/camera-manager/src/Flexible/FlexibleControlsOptions.ts:55](https://github.com/cognitedata/reveal/blob/2acd9d17229d2bc8e309653b4d6a39ad941e44f1/viewer/packages/camera-manager/src/Flexible/FlexibleControlsOptions.ts#L55)

***

### maximumFov

> **maximumFov**: `number` = `100`

**`Beta`**

#### Defined in

[packages/camera-manager/src/Flexible/FlexibleControlsOptions.ts:88](https://github.com/cognitedata/reveal/blob/2acd9d17229d2bc8e309653b4d6a39ad941e44f1/viewer/packages/camera-manager/src/Flexible/FlexibleControlsOptions.ts#L88)

***

### maximumTimeBetweenRaycasts

> **maximumTimeBetweenRaycasts**: `number` = `1000`

**`Beta`**

#### Defined in

[packages/camera-manager/src/Flexible/FlexibleControlsOptions.ts:35](https://github.com/cognitedata/reveal/blob/2acd9d17229d2bc8e309653b4d6a39ad941e44f1/viewer/packages/camera-manager/src/Flexible/FlexibleControlsOptions.ts#L35)

***

### minAzimuthAngle

> **minAzimuthAngle**: `number` = `-Infinity`

**`Beta`**

#### Defined in

[packages/camera-manager/src/Flexible/FlexibleControlsOptions.ts:41](https://github.com/cognitedata/reveal/blob/2acd9d17229d2bc8e309653b4d6a39ad941e44f1/viewer/packages/camera-manager/src/Flexible/FlexibleControlsOptions.ts#L41)

***

### minOrthographicZoom

> **minOrthographicZoom**: `number` = `0`

**`Beta`**

#### Defined in

[packages/camera-manager/src/Flexible/FlexibleControlsOptions.ts:66](https://github.com/cognitedata/reveal/blob/2acd9d17229d2bc8e309653b4d6a39ad941e44f1/viewer/packages/camera-manager/src/Flexible/FlexibleControlsOptions.ts#L66)

***

### minPolarAngle

> **minPolarAngle**: `number` = `DEFAULT_MIN_POLAR_ANGLE`

**`Beta`**

#### Defined in

[packages/camera-manager/src/Flexible/FlexibleControlsOptions.ts:39](https://github.com/cognitedata/reveal/blob/2acd9d17229d2bc8e309653b4d6a39ad941e44f1/viewer/packages/camera-manager/src/Flexible/FlexibleControlsOptions.ts#L39)

***

### minSensitivity

> **minSensitivity**: `number` = `0.1`

**`Beta`**

#### Defined in

[packages/camera-manager/src/Flexible/FlexibleControlsOptions.ts:54](https://github.com/cognitedata/reveal/blob/2acd9d17229d2bc8e309653b4d6a39ad941e44f1/viewer/packages/camera-manager/src/Flexible/FlexibleControlsOptions.ts#L54)

***

### minimumFov

> **minimumFov**: `number` = `5`

**`Beta`**

#### Defined in

[packages/camera-manager/src/Flexible/FlexibleControlsOptions.ts:87](https://github.com/cognitedata/reveal/blob/2acd9d17229d2bc8e309653b4d6a39ad941e44f1/viewer/packages/camera-manager/src/Flexible/FlexibleControlsOptions.ts#L87)

***

### minimumTimeBetweenRaycasts

> **minimumTimeBetweenRaycasts**: `number` = `200`

**`Beta`**

#### Defined in

[packages/camera-manager/src/Flexible/FlexibleControlsOptions.ts:34](https://github.com/cognitedata/reveal/blob/2acd9d17229d2bc8e309653b4d6a39ad941e44f1/viewer/packages/camera-manager/src/Flexible/FlexibleControlsOptions.ts#L34)

***

### mouseClickType

> **mouseClickType**: [`FlexibleMouseActionType`](../enumerations/FlexibleMouseActionType.md) = `FlexibleMouseActionType.SetTarget`

**`Beta`**

#### Defined in

[packages/camera-manager/src/Flexible/FlexibleControlsOptions.ts:27](https://github.com/cognitedata/reveal/blob/2acd9d17229d2bc8e309653b4d6a39ad941e44f1/viewer/packages/camera-manager/src/Flexible/FlexibleControlsOptions.ts#L27)

***

### mouseDistanceThresholdBetweenRaycasts

> **mouseDistanceThresholdBetweenRaycasts**: `number` = `5`

**`Beta`**

#### Defined in

[packages/camera-manager/src/Flexible/FlexibleControlsOptions.ts:36](https://github.com/cognitedata/reveal/blob/2acd9d17229d2bc8e309653b4d6a39ad941e44f1/viewer/packages/camera-manager/src/Flexible/FlexibleControlsOptions.ts#L36)

***

### mouseDollySpeed

> **mouseDollySpeed**: `number` = `100`

**`Beta`**

#### Defined in

[packages/camera-manager/src/Flexible/FlexibleControlsOptions.ts:72](https://github.com/cognitedata/reveal/blob/2acd9d17229d2bc8e309653b4d6a39ad941e44f1/viewer/packages/camera-manager/src/Flexible/FlexibleControlsOptions.ts#L72)

***

### mouseDoubleClickType

> **mouseDoubleClickType**: [`FlexibleMouseActionType`](../enumerations/FlexibleMouseActionType.md) = `FlexibleMouseActionType.SetTargetAndCameraPosition`

**`Beta`**

#### Defined in

[packages/camera-manager/src/Flexible/FlexibleControlsOptions.ts:28](https://github.com/cognitedata/reveal/blob/2acd9d17229d2bc8e309653b4d6a39ad941e44f1/viewer/packages/camera-manager/src/Flexible/FlexibleControlsOptions.ts#L28)

***

### mousePanSpeed

> **mousePanSpeed**: `number` = `25`

**`Beta`**

#### Defined in

[packages/camera-manager/src/Flexible/FlexibleControlsOptions.ts:71](https://github.com/cognitedata/reveal/blob/2acd9d17229d2bc8e309653b4d6a39ad941e44f1/viewer/packages/camera-manager/src/Flexible/FlexibleControlsOptions.ts#L71)

***

### mouseRotationSpeedAzimuth

> **mouseRotationSpeedAzimuth**: `number` = `DEFAULT_POINTER_ROTATION_SPEED`

**`Beta`**

#### Defined in

[packages/camera-manager/src/Flexible/FlexibleControlsOptions.ts:58](https://github.com/cognitedata/reveal/blob/2acd9d17229d2bc8e309653b4d6a39ad941e44f1/viewer/packages/camera-manager/src/Flexible/FlexibleControlsOptions.ts#L58)

***

### mouseRotationSpeedPolar

> **mouseRotationSpeedPolar**: `number` = `DEFAULT_POINTER_ROTATION_SPEED`

**`Beta`**

#### Defined in

[packages/camera-manager/src/Flexible/FlexibleControlsOptions.ts:59](https://github.com/cognitedata/reveal/blob/2acd9d17229d2bc8e309653b4d6a39ad941e44f1/viewer/packages/camera-manager/src/Flexible/FlexibleControlsOptions.ts#L59)

***

### mouseWheelAction

> **mouseWheelAction**: [`FlexibleWheelZoomType`](../enumerations/FlexibleWheelZoomType.md) = `FlexibleWheelZoomType.Auto`

**`Beta`**

#### Defined in

[packages/camera-manager/src/Flexible/FlexibleControlsOptions.ts:26](https://github.com/cognitedata/reveal/blob/2acd9d17229d2bc8e309653b4d6a39ad941e44f1/viewer/packages/camera-manager/src/Flexible/FlexibleControlsOptions.ts#L26)

***

### orthographicCameraDollyFactor

> **orthographicCameraDollyFactor**: `number` = `0.3`

**`Beta`**

#### Defined in

[packages/camera-manager/src/Flexible/FlexibleControlsOptions.ts:84](https://github.com/cognitedata/reveal/blob/2acd9d17229d2bc8e309653b4d6a39ad941e44f1/viewer/packages/camera-manager/src/Flexible/FlexibleControlsOptions.ts#L84)

***

### outerMarkerColor

> **outerMarkerColor**: `string` = `'#FF2222'`

**`Beta`**

#### Defined in

[packages/camera-manager/src/Flexible/FlexibleControlsOptions.ts:94](https://github.com/cognitedata/reveal/blob/2acd9d17229d2bc8e309653b4d6a39ad941e44f1/viewer/packages/camera-manager/src/Flexible/FlexibleControlsOptions.ts#L94)

***

### pinchEpsilon

> **pinchEpsilon**: `number` = `0.1`

**`Beta`**

#### Defined in

[packages/camera-manager/src/Flexible/FlexibleControlsOptions.ts:81](https://github.com/cognitedata/reveal/blob/2acd9d17229d2bc8e309653b4d6a39ad941e44f1/viewer/packages/camera-manager/src/Flexible/FlexibleControlsOptions.ts#L81)

***

### pinchPanSpeed

> **pinchPanSpeed**: `number` = `50`

**`Beta`**

#### Defined in

[packages/camera-manager/src/Flexible/FlexibleControlsOptions.ts:82](https://github.com/cognitedata/reveal/blob/2acd9d17229d2bc8e309653b4d6a39ad941e44f1/viewer/packages/camera-manager/src/Flexible/FlexibleControlsOptions.ts#L82)

***

### relativeMarkerSize

> **relativeMarkerSize**: `number` = `0.018`

**`Beta`**

#### Defined in

[packages/camera-manager/src/Flexible/FlexibleControlsOptions.ts:93](https://github.com/cognitedata/reveal/blob/2acd9d17229d2bc8e309653b4d6a39ad941e44f1/viewer/packages/camera-manager/src/Flexible/FlexibleControlsOptions.ts#L93)

***

### sensitivity

> **sensitivity**: `number` = `0.4`

**`Beta`**

#### Defined in

[packages/camera-manager/src/Flexible/FlexibleControlsOptions.ts:51](https://github.com/cognitedata/reveal/blob/2acd9d17229d2bc8e309653b4d6a39ad941e44f1/viewer/packages/camera-manager/src/Flexible/FlexibleControlsOptions.ts#L51)

***

### sensitivityDiagonalFraction

> **sensitivityDiagonalFraction**: `number` = `0.001`

**`Beta`**

#### Defined in

[packages/camera-manager/src/Flexible/FlexibleControlsOptions.ts:53](https://github.com/cognitedata/reveal/blob/2acd9d17229d2bc8e309653b4d6a39ad941e44f1/viewer/packages/camera-manager/src/Flexible/FlexibleControlsOptions.ts#L53)

***

### showTarget

> **showTarget**: `boolean` = `true`

**`Beta`**

#### Defined in

[packages/camera-manager/src/Flexible/FlexibleControlsOptions.ts:92](https://github.com/cognitedata/reveal/blob/2acd9d17229d2bc8e309653b4d6a39ad941e44f1/viewer/packages/camera-manager/src/Flexible/FlexibleControlsOptions.ts#L92)

***

### wheelDollySpeed

> **wheelDollySpeed**: `number` = `0.5`

**`Beta`**

#### Defined in

[packages/camera-manager/src/Flexible/FlexibleControlsOptions.ts:70](https://github.com/cognitedata/reveal/blob/2acd9d17229d2bc8e309653b4d6a39ad941e44f1/viewer/packages/camera-manager/src/Flexible/FlexibleControlsOptions.ts#L70)

***

### zoomFraction

> **zoomFraction**: `number` = `0.05`

**`Beta`**

#### Defined in

[packages/camera-manager/src/Flexible/FlexibleControlsOptions.ts:65](https://github.com/cognitedata/reveal/blob/2acd9d17229d2bc8e309653b4d6a39ad941e44f1/viewer/packages/camera-manager/src/Flexible/FlexibleControlsOptions.ts#L65)

## Accessors

### realMouseWheelAction

> `get` **realMouseWheelAction**(): [`FlexibleWheelZoomType`](../enumerations/FlexibleWheelZoomType.md)

**`Beta`**

#### Returns

[`FlexibleWheelZoomType`](../enumerations/FlexibleWheelZoomType.md)

#### Defined in

[packages/camera-manager/src/Flexible/FlexibleControlsOptions.ts:101](https://github.com/cognitedata/reveal/blob/2acd9d17229d2bc8e309653b4d6a39ad941e44f1/viewer/packages/camera-manager/src/Flexible/FlexibleControlsOptions.ts#L101)

***

### shouldPick

> `get` **shouldPick**(): `boolean`

**`Beta`**

#### Returns

`boolean`

#### Defined in

[packages/camera-manager/src/Flexible/FlexibleControlsOptions.ts:110](https://github.com/cognitedata/reveal/blob/2acd9d17229d2bc8e309653b4d6a39ad941e44f1/viewer/packages/camera-manager/src/Flexible/FlexibleControlsOptions.ts#L110)

## Methods

### getKeyboardSpeed()

> **getKeyboardSpeed**(`shift`): `number`

**`Beta`**

#### Parameters

 **shift**: `boolean`

#### Returns

`number`

#### Defined in

[packages/camera-manager/src/Flexible/FlexibleControlsOptions.ts:121](https://github.com/cognitedata/reveal/blob/2acd9d17229d2bc8e309653b4d6a39ad941e44f1/viewer/packages/camera-manager/src/Flexible/FlexibleControlsOptions.ts#L121)

***

### getLegalAzimuthAngle()

> **getLegalAzimuthAngle**(`azimuthAngle`): `number`

**`Beta`**

#### Parameters

 **azimuthAngle**: `number`

#### Returns

`number`

#### Defined in

[packages/camera-manager/src/Flexible/FlexibleControlsOptions.ts:136](https://github.com/cognitedata/reveal/blob/2acd9d17229d2bc8e309653b4d6a39ad941e44f1/viewer/packages/camera-manager/src/Flexible/FlexibleControlsOptions.ts#L136)

***

### getLegalFov()

> **getLegalFov**(`fov`): `number`

**`Beta`**

#### Parameters

 **fov**: `number`

#### Returns

`number`

#### Defined in

[packages/camera-manager/src/Flexible/FlexibleControlsOptions.ts:132](https://github.com/cognitedata/reveal/blob/2acd9d17229d2bc8e309653b4d6a39ad941e44f1/viewer/packages/camera-manager/src/Flexible/FlexibleControlsOptions.ts#L132)

***

### getLegalPolarAngle()

> **getLegalPolarAngle**(`polarAngle`): `number`

**`Beta`**

#### Parameters

 **polarAngle**: `number`

#### Returns

`number`

#### Defined in

[packages/camera-manager/src/Flexible/FlexibleControlsOptions.ts:140](https://github.com/cognitedata/reveal/blob/2acd9d17229d2bc8e309653b4d6a39ad941e44f1/viewer/packages/camera-manager/src/Flexible/FlexibleControlsOptions.ts#L140)

***

### getLegalSensitivity()

> **getLegalSensitivity**(`controlsSensitivity`): `number`

**`Beta`**

#### Parameters

 **controlsSensitivity**: `number`

#### Returns

`number`

#### Defined in

[packages/camera-manager/src/Flexible/FlexibleControlsOptions.ts:144](https://github.com/cognitedata/reveal/blob/2acd9d17229d2bc8e309653b4d6a39ad941e44f1/viewer/packages/camera-manager/src/Flexible/FlexibleControlsOptions.ts#L144)


<!-- SOURCE_END: reveal/documentation\versioned_docs\version-4.x\api\@cognite\reveal\classes\FlexibleControlsOptions.md -->

================================================================================


<!-- SOURCE_START: reveal/documentation\versioned_docs\version-4.x\api\@cognite\reveal\classes\IndexSet.md -->
## File: reveal/documentation\versioned_docs\version-4.x\api\@cognite\reveal\classes\IndexSet.md

# Class: IndexSet

## Constructors

### new IndexSet()

> **new IndexSet**(`values`?): [`IndexSet`](IndexSet.md)

#### Parameters

 **values?**: `Iterable`\<`number`\>

#### Returns

[`IndexSet`](IndexSet.md)

#### Defined in

[packages/utilities/src/indexset/IndexSet.ts:13](https://github.com/cognitedata/reveal/blob/2acd9d17229d2bc8e309653b4d6a39ad941e44f1/viewer/packages/utilities/src/indexset/IndexSet.ts#L13)

### new IndexSet()

> **new IndexSet**(`values`?): [`IndexSet`](IndexSet.md)

#### Parameters

 **values?**: [`NumericRange`](NumericRange.md)

#### Returns

[`IndexSet`](IndexSet.md)

#### Defined in

[packages/utilities/src/indexset/IndexSet.ts:14](https://github.com/cognitedata/reveal/blob/2acd9d17229d2bc8e309653b4d6a39ad941e44f1/viewer/packages/utilities/src/indexset/IndexSet.ts#L14)

## Accessors

### count

> `get` **count**(): `number`

#### Returns

`number`

#### Defined in

[packages/utilities/src/indexset/IndexSet.ts:68](https://github.com/cognitedata/reveal/blob/2acd9d17229d2bc8e309653b4d6a39ad941e44f1/viewer/packages/utilities/src/indexset/IndexSet.ts#L68)

## Methods

### add()

> **add**(`index`): `void`

#### Parameters

 **index**: `number`

#### Returns

`void`

#### Defined in

[packages/utilities/src/indexset/IndexSet.ts:33](https://github.com/cognitedata/reveal/blob/2acd9d17229d2bc8e309653b4d6a39ad941e44f1/viewer/packages/utilities/src/indexset/IndexSet.ts#L33)

***

### addRange()

> **addRange**(`range`): `void`

#### Parameters

 **range**: [`NumericRange`](NumericRange.md)

#### Returns

`void`

#### Defined in

[packages/utilities/src/indexset/IndexSet.ts:39](https://github.com/cognitedata/reveal/blob/2acd9d17229d2bc8e309653b4d6a39ad941e44f1/viewer/packages/utilities/src/indexset/IndexSet.ts#L39)

***

### clear()

> **clear**(): `void`

#### Returns

`void`

#### Defined in

[packages/utilities/src/indexset/IndexSet.ts:217](https://github.com/cognitedata/reveal/blob/2acd9d17229d2bc8e309653b4d6a39ad941e44f1/viewer/packages/utilities/src/indexset/IndexSet.ts#L217)

***

### clone()

> **clone**(): [`IndexSet`](IndexSet.md)

#### Returns

[`IndexSet`](IndexSet.md)

#### Defined in

[packages/utilities/src/indexset/IndexSet.ts:221](https://github.com/cognitedata/reveal/blob/2acd9d17229d2bc8e309653b4d6a39ad941e44f1/viewer/packages/utilities/src/indexset/IndexSet.ts#L221)

***

### contains()

> **contains**(`index`): `boolean`

#### Parameters

 **index**: `number`

#### Returns

`boolean`

#### Defined in

[packages/utilities/src/indexset/IndexSet.ts:60](https://github.com/cognitedata/reveal/blob/2acd9d17229d2bc8e309653b4d6a39ad941e44f1/viewer/packages/utilities/src/indexset/IndexSet.ts#L60)

***

### differenceWith()

> **differenceWith**(`otherSet`): [`IndexSet`](IndexSet.md)

#### Parameters

 **otherSet**: [`IndexSet`](IndexSet.md)

#### Returns

[`IndexSet`](IndexSet.md)

#### Defined in

[packages/utilities/src/indexset/IndexSet.ts:135](https://github.com/cognitedata/reveal/blob/2acd9d17229d2bc8e309653b4d6a39ad941e44f1/viewer/packages/utilities/src/indexset/IndexSet.ts#L135)

***

### forEachRange()

> **forEachRange**(`visitor`): `void`

#### Parameters

 **visitor**

#### Returns

`void`

#### Defined in

[packages/utilities/src/indexset/IndexSet.ts:27](https://github.com/cognitedata/reveal/blob/2acd9d17229d2bc8e309653b4d6a39ad941e44f1/viewer/packages/utilities/src/indexset/IndexSet.ts#L27)

***

### hasIntersectionWith()

> **hasIntersectionWith**(`otherSet`): `boolean`

#### Parameters

 **otherSet**: [`IndexSet`](IndexSet.md) \| `Set`\<`number`\>

#### Returns

`boolean`

#### Defined in

[packages/utilities/src/indexset/IndexSet.ts:145](https://github.com/cognitedata/reveal/blob/2acd9d17229d2bc8e309653b4d6a39ad941e44f1/viewer/packages/utilities/src/indexset/IndexSet.ts#L145)

***

### hasIntersectionWithMap()

> **hasIntersectionWithMap**(`otherMap`): `boolean`

#### Parameters

 **otherMap**: `Map`\<`number`, `number`\>

#### Returns

`boolean`

#### Defined in

[packages/utilities/src/indexset/IndexSet.ts:163](https://github.com/cognitedata/reveal/blob/2acd9d17229d2bc8e309653b4d6a39ad941e44f1/viewer/packages/utilities/src/indexset/IndexSet.ts#L163)

***

### intersectWith()

> **intersectWith**(`otherSet`): [`IndexSet`](IndexSet.md)

#### Parameters

 **otherSet**: [`IndexSet`](IndexSet.md)

#### Returns

[`IndexSet`](IndexSet.md)

#### Defined in

[packages/utilities/src/indexset/IndexSet.ts:177](https://github.com/cognitedata/reveal/blob/2acd9d17229d2bc8e309653b4d6a39ad941e44f1/viewer/packages/utilities/src/indexset/IndexSet.ts#L177)

***

### invertedRanges()

> **invertedRanges**(): [`NumericRange`](NumericRange.md)[]

#### Returns

[`NumericRange`](NumericRange.md)[]

#### Defined in

[packages/utilities/src/indexset/IndexSet.ts:105](https://github.com/cognitedata/reveal/blob/2acd9d17229d2bc8e309653b4d6a39ad941e44f1/viewer/packages/utilities/src/indexset/IndexSet.ts#L105)

***

### remove()

> **remove**(`index`): `void`

#### Parameters

 **index**: `number`

#### Returns

`void`

#### Defined in

[packages/utilities/src/indexset/IndexSet.ts:47](https://github.com/cognitedata/reveal/blob/2acd9d17229d2bc8e309653b4d6a39ad941e44f1/viewer/packages/utilities/src/indexset/IndexSet.ts#L47)

***

### removeRange()

> **removeRange**(`range`): `void`

#### Parameters

 **range**: [`NumericRange`](NumericRange.md)

#### Returns

`void`

#### Defined in

[packages/utilities/src/indexset/IndexSet.ts:52](https://github.com/cognitedata/reveal/blob/2acd9d17229d2bc8e309653b4d6a39ad941e44f1/viewer/packages/utilities/src/indexset/IndexSet.ts#L52)

***

### toIndexArray()

> **toIndexArray**(): `number`[]

#### Returns

`number`[]

#### Defined in

[packages/utilities/src/indexset/IndexSet.ts:84](https://github.com/cognitedata/reveal/blob/2acd9d17229d2bc8e309653b4d6a39ad941e44f1/viewer/packages/utilities/src/indexset/IndexSet.ts#L84)

***

### toPlainSet()

> **toPlainSet**(): `Set`\<`number`\>

#### Returns

`Set`\<`number`\>

#### Defined in

[packages/utilities/src/indexset/IndexSet.ts:98](https://github.com/cognitedata/reveal/blob/2acd9d17229d2bc8e309653b4d6a39ad941e44f1/viewer/packages/utilities/src/indexset/IndexSet.ts#L98)

***

### toRangeArray()

> **toRangeArray**(): [`NumericRange`](NumericRange.md)[]

#### Returns

[`NumericRange`](NumericRange.md)[]

#### Defined in

[packages/utilities/src/indexset/IndexSet.ts:76](https://github.com/cognitedata/reveal/blob/2acd9d17229d2bc8e309653b4d6a39ad941e44f1/viewer/packages/utilities/src/indexset/IndexSet.ts#L76)

***

### unionWith()

> **unionWith**(`otherSet`): [`IndexSet`](IndexSet.md)

#### Parameters

 **otherSet**: [`IndexSet`](IndexSet.md)

#### Returns

[`IndexSet`](IndexSet.md)

#### Defined in

[packages/utilities/src/indexset/IndexSet.ts:123](https://github.com/cognitedata/reveal/blob/2acd9d17229d2bc8e309653b4d6a39ad941e44f1/viewer/packages/utilities/src/indexset/IndexSet.ts#L123)


<!-- SOURCE_END: reveal/documentation\versioned_docs\version-4.x\api\@cognite\reveal\classes\IndexSet.md -->

================================================================================


<!-- SOURCE_START: reveal/documentation\versioned_docs\version-4.x\api\@cognite\reveal\classes\IntersectionNodeCollection.md -->
## File: reveal/documentation\versioned_docs\version-4.x\api\@cognite\reveal\classes\IntersectionNodeCollection.md

# Class: IntersectionNodeCollection

Node collection that is the intersection between a set of underlying node collections.

## Extends

- [`CombineNodeCollectionBase`](CombineNodeCollectionBase.md)

## Constructors

### new IntersectionNodeCollection()

> **new IntersectionNodeCollection**(`nodeCollections`?): [`IntersectionNodeCollection`](IntersectionNodeCollection.md)

#### Parameters

 **nodeCollections?**: [`NodeCollection`](NodeCollection.md)[]

#### Returns

[`IntersectionNodeCollection`](IntersectionNodeCollection.md)

#### Overrides

[`CombineNodeCollectionBase`](CombineNodeCollectionBase.md) . [`constructor`](CombineNodeCollectionBase.md#constructors)

#### Defined in

[packages/cad-styling/src/IntersectionNodeCollection.ts:22](https://github.com/cognitedata/reveal/blob/2acd9d17229d2bc8e309653b4d6a39ad941e44f1/viewer/packages/cad-styling/src/IntersectionNodeCollection.ts#L22)

## Properties

### classToken

> `readonly` `static` **classToken**: `"IntersectionNodeCollection"` = `'IntersectionNodeCollection'`

#### Defined in

[packages/cad-styling/src/IntersectionNodeCollection.ts:20](https://github.com/cognitedata/reveal/blob/2acd9d17229d2bc8e309653b4d6a39ad941e44f1/viewer/packages/cad-styling/src/IntersectionNodeCollection.ts#L20)

## Accessors

### classToken

> `get` **classToken**(): `string`

#### Returns

`string`

#### Inherited from

[`CombineNodeCollectionBase`](CombineNodeCollectionBase.md) . [`classToken`](CombineNodeCollectionBase.md#classtoken)

#### Defined in

[packages/cad-styling/src/NodeCollection.ts:23](https://github.com/cognitedata/reveal/blob/2acd9d17229d2bc8e309653b4d6a39ad941e44f1/viewer/packages/cad-styling/src/NodeCollection.ts#L23)

***

### isLoading

> `get` **isLoading**(): `boolean`

**`Override`**

#### Returns

`boolean`

#### Inherited from

[`CombineNodeCollectionBase`](CombineNodeCollectionBase.md) . [`isLoading`](CombineNodeCollectionBase.md#isloading)

#### Defined in

[packages/cad-styling/src/CombineNodeCollectionBase.ts:67](https://github.com/cognitedata/reveal/blob/2acd9d17229d2bc8e309653b4d6a39ad941e44f1/viewer/packages/cad-styling/src/CombineNodeCollectionBase.ts#L67)

## Methods

### add()

> **add**(`nodeCollection`): `void`

#### Parameters

 **nodeCollection**: [`NodeCollection`](NodeCollection.md)

#### Returns

`void`

#### Inherited from

[`CombineNodeCollectionBase`](CombineNodeCollectionBase.md) . [`add`](CombineNodeCollectionBase.md#add)

#### Defined in

[packages/cad-styling/src/CombineNodeCollectionBase.ts:26](https://github.com/cognitedata/reveal/blob/2acd9d17229d2bc8e309653b4d6a39ad941e44f1/viewer/packages/cad-styling/src/CombineNodeCollectionBase.ts#L26)

***

### clear()

> **clear**(): `void`

Clears all underlying node collections.

#### Returns

`void`

#### Inherited from

[`CombineNodeCollectionBase`](CombineNodeCollectionBase.md) . [`clear`](CombineNodeCollectionBase.md#clear)

#### Defined in

[packages/cad-styling/src/CombineNodeCollectionBase.ts:46](https://github.com/cognitedata/reveal/blob/2acd9d17229d2bc8e309653b4d6a39ad941e44f1/viewer/packages/cad-styling/src/CombineNodeCollectionBase.ts#L46)

***

### getAreas()

> **getAreas**(): [`AreaCollection`](../interfaces/AreaCollection.md)

Returns areas surrounding the nodes in the collection. The areas
are boxes in "ThreeJS coordinates". Note that not all
implementations supports this.

#### Returns

[`AreaCollection`](../interfaces/AreaCollection.md)

#### Overrides

[`CombineNodeCollectionBase`](CombineNodeCollectionBase.md) . [`getAreas`](CombineNodeCollectionBase.md#getareas)

#### Defined in

[packages/cad-styling/src/IntersectionNodeCollection.ts:52](https://github.com/cognitedata/reveal/blob/2acd9d17229d2bc8e309653b4d6a39ad941e44f1/viewer/packages/cad-styling/src/IntersectionNodeCollection.ts#L52)

***

### getIndexSet()

> **getIndexSet**(): [`IndexSet`](IndexSet.md)

**`Override`**

#### Returns

[`IndexSet`](IndexSet.md)

#### Inherited from

[`CombineNodeCollectionBase`](CombineNodeCollectionBase.md) . [`getIndexSet`](CombineNodeCollectionBase.md#getindexset)

#### Defined in

[packages/cad-styling/src/CombineNodeCollectionBase.ts:59](https://github.com/cognitedata/reveal/blob/2acd9d17229d2bc8e309653b4d6a39ad941e44f1/viewer/packages/cad-styling/src/CombineNodeCollectionBase.ts#L59)

***

### makeDirty()

> **makeDirty**(): `void`

#### Returns

`void`

#### Overrides

`CombineNodeCollectionBase.makeDirty`

#### Defined in

[packages/cad-styling/src/IntersectionNodeCollection.ts:46](https://github.com/cognitedata/reveal/blob/2acd9d17229d2bc8e309653b4d6a39ad941e44f1/viewer/packages/cad-styling/src/IntersectionNodeCollection.ts#L46)

***

### off()

> **off**(`event`, `listener`): `void`

#### Parameters

 **event**: `"changed"`

 **listener**

#### Returns

`void`

#### Inherited from

[`CombineNodeCollectionBase`](CombineNodeCollectionBase.md) . [`off`](CombineNodeCollectionBase.md#off)

#### Defined in

[packages/cad-styling/src/NodeCollection.ts:32](https://github.com/cognitedata/reveal/blob/2acd9d17229d2bc8e309653b4d6a39ad941e44f1/viewer/packages/cad-styling/src/NodeCollection.ts#L32)

***

### on()

> **on**(`event`, `listener`): `void`

#### Parameters

 **event**: `"changed"`

 **listener**

#### Returns

`void`

#### Inherited from

[`CombineNodeCollectionBase`](CombineNodeCollectionBase.md) . [`on`](CombineNodeCollectionBase.md#on)

#### Defined in

[packages/cad-styling/src/NodeCollection.ts:27](https://github.com/cognitedata/reveal/blob/2acd9d17229d2bc8e309653b4d6a39ad941e44f1/viewer/packages/cad-styling/src/NodeCollection.ts#L27)

***

### remove()

> **remove**(`nodeCollection`): `void`

#### Parameters

 **nodeCollection**: [`NodeCollection`](NodeCollection.md)

#### Returns

`void`

#### Inherited from

[`CombineNodeCollectionBase`](CombineNodeCollectionBase.md) . [`remove`](CombineNodeCollectionBase.md#remove)

#### Defined in

[packages/cad-styling/src/CombineNodeCollectionBase.ts:32](https://github.com/cognitedata/reveal/blob/2acd9d17229d2bc8e309653b4d6a39ad941e44f1/viewer/packages/cad-styling/src/CombineNodeCollectionBase.ts#L32)

***

### serialize()

> **serialize**(): [`SerializedNodeCollection`](../type-aliases/SerializedNodeCollection.md)

#### Returns

[`SerializedNodeCollection`](../type-aliases/SerializedNodeCollection.md)

#### Overrides

[`CombineNodeCollectionBase`](CombineNodeCollectionBase.md) . [`serialize`](CombineNodeCollectionBase.md#serialize)

#### Defined in

[packages/cad-styling/src/IntersectionNodeCollection.ts:26](https://github.com/cognitedata/reveal/blob/2acd9d17229d2bc8e309653b4d6a39ad941e44f1/viewer/packages/cad-styling/src/IntersectionNodeCollection.ts#L26)


<!-- SOURCE_END: reveal/documentation\versioned_docs\version-4.x\api\@cognite\reveal\classes\IntersectionNodeCollection.md -->

================================================================================


<!-- SOURCE_START: reveal/documentation\versioned_docs\version-4.x\api\@cognite\reveal\classes\InvertedNodeCollection.md -->
## File: reveal/documentation\versioned_docs\version-4.x\api\@cognite\reveal\classes\InvertedNodeCollection.md

# Class: InvertedNodeCollection

Node collection that inverts the result from another node collection.

## Extends

- [`NodeCollection`](NodeCollection.md)

## Constructors

### new InvertedNodeCollection()

> **new InvertedNodeCollection**(`model`, `innerSet`): [`InvertedNodeCollection`](InvertedNodeCollection.md)

#### Parameters

 **model**: [`CdfModelNodeCollectionDataProvider`](../interfaces/CdfModelNodeCollectionDataProvider.md)

 **innerSet**: [`NodeCollection`](NodeCollection.md)

#### Returns

[`InvertedNodeCollection`](InvertedNodeCollection.md)

#### Overrides

`NodeCollection.constructor`

#### Defined in

[packages/cad-styling/src/InvertedNodeCollection.ts:21](https://github.com/cognitedata/reveal/blob/2acd9d17229d2bc8e309653b4d6a39ad941e44f1/viewer/packages/cad-styling/src/InvertedNodeCollection.ts#L21)

## Properties

### classToken

> `readonly` `static` **classToken**: `"InvertedNodeCollection"` = `'InvertedNodeCollection'`

#### Defined in

[packages/cad-styling/src/InvertedNodeCollection.ts:15](https://github.com/cognitedata/reveal/blob/2acd9d17229d2bc8e309653b4d6a39ad941e44f1/viewer/packages/cad-styling/src/InvertedNodeCollection.ts#L15)

## Accessors

### classToken

> `get` **classToken**(): `string`

#### Returns

`string`

#### Inherited from

[`NodeCollection`](NodeCollection.md) . [`classToken`](NodeCollection.md#classtoken)

#### Defined in

[packages/cad-styling/src/NodeCollection.ts:23](https://github.com/cognitedata/reveal/blob/2acd9d17229d2bc8e309653b4d6a39ad941e44f1/viewer/packages/cad-styling/src/NodeCollection.ts#L23)

***

### isLoading

> `get` **isLoading**(): `boolean`

#### Returns

`boolean`

#### Overrides

[`NodeCollection`](NodeCollection.md) . [`isLoading`](NodeCollection.md#isloading)

#### Defined in

[packages/cad-styling/src/InvertedNodeCollection.ts:32](https://github.com/cognitedata/reveal/blob/2acd9d17229d2bc8e309653b4d6a39ad941e44f1/viewer/packages/cad-styling/src/InvertedNodeCollection.ts#L32)

## Methods

### clear()

> **clear**(): `never`

Not supported.

#### Returns

`never`

#### Overrides

[`NodeCollection`](NodeCollection.md) . [`clear`](NodeCollection.md#clear)

#### Throws

Always throws an error.

#### Defined in

[packages/cad-styling/src/InvertedNodeCollection.ts:58](https://github.com/cognitedata/reveal/blob/2acd9d17229d2bc8e309653b4d6a39ad941e44f1/viewer/packages/cad-styling/src/InvertedNodeCollection.ts#L58)

***

### getAreas()

> **getAreas**(): [`AreaCollection`](../interfaces/AreaCollection.md)

Returns areas surrounding the nodes in the collection. The areas
are boxes in "ThreeJS coordinates". Note that not all
implementations supports this.

#### Returns

[`AreaCollection`](../interfaces/AreaCollection.md)

#### Overrides

[`NodeCollection`](NodeCollection.md) . [`getAreas`](NodeCollection.md#getareas)

#### Defined in

[packages/cad-styling/src/InvertedNodeCollection.ts:47](https://github.com/cognitedata/reveal/blob/2acd9d17229d2bc8e309653b4d6a39ad941e44f1/viewer/packages/cad-styling/src/InvertedNodeCollection.ts#L47)

***

### getIndexSet()

> **getIndexSet**(): [`IndexSet`](IndexSet.md)

#### Returns

[`IndexSet`](IndexSet.md)

#### Overrides

[`NodeCollection`](NodeCollection.md) . [`getIndexSet`](NodeCollection.md#getindexset)

#### Defined in

[packages/cad-styling/src/InvertedNodeCollection.ts:36](https://github.com/cognitedata/reveal/blob/2acd9d17229d2bc8e309653b4d6a39ad941e44f1/viewer/packages/cad-styling/src/InvertedNodeCollection.ts#L36)

***

### off()

> **off**(`event`, `listener`): `void`

#### Parameters

 **event**: `"changed"`

 **listener**

#### Returns

`void`

#### Inherited from

[`NodeCollection`](NodeCollection.md) . [`off`](NodeCollection.md#off)

#### Defined in

[packages/cad-styling/src/NodeCollection.ts:32](https://github.com/cognitedata/reveal/blob/2acd9d17229d2bc8e309653b4d6a39ad941e44f1/viewer/packages/cad-styling/src/NodeCollection.ts#L32)

***

### on()

> **on**(`event`, `listener`): `void`

#### Parameters

 **event**: `"changed"`

 **listener**

#### Returns

`void`

#### Inherited from

[`NodeCollection`](NodeCollection.md) . [`on`](NodeCollection.md#on)

#### Defined in

[packages/cad-styling/src/NodeCollection.ts:27](https://github.com/cognitedata/reveal/blob/2acd9d17229d2bc8e309653b4d6a39ad941e44f1/viewer/packages/cad-styling/src/NodeCollection.ts#L27)

***

### serialize()

> **serialize**(): [`SerializedNodeCollection`](../type-aliases/SerializedNodeCollection.md)

#### Returns

[`SerializedNodeCollection`](../type-aliases/SerializedNodeCollection.md)

#### Overrides

[`NodeCollection`](NodeCollection.md) . [`serialize`](NodeCollection.md#serialize)

#### Defined in

[packages/cad-styling/src/InvertedNodeCollection.ts:51](https://github.com/cognitedata/reveal/blob/2acd9d17229d2bc8e309653b4d6a39ad941e44f1/viewer/packages/cad-styling/src/InvertedNodeCollection.ts#L51)


<!-- SOURCE_END: reveal/documentation\versioned_docs\version-4.x\api\@cognite\reveal\classes\InvertedNodeCollection.md -->

================================================================================


<!-- SOURCE_START: reveal/documentation\versioned_docs\version-4.x\api\@cognite\reveal\classes\NodeCollection.md -->
## File: reveal/documentation\versioned_docs\version-4.x\api\@cognite\reveal\classes\NodeCollection.md

# Class: `abstract` NodeCollection

Abstract class for implementing a set of nodes to be styled.

## Extended by

- [`CdfNodeCollectionBase`](CdfNodeCollectionBase.md)
- [`CombineNodeCollectionBase`](CombineNodeCollectionBase.md)
- [`TreeIndexNodeCollection`](TreeIndexNodeCollection.md)
- [`AssetNodeCollection`](AssetNodeCollection.md)
- [`InvertedNodeCollection`](InvertedNodeCollection.md)

## Accessors

### classToken

> `get` **classToken**(): `string`

#### Returns

`string`

#### Defined in

[packages/cad-styling/src/NodeCollection.ts:23](https://github.com/cognitedata/reveal/blob/2acd9d17229d2bc8e309653b4d6a39ad941e44f1/viewer/packages/cad-styling/src/NodeCollection.ts#L23)

***

### isLoading

> `get` `abstract` **isLoading**(): `boolean`

#### Returns

`boolean`

#### Defined in

[packages/cad-styling/src/NodeCollection.ts:37](https://github.com/cognitedata/reveal/blob/2acd9d17229d2bc8e309653b4d6a39ad941e44f1/viewer/packages/cad-styling/src/NodeCollection.ts#L37)

## Methods

### clear()

> `abstract` **clear**(): `void`

#### Returns

`void`

#### Defined in

[packages/cad-styling/src/NodeCollection.ts:45](https://github.com/cognitedata/reveal/blob/2acd9d17229d2bc8e309653b4d6a39ad941e44f1/viewer/packages/cad-styling/src/NodeCollection.ts#L45)

***

### getAreas()

> `abstract` **getAreas**(): [`AreaCollection`](../interfaces/AreaCollection.md)

Returns areas surrounding the nodes in the collection. The areas
are boxes in "ThreeJS coordinates". Note that not all
implementations supports this.

#### Returns

[`AreaCollection`](../interfaces/AreaCollection.md)

#### Defined in

[packages/cad-styling/src/NodeCollection.ts:44](https://github.com/cognitedata/reveal/blob/2acd9d17229d2bc8e309653b4d6a39ad941e44f1/viewer/packages/cad-styling/src/NodeCollection.ts#L44)

***

### getIndexSet()

> `abstract` **getIndexSet**(): [`IndexSet`](IndexSet.md)

#### Returns

[`IndexSet`](IndexSet.md)

#### Defined in

[packages/cad-styling/src/NodeCollection.ts:38](https://github.com/cognitedata/reveal/blob/2acd9d17229d2bc8e309653b4d6a39ad941e44f1/viewer/packages/cad-styling/src/NodeCollection.ts#L38)

***

### off()

> **off**(`event`, `listener`): `void`

#### Parameters

 **event**: `"changed"`

 **listener**

#### Returns

`void`

#### Defined in

[packages/cad-styling/src/NodeCollection.ts:32](https://github.com/cognitedata/reveal/blob/2acd9d17229d2bc8e309653b4d6a39ad941e44f1/viewer/packages/cad-styling/src/NodeCollection.ts#L32)

***

### on()

> **on**(`event`, `listener`): `void`

#### Parameters

 **event**: `"changed"`

 **listener**

#### Returns

`void`

#### Defined in

[packages/cad-styling/src/NodeCollection.ts:27](https://github.com/cognitedata/reveal/blob/2acd9d17229d2bc8e309653b4d6a39ad941e44f1/viewer/packages/cad-styling/src/NodeCollection.ts#L27)

***

### serialize()

> `abstract` **serialize**(): [`SerializedNodeCollection`](../type-aliases/SerializedNodeCollection.md)

#### Returns

[`SerializedNodeCollection`](../type-aliases/SerializedNodeCollection.md)

#### Defined in

[packages/cad-styling/src/NodeCollection.ts:46](https://github.com/cognitedata/reveal/blob/2acd9d17229d2bc8e309653b4d6a39ad941e44f1/viewer/packages/cad-styling/src/NodeCollection.ts#L46)


<!-- SOURCE_END: reveal/documentation\versioned_docs\version-4.x\api\@cognite\reveal\classes\NodeCollection.md -->

================================================================================


<!-- SOURCE_START: reveal/documentation\versioned_docs\version-4.x\api\@cognite\reveal\classes\NodeIdNodeCollection.md -->
## File: reveal/documentation\versioned_docs\version-4.x\api\@cognite\reveal\classes\NodeIdNodeCollection.md

# Class: NodeIdNodeCollection

Collection that holds a set of nodes including children identified by nodeIds. Note that
this involves remapping IDs to "tree indices" and subtree sized used by Reveal using
the CDF API. Its often better to use one of the other node collections or

## See

whenever possible for best performance.

## Extends

- [`CdfNodeCollectionBase`](CdfNodeCollectionBase.md)

## Constructors

### new NodeIdNodeCollection()

> **new NodeIdNodeCollection**(`client`, `model`): [`NodeIdNodeCollection`](NodeIdNodeCollection.md)

#### Parameters

 **client**: `CogniteClient`

 **model**: [`CdfModelNodeCollectionDataProvider`](../interfaces/CdfModelNodeCollectionDataProvider.md)

#### Returns

[`NodeIdNodeCollection`](NodeIdNodeCollection.md)

#### Overrides

[`CdfNodeCollectionBase`](CdfNodeCollectionBase.md) . [`constructor`](CdfNodeCollectionBase.md#constructors)

#### Defined in

[packages/cad-styling/src/NodeIdNodeCollection.ts:25](https://github.com/cognitedata/reveal/blob/2acd9d17229d2bc8e309653b4d6a39ad941e44f1/viewer/packages/cad-styling/src/NodeIdNodeCollection.ts#L25)

## Properties

### classToken

> `readonly` `static` **classToken**: `"NodeIdNodeCollection"` = `'NodeIdNodeCollection'`

#### Defined in

[packages/cad-styling/src/NodeIdNodeCollection.ts:18](https://github.com/cognitedata/reveal/blob/2acd9d17229d2bc8e309653b4d6a39ad941e44f1/viewer/packages/cad-styling/src/NodeIdNodeCollection.ts#L18)

## Accessors

### classToken

> `get` **classToken**(): `string`

#### Returns

`string`

#### Inherited from

[`CdfNodeCollectionBase`](CdfNodeCollectionBase.md) . [`classToken`](CdfNodeCollectionBase.md#classtoken)

#### Defined in

[packages/cad-styling/src/NodeCollection.ts:23](https://github.com/cognitedata/reveal/blob/2acd9d17229d2bc8e309653b4d6a39ad941e44f1/viewer/packages/cad-styling/src/NodeCollection.ts#L23)

***

### isLoading

> `get` **isLoading**(): `boolean`

#### Returns

`boolean`

#### Inherited from

[`CdfNodeCollectionBase`](CdfNodeCollectionBase.md) . [`isLoading`](CdfNodeCollectionBase.md#isloading)

#### Defined in

[packages/cad-styling/src/CdfNodeCollectionBase.ts:25](https://github.com/cognitedata/reveal/blob/2acd9d17229d2bc8e309653b4d6a39ad941e44f1/viewer/packages/cad-styling/src/CdfNodeCollectionBase.ts#L25)

## Methods

### clear()

> **clear**(): `void`

Clears the node collection and interrupts any ongoing operations.

#### Returns

`void`

#### Inherited from

[`CdfNodeCollectionBase`](CdfNodeCollectionBase.md) . [`clear`](CdfNodeCollectionBase.md#clear)

#### Defined in

[packages/cad-styling/src/CdfNodeCollectionBase.ts:69](https://github.com/cognitedata/reveal/blob/2acd9d17229d2bc8e309653b4d6a39ad941e44f1/viewer/packages/cad-styling/src/CdfNodeCollectionBase.ts#L69)

***

### executeFilter()

> **executeFilter**(`nodeIds`): `Promise`\<`void`\>

Populates the collection with the nodes with the IDs provided. All children of
the nodes are also included in the collection.

#### Parameters

 **nodeIds**: `number`[]

IDs of nodes to include in the collection.

#### Returns

`Promise`\<`void`\>

Promise that resolves when the collection is populated.

#### Defined in

[packages/cad-styling/src/NodeIdNodeCollection.ts:37](https://github.com/cognitedata/reveal/blob/2acd9d17229d2bc8e309653b4d6a39ad941e44f1/viewer/packages/cad-styling/src/NodeIdNodeCollection.ts#L37)

***

### getAreas()

> **getAreas**(): [`AreaCollection`](../interfaces/AreaCollection.md)

Returns areas surrounding the nodes in the collection. The areas
are boxes in "ThreeJS coordinates". Note that not all
implementations supports this.

#### Returns

[`AreaCollection`](../interfaces/AreaCollection.md)

#### Inherited from

[`CdfNodeCollectionBase`](CdfNodeCollectionBase.md) . [`getAreas`](CdfNodeCollectionBase.md#getareas)

#### Defined in

[packages/cad-styling/src/CdfNodeCollectionBase.ts:81](https://github.com/cognitedata/reveal/blob/2acd9d17229d2bc8e309653b4d6a39ad941e44f1/viewer/packages/cad-styling/src/CdfNodeCollectionBase.ts#L81)

***

### getIndexSet()

> **getIndexSet**(): [`IndexSet`](IndexSet.md)

#### Returns

[`IndexSet`](IndexSet.md)

#### Inherited from

[`CdfNodeCollectionBase`](CdfNodeCollectionBase.md) . [`getIndexSet`](CdfNodeCollectionBase.md#getindexset)

#### Defined in

[packages/cad-styling/src/CdfNodeCollectionBase.ts:77](https://github.com/cognitedata/reveal/blob/2acd9d17229d2bc8e309653b4d6a39ad941e44f1/viewer/packages/cad-styling/src/CdfNodeCollectionBase.ts#L77)

***

### off()

> **off**(`event`, `listener`): `void`

#### Parameters

 **event**: `"changed"`

 **listener**

#### Returns

`void`

#### Inherited from

[`CdfNodeCollectionBase`](CdfNodeCollectionBase.md) . [`off`](CdfNodeCollectionBase.md#off)

#### Defined in

[packages/cad-styling/src/NodeCollection.ts:32](https://github.com/cognitedata/reveal/blob/2acd9d17229d2bc8e309653b4d6a39ad941e44f1/viewer/packages/cad-styling/src/NodeCollection.ts#L32)

***

### on()

> **on**(`event`, `listener`): `void`

#### Parameters

 **event**: `"changed"`

 **listener**

#### Returns

`void`

#### Inherited from

[`CdfNodeCollectionBase`](CdfNodeCollectionBase.md) . [`on`](CdfNodeCollectionBase.md#on)

#### Defined in

[packages/cad-styling/src/NodeCollection.ts:27](https://github.com/cognitedata/reveal/blob/2acd9d17229d2bc8e309653b4d6a39ad941e44f1/viewer/packages/cad-styling/src/NodeCollection.ts#L27)

***

### serialize()

> **serialize**(): [`SerializedNodeCollection`](../type-aliases/SerializedNodeCollection.md)

#### Returns

[`SerializedNodeCollection`](../type-aliases/SerializedNodeCollection.md)

#### Overrides

[`CdfNodeCollectionBase`](CdfNodeCollectionBase.md) . [`serialize`](CdfNodeCollectionBase.md#serialize)

#### Defined in

[packages/cad-styling/src/NodeIdNodeCollection.ts:58](https://github.com/cognitedata/reveal/blob/2acd9d17229d2bc8e309653b4d6a39ad941e44f1/viewer/packages/cad-styling/src/NodeIdNodeCollection.ts#L58)

***

### deserialize()

> `static` **deserialize**(`descriptor`, `context`): `Promise` \<[`NodeIdNodeCollection`](NodeIdNodeCollection.md)\>

#### Parameters

 **descriptor**: [`SerializedNodeCollection`](../type-aliases/SerializedNodeCollection.md)

 **context**: [`NodeCollectionSerializationContext`](../type-aliases/NodeCollectionSerializationContext.md)

#### Returns

`Promise` \<[`NodeIdNodeCollection`](NodeIdNodeCollection.md)\>

#### Defined in

[packages/cad-styling/src/NodeIdNodeCollection.ts:65](https://github.com/cognitedata/reveal/blob/2acd9d17229d2bc8e309653b4d6a39ad941e44f1/viewer/packages/cad-styling/src/NodeIdNodeCollection.ts#L65)


<!-- SOURCE_END: reveal/documentation\versioned_docs\version-4.x\api\@cognite\reveal\classes\NodeIdNodeCollection.md -->

================================================================================


<!-- SOURCE_START: reveal/documentation\versioned_docs\version-4.x\api\@cognite\reveal\classes\NumericRange.md -->
## File: reveal/documentation\versioned_docs\version-4.x\api\@cognite\reveal\classes\NumericRange.md

# Class: NumericRange

## Constructors

### new NumericRange()

> **new NumericRange**(`from`, `count`): [`NumericRange`](NumericRange.md)

#### Parameters

 **from**: `number`

 **count**: `number`

#### Returns

[`NumericRange`](NumericRange.md)

#### Defined in

[packages/utilities/src/NumericRange.ts:10](https://github.com/cognitedata/reveal/blob/2acd9d17229d2bc8e309653b4d6a39ad941e44f1/viewer/packages/utilities/src/NumericRange.ts#L10)

## Properties

### count

> `readonly` **count**: `number`

#### Defined in

[packages/utilities/src/NumericRange.ts:7](https://github.com/cognitedata/reveal/blob/2acd9d17229d2bc8e309653b4d6a39ad941e44f1/viewer/packages/utilities/src/NumericRange.ts#L7)

***

### from

> `readonly` **from**: `number`

#### Defined in

[packages/utilities/src/NumericRange.ts:6](https://github.com/cognitedata/reveal/blob/2acd9d17229d2bc8e309653b4d6a39ad941e44f1/viewer/packages/utilities/src/NumericRange.ts#L6)

***

### toInclusive

> `readonly` **toInclusive**: `number`

#### Defined in

[packages/utilities/src/NumericRange.ts:8](https://github.com/cognitedata/reveal/blob/2acd9d17229d2bc8e309653b4d6a39ad941e44f1/viewer/packages/utilities/src/NumericRange.ts#L8)

## Methods

### contains()

> **contains**(`value`): `boolean`

#### Parameters

 **value**: `number`

#### Returns

`boolean`

#### Defined in

[packages/utilities/src/NumericRange.ts:38](https://github.com/cognitedata/reveal/blob/2acd9d17229d2bc8e309653b4d6a39ad941e44f1/viewer/packages/utilities/src/NumericRange.ts#L38)

***

### equal()

> **equal**(`other`): `boolean`

#### Parameters

 **other**: [`NumericRange`](NumericRange.md)

#### Returns

`boolean`

#### Defined in

[packages/utilities/src/NumericRange.ts:34](https://github.com/cognitedata/reveal/blob/2acd9d17229d2bc8e309653b4d6a39ad941e44f1/viewer/packages/utilities/src/NumericRange.ts#L34)

***

### forEach()

> **forEach**(`action`): `void`

#### Parameters

 **action**

#### Returns

`void`

#### Defined in

[packages/utilities/src/NumericRange.ts:72](https://github.com/cognitedata/reveal/blob/2acd9d17229d2bc8e309653b4d6a39ad941e44f1/viewer/packages/utilities/src/NumericRange.ts#L72)

***

### intersectionWith()

> **intersectionWith**(`range`): `undefined` \| [`NumericRange`](NumericRange.md)

#### Parameters

 **range**: [`NumericRange`](NumericRange.md)

#### Returns

`undefined` \| [`NumericRange`](NumericRange.md)

#### Defined in

[packages/utilities/src/NumericRange.ts:50](https://github.com/cognitedata/reveal/blob/2acd9d17229d2bc8e309653b4d6a39ad941e44f1/viewer/packages/utilities/src/NumericRange.ts#L50)

***

### intersects()

> **intersects**(`range`): `boolean`

#### Parameters

 **range**: [`NumericRange`](NumericRange.md)

#### Returns

`boolean`

#### Defined in

[packages/utilities/src/NumericRange.ts:42](https://github.com/cognitedata/reveal/blob/2acd9d17229d2bc8e309653b4d6a39ad941e44f1/viewer/packages/utilities/src/NumericRange.ts#L42)

***

### intersectsOrCoinciding()

> **intersectsOrCoinciding**(`range`): `boolean`

#### Parameters

 **range**: [`NumericRange`](NumericRange.md)

#### Returns

`boolean`

#### Defined in

[packages/utilities/src/NumericRange.ts:46](https://github.com/cognitedata/reveal/blob/2acd9d17229d2bc8e309653b4d6a39ad941e44f1/viewer/packages/utilities/src/NumericRange.ts#L46)

***

### isInside()

> **isInside**(`range`): `boolean`

#### Parameters

 **range**: [`NumericRange`](NumericRange.md)

#### Returns

`boolean`

#### Defined in

[packages/utilities/src/NumericRange.ts:61](https://github.com/cognitedata/reveal/blob/2acd9d17229d2bc8e309653b4d6a39ad941e44f1/viewer/packages/utilities/src/NumericRange.ts#L61)

***

### toArray()

> **toArray**(): `number`[]

#### Returns

`number`[]

#### Defined in

[packages/utilities/src/NumericRange.ts:30](https://github.com/cognitedata/reveal/blob/2acd9d17229d2bc8e309653b4d6a39ad941e44f1/viewer/packages/utilities/src/NumericRange.ts#L30)

***

### toString()

> **toString**(): `string`

#### Returns

`string`

#### Defined in

[packages/utilities/src/NumericRange.ts:78](https://github.com/cognitedata/reveal/blob/2acd9d17229d2bc8e309653b4d6a39ad941e44f1/viewer/packages/utilities/src/NumericRange.ts#L78)

***

### union()

> **union**(`range`): [`NumericRange`](NumericRange.md)

#### Parameters

 **range**: [`NumericRange`](NumericRange.md)

#### Returns

[`NumericRange`](NumericRange.md)

#### Defined in

[packages/utilities/src/NumericRange.ts:65](https://github.com/cognitedata/reveal/blob/2acd9d17229d2bc8e309653b4d6a39ad941e44f1/viewer/packages/utilities/src/NumericRange.ts#L65)

***

### values()

> **values**(): `Generator`\<`number`, `any`, `unknown`\>

#### Returns

`Generator`\<`number`, `any`, `unknown`\>

#### Defined in

[packages/utilities/src/NumericRange.ts:24](https://github.com/cognitedata/reveal/blob/2acd9d17229d2bc8e309653b4d6a39ad941e44f1/viewer/packages/utilities/src/NumericRange.ts#L24)

***

### createFromInterval()

> `static` **createFromInterval**(`from`, `toInclusive`): [`NumericRange`](NumericRange.md)

#### Parameters

 **from**: `number`

 **toInclusive**: `number`

#### Returns

[`NumericRange`](NumericRange.md)

#### Defined in

[packages/utilities/src/NumericRange.ts:20](https://github.com/cognitedata/reveal/blob/2acd9d17229d2bc8e309653b4d6a39ad941e44f1/viewer/packages/utilities/src/NumericRange.ts#L20)

***

### isNumericRange()

> `static` **isNumericRange**(`value`): `value is NumericRange`

#### Parameters

 **value**: `any`

#### Returns

`value is NumericRange`

#### Defined in

[packages/utilities/src/NumericRange.ts:82](https://github.com/cognitedata/reveal/blob/2acd9d17229d2bc8e309653b4d6a39ad941e44f1/viewer/packages/utilities/src/NumericRange.ts#L82)


<!-- SOURCE_END: reveal/documentation\versioned_docs\version-4.x\api\@cognite\reveal\classes\NumericRange.md -->

================================================================================


<!-- SOURCE_START: reveal/documentation\versioned_docs\version-4.x\api\@cognite\reveal\classes\Overlay3DCollection.md -->
## File: reveal/documentation\versioned_docs\version-4.x\api\@cognite\reveal\classes\Overlay3DCollection.md

# Class: Overlay3DCollection\<MetadataType\>

A collection of overlay icons with associated data

## Extends

- `Object3D`

## Type Parameters

 **MetadataType** = [`DefaultOverlay3DContentType`](../type-aliases/DefaultOverlay3DContentType.md)

## Implements

- [`OverlayCollection`](../interfaces/OverlayCollection.md)\<`MetadataType`\>

## Constructors

### new Overlay3DCollection()

> **new Overlay3DCollection**\<`MetadataType`\>(`overlayInfos`, `options`?): [`Overlay3DCollection`](Overlay3DCollection.md)\<`MetadataType`\>

Construct a collection of 3D overlay icons

#### Parameters

 **overlayInfos**: [`OverlayInfo`](../type-aliases/OverlayInfo.md)\<`MetadataType`\>[]

Initializes the collection with the list of overlays. The length
of the list will be the maximum allowed number of icons in this collection, unless it's empty,
in which case a default maximum limit will be used instead

 **options?**: [`Overlay3DCollectionOptions`](../type-aliases/Overlay3DCollectionOptions.md)

Additional options for this overlay collection

#### Returns

[`Overlay3DCollection`](Overlay3DCollection.md)\<`MetadataType`\>

#### Overrides

`Object3D.constructor`

#### Defined in

[packages/3d-overlays/src/Overlay3DCollection.ts:68](https://github.com/cognitedata/reveal/blob/2acd9d17229d2bc8e309653b4d6a39ad941e44f1/viewer/packages/3d-overlays/src/Overlay3DCollection.ts#L68)

## Methods

### addOverlays()

> **addOverlays**(`overlayInfos`): [`Overlay3D`](../interfaces/Overlay3D.md)\<`MetadataType`\>[]

Add more overlays into this collection

#### Parameters

 **overlayInfos**: [`OverlayInfo`](../type-aliases/OverlayInfo.md)\<`MetadataType`\>[]

#### Returns

[`Overlay3D`](../interfaces/Overlay3D.md)\<`MetadataType`\>[]

#### Implementation of

[`OverlayCollection`](../interfaces/OverlayCollection.md) . [`addOverlays`](../interfaces/OverlayCollection.md#addoverlays)

#### Defined in

[packages/3d-overlays/src/Overlay3DCollection.ts:115](https://github.com/cognitedata/reveal/blob/2acd9d17229d2bc8e309653b4d6a39ad941e44f1/viewer/packages/3d-overlays/src/Overlay3DCollection.ts#L115)

***

### dispose()

> **dispose**(): `void`

Dispose this collection and icons with all associated resources

#### Returns

`void`

#### Defined in

[packages/3d-overlays/src/Overlay3DCollection.ts:216](https://github.com/cognitedata/reveal/blob/2acd9d17229d2bc8e309653b4d6a39ad941e44f1/viewer/packages/3d-overlays/src/Overlay3DCollection.ts#L216)

***

### getOverlays()

> **getOverlays**(): [`Overlay3D`](../interfaces/Overlay3D.md)\<`MetadataType`\>[]

Get the overlay icons contained in this collection

#### Returns

[`Overlay3D`](../interfaces/Overlay3D.md)\<`MetadataType`\>[]

#### Implementation of

[`OverlayCollection`](../interfaces/OverlayCollection.md) . [`getOverlays`](../interfaces/OverlayCollection.md#getoverlays)

#### Defined in

[packages/3d-overlays/src/Overlay3DCollection.ts:108](https://github.com/cognitedata/reveal/blob/2acd9d17229d2bc8e309653b4d6a39ad941e44f1/viewer/packages/3d-overlays/src/Overlay3DCollection.ts#L108)

***

### intersectOverlays()

> **intersectOverlays**(`normalizedCoordinates`, `camera`): `undefined` \| [`Overlay3D`](../interfaces/Overlay3D.md)\<`MetadataType`\>

Run intersection on icons in this collection. Returns the closest hit

#### Parameters

 **normalizedCoordinates**: `Vector2`

 **camera**: `Camera`

#### Returns

`undefined` \| [`Overlay3D`](../interfaces/Overlay3D.md)\<`MetadataType`\>

#### Defined in

[packages/3d-overlays/src/Overlay3DCollection.ts:166](https://github.com/cognitedata/reveal/blob/2acd9d17229d2bc8e309653b4d6a39ad941e44f1/viewer/packages/3d-overlays/src/Overlay3DCollection.ts#L166)

***

### removeAllOverlays()

> **removeAllOverlays**(): `void`

Clean up all icons in this collection

#### Returns

`void`

#### Implementation of

[`OverlayCollection`](../interfaces/OverlayCollection.md) . [`removeAllOverlays`](../interfaces/OverlayCollection.md#removealloverlays)

#### Defined in

[packages/3d-overlays/src/Overlay3DCollection.ts:156](https://github.com/cognitedata/reveal/blob/2acd9d17229d2bc8e309653b4d6a39ad941e44f1/viewer/packages/3d-overlays/src/Overlay3DCollection.ts#L156)

***

### removeOverlays()

> **removeOverlays**(`overlays`): `void`

Remove the listed overlays from this collection

#### Parameters

 **overlays**: [`Overlay3D`](../interfaces/Overlay3D.md)\<`MetadataType`\>[]

#### Returns

`void`

#### Implementation of

[`OverlayCollection`](../interfaces/OverlayCollection.md) . [`removeOverlays`](../interfaces/OverlayCollection.md#removeoverlays)

#### Defined in

[packages/3d-overlays/src/Overlay3DCollection.ts:146](https://github.com/cognitedata/reveal/blob/2acd9d17229d2bc8e309653b4d6a39ad941e44f1/viewer/packages/3d-overlays/src/Overlay3DCollection.ts#L146)

***

### setVisibility()

> **setVisibility**(`visibility`): `void`

Set whether this collection is visible or not

#### Parameters

 **visibility**: `boolean`

#### Returns

`void`

#### Implementation of

[`OverlayCollection`](../interfaces/OverlayCollection.md) . [`setVisibility`](../interfaces/OverlayCollection.md#setvisibility)

#### Defined in

[packages/3d-overlays/src/Overlay3DCollection.ts:101](https://github.com/cognitedata/reveal/blob/2acd9d17229d2bc8e309653b4d6a39ad941e44f1/viewer/packages/3d-overlays/src/Overlay3DCollection.ts#L101)


<!-- SOURCE_END: reveal/documentation\versioned_docs\version-4.x\api\@cognite\reveal\classes\Overlay3DCollection.md -->

================================================================================


<!-- SOURCE_START: reveal/documentation\versioned_docs\version-4.x\api\@cognite\reveal\classes\PointCloudObjectCollection.md -->
## File: reveal/documentation\versioned_docs\version-4.x\api\@cognite\reveal\classes\PointCloudObjectCollection.md

# Class: `abstract` PointCloudObjectCollection

Base class for collections of point cloud objects intended for styling operations

## Extended by

- [`AnnotationIdPointCloudObjectCollection`](AnnotationIdPointCloudObjectCollection.md)

## Constructors

### new PointCloudObjectCollection()

> **new PointCloudObjectCollection**(): [`PointCloudObjectCollection`](PointCloudObjectCollection.md)

#### Returns

[`PointCloudObjectCollection`](PointCloudObjectCollection.md)

## Accessors

### isLoading

> `get` `abstract` **isLoading**(): `boolean`

#### Returns

`boolean`

whether the collection is still loading data in the background i.e. not yet ready for use

#### Defined in

[packages/pointcloud-styling/src/PointCloudObjectCollection.ts:23](https://github.com/cognitedata/reveal/blob/2acd9d17229d2bc8e309653b4d6a39ad941e44f1/viewer/packages/pointcloud-styling/src/PointCloudObjectCollection.ts#L23)

## Methods

### getAnnotationIds()

> `abstract` **getAnnotationIds**(): `Iterable`\<`number`\>

#### Returns

`Iterable`\<`number`\>

annotation IDs of the annotations for the objects represented by this PointCloudObjectCollection instance

#### Defined in

[packages/pointcloud-styling/src/PointCloudObjectCollection.ts:18](https://github.com/cognitedata/reveal/blob/2acd9d17229d2bc8e309653b4d6a39ad941e44f1/viewer/packages/pointcloud-styling/src/PointCloudObjectCollection.ts#L18)

***

### off()

> **off**(`event`, `listener`): `void`

#### Parameters

 **event**: `"changed"`

 **listener**

#### Returns

`void`

#### Defined in

[packages/pointcloud-styling/src/PointCloudObjectCollection.ts:30](https://github.com/cognitedata/reveal/blob/2acd9d17229d2bc8e309653b4d6a39ad941e44f1/viewer/packages/pointcloud-styling/src/PointCloudObjectCollection.ts#L30)

***

### on()

> **on**(`event`, `listener`): `void`

#### Parameters

 **event**: `"changed"`

 **listener**

#### Returns

`void`

#### Defined in

[packages/pointcloud-styling/src/PointCloudObjectCollection.ts:25](https://github.com/cognitedata/reveal/blob/2acd9d17229d2bc8e309653b4d6a39ad941e44f1/viewer/packages/pointcloud-styling/src/PointCloudObjectCollection.ts#L25)


<!-- SOURCE_END: reveal/documentation\versioned_docs\version-4.x\api\@cognite\reveal\classes\PointCloudObjectCollection.md -->

================================================================================


<!-- SOURCE_START: reveal/documentation\versioned_docs\version-4.x\api\@cognite\reveal\classes\PointerEvents.md -->
## File: reveal/documentation\versioned_docs\version-4.x\api\@cognite\reveal\classes\PointerEvents.md

# Class: PointerEvents

**`Beta`**

This base should be extended for listen to various pointer events.

## Constructors

### new PointerEvents()

> **new PointerEvents**(): [`PointerEvents`](PointerEvents.md)

**`Beta`**

#### Returns

[`PointerEvents`](PointerEvents.md)

## Accessors

### isEnabled

> `get` **isEnabled**(): `boolean`

**`Beta`**

#### Returns

`boolean`

#### Defined in

[packages/utilities/src/events/PointerEvents.ts:31](https://github.com/cognitedata/reveal/blob/2acd9d17229d2bc8e309653b4d6a39ad941e44f1/viewer/packages/utilities/src/events/PointerEvents.ts#L31)

## Methods

### onClick()

> **onClick**(`_event`): `Promise`\<`void`\>

**`Beta`**

#### Parameters

 **\_event**: `PointerEvent`

#### Returns

`Promise`\<`void`\>

#### Defined in

[packages/utilities/src/events/PointerEvents.ts:12](https://github.com/cognitedata/reveal/blob/2acd9d17229d2bc8e309653b4d6a39ad941e44f1/viewer/packages/utilities/src/events/PointerEvents.ts#L12)

***

### onDoubleClick()

> **onDoubleClick**(`_event`): `Promise`\<`void`\>

**`Beta`**

#### Parameters

 **\_event**: `PointerEvent`

#### Returns

`Promise`\<`void`\>

#### Defined in

[packages/utilities/src/events/PointerEvents.ts:16](https://github.com/cognitedata/reveal/blob/2acd9d17229d2bc8e309653b4d6a39ad941e44f1/viewer/packages/utilities/src/events/PointerEvents.ts#L16)

***

### onHover()

> **onHover**(`_event`): `void`

**`Beta`**

#### Parameters

 **\_event**: `PointerEvent`

#### Returns

`void`

#### Defined in

[packages/utilities/src/events/PointerEvents.ts:10](https://github.com/cognitedata/reveal/blob/2acd9d17229d2bc8e309653b4d6a39ad941e44f1/viewer/packages/utilities/src/events/PointerEvents.ts#L10)

***

### onPointerDown()

> **onPointerDown**(`_event`, `_leftButton`): `Promise`\<`void`\>

**`Beta`**

#### Parameters

 **\_event**: `PointerEvent`

 **\_leftButton**: `boolean`

#### Returns

`Promise`\<`void`\>

#### Defined in

[packages/utilities/src/events/PointerEvents.ts:20](https://github.com/cognitedata/reveal/blob/2acd9d17229d2bc8e309653b4d6a39ad941e44f1/viewer/packages/utilities/src/events/PointerEvents.ts#L20)

***

### onPointerDrag()

> **onPointerDrag**(`_event`, `_leftButton`): `Promise`\<`void`\>

**`Beta`**

#### Parameters

 **\_event**: `PointerEvent`

 **\_leftButton**: `boolean`

#### Returns

`Promise`\<`void`\>

#### Defined in

[packages/utilities/src/events/PointerEvents.ts:27](https://github.com/cognitedata/reveal/blob/2acd9d17229d2bc8e309653b4d6a39ad941e44f1/viewer/packages/utilities/src/events/PointerEvents.ts#L27)

***

### onPointerUp()

> **onPointerUp**(`_event`, `_leftButton`): `Promise`\<`void`\>

**`Beta`**

#### Parameters

 **\_event**: `PointerEvent`

 **\_leftButton**: `boolean`

#### Returns

`Promise`\<`void`\>

#### Defined in

[packages/utilities/src/events/PointerEvents.ts:23](https://github.com/cognitedata/reveal/blob/2acd9d17229d2bc8e309653b4d6a39ad941e44f1/viewer/packages/utilities/src/events/PointerEvents.ts#L23)


<!-- SOURCE_END: reveal/documentation\versioned_docs\version-4.x\api\@cognite\reveal\classes\PointerEvents.md -->

================================================================================


<!-- SOURCE_START: reveal/documentation\versioned_docs\version-4.x\api\@cognite\reveal\classes\PointerEventsTarget.md -->
## File: reveal/documentation\versioned_docs\version-4.x\api\@cognite\reveal\classes\PointerEventsTarget.md

# Class: PointerEventsTarget

**`Beta`**

This class fires click, double click, hover end similar events at a PointerEvents
onClick will fired if it's a single click, and the mouse hasn't move too much
If onDoubleClick is fired, the onClick will not be fired
onHover will be fired only if the mouse button is not pressed and not to often
If mouse, the onDoubleClick and onClick is fired when the left mouse button is pressed
onPointerDrag will be fired wnen the mouse button is pressed and the mouse is moving

## Constructors

### new PointerEventsTarget()

> **new PointerEventsTarget**(`domElement`, `events`): [`PointerEventsTarget`](PointerEventsTarget.md)

**`Beta`**

#### Parameters

 **domElement**: `HTMLElement`

 **events**: [`PointerEvents`](PointerEvents.md)

#### Returns

[`PointerEventsTarget`](PointerEventsTarget.md)

#### Defined in

[packages/utilities/src/events/PointerEventsTarget.ts:49](https://github.com/cognitedata/reveal/blob/2acd9d17229d2bc8e309653b4d6a39ad941e44f1/viewer/packages/utilities/src/events/PointerEventsTarget.ts#L49)

## Methods

### addEventListeners()

> **addEventListeners**(): `void`

**`Beta`**

#### Returns

`void`

#### Defined in

[packages/utilities/src/events/PointerEventsTarget.ts:58](https://github.com/cognitedata/reveal/blob/2acd9d17229d2bc8e309653b4d6a39ad941e44f1/viewer/packages/utilities/src/events/PointerEventsTarget.ts#L58)

***

### removeEventListeners()

> **removeEventListeners**(): `void`

**`Beta`**

#### Returns

`void`

#### Defined in

[packages/utilities/src/events/PointerEventsTarget.ts:65](https://github.com/cognitedata/reveal/blob/2acd9d17229d2bc8e309653b4d6a39ad941e44f1/viewer/packages/utilities/src/events/PointerEventsTarget.ts#L65)


<!-- SOURCE_END: reveal/documentation\versioned_docs\version-4.x\api\@cognite\reveal\classes\PointerEventsTarget.md -->

================================================================================


<!-- SOURCE_START: reveal/documentation\versioned_docs\version-4.x\api\@cognite\reveal\classes\PropertyFilterNodeCollection.md -->
## File: reveal/documentation\versioned_docs\version-4.x\api\@cognite\reveal\classes\PropertyFilterNodeCollection.md

# Class: PropertyFilterNodeCollection

Represents a set of nodes that has matching node properties to a provided filter. Note that
a node is considered to match if it or a [NodeCollection](NodeCollection.md) ancestors match the filter.

## Extends

- [`CdfNodeCollectionBase`](CdfNodeCollectionBase.md)

## Constructors

### new PropertyFilterNodeCollection()

> **new PropertyFilterNodeCollection**(`client`, `model`, `options`): [`PropertyFilterNodeCollection`](PropertyFilterNodeCollection.md)

#### Parameters

 **client**: `CogniteClient`

 **model**: [`CdfModelNodeCollectionDataProvider`](../interfaces/CdfModelNodeCollectionDataProvider.md)

 **options**: [`PropertyFilterNodeCollectionOptions`](../type-aliases/PropertyFilterNodeCollectionOptions.md) = `{}`

#### Returns

[`PropertyFilterNodeCollection`](PropertyFilterNodeCollection.md)

#### Overrides

[`CdfNodeCollectionBase`](CdfNodeCollectionBase.md) . [`constructor`](CdfNodeCollectionBase.md#constructors)

#### Defined in

[packages/cad-styling/src/PropertyFilterNodeCollection.ts:44](https://github.com/cognitedata/reveal/blob/2acd9d17229d2bc8e309653b4d6a39ad941e44f1/viewer/packages/cad-styling/src/PropertyFilterNodeCollection.ts#L44)

## Properties

### classToken

> `readonly` `static` **classToken**: `"PropertyFilterNodeCollection"` = `'PropertyFilterNodeCollection'`

#### Defined in

[packages/cad-styling/src/PropertyFilterNodeCollection.ts:32](https://github.com/cognitedata/reveal/blob/2acd9d17229d2bc8e309653b4d6a39ad941e44f1/viewer/packages/cad-styling/src/PropertyFilterNodeCollection.ts#L32)

## Accessors

### classToken

> `get` **classToken**(): `string`

#### Returns

`string`

#### Inherited from

[`CdfNodeCollectionBase`](CdfNodeCollectionBase.md) . [`classToken`](CdfNodeCollectionBase.md#classtoken)

#### Defined in

[packages/cad-styling/src/NodeCollection.ts:23](https://github.com/cognitedata/reveal/blob/2acd9d17229d2bc8e309653b4d6a39ad941e44f1/viewer/packages/cad-styling/src/NodeCollection.ts#L23)

***

### isLoading

> `get` **isLoading**(): `boolean`

#### Returns

`boolean`

#### Inherited from

[`CdfNodeCollectionBase`](CdfNodeCollectionBase.md) . [`isLoading`](CdfNodeCollectionBase.md#isloading)

#### Defined in

[packages/cad-styling/src/CdfNodeCollectionBase.ts:25](https://github.com/cognitedata/reveal/blob/2acd9d17229d2bc8e309653b4d6a39ad941e44f1/viewer/packages/cad-styling/src/CdfNodeCollectionBase.ts#L25)

## Methods

### clear()

> **clear**(): `void`

Clears the node collection and interrupts any ongoing operations.

#### Returns

`void`

#### Inherited from

[`CdfNodeCollectionBase`](CdfNodeCollectionBase.md) . [`clear`](CdfNodeCollectionBase.md#clear)

#### Defined in

[packages/cad-styling/src/CdfNodeCollectionBase.ts:69](https://github.com/cognitedata/reveal/blob/2acd9d17229d2bc8e309653b4d6a39ad941e44f1/viewer/packages/cad-styling/src/CdfNodeCollectionBase.ts#L69)

***

### executeFilter()

> **executeFilter**(`filter`): `Promise`\<`void`\>

Populates the node collection with nodes matching the provided filter. This will replace
the current nodes held by the filter.

#### Parameters

 **filter**

A filter for matching node properties.

#### Returns

`Promise`\<`void`\>

#### Example

```
set.executeFilter({ 'PDMS': { 'Module': 'AQ550' }});
```

#### Defined in

[packages/cad-styling/src/PropertyFilterNodeCollection.ts:64](https://github.com/cognitedata/reveal/blob/2acd9d17229d2bc8e309653b4d6a39ad941e44f1/viewer/packages/cad-styling/src/PropertyFilterNodeCollection.ts#L64)

***

### getAreas()

> **getAreas**(): [`AreaCollection`](../interfaces/AreaCollection.md)

Returns areas surrounding the nodes in the collection. The areas
are boxes in "ThreeJS coordinates". Note that not all
implementations supports this.

#### Returns

[`AreaCollection`](../interfaces/AreaCollection.md)

#### Inherited from

[`CdfNodeCollectionBase`](CdfNodeCollectionBase.md) . [`getAreas`](CdfNodeCollectionBase.md#getareas)

#### Defined in

[packages/cad-styling/src/CdfNodeCollectionBase.ts:81](https://github.com/cognitedata/reveal/blob/2acd9d17229d2bc8e309653b4d6a39ad941e44f1/viewer/packages/cad-styling/src/CdfNodeCollectionBase.ts#L81)

***

### getIndexSet()

> **getIndexSet**(): [`IndexSet`](IndexSet.md)

#### Returns

[`IndexSet`](IndexSet.md)

#### Inherited from

[`CdfNodeCollectionBase`](CdfNodeCollectionBase.md) . [`getIndexSet`](CdfNodeCollectionBase.md#getindexset)

#### Defined in

[packages/cad-styling/src/CdfNodeCollectionBase.ts:77](https://github.com/cognitedata/reveal/blob/2acd9d17229d2bc8e309653b4d6a39ad941e44f1/viewer/packages/cad-styling/src/CdfNodeCollectionBase.ts#L77)

***

### off()

> **off**(`event`, `listener`): `void`

#### Parameters

 **event**: `"changed"`

 **listener**

#### Returns

`void`

#### Inherited from

[`CdfNodeCollectionBase`](CdfNodeCollectionBase.md) . [`off`](CdfNodeCollectionBase.md#off)

#### Defined in

[packages/cad-styling/src/NodeCollection.ts:32](https://github.com/cognitedata/reveal/blob/2acd9d17229d2bc8e309653b4d6a39ad941e44f1/viewer/packages/cad-styling/src/NodeCollection.ts#L32)

***

### on()

> **on**(`event`, `listener`): `void`

#### Parameters

 **event**: `"changed"`

 **listener**

#### Returns

`void`

#### Inherited from

[`CdfNodeCollectionBase`](CdfNodeCollectionBase.md) . [`on`](CdfNodeCollectionBase.md#on)

#### Defined in

[packages/cad-styling/src/NodeCollection.ts:27](https://github.com/cognitedata/reveal/blob/2acd9d17229d2bc8e309653b4d6a39ad941e44f1/viewer/packages/cad-styling/src/NodeCollection.ts#L27)

***

### serialize()

> **serialize**(): [`SerializedNodeCollection`](../type-aliases/SerializedNodeCollection.md)

#### Returns

[`SerializedNodeCollection`](../type-aliases/SerializedNodeCollection.md)

#### Overrides

[`CdfNodeCollectionBase`](CdfNodeCollectionBase.md) . [`serialize`](CdfNodeCollectionBase.md#serialize)

#### Defined in

[packages/cad-styling/src/PropertyFilterNodeCollection.ts:83](https://github.com/cognitedata/reveal/blob/2acd9d17229d2bc8e309653b4d6a39ad941e44f1/viewer/packages/cad-styling/src/PropertyFilterNodeCollection.ts#L83)


<!-- SOURCE_END: reveal/documentation\versioned_docs\version-4.x\api\@cognite\reveal\classes\PropertyFilterNodeCollection.md -->

================================================================================


<!-- SOURCE_START: reveal/documentation\versioned_docs\version-4.x\api\@cognite\reveal\classes\SinglePropertyFilterNodeCollection.md -->
## File: reveal/documentation\versioned_docs\version-4.x\api\@cognite\reveal\classes\SinglePropertyFilterNodeCollection.md

# Class: SinglePropertyFilterNodeCollection

Node collection that filters nodes based on a node property from a list of values, similarly to how
`SELECT ... IN (...)` works. This is useful when looking up nodes based on a list of identifiers,
nodes within a set of areas or systems. The node set is optimized for matching with properties with
a large number of values (i.e. thousands).

## Extends

- [`CdfNodeCollectionBase`](CdfNodeCollectionBase.md)

## Constructors

### new SinglePropertyFilterNodeCollection()

> **new SinglePropertyFilterNodeCollection**(`client`, `model`, `options`): [`SinglePropertyFilterNodeCollection`](SinglePropertyFilterNodeCollection.md)

Construct a new node set.

#### Parameters

 **client**: `CogniteClient`

CogniteClient authenticated to the project the model is loaded from.

 **model**: [`CdfModelNodeCollectionDataProvider`](../interfaces/CdfModelNodeCollectionDataProvider.md)

CAD model.

 **options**: [`PropertyFilterNodeCollectionOptions`](../type-aliases/PropertyFilterNodeCollectionOptions.md) = `{}`

#### Returns

[`SinglePropertyFilterNodeCollection`](SinglePropertyFilterNodeCollection.md)

#### Overrides

[`CdfNodeCollectionBase`](CdfNodeCollectionBase.md) . [`constructor`](CdfNodeCollectionBase.md#constructors)

#### Defined in

[packages/cad-styling/src/SinglePropertyFilterNodeCollection.ts:41](https://github.com/cognitedata/reveal/blob/2acd9d17229d2bc8e309653b4d6a39ad941e44f1/viewer/packages/cad-styling/src/SinglePropertyFilterNodeCollection.ts#L41)

## Properties

### classToken

> `readonly` `static` **classToken**: `"SinglePropertyNodeCollection"` = `'SinglePropertyNodeCollection'`

#### Defined in

[packages/cad-styling/src/SinglePropertyFilterNodeCollection.ts:24](https://github.com/cognitedata/reveal/blob/2acd9d17229d2bc8e309653b4d6a39ad941e44f1/viewer/packages/cad-styling/src/SinglePropertyFilterNodeCollection.ts#L24)

## Accessors

### classToken

> `get` **classToken**(): `string`

#### Returns

`string`

#### Inherited from

[`CdfNodeCollectionBase`](CdfNodeCollectionBase.md) . [`classToken`](CdfNodeCollectionBase.md#classtoken)

#### Defined in

[packages/cad-styling/src/NodeCollection.ts:23](https://github.com/cognitedata/reveal/blob/2acd9d17229d2bc8e309653b4d6a39ad941e44f1/viewer/packages/cad-styling/src/NodeCollection.ts#L23)

***

### isLoading

> `get` **isLoading**(): `boolean`

#### Returns

`boolean`

#### Inherited from

[`CdfNodeCollectionBase`](CdfNodeCollectionBase.md) . [`isLoading`](CdfNodeCollectionBase.md#isloading)

#### Defined in

[packages/cad-styling/src/CdfNodeCollectionBase.ts:25](https://github.com/cognitedata/reveal/blob/2acd9d17229d2bc8e309653b4d6a39ad941e44f1/viewer/packages/cad-styling/src/CdfNodeCollectionBase.ts#L25)

## Methods

### clear()

> **clear**(): `void`

Clears the node collection and interrupts any ongoing operations.

#### Returns

`void`

#### Inherited from

[`CdfNodeCollectionBase`](CdfNodeCollectionBase.md) . [`clear`](CdfNodeCollectionBase.md#clear)

#### Defined in

[packages/cad-styling/src/CdfNodeCollectionBase.ts:69](https://github.com/cognitedata/reveal/blob/2acd9d17229d2bc8e309653b4d6a39ad941e44f1/viewer/packages/cad-styling/src/CdfNodeCollectionBase.ts#L69)

***

### executeFilter()

> **executeFilter**(`propertyCategory`, `propertyKey`, `propertyValues`): `Promise`\<`void`\>

Execute filter asynchronously, replacing any existing filter active. When propertyValues
contains more than 1000 elements, the operation will be split into multiple batches that
are executed in parallel. Note that when providing a PropertyFilterNodeCollectionOptions.requestPartitions
during construction of the node set, the total number of batches will be requestPartitions*numberOfBatches.

#### Parameters

 **propertyCategory**: `string`

Node property category, e.g. `'PDMS'`.

 **propertyKey**: `string`

Node property key, e.g. `':FU'`.

 **propertyValues**: `string`[]

Lookup values, e.g. `["AR100APG539","AP500INF534","AP400INF553", ...]`

#### Returns

`Promise`\<`void`\>

#### Defined in

[packages/cad-styling/src/SinglePropertyFilterNodeCollection.ts:62](https://github.com/cognitedata/reveal/blob/2acd9d17229d2bc8e309653b4d6a39ad941e44f1/viewer/packages/cad-styling/src/SinglePropertyFilterNodeCollection.ts#L62)

***

### getAreas()

> **getAreas**(): [`AreaCollection`](../interfaces/AreaCollection.md)

Returns areas surrounding the nodes in the collection. The areas
are boxes in "ThreeJS coordinates". Note that not all
implementations supports this.

#### Returns

[`AreaCollection`](../interfaces/AreaCollection.md)

#### Inherited from

[`CdfNodeCollectionBase`](CdfNodeCollectionBase.md) . [`getAreas`](CdfNodeCollectionBase.md#getareas)

#### Defined in

[packages/cad-styling/src/CdfNodeCollectionBase.ts:81](https://github.com/cognitedata/reveal/blob/2acd9d17229d2bc8e309653b4d6a39ad941e44f1/viewer/packages/cad-styling/src/CdfNodeCollectionBase.ts#L81)

***

### getIndexSet()

> **getIndexSet**(): [`IndexSet`](IndexSet.md)

#### Returns

[`IndexSet`](IndexSet.md)

#### Inherited from

[`CdfNodeCollectionBase`](CdfNodeCollectionBase.md) . [`getIndexSet`](CdfNodeCollectionBase.md#getindexset)

#### Defined in

[packages/cad-styling/src/CdfNodeCollectionBase.ts:77](https://github.com/cognitedata/reveal/blob/2acd9d17229d2bc8e309653b4d6a39ad941e44f1/viewer/packages/cad-styling/src/CdfNodeCollectionBase.ts#L77)

***

### off()

> **off**(`event`, `listener`): `void`

#### Parameters

 **event**: `"changed"`

 **listener**

#### Returns

`void`

#### Inherited from

[`CdfNodeCollectionBase`](CdfNodeCollectionBase.md) . [`off`](CdfNodeCollectionBase.md#off)

#### Defined in

[packages/cad-styling/src/NodeCollection.ts:32](https://github.com/cognitedata/reveal/blob/2acd9d17229d2bc8e309653b4d6a39ad941e44f1/viewer/packages/cad-styling/src/NodeCollection.ts#L32)

***

### on()

> **on**(`event`, `listener`): `void`

#### Parameters

 **event**: `"changed"`

 **listener**

#### Returns

`void`

#### Inherited from

[`CdfNodeCollectionBase`](CdfNodeCollectionBase.md) . [`on`](CdfNodeCollectionBase.md#on)

#### Defined in

[packages/cad-styling/src/NodeCollection.ts:27](https://github.com/cognitedata/reveal/blob/2acd9d17229d2bc8e309653b4d6a39ad941e44f1/viewer/packages/cad-styling/src/NodeCollection.ts#L27)

***

### serialize()

> **serialize**(): [`SerializedNodeCollection`](../type-aliases/SerializedNodeCollection.md)

#### Returns

[`SerializedNodeCollection`](../type-aliases/SerializedNodeCollection.md)

#### Overrides

[`CdfNodeCollectionBase`](CdfNodeCollectionBase.md) . [`serialize`](CdfNodeCollectionBase.md#serialize)

#### Defined in

[packages/cad-styling/src/SinglePropertyFilterNodeCollection.ts:97](https://github.com/cognitedata/reveal/blob/2acd9d17229d2bc8e309653b4d6a39ad941e44f1/viewer/packages/cad-styling/src/SinglePropertyFilterNodeCollection.ts#L97)


<!-- SOURCE_END: reveal/documentation\versioned_docs\version-4.x\api\@cognite\reveal\classes\SinglePropertyFilterNodeCollection.md -->

================================================================================


<!-- SOURCE_START: reveal/documentation\versioned_docs\version-4.x\api\@cognite\reveal\classes\StyledPointCloudObjectCollection.md -->
## File: reveal/documentation\versioned_docs\version-4.x\api\@cognite\reveal\classes\StyledPointCloudObjectCollection.md

# Class: StyledPointCloudObjectCollection

Represents an object collection that is associated with an appearance

## Constructors

### new StyledPointCloudObjectCollection()

> **new StyledPointCloudObjectCollection**(`objectCollection`, `style`): [`StyledPointCloudObjectCollection`](StyledPointCloudObjectCollection.md)

#### Parameters

 **objectCollection**: [`PointCloudObjectCollection`](PointCloudObjectCollection.md)

 **style**: `Required` \<[`PointCloudAppearance`](../type-aliases/PointCloudAppearance.md)\>

#### Returns

[`StyledPointCloudObjectCollection`](StyledPointCloudObjectCollection.md)

#### Defined in

[packages/pointcloud-styling/src/StyledPointCloudObjectCollection.ts:12](https://github.com/cognitedata/reveal/blob/2acd9d17229d2bc8e309653b4d6a39ad941e44f1/viewer/packages/pointcloud-styling/src/StyledPointCloudObjectCollection.ts#L12)

## Properties

### objectCollection

> **objectCollection**: [`PointCloudObjectCollection`](PointCloudObjectCollection.md)

#### Defined in

[packages/pointcloud-styling/src/StyledPointCloudObjectCollection.ts:13](https://github.com/cognitedata/reveal/blob/2acd9d17229d2bc8e309653b4d6a39ad941e44f1/viewer/packages/pointcloud-styling/src/StyledPointCloudObjectCollection.ts#L13)

***

### style

> **style**: `Required` \<[`PointCloudAppearance`](../type-aliases/PointCloudAppearance.md)\>

#### Defined in

[packages/pointcloud-styling/src/StyledPointCloudObjectCollection.ts:14](https://github.com/cognitedata/reveal/blob/2acd9d17229d2bc8e309653b4d6a39ad941e44f1/viewer/packages/pointcloud-styling/src/StyledPointCloudObjectCollection.ts#L14)


<!-- SOURCE_END: reveal/documentation\versioned_docs\version-4.x\api\@cognite\reveal\classes\StyledPointCloudObjectCollection.md -->

================================================================================


<!-- SOURCE_START: reveal/documentation\versioned_docs\version-4.x\api\@cognite\reveal\classes\TreeIndexNodeCollection.md -->
## File: reveal/documentation\versioned_docs\version-4.x\api\@cognite\reveal\classes\TreeIndexNodeCollection.md

# Class: TreeIndexNodeCollection

Node collection that holds a set of nodes defined by a set of tree indices.

## Extends

- [`NodeCollection`](NodeCollection.md)

## Constructors

### new TreeIndexNodeCollection()

> **new TreeIndexNodeCollection**(`treeIndexSet`?): [`TreeIndexNodeCollection`](TreeIndexNodeCollection.md)

#### Parameters

 **treeIndexSet?**: [`IndexSet`](IndexSet.md)

#### Returns

[`TreeIndexNodeCollection`](TreeIndexNodeCollection.md)

#### Overrides

`NodeCollection.constructor`

#### Defined in

[packages/cad-styling/src/TreeIndexNodeCollection.ts:23](https://github.com/cognitedata/reveal/blob/2acd9d17229d2bc8e309653b4d6a39ad941e44f1/viewer/packages/cad-styling/src/TreeIndexNodeCollection.ts#L23)

### new TreeIndexNodeCollection()

> **new TreeIndexNodeCollection**(`treeIndices`?): [`TreeIndexNodeCollection`](TreeIndexNodeCollection.md)

#### Parameters

 **treeIndices?**: `Iterable`\<`number`\>

#### Returns

[`TreeIndexNodeCollection`](TreeIndexNodeCollection.md)

#### Overrides

`NodeCollection.constructor`

#### Defined in

[packages/cad-styling/src/TreeIndexNodeCollection.ts:24](https://github.com/cognitedata/reveal/blob/2acd9d17229d2bc8e309653b4d6a39ad941e44f1/viewer/packages/cad-styling/src/TreeIndexNodeCollection.ts#L24)

### new TreeIndexNodeCollection()

> **new TreeIndexNodeCollection**(`treeIndexRange`?): [`TreeIndexNodeCollection`](TreeIndexNodeCollection.md)

#### Parameters

 **treeIndexRange?**: [`NumericRange`](NumericRange.md)

#### Returns

[`TreeIndexNodeCollection`](TreeIndexNodeCollection.md)

#### Overrides

`NodeCollection.constructor`

#### Defined in

[packages/cad-styling/src/TreeIndexNodeCollection.ts:25](https://github.com/cognitedata/reveal/blob/2acd9d17229d2bc8e309653b4d6a39ad941e44f1/viewer/packages/cad-styling/src/TreeIndexNodeCollection.ts#L25)

## Properties

### classToken

> `readonly` `static` **classToken**: `"TreeIndexNodeCollection"` = `'TreeIndexNodeCollection'`

#### Defined in

[packages/cad-styling/src/TreeIndexNodeCollection.ts:18](https://github.com/cognitedata/reveal/blob/2acd9d17229d2bc8e309653b4d6a39ad941e44f1/viewer/packages/cad-styling/src/TreeIndexNodeCollection.ts#L18)

## Accessors

### classToken

> `get` **classToken**(): `string`

#### Returns

`string`

#### Inherited from

[`NodeCollection`](NodeCollection.md) . [`classToken`](NodeCollection.md#classtoken)

#### Defined in

[packages/cad-styling/src/NodeCollection.ts:23](https://github.com/cognitedata/reveal/blob/2acd9d17229d2bc8e309653b4d6a39ad941e44f1/viewer/packages/cad-styling/src/NodeCollection.ts#L23)

***

### isLoading

> `get` **isLoading**(): `boolean`

#### Returns

`boolean`

#### Overrides

[`NodeCollection`](NodeCollection.md) . [`isLoading`](NodeCollection.md#isloading)

#### Defined in

[packages/cad-styling/src/TreeIndexNodeCollection.ts:110](https://github.com/cognitedata/reveal/blob/2acd9d17229d2bc8e309653b4d6a39ad941e44f1/viewer/packages/cad-styling/src/TreeIndexNodeCollection.ts#L110)

## Methods

### addAreaPoints()

> **addAreaPoints**(`points`): `void`

Add points to this node collection's area set.
This effectively adds boxes of size 1x1x1 meter with the points as their centers.

#### Parameters

 **points**: `Vector3`[]

#### Returns

`void`

#### Defined in

[packages/cad-styling/src/TreeIndexNodeCollection.ts:96](https://github.com/cognitedata/reveal/blob/2acd9d17229d2bc8e309653b4d6a39ad941e44f1/viewer/packages/cad-styling/src/TreeIndexNodeCollection.ts#L96)

***

### addAreas()

> **addAreas**(`areas`): `void`

Add areas to this node collection's area set.
Nearby areas may be clustered and merged together to keep
the number of areas in the set small.

#### Parameters

 **areas**: `Box3`[]

#### Returns

`void`

#### Defined in

[packages/cad-styling/src/TreeIndexNodeCollection.ts:84](https://github.com/cognitedata/reveal/blob/2acd9d17229d2bc8e309653b4d6a39ad941e44f1/viewer/packages/cad-styling/src/TreeIndexNodeCollection.ts#L84)

***

### clear()

> **clear**(): `void`

Sets this set to hold an empty set.

#### Returns

`void`

#### Overrides

[`NodeCollection`](NodeCollection.md) . [`clear`](NodeCollection.md#clear)

#### Defined in

[packages/cad-styling/src/TreeIndexNodeCollection.ts:56](https://github.com/cognitedata/reveal/blob/2acd9d17229d2bc8e309653b4d6a39ad941e44f1/viewer/packages/cad-styling/src/TreeIndexNodeCollection.ts#L56)

***

### clearAreas()

> **clearAreas**(): `void`

#### Returns

`void`

#### Defined in

[packages/cad-styling/src/TreeIndexNodeCollection.ts:106](https://github.com/cognitedata/reveal/blob/2acd9d17229d2bc8e309653b4d6a39ad941e44f1/viewer/packages/cad-styling/src/TreeIndexNodeCollection.ts#L106)

***

### getAreas()

> **getAreas**(): [`AreaCollection`](../interfaces/AreaCollection.md)

Returns areas surrounding the nodes in the collection. The areas
are boxes in "ThreeJS coordinates". Note that not all
implementations supports this.

#### Returns

[`AreaCollection`](../interfaces/AreaCollection.md)

#### Overrides

[`NodeCollection`](NodeCollection.md) . [`getAreas`](NodeCollection.md#getareas)

#### Defined in

[packages/cad-styling/src/TreeIndexNodeCollection.ts:65](https://github.com/cognitedata/reveal/blob/2acd9d17229d2bc8e309653b4d6a39ad941e44f1/viewer/packages/cad-styling/src/TreeIndexNodeCollection.ts#L65)

***

### getIndexSet()

> **getIndexSet**(): [`IndexSet`](IndexSet.md)

#### Returns

[`IndexSet`](IndexSet.md)

#### Overrides

[`NodeCollection`](NodeCollection.md) . [`getIndexSet`](NodeCollection.md#getindexset)

#### Defined in

[packages/cad-styling/src/TreeIndexNodeCollection.ts:61](https://github.com/cognitedata/reveal/blob/2acd9d17229d2bc8e309653b4d6a39ad941e44f1/viewer/packages/cad-styling/src/TreeIndexNodeCollection.ts#L61)

***

### off()

> **off**(`event`, `listener`): `void`

#### Parameters

 **event**: `"changed"`

 **listener**

#### Returns

`void`

#### Inherited from

[`NodeCollection`](NodeCollection.md) . [`off`](NodeCollection.md#off)

#### Defined in

[packages/cad-styling/src/NodeCollection.ts:32](https://github.com/cognitedata/reveal/blob/2acd9d17229d2bc8e309653b4d6a39ad941e44f1/viewer/packages/cad-styling/src/NodeCollection.ts#L32)

***

### on()

> **on**(`event`, `listener`): `void`

#### Parameters

 **event**: `"changed"`

 **listener**

#### Returns

`void`

#### Inherited from

[`NodeCollection`](NodeCollection.md) . [`on`](NodeCollection.md#on)

#### Defined in

[packages/cad-styling/src/NodeCollection.ts:27](https://github.com/cognitedata/reveal/blob/2acd9d17229d2bc8e309653b4d6a39ad941e44f1/viewer/packages/cad-styling/src/NodeCollection.ts#L27)

***

### serialize()

> **serialize**(): [`SerializedNodeCollection`](../type-aliases/SerializedNodeCollection.md)

#### Returns

[`SerializedNodeCollection`](../type-aliases/SerializedNodeCollection.md)

#### Overrides

[`NodeCollection`](NodeCollection.md) . [`serialize`](NodeCollection.md#serialize)

#### Defined in

[packages/cad-styling/src/TreeIndexNodeCollection.ts:114](https://github.com/cognitedata/reveal/blob/2acd9d17229d2bc8e309653b4d6a39ad941e44f1/viewer/packages/cad-styling/src/TreeIndexNodeCollection.ts#L114)

***

### updateSet()

#### updateSet(treeIndices)

> **updateSet**(`treeIndices`): `void`

##### Parameters

 **treeIndices**: [`IndexSet`](IndexSet.md)

##### Returns

`void`

##### Defined in

[packages/cad-styling/src/TreeIndexNodeCollection.ts:37](https://github.com/cognitedata/reveal/blob/2acd9d17229d2bc8e309653b4d6a39ad941e44f1/viewer/packages/cad-styling/src/TreeIndexNodeCollection.ts#L37)

#### updateSet(treeIndices)

> **updateSet**(`treeIndices`): `void`

##### Parameters

 **treeIndices**: [`NumericRange`](NumericRange.md)

##### Returns

`void`

##### Defined in

[packages/cad-styling/src/TreeIndexNodeCollection.ts:38](https://github.com/cognitedata/reveal/blob/2acd9d17229d2bc8e309653b4d6a39ad941e44f1/viewer/packages/cad-styling/src/TreeIndexNodeCollection.ts#L38)

#### updateSet(treeIndices)

> **updateSet**(`treeIndices`): `void`

##### Parameters

 **treeIndices**: `Iterable`\<`number`\>

##### Returns

`void`

##### Defined in

[packages/cad-styling/src/TreeIndexNodeCollection.ts:39](https://github.com/cognitedata/reveal/blob/2acd9d17229d2bc8e309653b4d6a39ad941e44f1/viewer/packages/cad-styling/src/TreeIndexNodeCollection.ts#L39)


<!-- SOURCE_END: reveal/documentation\versioned_docs\version-4.x\api\@cognite\reveal\classes\TreeIndexNodeCollection.md -->

================================================================================


<!-- SOURCE_START: reveal/documentation\versioned_docs\version-4.x\api\@cognite\reveal\classes\UnionNodeCollection.md -->
## File: reveal/documentation\versioned_docs\version-4.x\api\@cognite\reveal\classes\UnionNodeCollection.md

# Class: UnionNodeCollection

Node collection that takes the set union of multiple node collections.

## Extends

- [`CombineNodeCollectionBase`](CombineNodeCollectionBase.md)

## Constructors

### new UnionNodeCollection()

> **new UnionNodeCollection**(`nodeCollections`?): [`UnionNodeCollection`](UnionNodeCollection.md)

#### Parameters

 **nodeCollections?**: [`NodeCollection`](NodeCollection.md)[]

#### Returns

[`UnionNodeCollection`](UnionNodeCollection.md)

#### Overrides

[`CombineNodeCollectionBase`](CombineNodeCollectionBase.md) . [`constructor`](CombineNodeCollectionBase.md#constructors)

#### Defined in

[packages/cad-styling/src/UnionNodeCollection.ts:21](https://github.com/cognitedata/reveal/blob/2acd9d17229d2bc8e309653b4d6a39ad941e44f1/viewer/packages/cad-styling/src/UnionNodeCollection.ts#L21)

## Properties

### classToken

> `readonly` `static` **classToken**: `"UnionNodeCollection"` = `'UnionNodeCollection'`

#### Defined in

[packages/cad-styling/src/UnionNodeCollection.ts:19](https://github.com/cognitedata/reveal/blob/2acd9d17229d2bc8e309653b4d6a39ad941e44f1/viewer/packages/cad-styling/src/UnionNodeCollection.ts#L19)

## Accessors

### classToken

> `get` **classToken**(): `string`

#### Returns

`string`

#### Inherited from

[`CombineNodeCollectionBase`](CombineNodeCollectionBase.md) . [`classToken`](CombineNodeCollectionBase.md#classtoken)

#### Defined in

[packages/cad-styling/src/NodeCollection.ts:23](https://github.com/cognitedata/reveal/blob/2acd9d17229d2bc8e309653b4d6a39ad941e44f1/viewer/packages/cad-styling/src/NodeCollection.ts#L23)

***

### isLoading

> `get` **isLoading**(): `boolean`

**`Override`**

#### Returns

`boolean`

#### Inherited from

[`CombineNodeCollectionBase`](CombineNodeCollectionBase.md) . [`isLoading`](CombineNodeCollectionBase.md#isloading)

#### Defined in

[packages/cad-styling/src/CombineNodeCollectionBase.ts:67](https://github.com/cognitedata/reveal/blob/2acd9d17229d2bc8e309653b4d6a39ad941e44f1/viewer/packages/cad-styling/src/CombineNodeCollectionBase.ts#L67)

## Methods

### add()

> **add**(`nodeCollection`): `void`

#### Parameters

 **nodeCollection**: [`NodeCollection`](NodeCollection.md)

#### Returns

`void`

#### Inherited from

[`CombineNodeCollectionBase`](CombineNodeCollectionBase.md) . [`add`](CombineNodeCollectionBase.md#add)

#### Defined in

[packages/cad-styling/src/CombineNodeCollectionBase.ts:26](https://github.com/cognitedata/reveal/blob/2acd9d17229d2bc8e309653b4d6a39ad941e44f1/viewer/packages/cad-styling/src/CombineNodeCollectionBase.ts#L26)

***

### clear()

> **clear**(): `void`

Clears all underlying node collections.

#### Returns

`void`

#### Inherited from

[`CombineNodeCollectionBase`](CombineNodeCollectionBase.md) . [`clear`](CombineNodeCollectionBase.md#clear)

#### Defined in

[packages/cad-styling/src/CombineNodeCollectionBase.ts:46](https://github.com/cognitedata/reveal/blob/2acd9d17229d2bc8e309653b4d6a39ad941e44f1/viewer/packages/cad-styling/src/CombineNodeCollectionBase.ts#L46)

***

### getAreas()

> **getAreas**(): [`AreaCollection`](../interfaces/AreaCollection.md)

Returns areas surrounding the nodes in the collection. The areas
are boxes in "ThreeJS coordinates". Note that not all
implementations supports this.

#### Returns

[`AreaCollection`](../interfaces/AreaCollection.md)

#### Overrides

[`CombineNodeCollectionBase`](CombineNodeCollectionBase.md) . [`getAreas`](CombineNodeCollectionBase.md#getareas)

#### Defined in

[packages/cad-styling/src/UnionNodeCollection.ts:45](https://github.com/cognitedata/reveal/blob/2acd9d17229d2bc8e309653b4d6a39ad941e44f1/viewer/packages/cad-styling/src/UnionNodeCollection.ts#L45)

***

### getIndexSet()

> **getIndexSet**(): [`IndexSet`](IndexSet.md)

**`Override`**

#### Returns

[`IndexSet`](IndexSet.md)

#### Inherited from

[`CombineNodeCollectionBase`](CombineNodeCollectionBase.md) . [`getIndexSet`](CombineNodeCollectionBase.md#getindexset)

#### Defined in

[packages/cad-styling/src/CombineNodeCollectionBase.ts:59](https://github.com/cognitedata/reveal/blob/2acd9d17229d2bc8e309653b4d6a39ad941e44f1/viewer/packages/cad-styling/src/CombineNodeCollectionBase.ts#L59)

***

### off()

> **off**(`event`, `listener`): `void`

#### Parameters

 **event**: `"changed"`

 **listener**

#### Returns

`void`

#### Inherited from

[`CombineNodeCollectionBase`](CombineNodeCollectionBase.md) . [`off`](CombineNodeCollectionBase.md#off)

#### Defined in

[packages/cad-styling/src/NodeCollection.ts:32](https://github.com/cognitedata/reveal/blob/2acd9d17229d2bc8e309653b4d6a39ad941e44f1/viewer/packages/cad-styling/src/NodeCollection.ts#L32)

***

### on()

> **on**(`event`, `listener`): `void`

#### Parameters

 **event**: `"changed"`

 **listener**

#### Returns

`void`

#### Inherited from

[`CombineNodeCollectionBase`](CombineNodeCollectionBase.md) . [`on`](CombineNodeCollectionBase.md#on)

#### Defined in

[packages/cad-styling/src/NodeCollection.ts:27](https://github.com/cognitedata/reveal/blob/2acd9d17229d2bc8e309653b4d6a39ad941e44f1/viewer/packages/cad-styling/src/NodeCollection.ts#L27)

***

### remove()

> **remove**(`nodeCollection`): `void`

#### Parameters

 **nodeCollection**: [`NodeCollection`](NodeCollection.md)

#### Returns

`void`

#### Inherited from

[`CombineNodeCollectionBase`](CombineNodeCollectionBase.md) . [`remove`](CombineNodeCollectionBase.md#remove)

#### Defined in

[packages/cad-styling/src/CombineNodeCollectionBase.ts:32](https://github.com/cognitedata/reveal/blob/2acd9d17229d2bc8e309653b4d6a39ad941e44f1/viewer/packages/cad-styling/src/CombineNodeCollectionBase.ts#L32)

***

### serialize()

> **serialize**(): [`SerializedNodeCollection`](../type-aliases/SerializedNodeCollection.md)

#### Returns

[`SerializedNodeCollection`](../type-aliases/SerializedNodeCollection.md)

#### Overrides

[`CombineNodeCollectionBase`](CombineNodeCollectionBase.md) . [`serialize`](CombineNodeCollectionBase.md#serialize)

#### Defined in

[packages/cad-styling/src/UnionNodeCollection.ts:25](https://github.com/cognitedata/reveal/blob/2acd9d17229d2bc8e309653b4d6a39ad941e44f1/viewer/packages/cad-styling/src/UnionNodeCollection.ts#L25)


<!-- SOURCE_END: reveal/documentation\versioned_docs\version-4.x\api\@cognite\reveal\classes\UnionNodeCollection.md -->

================================================================================


<!-- SOURCE_START: reveal/documentation\versioned_docs\version-4.x\api\@cognite\reveal\classes\Vector3Pool.md -->
## File: reveal/documentation\versioned_docs\version-4.x\api\@cognite\reveal\classes\Vector3Pool.md

# Class: Vector3Pool

**`Beta`**

Represents a pool of Vector3 objects that can be reused.

## Constructors

### new Vector3Pool()

> **new Vector3Pool**(`size`): [`Vector3Pool`](Vector3Pool.md)

**`Beta`**

Creates a new Vector3Pool instance.

#### Parameters

 **size**: `number` = `30`

The size of the pool (default: 30)

#### Returns

[`Vector3Pool`](Vector3Pool.md)

#### Defined in

[packages/utilities/src/three/Vector3Pool.ts:20](https://github.com/cognitedata/reveal/blob/2acd9d17229d2bc8e309653b4d6a39ad941e44f1/viewer/packages/utilities/src/three/Vector3Pool.ts#L20)

## Methods

### getNext()

> **getNext**(`copyFrom`?): `Vector3`

**`Beta`**

Gets the next available Vector3 object from the pool.

#### Parameters

 **copyFrom?**: `Vector3`

An optional Vector3 object to copy the values from

#### Returns

`Vector3`

The next available Vector3 object

#### Defined in

[packages/utilities/src/three/Vector3Pool.ts:30](https://github.com/cognitedata/reveal/blob/2acd9d17229d2bc8e309653b4d6a39ad941e44f1/viewer/packages/utilities/src/three/Vector3Pool.ts#L30)


<!-- SOURCE_END: reveal/documentation\versioned_docs\version-4.x\api\@cognite\reveal\classes\Vector3Pool.md -->

================================================================================


<!-- SOURCE_START: reveal/documentation\versioned_docs\version-4.x\api\@cognite\reveal\enumerations\FlexibleControlsType.md -->
## File: reveal/documentation\versioned_docs\version-4.x\api\@cognite\reveal\enumerations\FlexibleControlsType.md

# Enumeration: FlexibleControlsType

**`Beta`**

## Enumeration Members

### FirstPerson

> **FirstPerson**: `"firstPerson"`

**`Beta`**

#### Defined in

[packages/camera-manager/src/Flexible/FlexibleControlsType.ts:10](https://github.com/cognitedata/reveal/blob/2acd9d17229d2bc8e309653b4d6a39ad941e44f1/viewer/packages/camera-manager/src/Flexible/FlexibleControlsType.ts#L10)

***

### Orbit

> **Orbit**: `"orbit"`

**`Beta`**

#### Defined in

[packages/camera-manager/src/Flexible/FlexibleControlsType.ts:11](https://github.com/cognitedata/reveal/blob/2acd9d17229d2bc8e309653b4d6a39ad941e44f1/viewer/packages/camera-manager/src/Flexible/FlexibleControlsType.ts#L11)

***

### OrbitInCenter

> **OrbitInCenter**: `"orbitInCenter"`

**`Beta`**

#### Defined in

[packages/camera-manager/src/Flexible/FlexibleControlsType.ts:9](https://github.com/cognitedata/reveal/blob/2acd9d17229d2bc8e309653b4d6a39ad941e44f1/viewer/packages/camera-manager/src/Flexible/FlexibleControlsType.ts#L9)


<!-- SOURCE_END: reveal/documentation\versioned_docs\version-4.x\api\@cognite\reveal\enumerations\FlexibleControlsType.md -->

================================================================================


<!-- SOURCE_START: reveal/documentation\versioned_docs\version-4.x\api\@cognite\reveal\enumerations\FlexibleMouseActionType.md -->
## File: reveal/documentation\versioned_docs\version-4.x\api\@cognite\reveal\enumerations\FlexibleMouseActionType.md

# Enumeration: FlexibleMouseActionType

**`Beta`**

## Enumeration Members

### None

> **None**: `"none"`

**`Beta`**

#### Defined in

[packages/camera-manager/src/Flexible/FlexibleMouseActionType.ts:9](https://github.com/cognitedata/reveal/blob/2acd9d17229d2bc8e309653b4d6a39ad941e44f1/viewer/packages/camera-manager/src/Flexible/FlexibleMouseActionType.ts#L9)

***

### SetTarget

> **SetTarget**: `"setTarget"`

**`Beta`**

#### Defined in

[packages/camera-manager/src/Flexible/FlexibleMouseActionType.ts:10](https://github.com/cognitedata/reveal/blob/2acd9d17229d2bc8e309653b4d6a39ad941e44f1/viewer/packages/camera-manager/src/Flexible/FlexibleMouseActionType.ts#L10)

***

### SetTargetAndCameraDirection

> **SetTargetAndCameraDirection**: `"setTargetAndCameraDirection"`

**`Beta`**

#### Defined in

[packages/camera-manager/src/Flexible/FlexibleMouseActionType.ts:11](https://github.com/cognitedata/reveal/blob/2acd9d17229d2bc8e309653b4d6a39ad941e44f1/viewer/packages/camera-manager/src/Flexible/FlexibleMouseActionType.ts#L11)

***

### SetTargetAndCameraPosition

> **SetTargetAndCameraPosition**: `"setTargetAndCameraPosition"`

**`Beta`**

#### Defined in

[packages/camera-manager/src/Flexible/FlexibleMouseActionType.ts:12](https://github.com/cognitedata/reveal/blob/2acd9d17229d2bc8e309653b4d6a39ad941e44f1/viewer/packages/camera-manager/src/Flexible/FlexibleMouseActionType.ts#L12)


<!-- SOURCE_END: reveal/documentation\versioned_docs\version-4.x\api\@cognite\reveal\enumerations\FlexibleMouseActionType.md -->

================================================================================


<!-- SOURCE_START: reveal/documentation\versioned_docs\version-4.x\api\@cognite\reveal\enumerations\FlexibleWheelZoomType.md -->
## File: reveal/documentation\versioned_docs\version-4.x\api\@cognite\reveal\enumerations\FlexibleWheelZoomType.md

# Enumeration: FlexibleWheelZoomType

**`Beta`**

Sets mouse wheel initiated action.

Modes:

'ToTarget' - zooms just to the current target (center of the screen) of the camera.

'PastCursor' - zooms in the direction of the ray coming from camera through cursor screen position, allows going through objects.

'ToCursor' - mouse wheel scroll zooms towards the point on the model where cursor is hovering over, doesn't allow going through objects.

Default is 'zoomPastCursor'.

## Enumeration Members

### Auto

> **Auto**: `"auto"`

**`Beta`**

#### Defined in

[packages/camera-manager/src/Flexible/FlexibleWheelZoomType.ts:25](https://github.com/cognitedata/reveal/blob/2acd9d17229d2bc8e309653b4d6a39ad941e44f1/viewer/packages/camera-manager/src/Flexible/FlexibleWheelZoomType.ts#L25)

***

### Center

> **Center**: `"center"`

**`Beta`**

#### Defined in

[packages/camera-manager/src/Flexible/FlexibleWheelZoomType.ts:22](https://github.com/cognitedata/reveal/blob/2acd9d17229d2bc8e309653b4d6a39ad941e44f1/viewer/packages/camera-manager/src/Flexible/FlexibleWheelZoomType.ts#L22)

***

### PastCursor

> **PastCursor**: `"pastCursor"`

**`Beta`**

#### Defined in

[packages/camera-manager/src/Flexible/FlexibleWheelZoomType.ts:23](https://github.com/cognitedata/reveal/blob/2acd9d17229d2bc8e309653b4d6a39ad941e44f1/viewer/packages/camera-manager/src/Flexible/FlexibleWheelZoomType.ts#L23)

***

### ToCursor

> **ToCursor**: `"toCursor"`

**`Beta`**

#### Defined in

[packages/camera-manager/src/Flexible/FlexibleWheelZoomType.ts:24](https://github.com/cognitedata/reveal/blob/2acd9d17229d2bc8e309653b4d6a39ad941e44f1/viewer/packages/camera-manager/src/Flexible/FlexibleWheelZoomType.ts#L24)


<!-- SOURCE_END: reveal/documentation\versioned_docs\version-4.x\api\@cognite\reveal\enumerations\FlexibleWheelZoomType.md -->

================================================================================


<!-- SOURCE_START: reveal/documentation\versioned_docs\version-4.x\api\@cognite\reveal\enumerations\NodeOutlineColor.md -->
## File: reveal/documentation\versioned_docs\version-4.x\api\@cognite\reveal\enumerations\NodeOutlineColor.md

# Enumeration: NodeOutlineColor

## Enumeration Members

### Black

> **Black**: `2`

#### Defined in

[packages/cad-styling/src/NodeAppearance.ts:10](https://github.com/cognitedata/reveal/blob/2acd9d17229d2bc8e309653b4d6a39ad941e44f1/viewer/packages/cad-styling/src/NodeAppearance.ts#L10)

***

### Blue

> **Blue**: `4`

#### Defined in

[packages/cad-styling/src/NodeAppearance.ts:12](https://github.com/cognitedata/reveal/blob/2acd9d17229d2bc8e309653b4d6a39ad941e44f1/viewer/packages/cad-styling/src/NodeAppearance.ts#L12)

***

### Cyan

> **Cyan**: `3`

#### Defined in

[packages/cad-styling/src/NodeAppearance.ts:11](https://github.com/cognitedata/reveal/blob/2acd9d17229d2bc8e309653b4d6a39ad941e44f1/viewer/packages/cad-styling/src/NodeAppearance.ts#L11)

***

### Green

> **Green**: `5`

#### Defined in

[packages/cad-styling/src/NodeAppearance.ts:13](https://github.com/cognitedata/reveal/blob/2acd9d17229d2bc8e309653b4d6a39ad941e44f1/viewer/packages/cad-styling/src/NodeAppearance.ts#L13)

***

### NoOutline

> **NoOutline**: `0`

#### Defined in

[packages/cad-styling/src/NodeAppearance.ts:8](https://github.com/cognitedata/reveal/blob/2acd9d17229d2bc8e309653b4d6a39ad941e44f1/viewer/packages/cad-styling/src/NodeAppearance.ts#L8)

***

### Orange

> **Orange**: `7`

#### Defined in

[packages/cad-styling/src/NodeAppearance.ts:15](https://github.com/cognitedata/reveal/blob/2acd9d17229d2bc8e309653b4d6a39ad941e44f1/viewer/packages/cad-styling/src/NodeAppearance.ts#L15)

***

### Red

> **Red**: `6`

#### Defined in

[packages/cad-styling/src/NodeAppearance.ts:14](https://github.com/cognitedata/reveal/blob/2acd9d17229d2bc8e309653b4d6a39ad941e44f1/viewer/packages/cad-styling/src/NodeAppearance.ts#L14)

***

### White

> **White**: `1`

#### Defined in

[packages/cad-styling/src/NodeAppearance.ts:9](https://github.com/cognitedata/reveal/blob/2acd9d17229d2bc8e309653b4d6a39ad941e44f1/viewer/packages/cad-styling/src/NodeAppearance.ts#L9)


<!-- SOURCE_END: reveal/documentation\versioned_docs\version-4.x\api\@cognite\reveal\enumerations\NodeOutlineColor.md -->

================================================================================


<!-- SOURCE_START: reveal/documentation\versioned_docs\version-4.x\api\@cognite\reveal\enumerations\PointColorType.md -->
## File: reveal/documentation\versioned_docs\version-4.x\api\@cognite\reveal\enumerations\PointColorType.md

# Enumeration: PointColorType

## Enumeration Members

### Classification

> **Classification**: `8`

#### Defined in

[packages/rendering/src/pointcloud-rendering/enums.ts:27](https://github.com/cognitedata/reveal/blob/2acd9d17229d2bc8e309653b4d6a39ad941e44f1/viewer/packages/rendering/src/pointcloud-rendering/enums.ts#L27)

***

### Depth

> **Depth**: `2`

#### Defined in

[packages/rendering/src/pointcloud-rendering/enums.ts:18](https://github.com/cognitedata/reveal/blob/2acd9d17229d2bc8e309653b4d6a39ad941e44f1/viewer/packages/rendering/src/pointcloud-rendering/enums.ts#L18)

***

### Elevation

> **Elevation**: `3`

#### Defined in

[packages/rendering/src/pointcloud-rendering/enums.ts:21](https://github.com/cognitedata/reveal/blob/2acd9d17229d2bc8e309653b4d6a39ad941e44f1/viewer/packages/rendering/src/pointcloud-rendering/enums.ts#L21)

***

### Height

> **Height**: `3`

#### Defined in

[packages/rendering/src/pointcloud-rendering/enums.ts:19](https://github.com/cognitedata/reveal/blob/2acd9d17229d2bc8e309653b4d6a39ad941e44f1/viewer/packages/rendering/src/pointcloud-rendering/enums.ts#L19)

***

### Intensity

> **Intensity**: `4`

#### Defined in

[packages/rendering/src/pointcloud-rendering/enums.ts:22](https://github.com/cognitedata/reveal/blob/2acd9d17229d2bc8e309653b4d6a39ad941e44f1/viewer/packages/rendering/src/pointcloud-rendering/enums.ts#L22)

***

### LevelOfDetail

> **LevelOfDetail**: `6`

#### Defined in

[packages/rendering/src/pointcloud-rendering/enums.ts:25](https://github.com/cognitedata/reveal/blob/2acd9d17229d2bc8e309653b4d6a39ad941e44f1/viewer/packages/rendering/src/pointcloud-rendering/enums.ts#L25)

***

### Lod

> **Lod**: `6`

#### Defined in

[packages/rendering/src/pointcloud-rendering/enums.ts:23](https://github.com/cognitedata/reveal/blob/2acd9d17229d2bc8e309653b4d6a39ad941e44f1/viewer/packages/rendering/src/pointcloud-rendering/enums.ts#L23)

***

### PointIndex

> **PointIndex**: `7`

#### Defined in

[packages/rendering/src/pointcloud-rendering/enums.ts:26](https://github.com/cognitedata/reveal/blob/2acd9d17229d2bc8e309653b4d6a39ad941e44f1/viewer/packages/rendering/src/pointcloud-rendering/enums.ts#L26)

***

### Rgb

> **Rgb**: `0`

#### Defined in

[packages/rendering/src/pointcloud-rendering/enums.ts:17](https://github.com/cognitedata/reveal/blob/2acd9d17229d2bc8e309653b4d6a39ad941e44f1/viewer/packages/rendering/src/pointcloud-rendering/enums.ts#L17)


<!-- SOURCE_END: reveal/documentation\versioned_docs\version-4.x\api\@cognite\reveal\enumerations\PointColorType.md -->

================================================================================


<!-- SOURCE_START: reveal/documentation\versioned_docs\version-4.x\api\@cognite\reveal\enumerations\PointShape.md -->
## File: reveal/documentation\versioned_docs\version-4.x\api\@cognite\reveal\enumerations\PointShape.md

# Enumeration: PointShape

## Enumeration Members

### Circle

> **Circle**: `1`

#### Defined in

[packages/rendering/src/pointcloud-rendering/enums.ts:12](https://github.com/cognitedata/reveal/blob/2acd9d17229d2bc8e309653b4d6a39ad941e44f1/viewer/packages/rendering/src/pointcloud-rendering/enums.ts#L12)

***

### Paraboloid

> **Paraboloid**: `2`

#### Defined in

[packages/rendering/src/pointcloud-rendering/enums.ts:13](https://github.com/cognitedata/reveal/blob/2acd9d17229d2bc8e309653b4d6a39ad941e44f1/viewer/packages/rendering/src/pointcloud-rendering/enums.ts#L13)

***

### Square

> **Square**: `0`

#### Defined in

[packages/rendering/src/pointcloud-rendering/enums.ts:11](https://github.com/cognitedata/reveal/blob/2acd9d17229d2bc8e309653b4d6a39ad941e44f1/viewer/packages/rendering/src/pointcloud-rendering/enums.ts#L11)


<!-- SOURCE_END: reveal/documentation\versioned_docs\version-4.x\api\@cognite\reveal\enumerations\PointShape.md -->

================================================================================


<!-- SOURCE_START: reveal/documentation\versioned_docs\version-4.x\api\@cognite\reveal\enumerations\PointSizeType.md -->
## File: reveal/documentation\versioned_docs\version-4.x\api\@cognite\reveal\enumerations\PointSizeType.md

# Enumeration: PointSizeType

## Enumeration Members

### Adaptive

> **Adaptive**: `2`

#### Defined in

[packages/rendering/src/pointcloud-rendering/enums.ts:7](https://github.com/cognitedata/reveal/blob/2acd9d17229d2bc8e309653b4d6a39ad941e44f1/viewer/packages/rendering/src/pointcloud-rendering/enums.ts#L7)

***

### Attenuated

> **Attenuated**: `1`

#### Defined in

[packages/rendering/src/pointcloud-rendering/enums.ts:6](https://github.com/cognitedata/reveal/blob/2acd9d17229d2bc8e309653b4d6a39ad941e44f1/viewer/packages/rendering/src/pointcloud-rendering/enums.ts#L6)

***

### Fixed

> **Fixed**: `0`

#### Defined in

[packages/rendering/src/pointcloud-rendering/enums.ts:5](https://github.com/cognitedata/reveal/blob/2acd9d17229d2bc8e309653b4d6a39ad941e44f1/viewer/packages/rendering/src/pointcloud-rendering/enums.ts#L5)


<!-- SOURCE_END: reveal/documentation\versioned_docs\version-4.x\api\@cognite\reveal\enumerations\PointSizeType.md -->

================================================================================


<!-- SOURCE_START: reveal/documentation\versioned_docs\version-4.x\api\@cognite\reveal\enumerations\WellKnownAsprsPointClassCodes.md -->
## File: reveal/documentation\versioned_docs\version-4.x\api\@cognite\reveal\enumerations\WellKnownAsprsPointClassCodes.md

# Enumeration: WellKnownAsprsPointClassCodes

ASPRS well known point class types.

## See

[http://www.asprs.org/wp-content/uploads/2019/03/LAS_1_4_r14.pdf](http://www.asprs.org/wp-content/uploads/2019/03/LAS_1_4_r14.pdf) (page 30)

## Enumeration Members

### BridgeDeck

> **BridgeDeck**: `17`

Note that [WellKnownAsprsPointClassCodes.ReservedOrBridgeDeck](WellKnownAsprsPointClassCodes.md#reservedorbridgedeck) has been used
historically.

#### Defined in

[packages/pointclouds/src/types.ts:59](https://github.com/cognitedata/reveal/blob/2acd9d17229d2bc8e309653b4d6a39ad941e44f1/viewer/packages/pointclouds/src/types.ts#L59)

***

### Building

> **Building**: `6`

#### Defined in

[packages/pointclouds/src/types.ts:24](https://github.com/cognitedata/reveal/blob/2acd9d17229d2bc8e309653b4d6a39ad941e44f1/viewer/packages/pointclouds/src/types.ts#L24)

***

### Created

> **Created**: `0`

Created, never classified.

#### Defined in

[packages/pointclouds/src/types.ts:18](https://github.com/cognitedata/reveal/blob/2acd9d17229d2bc8e309653b4d6a39ad941e44f1/viewer/packages/pointclouds/src/types.ts#L18)

***

### Default

> **Default**: `-1`

Special value for all other classes. Some point in Potree might be in this class

#### Defined in

[packages/pointclouds/src/types.ts:14](https://github.com/cognitedata/reveal/blob/2acd9d17229d2bc8e309653b4d6a39ad941e44f1/viewer/packages/pointclouds/src/types.ts#L14)

***

### Ground

> **Ground**: `2`

#### Defined in

[packages/pointclouds/src/types.ts:20](https://github.com/cognitedata/reveal/blob/2acd9d17229d2bc8e309653b4d6a39ad941e44f1/viewer/packages/pointclouds/src/types.ts#L20)

***

### HighNoise

> **HighNoise**: `18`

High point, or "high noise".
Note that [WellKnownAsprsPointClassCodes.ReservedOrHighPoint](WellKnownAsprsPointClassCodes.md#reservedorhighpoint) has been used
historically.

#### Defined in

[packages/pointclouds/src/types.ts:65](https://github.com/cognitedata/reveal/blob/2acd9d17229d2bc8e309653b4d6a39ad941e44f1/viewer/packages/pointclouds/src/types.ts#L65)

***

### HighVegetation

> **HighVegetation**: `5`

#### Defined in

[packages/pointclouds/src/types.ts:23](https://github.com/cognitedata/reveal/blob/2acd9d17229d2bc8e309653b4d6a39ad941e44f1/viewer/packages/pointclouds/src/types.ts#L23)

***

### IgnoredGround

> **IgnoredGround**: `20`

E.g. breakline proximity.

#### Defined in

[packages/pointclouds/src/types.ts:73](https://github.com/cognitedata/reveal/blob/2acd9d17229d2bc8e309653b4d6a39ad941e44f1/viewer/packages/pointclouds/src/types.ts#L73)

***

### LowPoint

> **LowPoint**: `7`

Low point, typically "low noise".

#### Defined in

[packages/pointclouds/src/types.ts:28](https://github.com/cognitedata/reveal/blob/2acd9d17229d2bc8e309653b4d6a39ad941e44f1/viewer/packages/pointclouds/src/types.ts#L28)

***

### LowVegetation

> **LowVegetation**: `3`

#### Defined in

[packages/pointclouds/src/types.ts:21](https://github.com/cognitedata/reveal/blob/2acd9d17229d2bc8e309653b4d6a39ad941e44f1/viewer/packages/pointclouds/src/types.ts#L21)

***

### MedVegetation

> **MedVegetation**: `4`

#### Defined in

[packages/pointclouds/src/types.ts:22](https://github.com/cognitedata/reveal/blob/2acd9d17229d2bc8e309653b4d6a39ad941e44f1/viewer/packages/pointclouds/src/types.ts#L22)

***

### OverheadStructure

> **OverheadStructure**: `19`

E.g. conveyors, mining equipment, traffic lights.

#### Defined in

[packages/pointclouds/src/types.ts:69](https://github.com/cognitedata/reveal/blob/2acd9d17229d2bc8e309653b4d6a39ad941e44f1/viewer/packages/pointclouds/src/types.ts#L69)

***

### Rail

> **Rail**: `10`

#### Defined in

[packages/pointclouds/src/types.ts:35](https://github.com/cognitedata/reveal/blob/2acd9d17229d2bc8e309653b4d6a39ad941e44f1/viewer/packages/pointclouds/src/types.ts#L35)

***

### ReservedOrBridgeDeck

> **ReservedOrBridgeDeck**: `12`

In previous revisions of LAS this was "Bridge deck", but in more recent
revisions this value is reserved.

#### Defined in

[packages/pointclouds/src/types.ts:41](https://github.com/cognitedata/reveal/blob/2acd9d17229d2bc8e309653b4d6a39ad941e44f1/viewer/packages/pointclouds/src/types.ts#L41)

***

### ReservedOrHighPoint

> **ReservedOrHighPoint**: `8`

In previous revisions of LAS this was High point ("high noise"), in more recent
revisions this value is reserved.

#### Defined in

[packages/pointclouds/src/types.ts:33](https://github.com/cognitedata/reveal/blob/2acd9d17229d2bc8e309653b4d6a39ad941e44f1/viewer/packages/pointclouds/src/types.ts#L33)

***

### RoadSurface

> **RoadSurface**: `11`

#### Defined in

[packages/pointclouds/src/types.ts:36](https://github.com/cognitedata/reveal/blob/2acd9d17229d2bc8e309653b4d6a39ad941e44f1/viewer/packages/pointclouds/src/types.ts#L36)

***

### Snow

> **Snow**: `21`

#### Defined in

[packages/pointclouds/src/types.ts:74](https://github.com/cognitedata/reveal/blob/2acd9d17229d2bc8e309653b4d6a39ad941e44f1/viewer/packages/pointclouds/src/types.ts#L74)

***

### TemporalExclusion

> **TemporalExclusion**: `22`

Features excluded due to changes over time between data sources  e.g., water
levels, landslides, permafrost

#### Defined in

[packages/pointclouds/src/types.ts:79](https://github.com/cognitedata/reveal/blob/2acd9d17229d2bc8e309653b4d6a39ad941e44f1/viewer/packages/pointclouds/src/types.ts#L79)

***

### TransmissionTower

> **TransmissionTower**: `15`

#### Defined in

[packages/pointclouds/src/types.ts:50](https://github.com/cognitedata/reveal/blob/2acd9d17229d2bc8e309653b4d6a39ad941e44f1/viewer/packages/pointclouds/src/types.ts#L50)

***

### Unclassified

> **Unclassified**: `1`

#### Defined in

[packages/pointclouds/src/types.ts:19](https://github.com/cognitedata/reveal/blob/2acd9d17229d2bc8e309653b4d6a39ad941e44f1/viewer/packages/pointclouds/src/types.ts#L19)

***

### Water

> **Water**: `9`

#### Defined in

[packages/pointclouds/src/types.ts:34](https://github.com/cognitedata/reveal/blob/2acd9d17229d2bc8e309653b4d6a39ad941e44f1/viewer/packages/pointclouds/src/types.ts#L34)

***

### WireConductor

> **WireConductor**: `14`

Wire conductor (phase).

#### Defined in

[packages/pointclouds/src/types.ts:49](https://github.com/cognitedata/reveal/blob/2acd9d17229d2bc8e309653b4d6a39ad941e44f1/viewer/packages/pointclouds/src/types.ts#L49)

***

### WireGuard

> **WireGuard**: `13`

Wire guard shield.

#### Defined in

[packages/pointclouds/src/types.ts:45](https://github.com/cognitedata/reveal/blob/2acd9d17229d2bc8e309653b4d6a39ad941e44f1/viewer/packages/pointclouds/src/types.ts#L45)

***

### WireStructureConnector

> **WireStructureConnector**: `16`

Wire-structure connector (e.g. insulator).

#### Defined in

[packages/pointclouds/src/types.ts:54](https://github.com/cognitedata/reveal/blob/2acd9d17229d2bc8e309653b4d6a39ad941e44f1/viewer/packages/pointclouds/src/types.ts#L54)


<!-- SOURCE_END: reveal/documentation\versioned_docs\version-4.x\api\@cognite\reveal\enumerations\WellKnownAsprsPointClassCodes.md -->

================================================================================


<!-- SOURCE_START: reveal/documentation\versioned_docs\version-4.x\api\@cognite\reveal\extensions\datasource\classes\CdfModelIdentifier.md -->
## File: reveal/documentation\versioned_docs\version-4.x\api\@cognite\reveal\extensions\datasource\classes\CdfModelIdentifier.md

# Class: CdfModelIdentifier

Identifies a 3D model stored in CDF by the combination of a modelId, a revisionId
and a format.

## Implements

- [`ModelIdentifier`](../interfaces/ModelIdentifier.md)

## Constructors

### new CdfModelIdentifier()

> **new CdfModelIdentifier**(`modelId`, `revisionId`): [`CdfModelIdentifier`](CdfModelIdentifier.md)

#### Parameters

 **modelId**: `number`

 **revisionId**: `number`

#### Returns

[`CdfModelIdentifier`](CdfModelIdentifier.md)

#### Defined in

[packages/data-providers/src/model-identifiers/CdfModelIdentifier.ts:16](https://github.com/cognitedata/reveal/blob/2acd9d17229d2bc8e309653b4d6a39ad941e44f1/viewer/packages/data-providers/src/model-identifiers/CdfModelIdentifier.ts#L16)

## Properties

### modelId

> `readonly` **modelId**: `number`

#### Defined in

[packages/data-providers/src/model-identifiers/CdfModelIdentifier.ts:13](https://github.com/cognitedata/reveal/blob/2acd9d17229d2bc8e309653b4d6a39ad941e44f1/viewer/packages/data-providers/src/model-identifiers/CdfModelIdentifier.ts#L13)

***

### revealInternalId

> `readonly` **revealInternalId**: `symbol`

Unique ID of the model.

#### Implementation of

[`ModelIdentifier`](../interfaces/ModelIdentifier.md) . [`revealInternalId`](../interfaces/ModelIdentifier.md#revealinternalid)

#### Defined in

[packages/data-providers/src/model-identifiers/CdfModelIdentifier.ts:11](https://github.com/cognitedata/reveal/blob/2acd9d17229d2bc8e309653b4d6a39ad941e44f1/viewer/packages/data-providers/src/model-identifiers/CdfModelIdentifier.ts#L11)

***

### revisionId

> `readonly` **revisionId**: `number`

#### Defined in

[packages/data-providers/src/model-identifiers/CdfModelIdentifier.ts:14](https://github.com/cognitedata/reveal/blob/2acd9d17229d2bc8e309653b4d6a39ad941e44f1/viewer/packages/data-providers/src/model-identifiers/CdfModelIdentifier.ts#L14)

## Methods

### toString()

> **toString**(): `string`

#### Returns

`string`

#### Defined in

[packages/data-providers/src/model-identifiers/CdfModelIdentifier.ts:22](https://github.com/cognitedata/reveal/blob/2acd9d17229d2bc8e309653b4d6a39ad941e44f1/viewer/packages/data-providers/src/model-identifiers/CdfModelIdentifier.ts#L22)


<!-- SOURCE_END: reveal/documentation\versioned_docs\version-4.x\api\@cognite\reveal\extensions\datasource\classes\CdfModelIdentifier.md -->

================================================================================


<!-- SOURCE_START: reveal/documentation\versioned_docs\version-4.x\api\@cognite\reveal\extensions\datasource\enumerations\File3dFormat.md -->
## File: reveal/documentation\versioned_docs\version-4.x\api\@cognite\reveal\extensions\datasource\enumerations\File3dFormat.md

# Enumeration: File3dFormat

## Enumeration Members

### AnyFormat

> **AnyFormat**: `"all-outputs"`

#### Defined in

[packages/data-providers/src/types.ts:100](https://github.com/cognitedata/reveal/blob/2acd9d17229d2bc8e309653b4d6a39ad941e44f1/viewer/packages/data-providers/src/types.ts#L100)

***

### EptPointCloud

> **EptPointCloud**: `"ept-pointcloud"`

#### Defined in

[packages/data-providers/src/types.ts:95](https://github.com/cognitedata/reveal/blob/2acd9d17229d2bc8e309653b4d6a39ad941e44f1/viewer/packages/data-providers/src/types.ts#L95)

***

### GltfCadModel

> **GltfCadModel**: `"gltf-directory"`

Reveal v9 and above (GLTF based output)

#### Defined in

[packages/data-providers/src/types.ts:99](https://github.com/cognitedata/reveal/blob/2acd9d17229d2bc8e309653b4d6a39ad941e44f1/viewer/packages/data-providers/src/types.ts#L99)


<!-- SOURCE_END: reveal/documentation\versioned_docs\version-4.x\api\@cognite\reveal\extensions\datasource\enumerations\File3dFormat.md -->

================================================================================


<!-- SOURCE_START: reveal/documentation\versioned_docs\version-4.x\api\@cognite\reveal\extensions\datasource\index.md -->
## File: reveal/documentation\versioned_docs\version-4.x\api\@cognite\reveal\extensions\datasource\index.md

# @cognite/reveal/extensions/datasource

## Index

### Enumerations

- [File3dFormat](enumerations/File3dFormat.md)

### Classes

- [CdfModelIdentifier](classes/CdfModelIdentifier.md)

### Interfaces

- [BinaryFileProvider](interfaces/BinaryFileProvider.md)
- [BlobOutputMetadata](interfaces/BlobOutputMetadata.md)
- [DataSource](interfaces/DataSource.md)
- [JsonFileProvider](interfaces/JsonFileProvider.md)
- [ModelDataProvider](interfaces/ModelDataProvider.md)
- [ModelIdentifier](interfaces/ModelIdentifier.md)
- [ModelMetadataProvider](interfaces/ModelMetadataProvider.md)
- [NodesApiClient](interfaces/NodesApiClient.md)


<!-- SOURCE_END: reveal/documentation\versioned_docs\version-4.x\api\@cognite\reveal\extensions\datasource\index.md -->

================================================================================


<!-- SOURCE_START: reveal/documentation\versioned_docs\version-4.x\api\@cognite\reveal\extensions\datasource\interfaces\BinaryFileProvider.md -->
## File: reveal/documentation\versioned_docs\version-4.x\api\@cognite\reveal\extensions\datasource\interfaces\BinaryFileProvider.md

# Interface: BinaryFileProvider

## Extended by

- [`ModelDataProvider`](ModelDataProvider.md)

## Methods

### getBinaryFile()

> **getBinaryFile**(`baseUrl`, `fileName`, `abortSignal`?): `Promise`\<`ArrayBuffer`\>

#### Parameters

 **baseUrl**: `string`

 **fileName**: `string`

 **abortSignal?**: `AbortSignal`

#### Returns

`Promise`\<`ArrayBuffer`\>

#### Defined in

[packages/data-providers/src/types.ts:19](https://github.com/cognitedata/reveal/blob/2acd9d17229d2bc8e309653b4d6a39ad941e44f1/viewer/packages/data-providers/src/types.ts#L19)


<!-- SOURCE_END: reveal/documentation\versioned_docs\version-4.x\api\@cognite\reveal\extensions\datasource\interfaces\BinaryFileProvider.md -->

================================================================================


<!-- SOURCE_START: reveal/documentation\versioned_docs\version-4.x\api\@cognite\reveal\extensions\datasource\interfaces\BlobOutputMetadata.md -->
## File: reveal/documentation\versioned_docs\version-4.x\api\@cognite\reveal\extensions\datasource\interfaces\BlobOutputMetadata.md

# Interface: BlobOutputMetadata

## Properties

### blobId

> **blobId**: `number`

#### Defined in

[packages/data-providers/src/types.ts:104](https://github.com/cognitedata/reveal/blob/2acd9d17229d2bc8e309653b4d6a39ad941e44f1/viewer/packages/data-providers/src/types.ts#L104)

***

### format

> **format**: `string`

#### Defined in

[packages/data-providers/src/types.ts:105](https://github.com/cognitedata/reveal/blob/2acd9d17229d2bc8e309653b4d6a39ad941e44f1/viewer/packages/data-providers/src/types.ts#L105)

***

### version

> **version**: `number`

#### Defined in

[packages/data-providers/src/types.ts:106](https://github.com/cognitedata/reveal/blob/2acd9d17229d2bc8e309653b4d6a39ad941e44f1/viewer/packages/data-providers/src/types.ts#L106)


<!-- SOURCE_END: reveal/documentation\versioned_docs\version-4.x\api\@cognite\reveal\extensions\datasource\interfaces\BlobOutputMetadata.md -->

================================================================================


<!-- SOURCE_START: reveal/documentation\versioned_docs\version-4.x\api\@cognite\reveal\extensions\datasource\interfaces\DataSource.md -->
## File: reveal/documentation\versioned_docs\version-4.x\api\@cognite\reveal\extensions\datasource\interfaces\DataSource.md

# Interface: DataSource

Describes how Reveal data is stored, and provides means to create custom storage providers
that Reveal will fetch data from.

## Methods

### getModelDataProvider()

> **getModelDataProvider**(): [`ModelDataProvider`](ModelDataProvider.md)

Gets a client that is able to download geometry and other files
for models.

#### Returns

[`ModelDataProvider`](ModelDataProvider.md)

#### Defined in

[packages/data-source/src/DataSource.ts:28](https://github.com/cognitedata/reveal/blob/2acd9d17229d2bc8e309653b4d6a39ad941e44f1/viewer/packages/data-source/src/DataSource.ts#L28)

***

### getModelMetadataProvider()

> **getModelMetadataProvider**(): [`ModelMetadataProvider`](ModelMetadataProvider.md)

Gets a metadata provider for models.

#### Returns

[`ModelMetadataProvider`](ModelMetadataProvider.md)

#### Defined in

[packages/data-source/src/DataSource.ts:22](https://github.com/cognitedata/reveal/blob/2acd9d17229d2bc8e309653b4d6a39ad941e44f1/viewer/packages/data-source/src/DataSource.ts#L22)

***

### getNodesApiClient()

> **getNodesApiClient**(): [`NodesApiClient`](NodesApiClient.md)

Gets a node API client that is able to fetch data about
models.

#### Returns

[`NodesApiClient`](NodesApiClient.md)

#### Defined in

[packages/data-source/src/DataSource.ts:17](https://github.com/cognitedata/reveal/blob/2acd9d17229d2bc8e309653b4d6a39ad941e44f1/viewer/packages/data-source/src/DataSource.ts#L17)


<!-- SOURCE_END: reveal/documentation\versioned_docs\version-4.x\api\@cognite\reveal\extensions\datasource\interfaces\DataSource.md -->

================================================================================


<!-- SOURCE_START: reveal/documentation\versioned_docs\version-4.x\api\@cognite\reveal\extensions\datasource\interfaces\JsonFileProvider.md -->
## File: reveal/documentation\versioned_docs\version-4.x\api\@cognite\reveal\extensions\datasource\interfaces\JsonFileProvider.md

# Interface: JsonFileProvider

## Extended by

- [`ModelDataProvider`](ModelDataProvider.md)

## Methods

### getJsonFile()

> **getJsonFile**(`baseUrl`, `fileName`): `Promise`\<`any`\>

#### Parameters

 **baseUrl**: `string`

 **fileName**: `string`

#### Returns

`Promise`\<`any`\>

#### Defined in

[packages/data-providers/src/types.ts:15](https://github.com/cognitedata/reveal/blob/2acd9d17229d2bc8e309653b4d6a39ad941e44f1/viewer/packages/data-providers/src/types.ts#L15)


<!-- SOURCE_END: reveal/documentation\versioned_docs\version-4.x\api\@cognite\reveal\extensions\datasource\interfaces\JsonFileProvider.md -->

================================================================================


<!-- SOURCE_START: reveal/documentation\versioned_docs\version-4.x\api\@cognite\reveal\extensions\datasource\interfaces\ModelDataProvider.md -->
## File: reveal/documentation\versioned_docs\version-4.x\api\@cognite\reveal\extensions\datasource\interfaces\ModelDataProvider.md

# Interface: ModelDataProvider

Provides data for 3D models.

## Extends

- [`JsonFileProvider`](JsonFileProvider.md) . [`BinaryFileProvider`](BinaryFileProvider.md)

## Methods

### getBinaryFile()

> **getBinaryFile**(`baseUrl`, `fileName`, `abortSignal`?): `Promise`\<`ArrayBuffer`\>

Downloads a binary blob.

#### Parameters

 **baseUrl**: `string`

Base URL of the model.

 **fileName**: `string`

Filename of binary file.

 **abortSignal?**: `AbortSignal`

Optional abort signal that can be used to cancel an in progress fetch.

#### Returns

`Promise`\<`ArrayBuffer`\>

#### Overrides

[`BinaryFileProvider`](BinaryFileProvider.md) . [`getBinaryFile`](BinaryFileProvider.md#getbinaryfile)

#### Defined in

[packages/data-providers/src/ModelDataProvider.ts:23](https://github.com/cognitedata/reveal/blob/2acd9d17229d2bc8e309653b4d6a39ad941e44f1/viewer/packages/data-providers/src/ModelDataProvider.ts#L23)

***

### getJsonFile()

> **getJsonFile**(`baseUrl`, `fileName`): `Promise`\<`any`\>

Download and parse a JSON file and return the resulting struct.

#### Parameters

 **baseUrl**: `string`

Base URL of the model.

 **fileName**: `string`

Filename of JSON file.

#### Returns

`Promise`\<`any`\>

#### Overrides

[`JsonFileProvider`](JsonFileProvider.md) . [`getJsonFile`](JsonFileProvider.md#getjsonfile)

#### Defined in

[packages/data-providers/src/ModelDataProvider.ts:16](https://github.com/cognitedata/reveal/blob/2acd9d17229d2bc8e309653b4d6a39ad941e44f1/viewer/packages/data-providers/src/ModelDataProvider.ts#L16)


<!-- SOURCE_END: reveal/documentation\versioned_docs\version-4.x\api\@cognite\reveal\extensions\datasource\interfaces\ModelDataProvider.md -->

================================================================================


<!-- SOURCE_START: reveal/documentation\versioned_docs\version-4.x\api\@cognite\reveal\extensions\datasource\interfaces\ModelIdentifier.md -->
## File: reveal/documentation\versioned_docs\version-4.x\api\@cognite\reveal\extensions\datasource\interfaces\ModelIdentifier.md

# Interface: ModelIdentifier

Identifies a 3D model. Typically, implementations will use [CdfModelIdentifier](../classes/CdfModelIdentifier.md).

## Properties

### revealInternalId

> `readonly` **revealInternalId**: `symbol`

Unique ID of the model.

#### Defined in

[packages/data-providers/src/ModelIdentifier.ts:14](https://github.com/cognitedata/reveal/blob/2acd9d17229d2bc8e309653b4d6a39ad941e44f1/viewer/packages/data-providers/src/ModelIdentifier.ts#L14)


<!-- SOURCE_END: reveal/documentation\versioned_docs\version-4.x\api\@cognite\reveal\extensions\datasource\interfaces\ModelIdentifier.md -->

================================================================================


<!-- SOURCE_START: reveal/documentation\versioned_docs\version-4.x\api\@cognite\reveal\extensions\datasource\interfaces\ModelMetadataProvider.md -->
## File: reveal/documentation\versioned_docs\version-4.x\api\@cognite\reveal\extensions\datasource\interfaces\ModelMetadataProvider.md

# Interface: ModelMetadataProvider

Provides metadata for 3D models.

## Methods

### getModelCamera()

> **getModelCamera**(`identifier`): `Promise`\<`undefined` \| `object`\>

#### Parameters

 **identifier**: [`ModelIdentifier`](ModelIdentifier.md)

#### Returns

`Promise`\<`undefined` \| `object`\>

#### Defined in

[packages/data-providers/src/ModelMetadataProvider.ts:14](https://github.com/cognitedata/reveal/blob/2acd9d17229d2bc8e309653b4d6a39ad941e44f1/viewer/packages/data-providers/src/ModelMetadataProvider.ts#L14)

***

### getModelMatrix()

> **getModelMatrix**(`identifier`, `format`): `Promise`\<`Matrix4`\>

#### Parameters

 **identifier**: [`ModelIdentifier`](ModelIdentifier.md)

 **format**: `string`

#### Returns

`Promise`\<`Matrix4`\>

#### Defined in

[packages/data-providers/src/ModelMetadataProvider.ts:15](https://github.com/cognitedata/reveal/blob/2acd9d17229d2bc8e309653b4d6a39ad941e44f1/viewer/packages/data-providers/src/ModelMetadataProvider.ts#L15)

***

### getModelOutputs()

> **getModelOutputs**(`modelIdentifier`): `Promise` \<[`BlobOutputMetadata`](BlobOutputMetadata.md)[]\>

#### Parameters

 **modelIdentifier**: [`ModelIdentifier`](ModelIdentifier.md)

#### Returns

`Promise` \<[`BlobOutputMetadata`](BlobOutputMetadata.md)[]\>

#### Defined in

[packages/data-providers/src/ModelMetadataProvider.ts:12](https://github.com/cognitedata/reveal/blob/2acd9d17229d2bc8e309653b4d6a39ad941e44f1/viewer/packages/data-providers/src/ModelMetadataProvider.ts#L12)

***

### getModelUri()

> **getModelUri**(`identifier`, `formatMetadata`): `Promise`\<`string`\>

#### Parameters

 **identifier**: [`ModelIdentifier`](ModelIdentifier.md)

 **formatMetadata**: [`BlobOutputMetadata`](BlobOutputMetadata.md)

#### Returns

`Promise`\<`string`\>

#### Defined in

[packages/data-providers/src/ModelMetadataProvider.ts:13](https://github.com/cognitedata/reveal/blob/2acd9d17229d2bc8e309653b4d6a39ad941e44f1/viewer/packages/data-providers/src/ModelMetadataProvider.ts#L13)


<!-- SOURCE_END: reveal/documentation\versioned_docs\version-4.x\api\@cognite\reveal\extensions\datasource\interfaces\ModelMetadataProvider.md -->

================================================================================


<!-- SOURCE_START: reveal/documentation\versioned_docs\version-4.x\api\@cognite\reveal\extensions\datasource\interfaces\NodesApiClient.md -->
## File: reveal/documentation\versioned_docs\version-4.x\api\@cognite\reveal\extensions\datasource\interfaces\NodesApiClient.md

# Interface: NodesApiClient

Client for retrieving metadata information about CAD nodes.

## Methods

### determineNodeAncestorsByNodeId()

> **determineNodeAncestorsByNodeId**(`modelId`, `revisionId`, `nodeId`, `generation`): `Promise`\<`object`\>

Determine ancestor subtree span of a given node. If the node doesn't have an
ancestor at the generation given, the span of the root node is returned.

#### Parameters

 **modelId**: `number`

ID of 3D model

 **revisionId**: `number`

ID of 3D model revision

 **nodeId**: `number`

Node ID of node

 **generation**: `number`

Generation to retrieve (0 means node itself, 1 is parent, 2 grand-parent etc).

#### Returns

`Promise`\<`object`\>

##### subtreeSize

> **subtreeSize**: `number`

##### treeIndex

> **treeIndex**: `number`

#### Defined in

[packages/nodes-api/src/NodesApiClient.ts:51](https://github.com/cognitedata/reveal/blob/2acd9d17229d2bc8e309653b4d6a39ad941e44f1/viewer/packages/nodes-api/src/NodesApiClient.ts#L51)

***

### determineTreeIndexAndSubtreeSizesByNodeIds()

> **determineTreeIndexAndSubtreeSizesByNodeIds**(`modelId`, `revisionId`, `nodeIds`): `Promise`\<`object`[]\>

Determines tree index and subtreeSize (i.e. span of the subtree a node is parent
of) given a set of node IDs.

#### Parameters

 **modelId**: `number`

 **revisionId**: `number`

 **nodeIds**: `number`[]

#### Returns

`Promise`\<`object`[]\>

#### Defined in

[packages/nodes-api/src/NodesApiClient.ts:37](https://github.com/cognitedata/reveal/blob/2acd9d17229d2bc8e309653b4d6a39ad941e44f1/viewer/packages/nodes-api/src/NodesApiClient.ts#L37)

***

### getBoundingBoxesByNodeIds()

> **getBoundingBoxesByNodeIds**(`modelId`, `revisionId`, `nodeIds`): `Promise`\<`Box3`[]\>

Determines the bounds of the individual nodes provided. Note that the returned
boxes will be in "CDF coordinates" and not transformed using
the model transformation for the given model.

#### Parameters

 **modelId**: `number`

ID of 3D model

 **revisionId**: `number`

ID of 3D model revision

 **nodeIds**: `number`[]

Node IDs of nodes

#### Returns

`Promise`\<`Box3`[]\>

#### Defined in

[packages/nodes-api/src/NodesApiClient.ts:67](https://github.com/cognitedata/reveal/blob/2acd9d17229d2bc8e309653b4d6a39ad941e44f1/viewer/packages/nodes-api/src/NodesApiClient.ts#L67)

***

### mapNodeIdsToTreeIndices()

> **mapNodeIdsToTreeIndices**(`modelId`, `revisionId`, `nodeIds`): `Promise`\<`number`[]\>

Maps a set of "node IDs" that identify nodes, to the respective
"tree indexes".

#### Parameters

 **modelId**: `number`

 **revisionId**: `number`

 **nodeIds**: `number`[]

#### Returns

`Promise`\<`number`[]\>

#### Defined in

[packages/nodes-api/src/NodesApiClient.ts:27](https://github.com/cognitedata/reveal/blob/2acd9d17229d2bc8e309653b4d6a39ad941e44f1/viewer/packages/nodes-api/src/NodesApiClient.ts#L27)

***

### mapTreeIndicesToNodeIds()

> **mapTreeIndicesToNodeIds**(`modelId`, `revisionId`, `treeIndices`): `Promise`\<`number`[]\>

Maps a set of "tree indexes" that identify nodes, to the respective
"node IDs".

#### Parameters

 **modelId**: `number`

 **revisionId**: `number`

 **treeIndices**: `number`[]

#### Returns

`Promise`\<`number`[]\>

#### Defined in

[packages/nodes-api/src/NodesApiClient.ts:17](https://github.com/cognitedata/reveal/blob/2acd9d17229d2bc8e309653b4d6a39ad941e44f1/viewer/packages/nodes-api/src/NodesApiClient.ts#L17)


<!-- SOURCE_END: reveal/documentation\versioned_docs\version-4.x\api\@cognite\reveal\extensions\datasource\interfaces\NodesApiClient.md -->

================================================================================


<!-- SOURCE_START: reveal/documentation\versioned_docs\version-4.x\api\@cognite\reveal\functions\getNormalizedPixelCoordinates.md -->
## File: reveal/documentation\versioned_docs\version-4.x\api\@cognite\reveal\functions\getNormalizedPixelCoordinates.md

# Function: getNormalizedPixelCoordinates()

> **getNormalizedPixelCoordinates**(`domElement`, `pixelX`, `pixelY`): `THREE.Vector2`

## Parameters

 **domElement**: `HTMLElement`

 **pixelX**: `number`

 **pixelY**: `number`

## Returns

`THREE.Vector2`

## Defined in

[packages/utilities/src/worldToViewport.ts:82](https://github.com/cognitedata/reveal/blob/2acd9d17229d2bc8e309653b4d6a39ad941e44f1/viewer/packages/utilities/src/worldToViewport.ts#L82)


<!-- SOURCE_END: reveal/documentation\versioned_docs\version-4.x\api\@cognite\reveal\functions\getNormalizedPixelCoordinates.md -->

================================================================================


<!-- SOURCE_START: reveal/documentation\versioned_docs\version-4.x\api\@cognite\reveal\functions\getNormalizedPixelCoordinatesBySize.md -->
## File: reveal/documentation\versioned_docs\version-4.x\api\@cognite\reveal\functions\getNormalizedPixelCoordinatesBySize.md

# Function: getNormalizedPixelCoordinatesBySize()

> **getNormalizedPixelCoordinatesBySize**(`pixelX`, `pixelY`, `width`, `height`): `THREE.Vector2`

Converts a pixel coordinate to normalized device coordinate (in range [-1, 1])

## Parameters

 **pixelX**: `number`

 **pixelY**: `number`

 **width**: `number`

 **height**: `number`

## Returns

`THREE.Vector2`

## Defined in

[packages/utilities/src/worldToViewport.ts:73](https://github.com/cognitedata/reveal/blob/2acd9d17229d2bc8e309653b4d6a39ad941e44f1/viewer/packages/utilities/src/worldToViewport.ts#L73)


<!-- SOURCE_END: reveal/documentation\versioned_docs\version-4.x\api\@cognite\reveal\functions\getNormalizedPixelCoordinatesBySize.md -->

================================================================================


<!-- SOURCE_START: reveal/documentation\versioned_docs\version-4.x\api\@cognite\reveal\functions\getWheelEventDelta.md -->
## File: reveal/documentation\versioned_docs\version-4.x\api\@cognite\reveal\functions\getWheelEventDelta.md

# Function: getWheelEventDelta()

> **getWheelEventDelta**(`event`): `number`

**`Beta`**

Determines number of deltas when mouse scroll

## Parameters

 **event**: `WheelEvent`

An WheelEvent

## Returns

`number`

## Defined in

[packages/utilities/src/events/getWheelEventDelta.ts:10](https://github.com/cognitedata/reveal/blob/2acd9d17229d2bc8e309653b4d6a39ad941e44f1/viewer/packages/utilities/src/events/getWheelEventDelta.ts#L10)


<!-- SOURCE_END: reveal/documentation\versioned_docs\version-4.x\api\@cognite\reveal\functions\getWheelEventDelta.md -->

================================================================================


<!-- SOURCE_START: reveal/documentation\versioned_docs\version-4.x\api\@cognite\reveal\functions\isFlexibleCameraManager.md -->
## File: reveal/documentation\versioned_docs\version-4.x\api\@cognite\reveal\functions\isFlexibleCameraManager.md

# Function: isFlexibleCameraManager()

> **isFlexibleCameraManager**(`manager`): `manager is IFlexibleCameraManager`

**`Beta`**

Check id the CameraManager is a IFlexibleCameraManager

## Parameters

 **manager**: [`CameraManager`](../interfaces/CameraManager.md)

## Returns

`manager is IFlexibleCameraManager`

## Defined in

[packages/camera-manager/src/Flexible/IFlexibleCameraManager.ts:112](https://github.com/cognitedata/reveal/blob/2acd9d17229d2bc8e309653b4d6a39ad941e44f1/viewer/packages/camera-manager/src/Flexible/IFlexibleCameraManager.ts#L112)


<!-- SOURCE_END: reveal/documentation\versioned_docs\version-4.x\api\@cognite\reveal\functions\isFlexibleCameraManager.md -->

================================================================================


<!-- SOURCE_START: reveal/documentation\versioned_docs\version-4.x\api\@cognite\reveal\functions\registerNodeCollectionType.md -->
## File: reveal/documentation\versioned_docs\version-4.x\api\@cognite\reveal\functions\registerNodeCollectionType.md

# Function: registerNodeCollectionType()

> **registerNodeCollectionType**\<`T`\>(`nodeCollectionTypeName`, `deserializer`): `void`

## Type Parameters

 **T** *extends* [`NodeCollection`](../classes/NodeCollection.md)

## Parameters

 **nodeCollectionTypeName**: `string`

 **deserializer**

## Returns

`void`

## Defined in

[packages/cad-styling/src/NodeCollectionDeserializer.ts:156](https://github.com/cognitedata/reveal/blob/2acd9d17229d2bc8e309653b4d6a39ad941e44f1/viewer/packages/cad-styling/src/NodeCollectionDeserializer.ts#L156)


<!-- SOURCE_END: reveal/documentation\versioned_docs\version-4.x\api\@cognite\reveal\functions\registerNodeCollectionType.md -->

================================================================================


<!-- SOURCE_START: reveal/documentation\versioned_docs\version-4.x\api\@cognite\reveal\index.md -->
## File: reveal/documentation\versioned_docs\version-4.x\api\@cognite\reveal\index.md

# @cognite/reveal

## Index

### Enumerations

- [FlexibleControlsType](enumerations/FlexibleControlsType.md)
- [FlexibleMouseActionType](enumerations/FlexibleMouseActionType.md)
- [FlexibleWheelZoomType](enumerations/FlexibleWheelZoomType.md)
- [NodeOutlineColor](enumerations/NodeOutlineColor.md)
- [PointColorType](enumerations/PointColorType.md)
- [PointShape](enumerations/PointShape.md)
- [PointSizeType](enumerations/PointSizeType.md)
- [WellKnownAsprsPointClassCodes](enumerations/WellKnownAsprsPointClassCodes.md)

### Classes

- [AnnotationIdPointCloudObjectCollection](classes/AnnotationIdPointCloudObjectCollection.md)
- [AssetNodeCollection](classes/AssetNodeCollection.md)
- [BoundingBoxClipper](classes/BoundingBoxClipper.md)
- [CameraManagerHelper](classes/CameraManagerHelper.md)
- [CdfNodeCollectionBase](classes/CdfNodeCollectionBase.md)
- [ClusteredAreaCollection](classes/ClusteredAreaCollection.md)
- [Cognite3DViewer](classes/Cognite3DViewer.md)
- [CogniteCadModel](classes/CogniteCadModel.md)
- [CognitePointCloudModel](classes/CognitePointCloudModel.md)
- [CombineNodeCollectionBase](classes/CombineNodeCollectionBase.md)
- [ComboControls](classes/ComboControls.md)
- [CustomObject](classes/CustomObject.md)
- [CustomObjectIntersectInput](classes/CustomObjectIntersectInput.md)
- [DebouncedCameraStopEventTrigger](classes/DebouncedCameraStopEventTrigger.md)
- [DefaultCameraManager](classes/DefaultCameraManager.md)
- [FlexibleControlsOptions](classes/FlexibleControlsOptions.md)
- [IndexSet](classes/IndexSet.md)
- [IntersectionNodeCollection](classes/IntersectionNodeCollection.md)
- [InvertedNodeCollection](classes/InvertedNodeCollection.md)
- [NodeCollection](classes/NodeCollection.md)
- [NodeIdNodeCollection](classes/NodeIdNodeCollection.md)
- [NumericRange](classes/NumericRange.md)
- [Overlay3DCollection](classes/Overlay3DCollection.md)
- [PointCloudObjectCollection](classes/PointCloudObjectCollection.md)
- [PointerEvents](classes/PointerEvents.md)
- [PointerEventsTarget](classes/PointerEventsTarget.md)
- [PropertyFilterNodeCollection](classes/PropertyFilterNodeCollection.md)
- [SinglePropertyFilterNodeCollection](classes/SinglePropertyFilterNodeCollection.md)
- [StyledPointCloudObjectCollection](classes/StyledPointCloudObjectCollection.md)
- [TreeIndexNodeCollection](classes/TreeIndexNodeCollection.md)
- [UnionNodeCollection](classes/UnionNodeCollection.md)
- [Vector3Pool](classes/Vector3Pool.md)

### Interfaces

- [AddModelOptions](interfaces/AddModelOptions.md)
- [AreaCollection](interfaces/AreaCollection.md)
- [CameraManager](interfaces/CameraManager.md)
- [CdfModelNodeCollectionDataProvider](interfaces/CdfModelNodeCollectionDataProvider.md)
- [Cognite3DViewerOptions](interfaces/Cognite3DViewerOptions.md)
- [ICustomObject](interfaces/ICustomObject.md)
- [IFlexibleCameraManager](interfaces/IFlexibleCameraManager.md)
- [Image360](interfaces/Image360.md)
- [Image360Annotation](interfaces/Image360Annotation.md)
- [Image360Collection](interfaces/Image360Collection.md)
- [Image360Revision](interfaces/Image360Revision.md)
- [Image360Visualization](interfaces/Image360Visualization.md)
- [Overlay3D](interfaces/Overlay3D.md)
- [OverlayCollection](interfaces/OverlayCollection.md)

### Type Aliases

- [AddImage360Options](type-aliases/AddImage360Options.md)
- [AnyIntersection](type-aliases/AnyIntersection.md)
- [AssetAnnotationImage360Info](type-aliases/AssetAnnotationImage360Info.md)
- [BeforeSceneRenderedDelegate](type-aliases/BeforeSceneRenderedDelegate.md)
- [CadIntersection](type-aliases/CadIntersection.md)
- [CadModelBudget](type-aliases/CadModelBudget.md)
- [CameraChangeDelegate](type-aliases/CameraChangeDelegate.md)
- [CameraConfiguration](type-aliases/CameraConfiguration.md)
- [CameraControlsOptions](type-aliases/CameraControlsOptions.md)
- [CameraEventDelegate](type-aliases/CameraEventDelegate.md)
- [CameraManagerEventType](type-aliases/CameraManagerEventType.md)
- [CameraState](type-aliases/CameraState.md)
- [CameraStopDelegate](type-aliases/CameraStopDelegate.md)
- [ClippingPlanesState](type-aliases/ClippingPlanesState.md)
- [CogniteModel](type-aliases/CogniteModel.md)
- [ComboControlsEventType](type-aliases/ComboControlsEventType.md)
- [ComboControlsOptions](type-aliases/ComboControlsOptions.md)
- [CompletePointCloudAppearance](type-aliases/CompletePointCloudAppearance.md)
- [CustomObjectIntersection](type-aliases/CustomObjectIntersection.md)
- [DefaultOverlay3DContentType](type-aliases/DefaultOverlay3DContentType.md)
- [DisposedDelegate](type-aliases/DisposedDelegate.md)
- [EdlOptions](type-aliases/EdlOptions.md)
- [FlexibleControlsTypeChangeDelegate](type-aliases/FlexibleControlsTypeChangeDelegate.md)
- [GeometryFilter](type-aliases/GeometryFilter.md)
- [Image360AnnotationAppearance](type-aliases/Image360AnnotationAppearance.md)
- [Image360AnnotationAssetFilter](type-aliases/Image360AnnotationAssetFilter.md)
- [Image360AnnotationAssetQueryResult](type-aliases/Image360AnnotationAssetQueryResult.md)
- [Image360AnnotationFilterOptions](type-aliases/Image360AnnotationFilterOptions.md)
- [Image360AnnotationIntersection](type-aliases/Image360AnnotationIntersection.md)
- [Image360DataModelIdentifier](type-aliases/Image360DataModelIdentifier.md)
- [Image360EnteredDelegate](type-aliases/Image360EnteredDelegate.md)
- [Image360ExitedDelegate](type-aliases/Image360ExitedDelegate.md)
- [Image360IconStyle](type-aliases/Image360IconStyle.md)
- [Image360WithCollection](type-aliases/Image360WithCollection.md)
- [ImageAssetLinkAnnotationInfo](type-aliases/ImageAssetLinkAnnotationInfo.md)
- [Intersection](type-aliases/Intersection.md)
- [ModelState](type-aliases/ModelState.md)
- [NodeAppearance](type-aliases/NodeAppearance.md)
- [NodeCollectionSerializationContext](type-aliases/NodeCollectionSerializationContext.md)
- [OnLoadingCallback](type-aliases/OnLoadingCallback.md)
- [Overlay3DCollectionOptions](type-aliases/Overlay3DCollectionOptions.md)
- [OverlayInfo](type-aliases/OverlayInfo.md)
- [PointCloudAppearance](type-aliases/PointCloudAppearance.md)
- [PointCloudBudget](type-aliases/PointCloudBudget.md)
- [PointCloudIntersection](type-aliases/PointCloudIntersection.md)
- [PointCloudObjectMetadata](type-aliases/PointCloudObjectMetadata.md)
- [PointerEventData](type-aliases/PointerEventData.md)
- [PointerEventDelegate](type-aliases/PointerEventDelegate.md)
- [PropertyFilterNodeCollectionOptions](type-aliases/PropertyFilterNodeCollectionOptions.md)
- [RenderParameters](type-aliases/RenderParameters.md)
- [ResolutionOptions](type-aliases/ResolutionOptions.md)
- [SceneRenderedDelegate](type-aliases/SceneRenderedDelegate.md)
- [SerializableNodeAppearance](type-aliases/SerializableNodeAppearance.md)
- [SerializedNodeCollection](type-aliases/SerializedNodeCollection.md)
- [SupportedModelTypes](type-aliases/SupportedModelTypes.md)
- [ViewerState](type-aliases/ViewerState.md)
- [WellKnownUnit](type-aliases/WellKnownUnit.md)

### Variables

- [CAMERA\_MANAGER\_EVENT\_TYPE\_LIST](variables/CAMERA_MANAGER_EVENT_TYPE_LIST.md)
- [CDF\_TO\_VIEWER\_TRANSFORMATION](variables/CDF_TO_VIEWER_TRANSFORMATION.md)
- [DefaultNodeAppearance](variables/DefaultNodeAppearance.md)
- [DefaultPointCloudAppearance](variables/DefaultPointCloudAppearance.md)
- [REVEAL\_VERSION](variables/REVEAL_VERSION.md)

### Functions

- [getNormalizedPixelCoordinates](functions/getNormalizedPixelCoordinates.md)
- [getNormalizedPixelCoordinatesBySize](functions/getNormalizedPixelCoordinatesBySize.md)
- [getWheelEventDelta](functions/getWheelEventDelta.md)
- [isFlexibleCameraManager](functions/isFlexibleCameraManager.md)
- [registerNodeCollectionType](functions/registerNodeCollectionType.md)


<!-- SOURCE_END: reveal/documentation\versioned_docs\version-4.x\api\@cognite\reveal\index.md -->

================================================================================


<!-- SOURCE_START: reveal/documentation\versioned_docs\version-4.x\api\@cognite\reveal\interfaces\AddModelOptions.md -->
## File: reveal/documentation\versioned_docs\version-4.x\api\@cognite\reveal\interfaces\AddModelOptions.md

# Interface: AddModelOptions

## Properties

### geometryFilter?

> `optional` **geometryFilter**: [`GeometryFilter`](../type-aliases/GeometryFilter.md)

#### Defined in

[packages/api/src/public/migration/types.ts:215](https://github.com/cognitedata/reveal/blob/2acd9d17229d2bc8e309653b4d6a39ad941e44f1/viewer/packages/api/src/public/migration/types.ts#L215)

***

### localPath?

> `optional` **localPath**: `string`

#### Defined in

[packages/api/src/public/migration/types.ts:214](https://github.com/cognitedata/reveal/blob/2acd9d17229d2bc8e309653b4d6a39ad941e44f1/viewer/packages/api/src/public/migration/types.ts#L214)

***

### modelId

> **modelId**: `number`

#### Defined in

[packages/api/src/public/migration/types.ts:211](https://github.com/cognitedata/reveal/blob/2acd9d17229d2bc8e309653b4d6a39ad941e44f1/viewer/packages/api/src/public/migration/types.ts#L211)

***

### revisionId

> **revisionId**: `number`

#### Defined in

[packages/api/src/public/migration/types.ts:212](https://github.com/cognitedata/reveal/blob/2acd9d17229d2bc8e309653b4d6a39ad941e44f1/viewer/packages/api/src/public/migration/types.ts#L212)


<!-- SOURCE_END: reveal/documentation\versioned_docs\version-4.x\api\@cognite\reveal\interfaces\AddModelOptions.md -->

================================================================================


<!-- SOURCE_START: reveal/documentation\versioned_docs\version-4.x\api\@cognite\reveal\interfaces\AreaCollection.md -->
## File: reveal/documentation\versioned_docs\version-4.x\api\@cognite\reveal\interfaces\AreaCollection.md

# Interface: AreaCollection

Represents a collection of areas/axis-aligned
bounding boxes for use e.g. for load prioritization. Implementations
are not expected to store all areas inserted with `addAreas`,
but rather some "representative box set" covering the inserted areas.
Performance will be better the fewer boxes the representative set contains,
while the effectiveness of node prioritization will suffer if the
representative set covers too much area that is not part
of the inserted boxes

## Properties

### isEmpty

> `readonly` **isEmpty**: `boolean`

#### Defined in

[packages/cad-styling/src/prioritized/AreaCollection.ts:18](https://github.com/cognitedata/reveal/blob/2acd9d17229d2bc8e309653b4d6a39ad941e44f1/viewer/packages/cad-styling/src/prioritized/AreaCollection.ts#L18)

## Methods

### addAreas()

> **addAreas**(`boxes`): `void`

Add areas to be covered by the representative set of this
AreaCollection.

#### Parameters

 **boxes**: `Iterable`\<`Box3`\>

#### Returns

`void`

#### Defined in

[packages/cad-styling/src/prioritized/AreaCollection.ts:36](https://github.com/cognitedata/reveal/blob/2acd9d17229d2bc8e309653b4d6a39ad941e44f1/viewer/packages/cad-styling/src/prioritized/AreaCollection.ts#L36)

***

### areas()

> **areas**(): `Generator`\<`Box3`, `any`, `unknown`\>

Return some set of boxes that cover the boxes inserted with `addAreas`.
It is required that each inserted box is completely covered by some
subset of boxes in the set returned from `areas`

#### Returns

`Generator`\<`Box3`, `any`, `unknown`\>

#### Defined in

[packages/cad-styling/src/prioritized/AreaCollection.ts:25](https://github.com/cognitedata/reveal/blob/2acd9d17229d2bc8e309653b4d6a39ad941e44f1/viewer/packages/cad-styling/src/prioritized/AreaCollection.ts#L25)

***

### intersectWith()

> **intersectWith**(`boxes`): `void`

Alter the representative set to cover only the intersection between the
representative set of this AreaCollection and the incoming boxes.
Note that the intersection of two representative sets A' and B' that
represent the original box sets A and B will cover the intersection between
A and B, and will thus be a valid representative set for the intersection of A and B.

#### Parameters

 **boxes**: `Iterable`\<`Box3`\>

#### Returns

`void`

#### Defined in

[packages/cad-styling/src/prioritized/AreaCollection.ts:45](https://github.com/cognitedata/reveal/blob/2acd9d17229d2bc8e309653b4d6a39ad941e44f1/viewer/packages/cad-styling/src/prioritized/AreaCollection.ts#L45)

***

### intersectsBox()

> **intersectsBox**(`box`): `boolean`

Return whether the input box intersects the AreaCollection.

#### Parameters

 **box**: `Box3`

#### Returns

`boolean`

#### Defined in

[packages/cad-styling/src/prioritized/AreaCollection.ts:30](https://github.com/cognitedata/reveal/blob/2acd9d17229d2bc8e309653b4d6a39ad941e44f1/viewer/packages/cad-styling/src/prioritized/AreaCollection.ts#L30)


<!-- SOURCE_END: reveal/documentation\versioned_docs\version-4.x\api\@cognite\reveal\interfaces\AreaCollection.md -->

================================================================================


<!-- SOURCE_START: reveal/documentation\versioned_docs\version-4.x\api\@cognite\reveal\interfaces\CameraManager.md -->
## File: reveal/documentation\versioned_docs\version-4.x\api\@cognite\reveal\interfaces\CameraManager.md

# Interface: CameraManager

Interface for manager responsible for all manipulations to the camera,
including animations and modification of state. Implementations are responsible for
providing a `THREE.PerspectiveCamera` instance to the viewer. Implementations
must trigger the `cameraChange`-event when camera is changed.
The default implementation is [DefaultCameraManager](../classes/DefaultCameraManager.md).

## Extended by

- [`IFlexibleCameraManager`](IFlexibleCameraManager.md)

## Methods

### activate()

> **activate**(`cameraManager`?): `void`

Set this manager as active and enable controls.

Should update CameraManager.enabled to reflect the state of the manager.
Note that this is called automatically when a new CameraManager is set on the viewer.

#### Parameters

 **cameraManager?**: [`CameraManager`](CameraManager.md)

Previously used camera manager.

#### Returns

`void`

#### Defined in

[packages/camera-manager/src/CameraManager.ts:61](https://github.com/cognitedata/reveal/blob/2acd9d17229d2bc8e309653b4d6a39ad941e44f1/viewer/packages/camera-manager/src/CameraManager.ts#L61)

***

### deactivate()

> **deactivate**(): `void`

Deactivate this manager and disable controls.

Should update CameraManager.enabled to reflect the state of the manager.
Note that this is called automatically when a new CameraManager is set on the viewer.

#### Returns

`void`

#### Defined in

[packages/camera-manager/src/CameraManager.ts:69](https://github.com/cognitedata/reveal/blob/2acd9d17229d2bc8e309653b4d6a39ad941e44f1/viewer/packages/camera-manager/src/CameraManager.ts#L69)

***

### dispose()

> **dispose**(): `void`

#### Returns

`void`

#### Obvious

#### Defined in

[packages/camera-manager/src/CameraManager.ts:109](https://github.com/cognitedata/reveal/blob/2acd9d17229d2bc8e309653b4d6a39ad941e44f1/viewer/packages/camera-manager/src/CameraManager.ts#L109)

***

### fitCameraToBoundingBox()

> **fitCameraToBoundingBox**(`boundingBox`, `duration`?, `radiusFactor`?): `void`

Moves camera to a place where the content of a bounding box is visible to the camera.

#### Parameters

 **boundingBox**: `Box3`

The bounding box in world space.

 **duration?**: `number`

The duration of the animation moving the camera.

 **radiusFactor?**: `number`

The ratio of the distance from camera to center of box and radius of the box.

#### Returns

`void`

#### Defined in

[packages/camera-manager/src/CameraManager.ts:97](https://github.com/cognitedata/reveal/blob/2acd9d17229d2bc8e309653b4d6a39ad941e44f1/viewer/packages/camera-manager/src/CameraManager.ts#L97)

***

### getCamera()

> **getCamera**(): `PerspectiveCamera`

Returns the camera used for rendering the viewer.
Note that the camera will not be modified directly by Reveal.
Implementations must trigger the `cameraChange`-event whenever the
camera changes.

#### Returns

`PerspectiveCamera`

#### Defined in

[packages/camera-manager/src/CameraManager.ts:29](https://github.com/cognitedata/reveal/blob/2acd9d17229d2bc8e309653b4d6a39ad941e44f1/viewer/packages/camera-manager/src/CameraManager.ts#L29)

***

### getCameraState()

> **getCameraState**(): `Required` \<[`CameraState`](../type-aliases/CameraState.md)\>

Get camera's state

#### Returns

`Required` \<[`CameraState`](../type-aliases/CameraState.md)\>

Camera state: position, target and rotation.

#### Defined in

[packages/camera-manager/src/CameraManager.ts:52](https://github.com/cognitedata/reveal/blob/2acd9d17229d2bc8e309653b4d6a39ad941e44f1/viewer/packages/camera-manager/src/CameraManager.ts#L52)

***

### off()

#### off(event, callback)

> **off**(`event`, `callback`): `void`

Unsubscribes from changes of the camera event.

##### Parameters

 **event**: `"cameraChange"`

The event type.

 **callback**: [`CameraChangeDelegate`](../type-aliases/CameraChangeDelegate.md)

Callback function to be unsubscribed.

##### Returns

`void`

##### Defined in

[packages/camera-manager/src/CameraManager.ts:87](https://github.com/cognitedata/reveal/blob/2acd9d17229d2bc8e309653b4d6a39ad941e44f1/viewer/packages/camera-manager/src/CameraManager.ts#L87)

#### off(event, callback)

> **off**(`event`, `callback`): `void`

##### Parameters

 **event**: `"cameraStop"`

 **callback**: [`CameraStopDelegate`](../type-aliases/CameraStopDelegate.md)

##### Returns

`void`

##### Defined in

[packages/camera-manager/src/CameraManager.ts:88](https://github.com/cognitedata/reveal/blob/2acd9d17229d2bc8e309653b4d6a39ad941e44f1/viewer/packages/camera-manager/src/CameraManager.ts#L88)

#### off(event, callback)

> **off**(`event`, `callback`): `void`

##### Parameters

 **event**: `"cameraChange"` \| `"cameraStop"`

 **callback**: [`CameraEventDelegate`](../type-aliases/CameraEventDelegate.md)

##### Returns

`void`

##### Defined in

[packages/camera-manager/src/CameraManager.ts:89](https://github.com/cognitedata/reveal/blob/2acd9d17229d2bc8e309653b4d6a39ad941e44f1/viewer/packages/camera-manager/src/CameraManager.ts#L89)

***

### on()

#### on(event, callback)

> **on**(`event`, `callback`): `void`

Subscribes to events on this camera manager. There are several event types:
'cameraChange' - Subscribes to changes of the camera. This is used by Reveal to react on changes of the camera.
'cameraStop' - Subscribes to events indicating the camera has stopped

##### Parameters

 **event**: `"cameraChange"`

The event type.

 **callback**: [`CameraChangeDelegate`](../type-aliases/CameraChangeDelegate.md)

Callback to be called when the event is fired.

##### Returns

`void`

##### Defined in

[packages/camera-manager/src/CameraManager.ts:78](https://github.com/cognitedata/reveal/blob/2acd9d17229d2bc8e309653b4d6a39ad941e44f1/viewer/packages/camera-manager/src/CameraManager.ts#L78)

#### on(event, callback)

> **on**(`event`, `callback`): `void`

##### Parameters

 **event**: `"cameraStop"`

 **callback**: [`CameraStopDelegate`](../type-aliases/CameraStopDelegate.md)

##### Returns

`void`

##### Defined in

[packages/camera-manager/src/CameraManager.ts:79](https://github.com/cognitedata/reveal/blob/2acd9d17229d2bc8e309653b4d6a39ad941e44f1/viewer/packages/camera-manager/src/CameraManager.ts#L79)

#### on(event, callback)

> **on**(`event`, `callback`): `void`

##### Parameters

 **event**: `"cameraChange"` \| `"cameraStop"`

 **callback**: [`CameraEventDelegate`](../type-aliases/CameraEventDelegate.md)

##### Returns

`void`

##### Defined in

[packages/camera-manager/src/CameraManager.ts:80](https://github.com/cognitedata/reveal/blob/2acd9d17229d2bc8e309653b4d6a39ad941e44f1/viewer/packages/camera-manager/src/CameraManager.ts#L80)

***

### setCameraState()

> **setCameraState**(`state`): `void`

Set camera's state. Rotation and target can't be set at the same time as they could conflict,
should throw an error if both are passed with non-zero value inside state.

#### Parameters

 **state**: [`CameraState`](../type-aliases/CameraState.md)

Camera state, all fields are optional.

#### Returns

`void`

#### Example

```js
// store position, target
const { position, target } = cameraManager.getCameraState();
// restore position, target
cameraManager.setCameraState({ position, target });
```

#### Defined in

[packages/camera-manager/src/CameraManager.ts:46](https://github.com/cognitedata/reveal/blob/2acd9d17229d2bc8e309653b4d6a39ad941e44f1/viewer/packages/camera-manager/src/CameraManager.ts#L46)

***

### update()

> **update**(`deltaTime`, `boundingBox`): `void`

Updates internal state of camera manager. Expected to update visual state of the camera
as well as it's near and far planes if needed. Called in `requestAnimationFrame`-loop.
Reveal performance affects frequency with which this method is called.

#### Parameters

 **deltaTime**: `number`

Delta time since last update in seconds.

 **boundingBox**: `Box3`

Global bounding box of the model(s) and any custom objects added to the scene.

#### Returns

`void`

#### Defined in

[packages/camera-manager/src/CameraManager.ts:105](https://github.com/cognitedata/reveal/blob/2acd9d17229d2bc8e309653b4d6a39ad941e44f1/viewer/packages/camera-manager/src/CameraManager.ts#L105)


<!-- SOURCE_END: reveal/documentation\versioned_docs\version-4.x\api\@cognite\reveal\interfaces\CameraManager.md -->

================================================================================


<!-- SOURCE_START: reveal/documentation\versioned_docs\version-4.x\api\@cognite\reveal\interfaces\CdfModelNodeCollectionDataProvider.md -->
## File: reveal/documentation\versioned_docs\version-4.x\api\@cognite\reveal\interfaces\CdfModelNodeCollectionDataProvider.md

# Interface: CdfModelNodeCollectionDataProvider

Provides metadata needed to get asset mappings for a CDF 3D model

## Properties

### modelId

> **modelId**: `number`

Model and revision IDs for the model

#### Defined in

[packages/cad-styling/src/CdfModelNodeCollectionDataProvider.ts:31](https://github.com/cognitedata/reveal/blob/2acd9d17229d2bc8e309653b4d6a39ad941e44f1/viewer/packages/cad-styling/src/CdfModelNodeCollectionDataProvider.ts#L31)

***

### nodeCount

> **nodeCount**: `number`

Total count of nodes in the model

#### Defined in

[packages/cad-styling/src/CdfModelNodeCollectionDataProvider.ts:26](https://github.com/cognitedata/reveal/blob/2acd9d17229d2bc8e309653b4d6a39ad941e44f1/viewer/packages/cad-styling/src/CdfModelNodeCollectionDataProvider.ts#L26)

***

### revisionId

> **revisionId**: `number`

#### Defined in

[packages/cad-styling/src/CdfModelNodeCollectionDataProvider.ts:32](https://github.com/cognitedata/reveal/blob/2acd9d17229d2bc8e309653b4d6a39ad941e44f1/viewer/packages/cad-styling/src/CdfModelNodeCollectionDataProvider.ts#L32)

## Methods

### getCdfToDefaultModelTransformation()

> **getCdfToDefaultModelTransformation**(`out`?): `Matrix4`

Gets the default transformation of the model from CDF space.
The current total transformation of the model from the backend to its transform in ThreeJS space
is thus `model.getCdfToDefaultModelTransformation() * model.getModelTransformation()`.

#### Parameters

 **out?**: `Matrix4`

#### Returns

`Matrix4`

#### Defined in

[packages/cad-styling/src/CdfModelNodeCollectionDataProvider.ts:21](https://github.com/cognitedata/reveal/blob/2acd9d17229d2bc8e309653b4d6a39ad941e44f1/viewer/packages/cad-styling/src/CdfModelNodeCollectionDataProvider.ts#L21)

***

### getModelTransformation()

> **getModelTransformation**(`out`?): `Matrix4`

Gets the transformation of the model in ThreeJS space

#### Parameters

 **out?**: `Matrix4`

#### Returns

`Matrix4`

#### Defined in

[packages/cad-styling/src/CdfModelNodeCollectionDataProvider.ts:14](https://github.com/cognitedata/reveal/blob/2acd9d17229d2bc8e309653b4d6a39ad941e44f1/viewer/packages/cad-styling/src/CdfModelNodeCollectionDataProvider.ts#L14)


<!-- SOURCE_END: reveal/documentation\versioned_docs\version-4.x\api\@cognite\reveal\interfaces\CdfModelNodeCollectionDataProvider.md -->

================================================================================


<!-- SOURCE_START: reveal/documentation\versioned_docs\version-4.x\api\@cognite\reveal\interfaces\Cognite3DViewerOptions.md -->
## File: reveal/documentation\versioned_docs\version-4.x\api\@cognite\reveal\interfaces\Cognite3DViewerOptions.md

# Interface: Cognite3DViewerOptions

## Properties

### antiAliasingHint?

> `optional` **antiAliasingHint**: `"disabled"` \| `"fxaa"` \| `"msaa2+fxaa"` \| `"msaa4+fxaa"` \| `"msaa8+fxaa"` \| `"msaa16+fxaa"` \| `"msaa2"` \| `"msaa4"` \| `"msaa8"` \| `"msaa16"`

Hints Reveal to use a given anti-aliasing technique.

Fast approximate anti-aliasing (FXAA) is a fast technique that will remove some, but not all aliasing effects. See
https://en.wikipedia.org/wiki/Fast_approximate_anti-aliasing.

Multi-sampling anti-aliasinbg (MSAA) is a technique for taking multiple samples per pixel to avoid aliasing effects.
This mode requires WebGL 2. See https://www.khronos.org/opengl/wiki/Multisampling.

The combined modes will apply both MSAA and FXAA anti-aliasing and yields the best visual result.

When using the MSAA modes combined with FXAA Reveal will fall back to FXAA on WebGL 1. There is no fallback for the
"plain" MSAA modes on WebGL 1.

Currently the default mode is FXAA, but this is subject to change.

#### Defined in

[packages/api/src/public/migration/types.ts:116](https://github.com/cognitedata/reveal/blob/2acd9d17229d2bc8e309653b4d6a39ad941e44f1/viewer/packages/api/src/public/migration/types.ts#L116)

***

### cameraManager?

> `optional` **cameraManager**: [`CameraManager`](CameraManager.md)

Camera manager instance that is used for controlling the camera.
It is responsible for all manipulations that are done with the camera,
including animations and modification of state. Also, gives ability
to provide custom `PerspectiveCamera` instance to [Cognite3DViewer](../classes/Cognite3DViewer.md).
Default implementation is [DefaultCameraManager](../classes/DefaultCameraManager.md).

#### Defined in

[packages/api/src/public/migration/types.ts:81](https://github.com/cognitedata/reveal/blob/2acd9d17229d2bc8e309653b4d6a39ad941e44f1/viewer/packages/api/src/public/migration/types.ts#L81)

***

### continuousModelStreaming?

> `optional` **continuousModelStreaming**: `boolean`

Allows for controlling if geometry streaming should be halted when
the camera is moving. Note that this option should left to false on
low-end devices as more loading can cause frame drops.

Default value is set to true.

#### Defined in

[packages/api/src/public/migration/types.ts:176](https://github.com/cognitedata/reveal/blob/2acd9d17229d2bc8e309653b4d6a39ad941e44f1/viewer/packages/api/src/public/migration/types.ts#L176)

***

### customDataSource?

> `optional` **customDataSource**: [`DataSource`](../extensions/datasource/interfaces/DataSource.md)

Allows providing a custom data source that Reveal will
use to load model data. Note that some features might not
work when implementing a custom data source. Please refer
to the Reveal documentation for details.

Note that the data source must support [CdfModelIdentifier](../extensions/datasource/classes/CdfModelIdentifier.md).

This cannot be used together with Cognite3DViewerOptions._localModels.

#### Defined in

[packages/api/src/public/migration/types.ts:167](https://github.com/cognitedata/reveal/blob/2acd9d17229d2bc8e309653b4d6a39ad941e44f1/viewer/packages/api/src/public/migration/types.ts#L167)

***

### domElement?

> `optional` **domElement**: `HTMLElement`

An existing DOM element that we will render canvas into.

#### Defined in

[packages/api/src/public/migration/types.ts:50](https://github.com/cognitedata/reveal/blob/2acd9d17229d2bc8e309653b4d6a39ad941e44f1/viewer/packages/api/src/public/migration/types.ts#L50)

***

### enableEdges?

> `optional` **enableEdges**: `boolean`

Enables / disables visualizing the edges of geometry. Defaults to true.

#### Defined in

[packages/api/src/public/migration/types.ts:152](https://github.com/cognitedata/reveal/blob/2acd9d17229d2bc8e309653b4d6a39ad941e44f1/viewer/packages/api/src/public/migration/types.ts#L152)

***

### hasEventListeners?

> `optional` **hasEventListeners**: `boolean`

**`Beta`**

Add event listerers around, default is having event listeners.

#### Defined in

[packages/api/src/public/migration/types.ts:204](https://github.com/cognitedata/reveal/blob/2acd9d17229d2bc8e309653b4d6a39ad941e44f1/viewer/packages/api/src/public/migration/types.ts#L204)

***

### loadingIndicatorStyle?

> `optional` **loadingIndicatorStyle**: `object`

Style the loading indicator.

#### opacity

> **opacity**: `number`

Opacity of the spinner in fractions. Valid values are between
0.2 and 1.0. Defaults to 1.0.

#### placement

> **placement**: `"topLeft"` \| `"topRight"` \| `"bottomLeft"` \| `"bottomRight"`

What corner the spinner should be placed in. Defaults top topLeft.

#### Defined in

[packages/api/src/public/migration/types.ts:63](https://github.com/cognitedata/reveal/blob/2acd9d17229d2bc8e309653b4d6a39ad941e44f1/viewer/packages/api/src/public/migration/types.ts#L63)

***

### logMetrics?

> `optional` **logMetrics**: `boolean`

Send anonymous usage statistics.

#### Defined in

[packages/api/src/public/migration/types.ts:53](https://github.com/cognitedata/reveal/blob/2acd9d17229d2bc8e309653b4d6a39ad941e44f1/viewer/packages/api/src/public/migration/types.ts#L53)

***

### onLoading?

> `optional` **onLoading**: [`OnLoadingCallback`](../type-aliases/OnLoadingCallback.md)

Callback to download stream progress.

#### Defined in

[packages/api/src/public/migration/types.ts:155](https://github.com/cognitedata/reveal/blob/2acd9d17229d2bc8e309653b4d6a39ad941e44f1/viewer/packages/api/src/public/migration/types.ts#L155)

***

### pointCloudEffects?

> `optional` **pointCloudEffects**: `object`

Point cloud visualisation effects parameteres.

#### edlOptions?

> `optional` **edlOptions**: `"disabled"` \| `Partial` \<[`EdlOptions`](../type-aliases/EdlOptions.md)\>

Eye Dome Lighting (EDL) effect, considerably improves depth perception of point cloud model.

#### pointBlending?

> `optional` **pointBlending**: `boolean`

Point blending effect, creates more "stable" texture on objects surfaces if point sizing is
big enough. Can cause significant decrease in performance on some machines.

#### Defined in

[packages/api/src/public/migration/types.ts:137](https://github.com/cognitedata/reveal/blob/2acd9d17229d2bc8e309653b4d6a39ad941e44f1/viewer/packages/api/src/public/migration/types.ts#L137)

***

### renderTargetOptions?

> `optional` **renderTargetOptions**: `object`

Render to offscreen buffer instead of canvas.

#### autoSetSize?

> `optional` **autoSetSize**: `boolean`

#### target

> **target**: `WebGLRenderTarget`\<`Texture`\>

#### Defined in

[packages/api/src/public/migration/types.ts:58](https://github.com/cognitedata/reveal/blob/2acd9d17229d2bc8e309653b4d6a39ad941e44f1/viewer/packages/api/src/public/migration/types.ts#L58)

***

### renderer?

> `optional` **renderer**: `WebGLRenderer`

Renderer used to visualize model (optional).
Note that when providing a custom renderer, this should be configured with
`'powerPreference': 'high-performance'` for best performance.

#### Defined in

[packages/api/src/public/migration/types.ts:87](https://github.com/cognitedata/reveal/blob/2acd9d17229d2bc8e309653b4d6a39ad941e44f1/viewer/packages/api/src/public/migration/types.ts#L87)

***

### ~~rendererResolutionThreshold?~~

> `optional` **rendererResolutionThreshold**: `number`

Generally Reveal will follow the resolution given by the size
of the encapsulating DOM element of the Canvas [Cognite3DViewerOptions.domElement](Cognite3DViewerOptions.md#domelement).
To ensure managable performance, Reveal will by default set an upper threshold to limit
the resolution. Setting the [Cognite3DViewerOptions.rendererResolutionThreshold](Cognite3DViewerOptions.md#rendererresolutionthreshold) will
set this upper limit of what resolution Reveal will allow.

#### Deprecated

Use [Cognite3DViewer.setResolutionOptions](../classes/Cognite3DViewer.md#setresolutionoptions) instead.

#### Defined in

[packages/api/src/public/migration/types.ts:98](https://github.com/cognitedata/reveal/blob/2acd9d17229d2bc8e309653b4d6a39ad941e44f1/viewer/packages/api/src/public/migration/types.ts#L98)

***

### sdk

> **sdk**: `CogniteClient`

Initialized connection to CDF used to load data.

#### Defined in

[packages/api/src/public/migration/types.ts:47](https://github.com/cognitedata/reveal/blob/2acd9d17229d2bc8e309653b4d6a39ad941e44f1/viewer/packages/api/src/public/migration/types.ts#L47)

***

### ssaoQualityHint?

> `optional` **ssaoQualityHint**: `"disabled"` \| `"medium"` \| `"high"` \| `"veryhigh"`

Hints the renderer of the quality it should aim for for screen space ambient occlusion,
an effect creating shadows and that gives the rendered image more depth.

#### Defined in

[packages/api/src/public/migration/types.ts:132](https://github.com/cognitedata/reveal/blob/2acd9d17229d2bc8e309653b4d6a39ad941e44f1/viewer/packages/api/src/public/migration/types.ts#L132)

***

### useFlexibleCameraManager?

> `optional` **useFlexibleCameraManager**: `boolean`

**`Beta`**

Use the new flexible camera manager or not, default not to be used.

#### Defined in

[packages/api/src/public/migration/types.ts:198](https://github.com/cognitedata/reveal/blob/2acd9d17229d2bc8e309653b4d6a39ad941e44f1/viewer/packages/api/src/public/migration/types.ts#L198)


<!-- SOURCE_END: reveal/documentation\versioned_docs\version-4.x\api\@cognite\reveal\interfaces\Cognite3DViewerOptions.md -->

================================================================================


<!-- SOURCE_START: reveal/documentation\versioned_docs\version-4.x\api\@cognite\reveal\interfaces\ICustomObject.md -->
## File: reveal/documentation\versioned_docs\version-4.x\api\@cognite\reveal\interfaces\ICustomObject.md

# Interface: ICustomObject

**`Beta`**

This interface encasulate a Object3D, and made it possible to add flags to it.
It might be extended with more flags in the future.

## Accessors

### isPartOfBoundingBox

> `get` **isPartOfBoundingBox**(): `boolean`

**`Beta`**

Get whether it should be part of the combined bounding box or not.
Default is true.

#### Returns

`boolean`

#### Defined in

[packages/utilities/src/customObject/ICustomObject.ts:26](https://github.com/cognitedata/reveal/blob/2acd9d17229d2bc8e309653b4d6a39ad941e44f1/viewer/packages/utilities/src/customObject/ICustomObject.ts#L26)

***

### object

> `get` **object**(): `Object3D`\<`Object3DEventMap`\>

**`Beta`**

Get the Object3D

#### Returns

`Object3D`\<`Object3DEventMap`\>

#### Defined in

[packages/utilities/src/customObject/ICustomObject.ts:19](https://github.com/cognitedata/reveal/blob/2acd9d17229d2bc8e309653b4d6a39ad941e44f1/viewer/packages/utilities/src/customObject/ICustomObject.ts#L19)

***

### shouldPick

> `get` **shouldPick**(): `boolean`

**`Beta`**

Get whether it should be picked by the camera manager
Default is false.

#### Returns

`boolean`

#### Defined in

[packages/utilities/src/customObject/ICustomObject.ts:33](https://github.com/cognitedata/reveal/blob/2acd9d17229d2bc8e309653b4d6a39ad941e44f1/viewer/packages/utilities/src/customObject/ICustomObject.ts#L33)

***

### shouldPickBoundingBox

> `get` **shouldPickBoundingBox**(): `boolean`

**`Beta`**

Set or get whether it should be also give the bounding box when picked by the camera
Default is false.

#### Returns

`boolean`

#### Defined in

[packages/utilities/src/customObject/ICustomObject.ts:40](https://github.com/cognitedata/reveal/blob/2acd9d17229d2bc8e309653b4d6a39ad941e44f1/viewer/packages/utilities/src/customObject/ICustomObject.ts#L40)

***

### useDepthTest

> `get` **useDepthTest**(): `boolean`

**`Beta`**

Get whether it should be rendered with depth test (on top on other objects)
Default is true.

#### Returns

`boolean`

#### Defined in

[packages/utilities/src/customObject/ICustomObject.ts:47](https://github.com/cognitedata/reveal/blob/2acd9d17229d2bc8e309653b4d6a39ad941e44f1/viewer/packages/utilities/src/customObject/ICustomObject.ts#L47)

## Methods

### beforeRender()

> **beforeRender**(`camera`): `void`

**`Beta`**

This method is called before rendering of the custom object

#### Parameters

 **camera**: `PerspectiveCamera`

#### Returns

`void`

#### Defined in

[packages/utilities/src/customObject/ICustomObject.ts:69](https://github.com/cognitedata/reveal/blob/2acd9d17229d2bc8e309653b4d6a39ad941e44f1/viewer/packages/utilities/src/customObject/ICustomObject.ts#L69)

***

### getBoundingBox()

> **getBoundingBox**(`target`): `Box3`

**`Beta`**

Get the bounding box from the object

#### Parameters

 **target**: `Box3`

#### Returns

`Box3`

#### Defined in

[packages/utilities/src/customObject/ICustomObject.ts:53](https://github.com/cognitedata/reveal/blob/2acd9d17229d2bc8e309653b4d6a39ad941e44f1/viewer/packages/utilities/src/customObject/ICustomObject.ts#L53)

***

### intersectIfCloser()

> **intersectIfCloser**(`intersectInput`, `closestDistance`): `undefined` \| [`CustomObjectIntersection`](../type-aliases/CustomObjectIntersection.md)

**`Beta`**

Intersect the object with the raycaster.
This function can be overridden to provide custom intersection logic.

#### Parameters

 **intersectInput**: [`CustomObjectIntersectInput`](../classes/CustomObjectIntersectInput.md)

 **closestDistance**: `undefined` \| `number`

#### Returns

`undefined` \| [`CustomObjectIntersection`](../type-aliases/CustomObjectIntersection.md)

#### Defined in

[packages/utilities/src/customObject/ICustomObject.ts:60](https://github.com/cognitedata/reveal/blob/2acd9d17229d2bc8e309653b4d6a39ad941e44f1/viewer/packages/utilities/src/customObject/ICustomObject.ts#L60)


<!-- SOURCE_END: reveal/documentation\versioned_docs\version-4.x\api\@cognite\reveal\interfaces\ICustomObject.md -->

================================================================================


<!-- SOURCE_START: reveal/documentation\versioned_docs\version-4.x\api\@cognite\reveal\interfaces\IFlexibleCameraManager.md -->
## File: reveal/documentation\versioned_docs\version-4.x\api\@cognite\reveal\interfaces\IFlexibleCameraManager.md

# Interface: IFlexibleCameraManager

**`Beta`**

Flexible implementation of [CameraManager](CameraManager.md). The user can switch between Orbit, FirstPerson or OrbitInCenter
Supports automatic update of camera near and far planes and animated change of camera position and target.
It provides additional functionality for controlling camera behavior and rotation.

## Extends

- [`CameraManager`](CameraManager.md)

## Accessors

### controlsType

> `get` **controlsType**(): [`FlexibleControlsType`](../enumerations/FlexibleControlsType.md)

**`Beta`**

Get current FlexibleControlsType type

> `set` **controlsType**(`value`): `void`

**`Beta`**

Set current FlexibleControlsType type

#### Parameters

 **value**: [`FlexibleControlsType`](../enumerations/FlexibleControlsType.md)

#### Returns

[`FlexibleControlsType`](../enumerations/FlexibleControlsType.md)

#### Defined in

[packages/camera-manager/src/Flexible/IFlexibleCameraManager.ts:26](https://github.com/cognitedata/reveal/blob/2acd9d17229d2bc8e309653b4d6a39ad941e44f1/viewer/packages/camera-manager/src/Flexible/IFlexibleCameraManager.ts#L26)

***

### options

> `get` **options**(): [`FlexibleControlsOptions`](../classes/FlexibleControlsOptions.md)

**`Beta`**

Set the options for the camera manager

#### Returns

[`FlexibleControlsOptions`](../classes/FlexibleControlsOptions.md)

#### Defined in

[packages/camera-manager/src/Flexible/IFlexibleCameraManager.ts:37](https://github.com/cognitedata/reveal/blob/2acd9d17229d2bc8e309653b4d6a39ad941e44f1/viewer/packages/camera-manager/src/Flexible/IFlexibleCameraManager.ts#L37)

## Methods

### activate()

> **activate**(`cameraManager`?): `void`

**`Beta`**

Set this manager as active and enable controls.

Should update CameraManager.enabled to reflect the state of the manager.
Note that this is called automatically when a new CameraManager is set on the viewer.

#### Parameters

 **cameraManager?**: [`CameraManager`](CameraManager.md)

Previously used camera manager.

#### Returns

`void`

#### Inherited from

[`CameraManager`](CameraManager.md) . [`activate`](CameraManager.md#activate)

#### Defined in

[packages/camera-manager/src/CameraManager.ts:61](https://github.com/cognitedata/reveal/blob/2acd9d17229d2bc8e309653b4d6a39ad941e44f1/viewer/packages/camera-manager/src/CameraManager.ts#L61)

***

### addControlsTypeChangeListener()

> **addControlsTypeChangeListener**(`callback`): `void`

**`Beta`**

Adds a listener for changes in the controls type of the camera manager.

#### Parameters

 **callback**: [`FlexibleControlsTypeChangeDelegate`](../type-aliases/FlexibleControlsTypeChangeDelegate.md)

The callback function to be invoked when the controls type changes.

#### Returns

`void`

#### Defined in

[packages/camera-manager/src/Flexible/IFlexibleCameraManager.ts:52](https://github.com/cognitedata/reveal/blob/2acd9d17229d2bc8e309653b4d6a39ad941e44f1/viewer/packages/camera-manager/src/Flexible/IFlexibleCameraManager.ts#L52)

***

### deactivate()

> **deactivate**(): `void`

**`Beta`**

Deactivate this manager and disable controls.

Should update CameraManager.enabled to reflect the state of the manager.
Note that this is called automatically when a new CameraManager is set on the viewer.

#### Returns

`void`

#### Inherited from

[`CameraManager`](CameraManager.md) . [`deactivate`](CameraManager.md#deactivate)

#### Defined in

[packages/camera-manager/src/CameraManager.ts:69](https://github.com/cognitedata/reveal/blob/2acd9d17229d2bc8e309653b4d6a39ad941e44f1/viewer/packages/camera-manager/src/CameraManager.ts#L69)

***

### dispose()

> **dispose**(): `void`

**`Beta`**

#### Returns

`void`

#### Inherited from

[`CameraManager`](CameraManager.md) . [`dispose`](CameraManager.md#dispose)

#### Obvious

#### Defined in

[packages/camera-manager/src/CameraManager.ts:109](https://github.com/cognitedata/reveal/blob/2acd9d17229d2bc8e309653b4d6a39ad941e44f1/viewer/packages/camera-manager/src/CameraManager.ts#L109)

***

### fitCameraToBoundingBox()

> **fitCameraToBoundingBox**(`boundingBox`, `duration`?, `radiusFactor`?): `void`

**`Beta`**

Moves camera to a place where the content of a bounding box is visible to the camera.

#### Parameters

 **boundingBox**: `Box3`

The bounding box in world space.

 **duration?**: `number`

The duration of the animation moving the camera.

 **radiusFactor?**: `number`

The ratio of the distance from camera to center of box and radius of the box.

#### Returns

`void`

#### Inherited from

[`CameraManager`](CameraManager.md) . [`fitCameraToBoundingBox`](CameraManager.md#fitcameratoboundingbox)

#### Defined in

[packages/camera-manager/src/CameraManager.ts:97](https://github.com/cognitedata/reveal/blob/2acd9d17229d2bc8e309653b4d6a39ad941e44f1/viewer/packages/camera-manager/src/CameraManager.ts#L97)

***

### getCamera()

> **getCamera**(): `PerspectiveCamera`

**`Beta`**

Returns the camera used for rendering the viewer.
Note that the camera will not be modified directly by Reveal.
Implementations must trigger the `cameraChange`-event whenever the
camera changes.

#### Returns

`PerspectiveCamera`

#### Inherited from

[`CameraManager`](CameraManager.md) . [`getCamera`](CameraManager.md#getcamera)

#### Defined in

[packages/camera-manager/src/CameraManager.ts:29](https://github.com/cognitedata/reveal/blob/2acd9d17229d2bc8e309653b4d6a39ad941e44f1/viewer/packages/camera-manager/src/CameraManager.ts#L29)

***

### getCameraState()

> **getCameraState**(): `Required` \<[`CameraState`](../type-aliases/CameraState.md)\>

**`Beta`**

Get camera's state

#### Returns

`Required` \<[`CameraState`](../type-aliases/CameraState.md)\>

Camera state: position, target and rotation.

#### Inherited from

[`CameraManager`](CameraManager.md) . [`getCameraState`](CameraManager.md#getcamerastate)

#### Defined in

[packages/camera-manager/src/CameraManager.ts:52](https://github.com/cognitedata/reveal/blob/2acd9d17229d2bc8e309653b4d6a39ad941e44f1/viewer/packages/camera-manager/src/CameraManager.ts#L52)

***

### off()

#### off(event, callback)

> **off**(`event`, `callback`): `void`

**`Beta`**

Unsubscribes from changes of the camera event.

##### Parameters

 **event**: `"cameraChange"`

The event type.

 **callback**: [`CameraChangeDelegate`](../type-aliases/CameraChangeDelegate.md)

Callback function to be unsubscribed.

##### Returns

`void`

##### Inherited from

[`CameraManager`](CameraManager.md) . [`off`](CameraManager.md#off)

##### Defined in

[packages/camera-manager/src/CameraManager.ts:87](https://github.com/cognitedata/reveal/blob/2acd9d17229d2bc8e309653b4d6a39ad941e44f1/viewer/packages/camera-manager/src/CameraManager.ts#L87)

#### off(event, callback)

> **off**(`event`, `callback`): `void`

**`Beta`**

##### Parameters

 **event**: `"cameraStop"`

 **callback**: [`CameraStopDelegate`](../type-aliases/CameraStopDelegate.md)

##### Returns

`void`

##### Inherited from

[`CameraManager`](CameraManager.md) . [`off`](CameraManager.md#off)

##### Defined in

[packages/camera-manager/src/CameraManager.ts:88](https://github.com/cognitedata/reveal/blob/2acd9d17229d2bc8e309653b4d6a39ad941e44f1/viewer/packages/camera-manager/src/CameraManager.ts#L88)

#### off(event, callback)

> **off**(`event`, `callback`): `void`

**`Beta`**

##### Parameters

 **event**: `"cameraChange"` \| `"cameraStop"`

 **callback**: [`CameraEventDelegate`](../type-aliases/CameraEventDelegate.md)

##### Returns

`void`

##### Inherited from

[`CameraManager`](CameraManager.md) . [`off`](CameraManager.md#off)

##### Defined in

[packages/camera-manager/src/CameraManager.ts:89](https://github.com/cognitedata/reveal/blob/2acd9d17229d2bc8e309653b4d6a39ad941e44f1/viewer/packages/camera-manager/src/CameraManager.ts#L89)

***

### on()

#### on(event, callback)

> **on**(`event`, `callback`): `void`

**`Beta`**

Subscribes to events on this camera manager. There are several event types:
'cameraChange' - Subscribes to changes of the camera. This is used by Reveal to react on changes of the camera.
'cameraStop' - Subscribes to events indicating the camera has stopped

##### Parameters

 **event**: `"cameraChange"`

The event type.

 **callback**: [`CameraChangeDelegate`](../type-aliases/CameraChangeDelegate.md)

Callback to be called when the event is fired.

##### Returns

`void`

##### Inherited from

[`CameraManager`](CameraManager.md) . [`on`](CameraManager.md#on)

##### Defined in

[packages/camera-manager/src/CameraManager.ts:78](https://github.com/cognitedata/reveal/blob/2acd9d17229d2bc8e309653b4d6a39ad941e44f1/viewer/packages/camera-manager/src/CameraManager.ts#L78)

#### on(event, callback)

> **on**(`event`, `callback`): `void`

**`Beta`**

##### Parameters

 **event**: `"cameraStop"`

 **callback**: [`CameraStopDelegate`](../type-aliases/CameraStopDelegate.md)

##### Returns

`void`

##### Inherited from

[`CameraManager`](CameraManager.md) . [`on`](CameraManager.md#on)

##### Defined in

[packages/camera-manager/src/CameraManager.ts:79](https://github.com/cognitedata/reveal/blob/2acd9d17229d2bc8e309653b4d6a39ad941e44f1/viewer/packages/camera-manager/src/CameraManager.ts#L79)

#### on(event, callback)

> **on**(`event`, `callback`): `void`

**`Beta`**

##### Parameters

 **event**: `"cameraChange"` \| `"cameraStop"`

 **callback**: [`CameraEventDelegate`](../type-aliases/CameraEventDelegate.md)

##### Returns

`void`

##### Inherited from

[`CameraManager`](CameraManager.md) . [`on`](CameraManager.md#on)

##### Defined in

[packages/camera-manager/src/CameraManager.ts:80](https://github.com/cognitedata/reveal/blob/2acd9d17229d2bc8e309653b4d6a39ad941e44f1/viewer/packages/camera-manager/src/CameraManager.ts#L80)

***

### onClick()

> **onClick**(`event`): `Promise`\<`void`\>

**`Beta`**

Called when a click event is triggered

#### Parameters

 **event**: `PointerEvent`

#### Returns

`Promise`\<`void`\>

#### Defined in

[packages/camera-manager/src/Flexible/IFlexibleCameraManager.ts:64](https://github.com/cognitedata/reveal/blob/2acd9d17229d2bc8e309653b4d6a39ad941e44f1/viewer/packages/camera-manager/src/Flexible/IFlexibleCameraManager.ts#L64)

***

### onDoubleClick()

> **onDoubleClick**(`event`): `Promise`\<`void`\>

**`Beta`**

Called when double click event is triggered

#### Parameters

 **event**: `PointerEvent`

#### Returns

`Promise`\<`void`\>

#### Defined in

[packages/camera-manager/src/Flexible/IFlexibleCameraManager.ts:70](https://github.com/cognitedata/reveal/blob/2acd9d17229d2bc8e309653b4d6a39ad941e44f1/viewer/packages/camera-manager/src/Flexible/IFlexibleCameraManager.ts#L70)

***

### onFocusChanged()

> **onFocusChanged**(`haveFocus`): `void`

**`Beta`**

Called when focus is changed

#### Parameters

 **haveFocus**: `boolean`

#### Returns

`void`

#### Defined in

[packages/camera-manager/src/Flexible/IFlexibleCameraManager.ts:105](https://github.com/cognitedata/reveal/blob/2acd9d17229d2bc8e309653b4d6a39ad941e44f1/viewer/packages/camera-manager/src/Flexible/IFlexibleCameraManager.ts#L105)

***

### onKey()

> **onKey**(`event`, `down`): `void`

**`Beta`**

Called when a key is pressed or released

#### Parameters

 **event**: `KeyboardEvent`

 **down**: `boolean`

#### Returns

`void`

#### Defined in

[packages/camera-manager/src/Flexible/IFlexibleCameraManager.ts:99](https://github.com/cognitedata/reveal/blob/2acd9d17229d2bc8e309653b4d6a39ad941e44f1/viewer/packages/camera-manager/src/Flexible/IFlexibleCameraManager.ts#L99)

***

### onPointerDown()

> **onPointerDown**(`event`, `leftButton`): `Promise`\<`void`\>

**`Beta`**

Called when pointer is pressed

#### Parameters

 **event**: `PointerEvent`

 **leftButton**: `boolean`

#### Returns

`Promise`\<`void`\>

#### Defined in

[packages/camera-manager/src/Flexible/IFlexibleCameraManager.ts:76](https://github.com/cognitedata/reveal/blob/2acd9d17229d2bc8e309653b4d6a39ad941e44f1/viewer/packages/camera-manager/src/Flexible/IFlexibleCameraManager.ts#L76)

***

### onPointerDrag()

> **onPointerDrag**(`event`, `leftButton`): `Promise`\<`void`\>

**`Beta`**

Called when pointer is dragged

#### Parameters

 **event**: `PointerEvent`

 **leftButton**: `boolean`

#### Returns

`Promise`\<`void`\>

#### Defined in

[packages/camera-manager/src/Flexible/IFlexibleCameraManager.ts:82](https://github.com/cognitedata/reveal/blob/2acd9d17229d2bc8e309653b4d6a39ad941e44f1/viewer/packages/camera-manager/src/Flexible/IFlexibleCameraManager.ts#L82)

***

### onPointerUp()

> **onPointerUp**(`event`, `leftButton`): `Promise`\<`void`\>

**`Beta`**

Called when pointer is released

#### Parameters

 **event**: `PointerEvent`

 **leftButton**: `boolean`

#### Returns

`Promise`\<`void`\>

#### Defined in

[packages/camera-manager/src/Flexible/IFlexibleCameraManager.ts:88](https://github.com/cognitedata/reveal/blob/2acd9d17229d2bc8e309653b4d6a39ad941e44f1/viewer/packages/camera-manager/src/Flexible/IFlexibleCameraManager.ts#L88)

***

### onWheel()

> **onWheel**(`event`, `delta`): `Promise`\<`void`\>

**`Beta`**

Called when wheel event is triggered

#### Parameters

 **event**: `WheelEvent`

 **delta**: `number`

#### Returns

`Promise`\<`void`\>

#### Defined in

[packages/camera-manager/src/Flexible/IFlexibleCameraManager.ts:93](https://github.com/cognitedata/reveal/blob/2acd9d17229d2bc8e309653b4d6a39ad941e44f1/viewer/packages/camera-manager/src/Flexible/IFlexibleCameraManager.ts#L93)

***

### removeControlsTypeChangeListener()

> **removeControlsTypeChangeListener**(`callback`): `void`

**`Beta`**

Removes a listener for changes in the controls type of the camera manager.

#### Parameters

 **callback**: [`FlexibleControlsTypeChangeDelegate`](../type-aliases/FlexibleControlsTypeChangeDelegate.md)

The callback function to be removed from the controls type change listeners.

#### Returns

`void`

#### Defined in

[packages/camera-manager/src/Flexible/IFlexibleCameraManager.ts:58](https://github.com/cognitedata/reveal/blob/2acd9d17229d2bc8e309653b4d6a39ad941e44f1/viewer/packages/camera-manager/src/Flexible/IFlexibleCameraManager.ts#L58)

***

### rotateCameraTo()

> **rotateCameraTo**(`direction`, `animationDuration`): `void`

**`Beta`**

Rotates the camera to look in the specified direction.
Supports automatic update of camera near and far planes and animated change of camera position and target.

#### Parameters

 **direction**: `Vector3`

The direction to rotate the camera towards.

 **animationDuration**: `number`

The duration of the rotation animation in milliseconds.

#### Returns

`void`

#### Defined in

[packages/camera-manager/src/Flexible/IFlexibleCameraManager.ts:46](https://github.com/cognitedata/reveal/blob/2acd9d17229d2bc8e309653b4d6a39ad941e44f1/viewer/packages/camera-manager/src/Flexible/IFlexibleCameraManager.ts#L46)

***

### setCameraState()

> **setCameraState**(`state`): `void`

**`Beta`**

Set camera's state. Rotation and target can't be set at the same time as they could conflict,
should throw an error if both are passed with non-zero value inside state.

#### Parameters

 **state**: [`CameraState`](../type-aliases/CameraState.md)

Camera state, all fields are optional.

#### Returns

`void`

#### Inherited from

[`CameraManager`](CameraManager.md) . [`setCameraState`](CameraManager.md#setcamerastate)

#### Example

```js
// store position, target
const { position, target } = cameraManager.getCameraState();
// restore position, target
cameraManager.setCameraState({ position, target });
```

#### Defined in

[packages/camera-manager/src/CameraManager.ts:46](https://github.com/cognitedata/reveal/blob/2acd9d17229d2bc8e309653b4d6a39ad941e44f1/viewer/packages/camera-manager/src/CameraManager.ts#L46)

***

### update()

> **update**(`deltaTime`, `boundingBox`): `void`

**`Beta`**

Updates internal state of camera manager. Expected to update visual state of the camera
as well as it's near and far planes if needed. Called in `requestAnimationFrame`-loop.
Reveal performance affects frequency with which this method is called.

#### Parameters

 **deltaTime**: `number`

Delta time since last update in seconds.

 **boundingBox**: `Box3`

Global bounding box of the model(s) and any custom objects added to the scene.

#### Returns

`void`

#### Inherited from

[`CameraManager`](CameraManager.md) . [`update`](CameraManager.md#update)

#### Defined in

[packages/camera-manager/src/CameraManager.ts:105](https://github.com/cognitedata/reveal/blob/2acd9d17229d2bc8e309653b4d6a39ad941e44f1/viewer/packages/camera-manager/src/CameraManager.ts#L105)


<!-- SOURCE_END: reveal/documentation\versioned_docs\version-4.x\api\@cognite\reveal\interfaces\IFlexibleCameraManager.md -->

================================================================================


<!-- SOURCE_START: reveal/documentation\versioned_docs\version-4.x\api\@cognite\reveal\interfaces\Image360.md -->
## File: reveal/documentation\versioned_docs\version-4.x\api\@cognite\reveal\interfaces\Image360.md

# Interface: Image360

A single 360 image "station", which may consist of several revisions
captured in approximately the same location

## Properties

### id

> `readonly` **id**: `string`

Get Id of 360 image entity.

#### Defined in

[packages/360-images/src/entity/Image360.ts:42](https://github.com/cognitedata/reveal/blob/2acd9d17229d2bc8e309653b4d6a39ad941e44f1/viewer/packages/360-images/src/entity/Image360.ts#L42)

***

### image360Visualization

> `readonly` **image360Visualization**: [`Image360Visualization`](Image360Visualization.md)

The object containing the unit cube with the 360 images.

#### Defined in

[packages/360-images/src/entity/Image360.ts:36](https://github.com/cognitedata/reveal/blob/2acd9d17229d2bc8e309653b4d6a39ad941e44f1/viewer/packages/360-images/src/entity/Image360.ts#L36)

***

### label

> `readonly` **label**: `undefined` \| `string`

Get label of 360 image entity.

#### Defined in

[packages/360-images/src/entity/Image360.ts:48](https://github.com/cognitedata/reveal/blob/2acd9d17229d2bc8e309653b4d6a39ad941e44f1/viewer/packages/360-images/src/entity/Image360.ts#L48)

***

### transform

> `readonly` **transform**: `Matrix4`

Get a copy of the model-to-world transformation matrix
of the given 360 image.

#### Defined in

[packages/360-images/src/entity/Image360.ts:30](https://github.com/cognitedata/reveal/blob/2acd9d17229d2bc8e309653b4d6a39ad941e44f1/viewer/packages/360-images/src/entity/Image360.ts#L30)

## Methods

### getActiveRevision()

> **getActiveRevision**(): [`Image360Revision`](Image360Revision.md)

Get the revision that is currently loaded for this entry.

#### Returns

[`Image360Revision`](Image360Revision.md)

The active revision.

#### Defined in

[packages/360-images/src/entity/Image360.ts:60](https://github.com/cognitedata/reveal/blob/2acd9d17229d2bc8e309653b4d6a39ad941e44f1/viewer/packages/360-images/src/entity/Image360.ts#L60)

***

### getIconColor()

> **getIconColor**(): `Color` \| `"default"`

Get a copy of the color assigned to the icon of this entity

#### Returns

`Color` \| `"default"`

The currently assign color, or 'default' if none is assigned

#### Defined in

[packages/360-images/src/entity/Image360.ts:67](https://github.com/cognitedata/reveal/blob/2acd9d17229d2bc8e309653b4d6a39ad941e44f1/viewer/packages/360-images/src/entity/Image360.ts#L67)

***

### getRevisions()

> **getRevisions**(): [`Image360Revision`](Image360Revision.md)[]

List all historical images for this entity.

#### Returns

[`Image360Revision`](Image360Revision.md)[]

A list of available revisions.

#### Defined in

[packages/360-images/src/entity/Image360.ts:54](https://github.com/cognitedata/reveal/blob/2acd9d17229d2bc8e309653b4d6a39ad941e44f1/viewer/packages/360-images/src/entity/Image360.ts#L54)

***

### setIconColor()

> **setIconColor**(`color`): `void`

Assign a color to the icon of this entity

#### Parameters

 **color**: `Color` \| `"default"`

#### Returns

`void`

#### Defined in

[packages/360-images/src/entity/Image360.ts:72](https://github.com/cognitedata/reveal/blob/2acd9d17229d2bc8e309653b4d6a39ad941e44f1/viewer/packages/360-images/src/entity/Image360.ts#L72)


<!-- SOURCE_END: reveal/documentation\versioned_docs\version-4.x\api\@cognite\reveal\interfaces\Image360.md -->

================================================================================


<!-- SOURCE_START: reveal/documentation\versioned_docs\version-4.x\api\@cognite\reveal\interfaces\Image360Annotation.md -->
## File: reveal/documentation\versioned_docs\version-4.x\api\@cognite\reveal\interfaces\Image360Annotation.md

# Interface: Image360Annotation

An annotation associated with a 360 image revision

## Properties

### annotation

> `readonly` **annotation**: `AnnotationModel`

The underlying CDF annotation

#### Defined in

[packages/360-images/src/annotation/Image360Annotation.ts:15](https://github.com/cognitedata/reveal/blob/2acd9d17229d2bc8e309653b4d6a39ad941e44f1/viewer/packages/360-images/src/annotation/Image360Annotation.ts#L15)

## Methods

### getCenter()

> **getCenter**(`out`?): `Vector3`

Get center of annotation, to e.g. point the camera toward it

#### Parameters

 **out?**: `Vector3`

#### Returns

`Vector3`

#### Defined in

[packages/360-images/src/annotation/Image360Annotation.ts:40](https://github.com/cognitedata/reveal/blob/2acd9d17229d2bc8e309653b4d6a39ad941e44f1/viewer/packages/360-images/src/annotation/Image360Annotation.ts#L40)

***

### getColor()

> **getColor**(): `Color`

Get the individual display color of this annotation.

#### Returns

`Color`

#### Defined in

[packages/360-images/src/annotation/Image360Annotation.ts:20](https://github.com/cognitedata/reveal/blob/2acd9d17229d2bc8e309653b4d6a39ad941e44f1/viewer/packages/360-images/src/annotation/Image360Annotation.ts#L20)

***

### getVisible()

> **getVisible**(): `boolean`

Get whether this annotation is visible

#### Returns

`boolean`

#### Defined in

[packages/360-images/src/annotation/Image360Annotation.ts:30](https://github.com/cognitedata/reveal/blob/2acd9d17229d2bc8e309653b4d6a39ad941e44f1/viewer/packages/360-images/src/annotation/Image360Annotation.ts#L30)

***

### setColor()

> **setColor**(`color`?): `void`

Set the display color of this annotation. Default: Random, based on annotation label

#### Parameters

 **color?**: `Color`

#### Returns

`void`

#### Defined in

[packages/360-images/src/annotation/Image360Annotation.ts:25](https://github.com/cognitedata/reveal/blob/2acd9d17229d2bc8e309653b4d6a39ad941e44f1/viewer/packages/360-images/src/annotation/Image360Annotation.ts#L25)

***

### setVisible()

> **setVisible**(`visible`?): `void`

Set whether this annotation should be visible. Default: true

#### Parameters

 **visible?**: `boolean`

#### Returns

`void`

#### Defined in

[packages/360-images/src/annotation/Image360Annotation.ts:35](https://github.com/cognitedata/reveal/blob/2acd9d17229d2bc8e309653b4d6a39ad941e44f1/viewer/packages/360-images/src/annotation/Image360Annotation.ts#L35)


<!-- SOURCE_END: reveal/documentation\versioned_docs\version-4.x\api\@cognite\reveal\interfaces\Image360Annotation.md -->

================================================================================


<!-- SOURCE_START: reveal/documentation\versioned_docs\version-4.x\api\@cognite\reveal\interfaces\Image360Collection.md -->
## File: reveal/documentation\versioned_docs\version-4.x\api\@cognite\reveal\interfaces\Image360Collection.md

# Interface: Image360Collection

A wrapper that represents a set of 360 images.

## Properties

### id

> `readonly` **id**: `string`

The id of the collection.

#### Defined in

[packages/360-images/src/collection/Image360Collection.ts:69](https://github.com/cognitedata/reveal/blob/2acd9d17229d2bc8e309653b4d6a39ad941e44f1/viewer/packages/360-images/src/collection/Image360Collection.ts#L69)

***

### image360Entities

> `readonly` **image360Entities**: [`Image360`](Image360.md)[]

A list containing all the 360 images in this set.

#### Defined in

[packages/360-images/src/collection/Image360Collection.ts:80](https://github.com/cognitedata/reveal/blob/2acd9d17229d2bc8e309653b4d6a39ad941e44f1/viewer/packages/360-images/src/collection/Image360Collection.ts#L80)

***

### label

> `readonly` **label**: `undefined` \| `string`

The label of the collection.

#### Defined in

[packages/360-images/src/collection/Image360Collection.ts:75](https://github.com/cognitedata/reveal/blob/2acd9d17229d2bc8e309653b4d6a39ad941e44f1/viewer/packages/360-images/src/collection/Image360Collection.ts#L75)

***

### targetRevisionDate

> **targetRevisionDate**: `undefined` \| `Date`

If defined, any subsequently entered 360 images will load the revision that are closest to the target date.
If undefined, the most recent revision will be loaded.

#### Defined in

[packages/360-images/src/collection/Image360Collection.ts:86](https://github.com/cognitedata/reveal/blob/2acd9d17229d2bc8e309653b4d6a39ad941e44f1/viewer/packages/360-images/src/collection/Image360Collection.ts#L86)

## Methods

### findImageAnnotations()

> **findImageAnnotations**(`filter`): `Promise` \<[`Image360AnnotationAssetQueryResult`](../type-aliases/Image360AnnotationAssetQueryResult.md)[]\>

Find 360 images associated with an asset through CDF annotations

#### Parameters

 **filter**: [`Image360AnnotationAssetFilter`](../type-aliases/Image360AnnotationAssetFilter.md)

#### Returns

`Promise` \<[`Image360AnnotationAssetQueryResult`](../type-aliases/Image360AnnotationAssetQueryResult.md)[]\>

#### Defined in

[packages/360-images/src/collection/Image360Collection.ts:149](https://github.com/cognitedata/reveal/blob/2acd9d17229d2bc8e309653b4d6a39ad941e44f1/viewer/packages/360-images/src/collection/Image360Collection.ts#L149)

***

### getAnnotationsInfo()

> **getAnnotationsInfo**(`source`): `Promise` \<[`AssetAnnotationImage360Info`](../type-aliases/AssetAnnotationImage360Info.md)[]\>

Get IDs of all CDF assets and related image/revision associated with this
360 image collection through CDF annotations

#### Parameters

 **source**: `"assets"`

#### Returns

`Promise` \<[`AssetAnnotationImage360Info`](../type-aliases/AssetAnnotationImage360Info.md)[]\>

#### Defined in

[packages/360-images/src/collection/Image360Collection.ts:164](https://github.com/cognitedata/reveal/blob/2acd9d17229d2bc8e309653b4d6a39ad941e44f1/viewer/packages/360-images/src/collection/Image360Collection.ts#L164)

***

### ~~getAssetIds()~~

> **getAssetIds**(): `Promise`\<`IdEither`[]\>

Get IDs of all CDF assets associated with this 360 image collection through CDF annotations

#### Returns

`Promise`\<`IdEither`[]\>

#### Deprecated

Use [Image360Collection.getAnnotationsInfo](Image360Collection.md#getannotationsinfo)

#### Defined in

[packages/360-images/src/collection/Image360Collection.ts:156](https://github.com/cognitedata/reveal/blob/2acd9d17229d2bc8e309653b4d6a39ad941e44f1/viewer/packages/360-images/src/collection/Image360Collection.ts#L156)

***

### getDefaultAnnotationStyle()

> **getDefaultAnnotationStyle**(): [`Image360AnnotationAppearance`](../type-aliases/Image360AnnotationAppearance.md)

Get the assigned default style affecting all annotations

#### Returns

[`Image360AnnotationAppearance`](../type-aliases/Image360AnnotationAppearance.md)

#### Defined in

[packages/360-images/src/collection/Image360Collection.ts:139](https://github.com/cognitedata/reveal/blob/2acd9d17229d2bc8e309653b4d6a39ad941e44f1/viewer/packages/360-images/src/collection/Image360Collection.ts#L139)

***

### getIconsVisibility()

> **getIconsVisibility**(): `boolean`

Gets visibility of all 360 image icons.

#### Returns

`boolean`

true if all icons are visible, false if all icons are invisible

#### Defined in

[packages/360-images/src/collection/Image360Collection.ts:110](https://github.com/cognitedata/reveal/blob/2acd9d17229d2bc8e309653b4d6a39ad941e44f1/viewer/packages/360-images/src/collection/Image360Collection.ts#L110)

***

### getModelTransformation()

> **getModelTransformation**(`out`?): `Matrix4`

Gets the transformation matrix of the collection

#### Parameters

 **out?**: `Matrix4`

#### Returns

`Matrix4`

#### Defined in

[packages/360-images/src/collection/Image360Collection.ts:97](https://github.com/cognitedata/reveal/blob/2acd9d17229d2bc8e309653b4d6a39ad941e44f1/viewer/packages/360-images/src/collection/Image360Collection.ts#L97)

***

### off()

#### off(event, callback)

> **off**(`event`, `callback`): `void`

Unsubscribes from 360 image dataset event.

##### Parameters

 **event**: `"image360Entered"`

The event type.

 **callback**: [`Image360EnteredDelegate`](../type-aliases/Image360EnteredDelegate.md)

Callback function to be unsubscribed.

##### Returns

`void`

##### Defined in

[packages/360-images/src/collection/Image360Collection.ts:133](https://github.com/cognitedata/reveal/blob/2acd9d17229d2bc8e309653b4d6a39ad941e44f1/viewer/packages/360-images/src/collection/Image360Collection.ts#L133)

#### off(event, callback)

> **off**(`event`, `callback`): `void`

##### Parameters

 **event**: `"image360Exited"`

 **callback**: [`Image360ExitedDelegate`](../type-aliases/Image360ExitedDelegate.md)

##### Returns

`void`

##### Defined in

[packages/360-images/src/collection/Image360Collection.ts:134](https://github.com/cognitedata/reveal/blob/2acd9d17229d2bc8e309653b4d6a39ad941e44f1/viewer/packages/360-images/src/collection/Image360Collection.ts#L134)

***

### on()

#### on(event, callback)

> **on**(`event`, `callback`): `void`

Subscribes to events on 360 Image datasets. There are several event types:
'image360Entered' - Subscribes to a event for entering 360 image mode.
'image360Exited' - Subscribes to events indicating 360 image mode has exited.

##### Parameters

 **event**: `"image360Entered"`

The event type.

 **callback**: [`Image360EnteredDelegate`](../type-aliases/Image360EnteredDelegate.md)

Callback to be called when the event is fired.

##### Returns

`void`

##### Defined in

[packages/360-images/src/collection/Image360Collection.ts:125](https://github.com/cognitedata/reveal/blob/2acd9d17229d2bc8e309653b4d6a39ad941e44f1/viewer/packages/360-images/src/collection/Image360Collection.ts#L125)

#### on(event, callback)

> **on**(`event`, `callback`): `void`

##### Parameters

 **event**: `"image360Exited"`

 **callback**: [`Image360ExitedDelegate`](../type-aliases/Image360ExitedDelegate.md)

##### Returns

`void`

##### Defined in

[packages/360-images/src/collection/Image360Collection.ts:126](https://github.com/cognitedata/reveal/blob/2acd9d17229d2bc8e309653b4d6a39ad941e44f1/viewer/packages/360-images/src/collection/Image360Collection.ts#L126)

***

### set360IconCullingRestrictions()

> **set360IconCullingRestrictions**(`radius`, `pointLimit`): `void`

Specify parameters used to determine the number of icons that are visible when entering 360 Images.

#### Parameters

 **radius**: `number`

Only icons within the given radius will be made visible.

 **pointLimit**: `number`

Limit the number of points within the given radius. Points closer to the camera will be prioritized.

#### Returns

`void`

#### Defined in

[packages/360-images/src/collection/Image360Collection.ts:104](https://github.com/cognitedata/reveal/blob/2acd9d17229d2bc8e309653b4d6a39ad941e44f1/viewer/packages/360-images/src/collection/Image360Collection.ts#L104)

***

### setDefaultAnnotationStyle()

> **setDefaultAnnotationStyle**(`appearance`): `void`

Assign a default style which affects all annotations

#### Parameters

 **appearance**: [`Image360AnnotationAppearance`](../type-aliases/Image360AnnotationAppearance.md)

#### Returns

`void`

#### Defined in

[packages/360-images/src/collection/Image360Collection.ts:144](https://github.com/cognitedata/reveal/blob/2acd9d17229d2bc8e309653b4d6a39ad941e44f1/viewer/packages/360-images/src/collection/Image360Collection.ts#L144)

***

### setIconsVisibility()

> **setIconsVisibility**(`visible`): `void`

Set visibility of all 360 image icons.

#### Parameters

 **visible**: `boolean`

If true all icons are made visible according to the active culling scheme. If false all icons are hidden.

#### Returns

`void`

#### Defined in

[packages/360-images/src/collection/Image360Collection.ts:116](https://github.com/cognitedata/reveal/blob/2acd9d17229d2bc8e309653b4d6a39ad941e44f1/viewer/packages/360-images/src/collection/Image360Collection.ts#L116)

***

### setModelTransformation()

> **setModelTransformation**(`matrix`): `void`

Sets the transformation matrix to be applied to the collection.

#### Parameters

 **matrix**: `Matrix4`

The transformation matrix to be applied to the collection.

#### Returns

`void`

#### Defined in

[packages/360-images/src/collection/Image360Collection.ts:92](https://github.com/cognitedata/reveal/blob/2acd9d17229d2bc8e309653b4d6a39ad941e44f1/viewer/packages/360-images/src/collection/Image360Collection.ts#L92)


<!-- SOURCE_END: reveal/documentation\versioned_docs\version-4.x\api\@cognite\reveal\interfaces\Image360Collection.md -->

================================================================================


<!-- SOURCE_START: reveal/documentation\versioned_docs\version-4.x\api\@cognite\reveal\interfaces\Image360Revision.md -->
## File: reveal/documentation\versioned_docs\version-4.x\api\@cognite\reveal\interfaces\Image360Revision.md

# Interface: Image360Revision

Interface used to manage historical revisions of [Image360](Image360.md).
One instance represents one specific image revision.

## Properties

### date

> `readonly` **date**: `undefined` \| `Date`

The date of this revision. Undefined if the revision is undated.

#### Defined in

[packages/360-images/src/entity/Image360Revision.ts:17](https://github.com/cognitedata/reveal/blob/2acd9d17229d2bc8e309653b4d6a39ad941e44f1/viewer/packages/360-images/src/entity/Image360Revision.ts#L17)

## Methods

### getAnnotations()

> **getAnnotations**(): `Promise` \<[`Image360Annotation`](Image360Annotation.md)[]\>

The annotations associated with this revision.

#### Returns

`Promise` \<[`Image360Annotation`](Image360Annotation.md)[]\>

#### Defined in

[packages/360-images/src/entity/Image360Revision.ts:22](https://github.com/cognitedata/reveal/blob/2acd9d17229d2bc8e309653b4d6a39ad941e44f1/viewer/packages/360-images/src/entity/Image360Revision.ts#L22)

***

### getPreviewThumbnailUrl()

> **getPreviewThumbnailUrl**(): `Promise`\<`undefined` \| `string`\>

Get the thumbnail url for this revision.

#### Returns

`Promise`\<`undefined` \| `string`\>

#### Defined in

[packages/360-images/src/entity/Image360Revision.ts:27](https://github.com/cognitedata/reveal/blob/2acd9d17229d2bc8e309653b4d6a39ad941e44f1/viewer/packages/360-images/src/entity/Image360Revision.ts#L27)


<!-- SOURCE_END: reveal/documentation\versioned_docs\version-4.x\api\@cognite\reveal\interfaces\Image360Revision.md -->

================================================================================


<!-- SOURCE_START: reveal/documentation\versioned_docs\version-4.x\api\@cognite\reveal\interfaces\Image360Visualization.md -->
## File: reveal/documentation\versioned_docs\version-4.x\api\@cognite\reveal\interfaces\Image360Visualization.md

# Interface: Image360Visualization

Interface to control visualization of a 360 image

## Properties

### opacity

> **opacity**: `number`

Opaqueness of the 360 image

#### Defined in

[packages/360-images/src/entity/Image360Visualization.ts:12](https://github.com/cognitedata/reveal/blob/2acd9d17229d2bc8e309653b4d6a39ad941e44f1/viewer/packages/360-images/src/entity/Image360Visualization.ts#L12)


<!-- SOURCE_END: reveal/documentation\versioned_docs\version-4.x\api\@cognite\reveal\interfaces\Image360Visualization.md -->

================================================================================


<!-- SOURCE_START: reveal/documentation\versioned_docs\version-4.x\api\@cognite\reveal\interfaces\Overlay3D.md -->
## File: reveal/documentation\versioned_docs\version-4.x\api\@cognite\reveal\interfaces\Overlay3D.md

# Interface: Overlay3D\<ContentType\>

Represents one 3d overlay

## Type Parameters

 **ContentType**

## Methods

### getColor()

> **getColor**(): `Color`

Get the display color of this overlay.

#### Returns

`Color`

#### Defined in

[packages/3d-overlays/src/Overlay3D.ts:30](https://github.com/cognitedata/reveal/blob/2acd9d17229d2bc8e309653b4d6a39ad941e44f1/viewer/packages/3d-overlays/src/Overlay3D.ts#L30)

***

### getContent()

> **getContent**(): `ContentType`

Get the metadata associated with this overlay.

#### Returns

`ContentType`

#### Defined in

[packages/3d-overlays/src/Overlay3D.ts:34](https://github.com/cognitedata/reveal/blob/2acd9d17229d2bc8e309653b4d6a39ad941e44f1/viewer/packages/3d-overlays/src/Overlay3D.ts#L34)

***

### getPosition()

> **getPosition**(): `Vector3`

Get the position of this overlay.

#### Returns

`Vector3`

#### Defined in

[packages/3d-overlays/src/Overlay3D.ts:22](https://github.com/cognitedata/reveal/blob/2acd9d17229d2bc8e309653b4d6a39ad941e44f1/viewer/packages/3d-overlays/src/Overlay3D.ts#L22)

***

### getVisible()

> **getVisible**(): `boolean`

Get whether this overlay is visible.

#### Returns

`boolean`

#### Defined in

[packages/3d-overlays/src/Overlay3D.ts:18](https://github.com/cognitedata/reveal/blob/2acd9d17229d2bc8e309653b4d6a39ad941e44f1/viewer/packages/3d-overlays/src/Overlay3D.ts#L18)

***

### setColor()

> **setColor**(`color`): `void`

Set the display color of this overlay.

#### Parameters

 **color**: `Color`

#### Returns

`void`

#### Defined in

[packages/3d-overlays/src/Overlay3D.ts:26](https://github.com/cognitedata/reveal/blob/2acd9d17229d2bc8e309653b4d6a39ad941e44f1/viewer/packages/3d-overlays/src/Overlay3D.ts#L26)

***

### setVisible()

> **setVisible**(`visible`): `void`

Set whether this overlay should be visible.

#### Parameters

 **visible**: `boolean`

#### Returns

`void`

#### Defined in

[packages/3d-overlays/src/Overlay3D.ts:14](https://github.com/cognitedata/reveal/blob/2acd9d17229d2bc8e309653b4d6a39ad941e44f1/viewer/packages/3d-overlays/src/Overlay3D.ts#L14)


<!-- SOURCE_END: reveal/documentation\versioned_docs\version-4.x\api\@cognite\reveal\interfaces\Overlay3D.md -->

================================================================================


<!-- SOURCE_START: reveal/documentation\versioned_docs\version-4.x\api\@cognite\reveal\interfaces\OverlayCollection.md -->
## File: reveal/documentation\versioned_docs\version-4.x\api\@cognite\reveal\interfaces\OverlayCollection.md

# Interface: OverlayCollection\<ContentType\>

A set of overlays managed.

## Type Parameters

 **ContentType**

## Methods

### addOverlays()

> **addOverlays**(`overlays`): [`Overlay3D`](Overlay3D.md)\<`ContentType`\>[]

Add overlays to the collection.

#### Parameters

 **overlays**: [`OverlayInfo`](../type-aliases/OverlayInfo.md)\<`ContentType`\>[]

Overlays to add to the collection.

#### Returns

[`Overlay3D`](Overlay3D.md)\<`ContentType`\>[]

The added overlays.

#### Defined in

[packages/3d-overlays/src/OverlayCollection.ts:47](https://github.com/cognitedata/reveal/blob/2acd9d17229d2bc8e309653b4d6a39ad941e44f1/viewer/packages/3d-overlays/src/OverlayCollection.ts#L47)

***

### getOverlays()

> **getOverlays**(): [`Overlay3D`](Overlay3D.md)\<`ContentType`\>[]

Get all overlays in the collection.

#### Returns

[`Overlay3D`](Overlay3D.md)\<`ContentType`\>[]

#### Defined in

[packages/3d-overlays/src/OverlayCollection.ts:40](https://github.com/cognitedata/reveal/blob/2acd9d17229d2bc8e309653b4d6a39ad941e44f1/viewer/packages/3d-overlays/src/OverlayCollection.ts#L40)

***

### removeAllOverlays()

> **removeAllOverlays**(): `void`

Remove all overlays from the collection.

#### Returns

`void`

#### Defined in

[packages/3d-overlays/src/OverlayCollection.ts:58](https://github.com/cognitedata/reveal/blob/2acd9d17229d2bc8e309653b4d6a39ad941e44f1/viewer/packages/3d-overlays/src/OverlayCollection.ts#L58)

***

### removeOverlays()

> **removeOverlays**(`overlays`): `void`

Remove overlays from the collection.

#### Parameters

 **overlays**: [`Overlay3D`](Overlay3D.md)\<`ContentType`\>[]

Overlays to remove from the collection.

#### Returns

`void`

#### Defined in

[packages/3d-overlays/src/OverlayCollection.ts:53](https://github.com/cognitedata/reveal/blob/2acd9d17229d2bc8e309653b4d6a39ad941e44f1/viewer/packages/3d-overlays/src/OverlayCollection.ts#L53)

***

### setVisibility()

> **setVisibility**(`visibility`): `void`

Sets whether overlays in the collection should be visible.

#### Parameters

 **visibility**: `boolean`

#### Returns

`void`

#### Defined in

[packages/3d-overlays/src/OverlayCollection.ts:63](https://github.com/cognitedata/reveal/blob/2acd9d17229d2bc8e309653b4d6a39ad941e44f1/viewer/packages/3d-overlays/src/OverlayCollection.ts#L63)


<!-- SOURCE_END: reveal/documentation\versioned_docs\version-4.x\api\@cognite\reveal\interfaces\OverlayCollection.md -->

================================================================================


<!-- SOURCE_START: reveal/documentation\versioned_docs\version-4.x\api\@cognite\reveal\tools\classes\AxisGizmoOptions.md -->
## File: reveal/documentation\versioned_docs\version-4.x\api\@cognite\reveal\tools\classes\AxisGizmoOptions.md

# Class: AxisGizmoOptions

**`Beta`**

Options for styling the AxisGizmoTool

## Constructors

### new AxisGizmoOptions()

> **new AxisGizmoOptions**(): [`AxisGizmoOptions`](AxisGizmoOptions.md)

**`Beta`**

#### Returns

[`AxisGizmoOptions`](AxisGizmoOptions.md)

## Properties

### animationDuration

> **animationDuration**: `number` = `1000`

**`Beta`**

#### Defined in

[packages/tools/src/AxisGizmo/AxisGizmoOptions.ts:33](https://github.com/cognitedata/reveal/blob/2acd9d17229d2bc8e309653b4d6a39ad941e44f1/viewer/packages/tools/src/AxisGizmo/AxisGizmoOptions.ts#L33)

***

### bobbleLineWidth

> **bobbleLineWidth**: `number` = `2`

**`Beta`**

#### Defined in

[packages/tools/src/AxisGizmo/AxisGizmoOptions.ts:20](https://github.com/cognitedata/reveal/blob/2acd9d17229d2bc8e309653b4d6a39ad941e44f1/viewer/packages/tools/src/AxisGizmo/AxisGizmoOptions.ts#L20)

***

### bubbleRadius

> **bubbleRadius**: `number` = `10`

**`Beta`**

#### Defined in

[packages/tools/src/AxisGizmo/AxisGizmoOptions.ts:16](https://github.com/cognitedata/reveal/blob/2acd9d17229d2bc8e309653b4d6a39ad941e44f1/viewer/packages/tools/src/AxisGizmo/AxisGizmoOptions.ts#L16)

***

### corner

> **corner**: [`Corner`](../enumerations/Corner.md) = `Corner.BottomRight`

**`Beta`**

#### Defined in

[packages/tools/src/AxisGizmo/AxisGizmoOptions.ts:13](https://github.com/cognitedata/reveal/blob/2acd9d17229d2bc8e309653b4d6a39ad941e44f1/viewer/packages/tools/src/AxisGizmo/AxisGizmoOptions.ts#L13)

***

### darkColors

> **darkColors**: `number`[]

**`Beta`**

#### Defined in

[packages/tools/src/AxisGizmo/AxisGizmoOptions.ts:32](https://github.com/cognitedata/reveal/blob/2acd9d17229d2bc8e309653b4d6a39ad941e44f1/viewer/packages/tools/src/AxisGizmo/AxisGizmoOptions.ts#L32)

***

### focusCircleAlpha

> **focusCircleAlpha**: `number` = `0.45`

**`Beta`**

#### Defined in

[packages/tools/src/AxisGizmo/AxisGizmoOptions.ts:29](https://github.com/cognitedata/reveal/blob/2acd9d17229d2bc8e309653b4d6a39ad941e44f1/viewer/packages/tools/src/AxisGizmo/AxisGizmoOptions.ts#L29)

***

### focusCircleColor

> **focusCircleColor**: `string` = `'#888888'`

**`Beta`**

#### Defined in

[packages/tools/src/AxisGizmo/AxisGizmoOptions.ts:28](https://github.com/cognitedata/reveal/blob/2acd9d17229d2bc8e309653b4d6a39ad941e44f1/viewer/packages/tools/src/AxisGizmo/AxisGizmoOptions.ts#L28)

***

### fontFamily

> **fontFamily**: `string` = `'arial'`

**`Beta`**

#### Defined in

[packages/tools/src/AxisGizmo/AxisGizmoOptions.ts:24](https://github.com/cognitedata/reveal/blob/2acd9d17229d2bc8e309653b4d6a39ad941e44f1/viewer/packages/tools/src/AxisGizmo/AxisGizmoOptions.ts#L24)

***

### fontSize

> **fontSize**: `string` = `'12px'`

**`Beta`**

#### Defined in

[packages/tools/src/AxisGizmo/AxisGizmoOptions.ts:23](https://github.com/cognitedata/reveal/blob/2acd9d17229d2bc8e309653b4d6a39ad941e44f1/viewer/packages/tools/src/AxisGizmo/AxisGizmoOptions.ts#L23)

***

### fontWeight

> **fontWeight**: `string` = `'bold'`

**`Beta`**

#### Defined in

[packages/tools/src/AxisGizmo/AxisGizmoOptions.ts:25](https://github.com/cognitedata/reveal/blob/2acd9d17229d2bc8e309653b4d6a39ad941e44f1/viewer/packages/tools/src/AxisGizmo/AxisGizmoOptions.ts#L25)

***

### fontYAdjust

> **fontYAdjust**: `number` = `1`

**`Beta`**

#### Defined in

[packages/tools/src/AxisGizmo/AxisGizmoOptions.ts:30](https://github.com/cognitedata/reveal/blob/2acd9d17229d2bc8e309653b4d6a39ad941e44f1/viewer/packages/tools/src/AxisGizmo/AxisGizmoOptions.ts#L30)

***

### insideMargin

> **insideMargin**: `number` = `8`

**`Beta`**

#### Defined in

[packages/tools/src/AxisGizmo/AxisGizmoOptions.ts:17](https://github.com/cognitedata/reveal/blob/2acd9d17229d2bc8e309653b4d6a39ad941e44f1/viewer/packages/tools/src/AxisGizmo/AxisGizmoOptions.ts#L17)

***

### lightColors

> **lightColors**: `number`[]

**`Beta`**

#### Defined in

[packages/tools/src/AxisGizmo/AxisGizmoOptions.ts:31](https://github.com/cognitedata/reveal/blob/2acd9d17229d2bc8e309653b4d6a39ad941e44f1/viewer/packages/tools/src/AxisGizmo/AxisGizmoOptions.ts#L31)

***

### normalTextColor

> **normalTextColor**: `string` = `'#151515'`

**`Beta`**

#### Defined in

[packages/tools/src/AxisGizmo/AxisGizmoOptions.ts:26](https://github.com/cognitedata/reveal/blob/2acd9d17229d2bc8e309653b4d6a39ad941e44f1/viewer/packages/tools/src/AxisGizmo/AxisGizmoOptions.ts#L26)

***

### primaryLineWidth

> **primaryLineWidth**: `number` = `3`

**`Beta`**

#### Defined in

[packages/tools/src/AxisGizmo/AxisGizmoOptions.ts:18](https://github.com/cognitedata/reveal/blob/2acd9d17229d2bc8e309653b4d6a39ad941e44f1/viewer/packages/tools/src/AxisGizmo/AxisGizmoOptions.ts#L18)

***

### secondaryLineWidth

> **secondaryLineWidth**: `number` = `0`

**`Beta`**

#### Defined in

[packages/tools/src/AxisGizmo/AxisGizmoOptions.ts:19](https://github.com/cognitedata/reveal/blob/2acd9d17229d2bc8e309653b4d6a39ad941e44f1/viewer/packages/tools/src/AxisGizmo/AxisGizmoOptions.ts#L19)

***

### selectedTextColor

> **selectedTextColor**: `string` = `'#FFFFFF'`

**`Beta`**

#### Defined in

[packages/tools/src/AxisGizmo/AxisGizmoOptions.ts:27](https://github.com/cognitedata/reveal/blob/2acd9d17229d2bc8e309653b4d6a39ad941e44f1/viewer/packages/tools/src/AxisGizmo/AxisGizmoOptions.ts#L27)

***

### size

> **size**: `number` = `125`

**`Beta`**

#### Defined in

[packages/tools/src/AxisGizmo/AxisGizmoOptions.ts:12](https://github.com/cognitedata/reveal/blob/2acd9d17229d2bc8e309653b4d6a39ad941e44f1/viewer/packages/tools/src/AxisGizmo/AxisGizmoOptions.ts#L12)

***

### useGeoLabels

> **useGeoLabels**: `boolean` = `true`

**`Beta`**

#### Defined in

[packages/tools/src/AxisGizmo/AxisGizmoOptions.ts:21](https://github.com/cognitedata/reveal/blob/2acd9d17229d2bc8e309653b4d6a39ad941e44f1/viewer/packages/tools/src/AxisGizmo/AxisGizmoOptions.ts#L21)

***

### xMargin

> **xMargin**: `number` = `10`

**`Beta`**

#### Defined in

[packages/tools/src/AxisGizmo/AxisGizmoOptions.ts:14](https://github.com/cognitedata/reveal/blob/2acd9d17229d2bc8e309653b4d6a39ad941e44f1/viewer/packages/tools/src/AxisGizmo/AxisGizmoOptions.ts#L14)

***

### yMargin

> **yMargin**: `number` = `10`

**`Beta`**

#### Defined in

[packages/tools/src/AxisGizmo/AxisGizmoOptions.ts:15](https://github.com/cognitedata/reveal/blob/2acd9d17229d2bc8e309653b4d6a39ad941e44f1/viewer/packages/tools/src/AxisGizmo/AxisGizmoOptions.ts#L15)

***

### yUp

> **yUp**: `boolean` = `false`

**`Beta`**

#### Defined in

[packages/tools/src/AxisGizmo/AxisGizmoOptions.ts:22](https://github.com/cognitedata/reveal/blob/2acd9d17229d2bc8e309653b4d6a39ad941e44f1/viewer/packages/tools/src/AxisGizmo/AxisGizmoOptions.ts#L22)

## Accessors

### radius

> `get` **radius**(): `number`

**`Beta`**

#### Returns

`number`

#### Defined in

[packages/tools/src/AxisGizmo/AxisGizmoOptions.ts:37](https://github.com/cognitedata/reveal/blob/2acd9d17229d2bc8e309653b4d6a39ad941e44f1/viewer/packages/tools/src/AxisGizmo/AxisGizmoOptions.ts#L37)

## Methods

### getFont()

> **getFont**(): `string`

**`Beta`**

Get the font style.

#### Returns

`string`

The font style.

#### Defined in

[packages/tools/src/AxisGizmo/AxisGizmoOptions.ts:44](https://github.com/cognitedata/reveal/blob/2acd9d17229d2bc8e309653b4d6a39ad941e44f1/viewer/packages/tools/src/AxisGizmo/AxisGizmoOptions.ts#L44)


<!-- SOURCE_END: reveal/documentation\versioned_docs\version-4.x\api\@cognite\reveal\tools\classes\AxisGizmoOptions.md -->

================================================================================


<!-- SOURCE_START: reveal/documentation\versioned_docs\version-4.x\api\@cognite\reveal\tools\classes\AxisGizmoTool.md -->
## File: reveal/documentation\versioned_docs\version-4.x\api\@cognite\reveal\tools\classes\AxisGizmoTool.md

# Class: AxisGizmoTool

**`Beta`**

Class for axis gizmo like the one in Blender

## Extends

- [`Cognite3DViewerToolBase`](Cognite3DViewerToolBase.md)

## Constructors

### new AxisGizmoTool()

> **new AxisGizmoTool**(`option`?): [`AxisGizmoTool`](AxisGizmoTool.md)

**`Beta`**

#### Parameters

 **option?**: [`AxisGizmoOptions`](AxisGizmoOptions.md)

#### Returns

[`AxisGizmoTool`](AxisGizmoTool.md)

#### Overrides

[`Cognite3DViewerToolBase`](Cognite3DViewerToolBase.md) . [`constructor`](Cognite3DViewerToolBase.md#constructors)

#### Defined in

[packages/tools/src/AxisGizmo/AxisGizmoTool.ts:48](https://github.com/cognitedata/reveal/blob/2acd9d17229d2bc8e309653b4d6a39ad941e44f1/viewer/packages/tools/src/AxisGizmo/AxisGizmoTool.ts#L48)

## Accessors

### options

> `get` **options**(): [`AxisGizmoOptions`](AxisGizmoOptions.md)

**`Beta`**

#### Returns

[`AxisGizmoOptions`](AxisGizmoOptions.md)

#### Defined in

[packages/tools/src/AxisGizmo/AxisGizmoTool.ts:100](https://github.com/cognitedata/reveal/blob/2acd9d17229d2bc8e309653b4d6a39ad941e44f1/viewer/packages/tools/src/AxisGizmo/AxisGizmoTool.ts#L100)

## Methods

### connect()

> **connect**(`viewer`): `void`

**`Beta`**

Connects the AxisGizmoTool to a Cognite3DViewer instance.

#### Parameters

 **viewer**: [`Cognite3DViewer`](../../classes/Cognite3DViewer.md)

The Cognite3DViewer instance to connect to.
Note: After it is connected to the viewer the tool can not be moved or
changed size by changing the fields: size, corner, yMargin and yMargin
in the AxisGizmoOptions

#### Returns

`void`

#### Defined in

[packages/tools/src/AxisGizmo/AxisGizmoTool.ts:84](https://github.com/cognitedata/reveal/blob/2acd9d17229d2bc8e309653b4d6a39ad941e44f1/viewer/packages/tools/src/AxisGizmo/AxisGizmoTool.ts#L84)

***

### dispose()

> **dispose**(): `void`

**`Beta`**

#### Returns

`void`

#### Overrides

[`Cognite3DViewerToolBase`](Cognite3DViewerToolBase.md) . [`dispose`](Cognite3DViewerToolBase.md#dispose)

#### Defined in

[packages/tools/src/AxisGizmo/AxisGizmoTool.ts:60](https://github.com/cognitedata/reveal/blob/2acd9d17229d2bc8e309653b4d6a39ad941e44f1/viewer/packages/tools/src/AxisGizmo/AxisGizmoTool.ts#L60)

***

### off()

> **off**(`event`, `handler`): `void`

**`Beta`**

Unregisters an event handler for the 'disposed'-event.

#### Parameters

 **event**: `"disposed"`

 **handler**

#### Returns

`void`

#### Inherited from

[`Cognite3DViewerToolBase`](Cognite3DViewerToolBase.md) . [`off`](Cognite3DViewerToolBase.md#off)

#### Defined in

[packages/tools/src/Cognite3DViewerToolBase.ts:38](https://github.com/cognitedata/reveal/blob/2acd9d17229d2bc8e309653b4d6a39ad941e44f1/viewer/packages/tools/src/Cognite3DViewerToolBase.ts#L38)


<!-- SOURCE_END: reveal/documentation\versioned_docs\version-4.x\api\@cognite\reveal\tools\classes\AxisGizmoTool.md -->

================================================================================


<!-- SOURCE_START: reveal/documentation\versioned_docs\version-4.x\api\@cognite\reveal\tools\classes\AxisViewTool.md -->
## File: reveal/documentation\versioned_docs\version-4.x\api\@cognite\reveal\tools\classes\AxisViewTool.md

# Class: AxisViewTool

Base class for tools attaching to a [Cognite3DViewer](../../classes/Cognite3DViewer.md).

## Extends

- [`Cognite3DViewerToolBase`](Cognite3DViewerToolBase.md)

## Constructors

### new AxisViewTool()

> **new AxisViewTool**(`viewer`, `config`?): [`AxisViewTool`](AxisViewTool.md)

#### Parameters

 **viewer**: [`Cognite3DViewer`](../../classes/Cognite3DViewer.md)

 **config?**: [`AxisBoxConfig`](../type-aliases/AxisBoxConfig.md)

#### Returns

[`AxisViewTool`](AxisViewTool.md)

#### Overrides

[`Cognite3DViewerToolBase`](Cognite3DViewerToolBase.md) . [`constructor`](Cognite3DViewerToolBase.md#constructors)

#### Defined in

[packages/tools/src/AxisView/AxisViewTool.ts:39](https://github.com/cognitedata/reveal/blob/2acd9d17229d2bc8e309653b4d6a39ad941e44f1/viewer/packages/tools/src/AxisView/AxisViewTool.ts#L39)

## Methods

### dispose()

> **dispose**(): `void`

Disposes the element and triggeres the 'disposed' event before clearing the list
of dipose-listeners.

#### Returns

`void`

#### Overrides

[`Cognite3DViewerToolBase`](Cognite3DViewerToolBase.md) . [`dispose`](Cognite3DViewerToolBase.md#dispose)

#### Defined in

[packages/tools/src/AxisView/AxisViewTool.ts:63](https://github.com/cognitedata/reveal/blob/2acd9d17229d2bc8e309653b4d6a39ad941e44f1/viewer/packages/tools/src/AxisView/AxisViewTool.ts#L63)

***

### off()

> **off**(`event`, `handler`): `void`

Unregisters an event handler for the 'disposed'-event.

#### Parameters

 **event**: `"disposed"`

 **handler**

#### Returns

`void`

#### Inherited from

[`Cognite3DViewerToolBase`](Cognite3DViewerToolBase.md) . [`off`](Cognite3DViewerToolBase.md#off)

#### Defined in

[packages/tools/src/Cognite3DViewerToolBase.ts:38](https://github.com/cognitedata/reveal/blob/2acd9d17229d2bc8e309653b4d6a39ad941e44f1/viewer/packages/tools/src/Cognite3DViewerToolBase.ts#L38)


<!-- SOURCE_END: reveal/documentation\versioned_docs\version-4.x\api\@cognite\reveal\tools\classes\AxisViewTool.md -->

================================================================================


<!-- SOURCE_START: reveal/documentation\versioned_docs\version-4.x\api\@cognite\reveal\tools\classes\Cognite3DViewerToolBase.md -->
## File: reveal/documentation\versioned_docs\version-4.x\api\@cognite\reveal\tools\classes\Cognite3DViewerToolBase.md

# Class: `abstract` Cognite3DViewerToolBase

Base class for tools attaching to a [Cognite3DViewer](../../classes/Cognite3DViewer.md).

## Extended by

- [`HtmlOverlayTool`](HtmlOverlayTool.md)
- [`DebugCameraTool`](DebugCameraTool.md)
- [`AxisViewTool`](AxisViewTool.md)
- [`AxisGizmoTool`](AxisGizmoTool.md)
- [`Overlay3DTool`](Overlay3DTool.md)
- [`TimelineTool`](TimelineTool.md)
- [`MeasurementTool`](MeasurementTool.md)

## Constructors

### new Cognite3DViewerToolBase()

> **new Cognite3DViewerToolBase**(): [`Cognite3DViewerToolBase`](Cognite3DViewerToolBase.md)

#### Returns

[`Cognite3DViewerToolBase`](Cognite3DViewerToolBase.md)

## Methods

### dispose()

> **dispose**(): `void`

Disposes the element and triggeres the 'disposed' event before clearing the list
of dipose-listeners.

#### Returns

`void`

#### Defined in

[packages/tools/src/Cognite3DViewerToolBase.ts:53](https://github.com/cognitedata/reveal/blob/2acd9d17229d2bc8e309653b4d6a39ad941e44f1/viewer/packages/tools/src/Cognite3DViewerToolBase.ts#L53)

***

### off()

> **off**(`event`, `handler`): `void`

Unregisters an event handler for the 'disposed'-event.

#### Parameters

 **event**: `"disposed"`

 **handler**

#### Returns

`void`

#### Defined in

[packages/tools/src/Cognite3DViewerToolBase.ts:38](https://github.com/cognitedata/reveal/blob/2acd9d17229d2bc8e309653b4d6a39ad941e44f1/viewer/packages/tools/src/Cognite3DViewerToolBase.ts#L38)


<!-- SOURCE_END: reveal/documentation\versioned_docs\version-4.x\api\@cognite\reveal\tools\classes\Cognite3DViewerToolBase.md -->

================================================================================


<!-- SOURCE_START: reveal/documentation\versioned_docs\version-4.x\api\@cognite\reveal\tools\classes\DebugCameraTool.md -->
## File: reveal/documentation\versioned_docs\version-4.x\api\@cognite\reveal\tools\classes\DebugCameraTool.md

# Class: DebugCameraTool

Base class for tools attaching to a [Cognite3DViewer](../../classes/Cognite3DViewer.md).

## Extends

- [`Cognite3DViewerToolBase`](Cognite3DViewerToolBase.md)

## Constructors

### new DebugCameraTool()

> **new DebugCameraTool**(`viewer`): [`DebugCameraTool`](DebugCameraTool.md)

#### Parameters

 **viewer**: [`Cognite3DViewer`](../../classes/Cognite3DViewer.md)

#### Returns

[`DebugCameraTool`](DebugCameraTool.md)

#### Overrides

[`Cognite3DViewerToolBase`](Cognite3DViewerToolBase.md) . [`constructor`](Cognite3DViewerToolBase.md#constructors)

#### Defined in

[packages/tools/src/DebugCameraTool.ts:20](https://github.com/cognitedata/reveal/blob/2acd9d17229d2bc8e309653b4d6a39ad941e44f1/viewer/packages/tools/src/DebugCameraTool.ts#L20)

## Methods

### dispose()

> **dispose**(): `void`

**`Override`**

Removes all elements and detaches from the viewer.

#### Returns

`void`

#### Overrides

[`Cognite3DViewerToolBase`](Cognite3DViewerToolBase.md) . [`dispose`](Cognite3DViewerToolBase.md#dispose)

#### Defined in

[packages/tools/src/DebugCameraTool.ts:32](https://github.com/cognitedata/reveal/blob/2acd9d17229d2bc8e309653b4d6a39ad941e44f1/viewer/packages/tools/src/DebugCameraTool.ts#L32)

***

### hideCameraHelper()

> **hideCameraHelper**(): `void`

#### Returns

`void`

#### Defined in

[packages/tools/src/DebugCameraTool.ts:43](https://github.com/cognitedata/reveal/blob/2acd9d17229d2bc8e309653b4d6a39ad941e44f1/viewer/packages/tools/src/DebugCameraTool.ts#L43)

***

### off()

> **off**(`event`, `handler`): `void`

Unregisters an event handler for the 'disposed'-event.

#### Parameters

 **event**: `"disposed"`

 **handler**

#### Returns

`void`

#### Inherited from

[`Cognite3DViewerToolBase`](Cognite3DViewerToolBase.md) . [`off`](Cognite3DViewerToolBase.md#off)

#### Defined in

[packages/tools/src/Cognite3DViewerToolBase.ts:38](https://github.com/cognitedata/reveal/blob/2acd9d17229d2bc8e309653b4d6a39ad941e44f1/viewer/packages/tools/src/Cognite3DViewerToolBase.ts#L38)

***

### showCameraHelper()

> **showCameraHelper**(): `void`

#### Returns

`void`

#### Defined in

[packages/tools/src/DebugCameraTool.ts:37](https://github.com/cognitedata/reveal/blob/2acd9d17229d2bc8e309653b4d6a39ad941e44f1/viewer/packages/tools/src/DebugCameraTool.ts#L37)


<!-- SOURCE_END: reveal/documentation\versioned_docs\version-4.x\api\@cognite\reveal\tools\classes\DebugCameraTool.md -->

================================================================================


<!-- SOURCE_START: reveal/documentation\versioned_docs\version-4.x\api\@cognite\reveal\tools\classes\HtmlOverlayTool.md -->
## File: reveal/documentation\versioned_docs\version-4.x\api\@cognite\reveal\tools\classes\HtmlOverlayTool.md

# Class: HtmlOverlayTool

Manages HTMLoverlays for [Cognite3DViewer](../../classes/Cognite3DViewer.md). Attaches HTML elements to a
3D position and updates its position/visibility as user moves the camera. This is
useful to create HTML overlays to highlight information about key positions in the 3D model.

Attached elements *must* have CSS style 'position: absolute'. It's also recommended
in most cases to have styles 'pointer-events: none' and 'touch-action: none' to avoid
interfering with 3D navigation. Consider also applying 'transform: translate(-50%, -50%)'
to anchor the center of the element rather than the top-left corner. In some cases the
`zIndex`-attribute is necessary for the element to appear on top of the viewer.

## Example

```js
const el = document.createElement('div');
el.style.position = 'absolute'; // Required!
// Anchor to center of element
el.style.transform = 'translate(-50%, -50%)';
// Avoid being target for events
el.style.pointerEvents = 'none;
el.style.touchAction = 'none';
// Render in front of other elements
el.style.zIndex = 10;

el.style.color = 'red';
el.innerHtml = '<h1>Overlay</h1>';

const overlayTool = new HtmlOverlayTool(viewer);
overlayTool.add(el, new THREE.Vector3(10, 10, 10));
// ...
overlayTool.remove(el);
// or, to remove all attached elements
overlayTool.clear();

// detach the tool from the viewer
overlayTool.dispose();
```

## Extends

- [`Cognite3DViewerToolBase`](Cognite3DViewerToolBase.md)

## Constructors

### new HtmlOverlayTool()

> **new HtmlOverlayTool**(`viewer`, `options`?): [`HtmlOverlayTool`](HtmlOverlayTool.md)

#### Parameters

 **viewer**: [`Cognite3DViewer`](../../classes/Cognite3DViewer.md)

 **options?**: [`HtmlOverlayToolOptions`](../type-aliases/HtmlOverlayToolOptions.md)

#### Returns

[`HtmlOverlayTool`](HtmlOverlayTool.md)

#### Overrides

[`Cognite3DViewerToolBase`](Cognite3DViewerToolBase.md) . [`constructor`](Cognite3DViewerToolBase.md#constructors)

#### Defined in

[packages/tools/src/HtmlOverlay/HtmlOverlayTool.ts:172](https://github.com/cognitedata/reveal/blob/2acd9d17229d2bc8e309653b4d6a39ad941e44f1/viewer/packages/tools/src/HtmlOverlay/HtmlOverlayTool.ts#L172)

## Accessors

### elements

> `get` **elements**(): `object`[]

Returns all added HTML elements along with their 3D positions.

#### Returns

`object`[]

#### Defined in

[packages/tools/src/HtmlOverlay/HtmlOverlayTool.ts:192](https://github.com/cognitedata/reveal/blob/2acd9d17229d2bc8e309653b4d6a39ad941e44f1/viewer/packages/tools/src/HtmlOverlay/HtmlOverlayTool.ts#L192)

## Methods

### add()

> **add**(`htmlElement`, `position3D`, `options`): `void`

Registers a HTML overlay that will be updated on rendering.

#### Parameters

 **htmlElement**: `HTMLElement`

 **position3D**: `Vector3`

 **options**: [`HtmlOverlayOptions`](../type-aliases/HtmlOverlayOptions.md) = `{}`

#### Returns

`void`

#### Defined in

[packages/tools/src/HtmlOverlay/HtmlOverlayTool.ts:216](https://github.com/cognitedata/reveal/blob/2acd9d17229d2bc8e309653b4d6a39ad941e44f1/viewer/packages/tools/src/HtmlOverlay/HtmlOverlayTool.ts#L216)

***

### clear()

> **clear**(): `void`

Removes all attached HTML overlay elements.

#### Returns

`void`

#### Defined in

[packages/tools/src/HtmlOverlay/HtmlOverlayTool.ts:266](https://github.com/cognitedata/reveal/blob/2acd9d17229d2bc8e309653b4d6a39ad941e44f1/viewer/packages/tools/src/HtmlOverlay/HtmlOverlayTool.ts#L266)

***

### dispose()

> **dispose**(): `void`

**`Override`**

Removes all elements and detaches from the viewer.

#### Returns

`void`

#### Overrides

[`Cognite3DViewerToolBase`](Cognite3DViewerToolBase.md) . [`dispose`](Cognite3DViewerToolBase.md#dispose)

#### Defined in

[packages/tools/src/HtmlOverlay/HtmlOverlayTool.ts:202](https://github.com/cognitedata/reveal/blob/2acd9d17229d2bc8e309653b4d6a39ad941e44f1/viewer/packages/tools/src/HtmlOverlay/HtmlOverlayTool.ts#L202)

***

### forceUpdate()

> **forceUpdate**(`customCamera`?): `void`

Updates positions of all overlays. This is automatically managed and there
shouldn't be any reason to trigger this unless the attached elements are
modified externally.

Calling this function often might cause degraded performance.

#### Parameters

 **customCamera?**: `PerspectiveCamera`

Optional camera to be used in place of viewerCamera when calculating positions

#### Returns

`void`

#### Defined in

[packages/tools/src/HtmlOverlay/HtmlOverlayTool.ts:301](https://github.com/cognitedata/reveal/blob/2acd9d17229d2bc8e309653b4d6a39ad941e44f1/viewer/packages/tools/src/HtmlOverlay/HtmlOverlayTool.ts#L301)

***

### off()

> **off**(`event`, `handler`): `void`

Unregisters an event handler for the 'disposed'-event.

#### Parameters

 **event**: `"disposed"`

 **handler**

#### Returns

`void`

#### Inherited from

[`Cognite3DViewerToolBase`](Cognite3DViewerToolBase.md) . [`off`](Cognite3DViewerToolBase.md#off)

#### Defined in

[packages/tools/src/Cognite3DViewerToolBase.ts:38](https://github.com/cognitedata/reveal/blob/2acd9d17229d2bc8e309653b4d6a39ad941e44f1/viewer/packages/tools/src/Cognite3DViewerToolBase.ts#L38)

***

### remove()

> **remove**(`htmlElement`): `void`

Removes a overlay and removes it from the DOM.

#### Parameters

 **htmlElement**: `HTMLElement`

#### Returns

`void`

#### Defined in

[packages/tools/src/HtmlOverlay/HtmlOverlayTool.ts:254](https://github.com/cognitedata/reveal/blob/2acd9d17229d2bc8e309653b4d6a39ad941e44f1/viewer/packages/tools/src/HtmlOverlay/HtmlOverlayTool.ts#L254)

***

### visible()

> **visible**(`enable`): `void`

Hide/unhide all HTML overlay elements.

#### Parameters

 **enable**: `boolean`

#### Returns

`void`

#### Defined in

[packages/tools/src/HtmlOverlay/HtmlOverlayTool.ts:278](https://github.com/cognitedata/reveal/blob/2acd9d17229d2bc8e309653b4d6a39ad941e44f1/viewer/packages/tools/src/HtmlOverlay/HtmlOverlayTool.ts#L278)


<!-- SOURCE_END: reveal/documentation\versioned_docs\version-4.x\api\@cognite\reveal\tools\classes\HtmlOverlayTool.md -->

================================================================================


<!-- SOURCE_START: reveal/documentation\versioned_docs\version-4.x\api\@cognite\reveal\tools\classes\Keyframe.md -->
## File: reveal/documentation\versioned_docs\version-4.x\api\@cognite\reveal\tools\classes\Keyframe.md

# Class: Keyframe

Timeline Key Frames contains parameters to access Nodes, Styles for the Timeline

## Constructors

### new Keyframe()

> **new Keyframe**(`model`, `date`): [`Keyframe`](Keyframe.md)

#### Parameters

 **model**: [`CogniteCadModel`](../../classes/CogniteCadModel.md)

 **date**: `Date`

#### Returns

[`Keyframe`](Keyframe.md)

#### Defined in

[packages/tools/src/Timeline/Keyframe.ts:17](https://github.com/cognitedata/reveal/blob/2acd9d17229d2bc8e309653b4d6a39ad941e44f1/viewer/packages/tools/src/Timeline/Keyframe.ts#L17)

## Methods

### activate()

> **activate**(): `void`

Assigns the styles for the node set for the model for this Keyframe

#### Returns

`void`

#### Defined in

[packages/tools/src/Timeline/Keyframe.ts:33](https://github.com/cognitedata/reveal/blob/2acd9d17229d2bc8e309653b4d6a39ad941e44f1/viewer/packages/tools/src/Timeline/Keyframe.ts#L33)

***

### assignStyledNodeCollection()

> **assignStyledNodeCollection**(`nodeCollection`, `nodeAppearance`): `void`

Add node & style to the collection. If the collection has been added, the style is updated to the
appearance provided.

#### Parameters

 **nodeCollection**: [`NodeCollection`](../../classes/NodeCollection.md)

Node set to apply the Styles

 **nodeAppearance**: [`NodeAppearance`](../../type-aliases/NodeAppearance.md)

Style to assign to the node collection

#### Returns

`void`

#### Defined in

[packages/tools/src/Timeline/Keyframe.ts:54](https://github.com/cognitedata/reveal/blob/2acd9d17229d2bc8e309653b4d6a39ad941e44f1/viewer/packages/tools/src/Timeline/Keyframe.ts#L54)

***

### deactivate()

> **deactivate**(): `void`

Removes the style for the model

#### Returns

`void`

#### Defined in

[packages/tools/src/Timeline/Keyframe.ts:42](https://github.com/cognitedata/reveal/blob/2acd9d17229d2bc8e309653b4d6a39ad941e44f1/viewer/packages/tools/src/Timeline/Keyframe.ts#L42)

***

### getKeyframeDate()

> **getKeyframeDate**(): `Date`

Get date of the Keyframe

#### Returns

`Date`

date

#### Defined in

[packages/tools/src/Timeline/Keyframe.ts:26](https://github.com/cognitedata/reveal/blob/2acd9d17229d2bc8e309653b4d6a39ad941e44f1/viewer/packages/tools/src/Timeline/Keyframe.ts#L26)

***

### unassignStyledNodeCollection()

> **unassignStyledNodeCollection**(`nodeCollection`): `void`

Remove Node & Style for this keyframe's nodeCollection and nodeAppearance

#### Parameters

 **nodeCollection**: [`NodeCollection`](../../classes/NodeCollection.md)

Nodes to be unassign from node collection

#### Returns

`void`

#### Defined in

[packages/tools/src/Timeline/Keyframe.ts:69](https://github.com/cognitedata/reveal/blob/2acd9d17229d2bc8e309653b4d6a39ad941e44f1/viewer/packages/tools/src/Timeline/Keyframe.ts#L69)


<!-- SOURCE_END: reveal/documentation\versioned_docs\version-4.x\api\@cognite\reveal\tools\classes\Keyframe.md -->

================================================================================


<!-- SOURCE_START: reveal/documentation\versioned_docs\version-4.x\api\@cognite\reveal\tools\classes\MeasurementTool.md -->
## File: reveal/documentation\versioned_docs\version-4.x\api\@cognite\reveal\tools\classes\MeasurementTool.md

# Class: MeasurementTool

Enables [Cognite3DViewer](../../classes/Cognite3DViewer.md) to perform a point to point measurement.
This can be achieved by selecting a point on the 3D Object and drag the pointer to
required point to get measurement of the distance.
The tools default measurement is in "Meters" as supported in Reveal, but it also provides
user to customise the measuring units based on their convinience with the callback.

## Examples

```js
const measurementTool = new MeasurementTool(viewer);
measurementTool.enterMeasurementMode();
// ...
measurementTool.exitMeasurementMode();

// detach the tool from the viewer
measurementTool.dispose();
```

```js
const measurementTool = new MeasurementTool(viewer, {distanceToLabelCallback: (distanceInMeters) => {
   // 1 meters = 3.281 feet
   const distancesInFeet = distanceInMeters * 3.281;
   return { distanceInMeters: distancesInFeet, units: 'ft'};
 }});
 measurementTool.enterMeasurementMode();
```

## Extends

- [`Cognite3DViewerToolBase`](Cognite3DViewerToolBase.md)

## Constructors

### new MeasurementTool()

> **new MeasurementTool**(`viewer`, `options`?): [`MeasurementTool`](MeasurementTool.md)

#### Parameters

 **viewer**: [`Cognite3DViewer`](../../classes/Cognite3DViewer.md)

 **options?**: [`MeasurementOptions`](../type-aliases/MeasurementOptions.md)

#### Returns

[`MeasurementTool`](MeasurementTool.md)

#### Overrides

[`Cognite3DViewerToolBase`](Cognite3DViewerToolBase.md) . [`constructor`](Cognite3DViewerToolBase.md#constructors)

#### Defined in

[packages/tools/src/Measurement/MeasurementTool.ts:93](https://github.com/cognitedata/reveal/blob/2acd9d17229d2bc8e309653b4d6a39ad941e44f1/viewer/packages/tools/src/Measurement/MeasurementTool.ts#L93)

## Accessors

### isInMeasurementMode

> `get` **isInMeasurementMode**(): `boolean`

Returns measurement mode state, is measurement mode started or ended.

#### Returns

`boolean`

#### Defined in

[packages/tools/src/Measurement/MeasurementTool.ts:56](https://github.com/cognitedata/reveal/blob/2acd9d17229d2bc8e309653b4d6a39ad941e44f1/viewer/packages/tools/src/Measurement/MeasurementTool.ts#L56)

## Methods

### addMeasurement()

> **addMeasurement**(`startPoint`, `endPoint`): [`Measurement`](../type-aliases/Measurement.md)

Adds a measurement directly. E.g. to restore a previous state programatically

#### Parameters

 **startPoint**: `Vector3`

 **endPoint**: `Vector3`

#### Returns

[`Measurement`](../type-aliases/Measurement.md)

#### Defined in

[packages/tools/src/Measurement/MeasurementTool.ts:288](https://github.com/cognitedata/reveal/blob/2acd9d17229d2bc8e309653b4d6a39ad941e44f1/viewer/packages/tools/src/Measurement/MeasurementTool.ts#L288)

***

### dispose()

> **dispose**(): `void`

Dispose Measurement Tool.

#### Returns

`void`

#### Overrides

[`Cognite3DViewerToolBase`](Cognite3DViewerToolBase.md) . [`dispose`](Cognite3DViewerToolBase.md#dispose)

#### Defined in

[packages/tools/src/Measurement/MeasurementTool.ts:396](https://github.com/cognitedata/reveal/blob/2acd9d17229d2bc8e309653b4d6a39ad941e44f1/viewer/packages/tools/src/Measurement/MeasurementTool.ts#L396)

***

### enterMeasurementMode()

> **enterMeasurementMode**(): `void`

Enter into point to point measurement mode.

#### Returns

`void`

#### Defined in

[packages/tools/src/Measurement/MeasurementTool.ts:237](https://github.com/cognitedata/reveal/blob/2acd9d17229d2bc8e309653b4d6a39ad941e44f1/viewer/packages/tools/src/Measurement/MeasurementTool.ts#L237)

***

### exitMeasurementMode()

> **exitMeasurementMode**(): `void`

Exit measurement mode.

#### Returns

`void`

#### Defined in

[packages/tools/src/Measurement/MeasurementTool.ts:255](https://github.com/cognitedata/reveal/blob/2acd9d17229d2bc8e309653b4d6a39ad941e44f1/viewer/packages/tools/src/Measurement/MeasurementTool.ts#L255)

***

### getAllMeasurements()

> **getAllMeasurements**(): [`Measurement`](../type-aliases/Measurement.md)[]

Get all measurements from [Cognite3DViewer](../../classes/Cognite3DViewer.md).

#### Returns

[`Measurement`](../type-aliases/Measurement.md)[]

Array of Measurements containing Id, start point, end point & measured distance.

#### Defined in

[packages/tools/src/Measurement/MeasurementTool.ts:375](https://github.com/cognitedata/reveal/blob/2acd9d17229d2bc8e309653b4d6a39ad941e44f1/viewer/packages/tools/src/Measurement/MeasurementTool.ts#L375)

***

### off()

Unsubscribe to the Measurement event

#### Param

`MeasurementEvents` event

#### Param

Callback to measurements events

#### off(event, callback)

> **off**(`event`, `callback`): `void`

##### Parameters

 **event**: `"disposed"`

 **callback**: [`DisposedDelegate`](../../type-aliases/DisposedDelegate.md)

##### Returns

`void`

##### Overrides

[`Cognite3DViewerToolBase`](Cognite3DViewerToolBase.md) . [`off`](Cognite3DViewerToolBase.md#off)

##### Example

```js
measurementTool.off('disposed', onMeasurementDispose);
```

##### Defined in

[packages/tools/src/Measurement/MeasurementTool.ts:181](https://github.com/cognitedata/reveal/blob/2acd9d17229d2bc8e309653b4d6a39ad941e44f1/viewer/packages/tools/src/Measurement/MeasurementTool.ts#L181)

#### off(event, callback)

> **off**(`event`, `callback`): `void`

##### Parameters

 **event**: `"added"`

 **callback**: [`MeasurementAddedDelegate`](../type-aliases/MeasurementAddedDelegate.md)

##### Returns

`void`

##### Overrides

`Cognite3DViewerToolBase.off`

##### Example

```js
measurementTool.off('added', onMeasurementAdded);
```

##### Defined in

[packages/tools/src/Measurement/MeasurementTool.ts:189](https://github.com/cognitedata/reveal/blob/2acd9d17229d2bc8e309653b4d6a39ad941e44f1/viewer/packages/tools/src/Measurement/MeasurementTool.ts#L189)

#### off(event, callback)

> **off**(`event`, `callback`): `void`

##### Parameters

 **event**: `"started"`

 **callback**: [`MeasurementStartedDelegate`](../type-aliases/MeasurementStartedDelegate.md)

##### Returns

`void`

##### Overrides

`Cognite3DViewerToolBase.off`

##### Example

```js
measurementTool.off('started', onMeasurementStarted);
```

##### Defined in

[packages/tools/src/Measurement/MeasurementTool.ts:197](https://github.com/cognitedata/reveal/blob/2acd9d17229d2bc8e309653b4d6a39ad941e44f1/viewer/packages/tools/src/Measurement/MeasurementTool.ts#L197)

#### off(event, callback)

> **off**(`event`, `callback`): `void`

##### Parameters

 **event**: `"ended"`

 **callback**: [`MeasurementEndedDelegate`](../type-aliases/MeasurementEndedDelegate.md)

##### Returns

`void`

##### Overrides

`Cognite3DViewerToolBase.off`

##### Example

```js
measurementTool.off('ended', onMeasurementEnded);
```

##### Defined in

[packages/tools/src/Measurement/MeasurementTool.ts:205](https://github.com/cognitedata/reveal/blob/2acd9d17229d2bc8e309653b4d6a39ad941e44f1/viewer/packages/tools/src/Measurement/MeasurementTool.ts#L205)

***

### on()

Subscribe to the Measurement events

#### Param

`MeasurementEvents` event

#### Param

Callback to measurements events

#### on(event, callback)

> **on**(`event`, `callback`): `void`

Triggered when the tool is disposed. Listeners should clean up any
resources held and remove the reference to the tool.

##### Parameters

 **event**: `"disposed"`

 **callback**: [`DisposedDelegate`](../../type-aliases/DisposedDelegate.md)

##### Returns

`void`

##### Overrides

`Cognite3DViewerToolBase.on`

##### Example

```js
measurementTool.on('disposed', onMeasurementDispose);
```

##### Defined in

[packages/tools/src/Measurement/MeasurementTool.ts:119](https://github.com/cognitedata/reveal/blob/2acd9d17229d2bc8e309653b4d6a39ad941e44f1/viewer/packages/tools/src/Measurement/MeasurementTool.ts#L119)

#### on(event, callback)

> **on**(`event`, `callback`): `void`

Triggered when a measurement is added into the Cognite3DViewer.

##### Parameters

 **event**: `"added"`

 **callback**: [`MeasurementAddedDelegate`](../type-aliases/MeasurementAddedDelegate.md)

##### Returns

`void`

##### Overrides

`Cognite3DViewerToolBase.on`

##### Example

```js
measurementTool.on('added', onMeasurementAdded);
```

##### Defined in

[packages/tools/src/Measurement/MeasurementTool.ts:128](https://github.com/cognitedata/reveal/blob/2acd9d17229d2bc8e309653b4d6a39ad941e44f1/viewer/packages/tools/src/Measurement/MeasurementTool.ts#L128)

#### on(event, callback)

> **on**(`event`, `callback`): `void`

Triggered when a measurement mode is started.

##### Parameters

 **event**: `"started"`

 **callback**: [`MeasurementStartedDelegate`](../type-aliases/MeasurementStartedDelegate.md)

##### Returns

`void`

##### Overrides

`Cognite3DViewerToolBase.on`

##### Example

```js
measurementTool.on('started', onMeasurementStarted);
```

##### Defined in

[packages/tools/src/Measurement/MeasurementTool.ts:137](https://github.com/cognitedata/reveal/blob/2acd9d17229d2bc8e309653b4d6a39ad941e44f1/viewer/packages/tools/src/Measurement/MeasurementTool.ts#L137)

#### on(event, callback)

> **on**(`event`, `callback`): `void`

Triggered when measurement mode is ended.

##### Parameters

 **event**: `"ended"`

 **callback**: [`MeasurementEndedDelegate`](../type-aliases/MeasurementEndedDelegate.md)

##### Returns

`void`

##### Overrides

`Cognite3DViewerToolBase.on`

##### Example

```js
measurementTool.on('ended', onMeasurementEnded);
```

##### Defined in

[packages/tools/src/Measurement/MeasurementTool.ts:146](https://github.com/cognitedata/reveal/blob/2acd9d17229d2bc8e309653b4d6a39ad941e44f1/viewer/packages/tools/src/Measurement/MeasurementTool.ts#L146)

***

### removeAllMeasurements()

> **removeAllMeasurements**(): `void`

Removes all measurements from the Cognite3DViewer.

#### Returns

`void`

#### Defined in

[packages/tools/src/Measurement/MeasurementTool.ts:308](https://github.com/cognitedata/reveal/blob/2acd9d17229d2bc8e309653b4d6a39ad941e44f1/viewer/packages/tools/src/Measurement/MeasurementTool.ts#L308)

***

### removeMeasurement()

> **removeMeasurement**(`measurement`): `void`

Removes a measurement from the Cognite3DViewer.

#### Parameters

 **measurement**: [`Measurement`](../type-aliases/Measurement.md)

Measurement to be removed from Cognite3DViewer.

#### Returns

`void`

#### Defined in

[packages/tools/src/Measurement/MeasurementTool.ts:273](https://github.com/cognitedata/reveal/blob/2acd9d17229d2bc8e309653b4d6a39ad941e44f1/viewer/packages/tools/src/Measurement/MeasurementTool.ts#L273)

***

### setLineOptions()

> **setLineOptions**(`options`): `void`

Sets Measurement line width, color and label units value for the next measurment.

#### Parameters

 **options**: [`MeasurementOptions`](../type-aliases/MeasurementOptions.md)

MeasurementOptions to set line width, color and callback for custom operation on measurement labels.

#### Returns

`void`

#### Defined in

[packages/tools/src/Measurement/MeasurementTool.ts:332](https://github.com/cognitedata/reveal/blob/2acd9d17229d2bc8e309653b4d6a39ad941e44f1/viewer/packages/tools/src/Measurement/MeasurementTool.ts#L332)

***

### setMeasurementLabelsVisible()

> **setMeasurementLabelsVisible**(`enable`): `void`

Sets the visiblity of labels in the Measurement.

#### Parameters

 **enable**: `boolean`

#### Returns

`void`

#### Defined in

[packages/tools/src/Measurement/MeasurementTool.ts:321](https://github.com/cognitedata/reveal/blob/2acd9d17229d2bc8e309653b4d6a39ad941e44f1/viewer/packages/tools/src/Measurement/MeasurementTool.ts#L321)

***

### updateLineColor()

> **updateLineColor**(`measurement`, `color`): `void`

Update selected line color.

#### Parameters

 **measurement**: [`Measurement`](../type-aliases/Measurement.md)

Measurement to be updated.

 **color**: `Color`

Color of the measuring line.

#### Returns

`void`

#### Defined in

[packages/tools/src/Measurement/MeasurementTool.ts:360](https://github.com/cognitedata/reveal/blob/2acd9d17229d2bc8e309653b4d6a39ad941e44f1/viewer/packages/tools/src/Measurement/MeasurementTool.ts#L360)

***

### updateLineWidth()

> **updateLineWidth**(`measurement`, `lineWidth`): `void`

Update selected line width.

#### Parameters

 **measurement**: [`Measurement`](../type-aliases/Measurement.md)

Measurement to be updated.

 **lineWidth**: `number`

Width of the measuring line.

#### Returns

`void`

#### Defined in

[packages/tools/src/Measurement/MeasurementTool.ts:344](https://github.com/cognitedata/reveal/blob/2acd9d17229d2bc8e309653b4d6a39ad941e44f1/viewer/packages/tools/src/Measurement/MeasurementTool.ts#L344)

***

### visible()

> **visible**(`enable`): `void`

Hide/unhide all measurements

#### Parameters

 **enable**: `boolean`

#### Returns

`void`

#### Defined in

[packages/tools/src/Measurement/MeasurementTool.ts:383](https://github.com/cognitedata/reveal/blob/2acd9d17229d2bc8e309653b4d6a39ad941e44f1/viewer/packages/tools/src/Measurement/MeasurementTool.ts#L383)


<!-- SOURCE_END: reveal/documentation\versioned_docs\version-4.x\api\@cognite\reveal\tools\classes\MeasurementTool.md -->

================================================================================


<!-- SOURCE_START: reveal/documentation\versioned_docs\version-4.x\api\@cognite\reveal\tools\classes\Overlay3DTool.md -->
## File: reveal/documentation\versioned_docs\version-4.x\api\@cognite\reveal\tools\classes\Overlay3DTool.md

# Class: Overlay3DTool\<ContentType\>

Tool for adding and interacting with 2D overlays positioned at points in

## Extends

- [`Cognite3DViewerToolBase`](Cognite3DViewerToolBase.md)

## Type Parameters

 **ContentType** = [`DefaultOverlay3DContentType`](../../type-aliases/DefaultOverlay3DContentType.md)

## Constructors

### new Overlay3DTool()

> **new Overlay3DTool**\<`ContentType`\>(`viewer`, `toolParameters`?): [`Overlay3DTool`](Overlay3DTool.md)\<`ContentType`\>

#### Parameters

 **viewer**: [`Cognite3DViewer`](../../classes/Cognite3DViewer.md)

 **toolParameters?**: [`Overlay3DToolParameters`](../type-aliases/Overlay3DToolParameters.md)

#### Returns

[`Overlay3DTool`](Overlay3DTool.md)\<`ContentType`\>

#### Overrides

[`Cognite3DViewerToolBase`](Cognite3DViewerToolBase.md) . [`constructor`](Cognite3DViewerToolBase.md#constructors)

#### Defined in

[packages/tools/src/Overlay3D/Overlay3DTool.ts:97](https://github.com/cognitedata/reveal/blob/2acd9d17229d2bc8e309653b4d6a39ad941e44f1/viewer/packages/tools/src/Overlay3D/Overlay3DTool.ts#L97)

## Methods

### clear()

> **clear**(): `void`

Removes all overlays.

#### Returns

`void`

#### Defined in

[packages/tools/src/Overlay3D/Overlay3DTool.ts:193](https://github.com/cognitedata/reveal/blob/2acd9d17229d2bc8e309653b4d6a39ad941e44f1/viewer/packages/tools/src/Overlay3D/Overlay3DTool.ts#L193)

***

### createOverlayCollection()

> **createOverlayCollection**(`overlays`?, `options`?): [`OverlayCollection`](../../interfaces/OverlayCollection.md)\<`ContentType`\>

Creates new OverlayCollection.

#### Parameters

 **overlays?**: [`OverlayInfo`](../../type-aliases/OverlayInfo.md)\<`ContentType`\>[]

Array of overlays to add.

 **options?**: [`OverlayCollectionOptions`](../type-aliases/OverlayCollectionOptions.md)

#### Returns

[`OverlayCollection`](../../interfaces/OverlayCollection.md)\<`ContentType`\>

Overlay group containing it's id.

#### Defined in

[packages/tools/src/Overlay3D/Overlay3DTool.ts:114](https://github.com/cognitedata/reveal/blob/2acd9d17229d2bc8e309653b4d6a39ad941e44f1/viewer/packages/tools/src/Overlay3D/Overlay3DTool.ts#L114)

***

### dispose()

> **dispose**(): `void`

Dispose of resources used by this tool

#### Returns

`void`

#### Overrides

[`Cognite3DViewerToolBase`](Cognite3DViewerToolBase.md) . [`dispose`](Cognite3DViewerToolBase.md#dispose)

#### Defined in

[packages/tools/src/Overlay3D/Overlay3DTool.ts:249](https://github.com/cognitedata/reveal/blob/2acd9d17229d2bc8e309653b4d6a39ad941e44f1/viewer/packages/tools/src/Overlay3D/Overlay3DTool.ts#L249)

***

### getCollections()

> **getCollections**(): [`OverlayCollection`](../../interfaces/OverlayCollection.md)\<`ContentType`\>[]

Gets all added overlay collections.

#### Returns

[`OverlayCollection`](../../interfaces/OverlayCollection.md)\<`ContentType`\>[]

#### Defined in

[packages/tools/src/Overlay3D/Overlay3DTool.ts:152](https://github.com/cognitedata/reveal/blob/2acd9d17229d2bc8e309653b4d6a39ad941e44f1/viewer/packages/tools/src/Overlay3D/Overlay3DTool.ts#L152)

***

### getTextOverlayVisible()

> **getTextOverlayVisible**(): `boolean`

Gets whether text overlay is visible.

#### Returns

`boolean`

#### Defined in

[packages/tools/src/Overlay3D/Overlay3DTool.ts:186](https://github.com/cognitedata/reveal/blob/2acd9d17229d2bc8e309653b4d6a39ad941e44f1/viewer/packages/tools/src/Overlay3D/Overlay3DTool.ts#L186)

***

### getVisible()

> **getVisible**(): `boolean`

Gets whether overlays are visible.

#### Returns

`boolean`

#### Defined in

[packages/tools/src/Overlay3D/Overlay3DTool.ts:171](https://github.com/cognitedata/reveal/blob/2acd9d17229d2bc8e309653b4d6a39ad941e44f1/viewer/packages/tools/src/Overlay3D/Overlay3DTool.ts#L171)

***

### off()

#### off(event, eventHandler)

> **off**(`event`, `eventHandler`): `void`

Unregisters an event handler for the 'disposed'-event.

##### Parameters

 **event**: `"hover"`

 **eventHandler**: [`OverlayEventHandler`](../type-aliases/OverlayEventHandler.md)\<`ContentType`\>

##### Returns

`void`

##### Overrides

[`Cognite3DViewerToolBase`](Cognite3DViewerToolBase.md) . [`off`](Cognite3DViewerToolBase.md#off)

##### Defined in

[packages/tools/src/Overlay3D/Overlay3DTool.ts:226](https://github.com/cognitedata/reveal/blob/2acd9d17229d2bc8e309653b4d6a39ad941e44f1/viewer/packages/tools/src/Overlay3D/Overlay3DTool.ts#L226)

#### off(event, eventHandler)

> **off**(`event`, `eventHandler`): `void`

##### Parameters

 **event**: `"click"`

 **eventHandler**: [`OverlayEventHandler`](../type-aliases/OverlayEventHandler.md)\<`ContentType`\>

##### Returns

`void`

##### Overrides

`Cognite3DViewerToolBase.off`

##### Defined in

[packages/tools/src/Overlay3D/Overlay3DTool.ts:227](https://github.com/cognitedata/reveal/blob/2acd9d17229d2bc8e309653b4d6a39ad941e44f1/viewer/packages/tools/src/Overlay3D/Overlay3DTool.ts#L227)

#### off(event, eventHandler)

> **off**(`event`, `eventHandler`): `void`

##### Parameters

 **event**: `"disposed"`

 **eventHandler**: [`DisposedDelegate`](../../type-aliases/DisposedDelegate.md)

##### Returns

`void`

##### Overrides

`Cognite3DViewerToolBase.off`

##### Defined in

[packages/tools/src/Overlay3D/Overlay3DTool.ts:228](https://github.com/cognitedata/reveal/blob/2acd9d17229d2bc8e309653b4d6a39ad941e44f1/viewer/packages/tools/src/Overlay3D/Overlay3DTool.ts#L228)

***

### on()

#### on(event, eventHandler)

> **on**(`event`, `eventHandler`): `void`

Subscribes to overlay events.

##### Parameters

 **event**: `"hover"`

event to subscribe to.

 **eventHandler**: [`OverlayEventHandler`](../type-aliases/OverlayEventHandler.md)\<`ContentType`\>

##### Returns

`void`

##### Overrides

`Cognite3DViewerToolBase.on`

##### Defined in

[packages/tools/src/Overlay3D/Overlay3DTool.ts:206](https://github.com/cognitedata/reveal/blob/2acd9d17229d2bc8e309653b4d6a39ad941e44f1/viewer/packages/tools/src/Overlay3D/Overlay3DTool.ts#L206)

#### on(event, eventHandler)

> **on**(`event`, `eventHandler`): `void`

##### Parameters

 **event**: `"click"`

 **eventHandler**: [`OverlayEventHandler`](../type-aliases/OverlayEventHandler.md)\<`ContentType`\>

##### Returns

`void`

##### Overrides

`Cognite3DViewerToolBase.on`

##### Defined in

[packages/tools/src/Overlay3D/Overlay3DTool.ts:207](https://github.com/cognitedata/reveal/blob/2acd9d17229d2bc8e309653b4d6a39ad941e44f1/viewer/packages/tools/src/Overlay3D/Overlay3DTool.ts#L207)

#### on(event, eventHandler)

> **on**(`event`, `eventHandler`): `void`

##### Parameters

 **event**: `"disposed"`

 **eventHandler**: [`DisposedDelegate`](../../type-aliases/DisposedDelegate.md)

##### Returns

`void`

##### Overrides

`Cognite3DViewerToolBase.on`

##### Defined in

[packages/tools/src/Overlay3D/Overlay3DTool.ts:208](https://github.com/cognitedata/reveal/blob/2acd9d17229d2bc8e309653b4d6a39ad941e44f1/viewer/packages/tools/src/Overlay3D/Overlay3DTool.ts#L208)

***

### removeOverlayCollection()

> **removeOverlayCollection**(`overlayCollection`): `void`

Removes overlays that were added with addOverlays method.

#### Parameters

 **overlayCollection**: [`OverlayCollection`](../../interfaces/OverlayCollection.md)\<`ContentType`\>

Id of the overlay group to remove.

#### Returns

`void`

#### Defined in

[packages/tools/src/Overlay3D/Overlay3DTool.ts:137](https://github.com/cognitedata/reveal/blob/2acd9d17229d2bc8e309653b4d6a39ad941e44f1/viewer/packages/tools/src/Overlay3D/Overlay3DTool.ts#L137)

***

### setTextOverlayVisible()

> **setTextOverlayVisible**(`visible`): `void`

Sets whether text overlay is visible.
Default is false.

#### Parameters

 **visible**: `boolean`

#### Returns

`void`

#### Defined in

[packages/tools/src/Overlay3D/Overlay3DTool.ts:179](https://github.com/cognitedata/reveal/blob/2acd9d17229d2bc8e309653b4d6a39ad941e44f1/viewer/packages/tools/src/Overlay3D/Overlay3DTool.ts#L179)

***

### setVisible()

> **setVisible**(`visible`): `void`

Sets whether overlays are visible.

#### Parameters

 **visible**: `boolean`

#### Returns

`void`

#### Defined in

[packages/tools/src/Overlay3D/Overlay3DTool.ts:159](https://github.com/cognitedata/reveal/blob/2acd9d17229d2bc8e309653b4d6a39ad941e44f1/viewer/packages/tools/src/Overlay3D/Overlay3DTool.ts#L159)


<!-- SOURCE_END: reveal/documentation\versioned_docs\version-4.x\api\@cognite\reveal\tools\classes\Overlay3DTool.md -->

================================================================================


<!-- SOURCE_START: reveal/documentation\versioned_docs\version-4.x\api\@cognite\reveal\tools\classes\TimelineTool.md -->
## File: reveal/documentation\versioned_docs\version-4.x\api\@cognite\reveal\tools\classes\TimelineTool.md

# Class: TimelineTool

Tool to applying styles to nodes based on date to play them over in Timeline

## Extends

- [`Cognite3DViewerToolBase`](Cognite3DViewerToolBase.md)

## Constructors

### new TimelineTool()

> **new TimelineTool**(`cadModel`): [`TimelineTool`](TimelineTool.md)

#### Parameters

 **cadModel**: [`CogniteCadModel`](../../classes/CogniteCadModel.md)

#### Returns

[`TimelineTool`](TimelineTool.md)

#### Overrides

[`Cognite3DViewerToolBase`](Cognite3DViewerToolBase.md) . [`constructor`](Cognite3DViewerToolBase.md#constructors)

#### Defined in

[packages/tools/src/Timeline/TimelineTool.ts:22](https://github.com/cognitedata/reveal/blob/2acd9d17229d2bc8e309653b4d6a39ad941e44f1/viewer/packages/tools/src/Timeline/TimelineTool.ts#L22)

## Methods

### createKeyframe()

> **createKeyframe**(`date`): [`Keyframe`](Keyframe.md)

Create Key frame for the Timeline

#### Parameters

 **date**: `Date`

date value by Date.now() since January 1, 1970

#### Returns

[`Keyframe`](Keyframe.md)

#### Defined in

[packages/tools/src/Timeline/TimelineTool.ts:63](https://github.com/cognitedata/reveal/blob/2acd9d17229d2bc8e309653b4d6a39ad941e44f1/viewer/packages/tools/src/Timeline/TimelineTool.ts#L63)

***

### dispose()

> **dispose**(): `void`

Disposes the element and triggeres the 'disposed' event before clearing the list
of dipose-listeners.

#### Returns

`void`

#### Overrides

[`Cognite3DViewerToolBase`](Cognite3DViewerToolBase.md) . [`dispose`](Cognite3DViewerToolBase.md#dispose)

#### Defined in

[packages/tools/src/Timeline/TimelineTool.ts:184](https://github.com/cognitedata/reveal/blob/2acd9d17229d2bc8e309653b4d6a39ad941e44f1/viewer/packages/tools/src/Timeline/TimelineTool.ts#L184)

***

### getAllKeyframes()

> **getAllKeyframes**(): [`Keyframe`](Keyframe.md)[]

Provides all Keyframes in the Timeline

#### Returns

[`Keyframe`](Keyframe.md)[]

All Keyframes in Timeline

#### Defined in

[packages/tools/src/Timeline/TimelineTool.ts:180](https://github.com/cognitedata/reveal/blob/2acd9d17229d2bc8e309653b4d6a39ad941e44f1/viewer/packages/tools/src/Timeline/TimelineTool.ts#L180)

***

### getKeyframeByDate()

> **getKeyframeByDate**(`date`): `undefined` \| [`Keyframe`](Keyframe.md)

Returns the keyframe at the date given, or undefined if not found.

#### Parameters

 **date**: `Date`

#### Returns

`undefined` \| [`Keyframe`](Keyframe.md)

#### Defined in

[packages/tools/src/Timeline/TimelineTool.ts:76](https://github.com/cognitedata/reveal/blob/2acd9d17229d2bc8e309653b4d6a39ad941e44f1/viewer/packages/tools/src/Timeline/TimelineTool.ts#L76)

***

### off()

> **off**(`event`, `handler`): `void`

Unregisters an event handler for the 'disposed'-event.

#### Parameters

 **event**: `"disposed"`

 **handler**

#### Returns

`void`

#### Inherited from

[`Cognite3DViewerToolBase`](Cognite3DViewerToolBase.md) . [`off`](Cognite3DViewerToolBase.md#off)

#### Defined in

[packages/tools/src/Cognite3DViewerToolBase.ts:38](https://github.com/cognitedata/reveal/blob/2acd9d17229d2bc8e309653b4d6a39ad941e44f1/viewer/packages/tools/src/Cognite3DViewerToolBase.ts#L38)

***

### pause()

> **pause**(): `void`

Pause any ongoing playback

#### Returns

`void`

#### Defined in

[packages/tools/src/Timeline/TimelineTool.ts:161](https://github.com/cognitedata/reveal/blob/2acd9d17229d2bc8e309653b4d6a39ad941e44f1/viewer/packages/tools/src/Timeline/TimelineTool.ts#L161)

***

### play()

> **play**(`startDate`, `endDate`, `totalDurationInMilliSeconds`): `void`

Starts playback of Timeline

#### Parameters

 **startDate**: `Date`

Keyframe date to start the Playback of Keyframes

 **endDate**: `Date`

Keyframe date to stop the Playback of Keyframes

 **totalDurationInMilliSeconds**: `number`

Number of milliseconds for all Keyframe within startDate & endDate to be rendered

#### Returns

`void`

#### Defined in

[packages/tools/src/Timeline/TimelineTool.ts:110](https://github.com/cognitedata/reveal/blob/2acd9d17229d2bc8e309653b4d6a39ad941e44f1/viewer/packages/tools/src/Timeline/TimelineTool.ts#L110)

***

### removeKeyframe()

> **removeKeyframe**(`keyframe`): `void`

Removes the Keyframe from the timeline. Does nothing if the keyframe isn't part of the timeline.

#### Parameters

 **keyframe**: [`Keyframe`](Keyframe.md)

Keyframe to be removed from the timeline

#### Returns

`void`

#### Defined in

[packages/tools/src/Timeline/TimelineTool.ts:84](https://github.com/cognitedata/reveal/blob/2acd9d17229d2bc8e309653b4d6a39ad941e44f1/viewer/packages/tools/src/Timeline/TimelineTool.ts#L84)

***

### removeKeyframeByDate()

> **removeKeyframeByDate**(`date`): `void`

Removes the Keyframe from the Timeline

#### Parameters

 **date**: `Date`

Date of the Keyframe to be removed from the Timeline

#### Returns

`void`

#### Defined in

[packages/tools/src/Timeline/TimelineTool.ts:96](https://github.com/cognitedata/reveal/blob/2acd9d17229d2bc8e309653b4d6a39ad941e44f1/viewer/packages/tools/src/Timeline/TimelineTool.ts#L96)

***

### resume()

> **resume**(): `void`

Resume any paused playback

#### Returns

`void`

#### Defined in

[packages/tools/src/Timeline/TimelineTool.ts:170](https://github.com/cognitedata/reveal/blob/2acd9d17229d2bc8e309653b4d6a39ad941e44f1/viewer/packages/tools/src/Timeline/TimelineTool.ts#L170)

***

### stop()

> **stop**(): `void`

Stops any ongoing playback

#### Returns

`void`

#### Defined in

[packages/tools/src/Timeline/TimelineTool.ts:151](https://github.com/cognitedata/reveal/blob/2acd9d17229d2bc8e309653b4d6a39ad941e44f1/viewer/packages/tools/src/Timeline/TimelineTool.ts#L151)

***

### subscribe()

> **subscribe**(`event`, `listener`): `void`

Subscribe to the Date changed event

#### Parameters

 **event**: `"dateChanged"`

`dateChanged` event

 **listener**: [`TimelineDateUpdateDelegate`](../type-aliases/TimelineDateUpdateDelegate.md)

Listen to Timeline date Update during Playback

#### Returns

`void`

#### Defined in

[packages/tools/src/Timeline/TimelineTool.ts:34](https://github.com/cognitedata/reveal/blob/2acd9d17229d2bc8e309653b4d6a39ad941e44f1/viewer/packages/tools/src/Timeline/TimelineTool.ts#L34)

***

### unsubscribe()

> **unsubscribe**(`event`, `listener`): `void`

Unsubscribe to the Date changed event

#### Parameters

 **event**: `"dateChanged"`

`dateChanged` event

 **listener**: [`TimelineDateUpdateDelegate`](../type-aliases/TimelineDateUpdateDelegate.md)

Remove Listen to Timeline date Update

#### Returns

`void`

#### Defined in

[packages/tools/src/Timeline/TimelineTool.ts:49](https://github.com/cognitedata/reveal/blob/2acd9d17229d2bc8e309653b4d6a39ad941e44f1/viewer/packages/tools/src/Timeline/TimelineTool.ts#L49)


<!-- SOURCE_END: reveal/documentation\versioned_docs\version-4.x\api\@cognite\reveal\tools\classes\TimelineTool.md -->

================================================================================


<!-- SOURCE_START: reveal/documentation\versioned_docs\version-4.x\api\@cognite\reveal\tools\enumerations\Corner.md -->
## File: reveal/documentation\versioned_docs\version-4.x\api\@cognite\reveal\tools\enumerations\Corner.md

# Enumeration: Corner

A corner of the anything.

## Enumeration Members

### BottomLeft

> **BottomLeft**: `2`

#### Defined in

[packages/tools/src/utilities/Corner.ts:12](https://github.com/cognitedata/reveal/blob/2acd9d17229d2bc8e309653b4d6a39ad941e44f1/viewer/packages/tools/src/utilities/Corner.ts#L12)

***

### BottomRight

> **BottomRight**: `3`

#### Defined in

[packages/tools/src/utilities/Corner.ts:13](https://github.com/cognitedata/reveal/blob/2acd9d17229d2bc8e309653b4d6a39ad941e44f1/viewer/packages/tools/src/utilities/Corner.ts#L13)

***

### TopLeft

> **TopLeft**: `1`

#### Defined in

[packages/tools/src/utilities/Corner.ts:11](https://github.com/cognitedata/reveal/blob/2acd9d17229d2bc8e309653b4d6a39ad941e44f1/viewer/packages/tools/src/utilities/Corner.ts#L11)

***

### TopRight

> **TopRight**: `0`

#### Defined in

[packages/tools/src/utilities/Corner.ts:10](https://github.com/cognitedata/reveal/blob/2acd9d17229d2bc8e309653b4d6a39ad941e44f1/viewer/packages/tools/src/utilities/Corner.ts#L10)


<!-- SOURCE_END: reveal/documentation\versioned_docs\version-4.x\api\@cognite\reveal\tools\enumerations\Corner.md -->

================================================================================


<!-- SOURCE_START: reveal/documentation\versioned_docs\version-4.x\api\@cognite\reveal\tools\index.md -->
## File: reveal/documentation\versioned_docs\version-4.x\api\@cognite\reveal\tools\index.md

# @cognite/reveal/tools

## Index

### Enumerations

- [Corner](enumerations/Corner.md)

### Classes

- [AxisGizmoOptions](classes/AxisGizmoOptions.md)
- [AxisGizmoTool](classes/AxisGizmoTool.md)
- [AxisViewTool](classes/AxisViewTool.md)
- [Cognite3DViewerToolBase](classes/Cognite3DViewerToolBase.md)
- [DebugCameraTool](classes/DebugCameraTool.md)
- [HtmlOverlayTool](classes/HtmlOverlayTool.md)
- [Keyframe](classes/Keyframe.md)
- [MeasurementTool](classes/MeasurementTool.md)
- [Overlay3DTool](classes/Overlay3DTool.md)
- [TimelineTool](classes/TimelineTool.md)

### Type Aliases

- [AbsolutePosition](type-aliases/AbsolutePosition.md)
- [AxisBoxCompassConfig](type-aliases/AxisBoxCompassConfig.md)
- [AxisBoxConfig](type-aliases/AxisBoxConfig.md)
- [AxisBoxFaceConfig](type-aliases/AxisBoxFaceConfig.md)
- [DistanceToLabelDelegate](type-aliases/DistanceToLabelDelegate.md)
- [HtmlOverlayCreateClusterDelegate](type-aliases/HtmlOverlayCreateClusterDelegate.md)
- [HtmlOverlayOptions](type-aliases/HtmlOverlayOptions.md)
- [HtmlOverlayPositionUpdatedDelegate](type-aliases/HtmlOverlayPositionUpdatedDelegate.md)
- [HtmlOverlayToolClusteringOptions](type-aliases/HtmlOverlayToolClusteringOptions.md)
- [HtmlOverlayToolOptions](type-aliases/HtmlOverlayToolOptions.md)
- [Measurement](type-aliases/Measurement.md)
- [MeasurementAddedDelegate](type-aliases/MeasurementAddedDelegate.md)
- [MeasurementEndedDelegate](type-aliases/MeasurementEndedDelegate.md)
- [MeasurementOptions](type-aliases/MeasurementOptions.md)
- [MeasurementStartedDelegate](type-aliases/MeasurementStartedDelegate.md)
- [Overlay3DToolParameters](type-aliases/Overlay3DToolParameters.md)
- [OverlayCollectionOptions](type-aliases/OverlayCollectionOptions.md)
- [OverlayEventHandler](type-aliases/OverlayEventHandler.md)
- [OverlayToolEvent](type-aliases/OverlayToolEvent.md)
- [RelativePosition](type-aliases/RelativePosition.md)
- [TimelineDateUpdateDelegate](type-aliases/TimelineDateUpdateDelegate.md)


<!-- SOURCE_END: reveal/documentation\versioned_docs\version-4.x\api\@cognite\reveal\tools\index.md -->

================================================================================


<!-- SOURCE_START: reveal/documentation\versioned_docs\version-4.x\api\@cognite\reveal\tools\type-aliases\AbsolutePosition.md -->
## File: reveal/documentation\versioned_docs\version-4.x\api\@cognite\reveal\tools\type-aliases\AbsolutePosition.md

# Type Alias: AbsolutePosition

> **AbsolutePosition**: `object`

Absolute position in pixels.

## Type declaration

### xAbsolute

> **xAbsolute**: `number`

### yAbsolute

> **yAbsolute**: `number`

## Defined in

[packages/tools/src/AxisView/types.ts:49](https://github.com/cognitedata/reveal/blob/2acd9d17229d2bc8e309653b4d6a39ad941e44f1/viewer/packages/tools/src/AxisView/types.ts#L49)


<!-- SOURCE_END: reveal/documentation\versioned_docs\version-4.x\api\@cognite\reveal\tools\type-aliases\AbsolutePosition.md -->

================================================================================


<!-- SOURCE_START: reveal/documentation\versioned_docs\version-4.x\api\@cognite\reveal\tools\type-aliases\AxisBoxCompassConfig.md -->
## File: reveal/documentation\versioned_docs\version-4.x\api\@cognite\reveal\tools\type-aliases\AxisBoxCompassConfig.md

# Type Alias: AxisBoxCompassConfig

> **AxisBoxCompassConfig**: `object`

Configuration of the compass.

## Type declaration

### fontColor?

> `optional` **fontColor**: `THREE.Color`

### fontSize?

> `optional` **fontSize**: `number`

### labelDelta?

> `optional` **labelDelta**: `number`

Offset in radians of the orientation indicator.

### ringLabel?

> `optional` **ringLabel**: `string`

Label of the orientation indicator. Defaults
to 'N' for north.

### tickColor?

> `optional` **tickColor**: `THREE.Color`

## Defined in

[packages/tools/src/AxisView/types.ts:81](https://github.com/cognitedata/reveal/blob/2acd9d17229d2bc8e309653b4d6a39ad941e44f1/viewer/packages/tools/src/AxisView/types.ts#L81)


<!-- SOURCE_END: reveal/documentation\versioned_docs\version-4.x\api\@cognite\reveal\tools\type-aliases\AxisBoxCompassConfig.md -->

================================================================================


<!-- SOURCE_START: reveal/documentation\versioned_docs\version-4.x\api\@cognite\reveal\tools\type-aliases\AxisBoxConfig.md -->
## File: reveal/documentation\versioned_docs\version-4.x\api\@cognite\reveal\tools\type-aliases\AxisBoxConfig.md

# Type Alias: AxisBoxConfig

> **AxisBoxConfig**: `object`

Configuration of [AxisViewTool](../classes/AxisViewTool.md).

## Type declaration

### animationSpeed?

> `optional` **animationSpeed**: `number`

How long the camera animation lasts when
clicking a face of the orientation box.

### compass?

> `optional` **compass**: [`AxisBoxCompassConfig`](AxisBoxCompassConfig.md)

Configuration of the compass "base" of the tool.

### faces?

> `optional` **faces**: `object`

Configuration for each of the faces of the orientation box.
Note that Reveal uses a right-handed Y up coordinate system,
which might differ from the original model space. To account
for this, you might want to reassign labels of the faces.

### faces.xNegativeFace?

> `optional` **xNegativeFace**: [`AxisBoxFaceConfig`](AxisBoxFaceConfig.md)

### faces.xPositiveFace?

> `optional` **xPositiveFace**: [`AxisBoxFaceConfig`](AxisBoxFaceConfig.md)

### faces.yNegativeFace?

> `optional` **yNegativeFace**: [`AxisBoxFaceConfig`](AxisBoxFaceConfig.md)

### faces.yPositiveFace?

> `optional` **yPositiveFace**: [`AxisBoxFaceConfig`](AxisBoxFaceConfig.md)

### faces.zNegativeFace?

> `optional` **zNegativeFace**: [`AxisBoxFaceConfig`](AxisBoxFaceConfig.md)

### faces.zPositiveFace?

> `optional` **zPositiveFace**: [`AxisBoxFaceConfig`](AxisBoxFaceConfig.md)

### position?

> `optional` **position**: [`AbsolutePosition`](AbsolutePosition.md) \| [`RelativePosition`](RelativePosition.md)

Position, either absolute or relative.

### size?

> `optional` **size**: `number`

Size in pixels of the axis tool.

## Defined in

[packages/tools/src/AxisView/types.ts:12](https://github.com/cognitedata/reveal/blob/2acd9d17229d2bc8e309653b4d6a39ad941e44f1/viewer/packages/tools/src/AxisView/types.ts#L12)


<!-- SOURCE_END: reveal/documentation\versioned_docs\version-4.x\api\@cognite\reveal\tools\type-aliases\AxisBoxConfig.md -->

================================================================================


<!-- SOURCE_START: reveal/documentation\versioned_docs\version-4.x\api\@cognite\reveal\tools\type-aliases\AxisBoxFaceConfig.md -->
## File: reveal/documentation\versioned_docs\version-4.x\api\@cognite\reveal\tools\type-aliases\AxisBoxFaceConfig.md

# Type Alias: AxisBoxFaceConfig

> **AxisBoxFaceConfig**: `object`

Configuration of each face of the orientation box.

## Type declaration

### faceColor?

> `optional` **faceColor**: `THREE.Color`

### fontColor?

> `optional` **fontColor**: `THREE.Color`

### fontSize?

> `optional` **fontSize**: `number`

### label?

> `optional` **label**: `string`

Label of the respective face, e.g. 'X' or 'Right'.

### outlineColor?

> `optional` **outlineColor**: `THREE.Color`

### outlineSize?

> `optional` **outlineSize**: `number`

## Defined in

[packages/tools/src/AxisView/types.ts:66](https://github.com/cognitedata/reveal/blob/2acd9d17229d2bc8e309653b4d6a39ad941e44f1/viewer/packages/tools/src/AxisView/types.ts#L66)


<!-- SOURCE_END: reveal/documentation\versioned_docs\version-4.x\api\@cognite\reveal\tools\type-aliases\AxisBoxFaceConfig.md -->

================================================================================


<!-- SOURCE_START: reveal/documentation\versioned_docs\version-4.x\api\@cognite\reveal\tools\type-aliases\DistanceToLabelDelegate.md -->
## File: reveal/documentation\versioned_docs\version-4.x\api\@cognite\reveal\tools\type-aliases\DistanceToLabelDelegate.md

# Type Alias: DistanceToLabelDelegate()

> **DistanceToLabelDelegate**: (`distanceInMeters`) => `string`

Custom callback for users to change measurement label content.

## Parameters

 **distanceInMeters**: `number`

## Returns

`string`

## Defined in

[packages/tools/src/Measurement/types.ts:17](https://github.com/cognitedata/reveal/blob/2acd9d17229d2bc8e309653b4d6a39ad941e44f1/viewer/packages/tools/src/Measurement/types.ts#L17)


<!-- SOURCE_END: reveal/documentation\versioned_docs\version-4.x\api\@cognite\reveal\tools\type-aliases\DistanceToLabelDelegate.md -->

================================================================================


<!-- SOURCE_START: reveal/documentation\versioned_docs\version-4.x\api\@cognite\reveal\tools\type-aliases\HtmlOverlayCreateClusterDelegate.md -->
## File: reveal/documentation\versioned_docs\version-4.x\api\@cognite\reveal\tools\type-aliases\HtmlOverlayCreateClusterDelegate.md

# Type Alias: HtmlOverlayCreateClusterDelegate()

> **HtmlOverlayCreateClusterDelegate**: (`overlayElements`) => `HTMLElement`

Callback that is triggered when a set of overlays are clustered together in
[HtmlOverlayTool](../classes/HtmlOverlayTool.md).

## Parameters

 **overlayElements**: `object`[]

## Returns

`HTMLElement`

## Defined in

[packages/tools/src/HtmlOverlay/HtmlOverlayTool.ts:32](https://github.com/cognitedata/reveal/blob/2acd9d17229d2bc8e309653b4d6a39ad941e44f1/viewer/packages/tools/src/HtmlOverlay/HtmlOverlayTool.ts#L32)


<!-- SOURCE_END: reveal/documentation\versioned_docs\version-4.x\api\@cognite\reveal\tools\type-aliases\HtmlOverlayCreateClusterDelegate.md -->

================================================================================


<!-- SOURCE_START: reveal/documentation\versioned_docs\version-4.x\api\@cognite\reveal\tools\type-aliases\HtmlOverlayOptions.md -->
## File: reveal/documentation\versioned_docs\version-4.x\api\@cognite\reveal\tools\type-aliases\HtmlOverlayOptions.md

# Type Alias: HtmlOverlayOptions

> **HtmlOverlayOptions**: `object`

Options for an overlay added using [HtmlOverlayTool.add](../classes/HtmlOverlayTool.md#add).

## Type declaration

### positionUpdatedCallback?

> `optional` **positionUpdatedCallback**: [`HtmlOverlayPositionUpdatedDelegate`](HtmlOverlayPositionUpdatedDelegate.md)

Callback that is triggered whenever the position of the overlay is updated. Optional.

### userData?

> `optional` **userData**: `any`

Optional user specified data that is provided to the [HtmlOverlayCreateClusterDelegate](HtmlOverlayCreateClusterDelegate.md) and
[HtmlOverlayPositionUpdatedDelegate](HtmlOverlayPositionUpdatedDelegate.md).

## Defined in

[packages/tools/src/HtmlOverlay/HtmlOverlayTool.ts:42](https://github.com/cognitedata/reveal/blob/2acd9d17229d2bc8e309653b4d6a39ad941e44f1/viewer/packages/tools/src/HtmlOverlay/HtmlOverlayTool.ts#L42)


<!-- SOURCE_END: reveal/documentation\versioned_docs\version-4.x\api\@cognite\reveal\tools\type-aliases\HtmlOverlayOptions.md -->

================================================================================


<!-- SOURCE_START: reveal/documentation\versioned_docs\version-4.x\api\@cognite\reveal\tools\type-aliases\HtmlOverlayPositionUpdatedDelegate.md -->
## File: reveal/documentation\versioned_docs\version-4.x\api\@cognite\reveal\tools\type-aliases\HtmlOverlayPositionUpdatedDelegate.md

# Type Alias: HtmlOverlayPositionUpdatedDelegate()

> **HtmlOverlayPositionUpdatedDelegate**: (`element`, `position2D`, `position3D`, `distanceToCamera`, `userData`) => `void`

Callback that is triggered whenever the 2D position of an overlay is updated
in [HtmlOverlayTool](../classes/HtmlOverlayTool.md).

## Parameters

 **element**: `HTMLElement`

 **position2D**: `THREE.Vector2`

 **position3D**: `THREE.Vector3`

 **distanceToCamera**: `number`

 **userData**: `any`

## Returns

`void`

## Defined in

[packages/tools/src/HtmlOverlay/HtmlOverlayTool.ts:20](https://github.com/cognitedata/reveal/blob/2acd9d17229d2bc8e309653b4d6a39ad941e44f1/viewer/packages/tools/src/HtmlOverlay/HtmlOverlayTool.ts#L20)


<!-- SOURCE_END: reveal/documentation\versioned_docs\version-4.x\api\@cognite\reveal\tools\type-aliases\HtmlOverlayPositionUpdatedDelegate.md -->

================================================================================


<!-- SOURCE_START: reveal/documentation\versioned_docs\version-4.x\api\@cognite\reveal\tools\type-aliases\HtmlOverlayToolClusteringOptions.md -->
## File: reveal/documentation\versioned_docs\version-4.x\api\@cognite\reveal\tools\type-aliases\HtmlOverlayToolClusteringOptions.md

# Type Alias: HtmlOverlayToolClusteringOptions

> **HtmlOverlayToolClusteringOptions**: `object`

Controls how close overlay elements are clustered together.

## Type declaration

### createClusterElementCallback

> **createClusterElementCallback**: [`HtmlOverlayCreateClusterDelegate`](HtmlOverlayCreateClusterDelegate.md)

Callback that is triggered when a set of overlays are clustered together
to create a "composite" element as a placeholder for the clustered elements.
Note that this callback will be triggered every frame for each cluster so it
must be performant.

### mode

> **mode**: `"overlapInScreenSpace"`

Currently only 'overlapInScreenSpace' is supported. In this mode,
overlays are clustered together into a single element as defined by
the HtmlOverlayToolClusteringOptions.createClusterElementCallback and hidden when they overlap
in screen space. The composite element is placed at the midpoint of
all clustered elements.

Clustered elements are faded in/out using CSS styling `transition`,
`opacity` and `visibility`.

## Defined in

[packages/tools/src/HtmlOverlay/HtmlOverlayTool.ts:57](https://github.com/cognitedata/reveal/blob/2acd9d17229d2bc8e309653b4d6a39ad941e44f1/viewer/packages/tools/src/HtmlOverlay/HtmlOverlayTool.ts#L57)


<!-- SOURCE_END: reveal/documentation\versioned_docs\version-4.x\api\@cognite\reveal\tools\type-aliases\HtmlOverlayToolClusteringOptions.md -->

================================================================================


<!-- SOURCE_START: reveal/documentation\versioned_docs\version-4.x\api\@cognite\reveal\tools\type-aliases\HtmlOverlayToolOptions.md -->
## File: reveal/documentation\versioned_docs\version-4.x\api\@cognite\reveal\tools\type-aliases\HtmlOverlayToolOptions.md

# Type Alias: HtmlOverlayToolOptions

> **HtmlOverlayToolOptions**: `object`

Options for the visualization of overlays

## Type declaration

### clusteringOptions?

> `optional` **clusteringOptions**: [`HtmlOverlayToolClusteringOptions`](HtmlOverlayToolClusteringOptions.md)

Options for clustering the HTML overlays

## Defined in

[packages/tools/src/HtmlOverlay/HtmlOverlayTool.ts:82](https://github.com/cognitedata/reveal/blob/2acd9d17229d2bc8e309653b4d6a39ad941e44f1/viewer/packages/tools/src/HtmlOverlay/HtmlOverlayTool.ts#L82)


<!-- SOURCE_END: reveal/documentation\versioned_docs\version-4.x\api\@cognite\reveal\tools\type-aliases\HtmlOverlayToolOptions.md -->

================================================================================


<!-- SOURCE_START: reveal/documentation\versioned_docs\version-4.x\api\@cognite\reveal\tools\type-aliases\Measurement.md -->
## File: reveal/documentation\versioned_docs\version-4.x\api\@cognite\reveal\tools\type-aliases\Measurement.md

# Type Alias: Measurement

> **Measurement**: `object`

## Type declaration

### distanceInMeters

> `readonly` **distanceInMeters**: `number`

### endPoint

> `readonly` **endPoint**: `Vector3`

### measurementId

> `readonly` **measurementId**: `number`

### startPoint

> `readonly` **startPoint**: `Vector3`

## Defined in

[packages/tools/src/Measurement/types.ts:7](https://github.com/cognitedata/reveal/blob/2acd9d17229d2bc8e309653b4d6a39ad941e44f1/viewer/packages/tools/src/Measurement/types.ts#L7)


<!-- SOURCE_END: reveal/documentation\versioned_docs\version-4.x\api\@cognite\reveal\tools\type-aliases\Measurement.md -->

================================================================================


<!-- SOURCE_START: reveal/documentation\versioned_docs\version-4.x\api\@cognite\reveal\tools\type-aliases\MeasurementAddedDelegate.md -->
## File: reveal/documentation\versioned_docs\version-4.x\api\@cognite\reveal\tools\type-aliases\MeasurementAddedDelegate.md

# Type Alias: MeasurementAddedDelegate()

> **MeasurementAddedDelegate**: (`measurement`) => `void`

Delegate for measurement added events.

## Parameters

 **measurement**: [`Measurement`](Measurement.md)

## Returns

`void`

## Defined in

[packages/tools/src/Measurement/types.ts:22](https://github.com/cognitedata/reveal/blob/2acd9d17229d2bc8e309653b4d6a39ad941e44f1/viewer/packages/tools/src/Measurement/types.ts#L22)


<!-- SOURCE_END: reveal/documentation\versioned_docs\version-4.x\api\@cognite\reveal\tools\type-aliases\MeasurementAddedDelegate.md -->

================================================================================


<!-- SOURCE_START: reveal/documentation\versioned_docs\version-4.x\api\@cognite\reveal\tools\type-aliases\MeasurementEndedDelegate.md -->
## File: reveal/documentation\versioned_docs\version-4.x\api\@cognite\reveal\tools\type-aliases\MeasurementEndedDelegate.md

# Type Alias: MeasurementEndedDelegate()

> **MeasurementEndedDelegate**: () => `void`

Delegate for measurement ended events.

## Returns

`void`

## Defined in

[packages/tools/src/Measurement/types.ts:32](https://github.com/cognitedata/reveal/blob/2acd9d17229d2bc8e309653b4d6a39ad941e44f1/viewer/packages/tools/src/Measurement/types.ts#L32)


<!-- SOURCE_END: reveal/documentation\versioned_docs\version-4.x\api\@cognite\reveal\tools\type-aliases\MeasurementEndedDelegate.md -->

================================================================================


<!-- SOURCE_START: reveal/documentation\versioned_docs\version-4.x\api\@cognite\reveal\tools\type-aliases\MeasurementOptions.md -->
## File: reveal/documentation\versioned_docs\version-4.x\api\@cognite\reveal\tools\type-aliases\MeasurementOptions.md

# Type Alias: MeasurementOptions

> **MeasurementOptions**: `object`

Measurement tool option with user custom callback, line width & color.

## Type declaration

### color?

> `optional` **color**: `Color`

Line color in 32 bit hex.

### distanceToLabelCallback?

> `optional` **distanceToLabelCallback**: [`DistanceToLabelDelegate`](DistanceToLabelDelegate.md)

### lineWidth?

> `optional` **lineWidth**: `number`

Line width in cm. Note that the minium drawn line will be ~2 pixels.

## Defined in

[packages/tools/src/Measurement/types.ts:37](https://github.com/cognitedata/reveal/blob/2acd9d17229d2bc8e309653b4d6a39ad941e44f1/viewer/packages/tools/src/Measurement/types.ts#L37)


<!-- SOURCE_END: reveal/documentation\versioned_docs\version-4.x\api\@cognite\reveal\tools\type-aliases\MeasurementOptions.md -->

================================================================================


<!-- SOURCE_START: reveal/documentation\versioned_docs\version-4.x\api\@cognite\reveal\tools\type-aliases\MeasurementStartedDelegate.md -->
## File: reveal/documentation\versioned_docs\version-4.x\api\@cognite\reveal\tools\type-aliases\MeasurementStartedDelegate.md

# Type Alias: MeasurementStartedDelegate()

> **MeasurementStartedDelegate**: () => `void`

Delegate for measurement started events.

## Returns

`void`

## Defined in

[packages/tools/src/Measurement/types.ts:27](https://github.com/cognitedata/reveal/blob/2acd9d17229d2bc8e309653b4d6a39ad941e44f1/viewer/packages/tools/src/Measurement/types.ts#L27)


<!-- SOURCE_END: reveal/documentation\versioned_docs\version-4.x\api\@cognite\reveal\tools\type-aliases\MeasurementStartedDelegate.md -->

================================================================================


<!-- SOURCE_START: reveal/documentation\versioned_docs\version-4.x\api\@cognite\reveal\tools\type-aliases\Overlay3DToolParameters.md -->
## File: reveal/documentation\versioned_docs\version-4.x\api\@cognite\reveal\tools\type-aliases\Overlay3DToolParameters.md

# Type Alias: Overlay3DToolParameters

> **Overlay3DToolParameters**: `object`

Parameters for instantiating the Overlay3DTool

## Type declaration

### defaultOverlayColor

> **defaultOverlayColor**: `THREE.Color`

Sets default overlay color for newly added labels.

### maxPointSize?

> `optional` **maxPointSize**: `number`

Max point markers size in pixels. Different platforms has limitations for this value.
On Android and MacOS in Chrome maximum is 64. Windows in Chrome and MacOS Safari desktops can support up to 500.
Default is 64.

## Defined in

[packages/tools/src/Overlay3D/Overlay3DTool.ts:41](https://github.com/cognitedata/reveal/blob/2acd9d17229d2bc8e309653b4d6a39ad941e44f1/viewer/packages/tools/src/Overlay3D/Overlay3DTool.ts#L41)


<!-- SOURCE_END: reveal/documentation\versioned_docs\version-4.x\api\@cognite\reveal\tools\type-aliases\Overlay3DToolParameters.md -->

================================================================================


<!-- SOURCE_START: reveal/documentation\versioned_docs\version-4.x\api\@cognite\reveal\tools\type-aliases\OverlayCollectionOptions.md -->
## File: reveal/documentation\versioned_docs\version-4.x\api\@cognite\reveal\tools\type-aliases\OverlayCollectionOptions.md

# Type Alias: OverlayCollectionOptions

> **OverlayCollectionOptions**: `object`

Parameters for instantiating the OverlayCollection.

## Type declaration

### defaultOverlayColor?

> `optional` **defaultOverlayColor**: `THREE.Color`

Sets default overlay color for newly added overlays.
Default is yellow.

### overlayTexture?

> `optional` **overlayTexture**: `THREE.Texture`

Sets default texture for all overlays of this OverlayCollection.
Must be a square texture, recommended size is at least `maxPointSize` for
not pixelated overlays.

### overlayTextureMask?

> `optional` **overlayTextureMask**: `THREE.Texture`

Sets default mask for all overlays of this OverlayCollection,
denoting where overlay color should be placed compared to texture color.
Must be a square texture with the same size as `overlayTexture`.
Texture should be monochrome. Internally, R channel is used for
denoting pixels that should be colored by texture and not by overlay color.

## Defined in

[packages/tools/src/Overlay3D/Overlay3DTool.ts:57](https://github.com/cognitedata/reveal/blob/2acd9d17229d2bc8e309653b4d6a39ad941e44f1/viewer/packages/tools/src/Overlay3D/Overlay3DTool.ts#L57)


<!-- SOURCE_END: reveal/documentation\versioned_docs\version-4.x\api\@cognite\reveal\tools\type-aliases\OverlayCollectionOptions.md -->

================================================================================


<!-- SOURCE_START: reveal/documentation\versioned_docs\version-4.x\api\@cognite\reveal\tools\type-aliases\OverlayEventHandler.md -->
## File: reveal/documentation\versioned_docs\version-4.x\api\@cognite\reveal\tools\type-aliases\OverlayEventHandler.md

# Type Alias: OverlayEventHandler()\<ContentType\>

> **OverlayEventHandler**\<`ContentType`\>: (`event`) => `void`

Type for handlers of overlay events

## Type Parameters

 **ContentType**

## Parameters

 **event**

 **event.htmlTextOverlay**: `HTMLElement`

 **event.mousePosition**

 **event.mousePosition.offsetX**: `number`

 **event.mousePosition.offsetY**: `number`

 **event.targetOverlay**: [`Overlay3D`](../../interfaces/Overlay3D.md)\<`ContentType`\>

## Returns

`void`

## Defined in

[packages/tools/src/Overlay3D/Overlay3DTool.ts:32](https://github.com/cognitedata/reveal/blob/2acd9d17229d2bc8e309653b4d6a39ad941e44f1/viewer/packages/tools/src/Overlay3D/Overlay3DTool.ts#L32)


<!-- SOURCE_END: reveal/documentation\versioned_docs\version-4.x\api\@cognite\reveal\tools\type-aliases\OverlayEventHandler.md -->

================================================================================


<!-- SOURCE_START: reveal/documentation\versioned_docs\version-4.x\api\@cognite\reveal\tools\type-aliases\OverlayToolEvent.md -->
## File: reveal/documentation\versioned_docs\version-4.x\api\@cognite\reveal\tools\type-aliases\OverlayToolEvent.md

# Type Alias: OverlayToolEvent

> **OverlayToolEvent**: `"hover"` \| `"click"` \| `"disposed"`

Events related to overlays

## Defined in

[packages/tools/src/Overlay3D/Overlay3DTool.ts:27](https://github.com/cognitedata/reveal/blob/2acd9d17229d2bc8e309653b4d6a39ad941e44f1/viewer/packages/tools/src/Overlay3D/Overlay3DTool.ts#L27)


<!-- SOURCE_END: reveal/documentation\versioned_docs\version-4.x\api\@cognite\reveal\tools\type-aliases\OverlayToolEvent.md -->

================================================================================


<!-- SOURCE_START: reveal/documentation\versioned_docs\version-4.x\api\@cognite\reveal\tools\type-aliases\RelativePosition.md -->
## File: reveal/documentation\versioned_docs\version-4.x\api\@cognite\reveal\tools\type-aliases\RelativePosition.md

# Type Alias: RelativePosition

> **RelativePosition**: `object`

Relative position from a corner of the viewer
and a given padding.

## Type declaration

### corner

> **corner**: [`Corner`](../enumerations/Corner.md)

### padding

> **padding**: `THREE.Vector2`

## Defined in

[packages/tools/src/AxisView/types.ts:58](https://github.com/cognitedata/reveal/blob/2acd9d17229d2bc8e309653b4d6a39ad941e44f1/viewer/packages/tools/src/AxisView/types.ts#L58)


<!-- SOURCE_END: reveal/documentation\versioned_docs\version-4.x\api\@cognite\reveal\tools\type-aliases\RelativePosition.md -->

================================================================================


<!-- SOURCE_START: reveal/documentation\versioned_docs\version-4.x\api\@cognite\reveal\tools\type-aliases\TimelineDateUpdateDelegate.md -->
## File: reveal/documentation\versioned_docs\version-4.x\api\@cognite\reveal\tools\type-aliases\TimelineDateUpdateDelegate.md

# Type Alias: TimelineDateUpdateDelegate()

> **TimelineDateUpdateDelegate**: (`event`) => `void`

Delegate for Timeline Date update

## Parameters

 **event**

 **event.activeKeyframe**: [`Keyframe`](../classes/Keyframe.md) \| `undefined`

 **event.date**: `Date`

 **event.endDate**: `Date`

 **event.startDate**: `Date`

## Returns

`void`

## Defined in

[packages/tools/src/Timeline/types.ts:8](https://github.com/cognitedata/reveal/blob/2acd9d17229d2bc8e309653b4d6a39ad941e44f1/viewer/packages/tools/src/Timeline/types.ts#L8)


<!-- SOURCE_END: reveal/documentation\versioned_docs\version-4.x\api\@cognite\reveal\tools\type-aliases\TimelineDateUpdateDelegate.md -->

================================================================================


<!-- SOURCE_START: reveal/documentation\versioned_docs\version-4.x\api\@cognite\reveal\type-aliases\AddImage360Options.md -->
## File: reveal/documentation\versioned_docs\version-4.x\api\@cognite\reveal\type-aliases\AddImage360Options.md

# Type Alias: AddImage360Options

> **AddImage360Options**: `object`

## Type declaration

### annotationFilter?

> `optional` **annotationFilter**: [`Image360AnnotationFilterOptions`](Image360AnnotationFilterOptions.md)

Annotation options.

### collectionTransform?

> `optional` **collectionTransform**: `Matrix4`

An optional transformation which will be applied to all 360 images that are fetched.

### preMultipliedRotation?

> `optional` **preMultipliedRotation**: `boolean`

Set this to false if the 360 images' rotation is not pre-multiplied to fit the given model.

#### Default

```ts
true
```

## Defined in

[packages/api/src/public/migration/types.ts:218](https://github.com/cognitedata/reveal/blob/2acd9d17229d2bc8e309653b4d6a39ad941e44f1/viewer/packages/api/src/public/migration/types.ts#L218)


<!-- SOURCE_END: reveal/documentation\versioned_docs\version-4.x\api\@cognite\reveal\type-aliases\AddImage360Options.md -->

================================================================================


<!-- SOURCE_START: reveal/documentation\versioned_docs\version-4.x\api\@cognite\reveal\type-aliases\AnyIntersection.md -->
## File: reveal/documentation\versioned_docs\version-4.x\api\@cognite\reveal\type-aliases\AnyIntersection.md

# Type Alias: AnyIntersection

> **AnyIntersection**: [`CadIntersection`](CadIntersection.md) \| [`PointCloudIntersection`](PointCloudIntersection.md) \| [`CustomObjectIntersection`](CustomObjectIntersection.md)

## Defined in

[packages/api/src/public/migration/types.ts:294](https://github.com/cognitedata/reveal/blob/2acd9d17229d2bc8e309653b4d6a39ad941e44f1/viewer/packages/api/src/public/migration/types.ts#L294)


<!-- SOURCE_END: reveal/documentation\versioned_docs\version-4.x\api\@cognite\reveal\type-aliases\AnyIntersection.md -->

================================================================================


<!-- SOURCE_START: reveal/documentation\versioned_docs\version-4.x\api\@cognite\reveal\type-aliases\AssetAnnotationImage360Info.md -->
## File: reveal/documentation\versioned_docs\version-4.x\api\@cognite\reveal\type-aliases\AssetAnnotationImage360Info.md

# Type Alias: AssetAnnotationImage360Info

> **AssetAnnotationImage360Info**: `object`

Asset search return type, including information about the image in which the asset is found

## Type declaration

### annotationInfo

> **annotationInfo**: [`ImageAssetLinkAnnotationInfo`](ImageAssetLinkAnnotationInfo.md)

Reference to the relevant asset

### imageEntity

> **imageEntity**: [`Image360`](../interfaces/Image360.md)

The image entity in which the asset was found

### imageRevision

> **imageRevision**: [`Image360Revision`](../interfaces/Image360Revision.md)

The image revision in which the asset was found

## Defined in

[packages/360-images/src/collection/Image360Collection.ts:28](https://github.com/cognitedata/reveal/blob/2acd9d17229d2bc8e309653b4d6a39ad941e44f1/viewer/packages/360-images/src/collection/Image360Collection.ts#L28)


<!-- SOURCE_END: reveal/documentation\versioned_docs\version-4.x\api\@cognite\reveal\type-aliases\AssetAnnotationImage360Info.md -->

================================================================================


<!-- SOURCE_START: reveal/documentation\versioned_docs\version-4.x\api\@cognite\reveal\type-aliases\BeforeSceneRenderedDelegate.md -->
## File: reveal/documentation\versioned_docs\version-4.x\api\@cognite\reveal\type-aliases\BeforeSceneRenderedDelegate.md

# Type Alias: BeforeSceneRenderedDelegate()

> **BeforeSceneRenderedDelegate**: (`event`) => `void`

Delegate for event triggered when scene is about to be rendered.

## Parameters

 **event**

 **event.camera**: `PerspectiveCamera`

 **event.frameNumber**: `number`

 **event.renderer**: `WebGLRenderer`

## Returns

`void`

## Defined in

[packages/utilities/src/events/types.ts:27](https://github.com/cognitedata/reveal/blob/2acd9d17229d2bc8e309653b4d6a39ad941e44f1/viewer/packages/utilities/src/events/types.ts#L27)


<!-- SOURCE_END: reveal/documentation\versioned_docs\version-4.x\api\@cognite\reveal\type-aliases\BeforeSceneRenderedDelegate.md -->

================================================================================


<!-- SOURCE_START: reveal/documentation\versioned_docs\version-4.x\api\@cognite\reveal\type-aliases\CadIntersection.md -->
## File: reveal/documentation\versioned_docs\version-4.x\api\@cognite\reveal\type-aliases\CadIntersection.md

# Type Alias: CadIntersection

> **CadIntersection**: `object`

## Type declaration

### distanceToCamera

> **distanceToCamera**: `number`

Distance from the camera to the intersection.

### model

> **model**: [`CogniteCadModel`](../classes/CogniteCadModel.md)

The model that was intersected.

### point

> **point**: `Vector3`

Coordinate of the intersection.

### treeIndex

> **treeIndex**: `number`

Tree index of the intersected 3D node.

### type

> **type**: `"cad"`

The intersection type.

## Defined in

[packages/api/src/public/migration/types.ts:234](https://github.com/cognitedata/reveal/blob/2acd9d17229d2bc8e309653b4d6a39ad941e44f1/viewer/packages/api/src/public/migration/types.ts#L234)


<!-- SOURCE_END: reveal/documentation\versioned_docs\version-4.x\api\@cognite\reveal\type-aliases\CadIntersection.md -->

================================================================================


<!-- SOURCE_START: reveal/documentation\versioned_docs\version-4.x\api\@cognite\reveal\type-aliases\CadModelBudget.md -->
## File: reveal/documentation\versioned_docs\version-4.x\api\@cognite\reveal\type-aliases\CadModelBudget.md

# Type Alias: CadModelBudget

> **CadModelBudget**: `object`

Represents a measurement of how much geometry can be loaded.

## Type declaration

### ~~highDetailProximityThreshold~~

> `readonly` **highDetailProximityThreshold**: `number`

Sectors within this distance from the camera will always be loaded in high details.

#### Deprecated

This is only used for 3D models processed prior to the Reveal 3.0 release (Q1 2022).

### maximumRenderCost

> `readonly` **maximumRenderCost**: `number`

Maximum render cost. This number can be thought of as triangle count, although the number
doesn't match this directly.

## Defined in

[packages/cad-geometry-loaders/src/CadModelBudget.ts:10](https://github.com/cognitedata/reveal/blob/2acd9d17229d2bc8e309653b4d6a39ad941e44f1/viewer/packages/cad-geometry-loaders/src/CadModelBudget.ts#L10)


<!-- SOURCE_END: reveal/documentation\versioned_docs\version-4.x\api\@cognite\reveal\type-aliases\CadModelBudget.md -->

================================================================================


<!-- SOURCE_START: reveal/documentation\versioned_docs\version-4.x\api\@cognite\reveal\type-aliases\CameraChangeDelegate.md -->
## File: reveal/documentation\versioned_docs\version-4.x\api\@cognite\reveal\type-aliases\CameraChangeDelegate.md

# Type Alias: CameraChangeDelegate()

> **CameraChangeDelegate**: (`position`, `target`) => `void`

## Parameters

 **position**: `Vector3`

 **target**: `Vector3`

## Returns

`void`

## Defined in

[packages/camera-manager/src/types.ts:62](https://github.com/cognitedata/reveal/blob/2acd9d17229d2bc8e309653b4d6a39ad941e44f1/viewer/packages/camera-manager/src/types.ts#L62)


<!-- SOURCE_END: reveal/documentation\versioned_docs\version-4.x\api\@cognite\reveal\type-aliases\CameraChangeDelegate.md -->

================================================================================


<!-- SOURCE_START: reveal/documentation\versioned_docs\version-4.x\api\@cognite\reveal\type-aliases\CameraConfiguration.md -->
## File: reveal/documentation\versioned_docs\version-4.x\api\@cognite\reveal\type-aliases\CameraConfiguration.md

# Type Alias: CameraConfiguration

> **CameraConfiguration**: `object`

Represents a camera configuration, consisting of a camera position and target.

## Type declaration

### position

> `readonly` **position**: `Vector3`

### target

> `readonly` **target**: `Vector3`

## Defined in

[packages/utilities/src/CameraConfiguration.ts:10](https://github.com/cognitedata/reveal/blob/2acd9d17229d2bc8e309653b4d6a39ad941e44f1/viewer/packages/utilities/src/CameraConfiguration.ts#L10)


<!-- SOURCE_END: reveal/documentation\versioned_docs\version-4.x\api\@cognite\reveal\type-aliases\CameraConfiguration.md -->

================================================================================


<!-- SOURCE_START: reveal/documentation\versioned_docs\version-4.x\api\@cognite\reveal\type-aliases\CameraControlsOptions.md -->
## File: reveal/documentation\versioned_docs\version-4.x\api\@cognite\reveal\type-aliases\CameraControlsOptions.md

# Type Alias: CameraControlsOptions

> **CameraControlsOptions**: `object`

## Type declaration

### changeCameraPositionOnDoubleClick?

> `optional` **changeCameraPositionOnDoubleClick**: `boolean`

Enables or disables change of camera position on mouse double click. New target is then set to the point of the model under current cursor
position and the a camera position is set half way to this point

Default is false.

### changeCameraTargetOnClick?

> `optional` **changeCameraTargetOnClick**: `boolean`

Enables or disables change of camera target on mouse click. New target is then set to the point of the model under current cursor position.

Default is false.

### mouseWheelAction?

> `optional` **mouseWheelAction**: `"zoomToTarget"` \| `"zoomPastCursor"` \| `"zoomToCursor"`

Sets mouse wheel initiated action.

Modes:

'zoomToTarget' - zooms just to the current target (center of the screen) of the camera.

'zoomPastCursor' - zooms in the direction of the ray coming from camera through cursor screen position, allows going through objects.

'zoomToCursor' - mouse wheel scroll zooms towards the point on the model where cursor is hovering over, doesn't allow going through objects.

Default is 'zoomPastCursor'.

## Defined in

[packages/camera-manager/src/CameraControlsOptions.ts:5](https://github.com/cognitedata/reveal/blob/2acd9d17229d2bc8e309653b4d6a39ad941e44f1/viewer/packages/camera-manager/src/CameraControlsOptions.ts#L5)


<!-- SOURCE_END: reveal/documentation\versioned_docs\version-4.x\api\@cognite\reveal\type-aliases\CameraControlsOptions.md -->

================================================================================


<!-- SOURCE_START: reveal/documentation\versioned_docs\version-4.x\api\@cognite\reveal\type-aliases\CameraEventDelegate.md -->
## File: reveal/documentation\versioned_docs\version-4.x\api\@cognite\reveal\type-aliases\CameraEventDelegate.md

# Type Alias: CameraEventDelegate

> **CameraEventDelegate**: [`CameraChangeDelegate`](CameraChangeDelegate.md) \| [`CameraStopDelegate`](CameraStopDelegate.md)

Union type of all camera event delegates

## Defined in

[packages/camera-manager/src/types.ts:73](https://github.com/cognitedata/reveal/blob/2acd9d17229d2bc8e309653b4d6a39ad941e44f1/viewer/packages/camera-manager/src/types.ts#L73)


<!-- SOURCE_END: reveal/documentation\versioned_docs\version-4.x\api\@cognite\reveal\type-aliases\CameraEventDelegate.md -->

================================================================================


<!-- SOURCE_START: reveal/documentation\versioned_docs\version-4.x\api\@cognite\reveal\type-aliases\CameraManagerEventType.md -->
## File: reveal/documentation\versioned_docs\version-4.x\api\@cognite\reveal\type-aliases\CameraManagerEventType.md

# Type Alias: CameraManagerEventType

> **CameraManagerEventType**: *typeof* [`CAMERA_MANAGER_EVENT_TYPE_LIST`](../variables/CAMERA_MANAGER_EVENT_TYPE_LIST.md)\[`number`\]

Union type of the supported camera manager event types

## Defined in

[packages/camera-manager/src/types.ts:108](https://github.com/cognitedata/reveal/blob/2acd9d17229d2bc8e309653b4d6a39ad941e44f1/viewer/packages/camera-manager/src/types.ts#L108)


<!-- SOURCE_END: reveal/documentation\versioned_docs\version-4.x\api\@cognite\reveal\type-aliases\CameraManagerEventType.md -->

================================================================================


<!-- SOURCE_START: reveal/documentation\versioned_docs\version-4.x\api\@cognite\reveal\type-aliases\CameraState.md -->
## File: reveal/documentation\versioned_docs\version-4.x\api\@cognite\reveal\type-aliases\CameraState.md

# Type Alias: CameraState

> **CameraState**: `object`

## Type declaration

### position?

> `optional` **position**: `Vector3`

Camera position in world space.

### rotation?

> `optional` **rotation**: `Quaternion`

Camera local rotation in quaternion form.

### target?

> `optional` **target**: `Vector3`

Camera target in world space.
*

## Defined in

[packages/camera-manager/src/types.ts:43](https://github.com/cognitedata/reveal/blob/2acd9d17229d2bc8e309653b4d6a39ad941e44f1/viewer/packages/camera-manager/src/types.ts#L43)


<!-- SOURCE_END: reveal/documentation\versioned_docs\version-4.x\api\@cognite\reveal\type-aliases\CameraState.md -->

================================================================================


<!-- SOURCE_START: reveal/documentation\versioned_docs\version-4.x\api\@cognite\reveal\type-aliases\CameraStopDelegate.md -->
## File: reveal/documentation\versioned_docs\version-4.x\api\@cognite\reveal\type-aliases\CameraStopDelegate.md

# Type Alias: CameraStopDelegate()

> **CameraStopDelegate**: () => `void`

## Returns

`void`

## Defined in

[packages/camera-manager/src/types.ts:68](https://github.com/cognitedata/reveal/blob/2acd9d17229d2bc8e309653b4d6a39ad941e44f1/viewer/packages/camera-manager/src/types.ts#L68)


<!-- SOURCE_END: reveal/documentation\versioned_docs\version-4.x\api\@cognite\reveal\type-aliases\CameraStopDelegate.md -->

================================================================================


<!-- SOURCE_START: reveal/documentation\versioned_docs\version-4.x\api\@cognite\reveal\type-aliases\ClippingPlanesState.md -->
## File: reveal/documentation\versioned_docs\version-4.x\api\@cognite\reveal\type-aliases\ClippingPlanesState.md

# Type Alias: ClippingPlanesState

> **ClippingPlanesState**: `object`

## Type declaration

### constant

> **constant**: `number`

### nx

> **nx**: `number`

### ny

> **ny**: `number`

### nz

> **nz**: `number`

## Defined in

[packages/api/src/utilities/ViewStateHelper.ts:28](https://github.com/cognitedata/reveal/blob/2acd9d17229d2bc8e309653b4d6a39ad941e44f1/viewer/packages/api/src/utilities/ViewStateHelper.ts#L28)


<!-- SOURCE_END: reveal/documentation\versioned_docs\version-4.x\api\@cognite\reveal\type-aliases\ClippingPlanesState.md -->

================================================================================


<!-- SOURCE_START: reveal/documentation\versioned_docs\version-4.x\api\@cognite\reveal\type-aliases\CogniteModel.md -->
## File: reveal/documentation\versioned_docs\version-4.x\api\@cognite\reveal\type-aliases\CogniteModel.md

# Type Alias: CogniteModel

> **CogniteModel**: [`CogniteCadModel`](../classes/CogniteCadModel.md) \| [`CognitePointCloudModel`](../classes/CognitePointCloudModel.md)

Type abstraction for CogniteCadModel or CognitePointCloudModel;.

## Defined in

[packages/api/src/public/types.ts:12](https://github.com/cognitedata/reveal/blob/2acd9d17229d2bc8e309653b4d6a39ad941e44f1/viewer/packages/api/src/public/types.ts#L12)


<!-- SOURCE_END: reveal/documentation\versioned_docs\version-4.x\api\@cognite\reveal\type-aliases\CogniteModel.md -->

================================================================================


<!-- SOURCE_START: reveal/documentation\versioned_docs\version-4.x\api\@cognite\reveal\type-aliases\ComboControlsEventType.md -->
## File: reveal/documentation\versioned_docs\version-4.x\api\@cognite\reveal\type-aliases\ComboControlsEventType.md

# Type Alias: ComboControlsEventType

> **ComboControlsEventType**: `object`

The event type for events emitted by [ComboControls](../classes/ComboControls.md).

## Type declaration

### cameraChange

> **cameraChange**: `object`

### cameraChange.camera

> **camera**: `object`

### cameraChange.camera.position

> **position**: `Vector3`

### cameraChange.camera.target

> **target**: `Vector3`

## Defined in

[packages/camera-manager/src/ComboControls.ts:31](https://github.com/cognitedata/reveal/blob/2acd9d17229d2bc8e309653b4d6a39ad941e44f1/viewer/packages/camera-manager/src/ComboControls.ts#L31)


<!-- SOURCE_END: reveal/documentation\versioned_docs\version-4.x\api\@cognite\reveal\type-aliases\ComboControlsEventType.md -->

================================================================================


<!-- SOURCE_START: reveal/documentation\versioned_docs\version-4.x\api\@cognite\reveal\type-aliases\ComboControlsOptions.md -->
## File: reveal/documentation\versioned_docs\version-4.x\api\@cognite\reveal\type-aliases\ComboControlsOptions.md

# Type Alias: ComboControlsOptions

> **ComboControlsOptions**: `object`

Exposed options for Combo Controls

## Type declaration

### EPSILON

> **EPSILON**: `number`

### dampingFactor

> **dampingFactor**: `number`

### dollyFactor

> **dollyFactor**: `number`

### dynamicTarget

> **dynamicTarget**: `boolean`

### enableDamping

> **enableDamping**: `boolean`

### enableKeyboardNavigation

> **enableKeyboardNavigation**: `boolean`

### firstPersonRotationFactor

> **firstPersonRotationFactor**: `number`

### keyboardDollySpeed

> **keyboardDollySpeed**: `number`

### keyboardPanSpeed

> **keyboardPanSpeed**: `number`

### keyboardRotationSpeedAzimuth

> **keyboardRotationSpeedAzimuth**: `number`

### keyboardRotationSpeedPolar

> **keyboardRotationSpeedPolar**: `number`

### keyboardSpeedFactor

> **keyboardSpeedFactor**: `number`

How much quicker keyboard navigation will be with 'shift' pressed

### lookAtViewTarget

> **lookAtViewTarget**: `boolean`

### maxAzimuthAngle

> **maxAzimuthAngle**: `number`

Radians

### maxDeltaDownscaleCoefficient

> **maxDeltaDownscaleCoefficient**: `number`

### maxDeltaRatio

> **maxDeltaRatio**: `number`

### maxPolarAngle

> **maxPolarAngle**: `number`

Radians

### maxZoom

> **maxZoom**: `number`

### minAzimuthAngle

> **minAzimuthAngle**: `number`

Radians

### minDeltaDownscaleCoefficient

> **minDeltaDownscaleCoefficient**: `number`

### minDeltaRatio

> **minDeltaRatio**: `number`

### minDistance

> **minDistance**: `number`

### minPolarAngle

> **minPolarAngle**: `number`

Radians

### minZoom

> **minZoom**: `number`

### minZoomDistance

> **minZoomDistance**: `number`

### mouseFirstPersonRotationSpeed

> **mouseFirstPersonRotationSpeed**: `number`

### orthographicCameraDollyFactor

> **orthographicCameraDollyFactor**: `number`

### panDollyMinDistanceFactor

> **panDollyMinDistanceFactor**: `number`

### pinchEpsilon

> **pinchEpsilon**: `number`

### pinchPanSpeed

> **pinchPanSpeed**: `number`

### pointerRotationSpeedAzimuth

> **pointerRotationSpeedAzimuth**: `number`

Radians per pixel

### pointerRotationSpeedPolar

> **pointerRotationSpeedPolar**: `number`

Radians per pixel

### useScrollTarget

> **useScrollTarget**: `boolean`

### zoomToCursor

> **zoomToCursor**: `boolean`

## Defined in

[packages/camera-manager/src/ComboControlsOptions.ts:8](https://github.com/cognitedata/reveal/blob/2acd9d17229d2bc8e309653b4d6a39ad941e44f1/viewer/packages/camera-manager/src/ComboControlsOptions.ts#L8)


<!-- SOURCE_END: reveal/documentation\versioned_docs\version-4.x\api\@cognite\reveal\type-aliases\ComboControlsOptions.md -->

================================================================================


<!-- SOURCE_START: reveal/documentation\versioned_docs\version-4.x\api\@cognite\reveal\type-aliases\CompletePointCloudAppearance.md -->
## File: reveal/documentation\versioned_docs\version-4.x\api\@cognite\reveal\type-aliases\CompletePointCloudAppearance.md

# Type Alias: CompletePointCloudAppearance

> **CompletePointCloudAppearance**: `Required` \<[`PointCloudAppearance`](PointCloudAppearance.md)\>

## Defined in

[packages/pointcloud-styling/src/PointCloudAppearance.ts:12](https://github.com/cognitedata/reveal/blob/2acd9d17229d2bc8e309653b4d6a39ad941e44f1/viewer/packages/pointcloud-styling/src/PointCloudAppearance.ts#L12)


<!-- SOURCE_END: reveal/documentation\versioned_docs\version-4.x\api\@cognite\reveal\type-aliases\CompletePointCloudAppearance.md -->

================================================================================


<!-- SOURCE_START: reveal/documentation\versioned_docs\version-4.x\api\@cognite\reveal\type-aliases\CustomObjectIntersection.md -->
## File: reveal/documentation\versioned_docs\version-4.x\api\@cognite\reveal\type-aliases\CustomObjectIntersection.md

# Type Alias: CustomObjectIntersection

> **CustomObjectIntersection**: `object`

**`Beta`**

This class is used as output intersecting custom objects

## Type declaration

### boundingBox?

> `optional` **boundingBox**: `Box3`

**`Beta`**

The bounding box of the part of the CustomObject that was intersected.

### customObject

> **customObject**: [`ICustomObject`](../interfaces/ICustomObject.md)

**`Beta`**

The CustomObject that was intersected.

### distanceToCamera

> **distanceToCamera**: `number`

**`Beta`**

Distance from the camera to the intersection.

### point

> **point**: `Vector3`

**`Beta`**

Coordinate of the intersection.

### type

> **type**: `"customObject"`

**`Beta`**

The intersection type.

### userData?

> `optional` **userData**: `any`

**`Beta`**

Additional info, for instance which part of the CustomObject was intersected.

## Defined in

[packages/utilities/src/customObject/CustomObjectIntersection.ts:12](https://github.com/cognitedata/reveal/blob/2acd9d17229d2bc8e309653b4d6a39ad941e44f1/viewer/packages/utilities/src/customObject/CustomObjectIntersection.ts#L12)


<!-- SOURCE_END: reveal/documentation\versioned_docs\version-4.x\api\@cognite\reveal\type-aliases\CustomObjectIntersection.md -->

================================================================================


<!-- SOURCE_START: reveal/documentation\versioned_docs\version-4.x\api\@cognite\reveal\type-aliases\DefaultOverlay3DContentType.md -->
## File: reveal/documentation\versioned_docs\version-4.x\api\@cognite\reveal\type-aliases\DefaultOverlay3DContentType.md

# Type Alias: DefaultOverlay3DContentType

> **DefaultOverlay3DContentType**: `object`

The default metadata type contained in Overlays

## Index Signature

 \[`key`: `string`\]: `string`

## Defined in

[packages/3d-overlays/src/OverlayCollection.ts:11](https://github.com/cognitedata/reveal/blob/2acd9d17229d2bc8e309653b4d6a39ad941e44f1/viewer/packages/3d-overlays/src/OverlayCollection.ts#L11)


<!-- SOURCE_END: reveal/documentation\versioned_docs\version-4.x\api\@cognite\reveal\type-aliases\DefaultOverlay3DContentType.md -->

================================================================================


<!-- SOURCE_START: reveal/documentation\versioned_docs\version-4.x\api\@cognite\reveal\type-aliases\DisposedDelegate.md -->
## File: reveal/documentation\versioned_docs\version-4.x\api\@cognite\reveal\type-aliases\DisposedDelegate.md

# Type Alias: DisposedDelegate()

> **DisposedDelegate**: () => `void`

## Returns

`void`

## Defined in

[packages/utilities/src/events/types.ts:22](https://github.com/cognitedata/reveal/blob/2acd9d17229d2bc8e309653b4d6a39ad941e44f1/viewer/packages/utilities/src/events/types.ts#L22)


<!-- SOURCE_END: reveal/documentation\versioned_docs\version-4.x\api\@cognite\reveal\type-aliases\DisposedDelegate.md -->

================================================================================


<!-- SOURCE_START: reveal/documentation\versioned_docs\version-4.x\api\@cognite\reveal\type-aliases\EdlOptions.md -->
## File: reveal/documentation\versioned_docs\version-4.x\api\@cognite\reveal\type-aliases\EdlOptions.md

# Type Alias: EdlOptions

> **EdlOptions**: `object`

Configuration parameters for Eye Dome Lighting (EDL) point cloud post-processing effect.

## Type declaration

### radius

> **radius**: `number`

Radius of sampled points in pixels. Determines thickness of edges addet on top of points.

### strength

> **strength**: `number`

Determines how pronounced the effect is. Lower values result in more transparent edges.

## Defined in

[packages/rendering/src/rendering/types.ts:22](https://github.com/cognitedata/reveal/blob/2acd9d17229d2bc8e309653b4d6a39ad941e44f1/viewer/packages/rendering/src/rendering/types.ts#L22)


<!-- SOURCE_END: reveal/documentation\versioned_docs\version-4.x\api\@cognite\reveal\type-aliases\EdlOptions.md -->

================================================================================


<!-- SOURCE_START: reveal/documentation\versioned_docs\version-4.x\api\@cognite\reveal\type-aliases\FlexibleControlsTypeChangeDelegate.md -->
## File: reveal/documentation\versioned_docs\version-4.x\api\@cognite\reveal\type-aliases\FlexibleControlsTypeChangeDelegate.md

# Type Alias: FlexibleControlsTypeChangeDelegate()

> **FlexibleControlsTypeChangeDelegate**: (`controlsType`) => `void`

## Parameters

 **controlsType**: [`FlexibleControlsType`](../enumerations/FlexibleControlsType.md)

## Returns

`void`

## Defined in

[packages/camera-manager/src/Flexible/IFlexibleCameraManager.ts:13](https://github.com/cognitedata/reveal/blob/2acd9d17229d2bc8e309653b4d6a39ad941e44f1/viewer/packages/camera-manager/src/Flexible/IFlexibleCameraManager.ts#L13)


<!-- SOURCE_END: reveal/documentation\versioned_docs\version-4.x\api\@cognite\reveal\type-aliases\FlexibleControlsTypeChangeDelegate.md -->

================================================================================


<!-- SOURCE_START: reveal/documentation\versioned_docs\version-4.x\api\@cognite\reveal\type-aliases\GeometryFilter.md -->
## File: reveal/documentation\versioned_docs\version-4.x\api\@cognite\reveal\type-aliases\GeometryFilter.md

# Type Alias: GeometryFilter

> **GeometryFilter**: `object`

## Type declaration

### boundingBox?

> `optional` **boundingBox**: `Box3`

The bounds to load geometry within. By default this box is in CDF coordinate space which
will be transformed into coordinates relative to the model using the the model transformation
which can be specified using [the CDF API](https://docs.cognite.com/api/v1/#operation/update3DRevisions),
or set in [Cognite Fusion](https://fusion.cognite.com/).

#### See

GeometryFilter.isBoundingBoxInModelCoordinates.

### isBoundingBoxInModelCoordinates?

> `optional` **isBoundingBoxInModelCoordinates**: `boolean`

When set, the geometry filter `boundingBox` will be considered to be in "Reveal/ThreeJS space".
Rather than CDF space which is the default. When using Reveal space, the model transformation
which can be specified using [the CDF API](https://docs.cognite.com/api/v1/#operation/update3DRevisions),
or set in [Cognite Fusion](https://fusion.cognite.com/).

## Defined in

[packages/cad-model/src/types.ts:24](https://github.com/cognitedata/reveal/blob/2acd9d17229d2bc8e309653b4d6a39ad941e44f1/viewer/packages/cad-model/src/types.ts#L24)


<!-- SOURCE_END: reveal/documentation\versioned_docs\version-4.x\api\@cognite\reveal\type-aliases\GeometryFilter.md -->

================================================================================


<!-- SOURCE_START: reveal/documentation\versioned_docs\version-4.x\api\@cognite\reveal\type-aliases\Image360AnnotationAppearance.md -->
## File: reveal/documentation\versioned_docs\version-4.x\api\@cognite\reveal\type-aliases\Image360AnnotationAppearance.md

# Type Alias: Image360AnnotationAppearance

> **Image360AnnotationAppearance**: `object`

The appearance of a 360 image annotation

## Type declaration

### color?

> `optional` **color**: `Color`

The color of the annotation. Default: Random, based on annotation label

### visible?

> `optional` **visible**: `boolean`

Whether the annotation is visible. Default: true

## Defined in

[packages/360-images/src/annotation/types.ts:11](https://github.com/cognitedata/reveal/blob/2acd9d17229d2bc8e309653b4d6a39ad941e44f1/viewer/packages/360-images/src/annotation/types.ts#L11)


<!-- SOURCE_END: reveal/documentation\versioned_docs\version-4.x\api\@cognite\reveal\type-aliases\Image360AnnotationAppearance.md -->

================================================================================


<!-- SOURCE_START: reveal/documentation\versioned_docs\version-4.x\api\@cognite\reveal\type-aliases\Image360AnnotationAssetFilter.md -->
## File: reveal/documentation\versioned_docs\version-4.x\api\@cognite\reveal\type-aliases\Image360AnnotationAssetFilter.md

# Type Alias: Image360AnnotationAssetFilter

> **Image360AnnotationAssetFilter**: `object`

Filter for finding annotations related to an asset

## Type declaration

### assetRef

> **assetRef**: `IdEither`

Reference to the wanted asset

## Defined in

[packages/360-images/src/collection/Image360Collection.ts:18](https://github.com/cognitedata/reveal/blob/2acd9d17229d2bc8e309653b4d6a39ad941e44f1/viewer/packages/360-images/src/collection/Image360Collection.ts#L18)


<!-- SOURCE_END: reveal/documentation\versioned_docs\version-4.x\api\@cognite\reveal\type-aliases\Image360AnnotationAssetFilter.md -->

================================================================================


<!-- SOURCE_START: reveal/documentation\versioned_docs\version-4.x\api\@cognite\reveal\type-aliases\Image360AnnotationAssetQueryResult.md -->
## File: reveal/documentation\versioned_docs\version-4.x\api\@cognite\reveal\type-aliases\Image360AnnotationAssetQueryResult.md

# Type Alias: Image360AnnotationAssetQueryResult

> **Image360AnnotationAssetQueryResult**: `object`

Result item from an asset annotation query

## Type declaration

### annotation

> **annotation**: [`Image360Annotation`](../interfaces/Image360Annotation.md)

The found annotation

### image

> **image**: [`Image360`](../interfaces/Image360.md)

The Image360 to which the result annotation belongs

### revision

> **revision**: [`Image360Revision`](../interfaces/Image360Revision.md)

The image revision to which the result annotation belongs

## Defined in

[packages/360-images/src/collection/Image360Collection.ts:46](https://github.com/cognitedata/reveal/blob/2acd9d17229d2bc8e309653b4d6a39ad941e44f1/viewer/packages/360-images/src/collection/Image360Collection.ts#L46)


<!-- SOURCE_END: reveal/documentation\versioned_docs\version-4.x\api\@cognite\reveal\type-aliases\Image360AnnotationAssetQueryResult.md -->

================================================================================


<!-- SOURCE_START: reveal/documentation\versioned_docs\version-4.x\api\@cognite\reveal\type-aliases\Image360AnnotationFilterOptions.md -->
## File: reveal/documentation\versioned_docs\version-4.x\api\@cognite\reveal\type-aliases\Image360AnnotationFilterOptions.md

# Type Alias: Image360AnnotationFilterOptions

> **Image360AnnotationFilterOptions**: `object`

Options for loading annotations in 360 images

## Type declaration

### status?

> `optional` **status**: `"all"` \| `AnnotationStatus` \| `AnnotationStatus`[]

Allow annotations matching this/these statuses. 'all' will match  all annotations

#### Default

```ts
'approved'
```

## Defined in

[packages/360-images/src/annotation/types.ts:26](https://github.com/cognitedata/reveal/blob/2acd9d17229d2bc8e309653b4d6a39ad941e44f1/viewer/packages/360-images/src/annotation/types.ts#L26)


<!-- SOURCE_END: reveal/documentation\versioned_docs\version-4.x\api\@cognite\reveal\type-aliases\Image360AnnotationFilterOptions.md -->

================================================================================


<!-- SOURCE_START: reveal/documentation\versioned_docs\version-4.x\api\@cognite\reveal\type-aliases\Image360AnnotationIntersection.md -->
## File: reveal/documentation\versioned_docs\version-4.x\api\@cognite\reveal\type-aliases\Image360AnnotationIntersection.md

# Type Alias: Image360AnnotationIntersection

> **Image360AnnotationIntersection**: `object`

Describes an intersection with a 360 image annotation

## Type declaration

### annotation

> **annotation**: [`Image360Annotation`](../interfaces/Image360Annotation.md)

The intersected annotation

### direction

> **direction**: `Vector3`

The world direction from the camera to the intersection point

### type

> **type**: `"image360Annotation"`

The intersection type.

## Defined in

[packages/360-images/src/annotation/Image360AnnotationIntersection.ts:11](https://github.com/cognitedata/reveal/blob/2acd9d17229d2bc8e309653b4d6a39ad941e44f1/viewer/packages/360-images/src/annotation/Image360AnnotationIntersection.ts#L11)


<!-- SOURCE_END: reveal/documentation\versioned_docs\version-4.x\api\@cognite\reveal\type-aliases\Image360AnnotationIntersection.md -->

================================================================================


<!-- SOURCE_START: reveal/documentation\versioned_docs\version-4.x\api\@cognite\reveal\type-aliases\Image360DataModelIdentifier.md -->
## File: reveal/documentation\versioned_docs\version-4.x\api\@cognite\reveal\type-aliases\Image360DataModelIdentifier.md

# Type Alias: Image360DataModelIdentifier

> **Image360DataModelIdentifier**: `object`

An identifier uniquely determining an instance of a Cognite Data Model

## Type declaration

### image360CollectionExternalId

> **image360CollectionExternalId**: `string`

### space

> **space**: `string`

## Defined in

[packages/data-providers/src/image-360-data-providers/descriptor-providers/datamodels/Cdf360DataModelsDescriptorProvider.ts:26](https://github.com/cognitedata/reveal/blob/2acd9d17229d2bc8e309653b4d6a39ad941e44f1/viewer/packages/data-providers/src/image-360-data-providers/descriptor-providers/datamodels/Cdf360DataModelsDescriptorProvider.ts#L26)


<!-- SOURCE_END: reveal/documentation\versioned_docs\version-4.x\api\@cognite\reveal\type-aliases\Image360DataModelIdentifier.md -->

================================================================================


<!-- SOURCE_START: reveal/documentation\versioned_docs\version-4.x\api\@cognite\reveal\type-aliases\Image360EnteredDelegate.md -->
## File: reveal/documentation\versioned_docs\version-4.x\api\@cognite\reveal\type-aliases\Image360EnteredDelegate.md

# Type Alias: Image360EnteredDelegate()

> **Image360EnteredDelegate**: (`image360`, `revision`) => `void`

Delegate for 360 image mode entered events.

## Parameters

 **image360**: [`Image360`](../interfaces/Image360.md)

 **revision**: [`Image360Revision`](../interfaces/Image360Revision.md)

## Returns

`void`

## Defined in

[packages/360-images/src/types.ts:11](https://github.com/cognitedata/reveal/blob/2acd9d17229d2bc8e309653b4d6a39ad941e44f1/viewer/packages/360-images/src/types.ts#L11)


<!-- SOURCE_END: reveal/documentation\versioned_docs\version-4.x\api\@cognite\reveal\type-aliases\Image360EnteredDelegate.md -->

================================================================================


<!-- SOURCE_START: reveal/documentation\versioned_docs\version-4.x\api\@cognite\reveal\type-aliases\Image360ExitedDelegate.md -->
## File: reveal/documentation\versioned_docs\version-4.x\api\@cognite\reveal\type-aliases\Image360ExitedDelegate.md

# Type Alias: Image360ExitedDelegate()

> **Image360ExitedDelegate**: () => `void`

Delegate for 360 image mode exited events.

## Returns

`void`

## Defined in

[packages/360-images/src/types.ts:16](https://github.com/cognitedata/reveal/blob/2acd9d17229d2bc8e309653b4d6a39ad941e44f1/viewer/packages/360-images/src/types.ts#L16)


<!-- SOURCE_END: reveal/documentation\versioned_docs\version-4.x\api\@cognite\reveal\type-aliases\Image360ExitedDelegate.md -->

================================================================================


<!-- SOURCE_START: reveal/documentation\versioned_docs\version-4.x\api\@cognite\reveal\type-aliases\Image360IconStyle.md -->
## File: reveal/documentation\versioned_docs\version-4.x\api\@cognite\reveal\type-aliases\Image360IconStyle.md

# Type Alias: Image360IconStyle

> **Image360IconStyle**: `object`

Image360 icon style

## Type declaration

### color?

> `optional` **color**: `Color`

A color tint to apply to the 360 icon

## Defined in

[packages/360-images/src/entity/Image360.ts:13](https://github.com/cognitedata/reveal/blob/2acd9d17229d2bc8e309653b4d6a39ad941e44f1/viewer/packages/360-images/src/entity/Image360.ts#L13)


<!-- SOURCE_END: reveal/documentation\versioned_docs\version-4.x\api\@cognite\reveal\type-aliases\Image360IconStyle.md -->

================================================================================


<!-- SOURCE_START: reveal/documentation\versioned_docs\version-4.x\api\@cognite\reveal\type-aliases\Image360WithCollection.md -->
## File: reveal/documentation\versioned_docs\version-4.x\api\@cognite\reveal\type-aliases\Image360WithCollection.md

# Type Alias: Image360WithCollection

> **Image360WithCollection**: `object`

A tuple of a 360 image and its collection.

## Type declaration

### image360

> **image360**: [`Image360`](../interfaces/Image360.md)

### image360Collection

> **image360Collection**: [`Image360Collection`](../interfaces/Image360Collection.md)

## Defined in

[packages/api/src/public/types.ts:21](https://github.com/cognitedata/reveal/blob/2acd9d17229d2bc8e309653b4d6a39ad941e44f1/viewer/packages/api/src/public/types.ts#L21)


<!-- SOURCE_END: reveal/documentation\versioned_docs\version-4.x\api\@cognite\reveal\type-aliases\Image360WithCollection.md -->

================================================================================


<!-- SOURCE_START: reveal/documentation\versioned_docs\version-4.x\api\@cognite\reveal\type-aliases\ImageAssetLinkAnnotationInfo.md -->
## File: reveal/documentation\versioned_docs\version-4.x\api\@cognite\reveal\type-aliases\ImageAssetLinkAnnotationInfo.md

# Type Alias: ImageAssetLinkAnnotationInfo

> **ImageAssetLinkAnnotationInfo**: `Omit`\<`AnnotationModel`, `"data"`\> & `object`

A CDF AnnotationModel with a narrower type representing an image asset link

## Type declaration

### data

> **data**: `AnnotationsCogniteAnnotationTypesImagesAssetLink`

The data associated with the image asset link

## Defined in

[packages/data-providers/src/types.ts:46](https://github.com/cognitedata/reveal/blob/2acd9d17229d2bc8e309653b4d6a39ad941e44f1/viewer/packages/data-providers/src/types.ts#L46)


<!-- SOURCE_END: reveal/documentation\versioned_docs\version-4.x\api\@cognite\reveal\type-aliases\ImageAssetLinkAnnotationInfo.md -->

================================================================================


<!-- SOURCE_START: reveal/documentation\versioned_docs\version-4.x\api\@cognite\reveal\type-aliases\Intersection.md -->
## File: reveal/documentation\versioned_docs\version-4.x\api\@cognite\reveal\type-aliases\Intersection.md

# Type Alias: Intersection

> **Intersection**: [`CadIntersection`](CadIntersection.md) \| [`PointCloudIntersection`](PointCloudIntersection.md)

## Defined in

[packages/api/src/public/migration/types.ts:287](https://github.com/cognitedata/reveal/blob/2acd9d17229d2bc8e309653b4d6a39ad941e44f1/viewer/packages/api/src/public/migration/types.ts#L287)


<!-- SOURCE_END: reveal/documentation\versioned_docs\version-4.x\api\@cognite\reveal\type-aliases\Intersection.md -->

================================================================================


<!-- SOURCE_START: reveal/documentation\versioned_docs\version-4.x\api\@cognite\reveal\type-aliases\ModelState.md -->
## File: reveal/documentation\versioned_docs\version-4.x\api\@cognite\reveal\type-aliases\ModelState.md

# Type Alias: ModelState

> **ModelState**: `object`

## Type declaration

### defaultNodeAppearance

> **defaultNodeAppearance**: [`SerializableNodeAppearance`](SerializableNodeAppearance.md)

### modelId

> **modelId**: `number`

### revisionId

> **revisionId**: `number`

### styledSets

> **styledSets**: `object`[]

## Defined in

[packages/api/src/utilities/ViewStateHelper.ts:35](https://github.com/cognitedata/reveal/blob/2acd9d17229d2bc8e309653b4d6a39ad941e44f1/viewer/packages/api/src/utilities/ViewStateHelper.ts#L35)


<!-- SOURCE_END: reveal/documentation\versioned_docs\version-4.x\api\@cognite\reveal\type-aliases\ModelState.md -->

================================================================================


<!-- SOURCE_START: reveal/documentation\versioned_docs\version-4.x\api\@cognite\reveal\type-aliases\NodeAppearance.md -->
## File: reveal/documentation\versioned_docs\version-4.x\api\@cognite\reveal\type-aliases\NodeAppearance.md

# Type Alias: NodeAppearance

> **NodeAppearance**: `object`

Type for defining node appearance profiles to style a 3D CAD model.

## See

[DefaultNodeAppearance](../variables/DefaultNodeAppearance.md)

## Type declaration

### color?

> `readonly` `optional` **color**: `Color`

Overrides the default color of the node in RGB. Black,
or `new Color(0, 0, 0)` means no override.

### outlineColor?

> `readonly` `optional` **outlineColor**: [`NodeOutlineColor`](../enumerations/NodeOutlineColor.md)

When set, an outline is drawn around the
node to make it stand out.

### prioritizedForLoadingHint?

> `readonly` `optional` **prioritizedForLoadingHint**: `number`

When provided, this value can be used to prioritize certain areas of the
3D model to be loaded. This can be useful to prioritize key objects in the
3D model to always be loaded.

When non-zero, sectors containing geometry in the vicinity of the prioritized
sectors are given an *extra* priority. Recommended values are in range 1 (somewhat
higher priority to be loaded) to 10 (very likely to be loaded). Usually values around 4-5
is recommended.

Prioritized nodes are loaded at the expense of non-prioritized areas. There are no
guarantees that the nodes are actually loaded, and the more prioritized areas/nodes
provided, the less likely it is that the hint is obeyed.

Extra priority doesn't accumulate when sectors are prioritized because they intersect/contain
several nodes.

**This is an advanced feature and not recommended for most users**

#### Version

Only works with 3D models converted later than Q4 2021.

### renderGhosted?

> `readonly` `optional` **renderGhosted**: `boolean`

When set to true, the node is rendered ghosted, i.e.
transparent with a fixed color. This has no effect if NodeAppearance.renderInFront
is `true`.

### renderInFront?

> `readonly` `optional` **renderInFront**: `boolean`

When set to true, the node is rendered in front
of all other nodes even if it's occluded.
Note that this take precedence over NodeAppearance.renderGhosted.

### visible?

> `readonly` `optional` **visible**: `boolean`

Overrides the visibility of the node.

## Defined in

[packages/cad-styling/src/NodeAppearance.ts:22](https://github.com/cognitedata/reveal/blob/2acd9d17229d2bc8e309653b4d6a39ad941e44f1/viewer/packages/cad-styling/src/NodeAppearance.ts#L22)


<!-- SOURCE_END: reveal/documentation\versioned_docs\version-4.x\api\@cognite\reveal\type-aliases\NodeAppearance.md -->

================================================================================


<!-- SOURCE_START: reveal/documentation\versioned_docs\version-4.x\api\@cognite\reveal\type-aliases\NodeCollectionSerializationContext.md -->
## File: reveal/documentation\versioned_docs\version-4.x\api\@cognite\reveal\type-aliases\NodeCollectionSerializationContext.md

# Type Alias: NodeCollectionSerializationContext

> **NodeCollectionSerializationContext**: `object`

## Type declaration

### client

> **client**: `CogniteClient`

### model

> **model**: [`CdfModelNodeCollectionDataProvider`](../interfaces/CdfModelNodeCollectionDataProvider.md)

## Defined in

[packages/cad-styling/src/NodeCollectionDeserializer.ts:22](https://github.com/cognitedata/reveal/blob/2acd9d17229d2bc8e309653b4d6a39ad941e44f1/viewer/packages/cad-styling/src/NodeCollectionDeserializer.ts#L22)


<!-- SOURCE_END: reveal/documentation\versioned_docs\version-4.x\api\@cognite\reveal\type-aliases\NodeCollectionSerializationContext.md -->

================================================================================


<!-- SOURCE_START: reveal/documentation\versioned_docs\version-4.x\api\@cognite\reveal\type-aliases\OnLoadingCallback.md -->
## File: reveal/documentation\versioned_docs\version-4.x\api\@cognite\reveal\type-aliases\OnLoadingCallback.md

# Type Alias: OnLoadingCallback()

> **OnLoadingCallback**: (`itemsLoaded`, `itemsRequested`, `itemsCulled`) => `void`

## Parameters

 **itemsLoaded**: `number`

 **itemsRequested**: `number`

 **itemsCulled**: `number`

## Returns

`void`

## Defined in

[packages/api/src/public/migration/types.ts:30](https://github.com/cognitedata/reveal/blob/2acd9d17229d2bc8e309653b4d6a39ad941e44f1/viewer/packages/api/src/public/migration/types.ts#L30)


<!-- SOURCE_END: reveal/documentation\versioned_docs\version-4.x\api\@cognite\reveal\type-aliases\OnLoadingCallback.md -->

================================================================================


<!-- SOURCE_START: reveal/documentation\versioned_docs\version-4.x\api\@cognite\reveal\type-aliases\Overlay3DCollectionOptions.md -->
## File: reveal/documentation\versioned_docs\version-4.x\api\@cognite\reveal\type-aliases\Overlay3DCollectionOptions.md

# Type Alias: Overlay3DCollectionOptions

> **Overlay3DCollectionOptions**: `object`

Constructor options for the Overlay3DCollection

## Type declaration

### defaultOverlayColor?

> `optional` **defaultOverlayColor**: `Color`

The default color to apply to overlay icons without a color on their own

### maxPointSize?

> `optional` **maxPointSize**: `number`

The maximum display size of each icon in pixels

### overlayTexture?

> `optional` **overlayTexture**: `Texture`

The texture to display as icons in this collection

### overlayTextureMask?

> `optional` **overlayTextureMask**: `Texture`

A texture mask for marking what pixels are transparent in the supplied overlayTexture

## Defined in

[packages/3d-overlays/src/Overlay3DCollection.ts:17](https://github.com/cognitedata/reveal/blob/2acd9d17229d2bc8e309653b4d6a39ad941e44f1/viewer/packages/3d-overlays/src/Overlay3DCollection.ts#L17)


<!-- SOURCE_END: reveal/documentation\versioned_docs\version-4.x\api\@cognite\reveal\type-aliases\Overlay3DCollectionOptions.md -->

================================================================================


<!-- SOURCE_START: reveal/documentation\versioned_docs\version-4.x\api\@cognite\reveal\type-aliases\OverlayInfo.md -->
## File: reveal/documentation\versioned_docs\version-4.x\api\@cognite\reveal\type-aliases\OverlayInfo.md

# Type Alias: OverlayInfo\<ContentType\>

> **OverlayInfo**\<`ContentType`\>: `object`

Data used in creating an overlay.

## Type Parameters

 **ContentType** = [`DefaultOverlay3DContentType`](DefaultOverlay3DContentType.md)

## Type declaration

### color?

> `optional` **color**: `Color`

The color of this overlay. Will be set by collection if undefined

### content

> **content**: `ContentType`

The data contained in this overlay

### position

> **position**: `Vector3`

Position of the overlay

## Defined in

[packages/3d-overlays/src/OverlayCollection.ts:18](https://github.com/cognitedata/reveal/blob/2acd9d17229d2bc8e309653b4d6a39ad941e44f1/viewer/packages/3d-overlays/src/OverlayCollection.ts#L18)


<!-- SOURCE_END: reveal/documentation\versioned_docs\version-4.x\api\@cognite\reveal\type-aliases\OverlayInfo.md -->

================================================================================


<!-- SOURCE_START: reveal/documentation\versioned_docs\version-4.x\api\@cognite\reveal\type-aliases\PointCloudAppearance.md -->
## File: reveal/documentation\versioned_docs\version-4.x\api\@cognite\reveal\type-aliases\PointCloudAppearance.md

# Type Alias: PointCloudAppearance

> **PointCloudAppearance**: `object`

## Type declaration

### color?

> `optional` **color**: `Color`

### visible?

> `optional` **visible**: `boolean`

## Defined in

[packages/pointcloud-styling/src/PointCloudAppearance.ts:7](https://github.com/cognitedata/reveal/blob/2acd9d17229d2bc8e309653b4d6a39ad941e44f1/viewer/packages/pointcloud-styling/src/PointCloudAppearance.ts#L7)


<!-- SOURCE_END: reveal/documentation\versioned_docs\version-4.x\api\@cognite\reveal\type-aliases\PointCloudAppearance.md -->

================================================================================


<!-- SOURCE_START: reveal/documentation\versioned_docs\version-4.x\api\@cognite\reveal\type-aliases\PointCloudBudget.md -->
## File: reveal/documentation\versioned_docs\version-4.x\api\@cognite\reveal\type-aliases\PointCloudBudget.md

# Type Alias: PointCloudBudget

> **PointCloudBudget**: `object`

Represents a budget of how many point from point clouds can be
loaded at the same time.

## Type declaration

### numberOfPoints

> `readonly` **numberOfPoints**: `number`

Total number of points that can be loaded for all point clouds models
accumulated.

## Defined in

[packages/pointclouds/src/PointCloudBudget.ts:10](https://github.com/cognitedata/reveal/blob/2acd9d17229d2bc8e309653b4d6a39ad941e44f1/viewer/packages/pointclouds/src/PointCloudBudget.ts#L10)


<!-- SOURCE_END: reveal/documentation\versioned_docs\version-4.x\api\@cognite\reveal\type-aliases\PointCloudBudget.md -->

================================================================================


<!-- SOURCE_START: reveal/documentation\versioned_docs\version-4.x\api\@cognite\reveal\type-aliases\PointCloudIntersection.md -->
## File: reveal/documentation\versioned_docs\version-4.x\api\@cognite\reveal\type-aliases\PointCloudIntersection.md

# Type Alias: PointCloudIntersection

> **PointCloudIntersection**: `object`

## Type declaration

### annotationId

> **annotationId**: `number`

Annotation Id of the intersected object within a pointcloud. (0 if not applicable)

### assetRef?

> `optional` **assetRef**: `AnnotationsAssetRef`

Reference to the asset associated to the intersected point cloud object, if any.

### distanceToCamera

> **distanceToCamera**: `number`

Distance from the camera to the intersection.

### model

> **model**: [`CognitePointCloudModel`](../classes/CognitePointCloudModel.md)

The model that was intersected.

### point

> **point**: `Vector3`

Coordinate of the intersection.

### pointIndex

> **pointIndex**: `number`

The index of the point that was intersected.

### type

> **type**: `"pointcloud"`

The intersection type.

## Defined in

[packages/pointclouds/src/PointCloudIntersection.ts:8](https://github.com/cognitedata/reveal/blob/2acd9d17229d2bc8e309653b4d6a39ad941e44f1/viewer/packages/pointclouds/src/PointCloudIntersection.ts#L8)


<!-- SOURCE_END: reveal/documentation\versioned_docs\version-4.x\api\@cognite\reveal\type-aliases\PointCloudIntersection.md -->

================================================================================


<!-- SOURCE_START: reveal/documentation\versioned_docs\version-4.x\api\@cognite\reveal\type-aliases\PointCloudObjectMetadata.md -->
## File: reveal/documentation\versioned_docs\version-4.x\api\@cognite\reveal\type-aliases\PointCloudObjectMetadata.md

# Type Alias: PointCloudObjectMetadata

> **PointCloudObjectMetadata**: `object`

Metadata for a single point cloud object

## Type declaration

### annotationId

> **annotationId**: `number`

The CDF Annotation ID associated with the point cloud object.

### ~~assetId?~~

> `optional` **assetId**: `number`

The CDF Asset ID associated with the point cloud object, if any.

#### Deprecated

Use PointCloudObjectMetadata.assetRef instead.

### assetRef?

> `optional` **assetRef**: `AnnotationsAssetRef`

Asset identifiers for asset associated with this point cloud object, if any.

### boundingBox

> **boundingBox**: `Box3`

The bounding box of this annotation

## Defined in

[packages/data-providers/src/pointcloud-stylable-object-providers/types.ts:21](https://github.com/cognitedata/reveal/blob/2acd9d17229d2bc8e309653b4d6a39ad941e44f1/viewer/packages/data-providers/src/pointcloud-stylable-object-providers/types.ts#L21)


<!-- SOURCE_END: reveal/documentation\versioned_docs\version-4.x\api\@cognite\reveal\type-aliases\PointCloudObjectMetadata.md -->

================================================================================


<!-- SOURCE_START: reveal/documentation\versioned_docs\version-4.x\api\@cognite\reveal\type-aliases\PointerEventData.md -->
## File: reveal/documentation\versioned_docs\version-4.x\api\@cognite\reveal\type-aliases\PointerEventData.md

# Type Alias: PointerEventData

> **PointerEventData**: `object`

## Type declaration

### button?

> `optional` **button**: `number`

### offsetX

> **offsetX**: `number`

### offsetY

> **offsetY**: `number`

## Defined in

[packages/utilities/src/events/types.ts:17](https://github.com/cognitedata/reveal/blob/2acd9d17229d2bc8e309653b4d6a39ad941e44f1/viewer/packages/utilities/src/events/types.ts#L17)


<!-- SOURCE_END: reveal/documentation\versioned_docs\version-4.x\api\@cognite\reveal\type-aliases\PointerEventData.md -->

================================================================================


<!-- SOURCE_START: reveal/documentation\versioned_docs\version-4.x\api\@cognite\reveal\type-aliases\PointerEventDelegate.md -->
## File: reveal/documentation\versioned_docs\version-4.x\api\@cognite\reveal\type-aliases\PointerEventDelegate.md

# Type Alias: PointerEventDelegate()

> **PointerEventDelegate**: (`event`) => `void`

## Parameters

 **event**: [`PointerEventData`](PointerEventData.md)

## Returns

`void`

## Defined in

[packages/utilities/src/events/types.ts:11](https://github.com/cognitedata/reveal/blob/2acd9d17229d2bc8e309653b4d6a39ad941e44f1/viewer/packages/utilities/src/events/types.ts#L11)


<!-- SOURCE_END: reveal/documentation\versioned_docs\version-4.x\api\@cognite\reveal\type-aliases\PointerEventDelegate.md -->

================================================================================


<!-- SOURCE_START: reveal/documentation\versioned_docs\version-4.x\api\@cognite\reveal\type-aliases\PropertyFilterNodeCollectionOptions.md -->
## File: reveal/documentation\versioned_docs\version-4.x\api\@cognite\reveal\type-aliases\PropertyFilterNodeCollectionOptions.md

# Type Alias: PropertyFilterNodeCollectionOptions

> **PropertyFilterNodeCollectionOptions**: `object`

Options for [PropertyFilterNodeCollection](../classes/PropertyFilterNodeCollection.md).

## Type declaration

### requestPartitions?

> `optional` **requestPartitions**: `number`

How many partitions to split the request into. More partitions can yield better performance
for queries with very large result set (in order of magnitude 100.000 plus).
Defaults to 1.

## Defined in

[packages/cad-styling/src/PropertyFilterNodeCollection.ts:18](https://github.com/cognitedata/reveal/blob/2acd9d17229d2bc8e309653b4d6a39ad941e44f1/viewer/packages/cad-styling/src/PropertyFilterNodeCollection.ts#L18)


<!-- SOURCE_END: reveal/documentation\versioned_docs\version-4.x\api\@cognite\reveal\type-aliases\PropertyFilterNodeCollectionOptions.md -->

================================================================================


<!-- SOURCE_START: reveal/documentation\versioned_docs\version-4.x\api\@cognite\reveal\type-aliases\RenderParameters.md -->
## File: reveal/documentation\versioned_docs\version-4.x\api\@cognite\reveal\type-aliases\RenderParameters.md

# Type Alias: RenderParameters

> **RenderParameters**: `object`

Some parameters of WebGLRenderer initialized with [Cognite3DViewer](../classes/Cognite3DViewer.md).

## Type declaration

### renderSize

> **renderSize**: `Vector2`

Current width and height of the renderer's output canvas, in pixels.

## Defined in

[packages/api/src/public/migration/types.ts:35](https://github.com/cognitedata/reveal/blob/2acd9d17229d2bc8e309653b4d6a39ad941e44f1/viewer/packages/api/src/public/migration/types.ts#L35)


<!-- SOURCE_END: reveal/documentation\versioned_docs\version-4.x\api\@cognite\reveal\type-aliases\RenderParameters.md -->

================================================================================


<!-- SOURCE_START: reveal/documentation\versioned_docs\version-4.x\api\@cognite\reveal\type-aliases\ResolutionOptions.md -->
## File: reveal/documentation\versioned_docs\version-4.x\api\@cognite\reveal\type-aliases\ResolutionOptions.md

# Type Alias: ResolutionOptions

> **ResolutionOptions**: `object`

## Type declaration

### maxRenderResolution?

> `optional` **maxRenderResolution**: `number`

Generally Reveal will follow the resolution given by the size
of the encapsulating DOM element of the Canvas [Cognite3DViewerOptions.domElement](../interfaces/Cognite3DViewerOptions.md#domelement).
To ensure managable performance, Reveal will by default set an upper threshold to limit
the resolution. The `maxRenderResolution` option will
directly control this upper limit. It corresponds to the number of pixels in the render target.

### movingCameraResolutionFactor?

> `optional` **movingCameraResolutionFactor**: `number`

A factor that will scale down the resolution when moving the camera. This can
be used to achieve a better user experience on devices with limited hardware.
Values must be greater than 0 and at most 1.
This factor is applied to the number of physical pixels of the canvas.
A value of e.g. 0.25 will approximately divide the number of pixels rendered on the screen by four.

## Defined in

[packages/api/src/public/migration/types.ts:263](https://github.com/cognitedata/reveal/blob/2acd9d17229d2bc8e309653b4d6a39ad941e44f1/viewer/packages/api/src/public/migration/types.ts#L263)


<!-- SOURCE_END: reveal/documentation\versioned_docs\version-4.x\api\@cognite\reveal\type-aliases\ResolutionOptions.md -->

================================================================================


<!-- SOURCE_START: reveal/documentation\versioned_docs\version-4.x\api\@cognite\reveal\type-aliases\SceneRenderedDelegate.md -->
## File: reveal/documentation\versioned_docs\version-4.x\api\@cognite\reveal\type-aliases\SceneRenderedDelegate.md

# Type Alias: SceneRenderedDelegate()

> **SceneRenderedDelegate**: (`event`) => `void`

## Parameters

 **event**

 **event.camera**: `PerspectiveCamera`

 **event.frameNumber**: `number`

 **event.renderTime**: `number`

 **event.renderer**: `WebGLRenderer`

## Returns

`void`

## Defined in

[packages/utilities/src/events/types.ts:37](https://github.com/cognitedata/reveal/blob/2acd9d17229d2bc8e309653b4d6a39ad941e44f1/viewer/packages/utilities/src/events/types.ts#L37)


<!-- SOURCE_END: reveal/documentation\versioned_docs\version-4.x\api\@cognite\reveal\type-aliases\SceneRenderedDelegate.md -->

================================================================================


<!-- SOURCE_START: reveal/documentation\versioned_docs\version-4.x\api\@cognite\reveal\type-aliases\SerializableNodeAppearance.md -->
## File: reveal/documentation\versioned_docs\version-4.x\api\@cognite\reveal\type-aliases\SerializableNodeAppearance.md

# Type Alias: SerializableNodeAppearance

> **SerializableNodeAppearance**: `object`

Type that represents a [NodeAppearance](NodeAppearance.md) in a serializable format

## Type declaration

### color?

> `readonly` `optional` **color**: [`number`, `number`, `number`]

Color as an RGB number tuple, with values in the range [0, 255]

### outlineColor?

> `readonly` `optional` **outlineColor**: [`NodeOutlineColor`](../enumerations/NodeOutlineColor.md)

Outline color,

#### See

[NodeAppearance](NodeAppearance.md)

### prioritizedForLoadingHint?

> `readonly` `optional` **prioritizedForLoadingHint**: `number`

Prioritized loading hint,

#### See

[NodeAppearance](NodeAppearance.md)

### renderGhosted?

> `readonly` `optional` **renderGhosted**: `boolean`

Whether to render ghosted,

#### See

[NodeAppearance](NodeAppearance.md)

### renderInFront?

> `readonly` `optional` **renderInFront**: `boolean`

Whether to render in front,

#### See

[NodeAppearance](NodeAppearance.md)

### visible?

> `readonly` `optional` **visible**: `boolean`

Visibility,

#### See

[NodeAppearance](NodeAppearance.md)

## Defined in

[packages/cad-styling/src/NodeAppearance.ts:77](https://github.com/cognitedata/reveal/blob/2acd9d17229d2bc8e309653b4d6a39ad941e44f1/viewer/packages/cad-styling/src/NodeAppearance.ts#L77)


<!-- SOURCE_END: reveal/documentation\versioned_docs\version-4.x\api\@cognite\reveal\type-aliases\SerializableNodeAppearance.md -->

================================================================================


<!-- SOURCE_START: reveal/documentation\versioned_docs\version-4.x\api\@cognite\reveal\type-aliases\SerializedNodeCollection.md -->
## File: reveal/documentation\versioned_docs\version-4.x\api\@cognite\reveal\type-aliases\SerializedNodeCollection.md

# Type Alias: SerializedNodeCollection

> **SerializedNodeCollection**: `object`

## Type declaration

### options?

> `optional` **options**: `any`

### state

> **state**: `any`

### token

> **token**: `string`

## Defined in

[packages/cad-styling/src/SerializedNodeCollection.ts:4](https://github.com/cognitedata/reveal/blob/2acd9d17229d2bc8e309653b4d6a39ad941e44f1/viewer/packages/cad-styling/src/SerializedNodeCollection.ts#L4)


<!-- SOURCE_END: reveal/documentation\versioned_docs\version-4.x\api\@cognite\reveal\type-aliases\SerializedNodeCollection.md -->

================================================================================


<!-- SOURCE_START: reveal/documentation\versioned_docs\version-4.x\api\@cognite\reveal\type-aliases\SupportedModelTypes.md -->
## File: reveal/documentation\versioned_docs\version-4.x\api\@cognite\reveal\type-aliases\SupportedModelTypes.md

# Type Alias: SupportedModelTypes

> **SupportedModelTypes**: `"pointcloud"` \| `"cad"`

## Defined in

[packages/model-base/src/SupportedModelTypes.ts:4](https://github.com/cognitedata/reveal/blob/2acd9d17229d2bc8e309653b4d6a39ad941e44f1/viewer/packages/model-base/src/SupportedModelTypes.ts#L4)


<!-- SOURCE_END: reveal/documentation\versioned_docs\version-4.x\api\@cognite\reveal\type-aliases\SupportedModelTypes.md -->

================================================================================


<!-- SOURCE_START: reveal/documentation\versioned_docs\version-4.x\api\@cognite\reveal\type-aliases\ViewerState.md -->
## File: reveal/documentation\versioned_docs\version-4.x\api\@cognite\reveal\type-aliases\ViewerState.md

# Type Alias: ViewerState

> **ViewerState**: `object`

## Type declaration

### camera?

> `optional` **camera**: `object`

### camera.position

> **position**: `object`

### camera.position.x

> **x**: `number`

### camera.position.y

> **y**: `number`

### camera.position.z

> **z**: `number`

### camera.target

> **target**: `object`

### camera.target.x

> **x**: `number`

### camera.target.y

> **y**: `number`

### camera.target.z

> **z**: `number`

### clippingPlanes?

> `optional` **clippingPlanes**: [`ClippingPlanesState`](ClippingPlanesState.md)[]

### models?

> `optional` **models**: [`ModelState`](ModelState.md)[]

## Defined in

[packages/api/src/utilities/ViewStateHelper.ts:19](https://github.com/cognitedata/reveal/blob/2acd9d17229d2bc8e309653b4d6a39ad941e44f1/viewer/packages/api/src/utilities/ViewStateHelper.ts#L19)


<!-- SOURCE_END: reveal/documentation\versioned_docs\version-4.x\api\@cognite\reveal\type-aliases\ViewerState.md -->

================================================================================


<!-- SOURCE_START: reveal/documentation\versioned_docs\version-4.x\api\@cognite\reveal\type-aliases\WellKnownUnit.md -->
## File: reveal/documentation\versioned_docs\version-4.x\api\@cognite\reveal\type-aliases\WellKnownUnit.md

# Type Alias: WellKnownUnit

> **WellKnownUnit**: `"Meters"` \| `"Centimeters"` \| `"Millimeters"` \| `"Micrometers"` \| `"Kilometers"` \| `"Feet"` \| `"Inches"` \| `"Yards"` \| `"Miles"` \| `"Mils"` \| `"Microinches"`

Units supported by [CogniteCadModel](../classes/CogniteCadModel.md).

## Defined in

[packages/cad-model/src/types.ts:11](https://github.com/cognitedata/reveal/blob/2acd9d17229d2bc8e309653b4d6a39ad941e44f1/viewer/packages/cad-model/src/types.ts#L11)


<!-- SOURCE_END: reveal/documentation\versioned_docs\version-4.x\api\@cognite\reveal\type-aliases\WellKnownUnit.md -->

================================================================================


<!-- SOURCE_START: reveal/documentation\versioned_docs\version-4.x\api\@cognite\reveal\variables\CAMERA_MANAGER_EVENT_TYPE_LIST.md -->
## File: reveal/documentation\versioned_docs\version-4.x\api\@cognite\reveal\variables\CAMERA_MANAGER_EVENT_TYPE_LIST.md

# Variable: CAMERA\_MANAGER\_EVENT\_TYPE\_LIST

> `const` **CAMERA\_MANAGER\_EVENT\_TYPE\_LIST**: readonly [`"cameraChange"`, `"cameraStop"`]

List of supported event types (adapted from https://stackoverflow.com/questions/44480644/string-union-to-string-array)

## Defined in

[packages/camera-manager/src/types.ts:103](https://github.com/cognitedata/reveal/blob/2acd9d17229d2bc8e309653b4d6a39ad941e44f1/viewer/packages/camera-manager/src/types.ts#L103)


<!-- SOURCE_END: reveal/documentation\versioned_docs\version-4.x\api\@cognite\reveal\variables\CAMERA_MANAGER_EVENT_TYPE_LIST.md -->

================================================================================


<!-- SOURCE_START: reveal/documentation\versioned_docs\version-4.x\api\@cognite\reveal\variables\CDF_TO_VIEWER_TRANSFORMATION.md -->
## File: reveal/documentation\versioned_docs\version-4.x\api\@cognite\reveal\variables\CDF_TO_VIEWER_TRANSFORMATION.md

# Variable: CDF\_TO\_VIEWER\_TRANSFORMATION

> `const` **CDF\_TO\_VIEWER\_TRANSFORMATION**: `Matrix4` = `cadFromCdfToThreeMatrix`

The transformation matrix from CDF coordinates to ThreeJS/Reveal.
Note that this is already applied to Reveal models.

## Defined in

[packages/utilities/src/constants.ts:14](https://github.com/cognitedata/reveal/blob/2acd9d17229d2bc8e309653b4d6a39ad941e44f1/viewer/packages/utilities/src/constants.ts#L14)


<!-- SOURCE_END: reveal/documentation\versioned_docs\version-4.x\api\@cognite\reveal\variables\CDF_TO_VIEWER_TRANSFORMATION.md -->

================================================================================


<!-- SOURCE_START: reveal/documentation\versioned_docs\version-4.x\api\@cognite\reveal\variables\DefaultNodeAppearance.md -->
## File: reveal/documentation\versioned_docs\version-4.x\api\@cognite\reveal\variables\DefaultNodeAppearance.md

# Variable: DefaultNodeAppearance

> `const` **DefaultNodeAppearance**: `object`

A set of default node appearances used in Reveal.

## Type declaration

### Default

> **Default**: [`NodeAppearance`](../type-aliases/NodeAppearance.md) = `DefaultAppearance`

### Ghosted

> **Ghosted**: [`NodeAppearance`](../type-aliases/NodeAppearance.md) = `GhostedAppearance`

### Hidden

> **Hidden**: [`NodeAppearance`](../type-aliases/NodeAppearance.md) = `HiddenAppearance`

### Highlighted

> **Highlighted**: `object`

### Highlighted.color?

> `readonly` `optional` **color**: `Color`

Overrides the default color of the node in RGB. Black,
or `new Color(0, 0, 0)` means no override.

### Highlighted.outlineColor?

> `readonly` `optional` **outlineColor**: [`NodeOutlineColor`](../enumerations/NodeOutlineColor.md)

When set, an outline is drawn around the
node to make it stand out.

### Highlighted.prioritizedForLoadingHint?

> `readonly` `optional` **prioritizedForLoadingHint**: `number`

When provided, this value can be used to prioritize certain areas of the
3D model to be loaded. This can be useful to prioritize key objects in the
3D model to always be loaded.

When non-zero, sectors containing geometry in the vicinity of the prioritized
sectors are given an *extra* priority. Recommended values are in range 1 (somewhat
higher priority to be loaded) to 10 (very likely to be loaded). Usually values around 4-5
is recommended.

Prioritized nodes are loaded at the expense of non-prioritized areas. There are no
guarantees that the nodes are actually loaded, and the more prioritized areas/nodes
provided, the less likely it is that the hint is obeyed.

Extra priority doesn't accumulate when sectors are prioritized because they intersect/contain
several nodes.

**This is an advanced feature and not recommended for most users**

#### Version

Only works with 3D models converted later than Q4 2021.

### Highlighted.renderGhosted?

> `readonly` `optional` **renderGhosted**: `boolean`

When set to true, the node is rendered ghosted, i.e.
transparent with a fixed color. This has no effect if NodeAppearance.renderInFront
is `true`.

### Highlighted.renderInFront?

> `readonly` `optional` **renderInFront**: `boolean`

When set to true, the node is rendered in front
of all other nodes even if it's occluded.
Note that this take precedence over NodeAppearance.renderGhosted.

### Highlighted.visible?

> `readonly` `optional` **visible**: `boolean`

Overrides the visibility of the node.

### InFront

> **InFront**: [`NodeAppearance`](../type-aliases/NodeAppearance.md) = `InFrontAppearance`

### Outlined

> **Outlined**: [`NodeAppearance`](../type-aliases/NodeAppearance.md) = `OutlinedAppearance`

## Defined in

[packages/cad-styling/src/NodeAppearance.ts:142](https://github.com/cognitedata/reveal/blob/2acd9d17229d2bc8e309653b4d6a39ad941e44f1/viewer/packages/cad-styling/src/NodeAppearance.ts#L142)


<!-- SOURCE_END: reveal/documentation\versioned_docs\version-4.x\api\@cognite\reveal\variables\DefaultNodeAppearance.md -->

================================================================================


<!-- SOURCE_START: reveal/documentation\versioned_docs\version-4.x\api\@cognite\reveal\variables\DefaultPointCloudAppearance.md -->
## File: reveal/documentation\versioned_docs\version-4.x\api\@cognite\reveal\variables\DefaultPointCloudAppearance.md

# Variable: DefaultPointCloudAppearance

> `const` **DefaultPointCloudAppearance**: [`CompletePointCloudAppearance`](../type-aliases/CompletePointCloudAppearance.md)

## Defined in

[packages/pointcloud-styling/src/PointCloudAppearance.ts:14](https://github.com/cognitedata/reveal/blob/2acd9d17229d2bc8e309653b4d6a39ad941e44f1/viewer/packages/pointcloud-styling/src/PointCloudAppearance.ts#L14)


<!-- SOURCE_END: reveal/documentation\versioned_docs\version-4.x\api\@cognite\reveal\variables\DefaultPointCloudAppearance.md -->

================================================================================


<!-- SOURCE_START: reveal/documentation\versioned_docs\version-4.x\api\@cognite\reveal\variables\REVEAL_VERSION.md -->
## File: reveal/documentation\versioned_docs\version-4.x\api\@cognite\reveal\variables\REVEAL_VERSION.md

# Variable: REVEAL\_VERSION

> `const` **REVEAL\_VERSION**: `string` = `process.env.VERSION`

## Defined in

[packages/api/index.ts:11](https://github.com/cognitedata/reveal/blob/2acd9d17229d2bc8e309653b4d6a39ad941e44f1/viewer/packages/api/index.ts#L11)


<!-- SOURCE_END: reveal/documentation\versioned_docs\version-4.x\api\@cognite\reveal\variables\REVEAL_VERSION.md -->

================================================================================


<!-- SOURCE_START: reveal/documentation\versioned_docs\version-4.x\api\index.md -->
## File: reveal/documentation\versioned_docs\version-4.x\api\index.md

`@cognite/reveal` supports `Node16` [module resolution](https://www.typescriptlang.org/tsconfig#moduleResolution), and if enabled in the consuming application will expose three modules:
- [@cognite/reveal](/api/@cognite/reveal/index.md) is the main module and has the main entry point of Reveal, [`Cognite3DViewer`](/api/@cognite/reveal/classes/Cognite3DViewer.md). CAD models are represented by [`CogniteCadModel`](/api/@cognite/reveal/classes/CogniteCadModel.md) and points clouds by [`CognitePointCloudModel`](/api/@cognite/reveal/classes/CognitePointCloudModel.md).
- [@congite/reveal/tools](/api/@cognite/reveal/tools/index.md) contains a set of tools, e.g. [`AxisViewTool`](/api/@cognite/reveal/tools/classes/AxisViewTool.md), [`TimelineTool`](/api/@cognite/reveal/tools/classes/TimelineTool.md), and [`HtmlOverlayTool`](/api/@cognite/reveal/tools/classes/HtmlOverlayTool.md) that works with `Cognite3DViewer`.
- [@cognite/reveal/extensions/datasource](/api/@cognite/reveal/extensions/datasource/index.md) allows providing custom data sources for geometry and model metadata.

:::note
If the consuming application does not enable `Node16` module resolution, then all types must be imported from `@cognite/reveal`.
:::


<!-- SOURCE_END: reveal/documentation\versioned_docs\version-4.x\api\index.md -->

================================================================================


<!-- SOURCE_START: reveal/documentation\versioned_docs\version-4.x\api\modules.md -->
## File: reveal/documentation\versioned_docs\version-4.x\api\modules.md

# @cognite/reveal

## Modules

- [@cognite/reveal](@cognite/reveal/index.md)
- [@cognite/reveal/extensions/datasource](@cognite/reveal/extensions/datasource/index.md)
- [@cognite/reveal/tools](@cognite/reveal/tools/index.md)


<!-- SOURCE_END: reveal/documentation\versioned_docs\version-4.x\api\modules.md -->

================================================================================


<!-- SOURCE_START: reveal/documentation\versioned_docs\version-4.x\api_readme.md -->
## File: reveal/documentation\versioned_docs\version-4.x\api_readme.md

`@cognite/reveal` supports `Node16` [module resolution](https://www.typescriptlang.org/tsconfig#moduleResolution), and if enabled in the consuming application will expose three modules:
- [@cognite/reveal](/api/@cognite/reveal/index.md) is the main module and has the main entry point of Reveal, [`Cognite3DViewer`](/api/@cognite/reveal/classes/Cognite3DViewer.md). CAD models are represented by [`CogniteCadModel`](/api/@cognite/reveal/classes/CogniteCadModel.md) and points clouds by [`CognitePointCloudModel`](/api/@cognite/reveal/classes/CognitePointCloudModel.md).
- [@congite/reveal/tools](/api/@cognite/reveal/tools/index.md) contains a set of tools, e.g. [`AxisViewTool`](/api/@cognite/reveal/tools/classes/AxisViewTool.md), [`TimelineTool`](/api/@cognite/reveal/tools/classes/TimelineTool.md), and [`HtmlOverlayTool`](/api/@cognite/reveal/tools/classes/HtmlOverlayTool.md) that works with `Cognite3DViewer`.
- [@cognite/reveal/extensions/datasource](/api/@cognite/reveal/extensions/datasource/index.md) allows providing custom data sources for geometry and model metadata.

:::note
If the consuming application does not enable `Node16` module resolution, then all types must be imported from `@cognite/reveal`.
:::


<!-- SOURCE_END: reveal/documentation\versioned_docs\version-4.x\api_readme.md -->

================================================================================


<!-- SOURCE_START: reveal/documentation\versioned_docs\version-4.x\concepts.md -->
## File: reveal/documentation\versioned_docs\version-4.x\concepts.md

---
id: concepts
title: Concepts
description: This page explains some basic concepts implemented by Reveal.
---

This page explains some basic concepts implemented by Reveal.

## CAD model structure

CAD models are typically structured in a tree structure, where larger components or groups of components are located near the root and individual pieces of equipment are located in near the leaf nodes. The hierarchy is defined by the source model and is processed and stored in CDF for efficient lookup and traversal. In Reveal, each of the nodes in the tree is called a "3D node". Each of the 3D nodes can have associated properties defined by the source model. Note that not all 3D nodes will contain geometry - in fact in most models only leaf nodes will contain geometry.

### Tree indices and node IDs

When processing 3D models in CDF, two IDs associated with each 3D node; tree index and node ID.

Tree indices are running numbers starting at 0 at the root 3D node increased by one for each traversed node. Node IDs are generated based on the name and placement in the node hierarchy. Node IDs are considered stable as long as the placement in the hierarchy is unchanged, while tree indices are not. For this reason, [Asset Mappings](https://docs.cognite.com/api/v1/#tag/3D-Asset-Mapping) are based on node IDs.

Reveal provides functionality for mapping between the two concepts by using `CogniteCadModel.mapNodeIdsToTreeIndices` and `CogniteCadModel.mapTreeIndicesToNodeIds`. Note however that these functions can be slow.


<!-- SOURCE_END: reveal/documentation\versioned_docs\version-4.x\concepts.md -->

================================================================================


<!-- SOURCE_START: reveal/documentation\versioned_docs\version-4.x\examples\antialiasing.mdx -->
## File: reveal/documentation\versioned_docs\version-4.x\examples\antialiasing.mdx

---
id: antialiasing
title: Enabling anti-aliasing
description: Shows the effects of the different anti-aliasing approaches supported by Reveal
---

import useBaseUrl from '@docusaurus/useBaseUrl';


Anti-aliasing is a technique to reduce the aliasing effects in the rendered result, and improves visual quality.

Reveal supports several anti-aliasing modes:
- [Fast approximate anti-aliasing (FXAA)](https://en.wikipedia.org/wiki/Fast_approximate_anti-aliasing) - a fast 
technique that reduces anti-aliasing at modest cost.
- [Multi-sample anti-antialiasing (MSAA)](https://en.wikipedia.org/wiki/Multisample_anti-aliasing) - hardware supported
supersampling technique. This produces high-quality anti-aliasing at some performance cost depending on how many samples
is taken per output pixel. Reveal supports 4, 8 or 16 samples. This mode is only supported on WebGL 2 (currently this 
means desktop computers, most Android devices, but not iOS - see [caniuse.com](https://caniuse.com/webgl2)).
- MSAA + FXAA - a combination of both modes where an FXAA pass is performed after the MSAA pass.
- Disabled - no anti-aliasing.

<a target='_blank' href={useBaseUrl('/img/antialias-comparison.png')}>
  <img src={useBaseUrl('/img/antialias-comparison.png')} alt="Comparison of different anti-aliasing techniques" />
</a>
It might be hard to notice the difference in a scaled image, click the image to open the full resolution image.

By default [Fast approximate anti-aliasing (FXAA)](https://en.wikipedia.org/wiki/Fast_approximate_anti-aliasing) is used.
This mode works on both WebGL 1 and WebGL 2. If WebGL 2 isn't supported, FXAA is used as a fallback.


```jsx
const viewer = new Cognite3DViewer(
  { 
    sdk: client, 
    antiAliasingHint: 'msaa4+fxaa' 
  });
```

Modes currently supported are `'disabled'`, `'fxaa'`, `'msaa2+fxaa'`, `'msaa4+fxaa'`, `'msaa8+fxaa'`, `'msaa16+fxaa'`,
`'msaa2'`, `'msaa4'`, `'msaa8'` and `'msaa16'`.

:::note
The examples in this documentation use `msaa4+fxaa`.
:::

<!-- SOURCE_END: reveal/documentation\versioned_docs\version-4.x\examples\antialiasing.mdx -->

================================================================================


<!-- SOURCE_START: reveal/documentation\versioned_docs\version-4.x\examples\axisviewtool.mdx -->
## File: reveal/documentation\versioned_docs\version-4.x\examples\axisviewtool.mdx

---
id: axisviewtool
title: Axis cross tool
description: Axis cross tool to show orientation of the model.
---

import { DemoWrapper } from '@site/versioned_docs/version-4.x/components/DemoWrapper';
import useBaseUrl from '@docusaurus/useBaseUrl';

To effectivly navigate a 3D model it is often useful to have an helper to show the orientation of the model. The `AxisViewTool` is
a configurable overlay that shows the current orientation of the model. It also reacts to clicks, orienting the camera to face
clicked.

<img src={useBaseUrl('/img/axisviewtool.png')} alt="AxisViewTool" />

The appearance of the tool is highly configurable, with options to set:
- Background color of each face of the orientation box
- Labels, font size and font color of each face
- Outline width and color of each face
- Compass north-orientation, label, font color and size
- Compass tick color
- Animation speed when clicking a face of the orientation box
- Size and padding
- Position - either absolute, or relative to a corner of the viewer

<DemoWrapper />

## Basic example

By default, the axis tool will be placed in the lower right corner
of the viewer, and initialization is very easy:

```jsx runnable-4x
// import { AxisViewTool } from '@cognite/reveal';

new AxisViewTool(viewer);
```

## Customize axis cross position

It is possible to specify a custom position for the axis tool.
Position can be specified using either `RelativePosition` or `AbsolutePosition`.
Using `AbsolutePosition` will position the axis cross at a specific position within the canvas of the viewer.

:::note
The Y axis is positive upwards, meaning that 0 is at the bottom of the viewer.
:::

```jsx runnable-4x
// import { AxisViewTool } from '@cognite/reveal';

new AxisViewTool(viewer, {
  position: {
    xAbsolute: viewer.domElement.clientWidth / 2 - 64,
    yAbsolute: 10
  },
  size: 128
});
```



Using `RelativePosition` will position the axis cross relative to a specific corner (will also handle screen resize).

```jsx runnable-4x
// import { AxisViewTool, Corner } from '@cognite/reveal';

const axisConfig = {
  position: {
    corner: Corner.TopRight,
    padding: new THREE.Vector2(50, 50)
  }
};
new AxisViewTool(viewer, axisConfig);
```

## Customize axis cross size and animation speed

When clicking a face of the orientation box, the camera will move to face the respective direction.
The animation speed of this movement can be configured. Size of the axis tool is also configurable.


```jsx runnable-4x
// import { AxisViewTool } from '@cognite/reveal';

const axisConfig = {
  animationSpeed: 2000, // Suuuuuper-slow
  size: 256 // In pixels
};
new AxisViewTool(viewer, axisConfig);
```


## Customize orientation faces

Each of the faces of the orientation box can be styled.

```jsx runnable-4x
// import { AxisViewTool } from '@cognite/reveal';

const axisConfig = {
  faces: {
    xNegativeFace: {
      label: 'Left',
      fontColor: new THREE.Color('white'),
      faceColor: new THREE.Color(0x660000)
    },
    xPositiveFace: {
      label: 'Right',
      fontColor: new THREE.Color('white'),
      faceColor: new THREE.Color(0x660000)
    },
    yNegativeFace: {
      label: 'Down',
      fontColor: new THREE.Color('white'),
      faceColor: new THREE.Color(0x006600)
    },
    yPositiveFace: {
      label: 'Top',
      fontColor: new THREE.Color('white'),
      faceColor: new THREE.Color(0x006600)
    },
    zNegativeFace: {
      label: 'Back',
      fontColor: new THREE.Color('white'),
      faceColor: new THREE.Color(0x000066)
    },
    zPositiveFace: {
      label: 'Front',
      fontColor: new THREE.Color('white'),
      faceColor: new THREE.Color(0x000066)
    }
  }
};
new AxisViewTool(viewer, axisConfig);
```

In addition to the settings demonstrated above, the following settings can be set:
- `fontSize` - size of the label font. Automatically determined when undefined
- `outlineColor` - color of the outline of each of the faces
- `outlineSize` - width of the outline. Automatically determine when undefined

## Customize compass

The compass at the base can be customized to change the orientation label (which
defaults to N for North), font color and size and tick color.


```jsx runnable-4x
// import { AxisViewTool } from '@cognite/reveal';

const axisConfig = {
  compass: {
    ringLabel: 'S',
    labelDelta: 0, // Place at South
    fontColor: new THREE.Color('white'),
    tickColor: new THREE.Color('white')
  }
};
new AxisViewTool(viewer, axisConfig);
```


<!-- SOURCE_END: reveal/documentation\versioned_docs\version-4.x\examples\axisviewtool.mdx -->

================================================================================


<!-- SOURCE_START: reveal/documentation\versioned_docs\version-4.x\examples\cad-2doverlay.mdx -->
## File: reveal/documentation\versioned_docs\version-4.x\examples\cad-2doverlay.mdx

---
id: cad-2doverlay
title: HTML overlays
description: Demo shows how to add an HTML overlay over 3D objects.
---

import { DemoWrapper } from '@site/versioned_docs/version-4.x/components/DemoWrapper';
import useBaseUrl from '@docusaurus/useBaseUrl';

A common requirement for a 3D application is to add information overlays hovering over 3D objects
to provide details or draw the attention to a given point. This can be done by placing HTML elements over the 3D canvas
that follows the object it's attached to. `HtmlOverlayTool` is a convinience tool to manage overlays. The tool
also supports "clustering", i.e. that overlapping elements are combined into a single element to avoid clustering.

Note that these overlays always will be placed on top of the 3D viewer, they will not be hidden when the object is
obscured by other objects. To achieve this it's necessary to use custom 3D objects.

<DemoWrapper />

Attaching HTML elements to 3D objects/positions requires the following operations:

1. Create an HTML element and apply style `position: absolute` to the element. There also some other recommended
   styles that should be applied (see below).
2. Determine 3D world coordinate of the pivot point (e.g. using intersection when user clicks an object)
3. Attach overlay using `HtmlOverlayTool.add`.

This will attach the overlay to the 2D position corresponding to the 3D coordinate, then it will provide the updated
coordinate whenever navigating the viewer.

:::note
The following CSS style is recommended for overlays:
```css
position: absolute; /* Required */

/* Anchor to the center of the element and ignore events */
transform: translate(-50%, -50%);
pointer-events: none;
touch-action: none;
user-select: none;
```
:::

```jsx runnable-4x
// import { HtmlOverlayTool } from '@cognite/reveal';

function createOverlay() {
  const element = document.createElement('div');
  element.innerText = `Overlay!`;
  element.style.cssText = `
    position: absolute;

    /* Anchor to the center of the element and ignore events */
    transform: translate(-50%, -50%);
    pointer-events: none;
    touch-action: none;
    user-select: none;

    /* Make it look nice */
    padding: 10px;
    minHeight: 50px;
    color: #fff;
    background: #232323da;
    borderRadius: 0.25em;
    border: '#ffffff22 solid 2px;
  `;
  return element;
}

// Attach overlay on click
const overlays = new HtmlOverlayTool(viewer);
viewer.on('click', async event => {
  // Find 3D coordinate of what the user clicks
  const intersection = await viewer.getIntersectionFromPixel(event.offsetX, event.offsetY);
  if (intersection) {
    const el = createOverlay();
    overlays.add(el, intersection.point);
    // Remove overlay after 5 seconds
    setTimeout(() => overlays.remove(el), 5000);
  }
});
```

It's also possible to apply styling based on the position of the
overlay, e.g. to vary the opacity of the overlay based on distance
from the camera. To do this, provide an `options`-argument with a
`positionUpdatedCallback` to `HtmlOverlayTool.add`. This
callback is triggered every time the HTML overlay is updated.

```js runnable-4x
// import { HtmlOverlayTool } from '@cognite/reveal';

function createOverlay(pressure) {
  const color = pressure < 30 ? '#fff' : (pressure > 80 ? '#aa1100' : '#aaaa00');
  const element = document.createElement('div');
  element.innerText = `${pressure} PSI`;
  element.style.cssText = `
    position: absolute;

    /* Anchor to the center of the element and ignore events */
    transform: translate(-50%, -50%);
    pointer-events: none;
    touch-action: none;
    user-select: none;

    /* Make it look nice */
    padding: 10px;
    color: ${color};
    background: #232323da;
    borderRadius: 0.25em;
    border: '#ffffff22 solid 2px;
  `;
  return element;
}

const overlays = new HtmlOverlayTool(viewer);
viewer.on('click', async event => {
  // Find 3D coordinate of what the user clicks
  const intersection = await viewer.getIntersectionFromPixel(event.offsetX, event.offsetY);
  if (intersection) {
    const pressure = Math.floor(Math.random() * 110);
    const el = createOverlay(pressure);
    const options = {
      positionUpdatedCallback: (element, position2D, position3D, distanceToCamera, userData) => {
        // Compute opacity based on distance to camera
        const opacity = 0.3 + 0.7 * (1.0 - (Math.min(Math.max(distanceToCamera, 10), 110) - 10) / 100.0);
        element.style.opacity = opacity;
      }
    };
    overlays.add(el, intersection.point, options);
  }
});
```

As shown above, overlays can be removed using `remove()`. It is also possible to remove all
overlays by calling `clear()` or by disposing the tool using `dispose()`. The tool cannot
be used after calling `dispose()`.

Overlays can change visibility of elements with `visible(true/false)`, which will unhide/hide all the elements in the overlay.

## Clustering overlays

The overlay tool also support clustering of elements. When enabled, the tool will detect
overlapping HTML elements and combine them into a single element by invoking a callback
factory for creating a "composite" element. This is useful to avoid cluttering when theres
a high number of overlays in the view.

Clustering is enabled by providing an options-argument to the constructor or `HtmlOverlayTool`
and provide a cluster mode and a callback for creating a "composite element" based on
a set a set of clustered overlay elements. Currently the only mode supported is `overlapByScreenSpace`
which causes overlay elements that overlap on screen to be replaced with a composite
element.

Each overlay added to `HtmlOverlayTool` may have assosciated, custom `userData`. This data
can be used to create custom labels for composite elements.

In the following example, overlays are added on click in the model. When overlays overlap
they are replaced with composite elements. `userData` is used to display a value range
of the underlying overlay elements.

```js runnable-4x
// import { HtmlOverlayTool } from '@cognite/reveal';

function createOverlay(text) {
  const element = document.createElement('div');
  element.innerText = text;
  element.style.cssText = `
    position: absolute;

    /* Anchor to the center of the element and ignore events */
    transform: translate(-50%, -50%);
    pointer-events: none;
    touch-action: none;
    user-select: none;

    /* Make it look nice */
    padding: 10px;
    minHeight: 50px;
    color: #fff;
    background: #232323da;
    borderRadius: 0.25em;
    border: '#ffffff22 solid 2px;
  `;
  return element;
}

function createClusterElementCallback(cluster) {
  const minPressure = cluster.reduce((min, x) => Math.min(x.userData.pressure, min), Infinity);
  const maxPressure = cluster.reduce((max, x) => Math.max(x.userData.pressure, max), -Infinity);
  const compositeElement = createOverlay(`${minPressure}-${maxPressure} PSI`);
  compositeElement.style.color = '#999';
  return compositeElement;
}

const overlays = new HtmlOverlayTool(viewer, {
    clusteringOptions: { mode: 'overlapInScreenSpace', createClusterElementCallback }
  });
viewer.on('click', async event => {
  // Find 3D coordinate of what the user clicks
  const intersection = await viewer.getIntersectionFromPixel(event.offsetX, event.offsetY);
  if (intersection) {
    const pressure = Math.floor(Math.random() * 110);
    const el = createOverlay(`${pressure} PSI`);
    overlays.add(el, intersection.point, { userData: { pressure } });
  }
});
```

<!-- SOURCE_END: reveal/documentation\versioned_docs\version-4.x\examples\cad-2doverlay.mdx -->

================================================================================


<!-- SOURCE_START: reveal/documentation\versioned_docs\version-4.x\examples\cad-3dobjects.mdx -->
## File: reveal/documentation\versioned_docs\version-4.x\examples\cad-3dobjects.mdx

---
id: cad-3dobjects
title: Add custom 3D objects
description: Extend the scene with custom ThreeJS objects.
---

import { DemoWrapper } from '@site/versioned_docs/version-4.x/components/DemoWrapper';
import useBaseUrl from '@docusaurus/useBaseUrl';

Sometimes it's useful to add custom content to the 3D scene to model data Reveal doesn't
support or to customize the 3D environment. Reveal supports this by using the
`Cognite3DViewer.addObject3D`-function which accepts [ThreeJS](https://threejs.org/) objects.

:::note
Reveal uses an "implicit lighting model", i.e. no lights are added to the scene. If you
need lights this needs to be added to the viewer scene if the added objects isn't "unlit".
:::

<DemoWrapper />

## Adding markers to the scene on clicks

The following example reacts to clicks in the scene and adds markers to the positions clicked.

```jsx runnable-4x
const markerGeometry = new THREE.SphereGeometry(1, 10, 10);
const markerMaterial = new THREE.MeshBasicMaterial({
  color: 'blue',
  transparent: true,
  opacity: 0.7
});
viewer.on('click', async event => {
  const intersection = await viewer.getIntersectionFromPixel(event.offsetX, event.offsetY);
  if (intersection) {
    const marker = new THREE.Mesh(markerGeometry, markerMaterial);
    marker.position.copy(intersection.point);
    viewer.addObject3D(marker);
  }
});
```

## Load external GLTF content

[GLTF](https://www.khronos.org/gltf/) is a commonly used 3D format for content delivery - think of it as the JPG of 3D.
GLTF is supported by ThreeJS and can easily be added to Reveal using [`GLTFLoader`](https://threejs.org/docs/#examples/en/loaders/GLTFLoader).
GLTF is great for creating custom 3D content with high fidelity, and is supported by most 3D design software,
e.g. [Blender](https://www.blender.org/). There's also several services for generating GLTF content (e.g. [ElevationAPI](https://elevationapi.com/))
and market places for 3D models for download (e.g. [Sketchfab](https://sketchfab.com/) and [Turbosquid](https://www.turbosquid.com/)) - allowing you
to quickly build "digital worlds" with Reveal.

In the following example, a GLTF model is loaded and placed in the clicked positions in the CAD model. The 3D model is from 
[Grand Dog Studio on Sketchfab](https://sketchfab.com/3d-models/3d-industrial-tanker-a9d3dac0c55042989309bdcf68c60f76) under 
[the CC 4.0 license](https://creativecommons.org/licenses/by/4.0/).

```jsx runnable-4x
// import { GLTFLoader } from 'three/examples/jsm/loaders/GLTFLoader';

const loader = new GLTFLoader();
function onLoaded(gltf) {
  gltf.scene.scale.set(0.2, 0.2, 0.2);
  const objectBounds = new THREE.Box3().setFromObject(gltf.scene);

  viewer.on('click', async event => {
    const intersection = await viewer.getIntersectionFromPixel(event.offsetX, event.offsetY);
    if (intersection) {
      const clonedScene = gltf.scene.clone();
      intersection.point.y += (objectBounds.max.y - objectBounds.min.y) * 0.5;
      clonedScene.position.copy(intersection.point);
      viewer.addObject3D(clonedScene);
    }
  });

  alert('Loaded GLTF! Click the 3D model to place model');
}
function onProgress() {
}
function onError(error) {
  alert('Loading GLTF failed: ' + error);
}

// Add a "sun"
const sun = new THREE.PointLight();
sun.position.set(500, 500, 500);
viewer.addObject3D(sun);
viewer.addObject3D(new THREE.AmbientLight())

// Load and add 3D model
loader.load(urls.gltfModelUrl, onLoaded, onProgress, onError);
```

## Add environment

To make a model feel more natural it might be useful to add an environment. The following
example adds sky and a sea effect for the example oil rig.

<img
  src={useBaseUrl('/img/cad-skyandocean.png')}
  alt="Oil rig with sky and ocean"
/>

Below you'll find [an interactive example](#interactive-example), but first lets walk through
the different parts.
See the bottom of this page for an interactive example.

First, let's encapsulate the model in a large sky-textured sphere to create an illusion of
skies. The sphere map is available from [Free HDR - EXR SKIES-blog](http://freepanorama.blogspot.com/).

```js
const modelCenterAtSeaLevel = model
  .getModelBoundingBox()
  .getCenter(new THREE.Vector3());
modelCenterAtSeaLevel.y = 0.0;

// Skybox
const skyBox = new THREE.Mesh(
  new THREE.SphereGeometry(3000, 15, 15),
  new THREE.MeshBasicMaterial({
    side: THREE.BackSide,
    // Skybox texture from http://freepanorama.blogspot.com/2010/01/sky7-spherical.html
    map: new THREE.TextureLoader().load(urls.skyUrl),
  })
);
skyBox.position.copy(modelCenterAtSeaLevel);
viewer.addObject3D(skyBox);
```

This looks a bit better, but the oil rig appears to be floating mid-air at this point. Lets
add an ocean. A plane is rendered at the sea level.

```js
// Water
const waterGeometry = new THREE.PlaneGeometry(6000, 6000, 63, 63);

const material = new THREE.MeshBasicMaterial({
  map: new THREE.TextureLoader().load(
      'https://threejs.org/examples/textures/water.jpg',
      (texture) => {
      texture.wrapS = texture.wrapT = THREE.RepeatWrapping;
    }),
  color: { value: new THREE.Color(0x0099ff)},
  side: THREE.DoubleSide
});

const water = new THREE.Mesh(waterGeometry, material);
// Make the ocean horizontal
water.rotation.x = -Math.PI / 2;
water.position.copy(modelCenterAtSeaLevel);
viewer.addObject3D(water);
```

### Interactive example

Below is the complete code for adding a skybox and ocean to the scene.

```jsx runnable-4x
const modelCenterAtSeaLevel = model
  .getModelBoundingBox()
  .getCenter(new THREE.Vector3());
modelCenterAtSeaLevel.y = 0.0;

// Skybox
const skyBox = new THREE.Mesh(
  new THREE.SphereGeometry(3000, 15, 15),
  new THREE.MeshBasicMaterial({
    side: THREE.BackSide,
    // Skybox texture from http://freepanorama.blogspot.com/2010/01/sky7-spherical.html
    map: new THREE.TextureLoader().load(urls.skyUrl),
  })
);
skyBox.position.copy(modelCenterAtSeaLevel);
viewer.addObject3D(skyBox);

// Water
const waterGeometry = new THREE.PlaneGeometry(6000, 6000, 63, 63);

const material = new THREE.MeshBasicMaterial({
  map: new THREE.TextureLoader().load(
      'https://upload.wikimedia.org/wikipedia/commons/thumb/b/b3/Water_texture_1390894_Nevit.jpg/2048px-Water_texture_1390894_Nevit.jpg',
      (texture) => {
      texture.wrapS = texture.wrapT = THREE.RepeatWrapping;
    }),
  color: { value: new THREE.Color(0x0099ff)},
  side: THREE.DoubleSide
});

const water = new THREE.Mesh(waterGeometry, material);
// Make the ocean horizontal
water.rotation.x = -Math.PI / 2;
water.position.copy(modelCenterAtSeaLevel);
viewer.addObject3D(water);

//Make sure the Skybox & ocean plane have applied textures
setTimeout(() => {
  viewer.requestRedraw();
}, 100);

```


<!-- SOURCE_END: reveal/documentation\versioned_docs\version-4.x\examples\cad-3dobjects.mdx -->

================================================================================


<!-- SOURCE_START: reveal/documentation\versioned_docs\version-4.x\examples\cad-basic.mdx -->
## File: reveal/documentation\versioned_docs\version-4.x\examples\cad-basic.mdx

---
id: cad-basic
title: Loading CAD models
description: Demo shows how to load 3d models from CDF with Cognite3DViewer.
---

`Cognite3DViewer` is a component that eases the migration from [@cognite/3d-viewer](https://www.npmjs.com/package/@cognite/3d-viewer).
It has mostly the same API and could be used when you don't need to control the scene or render loop,
i.e., just want to view some 3d models from CDF.

import { DemoWrapper } from '@site/versioned_docs/version-4.x/components/DemoWrapper';

<DemoWrapper />

```jsx
import { CogniteClient } from '@cognite/sdk';
import { Cognite3DViewer } from '@cognite/reveal';

const loginManager = new LoginManager('publicdata', 'api');
const client = new CogniteClient({
  appId: 'myCadAppId',
  project: loginManager.project,
  getToken: async () => loginManager.getToken()
});

await client.authenticate();

// some div in your html page for Cognite3DViewer to insert a canvas
const domElement = document.getElementById('canvas-wrapper');

async function main() {
  const viewer = new Cognite3DViewer({ sdk: client, domElement });

  // load a model and add it on 3d scene
  // https://publicdata.fusion.cognite.com/publicdata/3d-models/3356984403684032/revisions/6664823881595566
  const model = await viewer.addModel({
    modelId: 3356984403684032,
    revisionId: 6664823881595566,
  });
  viewer.loadCameraFromModel(model);

  // call viewer.dispose() when you don't need the viewer anymore
}
main();
```

`CogniteClient` version 6 and later requires a `getToken` function for authentication.
For this documentation we have made a class called `LoginManager` that handles this. To
access the `publicdata` project used in the examples in this documentation, you may use the `LoginManager` [class yourself](https://github.com/cognitedata/reveal/blob/a722e6ef34e026be9fa88d90e97bcf94a6610432/documentation/docs/utils/LoginManager.ts). Note that
accessing data in other projects may require different authentication flows not supported by the LoginManager.
You can read more about different types of authentication flows in [the CogniteClient documentation](https://docs.cognite.com/dev/guides/sdk/js/authentication/).

Models can be temporarily hidden using `CogniteCadModel.visible`. Note that
the viewer must be explicitly re-rendered after setting the visibility flag:

```js runnable-4x
model.visible = false;
viewer.requestRedraw();

setTimeout(() => {
  model.visible = true;
  viewer.requestRedraw();
}, 5000);
```

Hiding models doesn't free any memory occupied by the model and should only be used
to temporarily hide a model when it's expected that it will shortly be shown again.

To also reclaim memory and permanently unloading the model, use
`Cognite3DViewer.removeModel()`:

```js runnable-4x
viewer.removeModel(model)
```

## Default CDF transformation

On loading a model revision, Reveal automatically retrieves and applies the transformation stored in CDF for that revision. The transformation is composed of the `translation`, `rotation` and `scale` fields in the revision data, which may be set using the [CDF Rest API](https://docs.cognite.com/api/v1/#tag/3D-Model-Revisions/operation/update3DRevisions). The transformation is applied to every vertex/point in the input data; each vertex position is first scaled, then rotated, and finally translated.

The `rotation` component is specified as an array of three floating point numbers. The elements are the rotation angles in radians around the X, Y and Z axes respectively. The vertices are first rotated around its X axis, then its Y axis (which has potentially been rotated by the first rotation), then its Z axis (which may have been rotated by the other two).

Aftewards, the model is transformed from CDF coordinates to Reveal coordinates. Since the default CDF transformation described above is applied _before_ the CDF-to-Reveal coordinate transformation, it happens in [_CDF_ space](/docs/#a-note-on-coordinate-systems).

## Setting custom background image

The recommended way to set a custom background image for Reveal is to add the image as background to the DOM and make the background color transparent by applying an alpha value of 0.
See an example of this below.

```js runnable-4x
viewer.setBackgroundColor({ alpha: 0.0 });
viewer.domElement.style.backgroundImage = "url('https://i.imgur.com/8tcxHWh.jpeg')";
```

## Creating screenshots

Use `getScreenshot` to create a screenshot from the current camera position. By default the resolution of the image is set to match the size of the render canvas, but a custom resolution can be provided.
Whether or not to include UI in the screenshot can also be specified. When drawing UI, only the viewer DOM element and its children will be included in the image. The DOM is scaled to fit any provided resolution, 
and as a result some elements can be positioned incorrectly in regards to the 3D render. 

Note that `html2canvas` is used to draw UI and this has some limitations on what CSS properties it is able to render. For details see [the html2canvas documentation](https://html2canvas.hertzen.com/documentation).

```js runnable-4x
async function createScreenshot() {
  const url = await viewer.getScreenshot(1920, 1080, true);
  if (url) {
    const link = document.createElement('a');
    link.download = 'test';
    link.href = url;
    link.click();
  }
}
createScreenshot();
```

## Only loading a part of the model

In some cases, it might be useful to restrict the area for which geometry is loaded to only show a partial
view. This can be done using a `geometryFilter` which allows only loading geometry within a provided box:

```js runnable-4x
viewer.models.forEach(x => viewer.removeModel(x));

async function addFilteredModel() {
  const model = await viewer.addModel({
    modelId: 3356984403684032,
    revisionId: 6664823881595566,
    geometryFilter: {
      // Only load geometry inside a box around origin with 50x50 horizontal extent and 10 vertical extent.
      boundingBox: new THREE.Box3(new THREE.Vector3(75, 50, 49), new THREE.Vector3(125, 100, 59))
    }
  });
  viewer.fitCameraToModel(model);
}
addFilteredModel();
```

By default, the bounds provided must be in "CDF coordinates". This is e.g. suitable if you are retrieving coordinates
directly from the [Nodes API](https://docs.cognite.com/api/v1/#operation/get3DNodes) to for instance show the area
around a given node. If the coordinates are in "Reveal coordinates" (i.e. in
[the WebGL coordinate system](https://www.tutorialspoint.com/webgl/webgl_basics.htm)) the `geometryFilter` can be
set up using `isBoundingBoxInModelCoordinates`:

```js runnable-4x
viewer.models.forEach(x => viewer.removeModel(x));

async function addFilteredModel() {
  const model = await viewer.addModel({
    modelId: 3356984403684032,
    revisionId: 6664823881595566,
    geometryFilter: {
      // Only load geometry inside a box around origin with 50x50 horizontal extent and 10 vertical extent.
      boundingBox: new THREE.Box3(new THREE.Vector3(75, 49, -100), new THREE.Vector3(125, 59, -50)),
      // Instruct Reveal that the coordinates already are relative to the coordinates of the model
      isBoundingBoxInModelCoordinates: true
    }
  });
  viewer.fitCameraToModel(model);
}
addFilteredModel();
```


<!-- SOURCE_END: reveal/documentation\versioned_docs\version-4.x\examples\cad-basic.mdx -->

================================================================================


<!-- SOURCE_START: reveal/documentation\versioned_docs\version-4.x\examples\cad-explode.mdx -->
## File: reveal/documentation\versioned_docs\version-4.x\examples\cad-explode.mdx

---
id: cad-explode
title: Exploded view tool
description: Demo use the exploded view tool to explode and inspect a given node subtree.
---

import { DemoWrapper } from '@site/versioned_docs/version-4.x/components/DemoWrapper';
import useBaseUrl from '@docusaurus/useBaseUrl';

This section describes the exploded view tool, which contains helper functions and logic for inspecting and exploding a given asset.
The constructor of this tool needs to be supplied with a [tree index](../concepts.md) which is the tree index of the root of the asset, and an instance of the `Cognite3DModel` that the asset belongs to.

:::note
For performance reasons, the root tree index must have a subtree size of less than 1000, else it will throw an error.
:::

<DemoWrapper />

`ExplodedViewTool` contains two instance methods: `expand` and `reset`.
`expand` takes a float describing how far the individual nodes should be expanded (this will vary based on the initial vector between the node and root).
`reset` resets the tool and any transform that has been applied to any nodes.

:::note
`ExplodedViewTool` contains a promise: `readyPromise`, which indicates when the tool is ready to be used.
This indicates if the tool has cached necessary data from the Cognite Fusion API to determine the individual locations of the nodes in the subtree.
:::

Below is an example that expands a given pipe asset (that has a tree index of `570730`) which is animated by a sine function.
Another good usecase would be to bind the `expand` function to a slider which the user can manipulate to expand the asset.


```jsx runnable-4x
// import { ExplodedViewTool } from '@cognite/reveal/tools';
async function animate() {
  const rootTreeIndex = 570730;

  const explodeTool = new ExplodedViewTool(rootTreeIndex, model);

  model.setDefaultNodeAppearance(DefaultNodeAppearance.Hidden);
  const explodedIndices = new TreeIndexNodeCollection(
    await model.getSubtreeTreeIndices(rootTreeIndex)
  );
  model.assignStyledNodeCollection(explodedIndices, DefaultNodeAppearance.Default);

  const rootBoundingBox = await model.getBoundingBoxByTreeIndex(rootTreeIndex);
  viewer.fitCameraToBoundingBox(rootBoundingBox, 0);
  await explodeTool.readyPromise;

  const clock = new THREE.Clock(true);
  clock.start();

  setInterval(() =>{
    const elapsedTime = clock.getElapsedTime();
    const expandRadius = Math.sin(elapsedTime) * 0.5 + 0.5;
    explodeTool.expand(expandRadius);
  }, 20);
}
animate();
```


<!-- SOURCE_END: reveal/documentation\versioned_docs\version-4.x\examples\cad-explode.mdx -->

================================================================================


<!-- SOURCE_START: reveal/documentation\versioned_docs\version-4.x\examples\cad-prioritized-nodes.mdx -->
## File: reveal/documentation\versioned_docs\version-4.x\examples\cad-prioritized-nodes.mdx

---
id: cad-prioritized-nodes
title: Prioritize nodes for loading
describe: Reveal may be instructed to treat specific nodes as "prioritized" with regards to geometry streaming.
---

import { DemoWrapper } from '@site/versioned_docs/version-4.x/components/DemoWrapper';

A developer may assign nodes of a model as "prioritized" in relation to geometry loading.
By giving nodes a "prioritization weight", a developer can influence Reveal to load, or keep loaded, certain parts of a model when it would otherwise discard them in favor of e.g. geometry that is closer to the camera. Note that assigning prioritization weights to nodes does not guarantee that they will be loaded at all times; the loader will still account for the rendering budget.

Nodes are given load priority through the node styling API. The `NodeAppearance` type (see [Cad Styling](cad-styling)) includes the optional field `prioritizedForLoadingHint` which can be used to provide a load priority to the node collection. Higher values will make the related geometry more likely to be loaded. While any number can be used as the load priority, it is recommended to use values between 1 and 10. 5 is considered a reasonable default value.

Not all node collection types support the priority hint. An overview of current support is provided in the following table.

| NodeCollectionType                   | Supports `prioritizedForLoadingHint`? |
| ------------------------------------ | ------------------------------------- |
| `TreeIndexNodeCollection`            | Must be manually provided, see below  |
| `PropertyFilterNodeCollection`       | Yes                                   |
| `SinglePropertyFilterNodeCollection` | Yes                                   |
| `AssetNodeCollection`                | Yes                                   |
| `InvertedNodeCollection`             | No                                    |
| `UnionNodeCollection`                | Yes                                   |
| `IntersectionNodeCollection`         | Yes                                   |

:::note
Currently, `TreeIndexNodeCollection` does not take responsibility to compute the location of the geometry it holds, which the loader needs to prioritize the geometry. Alternatively, the developer may supply this information themselves by using the `addAreaPoints()` and `addAreas()` methods on the `TreeIndexNodeCollection`.
:::

A node collection that is the result of an operation (e.g. a union) involving another node collection that does not support `prioritizedForLoadingHint`, will not support the `prioritizedForLoadingHint` field either.

## Prioritize highlighted nodes for loading

Many use cases in Reveal involve highlighting a few nodes while the rest of the model is hidden or ghosted. These use cases can benefit from the prioritization feature. Assigning a priority to the nodes of interest in addition to the hightlighting, makes them more likely to be loaded even when the camera is far away:

```js
// import { SinglePropertyFilterNodeCollection } from '@cognite/reveal'

const nodeSet = new SinglePropertyFilterNodeCollection(sdk, model, { requestPartitions: 10 });
const names = ['/60-EL-9016-Q200-E01', '/60-EL-9016-Q200-E02', '/60-EL-9016-Q200-E03'];
nodeSet.executeFilter('Item', 'Name', names);

model.setDefaultNodeAppearance(DefaultNodeAppearance.Ghosted);
model.assignStyledNodeCollection(nodeSet, { ...DefaultNodeAppearance.Highlighted, prioritizedForLoadingHint: 5 });
```

<!-- SOURCE_END: reveal/documentation\versioned_docs\version-4.x\examples\cad-prioritized-nodes.mdx -->

================================================================================


<!-- SOURCE_START: reveal/documentation\versioned_docs\version-4.x\examples\cad-save-viewerstate.mdx -->
## File: reveal/documentation\versioned_docs\version-4.x\examples\cad-save-viewerstate.mdx

---
id: cad-save-viewerstate
title: Saving viewer state
description: Demo shows how to save viewerstate of 3d models from CDF with Cognite3DViewer.
---
import { DemoWrapper } from '@site/versioned_docs/version-4.x/components/DemoWrapper';

Reveal supports saving the camera state and styled filters that have been applied to the loaded model(s).
This functionality can help support sharing links and local storage of a given view.
Internally the input to a given filter is stored and is replayed when restoring the view.
This usually means that substantially less data needs to be serialized in order to share the given state of the viewer.
The serialized JSON blob also keeps information about styling/filtering of the model by storing all [styled sets](./cad-styling.mdx).

<DemoWrapper />

## Getting the viewer state
In the example below we apply some filter to our loaded model using the `NodeCollection` type from [Styling CAD models](./cad-styling.mdx).
Then we can call the ```viewer.getViewState()``` function which return a serialized JSON blob containing the view state.
Depending on the application, the view state can be additionally transformed into e.g. a URL parameter and transferred through a link.

In the example below, we keep simply print it to the developer console.

```js runnable-4x
const allPipes = new PropertyFilterNodeCollection(sdk, model);
allPipes.executeFilter({'PDMS': {'Type': 'PIPE'}});
model.setDefaultNodeAppearance(DefaultNodeAppearance.Ghosted);
model.assignStyledNodeCollection(allPipes, { renderGhosted: false, color: new THREE.Color(0.15, 0.8, 0.08) } );

console.log(JSON.stringify(viewer.getViewState(), null, 2));
```

## Setting the viewer state
Restoring the viewer state is simply a matter of feeding back the JSON blob retrieved from ```const myState = viewer.getViewState()``` into ```viewer.setViewState(myState)```.
In the example below, a previously stored state is applied which applies a red color to nodes that have an attribute `'PDMS.Type'`.

:::note
Setting the viewer state assumes that model has already been loaded.
An error will be thrown if a given state is loaded for a model which does not exist.
:::

```js runnable-4x

const myState = {
  "camera": {
    "position": {
      "x": 165.603,
      "y": 41.649,
      "z": -10.940
    },
    "target": {
      "x": 130.537,
      "y": 49.138,
      "z": -119.095
    }
  },
  "models": [
    {
      "defaultNodeAppearance": {
        "renderGhosted": true
      },
      "modelId": 3356984403684032,
      "revisionId": 6049696084265067,
      "styledSets": [
        {
          "token": "PropertyFilterNodeCollection",
          "state": {
            "PDMS": {
              "Type": "PIPE"
            }
          },
          "options": {
            "requestPartitions": 1
          },
          "appearance": {
            "renderGhosted": false,
            "color": [
              200,
              40,
              20
            ]
          }
        }
      ]
    }
  ]
};

viewer.setViewState(myState);
```

## Serializing and deserializing custom node collections

When working with styled custom node collections, the Reveal viewer needs to know how to serialize and deserialize the set.
Serialization is handled through the abstract method `serialize` which needs to be implemented when extending `NodeCollection`.
The output of `serialize` is of type `SerializedNodeCollection` and contains a `token` which is used to recreate
the `NodeCollection` during deserialization, and a `state` object which contains the data needed to restore
the `NodeCollection`. It is up to the application developer to fill this state object with any nessesary
data needed to recreate the state of the `NodeCollection`. An optional `options` object can also be supplied
containing any metadata for loading data (e.g. the number of API calls to fetch the needed data in parallel).
The contents returned from `serialize` is contained in the result of `getViewState`.

In addition to serialization, Reveal also needs to know how to recreate the custom `NodeCollection` during
deserialization. This is done by calling the free-function `registerNodeCollectionType` with the same `token`
defined by the custom `NodeCollection` and a lambda function which instantiates and restore the state of
the `NodeCollection`. The lambda function has two parameters: the `descriptor` containing the state and
options which should be applied to the `NodeCollection` and the context containing an instance of
the [CogniteClient from the Cognite SDK](https://docs.cognite.com/dev/guides/sdk/js/) and the `CogniteCadModel`
which the `NodeCollection` was originally applied to. It is up to the application developer how and if they
want to use the context and/or descriptor, but it is provided as a convinience.

An example of a simple custom `NodeCollection` can be seen below.
For more information on creating a custom `NodeCollection`, see [create custom node collections](cad-styling-custom).

```js
// import { IndexSet, NodeCollection, registerNodeCollectionType } from '@cognite/reveal';

class MyNodeCollection extends NodeCollection {

  isLoading = false;
  _indexSet = new IndexSet();

  constructor(model) {
    // token used for serialization / deserialization
    super('MyNodeCollection');

    for (let i = 0; i < model.nodeCount / 2; i++) {
      this._indexSet.add(i);
    }
  }

  getIndexSet() {
    return this._indexSet;
  }

  serialize() {
    return {
      token: this.classToken,
      state: this._indexSet.toRangeArray()
    }
  }

  clear() {
    this._indexSet.clear();
    this.notifyChanged();
  }
}

// Register deserializer for type
registerNodeCollectionType(
  'MyNodeCollection',
  (descriptor, context) => {
    return Promise.resolve(new MyNodeCollection(context.model));
  }
);
```


<!-- SOURCE_END: reveal/documentation\versioned_docs\version-4.x\examples\cad-save-viewerstate.mdx -->

================================================================================


<!-- SOURCE_START: reveal/documentation\versioned_docs\version-4.x\examples\cad-styling-assets.mdx -->
## File: reveal/documentation\versioned_docs\version-4.x\examples\cad-styling-assets.mdx

---
id: cad-styling-assets
title: Filtering nodes by assets
describe: Applying styles to assets and assosciated asset mappings from Cognite Fusion
---

import { DemoWrapper } from '@site/versioned_docs/version-4.x/components/DemoWrapper';

In Cognite Data Fusion, assets and asset hierarchies are digital representations of objects
or groups of objects from the physical world. Assets can be assosciated with different data
types, such as documents, time series and events and serves as a "hub" to look up data for
physical equipment. See [Cognite Data Fusion documentation](https://docs.cognite.com/dev/concepts/resource_types/assets.html)
for more information about assets.

3D nodes can be ["asset mapped"](https://docs.cognite.com/api/v1/#tag/3D-Asset-Mapping) to
assets in Cognite Data Fusion. Reveal supports styling nodes mapped to an asset by using
`AssetNodeCollection`.

<DemoWrapper />

# Style all asset mapped nodes

If no options are provided, `AssetNodeCollection` includes all asset mapped nodes
for the model:

```js runnable-4x
const allAssetMappedNodes = new AssetNodeCollection(sdk, model);
// When no asset ID is provided, all nodes mapped to assets are included
allAssetMappedNodes.executeFilter({});
model.setDefaultNodeAppearance(DefaultNodeAppearance.Ghosted);
model.assignStyledNodeCollection(allAssetMappedNodes, { renderGhosted: false, outlineColor: NodeOutlineColor.Cyan } );
```

# Style a given asset

It is also possible to only style nodes mapped to a single asset. Assets are identified by their
'ID':

```js runnable-4x
const assetNodes = new AssetNodeCollection(sdk, model);
assetNodes.executeFilter({ assetId: 4222791488928479 });
model.setDefaultNodeAppearance(DefaultNodeAppearance.Ghosted);
model.assignStyledNodeCollection(assetNodes, { renderGhosted: false, outlineColor: NodeOutlineColor.Cyan } );
```

Note that there is no way to list multiple assets directly with `AssetNodeCollection`, but This
can be achieved by using `UnionNodeCollection` in combination with several `AssetNodeCollection`s.

# Style assets within an area

To support proximity lookups, Reveal supports styling assets within a certain area defined by a bounding box. It's
sufficient for an asset to intersect the provided bounds, it doesn't need to be fully inside.

:::note
The bounding box is defined in "Reveal coordinates" -
[a right handed, Y up coordinate system](https://www.youtube.com/watch?v=TGbMzoJqV7c) - which might differ
from the "native model coordinates" stored in Cognite Data Fusion. `AssetNodeCollection` will automatically map from
"Reveal coordinates" to "native model coordinates" using `CogniteCadModel.getModelTransformation()` and `CogniteCadModel.getCdfToDefaultModelTransformation()`.
:::

```js runnable-4x
const areaOfInterest = new THREE.Box3().setFromCenterAndSize(
  new THREE.Vector3(140, 67, -110),
  new THREE.Vector3(10, 5, 10)
);
const assetsWithinAreaNodes = new AssetNodeCollection(sdk, model);
assetsWithinAreaNodes.executeFilter({ boundingBox: areaOfInterest });
model.setDefaultNodeAppearance(DefaultNodeAppearance.Hidden);
model.assignStyledNodeCollection(assetsWithinAreaNodes, { visible: true } );

// Simple helper to show the area of interest
const boxMaterial = new THREE.MeshBasicMaterial({wireframe: true, color: 0xffff00 });
const boxMesh = new THREE.Mesh(new THREE.BoxGeometry(), boxMaterial);
areaOfInterest.getCenter(boxMesh.position);
areaOfInterest.getSize(boxMesh.scale);
viewer.addObject3D(boxMesh);
```


<!-- SOURCE_END: reveal/documentation\versioned_docs\version-4.x\examples\cad-styling-assets.mdx -->

================================================================================


<!-- SOURCE_START: reveal/documentation\versioned_docs\version-4.x\examples\cad-styling-custom.mdx -->
## File: reveal/documentation\versioned_docs\version-4.x\examples\cad-styling-custom.mdx

---
id: cad-styling-custom
title: Custom node collections
describe: Create custom node collections to filter based on custom data sources and mechanisms
---

import { DemoWrapper } from '@site/versioned_docs/version-4.x/components/DemoWrapper';

In many cases applications will need to filter 3D nodes by some custom data source or mechanism. This
is done by extending the `NodeCollection`-class. This class generates an `IndexSet` and
provides notification when the set has changed. Implementations should
be non-blocking - slow operations should be executed async and the set should
be incrementally updated to avoid blocking the viewer.

<DemoWrapper />

# Simple, static node collection

```js runnable-4x
// import { NodeCollection, DefaultNodeAppearance, ClusteredAreaCollection } from '@cognite/reveal';

class MyNodeCollection extends NodeCollection {
  isLoading = false;

  constructor(model) {
    super('MyNodeCollection'); // Token for (de)serialization
    this._nodeCount = model.nodeCount;
    this._indexSet = new IndexSet();

    for (let i = 0; i < model.nodeCount; i += 100) {
      this._indexSet.add(i);
    }
  }

  getIndexSet() {
    return this._indexSet;
  }

  getAreas() {
    if (this._areas) {
      return this._areas;
    }

    const indices = this._indexSet.toIndexArray();

    // getBoundingBoxesForIndices() may use the SDK or a NodesApiClient to fetch
    // the bounding boxes of the relevant nodes
    const boxes = getBoundingBoxesForIndices(indices);

    this._areas = new ClusteredAreaCollection();
    this._areas.addAreas(boxes);

    return this._areas;
  }

  clear() {
    this._indexSet.clear();
    this.notifyChanged();
  }
}

const myNodes = new MyNodeCollection(model);
model.setDefaultNodeAppearance(DefaultNodeAppearance.Ghosted);
model.assignStyledNodeCollection(myNodes, { renderGhosted: false, color: new THREE.Color(0.15, 0.8, 0.08) } );
```

See also [guide on (de)serializing node collections](cad-save-viewerstate#serializing-and-deserializing-custom-node-colletions).

# Details about IndexSet

`IndexSet` is a specialized implementation of [`Set<number>`](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Set)
that is optimized for storing ranges of numbers. This is a common case for nodes as typically a
subtree will have the same styling applied.

Although `IndexSet` supports adding and removing individual elements using `add()` and `remove()`, the best
performance is achieved by using `addRange()` and `removeRange()` whenever possible.

Also note that changes to the underlying `IndexSet` held by a `NodeCollection` isn't automatically propagated
to be visible in the rendered result. In order to trigger an update after changing the underlying `IndexSet`,
use `NodeCollection.notifyChanged()` (protected function). Note that this function should not be triggered too often
as it might take some time to apply the changes.


<!-- SOURCE_END: reveal/documentation\versioned_docs\version-4.x\examples\cad-styling-custom.mdx -->

================================================================================


<!-- SOURCE_START: reveal/documentation\versioned_docs\version-4.x\examples\cad-styling-nodes.mdx -->
## File: reveal/documentation\versioned_docs\version-4.x\examples\cad-styling-nodes.mdx

---
id: cad-styling-nodes
title: Filtering nodes by node ID or properties
describe: Applying styles to nodes based on node IDs or properties/attributes
---

import { DemoWrapper } from '@site/versioned_docs/version-4.x/components/DemoWrapper';

3D nodes may have associated attribute/property data. Reveal allows for filtering based on
these properties, allowing queries such as "all pipes", "nodes within module P600" or "nodes
with status S5". Combinations are also possible by using `UnionNodeCollection` and `IntersectionNodeCollection`.

`NodeIdNodeCollection` contains a list of nodes identified by their CDF IDs.

`PropertyFilterNodeCollection` is used to query nodes based on node properties. It's possible to specify
multiple criterias which will be combined using `AND` - i.e. all criterias must be met for a node
to match. To emulate `OR`, use `UnionNodeCollection`.

`SinglePropertyFilterNodeCollection` is similar to `PropertyFilterNodeCollection`, but differs in that
it only matches on a single node property and is able to match on a list of values. This is useful
to e.g. provide a list of node names or source system IDs.

Note that if a node is in one of the collections discussed in this page, all of its children will also
be in the set.

:::note
The test model used in the documentation site is lacking good node properties and the quality of
the examples shown is therefor restricted as a result of this. To best utilize the filtering APIs
we recommend providing a rich 3D models with a good set of high-quality attributes associated with
the nodes.
:::

<DemoWrapper />

## Highlight nodes identified by IDs

If Node IDs are known, `NodeIdNodeCollection` can be used to style the nodes (and the children):

```js runnable-4x
// import { NodeIdNodeCollection, DefaultNodeAppearance } from '@cognite/reveal';

const nodes = new NodeIdNodeCollection(sdk, model);
const nodeIds = [
  6790526732893790, 8491891944656383, 1408134070691933, 7215972602029446,
]; // Life boats
nodes.executeFilter(nodeIds);
model.assignStyledNodeCollection(nodes, DefaultNodeAppearance.Highlighted);
```

## Show all pipes

If nodes in the 3D model has an attribute `'PDMS.Type'`, `PropertyFilterNodeCollection` can be used to
retrieve nodes of a certain type. In the following example, only pipes are accepted:

```js runnable-4x
// import { PropertyFilterNodeCollection, DefaultNodeAppearance } from '@cognite/reveal';

const allPipes = new PropertyFilterNodeCollection(sdk, model);
allPipes.executeFilter({ PDMS: { Type: 'PIPE' } });
model.setDefaultNodeAppearance(DefaultNodeAppearance.Ghosted);
model.assignStyledNodeCollection(allPipes, {
  renderGhosted: false,
  color: new THREE.Color(0.15, 0.8, 0.08),
});
```

## Partitioning requests

For filters that match a lot of nodes, [paritioned requests](https://docs.cognite.com/api/v1/#section/Parallel-retrieval)
might increase the performance radically by fetching result from the server in parallel.
To partition requests, provide the number of partitions using the `requestPartitions`-option
to the `PropertyFilterNodeCollection`-constructor:

```js runnable-4x
// import { PropertyFilterNodeCollection, DefaultNodeAppearance, NodeOutlineColor } from '@cognite/reveal';

const nodesFromFile = new PropertyFilterNodeCollection(sdk, model, {
  requestPartitions: 10,
});
// All nodes originating from a given file
nodesFromFile.executeFilter({ Item: { 'Source File': 'PRO-S_CD-MUM.nwd' } });
model.setDefaultNodeAppearance(DefaultNodeAppearance.Ghosted);
model.assignStyledNodeCollection(nodesFromFile, {
  renderGhosted: false,
  outlineColor: NodeOutlineColor.Orange,
});
```

To compare speed-up, set `requestPartitions` to `1`.

## Combining filters

Often one would want to match multiple criterias of the same type. Lets say we want to find all
mechanical equipment with purpose 'STU'. We can either execute this as a single query, or as two
seperate queries.

When doing this as a single query, no `IntersectionNodeCollection` is necessary and the code is quite compact:

```js runnable-4x
// import { PropertyFilterNodeCollection, DefaultNodeAppearance } from '@cognite/reveal';

const stuMechNodes = new PropertyFilterNodeCollection(sdk, model);
stuMechNodes.executeFilter({ PDMS: { ':capDisc': 'MECH', Purpose: 'STU' } });

model.setDefaultNodeAppearance(DefaultNodeAppearance.Ghosted);
model.assignStyledNodeCollection(stuMechNodes, {
  renderGhosted: false,
  color: new THREE.Color(0.15, 0.8, 0.08),
});
```

Combining two separate queries requires the use of `IntersectionNodeCollection`:

```js runnable-4x
// import { PropertyFilterNodeCollection, IntersectionNodeCollection, DefaultNodeAppearance } from '@cognite/reveal';

const mechNodes = new PropertyFilterNodeCollection(sdk, model);
mechNodes.executeFilter({ PDMS: { ':capDisc': 'MECH' } });

const stuNodes = new PropertyFilterNodeCollection(sdk, model);
stuNodes.executeFilter({ PDMS: { Purpose: 'STU' } });

const combined = new IntersectionNodeCollection();
combined.add(mechNodes);
combined.add(stuNodes);

model.setDefaultNodeAppearance(DefaultNodeAppearance.Ghosted);
model.assignStyledNodeCollection(combined, {
  renderGhosted: false,
  color: new THREE.Color(0.15, 0.8, 0.08),
});
```

The two approaches has their pros and cons. Often it will be faster to combine the
filters into a single query as this will reduce the result set returned from the
server. However, if the different combinations will be configured run-time (e.g.
the user will want to show 'ARCH'-nodes within the 'STU'-purpose) it might
be better to use two separate queries and combine the results. Also, the latter
approach also allows for more complex types of filters.

## Matching nodes with a list of values

There might be situations where an application has a long list of identifiers of nodes to show
or style. In this case, `SinglePropertyFilterNodeCollection` might be useful. This class will match
one node property towards many values - e.g. a node identifier towards a list of IDs. This node set
supports thousands of IDs - `PropertyFilterNodeCollection` only supports one matching value.

```js runnable-4x
// import { SinglePropertyFilterNodeCollection, DefaultNodeAppearance } from '@cognite/reveal';

const nodeSet = new SinglePropertyFilterNodeCollection(sdk, model, {
  requestPartitions: 10,
});
const names = [];
for (let q = 240; q < 300; q++) {
  for (let e = 1; e <= 9; e++) {
    const name = `/60-EL-9016-Q${q}-E0${e}`;
    names.push(name);
  }
}
model.setDefaultNodeAppearance(DefaultNodeAppearance.Ghosted);
model.assignStyledNodeCollection(nodeSet, {
  renderGhosted: false,
  outlineColor: NodeOutlineColor.Orange,
});

nodeSet.executeFilter('Item', 'Name', names).then(() => {
  // Create boxes around the areas to make it easier for users to find areas in the 3D model to explore
  const areas = Array.from(nodeSet.getAreas().areas());
  for (const area of areas) {
    viewer.addObject3D(new THREE.Box3Helper(area));
  }
});
```

## Inverting and combining filters

Often it is interesting to invert results from filters to find elements that does not match the query. This
can be done using `InvertedNodeCollection`. In the following example, a single system is isolated
and all pipe support for the system is hidden.

```js runnable-4x
// import {
//   PropertyFilterNodeCollection,
//   InvertedNodeCollection,
//   IntersectionNodeCollection,
//   DefaultNodeAppearance
// } from '@cognite/reveal';

const fullSystem = new PropertyFilterNodeCollection(sdk, model);
fullSystem.executeFilter({ Item: { Name: '/P/WM/A' } });
const pipeSupport = new PropertyFilterNodeCollection(sdk, model);
pipeSupport.executeFilter({ Item: { Name: '/P/WM/A/PS' } });
// This will contain all nodes that do not match the query above
const notPipesupport = new InvertedNodeCollection(model, pipeSupport);
const systemWithoutPipesupport = new IntersectionNodeCollection([
  fullSystem,
  notPipesupport,
]);

model.setDefaultNodeAppearance(DefaultNodeAppearance.Hidden);
model.assignStyledNodeCollection(
  systemWithoutPipesupport,
  DefaultNodeAppearance.Default
);
```


<!-- SOURCE_END: reveal/documentation\versioned_docs\version-4.x\examples\cad-styling-nodes.mdx -->

================================================================================


<!-- SOURCE_START: reveal/documentation\versioned_docs\version-4.x\examples\cad-styling.mdx -->
## File: reveal/documentation\versioned_docs\version-4.x\examples\cad-styling.mdx

---
id: cad-styling
title: Introduction
describe: Reveal supports styling individual nodes by assigning appearance profiles.
---

import { DemoWrapper } from '@site/versioned_docs/version-4.x/components/DemoWrapper';

Reveal supports flexible styling of individual nodes (objects) in the 3D model. Styles can
be compromised of several attributes to customize the visualization through the `NodeAppearance`-type:

| Field                       | Field type                  | Description                                           |
| --------------------------- | --------------------------- | ----------------------------------------------------- |
| `color`                     | `THREE.Color?`              | Override color, e.g `new THREE.Color(1, 0, 0)` (red). All components set to zero means no override.  |
| `visible`                   | `boolean?`                  | When false, the node(s) will be invisible             |
| `renderInFront`             | `boolean?`                  | When true, the node(s) are rendered in front of other geometry |
| `renderGhosted`             | `boolean?`                  | When true, the node(s) are rendered in transparent gray |
| `outlineColor`              | `NodeOutlineColor?`         | Adds an outline to the objects from a set of predefined colors |
| `prioritizedForLoadingHint` | `number?`                   | Assigns a prioritization weight to this node collection, influencing load priority. See [Prioritize nodes for loading](cad-prioritized-nodes).

These attributes can be combined to customize the look of nodes. For convinience, a set of default appearances are
provided in the `DefaultNodeAppearance`-constant:

| Appearance           | Description                                                                      |
| ------------------- | -------------------------------------------------------------------------------- |
| `Default`           | No overrides, use colors from the CAD model                                      |
| `Ghosted`           | Render node(s) 'ghosted', i.e. make them translucent gray                        |
| `Outlined`          | Outline node(s) with a white outline                                             |
| `Hidden`            | Hide node(s)                                                                     |
| `InFront`           | Render node(s) in front of all other nodes                                       |
| `Highlighted`       | Highlight the node(s). Combination of `InFront`, `Outlined` and a custom color   |

These "appearance profiles"/styles are assigned to one or more nodes defined by a `NodeCollection`-instance. A `NodeCollection`
identifies 3D nodes by `treeIndex`. There are several implementations of `NodeCollection`:

| Class                          |                                                                                  |
| ------------------------------ | -------------------------------------------------------------------------------- |
| `TreeIndexNodeCollection`      | A set of nodes defined by a list of tree indices. Can be updated with a new set of indices. |
| `NodeIdNodeCollection`         | Similar to `TreeIndexNodeCollection`, but useful when you have 'node IDs', not tree indices. |
| `PropertyFilterNodeCollection` | A set of nodes defined by a query to the 3D backend to find nodes that matches one or more properties/attributes. |
| `SinglePropertyFilterNodeCollection` | Similar to `PropertyFilterNodeCollection`, but only matches one node property to many values (e.g. for looking up nodes with a list of IDs). |
| `AssetNodeCollection`          | A set of nodes defined by [asset mappings](https://docs.cognite.com/api/v1/#tag/3D-Asset-Mapping) linking 3D nodes to [assets](https://docs.cognite.com/dev/concepts/resource_types/assets.html). |
| `InvertedNodeCollection`       | Inverts the result of a node collection to match the opposite nodes (i.e. a NOT-operator). |
| `UnionNodeCollection`          | Combines nodes from several node colletions by finding the [set union](https://en.wikipedia.org/wiki/Union_(set_theory)"). |
| `InersectionNodeCollection`    | Combines nodes from several node colletions by finding the [set intersection](https://en.wikipedia.org/wiki/Intersection_(set_theory)). |
| `NodeCollection`               | Abstract base class for node collections. Extend to [implement custom node collections](cad-styling-custom). |

It's also possible [implement custom node collections](cad-styling-custom). This can be useful for specialized queries or to load
sets from custom data sources.

`CogniteCadModel.assignStyledNodeCollection` and `unassignStyledNodeCollection` is used to manage styled set associated with a model:

```js
// import { TreeIndexNodeCollection, DefaultNodeAppearance, NumericRange } from '@cognite/reveal'

// you can start from binding styles to an empty set and populate it later
const myNodes = new TreeIndexNodeCollection();
model.assignStyledNodeCollection(myNodes, DefaultNodeAppearance.Highlighted);

// later you might want to update the set as user does something, for example, selects an asset
// note that other styling sets might have different API for updates, for example `executeFilter`
const nodeTreeIndex = 0;
const nodeSubtreeSize = 100000;
myNodes.updateSet(new IndexSet(new NumericRange(nodeTreeIndex, nodeSubtreeSize)));

// if you want to change appearance of your existing set you can assign a new style
model.assignStyledNodeCollection(myNodes, DefaultNodeAppearance.Ghosted);

// and when you don't need to style this set anymore, just remove it completely
model.unassignStyledNodeCollection(myNodes);
```

Styling is "additive", meaning that styles from multiple styled sets are accumulated per node, much
like how multiple classes are combined when working with CSS. Styled sets are applied first-in first-out (FIFO)
in the order the are added.

```js
// import { TreeIndexNodeCollection, DefaultNodeAppearance, NumericRange } from '@cognite/reveal'

// you can start from binding styles to an empty set and populate it later
const set1 = new TreeIndexNodeCollection(NumericRange.createFromInterval(0, 100));
model.assignStyledNodeCollection(set1, { color: new THREE.Color(1, 0, 0) });
const set2 = new TreeIndexNodeCollection(NumericRange.createFromInterval(50, 150));
model.assignStyledNodeCollection(set2, { outlineColor: NodeOutlineColor.White });

// [0..49] will be colored red
// [50..100] will be colored red and have a white outline
// [101..150] will have the default color and a white outline
```

:::note
The API for styling nodes has changed substantially since Reveal 1.x and upgrading Reveal
will require manual steps to implement styling.
:::

## Examples

<DemoWrapper />

To play around with the different styling options, we can use `CogniteCadModel.setDefaultNodeAppearance`.
A few example styles are shown below.

### Ghosted style

```js runnable-4x
model.setDefaultNodeAppearance(DefaultNodeAppearance.Ghosted);
```

### Highlighted

```js runnable-4x
model.setDefaultNodeAppearance(DefaultNodeAppearance.Highlighted);
```

### Outline and custom color

By creating custom styles you have a powerful tool to customize how the model looks.

```js runnable-4x
model.setDefaultNodeAppearance({ color: new THREE.Color(0, 0.8, 0), outlineColor: NodeOutlineColor.Orange });
```

Note that `outlineColor` restricts the choice of color to a predefined set. This is
a restriction imposed to reduce storage space for outlines to only 3 bits. The choice
of colors is:

```ts
enum NodeOutlineColor {
  NoOutline = 0,
  White = 1,
  Black = 2,
  Cyan = 3,
  Blue = 4,
  Green = 5,
  Red = 6,
  Orange = 7
}
```


<!-- SOURCE_END: reveal/documentation\versioned_docs\version-4.x\examples\cad-styling.mdx -->

================================================================================


<!-- SOURCE_START: reveal/documentation\versioned_docs\version-4.x\examples\cad-transform-override.mdx -->
## File: reveal/documentation\versioned_docs\version-4.x\examples\cad-transform-override.mdx

---
id: cad-transform-override
title: Override CAD nodes transforms
description: Reveal supports overriding transforms of individual objects by providing tree indices to identify 3D nodes
---

import { DemoWrapper } from '@site/versioned_docs/version-4.x/components/DemoWrapper';
import useBaseUrl from '@docusaurus/useBaseUrl';

Reveal supports overriding transforms of individual objects by providing [tree indices to identify 3D nodes.](../concepts.md)

Note that any transformation override is applied with respect to the THREE.js world coordinate space. Also note that the node transform is not accounted for when determining geometry to load. Due to this node transforms shouldn't apply too drastic changes to the position and extend of the nodes. For model wide changes `CogniteCadModel.setModelTransformation` should be used instead.
Also note that non-uniform scaling of nodes are not currently supported and may give unexpected results.

## Examples

<DemoWrapper />

### Setting node transform

Setting the transform of a given node is done by `CogniteCadModel.setNodeTransformByTreeIndex` and takes a tree index,
a matrix transformation and a flag if the transformation also should be applied to children of the given node.



```jsx runnable-4x
const transform = new THREE.Matrix4();
transform.setPosition(new THREE.Vector3(10, 10, 0));
model.setNodeTransformByTreeIndex(532261, transform, true);
```

### Reset node transform


Resetting the transformation is done with `CogniteCadModel.resetNodeTransformByTreeIndex` and takes the given tree index,

and a flag that determines if the node transform reset also should be applied to any child nodes of the given tree index.

```jsx runnable-4x
model.resetNodeTransformByTreeIndex(532261, true);
```

### Animations

Creating animations is a matter of applying transformations multiple times. As stated above, any transformation

is applied in the global world coordinate system of THREE.js. This means that if you want to rotate a model around a given point (and not around the world origin),
you first need to transform the model to that given point, then rotate, then transform back into the world coordinate space. An example of this is done below to create an animation
of the crane rotating. First we get the center of the bounding box for node with id `533010` which is close to the base of the crane.
Then we set up an interval which triggers a function that transforms the entire crane (`532261`): first to the base of the crane, then rotates the model,
then transforms it back, thus giving us the wanted rotation. Keep in mind that [THREE.js uses column matrix notation](https://threejs.org/docs/#api/en/math/Matrix4), such that

the following statement:

```js
  const matrixOverride = modelToWorld.multiply(rotationMatrix.multiply(worldToModel));
```

first applies `worldToModel`, then `rotationMatrix` and finally `modelToWorld`.

```jsx runnable-4x
async function animate() {
  const boundingBox = await model.getBoundingBoxByTreeIndex(533010);
  const center = boundingBox.getCenter(new THREE.Vector3());

  const modelToWorld = new THREE.Matrix4();
  const worldToModel = new THREE.Matrix4();
  const rotationMatrix = new THREE.Matrix4();

  const clock = new THREE.Clock(true);
  clock.start();

  const intervalID = setInterval(function () {
    clock.getElapsedTime();

    modelToWorld.setPosition(center);
    worldToModel.copy(modelToWorld.clone().invert());

    const newRotation = new THREE.Euler(0, -Math.PI * clock.elapsedTime / 20, 0);
    rotationMatrix.makeRotationFromEuler(newRotation);

    const matrixOverride = modelToWorld.multiply(rotationMatrix.multiply(worldToModel));

    model.setNodeTransformByTreeIndex(532261, matrixOverride, true);

    if (clock.elapsedTime >= 10) clearInterval(intervalID);
  }, 20);
}

animate();
```


<!-- SOURCE_END: reveal/documentation\versioned_docs\version-4.x\examples\cad-transform-override.mdx -->

================================================================================


<!-- SOURCE_START: reveal/documentation\versioned_docs\version-4.x\examples\click-reactions-cad.mdx -->
## File: reveal/documentation\versioned_docs\version-4.x\examples\click-reactions-cad.mdx

---
id: click-reactions-cad
title: Reacting to clicks in CAD models
description: Detecting intersections from clicks in CAD models
---

Determining clicks is important in applications with an interactive 3D model. Cognite Reveal supports
mappings clicks on the 2D rendered result to a 3D position and to determine what object is clicked.
`Cognite3DViewer.on('click', ...)` is used to detect clicks in the 3D model, while
`Cognite3DViewer.getIntersectionFromPixel` is used to determine clicked 3D world position and point from
a mouse click.

import { DemoWrapper } from '@site/versioned_docs/version-4.x/components/DemoWrapper';

<DemoWrapper />

## Detecting clicked objects

The following example detects intersections at clicked positions and marks the intersected positions
using a red sphere.

```js runnable-4x
viewer.on('click', async event => {
  const intersection = await viewer.getIntersectionFromPixel(
    event.offsetX, event.offsetY
  );
  if (intersection) {
    const nodeId = await model.mapTreeIndexToNodeId(intersection.treeIndex);
    const toPresent = { treeIndex: intersection.treeIndex, nodeId, point: intersection.point };
    alert(`Clicked object!: ${JSON.stringify(toPresent)}`);
  };
});
```

## Highlighting clicked objects

It's quite common to highlight clicked objects. This can be achieved by using [the node styling API](./cad-styling.mdx).

```js runnable-4x
const selectedNodes = new TreeIndexNodeCollection();
model.assignStyledNodeCollection(selectedNodes, DefaultNodeAppearance.Highlighted);

viewer.on('click', async event => {
  const intersection = await viewer.getIntersectionFromPixel(
    event.offsetX, event.offsetY
  );
  if (intersection) {
    // Replace current selection
    selectedNodes.updateSet(new IndexSet([intersection.treeIndex]));
  };
});
```

In CAD models, it's quite common that equipment consists of many small geometry parts. Often it's desirable to
highlight the entire equipment (e.g. a tank) and not just the individual pieces (e.g. a valve connected to the tank).
This can be achieved by determining the ancestor tree indices of the clicked geometry. `CogniteCadModel.getAncestorTreeIndices()`
can be used to determine this.

```js runnable-4x
const selectedNodes = new TreeIndexNodeCollection();
model.assignStyledNodeCollection(selectedNodes, DefaultNodeAppearance.Highlighted);

viewer.on('click', async event => {
  const intersection = await viewer.getIntersectionFromPixel(
    event.offsetX, event.offsetY
  );
  if (intersection) {
    // Retrieve tree indices of parent. Second argument is used to control what ancestor level to retrieve;
    // 1 is direct parent, 2 is grand-parent etc
    const parentRange = await model.getAncestorTreeIndices(intersection.treeIndex, 1);
    // Replace current selection
    selectedNodes.updateSet(new IndexSet(parentRange));
  };
});
```


<!-- SOURCE_END: reveal/documentation\versioned_docs\version-4.x\examples\click-reactions-cad.mdx -->

================================================================================


<!-- SOURCE_START: reveal/documentation\versioned_docs\version-4.x\examples\click-reactions-pointcloud.mdx -->
## File: reveal/documentation\versioned_docs\version-4.x\examples\click-reactions-pointcloud.mdx

---
id: click-reactions-pointcloud
title: Reacting to clicks in point cloud models
description: Detecting intersections from clicks in point cloud models
---

While point clouds doesn't have a concept of nodes, applications can detect clicked points. Just like with
CAD models, `Cognite3DViewer.getIntersectionFromPixel` is used to determine world position and point from
a mouse click.

import { DemoWrapper } from '@site/versioned_docs/version-4.x/components/DemoWrapper';

<DemoWrapper modelType="pointcloud" />

## Detecting clicked positions

The following example detects intersections at clicked positions and marks the intersected positions
using a red sphere.

```js runnable-4x
viewer.on('click', async event => {
  const intersection = await viewer.getIntersectionFromPixel(
    event.offsetX, event.offsetY
  );
  if (intersection) {
    const sphere = new THREE.Mesh(new THREE.SphereGeometry(0.1),
      new THREE.MeshBasicMaterial({ wireframe: true, color: 'red' }));
    sphere.position.copy(intersection.point);
    viewer.addObject3D(sphere);
  };
});
```

## Getting information about object assigned to a clicked point
Using Cognite's Annotations API, a user can define objects within a point cloud model.
In order to retrieve information about a clicked object, users may get the `annotationId` or the `assetRef` that is assigned to each point.
The `annotationId` and `assetRef` are available in the `intersection` object returned from `viewer.getIntersectionFromPixel`.
An annotation id of 0 means that the clicked point is not assigned to any object. `assetRef` will only be defined if the annotation associated with the point is linked to an asset in CDF. The objects in this point cloud example have no assets associated to them.

```js runnable-4x
viewer.on('click', async event => {
  const intersection = await viewer.getIntersectionFromPixel(
    event.offsetX, event.offsetY
  );
  if (intersection) {
     alert(`Clicked object with annotationId ${intersection.annotationId} and assetId ${intersection.assetRef?.id}`);
  };
});
```


<!-- SOURCE_END: reveal/documentation\versioned_docs\version-4.x\examples\click-reactions-pointcloud.mdx -->

================================================================================


<!-- SOURCE_START: reveal/documentation\versioned_docs\version-4.x\examples\clipping.mdx -->
## File: reveal/documentation\versioned_docs\version-4.x\examples\clipping.mdx

---
id: clipping
title: Clipping/slicing planes
describe: Reveal support adding a number of clipping planes to "cut through" the models.
---

import { DemoWrapper } from '@site/versioned_docs/version-4.x/components/DemoWrapper';
import useBaseUrl from '@docusaurus/useBaseUrl';

Clipping planes, also called slicing planes, can be used to "cut through" the model to reveal the interior. This is
useful to isolate interesting parts of the model and hide obscuring geometry. Reveal supports having multiple clipping planes
in arbitrary position and orientation. When clipping planes are active,
the amount of geometry loaded might be reduced since culled geometry doesn't need
to be loaded (or rather loaded in a lower detail level).
Clipping planes can both be applied to all models (global clipping planes) or to models individually (model clipping planes).

<video preload="auto" autoPlay="autoplay" loop controls>
  <source src={useBaseUrl('/img/cad-clipping.webm')} />
</video>

## Examples

<DemoWrapper />

### Single, fixed clipping plane

Global clipping planes are defined by providing zero or more [`THREE.Plane`](https://threejs.org/docs/#api/en/math/Plane)
to `Cognite3DViewer.setGlobalClippingPlanes`. The clipping planes are activated for all models and
replaces any active global clipping planes.

Typically, [setFromNormalAndCoplanarPoint](https://threejs.org/docs/#api/en/math/Plane.setFromNormalAndCoplanarPoint)
is used to create clipping planes. This function accepts a direction that defines the orientation of
the plane and a point on the plane. For example, the following
code will create a clipping plane that only accepts geometry below `Y = 55`:

```jsx runnable-4x
const orientation = new THREE.Vector3(0, -1, 0);
const point = new THREE.Vector3(0, 55, 0);
const plane = new THREE.Plane().setFromNormalAndCoplanarPoint(orientation, point);
viewer.setGlobalClippingPlanes([plane]);
```

### Animated clipping plane

Planes can be manipulated runtime and effects will have an effect in the viewer. Note however that rendering must be
triggered after updating the plane before the change will have a visual effect. This can be done using
`Cognite3DViewer.requestRedraw()` or simply set new planes using `Cognite3DViewer.setClippingPlanes`.

Below is an example animates a clipping plane by ping-ponging the plane in the vertical direction.

```js runnable-4x
const bbox = model.getModelBoundingBox();

const orientation = new THREE.Vector3(0, -1, 0);
const point = new THREE.Vector3(0, bbox.max.y, 0);
const plane = new THREE.Plane();
plane.setFromNormalAndCoplanarPoint(orientation, point);
viewer.setGlobalClippingPlanes([plane]);

const start = performance.now();
setInterval(() => {
  // Ping-pong plane between top of model and half-way to the bottom
  const dt = (performance.now() - start) / 1000.0
  const s = 0.5 * (Math.sin(Math.PI * dt / 10.0) + 1.0);
  point.y = bbox.max.y - (bbox.max.y - bbox.min.y) / 2.0 * s;
  plane.setFromNormalAndCoplanarPoint(orientation, point);

  viewer.requestRedraw();
}, 1000 / 60);
```

:::note
Updating `THREE.Plane`-instances will not trigger data loading. To manually trigger data loading after doing
substantial changes to the clipping planes, use `Cognite3DViewer.setGlobalClippingPlanes`. Note that the example
above performs substantial changes to the planes without loading data. In a real application it's recommended
to not load data during animation, but initiate data after an animation is completed.
:::

### Interactable clipping planes

Often it's required to have interactive clipping planes that the user can modify. The following example
show how [ThreeJS DragControls](https://threejs.org/docs/#examples/en/controls/DragControls) can be used
to manipulate the clipping planes.

After running this snippet the clipping plane can be manipulated by dragging the white manipulator.

```js runnable-4x
// import { DragControls } from 'three/examples/jsm/controls/DragControls';

const bounds = model.getModelBoundingBox();

// Create draggable sphere at the center of bounds
const initialDragPosition = new THREE.Vector3(bounds.min.x, 0.5*(bounds.max.y + bounds.min.y), bounds.min.z);
const draggerGeometry = new THREE.SphereGeometry(5);
const draggerMaterial = new THREE.MeshBasicMaterial({ color: 'white' });
const draggerMesh = new THREE.Mesh(draggerGeometry, draggerMaterial);
draggerMesh.position.copy(initialDragPosition);
viewer.addObject3D(draggerMesh);

// Prepare a clipping plane
const orientation = new THREE.Vector3(0, -1, 0);
const plane = new THREE.Plane();
plane.setFromNormalAndCoplanarPoint(orientation, initialDragPosition);
viewer.setGlobalClippingPlanes([plane]);


// Handle drag events
const controls = new DragControls([draggerMesh], viewer.cameraManager.getCamera(), viewer.domElement);
controls.addEventListener('drag', () => {
  // Fix XZ-poistion
  draggerMesh.position.set(initialDragPosition.x, draggerMesh.position.y, initialDragPosition.z);
  draggerMesh.updateWorldMatrix();
  // Update clipping plane
  plane.setFromNormalAndCoplanarPoint(new THREE.Vector3(0, -1, 0), draggerMesh.position);
  viewer.requestRedraw();
});

// When we are hovering over a sphere we want to disable viewer controls
controls.addEventListener('hoveron', () => {
  viewer.cameraManager.deactivate();
  draggerMaterial.color.set('gray');
  viewer.requestRedraw();
});

// And turn them back on when we stop hovering over it
controls.addEventListener('hoveroff', () => {
  viewer.cameraManager.activate();
  draggerMaterial.color.set('white');
  viewer.requestRedraw();
});
```

### Clipping plane for individual models

Clipping planes can also be applied to individual models. To do so, the user may call `setModelClippingPlanes` on the model object. Model clipping planes can be combined with global clipping planes:

```js runnable-4x
const orientation1 = new THREE.Vector3(0, 1, 0);
const point1 = new THREE.Vector3(0, 55, 0);
const plane1 = new THREE.Plane().setFromNormalAndCoplanarPoint(orientation1, point1);

const orientation2 = new THREE.Vector3(0, -1, 0);
const point2 = new THREE.Vector3(0, 65, 0);
const plane2 = new THREE.Plane().setFromNormalAndCoplanarPoint(orientation2, point2);

viewer.setGlobalClippingPlanes([plane1])
model.setModelClippingPlanes([plane2]);
```

### CAD geometry filter

A special type of clipping is to provide a "geometry filter" when loading the model. A geometry filter restricts the
area to load geometry for and is specified when the model is created. Geometry filters not only hides clipped geometry,
it unloads unnecessary geometry to save memory and improve rendering performance.

```js
const min = new THREE.Vector3(10, 20, 30);
const max = new THREE.Vector3(20, 30, 40);
viewer.addModel({
  modelId,
  revisionId,
  geometryFilter: {
    boundingBox: new THREE.Box3(min, max)
  }
});
```

:::note
Geometry filters are static and cannot be changed after creating the model. Instead, remove and re-add the model,
or use regular clipping planes if they change frequently.
:::


<!-- SOURCE_END: reveal/documentation\versioned_docs\version-4.x\examples\clipping.mdx -->

================================================================================


<!-- SOURCE_START: reveal/documentation\versioned_docs\version-4.x\examples\combine-models.mdx -->
## File: reveal/documentation\versioned_docs\version-4.x\examples\combine-models.mdx

---
id: combine-models
title: Combining multiple models
description: Load multiple models in the same viewer and apply transformation to correctly place the models
---

`Cognite3DViewer` supports combining multiple CAD- and point cloud-models into one view and lets
users interact with them as if they were one model. This is done by simply adding multiple models
using `Cognite3DViewer.addModel`, `Cognite3DViewer.addCadModel` or `Cognite3DViewer.addPointCloudModel`.

import { DemoWrapper } from '@site/versioned_docs/version-4.x/components/DemoWrapper';

<DemoWrapper />

## Modify coordinate systems

In many cases, it will be necessary to apply some transformation to the models to make them be in the same
coordinate system. This can be done using `setModelTransformation` with a [`THREE.Matrix4`](https://threejs.org/docs/#api/en/math/Matrix4)
representing the transformation.

The following example shows how to modify the coordinate system of a point cloud model to make it fit with a CAD model.

```js runnable-4x
async function updateModelTransformation() {
  const pointCloudModel = await viewer.addModel({
    modelId: 5564365369975452 ,
    revisionId: 2817572261344477,
  })

  // Create translation matrix
  const translation = new THREE.Matrix4().makeTranslation(140, 75, -110);
  // Update model transformation
  pointCloudModel.setModelTransformation(translation);

  viewer.fitCameraToModel(pointCloudModel);
}

updateModelTransformation();
```

## Use geometry filters to extract parts of a model

Geometry filters allows only loading geometry within a specified box. By loading the same model with different geometry
filters, several subsections of the same model can be loaded in the same viewer.

```js runnable-4x
viewer.models.forEach(x => viewer.removeModel(x));

async function addFilteredModel(box) {
  const model = await viewer.addModel({
    modelId: 3356984403684032,
    revisionId: 6664823881595566,
    geometryFilter: {
      boundingBox: box,
      isBoundingBoxInModelCoordinates: true
    }
  });
  return model;
}

const center = new THREE.Vector3(100, 25, -75);
const sliceOffset = new THREE.Vector3(0, 20, 0);
const sliceSize = new THREE.Vector3(100, 10, 100);

const sliceColors = [
  new THREE.Color(0.8, 0.0, 0.0),
  new THREE.Color(0.0, 0.8, 0.0),
  new THREE.Color(0.0, 0.0, 0.8),
  new THREE.Color(0.8, 0.8, 0.0),
  new THREE.Color(0.8, 0.0, 0.8)
]
for (let i = 0; i < 5; i++) {
  const sliceCenter = sliceOffset.clone().multiplyScalar(i).add(center);
  const sliceBounds = new THREE.Box3().setFromCenterAndSize(sliceCenter, sliceSize);
  const sliceColor = sliceColors[i];

  addFilteredModel(sliceBounds).then(model => {
    model.setDefaultNodeAppearance({ color: sliceColor });
  });
}
```

:::note
Geometry filters should not overlap as this will cause the same geometry to be loaded and
visualized more than once.
:::


<!-- SOURCE_END: reveal/documentation\versioned_docs\version-4.x\examples\combine-models.mdx -->

================================================================================


<!-- SOURCE_START: reveal/documentation\versioned_docs\version-4.x\examples\controlsmodes.mdx -->
## File: reveal/documentation\versioned_docs\version-4.x\examples\controlsmodes.mdx

---
id: controlsmodes
title: Camera controls modes
description: Usage of different camera controls modes
---

import { DemoWrapper } from '@site/versioned_docs/version-4.x/components/DemoWrapper';
import useBaseUrl from '@docusaurus/useBaseUrl';

Reveal allows you to use different camera controls modes. You can set different controls modes using `setCameraControlsOptions` method of `Cognite3DViewer` class in runtime. Configurable parameters are described in `CameraControlsOptions` type (see API Reference for details).

<DemoWrapper />

#### Mouse wheel action
Property `mouseWheelAction` describes what happens when user initiate a mouse wheel scroll. Possible valuses are:

| Value | Description |
| ----- | ----------- |
| `zoomToTarget` | zooms just to the current target (center of the screen) of the camera. |
| `zoomPastCursor` |  zooms in the direction of the ray coming from camera through cursor screen position, allows going through objects. |
| `zoomToCursor` | mouse wheel scroll zooms towards the point on the model where cursor is hovering over, doesn't allow going through objects. |

Default value is `zoomPastCursor`.

#### On click camera target change

Property `changeCameraTargetOnClick` enables or disables camera target change based on mouse clicks. When enabled, mouse click sets camera target to the point on the model where cursor is hovering over.

Default value is `false`.

Example of setting different camera controls options:

```jsx runnable-4x
// import { isDefaultCameraManager } from '@cognite/reveal';

const newControlsOptions = {
  mouseWheelAction: 'zoomToCursor',
  changeCameraTargetOnClick: true,
};

if (isDefaultCameraManager(viewer.cameraManager)) {
  viewer.cameraManager.setCameraControlsOptions(newControlsOptions);
}
```


<!-- SOURCE_END: reveal/documentation\versioned_docs\version-4.x\examples\controlsmodes.mdx -->

================================================================================


<!-- SOURCE_START: reveal/documentation\versioned_docs\version-4.x\examples\image360-annotations.mdx -->
## File: reveal/documentation\versioned_docs\version-4.x\examples\image360-annotations.mdx

---
id: image360-annotations
title: 360 Image Annotations
description: Displaying and using annotations on 360 images
---

import useBaseUrl from '@docusaurus/useBaseUrl';

360-images may be connected to _annotations_ that outline regions of interest in the images. They are only visible when the user has entered the 360 image with which they are associated. Reveal automatically finds and downloads any relevant annotations from CDF and displays them by default.

### Annotation requirements

Reveal only considers annotations following specific requirements. For an annotation to be found by Reveal, it must have its `annotatedResourceId` set to the ID of an image file belonging to the 360 image set. Furthermore, `annotatedResourceType` must be `"file"` and `annotationType` must be either `"images.ObjectDetection"` or `"images.AssetLink`". Currently, only annotations containing either a `boundingBox` or a `polygon` is supported, `polyline` annotations will not be displayed. Refer to  [the CDF documentation](https://docs.cognite.com/api/v1/#tag/Annotations/operation/annotationsCreate) for details on the annotation types.

Annotations are represented by `Image360Annotation` instances. The annotations associated with a given entity revision can be queried with the `getAnnotations()` method on the `Image360Revision` instance. Note that annotations are loaded lazily, i.e. they will only be loaded when entering the relevant 360 image revision or when calling `getAnnotations()`.

## Styling Annotations

The appearance of annotations can be changed both through a "default" style and through styling annotations individually.

### Default style

To set a default style for all annotations in an `Image360Collection`, you may call the `collection.setDefaultStyle(appearance)`, where `collection` is an `Image360Collection` instance. The `appearance` argument is an `Image360AnnotationAppearance` instance, which has the following content:

#### `Image360AnnotationAppearance`

| Field        | Field type                | Description                                      |
|--------------|---------------------------|--------------------------------------------------|
| `color`      | `THREE.Color?`            | The color of the annotation                      |
| `visible`    | `boolean?`                | Whether the annotation should be visible or not  |

Leaving any of the fields undefined causes the annotations to revert to the original value for that property.

Using this, we can e.g. hide all annotations using

```js
collection.setDefaultAnnotationStyle({ visible: false });
```

### Individual style

Setting individual style can be done directly on an `Image360Annotation` object. Styling fields set this way will override those of the default appearance. E.g. to hide all annotations created by `'user0'` in a revision, you may write

```js
revision
  .getAnnotations()
  .then(annotations =>
    {
      annotations
        .filter(annotation => annotation.annotation.creatingUser === 'user0')
        .forEach(annotation => annotation.setVisible(false));
      viewer.requestRedraw();
    }
  );
```

Changes to individual styles are not visible until the next render, thus one should issue a call to `viewer.requestRedraw()` after applying styles to image annotations.

Since annotations are lazy-loaded, it is usually appropriate to only first apply styling upon entering the relevant revision. This can be done e.g. through registering a listener on the collection:

```js
collection.on('image360Entered', (entity, revision) => {
  revision
    .getAnnotations()
    .then(annotations => { styleAnnotations(annotations); viewer.requestRedraw(); });
});
```

## Mouse pointer interaction

The application may react to mouse interactions with annotations by subscribing to e.g. click-events on the viewer object, and subsequently using the received mouse position in the `get360AnnotationIntersectionFromPixel` method on the `Cognite3DViewer` instance. Note that this method will only check interactions with annotations that are associated with the current image360 revision and visible.

To e.g. color every clicked annotation with a blue color, you may write

```js
viewer.on('click', event => {
  viewer.get360AnnotationIntersectionFromPixel(
    event.offsetX, event.offsetY
  ).then(
    intersection => {
      intersection?.annotation.setColor(new THREE.Color(0, 0, 1));
      viewer.requestRedraw();
    }
  );
});
```


<!-- SOURCE_END: reveal/documentation\versioned_docs\version-4.x\examples\image360-annotations.mdx -->

================================================================================


<!-- SOURCE_START: reveal/documentation\versioned_docs\version-4.x\examples\image360.mdx -->
## File: reveal/documentation\versioned_docs\version-4.x\examples\image360.mdx

---
id: image360
title: 360 Images
description: Using and displaying 360 images using Reveal
---

import useBaseUrl from '@docusaurus/useBaseUrl';

360 images is a common way to augment the 3D experience of your application.
A 360 image is a controllable panoramic image that surrounds the original point from which the shot was taken.
360 images simulate being in the shoes of a photographer and looking around to the left, right, up and down as desired as well as zooming.

The `Cognite3DViewer` entrypoint exposes the following methods related to 360 images.

```ts
add360ImageSet(
  datasource: 'events',
  eventFilter: { [key: string]: string },
  add360ImageOptions?: AddImage360Options
): Promise<Image360Collection>;

remove360Images(...image360Entities: Image360[]): Promise<void>:

enter360Image(image360: Image360): Promise<void>:

exit360Image(): void
```

To visualize 360 images the data must have been previously ingested into [Cognite Data Fusion](https://www.cognite.com/en/product/cognite_data_fusion_industrial_dataops_platform).
More info on the ingestion process for 360 images can be found [here](https://docs.cognite.com/cdf/3d/guides/360images_upload/).

Once the data is ingested, a set of 360 images can be added to the viewer with `viewer.add360ImageSet(...)`.
`datasource` describes the source data type used for storing the 360 images.
Currently, the supported `datasource`s are `'events'` and `'datamodels'`.
The `second` argument describes the filter that is used when fetching data from the data source.
For events, this is a generic key-value pair and can point to any metdata that was set during ingestion. For datamodels, this is an identifier consisting of the Data Models `externalId` and `space` of the relevant 360 collection instance.
`viewer.add360ImageSet(...)` will return a `Image360Collection` which contains each of the `image360` entities for this given set.
The definition of `Image360Collection` can be found [here.](../api/@cognite/reveal/interfaces/Image360Collection)

The `AddImage360Options` is used for correcting / adding transformations to the set of 360 images. The declaration can be found [here.](../api/@cognite/reveal/type-aliases/AddImage360Options)

:::note
The 360 images should be ingested with proper transformation data, and one should only rely on `AddImage360Options` when failing to do so or when using the same 360 images for multiple 3D models with different coordinate system.
If you find that the data does not line up correctly, please try to update the source data instead adding the optional transformation.
:::

If the data is ingested similar to the guide referenced earlier, adding a set of 360 images can look like this:
```ts
viewer.add360ImageSet('events', { site_id: 'site-S01-area-a03' });
```

Once added to the viewer you will see a white circle representing each 360 image, here is an example of what it can look like:
<img src={useBaseUrl('/img/image360_1.png')} alt="AxisViewTool" />

Once the 360 images have been added, the icons are clickable, and when clicked, will enter the 360 image.
Reveal provides navigation using mouse or touch and transition effects when clicking another 360 image.
It is also possible enter a 360 image programmatically by calling the `enter360Image(image360: Image360)` method.
Exiting the visualization of a given 360 image is also possible using the `exit360Image()` method.
For convenience, this is bound to the `ESCAPE` key out of the box.

An example of entering into a 360 image can be seen here:
<img src={useBaseUrl('/img/image360_2.png')} alt="AxisViewTool" />

To remove one or more 360 images you can use the `remove360Images(...)` method which will also cleanup icons and other related data to the instance.

The `Image360` declaration can be found here [here.](../api/@cognite/reveal/interfaces/Image360)

The `transform` property from `Image360` represents the world transformation (rotation and translation) of the 360 image.
The `Image360Visualization` object has convenience functionality related to the visualization of the 360 image such as setting the opacity of the given 360 image.

## Events
The `Image360Collection` exposes events `image360Entered` and `image360Exited` for subscribing to enter & exit from 360 image mode. The `image360Entered` event is also triggered when the [revision](#historical-images) of an image is changed.
Subscribing to the events can look like
```ts
const image360Collection = await viewer.add360ImageSet('events', { site_id: 'site-S01-area-a03' });
image360Collection.on('image360Entered', (image360: Image360, revision: Image360Revision) => {
    const position = new THREE.Vector3();
    position.setFromMatrixPosition(image360.transform);
    alert(`360 Image mode entered at Image position: ${JSON.stringify(position)}`);
  });
image360Collection.on('image360Exited', () => { alert('Exited from 360 Image mode'); });
```

## Historical images
Some image collections include 360 images with historical revisions. The `360Image` interface includes a `getRevisions` method used to obtain a list of all available revisions for that image. This list contains `Image360Revision` objects sorted by date, with the most recent revision at the beginning of the list.

Each `Image360Revision` object has a `date` property that represents when the image was taken. If an image is undated, the `date` property will be `undefined`.
```ts
image360.getRevisions().forEach(availableRevision => console.log(availableRevision.date);
```

You can get the currently active revision for any `Image360` by using the `getActiveRevision` method. Optionally, you can retrieve the active revision when `image360Entered` is triggered, as the revision of the entered image is included in the event.
```ts
image360Collection.on('image360Entered', (image360: Image360, revision: Image360Revision) => {
    const activeDate = image360.getActiveRevision().date;
    const enteredDate = revision.date;
    alert(`The result is the same: ${activeDate} is equal to ${enteredDate}`);
};
```

To change the revision of an `Image360`, call the `enter360Image` method on `Cognite3DViewer`. Pass in the `Image360` you want to change, along with one of the available revisions for that image.
```ts
const revisions = image360.getRevisions();
const newRevision = revisions[1];
await viewer.enter360Image(image360, newRevision);
alert(`Revision changed to ${newRevision.date}`);
```


<!-- SOURCE_END: reveal/documentation\versioned_docs\version-4.x\examples\image360.mdx -->

================================================================================


<!-- SOURCE_START: reveal/documentation\versioned_docs\version-4.x\examples\node-visiting.mdx -->
## File: reveal/documentation\versioned_docs\version-4.x\examples\node-visiting.mdx

---
id: node-visiting
title: Node visitor functions
describe: Reveal has functions for iterating over nodes, either all nodes in a 3D model or a subtree of a parent node.
---

import { DemoWrapper } from '@site/versioned_docs/version-4.x/components/DemoWrapper';

Reveal has functions for iterating over CAD nodes, either all nodes in a 3D model or a subtree of a parent node.
Note that all functions are async, and the action that you pass is not applied immediately. A single model can
have millions of nodes. To avoid long blocking operations the action is applied in blocks, allowing for an
interactive page while the action is being applied.

<DemoWrapper />

## Iterate over all nodes

This example only demonstrates how iteration over model nodes performed gradually.

```jsx runnable-4x
async function visitAllNodes() {
  let sum = 0;
  await model.iterateNodesByTreeIndex(treeIndex => sum = sum + treeIndex)
  alert('Iteration is done! Sum of all tree indexes is ' + sum);
}
visitAllNodes();
```

## Iterate over subtree nodes

`CogniteCadModel.iterateSubtreeByTreeIndex` iterates over all descendants of a node by tree index. The provided
tree index is included in the set of visited nodes. The following example sets the color of all descendants of
a node. This mimics the functionality of `CogniteCadModel.setNodesColorsByTreeIndex` with `applyToChildren`
set to `true`.

```jsx runnable-4x
async function visitSubtree() {
  let sum = 0;
  await model.iterateSubtreeByTreeIndex(917985, treeIndex => sum = sum + treeIndex);
  alert('Iteration is done! Sum of all tree indexes in subtree is ' + sum);
}
visitSubtree();
```


<!-- SOURCE_END: reveal/documentation\versioned_docs\version-4.x\examples\node-visiting.mdx -->

================================================================================


<!-- SOURCE_START: reveal/documentation\versioned_docs\version-4.x\examples\point-to-point-measurement.mdx -->
## File: reveal/documentation\versioned_docs\version-4.x\examples\point-to-point-measurement.mdx

---
id: point-to-point-measurement
title: Point to point measurement
description: Demo shows how to measure point to point distance in Reveal.
---

import { DemoWrapper } from '@site/versioned_docs/version-4.x/components/DemoWrapper';
import useBaseUrl from '@docusaurus/useBaseUrl';

The `MeasurementTool` is a measuring tool for point to point distance in 3D models, by clicking to- and from-points. The default measurement unit is meters, but the tool provides callbacks to allow configuring the unit.
When exiting from the tool, all the measurement will be removed from the `Cognite3DViewer`. Note that the precision the tool can provide is limited, and the tool should only be used for approximate measurement - not high precision measurement for e.g. construction.

To effectively edit measuring line properties, tool is configurable with `MeasurementOptions` options to set
- Custom label content for each measurement.
- Size of line width in meters.
- Color of line.

:::tip
`CameraControlsOptions.changeCameraTargetOnClick` should be set to `false` to avoid click event registering for camera when `MeasurementTool` is active. Also avoid any custom click-handler that might interfere with the measurement tool.
:::

<DemoWrapper />

## Point to point distance measurment
To enter point-to-point measurement mode, use `MeasurementTool.enterMeasurementMode()`. This will register events for handling mouse clicks and touch events to allow placing the measurement end-points. Note that the tool is optimized for use with mouse.

To exit measurement mode, call `exitMeasurementMode()`. The tool will also exit measurement mode if user presses Escape key.

```jsx runnable-4x
// import { MeasurementTool } from '@cognite/reveal';

const measurementTool = new MeasurementTool(viewer);
measurementTool.enterMeasurementMode();
```

Another way to add measurements is to call the `MeasurementTool.addMeasurement()` method. It takes the two endpoints of the measurement line as arguments.

## Events
The tool exposes events for subscribing to measurement start, end & added. In the below example, the mouse cursor is changed to a cross-hair while measuring.

```jsx runnable-4x
// import { MeasurementTool } from '@cognite/reveal';
const measurementTool = new MeasurementTool(viewer);

// Subscribe to measurement events
measurementTool.on('started',
  () => viewer.domElement.style.cursor = 'crosshair');
measurementTool.on('ended',
  () => viewer.domElement.attributeStyleMap.delete('cursor'));
measurementTool.on('added', (measurement) => {
  alert(`Measurement added with ${JSON.stringify(measurement.distanceInMeters)} distance!`);
  measurementTool.exitMeasurementMode();
});

measurementTool.enterMeasurementMode();
```

### Mode of measurement
To get the mode of measurement `MeasurementTool.isInMeasurementMode`. It returns `true` if the measurement is active else `false`.

## Set width, color & label units of the measuring line
To change width, color of the line and label units, use `MeasurementTool.setLineOptions(options: MeasurementOptions)`. MeasurementOptions expects
  - `distanceToLabelCallback` : callback for custom operation on measurement labels
  - `lineWidth` : number - units in meters
  - `color` : THREE.color

The updated line width, color and label units will be applied for the next measuring distance.

```jsx runnable-4x
// import { MeasurementTool } from '@cognite/reveal';

const lineOptions = {
  distanceToLabelCallback: (distanceInMeters) => {
  // 1 meter = 100 centimeter
  return `${(distanceInMeters * 100).toFixed(2)} cm`;
  },
  lineWidth: 0.1,
  color: new THREE.Color(0xff0000)
};
const measurementTool = new MeasurementTool(viewer);
measurementTool.enterMeasurementMode();

//Update line width, color and label units for the next measuring line.
measurementTool.setLineOptions(lineOptions);
```

### Get all measurement
To get all measurements added the tool provides `MeasurementTool.getAllMeasurements()` which will
return an array of measurements of type `Measurement`, having below details
  - `measurementId` : unique id of measurement.
  - `startPoint` : start point of the measurement.
  - `endPoint` : end point of the measurement.
  - `distanceInMeters` : measured distance in meters.
```jsx runnable-4x
// import { MeasurementTool } from '@cognite/reveal';

const measurementTool = new MeasurementTool(viewer);
measurementTool.enterMeasurementMode();

//add measurements

//get all measurements
setTimeout(() => {
  const measurements = measurementTool.getAllMeasurements();
  measurements.forEach(measurement => {
    alert(measurement.distanceInMeters);
  });
}, 6000);
```

### Change appearance of existing measurement
To change existing measurement line width or color, use `MeasurementTool.updateLineWidth(lineWidth: number)` or `MeasurementTool.updateLineColor(color: THREE.Color)`

```jsx runnable-4x
// import { MeasurementTool } from '@cognite/reveal';

const measurementTool = new MeasurementTool(viewer);
setInterval(() => {
  const measurements = measurementTool.getAllMeasurements();
  console.log(measurements);
  for (const measurement of measurements) {
    const color = Math.floor(Math.random() * 16777215);
    const lineWidth = (Math.random() * 1.0) + 0.2;
    measurementTool.updateLineColor(measurement, new THREE.Color(color));
    measurementTool.updateLineWidth(measurement, lineWidth);
  }
}, 200);
measurementTool.enterMeasurementMode();
```

### Remove measurement
To remove a measurement from the viewer, we have `MeasurementTool.removeMeasurement(measurement: Measurement)`
  - `measurement` : Measurement to be removed.

```jsx runnable-4x
// import { MeasurementTool } from '@cognite/reveal';

const measurementTool = new MeasurementTool(viewer);
measurementTool.enterMeasurementMode();

//remove the first measurement in the added list
setTimeout(() => {
  const measurements = measurementTool.getAllMeasurements();

  if (measurements[0]) {
    measurementTool.removeMeasurement(measurements[0]);
  }
}, 6000);
```

### Hide and show measurements
It may be useful to view the details of an object without measurements blocking the view.
It's possible to toggle measurement visibility on and off in the viewer.
To do this, use `MeasurementTool.visible(enable: boolean)`.
```jsx
//Hide all measurements in the viewer
measurementTool.visible(false);
```

To remove all measurement from the viewer, use `MeasurementTool.removeAllMeasurement()`

### Label visibility
It is also possible to hide/show only the labels of the measurement using `MeasurementTool.showMeasurementLabels(enable: boolean)`.
```jsx
// Hide all measurement lables
measurementTool.showMeasurementLabels(false);
```


<!-- SOURCE_END: reveal/documentation\versioned_docs\version-4.x\examples\point-to-point-measurement.mdx -->

================================================================================


<!-- SOURCE_START: reveal/documentation\versioned_docs\version-4.x\examples\pointcloud-styling.mdx -->
## File: reveal/documentation\versioned_docs\version-4.x\examples\pointcloud-styling.mdx

---
id: pointcloud-styling
title: Pointcloud styling
description: Usage of the styling API for pointcloud models
---

Cognite Data Fusion has a concept of "objects" in point clouds, represented by one or more bounding volumes for
each object. The objects are backed by the [CDF Annotations API](https://docs.cognite.com/api/v1/#tag/Annotations).
Reveal supports styling individual objects within a point cloud.

import { DemoWrapper } from '@site/versioned_docs/version-4.x/components/DemoWrapper';

<DemoWrapper modelType="pointcloud" />

In this context, a _stylable object_ is represented by a volume in space. Styling an object results in all points that lie within the corresponding volume to attain the assigned style.

Stylable objects must be supplied separately from the model itself. Upon adding a new point cloud model to the viewer, Reveal will automatically fetch data describing the point cloud objects from CDF's Annotations API, if any are available. To get the number of fetched stylable objects, use the property `model.stylableObjectCount`, where `model` is a `CognitePointCloudModel`.

After the model and associated stylable objects are loaded, you may list the objects using `model.traverseStylableObjects`. This method traverses all objects as instances of `PointCloudObjectMetadata`, containing the following fields:

| Field                      | Field type                      | Description                                                                           |
|----------------------------|---------------------------------|---------------------------------------------------------------------------------------|
| `annotationId`             | `number`                        | The ID of the CDF annotation that this stylable object corresponds to.                |
| `assetId`                  | `number?`                       | The ID of the CDF asset associated with the annotation, if any.                       |
| `boundingBox`              | `THREE.Box3`                    | The bounding box of the stylable object in Reveal space.                              |

To visualize all bounding boxes associated with the stylable objects:

```js runnable-4x
const boxGroup = new THREE.Group();

model.traverseStylableObjects(obj => boxGroup.add(new THREE.Box3Helper(obj.boundingBox)));

viewer.addObject3D(boxGroup);
```

Point cloud objects can be styled with a `PointCloudAppearance` object, containing the following attributes:

| Field                      | Field type                      | Description                                                                           |
|----------------------------|---------------------------------|---------------------------------------------------------------------------------------|
| `color`                    | `THREE.Color?`                  | Override color. If all components equal to zero, the override is unused.              |
| `visible`                  | `boolean?`                      | When false, stylable object will be invisible. Default value is `true`.               |

To assign a style to one or more stylable objects, you must first create an instance of the abstract class `PointCloudObjectCollection`. Currently, the only implementation of this class provided by Reveal is `AnnotationIdPointCloudObjectCollection`, which is initialized with a list of annotation IDs corresponding to stylable objects. To see all available annotation IDs associated with the model, you may use the method `model.traverseStylableObjects`.

To color all stylable objects green:

```js runnable-4x
const annotationIds = [];

model.traverseStylableObjects(objectMetadata => annotationIds.push(objectMetadata.annotationId));

const objectCollection = new AnnotationIdPointCloudObjectCollection(annotationIds);
const appearance = { color: new THREE.Color(0, 1, 0) };

model.assignStyledObjectCollection(objectCollection, appearance);
```

After assigning style to an object collection, you may use the property `model.styledCollections` to get a list of all object collections and their assigned styles registered on the model.

## Default appearance

It is also possible to set a default appearance for the point cloud using the `model.setDefaultPointCloudAppearance`. The following example makes all annotated objects visible, while hiding everything else:

```js runnable-4x
const annotationIds = [];

model.traverseStylableObjects(annotationMetadata => annotationIds.push(annotationMetadata.annotationId));

const objectCollection = new AnnotationIdPointCloudObjectCollection(annotationIds);
const appearance = { visible: true };

model.assignStyledObjectCollection(objectCollection, appearance);
model.setDefaultPointCloudAppearance({ visible: false });
```

Like in CAD styling, stylable objects that are part of multiple styled object collections will attain the appearance of the object set whose first style assignment was last.

## Unassigning styled object collections

To reset style of an object collection, use `model.unassignStyledObjectCollection` with the previously styled `PointCloudObjectCollection` as argument. To reset all styled objects use `model.removeAllStyledCollections`

## Reset all styled object collections

To reset all styled object collections, use the method `model.removeAllStyledObjectCollections()`.

This example removes all style on stylable object collections and makes sure the rest of the point cloud is visible.
```js runnable-4x
model.removeAllStyledObjectCollections();
model.setDefaultPointCloudAppearance({ visible: true });
```

## Point cloud shapes

Currently, the only supported shapes that constitute point cloud objects are cylinders and boxes. The specification for how this data is stored, can be found in the [API documentation for Retrieve Annotation](https://docs.cognite.com/api/v1/#tag/Annotations/operation/annotationsGet) under Responses -> 200 Successful retrieval -> `data` -> `pointcloud.BoundingVolume`.

Note that Reveal will visualize the shapes with a somewhat larger size than how they are stored, as to make sure that all points that lie on the surface of the objects also are included as parts of it.


<!-- SOURCE_END: reveal/documentation\versioned_docs\version-4.x\examples\pointcloud-styling.mdx -->

================================================================================


<!-- SOURCE_START: reveal/documentation\versioned_docs\version-4.x\examples\pointcloud.mdx -->
## File: reveal/documentation\versioned_docs\version-4.x\examples\pointcloud.mdx

---
id: pointcloud
title: Pointcloud models
description: Usage of pointcloud models with Cognite3DViewer
---

import useBaseUrl from '@docusaurus/useBaseUrl';

`@cognite/reveal` supports point clouds through a third-party library, [`three-loader`](https://github.com/pnext/three-loader) that is
included in the Reveal codebase and modified for our needs. Most of the internal point cloud logic is based on [`potree`](https://github.com/potree/potree/).
The viewer supports loading both point clouds and CAD models at the same time. Point clouds can be generated from various sources including
[laser scans](https://en.wikipedia.org/wiki/Laser_scanning) and [photogrammetry models](https://en.wikipedia.org/wiki/Photogrammetry).
Loading point clouds is done with identical code to when [loading CAD models](./cad-basic) - Reveal will determine that the model
is a point cloud model and act accordingly.

import { DemoWrapper } from '@site/versioned_docs/version-4.x/components/DemoWrapper';

<DemoWrapper modelType="pointcloud" />

```jsx
import { CogniteClient } from '@cognite/sdk';
import { Cognite3DViewer } from '@cognite/reveal';

const loginManager = new LoginManager('publicdata', 'api');
const client = new CogniteClient({
  appId: 'myPointCloudAppId',
  project: loginManager.project,
  getToken: async () => loginManager.getToken()
});

// some div in your html page for Cognite3DViewer to insert a canvas
const domElement = document.getElementById('canvas-wrapper');

async function main() {
  // to view models from CDF authentication is required

  await client.authenticate();

  const viewer = new Cognite3DViewer({ sdk: client, domElement });

    // load a model and add it on 3d scene
    // https://publicdata.fusion.cognite.com/publicdata/3d-models/5564365369975452/revisions/2817572261344477
    const model = await viewer.addModel({
      modelId: 5564365369975452,
      revisionId: 2817572261344477,
    });
    viewer.loadCameraFromModel(model);

    // call viewer.dispose() when you don't need the viewer anymore
  }
  main();
```

## Point size

You can use `pointSize` property to set the size of each rendered point in a point cloud model.

```js runnable-4x
model.pointSize = 0.1;
```

## Point budget

The point budget limits the number of points loaded and rendered at any given time,
which helps to adapt performance requirements to the capabilities of different hardware.
Recommended values are between 500.000 and 10.000.000. The budget is shared among all
loaded point clouds.

```js runnable-4x
viewer.pointCloudBudget = { numberOfPoints: 500000 };
```

## Point shape

You can set the point shape of each rendered point in the point cloud. Values are defined by `PointShape` enum.

```js runnable-4x
// import { PointShape } from '@cognite/reveal';
model.pointShape = PointShape.Square;
```

## Point color type

You can specify in which way points should be colored. Values are defined by `PointColorType` enum.

```js runnable-4x
// import { PointColorType } from '@cognite/reveal'
model.pointColorType = PointColorType.Depth;
```

Other useful coloring schemes are `Rgb` (color) , `Classification` (color by point class) and `Intensity`
(strength of the backscattered signal in a laser scan).

## Hide model

Models can be temporarily hidden using `CognitePointCloudModel.visible`.
The viewer must be explicitly re-rendered after setting the visibility flag:

```js runnable-4x
model.visible = false;
viewer.requestRedraw();

setTimeout(() => {
  model.visible = true;
  viewer.requestRedraw();
}, 5000);
```

## Point cloud post processing effects

### Point blending

Users can enable the "point blending" effect
which produces a more "stable" rendering of surfaces within the point cloud model, but it comes with a cost of
decreased performance.

<a target='_blank' href={useBaseUrl('/img/point-blending.jpg')}>
  <img src={useBaseUrl('/img/point-blending.jpg')} alt="Illustration of point blending effect" />
</a>

You can enable the described effect by passing a corresponding property on initialization of `Cognite3DViewer`:
```jsx
const viewer = new Cognite3DViewer(
  {
    sdk: client,
    pointCloudEffects: {
      pointBlending: true
    }
  });
```

### Eye-Dome Lighting

Eye-Dome Lighting (EDL) is enabled by default. It draws an outline along edges in the point cloud, making it easier to distinguish objects and features visually. It has a small performance impact.

<a target='_blank' href={useBaseUrl('/img/pointcloud-edl.png')}>
  <img src={useBaseUrl('/img/pointcloud-edl.png')} alt="Illustration of the Eye-Dome Lighting (EDL) effect. Left image is rendered without EDL, the right one is rendered with EDL, which is the default case." />
</a>

You may disable EDL by passing `'disabled'` as the value for `edlOptions` in `pointCloudEffects`:

```js
const viewer = new Cognite3DViewer(
  {
    sdk: client,
    pointCloudEffects: {
      edlOptions: 'disabled'
    }
  });
```

You may also alter the `radius` and the `strength` parameters of the effect. Any of these may be left unspecified, in which case they will be given a default value:


```js
const viewer = new Cognite3DViewer(
  {
    sdk: client,
    pointCloudEffects: {
      edlOptions: { radius: 2.2, strength: 0.5 }
    }
  });
```

## Classification filtering

Some point clouds have classification information associated with each point.  This can
be used for coloring or to filter the point cloud.

:::note
The demonstration model doesn't have classification data so the examples below are not
runnable.
:::

To list classes available in a point cloud model, use `CognitePointCloudModel.getClasses`:

```js
const classes = model.getClasses();
for (const pointClass of classes) {
  console.log(pointClass); // Prints a numeric class code
}
```

It's also possible to check if a model has a given class by using `CognitePointCloudModel.hasClass`.
A list of well-known point class codes are defined in `WellKnownAsprsPointClassCodes`. These definitions
by the [ASPRS LAS 1.4 specifications](http://www.asprs.org/wp-content/uploads/2019/03/LAS_1_4_r14.pdf).

To filter away certain classes, use `CognitePointCloudModel.setClassVisible`:

```js
model.setClassVisible(WellKnownAsprsPointClassCodes.Ground, false);
```

To check if a class currently is visible, use `isClassVisible`:

```js
const visible = model.isClassVisible(WellKnownAsprsPointClassCodes.Ground);
```

## Unloading models

Point clouds (and CAD models) can be unloaded using `Cognite3DViewer.removeModel()`:

```js runnable-4x
viewer.removeModel(model)
```


<!-- SOURCE_END: reveal/documentation\versioned_docs\version-4.x\examples\pointcloud.mdx -->

================================================================================


<!-- SOURCE_START: reveal/documentation\versioned_docs\version-4.x\examples\rendering-resolution.mdx -->
## File: reveal/documentation\versioned_docs\version-4.x\examples\rendering-resolution.mdx

---
id: rendering-resolution
title: Resolution Control
description: Section about how resolution is determined and how it can be controlled by the user
---

# Resolution Control

Reveal will automatically limit its rendering resolution when renderering to a large surface for the sake of performance. This may result in unnecessarily low-detail renders on high-end devices with large monitors.

The user can use the `ResolutionOptions` type to control the rendering resolution. `ResolutionOptions` has the following fields:

| Field                          | Field type                  | Description                                                                      |
| ------------------------------ | --------------------------- | ----------------------------------- |
| `maxRenderResolution`          | `number?`                   | Set the maximum render resolution                                                |
| `movingCameraResolutionFactor` | `number?`                   | Set the factor that the max resolution is multiplied with when camera is moving. Must be between 0 and 1.  Lower factor means lower resolution while camera is moving. |

The `ResolutionOptions` instance is applied to the viewer instance using the `setResolutionOptions` method on `Cognite3DViewer`.

## Max Resolution

To override Reveal's default resolution limit, users may call the `setResolutionOptions` method with `maxRenderResolution` set to a pixel count, e.g.

```
viewer.setResolutionOptions({ maxRenderResolution: 1.4e6 });
```

The value is a number denoting the desired count of pixels on the screen. To e.g. increase the rendering resolution to full HD (1920x1080), call the method with the value 1920 * 1080 = `2073600`.

## Decrease resolution on camera movement

In order to improve the user experience for low-end devices, Reveal can be configured to lower the render resolution when the camera is moving, making the movement smoother. This can be done by calling the `setResolutionOptions` method with an object having the field `movingCameraResolutionFactor` set to a factor, e.g.

```
viewer.setResolutionOptions({ movingCameraResolutionFactor: 0.5 });
```

The factor must be between 0 and 1 and is multiplied into the render resolution of the canvas when the camera is moving. Supplying e.g. a factor of 0.25 will divide the total number of pixels rendered by approximately four while moving.

If using a custom camera manager, be aware that this feature uses the current `CameraManager`'s `'cameraStop'` and `'cameraChange'` events to decide whether the camera is moving or not.

<!-- SOURCE_END: reveal/documentation\versioned_docs\version-4.x\examples\rendering-resolution.mdx -->

================================================================================


<!-- SOURCE_START: reveal/documentation\versioned_docs\version-4.x\examples\timeline.mdx -->
## File: reveal/documentation\versioned_docs\version-4.x\examples\timeline.mdx

---
id: timelinetool
title: Timeline tool
describe: Applying styles to nodes based on date with Play & Stop
---

import { DemoWrapper } from '@site/versioned_docs/version-4.x/components/DemoWrapper';

Reveal allows for applying styles to nodes based on date property and can be viewed as a playable entity
where node styles are applied to different nodes which can be used to showcase progress of the model construction.
The API is influenced by the [node styling API](cad-styling) and it's recommended to read up on this documentation before reading this document.

:::note
The test data used in the documentation site is for testing and to show the capabilities of the tool.
The examples shown is therefore might not be a ideal model construction progression.
:::

<DemoWrapper />

## Timeline

The timeline tool provides ability to apply styles by date. It works by creating a set of "keyframes"  for provided dates.
Each keyframe has a set of associated styled node collections.

### Creating keyframes
To create a `Keyframe`, use `createKeyframe(date: Date)`
- `date` - Date reference for the keyframe

```jsx
const keyframe = timeline.createKeyframe(new Date('2021-10-05'));
```

### Add styled node collections to keyframes
Tool provides feature to add nodes & styles to a Keyframe or number of Keyframes or to all of the Keyframes.
For more information on assigning styles please refer [CAD Styling](cad-styling).

```jsx
const nodes = new AssetNodeCollection(sdk, model);
keyframe.assignStyledNodeCollection(nodes, { renderGhosted: false, color: new THREE.Color(0.6, 0.8, 0.45) });
```

### Remove styled node collections from keyframes

Styled node collections can be removed from keyframes.
`unassignStyledNodeCollection(nodeCollection: NodeCollection)`
- `nodeCollection` - Node set to be removed from keyframes.

```jsx
keyframe.unassignStyledNodeCollection(nodes);
```

### Play timelines
We use `play(startDate: Date, endDate: Date, durationInMilliSeconds: number)`
- `startDate` - Keyframe date to start the playback of the timeline keyframes.
- `endDate` - Keyframe date to stop the playback of the timeline keyframes.
- `durationInMilliSeconds` - Number of milli-seconds for the full playback of keyframes.

Note that the dates doesn't need to match the keyframe dates - the playback will be performed on a "virtual" timeline that is linear in time and update the styling whenever a new keyframe is activated. Only one keyframe will be active at any given time, i.e. the model will only have styling from one keyframe active at any time.

```js runnable-4x
// import { DefaultNodeAppearance, TreeIndexNodeCollection } from '@cognite/reveal';
// import { TimelineTool, Keyframe } from '@cognite/reveal';

function createProgressBarContainer() {
  const container = document.createElement('div');
  container.style.cssText = `
    background: #333;
    border-radius: 13px;
    width: 500px;
    height: 25px;
    padding: 3px;
    align-items: center;
    justify-content: center;
    position: relative;
    transform: translate(-50%, -50%);
    left: 50%;
    bottom: 20px;
  `;
  return container;
}

function createProgressBar() {
  const progress = document.createElement('div');
  progress.style.cssText = `
    /* Progress after moving to next Keyframe */
    content: '';
    display: block;
    background: DodgerBlue;
    width: 0%;
    height: 20px;
    border-radius: 9px;
    position: relative;
  `;
  return progress;
}

model.setDefaultNodeAppearance({ color: new THREE.Color(0.8, 0.08, 0) });

const timeline = new TimelineTool(model);

for (let i = 0; i < 20; i++) {
  const indexSet = new IndexSet();
  indexSet.addRange(new NumericRange(0, (i+1)*60000));
  const nodes = new TreeIndexNodeCollection(indexSet);
  const keyframe = timeline.createKeyframe(new Date(`2020-01-${i+1}`));
  keyframe.assignStyledNodeCollection(nodes, { color: new THREE.Color(0.08, 0.8, 0) });
}

// div element Cognite3DViewer to insert into the canvas
const domElement = document.getElementById('demo-wrapper');
const container = createProgressBarContainer();
const progressBar = createProgressBar();
container.appendChild(progressBar);
domElement.appendChild(container);

const durationMs = 20000;
const startDate = new Date('2020-01-01');
const endDate = new Date('2020-01-20');
timeline.subscribe('dateChanged', (data) => {
  const progress = ((data.date.getTime() - data.startDate.getTime()) / (data.endDate.getTime() - data.startDate.getTime()) * 100);
  progressBar.style.width = `${progress}%`;
  });

timeline.play(startDate, endDate, durationMs);
```

### Stop timeline playback

```jsx
timeline.stop();
```

### Pause timeline

```jsx
timeline.pause();
```

### Resume timeline

```jsx
timeline.resume();
```

### Get Keyframe by Date
`getKeyframeByDate(date: Date)`
- `date` - Date of the Keyframe which needs retrived.

```jsx
const keyframe = timeline.getKeyframeByDate(new Date('2021-10-06'));
```

### Reacting to date changes while in playback mode
While in the play state, the tool emits events which will be helpful for the users to calculate the progression of the playback of the timeline.
The tool provides a `TimelineDateUpdateDelegate` event which can be subscribed to received below data.
- `date` - Virtual date which can be used to calculate progression.
- `activeKeyframe` - Current active `Keyframe` in the playback.
- `startDate` - Virtual date to start the playback of the timeline.
- `endDate` - Virtual date to stop the playback of the timeline.

:::note
If we have subscribed to `dateChanged` event and if there are no active Keyframe during Timeline playback, than `activeKeyframe` data will be `undefined` value.
:::

```jsx
// import { TimelineDateUpdateDelegate } from '@cognite/reveal';

timeline.subscribe('dateChanged', (data) => {
  const date = data.date;
  const keyframe = data.activeKeyframe;
  const startDate = data.startDate;
  const endDate = data.endDate;
});
```

To unsubscribe from `TimelineDateUpdateDelegate` event

```jsx
timeline.unsubscribe('dateChanged', (data) => {});
```

### Removing Keyframe
#### By Date
To remove any Keyframe, use `removeKeyframeByDate(date: Date)`
- `date` - Date of the Keyframe which needs to be removed from the Timeline.

```jsx
timeline.removeKeyframeByDate(new Date('2021-10-07'));
```

#### By Keyframe
To remove any Keyframe, use `removeKeyframe(keyframe: Keyframe)`
- `keyframe` - Keyframe to be removed from the Timeline.

```jsx
timeline.removeKeyframe(keyframeMechNodes);
```

### Keyframes in Timeline
Gets all Keyframes in the Timeline

```jsx
const allKeyframes = timeline.getAllKeyframes();
```


<!-- SOURCE_END: reveal/documentation\versioned_docs\version-4.x\examples\timeline.mdx -->

================================================================================


<!-- SOURCE_START: reveal/documentation\versioned_docs\version-4.x\extending\camera-manager.mdx -->
## File: reveal/documentation\versioned_docs\version-4.x\extending\camera-manager.mdx

---
id: camera-manager
title: Custom CameraManager
description: Shows how to implement custom CameraManager to enable new camera manipulation features.
---

import useBaseUrl from '@docusaurus/useBaseUrl';

By default `Cognite3DViewer` uses `DefaultCameraManager` class to manage user interaction with the camera.
In certain cases it can be useful to customize behaviour of the camera:

- Need to provide custom `THREE.PerspectiveCamera` object to `Cognite3DViewer`
- Need to extend camera controls to any specific case that is not covered by current implementation


## Overview

To create a custom camera manager class, `CameraManager` interface from `@cognite/reveal` must be implemented
and provided to `Cognite3DViewer` on construction using the `cameraManager`-option. You can also set camera manager
in runtime by calling `setCameraManager` method of `Cognite3DViewer` class. Interface is defined [here in the API reference](../api/@cognite/reveal/interfaces/CameraManager.md).

Main implementation specific functions are `setCameraState`, `fitCameraToBoundingBox` and `update`.
Setting state shouldn't be possible when `rotation` and `target` are passed at the same time because they could conflict.
When implementing these functions you can use a helper class `CameraManagerHelper` that contains some useful methods.

## Example implementation

Here is an example implementation of a custom camera manager that utilizes standard ThreeJS [`OrbitControls`](https://threejs.org/docs/index.html?q=orbit#examples/en/controls/OrbitControls) for mouse movement:

```js
import * as THREE from 'three';
import { OrbitControls } from 'three/examples/jsm/controls/OrbitControls';

import {
    CameraManager,
    CameraManagerHelper,
    CameraState,
    CameraEventDelegate,
    CameraChangeDelegate,
    CameraStopDelegate,
    CameraManagerEventType,
    DebouncedCameraStopEventTrigger
} from '@cognite/reveal';

export class CustomCameraManager implements CameraManager {
    private _domElement: HTMLElement;
    private _camera: THREE.PerspectiveCamera;
    private _controls: OrbitControls;
    private readonly _cameraChangedListener: Array<CameraChangeDelegate> = [];
    private readonly _stopEventTrigger: DebouncedCameraStopEventTrigger;

    constructor(domElement: HTMLElement, camera: THREE.PerspectiveCamera) {
        this._domElement = domElement;
        this._camera = camera;
        this._controls = new OrbitControls(this._camera, domElement);
        this._controls.enableDamping = true;
        this._controls.dampingFactor = 0.3;

        this._stopEventTrigger = new DebouncedCameraStopEventTrigger(this);

        this._controls.addEventListener('change', () => {
            this._cameraChangedListener.forEach(cb => cb(this._camera.position, this._controls.target));
        });
    }

    get enabled(): boolean {
        return this._controls.enabled;
    }

    getCamera(): THREE.PerspectiveCamera {
        return this._camera;
    }

    setCameraState(state: CameraState): void {
        if (state.rotation && state.target) throw new Error("Can't set both rotation and target");
        const position = state.position ?? this._camera.position;
        const rotation = state.rotation ?? this._camera.quaternion;
        const target = state.target ?? (state.rotation ?
            CameraManagerHelper.calculateNewTargetFromRotation(
                this._camera, state.rotation, this._controls.target) :
            this._controls.target);

        this._camera.position.copy(position);
        this._controls.target.copy(target);
        this._camera.quaternion.copy(rotation);
    }

    getCameraState(): Required<CameraState> {
        return {
            position: this._camera.position.clone(),
            target: this._controls.target.clone(),
            rotation: this._camera.quaternion.clone(),
        }
    }

    activate(cameraManager?: CameraManager): void {
        this._controls.enabled = true;

        if (cameraManager) {
            this.setCameraState({ target: cameraManager.getCameraState().target });
        }
    }

    deactivate(): void {
        this._controls.enabled = false;
    }

    on(eventType: CameraManagerEventType, callback: CameraEventDelegate): void {
        switch(eventType) {
            case 'cameraChange':
                this._cameraChangedListener.push(callback);
                break;
            case 'cameraStop':
                this._stopEventTrigger.subscribe(callback as CameraStopDelegate);
                break;
            default:
                throw Error(`Unrecognized camera event type: ${event}`);
        }
    }

    off(eventType: CameraManagerEventType, callback: CameraEventDelegate): void {
        switch(eventType) {
            case 'cameraChange':
                const index = this._cameraChangedListener.indexOf(callback);
                if (index !== -1) {
                    this._cameraChangedListener.splice(index, 1);
                }
                break;
            case 'cameraStop':
                this._stopEventTrigger.unsubscribe(callback as CameraStopDelegate);
                break;
            default:
                throw Error(`Unrecognized camera event type: ${event}`);
        }
    }

    fitCameraToBoundingBox(boundingBox: THREE.Box3, duration?: number, radiusFactor?: number): void {
        const { position, target } = CameraManagerHelper.calculateCameraStateToFitBoundingBox(this._camera, boundingBox, radiusFactor);

        this.setCameraState({ position, target });
    }

    update(deltaTime: number, boundingBox: THREE.Box3): void {
        this._controls.update();
        CameraManagerHelper.updateCameraNearAndFar(this._camera, boundingBox);
    }

    dispose(): void {
        this._stopEventTrigger.dispose();
        this._controls.dispose();
        this._cameraChangedListener.splice(0);
    }
}
```
There are four things that you should really pay extra attention to:
1. `'cameraChange'` event must be fired every time camera position or rotation changes to trigger redraw in Reveal.

2. For the `setCameraState` method you should properly handle how change in rotation and target affects the camera and corresponds with
the behaviour of camera controls (`OrbitControls` in this case). For calculating camera target from rotation you can use `calculateNewTargetFromRotation` method of `CameraManagerHelper` .

3. Inside `update` method you should update `near` and `far` planes of the camera, which can be easily done using `updateCameraNearAndFar` method of `CameraManagerHelper`.

4. The functions `activate` and `deactivate` are called automatically when a new CameraManager is assigned to the Cognite3DViewer. These functions are intended to help manage enabling and disabling of input when the manager changes state. Return value of `get enabled` should reflect this state.


<!-- SOURCE_END: reveal/documentation\versioned_docs\version-4.x\extending\camera-manager.mdx -->

================================================================================


<!-- SOURCE_START: reveal/documentation\versioned_docs\version-4.x\extending\datasource.mdx -->
## File: reveal/documentation\versioned_docs\version-4.x\extending\datasource.mdx

---
id: datasource
title: Use a custom data source
description: Shows how to write a data source to customize how Reveal reads data.
---

import useBaseUrl from '@docusaurus/useBaseUrl';

Reveal is designed to retrieve data from [Cognite Data Fusion (CDF)](https://docs.cognite.com/cdf/).
In certain scenarios it might be useful to customize how Reveal retrieves data, to e.g.:

- Introduce application specific caching to reduce network traffic
- Improve responsiveness in areas with limited connectivity
- Introduce extra logging of network activity related to 3D
- Store models locally

Note that certain features relies on connectivity to CDF and won't work without a connection.

## Overview

To implement a custom data source, DataSource from `@cognite/reveal/extensions/datasource` must be implemented
and provided to `Cognite3DViewer` on construction using the `customDataSource`-option, which in turn
provides instances of three interfaces:

| Interface               | Description                                                                                                   |
| ----------------------- | ------------------------------------------------------------------------------------------------------------- |
| `ModelMetadataProvider` | Provides access to metadata about models, including "base URL", camera information and model transformation.  |
| `ModelDataProvider`     | Access to geometry files and JSON description files for 3D models given URLs.                                 |
| `NodesApiClient`        | Provides access to metadata about 3D nodes, such as bounding box and ancestors.                               |

Some of the interface functions are required, some are optional at the cost of reduced functionality in Reveal. See details below.


## ModelMetadataProvider

`ModelMetadataProvider` is responsible for determining the "base URL" for a model, determine
the "model transformation" and the default camera.

Implementations can assume that all identifiers will be of type `CdfModelIdentifier`:

```js
class CdfModelIdentifier implements ModelIdentifier {
  readonly revealInternalId: symbol;
  readonly modelFormat: File3dFormat;
  readonly modelId: number;     // CDF ModelID
  readonly revisionId: number;  // CDF RevisionID
}
```

| Function/Field          | Required?                                  | Description                                                      |
| ----------------------- | ------------------------------------------ | ---------------------------------------------------------------- |
| `getModelUri()`         | Yes                                        | Determine the base URL that will be used when download metadata and geometry using `ModelDataProvider`. |
| `getModelCamera()`      | No - return `undefined` to use default     | Return an initial camera pose for the model                      |
| `getModelMatrix()`      | Yes, but value can be hardcoded.           | Returns an transformation matrix for transforming from stored coordinates to Reveal coordinates (see below) |
| `getModelOutputs()`     | Yes                                        | Returns an object describing the set of valid formats and version for the given model |

`getModelUri()` returns a "base URL" that will be passed to `ModelDataProvider.getBinaryFile()` and `getJsonFile()`. Note that
it's up to `ModelDataProvider` how this base URL is handled and it is possible to use this base URL as 
some other identifier, e.g. a folder on disk or ID of a blob storage. `getModelUri()` accepts `BlobOutputMetadata` as input which 
defines the format, version, and if applicable, the "blob id" of the output.

`getModelMatrix()` is responsible for converting from stored geometry coordinates to Reveal coordinates (right-handed, Y up). This 
is required for models stored in different orientation in CDF. For CAD models, most models are stored in a right-handed Z up coordinate system, and will need
a transformation. By default, this transformation can be expressed as:

<img src={useBaseUrl('/img/default-cad-matrix.png')} alt="Default CAD to Reveal orientation matrix" />

This corresponds to a 180 degree rotation around the X axis:

```js
new THREE.Matrix4().makeRotationFromEuler(new THREE.Euler(-Math.PI / 2, 0, 0));
```

For point clouds, models are usually stored right-handed Y up and requires no transformation. In this case,
the identity matrix should be returned instead:

```js
new THREE.Matrix4().identity();
```

In addition to the model identifier, the methods can accept the format of the output which describes which output format that is used for the given model/revision.

`getModelOutputs()` returns a list of supported outputs for a given model/revision.
The `BlobOutputMetadata` type includes the format, version, and if applicable, the "blob id" of the model. 


### Example implementation

This simple implementation provides metadata for models stored locally and provides 
default camera and model transformation.

Notice that each of the functions asserts that the identifier is a `CdfModelIdentifier`. Currently, 
this should always be true.

```js
import { 
  CdfModelIdentifier, 
  ModelIdentifier,
  ModelMetaDataProvider
} from '@cognite/reveal';

class MyModelMetaDataProvider implements ModelMetaDataProvider {
  getModelUri(identifier: ModelIdentifier, formatMetadata: BlobOutputMetadata): Promise<string> {
    if (!(identifier instanceof CdfModelIdentifier)) {
      throw new Error('Unexpected identifier');
    }
    // Base URL of where geometry files are stored
    // This will be passed to ModelDataProvider.getJsonFile() and getBinaryFile()
    return Promise.resolve(`https://localhost/models/${identifier.modelId}/revision/${identifier.revisionId}`);
  }

  getModelCamera(identifier: ModelIdentifier): Promise< { position: THREE.Vector3; target: THREE.Vector3 } | undefined> {
    if (!(identifier instanceof CdfModelIdentifier)) {
      throw new Error('Unexpected identifier');
    }
    // Use default camera
    return Promise.resolve(undefined);
  }

  getModelMatrix(identifier: ModelIdentifier, format: File3dFormat | string): Promise<THREE.Matrix4> {
    if (!(identifier instanceof CdfModelIdentifier)) {
      throw new Error('Unexpected identifier');
    }
    // CAD models are usually stored in Z-up, while Reveal uses Y-up, so
    // we need to account for this
    const cadModelToReveal = new THREE.Matrix4().makeRotationFromEuler(new THREE.Euler(-Math.PI / 2, 0, 0));
    return Promise.resolve(cadModelToReveal);
  }

  getModelOutputs(modelIdentifier: ModelIdentifier): Promise<BlobOutputMetadata[]> {
    // Indicates that the supported output for this model is of type File3dFormat.RevealCadModel and version 8
    
    // BlobId refers to a remote identifier for a blob storage, but since this simply fetches
    // the model locally, it can be set to -1
    return Promise.resolve([
      {
        blobId: -1,
        format: File3dFormat.RevealCadModel,
        version: 8
      }
    ]);
  }
}
```

## ModelDataProvider

`ModelDataProvider` is responsible for receiving files by URL.

| Function/Field          | Required?                                  | Description                                                      |
| ----------------------- | ------------------------------------------ | ---------------------------------------------------------------- |
| `getBinaryFile()`       | Yes                                        | Retrieves a binary blob. Used to download CAD geometry and point clouds  |
| `getJsonFile()`         | Yes                                        | Retrieves JSON data. This is used to retrieve metadata about models |

### Example implementation

The following example simply downloads files using `fetch()`. Note that
it's up to the implementation to decide how to retrieve data, and that 
data doesn't necessarily need to be downloaded over HTTP.

```js
import { ModelDataProvider } from '@cognite/reveal';

class MyModelDataProvider implements ModelDataProvider {
  async getJsonFile(baseUrl: string, fileName: string): Promise<any> {
    const url = `${baseUrl}/${fileName}`;
    const response = await fetch(url);
    if (!response.ok) {
      throw new Error(`Could not fetch '${url}'`);
    }
    return response.json();
  }

  async getBinaryFile(baseUrl: string, fileName: string): Promise<ArrayBuffer> {
    const url = `${baseUrl}/${fileName}`;
    const response = await fetch(url);
    if (!response.ok) {
      throw new Error(`Could not fetch '${url}'`);
    }
    return response.arrayBuffer();
  }
}
```

## NodesApiClient

The API client is responsible for providing metadata about 3D CAD nodes, including node bounding boxes and parent/child relationships between nodes.

| Function/Field              | Required by<br />(in `CogniteCadModel`)          | Description                                                      |
| --------------------------- | ------------------------------------------ | ----------------------------------------------------------------- |
| `mapTreeIndicesToNodeIds()` | `mapTreeIndexToNodeId()`, `mapTreeIndicesToNodeIds()`, `getBoundingBoxByTreeIndex()` | Maps from Reveal tree indices to CDF node IDs used to identify nodes in CDF |
| `mapNodeIdsToTreeIndices()` | No, but recommended to have a 1:1 mapping  | Reverse mapping of `mapTreeIndicesToNodeIds()`                   |
| `determineTreeIndexAndSubtreeSizesByNodeIds()` | No                      | Determines the "span" of a node identified by a CDF node ID (i.e. the tree index and how many descendants it has including the node itself). |
| `determineNodeAncestorsByNodeId()` | No                                  | Find "ancestor span" of a node identified by the CDF node ID. Returns data on same format as function above. |
| `getBoundingBoxesByNodeIds()` | No                                          | Determines the individual bounds of each node, specified by their CDF node IDs. |

### Example implementation

```js
class MyNodesApiClient implements NodesApiClient {
  mapTreeIndicesToNodeIds(modelId: number, revisionId: number, treeIndices: number[]): Promise<number[]> {
    // Map 1:1 - pretend treeIndices == nodeIds
    return Promise.resolve(treeIndices);
  }
  mapNodeIdsToTreeIndices(modelId: number, revisionId: number, nodeIds: number[]): Promise<number[]> {
    // Map 1:1 - pretend treeIndices == nodeIds
    return Promise.resolve(nodeIds);
  }
  determineTreeIndexAndSubtreeSizesByNodeIds(modelId: number, revisionId: number, nodeIds: number[]): Promise<{treeIndex: number; subtreeSize: number }[]> {
    throw new Error('Not supported.');
  }
  determineNodeAncestorsByNodeId(modelId: number, revisionId: number, nodeId: number, generation: number): Promise<{treeIndex: number; subtreeSize: number }> {
    throw new Error('Not supported.');
  }
  getBoundingBoxesByNodeIds(modelId: number, revisionId: number, nodeIds: number[]): Promise<THREE.Box3[]> {
    throw new Error('Not supported.');
  }
}
```

## Unsupported features

There's a few features that is not backed by the `DataSource`-API and hence won't be affected by the implementation. The most
notable feature is the [CAD styling API](../examples/cad-styling) which in large is backed by `CogniteClient`. To use the styling API with
custom data sources, you will need to [create custom node collections](../examples/cad-styling-custom) or [use `TreeIndexNodeCollection`](../examples/cad-styling).

Currently there are restrictions in the [the API for saving viewer state](../examples/cad-save-viewerstate) causing `Cognite3DViewer.setViewState` not
to work with a custom `DataSource`. This might change in the future.


<!-- SOURCE_END: reveal/documentation\versioned_docs\version-4.x\extending\datasource.mdx -->

================================================================================


<!-- SOURCE_START: reveal/documentation\versioned_docs\version-4.x\installation.mdx -->
## File: reveal/documentation\versioned_docs\version-4.x\installation.mdx

---
id: installation
title: Installation
description: Reveal installation guide
---

The library has peer-dependencies on [Cognite Data Fusion JS-SDK](https://www.npmjs.com/package/@cognite/sdk)
and [ThreeJS](https://www.npmjs.com/package/three) which must be installed as dependencies in the client application that uses Reveal.

```bash npm2yarn
npm install @cognite/reveal @cognite/sdk three@<version>
```

Please find the correct version of ThreeJS in [the release documentation on Github](https://github.com/cognitedata/reveal/releases/). We only guarantee support for the exact ThreeJS version specified there.

## Installation for projects with Content-Security-Policy

To be able to use Reveal while having a CSP you have to allow the following:
* [script-src](https://developer.mozilla.org/en-US/docs/Web/HTTP/Headers/Content-Security-Policy/script-src) `unsafe-eval`
* [connect-src](https://developer.mozilla.org/en-US/docs/Web/HTTP/Headers/Content-Security-Policy/connect-src) `data:`

These settings are nessesary to allow for execution of internal WebAssembly modules bundled with Reveal.
The `connect-src` policy is for allowing the WebAssembly module to be added as [data url](https://developer.mozilla.org/en-US/docs/Web/HTTP/Basics_of_HTTP/Data_URLs).
The `unsafe-eval` policy is needed to evaluate and execute the WebAssembly module at runtime.
This may be removed in the future once the [wasm-unsafe-eval](https://github.com/WebAssembly/content-security-policy/blob/master/proposals/CSP.md) policy gets implemented into all major browsers.

:::note
Evaluate security risks before adding any of these options to your CSP.
:::

<!-- SOURCE_END: reveal/documentation\versioned_docs\version-4.x\installation.mdx -->

================================================================================


<!-- SOURCE_START: reveal/documentation\versioned_docs\version-4.x\migration-guide.md -->
## File: reveal/documentation\versioned_docs\version-4.x\migration-guide.md

---
id: migration-guide
title: Migrating from Reveal 3 to 4
hide_title: true
description: This page describes the differences between Reveal 3 and 4.
---

This document is an overview of some important differences between Reveal 3.x and Reveal 4.x.

## Entrypoint and import paths
For Reveal 4 we changed into using a single entry point for everything: `@cognite/reveal`.
So extensions and tools also should be imported from this entry point.
We have however also added support for node's module `exports` such that if your tsconfig is setup with:
```ts
"moduleResolution": "Node16",
```

imports will still work the same way they did with Reveal 3.x. 
Note that this may require a bump in typescript version.
If this is not possible for you, then you need to change all imports to be `from @cognite/reveal`.

Using Reveal 3 or Reveal 4 with `"moduleResolution": "Node16"` the import path of the Axis Cross Tool is:

```ts
import { AxisViewTool } from '@cognite/reveal/tools';
const axisViewTool = new AxisViewTool(...);
```

if you use Reveal 4 without the `Node16` module resolution, the import should look like this:
```ts
import { AxisViewTool } from '@cognite/reveal';
const axisViewTool = new AxisViewTool(...);
```

## `connect-src data:` is now a required content-security-policy
See [Installation](./installation.mdx#installation-for-projects-with-content-security-policy) for updated content security policies needed for Reveal.
Note that this is only relevant if you have a content-security-policy set up. 

## Three.js is now a peer-dependency
For Reveal 4 we have changed threejs from being exported from Reveal and rather require applications that consume Reveal to import it.
There are multiple reasons for this, but a major pain point has been that Reveal does not expose the three.js examples in its export, causing applications to have to install threejs anyway.
In addition, we also see a lot of applications ending up having multiple bundles of three.js which we are trying to alliviate.

## `Cognite3DViewer.setBackgroundColor` now has optional alpha parameter
The `setBackgroundColor` now supports settings alpha value. 
This becomes relevant when you want your 3D content to blend with your website.

## `Cognite3DModel` has been renamed to `CogniteCadModel`
Renamed for clarity, as technically a point cloud can also be viewed as a 3D model.

## `Cognite3DViewer.getIntersectionFromPixel` options parameter has been removed
Reveal currently uses GPU driven picking for point clouds, so the previously used options are not applicable anymore.

## `DefaultCameraManager` no longer exposes its internal `ComboControls` implementation
Methods for settings and getting options has been added to support dynamically updating the state.

## `CogniteCadModel` and `PointCloudModel` no longer inherit from the three.js Object3D base class
This prevents usages that Reveal does not handle such as reparenting and other mutable operations on the three.js object.
Methods such as setting the transformation or visibility are available

## `contiuousModelStreaming` option has been promoted to opt-out
This means that CAD models will now stream continuously (vs. just when camera stops moving) by default.
This can be reverted by setting the `contiuousModelStreaming` option to false when initializing the `Cognite3DViewer`.

## Styling types use `THREE.Color` instead of RGB tuples

The `NodeAppearance` and `PointCloudAppearance` objects now use `THREE.Color` from the threejs library for storing colors. This means that e.g. a style that was previously created by writing

```
const style = { color: [0, 255, 0] };
```

must now be created by writing

```
// import * as THREE from 'three';
const style = { color: new THREE.Color(0, 1.0, 0) };
```

## `CognitePointCloudModel`'s `getClasses` method now returns more data

Previously, a call to `pointCloudModel.getClasses()` (where `pointCloudModel` is an instance of `CognitePointCloudModel`) would return the available classification codes as a list of numbers. It now returns structs of type `{ code: number, name: string }`, where `code` corresponds to the previously returned classification code, and `name` is a human-readable name of the class.

## Changes related to the `CameraManager` interface

Two major changes are now required for `CameraManager`s.
The first change is adding a `cameraStop` which Reveal will use to control when geometry should be loaded and other performance intensive computations.
The second is adding a activate / deactivate method to handle transitioning to and from other `CameraManager`s and lets each implementation decide what this functionality should look like.

`CameraManager` implementations must now allow listeners for the `'cameraStop'` event, in addition to the old `'cameraChange'` event. This is to allow `CameraManager` implementors the flexibility of deciding when the camera manager is standing still. The event *must* be emitted in order to trigger loading of model data if `continuousStreaming` is set to `false`.

In order to make this transition easy, we expose the `DebouncedCameraStopEventTrigger` class, which will fire a stop event when the camera manager's `'cameraChange'` has not triggered for a short while.

To use this class, construct it in the custom camera manager's constructor:
```
this._stopEventTrigger = new DebouncedCameraStopEventTrigger(this);
```
Note that it takes the custom camera manager itself as argument. It will immediately subscribe to the `cameraChange` event on this camera manager, so make sure any prerequisite initialization is finished before constructing it.

Then, implement a new `on(eventType, callback)` method, for instance:
```
on(eventType: CameraManagerEventType, callback: CameraEventDelegate): void {
    switch(eventType) {
        case 'cameraChange':
            // handle adding camera change callback as before
            break;
        case 'cameraStop':
            this._stopEventTrigger.subscribe(callback as CameraStopDelegate);
            break;
        default:
            throw Error(`Unrecognized camera event type: ${event}`);
    }
}
```
The `off(eventType, callback)` implementation may have a similar structure, but calling `unsubscribe` on the trigger object instead of `subscribe`.

Finally, call `this._stopEventTrigger.dispose()` in the camera manager's `dispose()` method to clean up resources after use.

## `get`/`setModelTransformation` are now relative to to the initial CDF-to-ThreeJS transform

In earlier versions of Reveal, the `model.getModelTransformation()` method (`model` being an instance of `CogniteCadModel` or `CognitePointCloudModel`) would return the entire model transformation from CDF geometry coordinates to the model's current transform in threejs-space. It will now only return the custom transformation applied *after* the initial transform from CDF space to threejs/Reveal space. Thus, it will only return what was last set by `model.setModelTransformation()`, and the identity transformation if no transformation has been set.

We now also provide `model.getCdfToDefaultModelTransformation()` that returns the matrix transformation from CDF coordinates to Reveal/threejs space. It may include an additional default transformation specified for this model in the backend.

Thus, to get the full transformation from CDF coordinates to the model's transform in Reveal space, you would use something akin to

```
const totalTransform = model.getModelTransformation().clone().multiply(model.getCdfToDefaultModelTransformation());
```
This is useful when combining visualization of a model with other 3D data extracted directly from CDF outside Reveal.

## Removed several CDF/model transformation methods

The methods `mapFromCdfToModelCoordinates`, `mapPositionFromModelToCdfCoordinates`, `mapBoxFromCdfToModelCoordinates`, `mapBoxFromModelToCdfCoordinates` have been removed from `CogniteCadModel`.

The `*FromCdfToModelCoordinates` can be emulated by constructing the transformation matrix with

```
const cdfTransformation = model.getModelTransformation().clone().multiply(model.getCdfToDefaultModelTransformation());
```
as was mentioned above. It can then be used in either `position.applyMatrix4(cdfTransformation)` or `box.applyMatrix4(cdfTransformation)` respectively.

The `*FromModelToCdfCoordinates` can likewise be emulated using the matrix
```
const inverseCdfTransformation = model.getModelTransformation().clone().multiply(model.getCdfToDefaultModelTransformation()).invert();
```
and using it with `applyMatrix4()` as above.

## Potree prefix removed

In Reveal 4, several symbols has `Potree`-prefix which now has been replaced. This includes:

- `PotreePointColorType` is now called `PointColorType`
- `PotreePointShape` is now called `PointShape`
- `PotreePointSizeType` is now called `PointSizeType`
- `PotreeClassification` is now called `PointClassification`

The above changes are simple renames and migrating these should be very easy.

## Removed methods on Cognite3DViewer
* `getScene()`
* `renderer`
* `isBrowserSupported`
* `getCamera()`, can be fetched with `cameraManager.getCamera()`

## Removed tools due to low / no usage
* Geomap tool
* Exploded view tool


<!-- SOURCE_END: reveal/documentation\versioned_docs\version-4.x\migration-guide.md -->

================================================================================


<!-- SOURCE_START: reveal/documentation\versioned_docs\version-4.x\overview.mdx -->
## File: reveal/documentation\versioned_docs\version-4.x\overview.mdx

---
id: overview
slug: /
title: Overview
description: Reveal is a JavaScript library for visualizing big 3D models on the web. It supports complex CAD models and large point clouds.
---

import useBaseUrl from '@docusaurus/useBaseUrl';

Reveal is a JavaScript library for visualizing big 3D models on the web.
It supports complex CAD models and large point clouds.
The library supports 3D model hosted by [Cognite Data Fusion (CDF)](https://docs.cognite.com/cdf/) which supports [ingestion of a variety of 3D formats](https://docs.cognite.com/cdf/3d/). If you do not have access you can use models provided through the [Open Industrial Data project](https://openindustrialdata.com/) for testing.

If you have previously used the previous version of Reveal,
[`@cognite/3d-viewer`](https://www.npmjs.com/package/@cognite/3d-viewer),
and want to migrate to this package, please see the [Migration guide](./migration-guide.md).
For details about the installation procedure and how to use Reveal in certain environments,
see the [Installation guide](./installation.mdx).

## CAD models

CAD (Computer-Aided Design) models are technical design 3D models. For the big asset industry these are typically very complex and can often consist of several million individual objects. To enable interactive visualization of such models [Cognite Data Fusion (CDF)](https://docs.cognite.com/cdf/) processes these models to optimize the geometry and the structure, enabling Reveal to visualize them on the web.

CAD models typically contain attributes/properties associated with each 3D object (also called node). These attributes can provide valuable metadata, such as extent, function, what system the object is part of and it's operation specifications. CDF and Reveal provide functionality for queries based on the attributes to perform filtering, styling and to collect information.

<img src={useBaseUrl('/img/cad-model.png')} alt="A grayscale CAD model" />

## Point cloud models

Point cloud models are 3D models generated from techniques such as 3D scanning or photogrammetry. [Cognite Data Fusion (CDF)](https://docs.cognite.com/cdf/) processes point clouds and stores them in a format suitable for visualization.

<img src={useBaseUrl('/img/pointcloud-model.png')} alt="Point cloud model" />

## Technology

Behind the scenes Reveal based on [WebGL](https://developer.mozilla.org/en-US/docs/Web/API/**WebGL_API**) through [ThreeJS](https://threejs.org/) and uses [three-loader](https://github.com/pnext/three-loader) for point cloud visualization. three-loader is based on [Potree](https://www.potree.org).

Reveal is written in [TypeScript](https://www.typescriptlang.org/) and uses [WebAssembly](https://webassembly.org/) modules written in [Rust](https://www.rust-lang.org/) to do much of the heavy-lifting.

Reveal is available on [Github](https://github.com/cognitedata/reveal). If you find issues, have a feature suggestion or a question, please register a ticket in our [issue tracker](https://github.com/cognitedata/reveal/issues).

## A note on coordinate systems

The models provided by CDF are stored in "CDF space", a coordinate system where the positive Z axis is the up direction. However, objects visualized in Reveal uses ThreeJS's coordinate system, which has the positive Y axis pointing upward. The transformation between these two coordinate systems is handled automatically behind the scenes for all CDF models. This difference can still introduce errors when combining models in Reveal with other data from CDF. To transform objects between the two coordinate systems, the `@cognite/reveal` package exports the transformation in the variable `CDF_TO_VIEWER_TRANSFORMATION`.

To transform e.g. a bounding box from CDF space to Viewer space, you may write

```js
// import { CDF_TO_VIEWER_TRANSFORMATION } from '@cognite/reveal';
// import { Box3, Matrix4 } from 'three';

const viewerBoundingBox: Box3 = cdfBoundingBox.applyMatrix4(CDF_TO_VIEWER_TRANSFORMATION);
```
and conversely, to transform the other way:

```js

const viewerToCdfTransformation: Matrix4 = CDF_TO_VIEWER_TRANSFORMATION.clone().invert();
const cdfBoundingBox: Box3 = viewerBoundingBox.applyMatrix4(viewerToCdfTransformation);
```

<!-- SOURCE_END: reveal/documentation\versioned_docs\version-4.x\overview.mdx -->

================================================================================


<!-- SOURCE_START: reveal/examples\README.md -->
## File: reveal/examples\README.md

This project was bootstrapped with [Create React App](https://github.com/facebook/create-react-app)
and extended with [react-app-rewired](https://github.com/timarney/react-app-rewired) to copy reveal/viewer workers and wasm files to output folder.

## Getting started

You need to build the viewer first and then the examples:

```bash
cd ./viewer
yarn install
yarn build

cd ../examples
yarn install
yarn start
```

Because we have local dependency on reveal like `"@cognite/reveal": "link:../viewer/dist"`,
examples are not bound to specific viewer release from npm. They just use whatever you have in local viewer build.

## [Environment files](https://create-react-app.dev/docs/adding-custom-environment-variables/)

Create a copy of `.env.example` file and rename it to `.env`.
This file can be used to set environment variables which provides defaults for things like project name or model ids used in examples.

## Available Scripts

In the project directory, you can run:

### `yarn start`

Runs the app in the development mode.<br />
Open [https://localhost:3000](https://localhost:3000) to view it in the browser.

The page will reload if you make edits.<br />
You will also see any lint errors in the console.

### `yarn test`

Launches the test runner in the interactive watch mode.<br />
See the section about [running tests](https://facebook.github.io/create-react-app/docs/running-tests) for more information.<br />
This does not run the visual tests.

### `yarn ci:e2e`

Runs test server and visual tests.

### `yarn snapshots:update`

Runs test server and updates all test snapshots.

### `yarn start:e2e-server`

Only runs test server for visual tests.

### `yarn test:visual`

Only runs visual tests. Assumes you have e2e server running.

### `yarn test:visual:update`

Updates all visual tests snapshots. Assumes you have e2e server running.

### `yarn build`

Builds the app for production to the `build` folder.<br />
It correctly bundles React in production mode and optimizes the build for the best performance.

The build is minified and the filenames include the hashes.<br />
Your app is ready to be deployed!

See the section about [deployment](https://facebook.github.io/create-react-app/docs/deployment) for more information.

### `yarn eject`

**Note: this is a one-way operation. Once you `eject`, you cant go back!**

If you arent satisfied with the build tool and configuration choices, you can `eject` at any time. This command will remove the single build dependency from your project.

Instead, it will copy all the configuration files and the transitive dependencies (webpack, Babel, ESLint, etc) right into your project so you have full control over them. All of the commands except `eject` will still work, but they will point to the copied scripts so you can tweak them. At this point youre on your own.

You dont have to ever use `eject`. The curated feature set is suitable for small and middle deployments, and you shouldnt feel obligated to use this feature. However we understand that this tool wouldnt be useful if you couldnt customize it when you are ready for it.

## Learn More

You can learn more in the [Create React App documentation](https://facebook.github.io/create-react-app/docs/getting-started).

To learn React, check out the [React documentation](https://reactjs.org/).


<!-- SOURCE_END: reveal/examples\README.md -->

================================================================================


<!-- SOURCE_START: reveal/react-components\README.MD -->
## File: reveal/react-components\README.MD

# Reveal React Components
This library contains react components to augment applications using Reveal.

## Building and installing
Note that this library depends on an internal Cognite design library (`cogs.js`) and is therefore not usable for non-cognite applications (sorry...).
To be able to fetch internal packages you must be logged into yarn with `yarn npm login`.

After authenticating and installing, build can be done with the following commands:

```
yarn
yarn run build
```

## Running locally
Components can be tested, visualized and developed using storybook:
```
yarn run storybook
```


## Using reveal react components in /examples
As we want `/examples` to continue working out-of-the-box by external users, you must do some manual adjustments if you want to test a components.

Some changes must be made to `/examples/package.json`,

From:
<pre><code>
"dependencies": {
  ...
  "react": "x.x.x",
  "react-dom": "x.x.x",
  "styled-components": "x.x.x",
}
</code></pre>

To:
<pre><code>
"dependencies": {
  ...
  <mark style="background-color: Gold;">"react": "link:../react-components/node_modules/react",</mark>
  <mark style="background-color: Gold;">"react-dom": "link:../react-components/node_modules/react-dom",</mark>
  <mark style="background-color: Gold;">"styled-components": "link:../react-components/node_modules/styled-components",</mark>
  <mark style="background-color: LightGreen;">"@cognite/reveal-react-components": "link:../react-components",</mark>
}
</code></pre>

The reason for these changes is that when `@cognite/reveal-react-components` is symlinked, we must ensure that the application and the library resolve to the same version of react to avoid conflicts.

In addition, `@cognite/reveal-react-components` has a peer-dependency, so `cogs.js` must also be installed:

```
yarn add @cognite/cogs.js
```


<!-- SOURCE_END: reveal/react-components\README.MD -->

================================================================================


<!-- SOURCE_START: reveal/react-components\src\architecture\base\README.md -->
## File: reveal/react-components\src\architecture\base\README.md

# Building and testing

Do the following commands:

    yarn
    yarn build
    yarn storybook`

This will automatically goto: https://localhost:3000/?modelUrl=primitivesOpen.

Instead of yarn build, use can build with types by:

    yarn tsc --noEmit

When the StoryBook is open, goto `Architecture/Main`. The toolbar on the right hand side is the one I have made. Here some commands and tools are added.

# Motivation

The objectives with this framework it that is should be easy to use and extend in the future. I hope all new related functionality will be developed using this framework. More is described in this document: https://docs.google.com/presentation/d/1Y50PeqoCS5BdWyDqRNNazeISy1SYTcx4QDcjeMKIm78/edit?usp=sharing

# Coding

You will probably find the coding style somewhat different than usually done in Reveal. Some difference:

- **Headers:** Headers are used to mark sections in a file. This is important for fast navigation and to keep the code in correct order. The order in the file is always:

  - Public constants (exported)
  - Instance fields.
  - Instance properties
  - Implementation of interface (if any)
  - Overrides from the must basic base class (if any)
  - :
  - Overrides from the actually base class (if any)
  - Instance methods (If many, break it up based on what they do)
  - Static methods (if any)
  - Local functions, types or classes used in this file only

- **Virtual methods:**: Since TypeScript doesn't allow the virtual keyword, all functions are virtual. This is a weakness for the application developer. I have tried to mark function as virtual by comments. You should not override other function than this. A virtual function normally brings in unnecessary complexity and should general be used by care.

  - Function with prefix `Core` are always virtual and protected. They can be overridden, but must call the same function for the base class. A function without the `Core` prefix is the one you should call from outside and is public. Experience shows that this pattern will make the code easier to maintain and extend in the future. For instance `remove/removeCore` and `initialize/initializeCore` in the `DomainObject`.
  - Overridden methods should alway be marked by the override keyword. You will unfortunate not get any linting error when you forget this.
  -

- **Static methods and classes:** The linker don't like static method, especially when the entire class have static method only. I wanted to use this more, but have used functions instead. I don't like this, because it does not group similar function together. It will also be less readable on the caller side, since you don't know what part of the code the function is coming from. In typescript we have for instance Math with act like a static class, but they use som magic to pretend it to be using interface.

- **Reuse:** I try to reuse code whenever it is possible. Therefore you will find functions that are very small,
  often one liners. This ensures the complexity of the code to be low and increase readability on the caller side. For instance:

        export function clear<T>(array: T[]): void {
            array.splice(0, array.length);
        }

- **Single responsibility:** I try to give each class one single responsibility. Therefore I use several base classes, each class adds some complexity.
  Examples of this is `BaseView/ThreeView/GroupThreeView` which are all base classes. If they are merge to one single class, it will be too complex.

- **Interdependence:** Try to keep must classes independent of other classes. For instance the tool should not know about the views. Utility function and classes can used whenever you like.

- **Utility function and classes:** I have added som utility function/classes in `architecture/base/utilities`.
  - Some utility functions may be a duplicate of some function in a package we use. Please tell me.
  - Some utility classes you will see is like a duplicate, but is made by purpose. For instance `Range3` class which is almost the same as `THREE.Box`, but is far easier to work with.
  - Some utility classes or function is already implemented in Reveal, and are similar. The reason for not reusing Reveal here is due to what we should expose out of Reveal and into Reveal-components. For the moment this is rather strick. Examples is `Vector3Pool` which is implemented both places. Also some of the color classes may seem to be similar. But all this is low level stuff, and is not related to any Reveal functionality.
  - I will remove unused utility function or classes when I feel ready for it. Most of them are imported file by file from the node-visualizer project.

# Architecture Overview

## architecture/base

Here is the architecture with all base classes and some utility functionality.

### architecture/base/domainObject

- **DomainObject:** This is the base class for the domain object. A domain object is some sort of data, that is a collection of other domainObject or the data itself.

  - An important property of the domainObject is that is has a list of views that will be updated.
  - It has a parent and a collection of children. To ensure easy use, I have added several methods to access children, descendants and ancestors in several ways.

  - It has some properties like selected, expanded and active. This is not used yet, but I wanted it to be here as this is part of the pattern. They are connected to how they are visualized and behave in a tree view, but this is not used for the moment.

  - Methods with postfix `Interactive` are doing all necessary updates automatically. For instance: `addChild/addChildInteractive` or `setVisible/setVisibleInteractive`

- **VisualDomainObject**: This subclass adds functionality to a domain object so it can be shown in 3D. The most important function here is `createThreeView()` which must be overridden.

- **FolderDomainObject**: Concrete class for multi purpose folder.

- **RootDomainObject**: Concrete class for the root of the hierarchy

### architecture/base/renderTarget

Normally, when I follow this pattern, the renderTarget is a domainObject itself, and you can have as many of them as you like. But this makes it a little bit more complicated. Since we always have one viewer only, I don't use any base class for this.

- **RevealRenderTarget** Wrap around the Cognite3DViewer. It contains:

  - The `Cognite3DViewer` and assume this is constructed somewhere else.
  - The `RootDomainObject`, where the data can be added.
  - The `ToolController`, where the active tool is kept and where the events are handled.
  - In addition, it has several utility functions for getting information from the viewer.
  - It set up listeners on `cameraChange` and `beforeSceneRendered` events from the viewer.

- **ToolController**
  Holds the tools and all commands, the active tool and the previous tool.
  - It inherits from `PointerEvents`, which is a base class on the Reveal side. All virtual functions are implemented in the `ToolControllers`.
  - It creates a `PointerEventsTarget`, also on the Reveal side, that set up all the event listeners for the pointer (mouse or touch) handlers. The `PointerEventsTarget` will automatically call thefunctions `onHover`, `onClick`, `onDoubleClick`, `onPointerDown`, `onPointerUp` and `onPointerDrag` correctly.
  - In addition it sets up some other events like `onKey` and `onFocus`.
  - All event are routed to the active tool

### architecture/base/commands

- **BaseCommand**: Base class for all tools and commands. There are basically user actions. It contains all necessary information to create and update a button in the user interface, but it doesn't need or use React. The must important method to override is `invokeCore`, which is called when the user presses the button.A base command can be checkable.

- **RenderTargetCommand** I wanted `BaseCommand` should be independent of any type of connection to the rest of the system. This class only brings in the connection to the `RevealRenderTarget`.

- **BaseTool** This is the base class for all the tools, which is used when doing user interaction in the viewer itself. It defined a lot of virtual methods for user interactions. This should be overridden for creating the logic specific for a tool.

### architecture/base/concreteCommands

This is a collection of most commonly used tools and commands:

- **FitViewCommand**: Fit view to the model bounding box
- **NavigationTool**: Reroute the events to the camera manager
- **SetFlexibleControlsTypeCommand**: This is another version than we had before. It is made for testing the architecture where the users are changing the state of the command from outside. Use the "1" or "2" key to change between Fly or Orbit mode.

### architecture/base/views

- **BaseView**: Represents a abstract base view class that provides common functionality for all types of views. This does not have any dependency to `three.js` and can be used in other types of views as well.

- **ThreeView**: Represents an abstract base class for a `Three.js` view in the application. It adds basically 2 things: Concept of bounding box and a pointer to the renderTarget (viewer). The bounding box is a lazy calculation. The reason for this object is that we sometimes can have a view without any `Object3D`, for instance if a view manipulates another view, for instance a texture on a surface.

- **GroupThreeView**: Represents an abstract base class for a `Three.js` view where it holds a pointer to a `THREE.Group` object. This object is the root of the `Object3D`'s that can be added to the view. The most important method is a`addChildren()` to be overridden. Here is where the children of the group should be added. The class will administrate the group and the children, and perform a lazy creation of these automatically. `GroupThreeView` implements the `CustomObject` which is injected into Reveal by `viewer.addCustomObject(this)` when the view is set to visible. It is removed from Reveal when view is hidden by `viewer.removeCustomObject(this)`. This magic should be hidden from the application developer. All concrete views I have made inherit from `GroupThreeView`.

### architecture/base/domainObjectHelpers

- **RenderStyle**: Is the base class for all render styles.

- **Changes**: All changes that can be applied on a domainObject. it uses symbols as the type, because it can easily be extended. It looks like an enum when unit it, since I have used a static class, and this is done by purpose.

- **DomainObjectChange** Here you can add several changes before you call domainObject.notify(....)

### architecture/base/utilities

Smaller files with utility classes and functions:

- **architecture/base/utilities/box:**

  Geometry algorithms and enums for box manipulation.

- **architecture/base/utilities/colors:**

  Color manipulation. Making various color maps and 1d textures from color maps. Used mostly by the terrain visualization.

- **architecture/base/utilities/extensions:**

  Some simple math and THREE.Vector2/3 extension

- **architecture/base/utilities/geometry:**

  Some useful geometry

- **architecture/base/utilities/sprites:**

  Easy Creation of sprite with text

# Some concrete examples

These are made to test the architecture but should when ready be used by any of Cognite's applications:

## architecture/concrete

### architecture/concrete/axes

- AxisDomainObject, AxisRenderStyle and AxisTreeView
- SetAxisVisibleCommand to set the axis visible

### architecture/concrete/boxDomainObject

- BoxDomainObject, BoxRenderStyle and BoxTreeView
- BotEditTool for manipulation

### architecture/concrete/terrainDomainObject

- TerrainDomainObject, TerrainRenderStyle and TerrainTreeView
- UpdateTerrainCommand and SetTerrainVisibleCommand for demo/example
- geometry: Folder with math and grid structures

```

```


<!-- SOURCE_END: reveal/react-components\src\architecture\base\README.md -->

================================================================================


<!-- SOURCE_START: reveal/react-components\src\architecture\concrete\course\README.md -->
## File: reveal/react-components\src\architecture\concrete\course\README.md

# Introduction

The architecture I will introduce has been developed since the 1990s and has evolved with me on different applications. It is a simple yet versatile architecture that can be used in systems with hundreds of developers and millions of lines of code. It scales well without the need to change the core code.

**Reasons for using this architecture:**

- Focuses on **what** to do rather than **how**
- Faster development
- Provides a good starting point
- Consistent patterns for similar features
- Reduces friction and frustrations within teams
- Facilitates faster onboarding of new team members

**Basic concepts you will be introduced to:**

- **Domain object:** Where the data resides. Domain objects are organized in a hierarchy.
- **Render style:** Defines how the data is visualized.
- **View:** The code responsible for rendering.
- **Command:** A user action that triggers a change.
- **Tool:** Special command with 3D viewer user actions.

**The code can be divided in 3 parts:**

- The architecture itself (should be stable after a while)
- The React part (should be stable after a while)
- **The business logic: This is the part you will develop.**

**Limitations:**

- It is limited when it comes to advanced React component. Everything that can not be generalized
  must be done as usual.
- The Reveal objects, like CAD, Point clouds etc. still live somewhere inside Reveal and cannot be used as domain objects yet.
- Reveal is not a multi viewer system. This architecture support multi viewer, but cannot use it.
- I have not implemented any save and load data from CDF. This will come later.
- I have dropped several more advanced features in the architecture (for instance factories).

Instead of sliders you will during the course (hopefully) be able to make functionality to create, manipulate and delete your own domain objects. I have build up the same object in the code myself and made it as good as possible. This is called `ExampleDomainObject` and should be used as a good and simple start point for similar and hopefully more advanced functionality. I will maintain and develop this further along with new concepts.

# The exercises

Now it is your turn.

## Creating a domain object

Decide a name of the domain object. You will create something that is simple and can be moved. In the rest a assume this is a point with some extension, but it can be anything that has a single color, can be scaled and move. Let the name end with `DomainObject`, then everybody will know what type it is.

In the folder `src/architecture/concrete` make a new folder, with the name of your domain object.

In the rest of the text I will call it a `PointDomainObject` and other objects accordingly,

The this folder create the class `PointDomainObject`, extend it from `VisualDomainObject` since it should be visible. Make a field called `center`. Use Three.js primitives. A point is called `Vector3`. This point will be in CDF coordinated with Z up (I have assumed that in this example, and in my own implementation).

You override these methods, so it has a icon and a type name.

```typescript
public override get icon(): IconName {
  return 'Circle';
}

public override get typeName(): string {
  return 'Point';
}
```

Use any icons you like on the https://zeroheight.com/37d494d9d/p/99acc1-system-icons. But you have to check with DefaultIcons is the icon is installed,
because Cogs changed the way icons was loaded into the app.You can also use `IconFactory.install()` to install any icon you will like without changing the DefaultIcons.

> **&#9432; Try it out:**
> Compile it. At this moment you should be finished with your first version of the `PointDomainObject`. We will add more functionality it later.

## Creating the style and the view.

In order to visualize it, you have to create 2 classes.

- `PointRenderStyle`, which is the parameters for visualization and should be extended from `CommonRenderStyle`.
- `PointView`, which is the view itself, and should be extended from `GroupThreeView`.

Put some fields into the `PointRenderStyle`: `radius`, `opacity`. You may add others later. Note that the radius is a part of the style rather than the data. This is because a specific radius is just one way of showing the point. The data is the point in (x, y, z) coordinates itself.

In the `PointView`, you can relay a lot of the the default implementation in `GroupThreeView`, but you have to create the visualization code yourself. This is done in the `addChildren` method. Here we add Three.js objects to the view. For those who are not familiar with Three.js, here is a suggested implementation:

```typescript
protected override addChildren(): void {
    const { domainObject, style, renderTarget } = this;

    const geometry = new SphereGeometry(style.radius, 32, 16);
    const material = new MeshPhongMaterial({
      color: domainObject.color,
      emissive: WHITE_COLOR,
      emissiveIntensity: domainObject.isSelected ? 0.4 : 0.0,
      shininess: 5,
      opacity: style.opacity,
      transparent: true,
      depthTest: style.depthTest
    });
    const sphere = new Mesh(geometry, material);
    const center = domainObject.center.clone();
    center.applyMatrix4(CDF_TO_VIEWER_TRANSFORMATION);
    sphere.position.copy(center);
    this.addChild(sphere);
}
```

You may also override `intersectIfCloser` and `calculateBoundingBox`, but the base class uses the objects created by `addChildren` for the default implementation. But `intersectIfCloser` should often be overridden due to sloppy intersection algorithms in `Three.js` or if you for instance has labels which is not part of the 3D object itself.

It is also nice to add a convenience property to the view for reuse:

```typescript
protected override get style(): PointRenderStyle {
  return super.style as PointRenderStyle;
}
```

Then you have to tell the `PointDomainObject` which view and render style it should use. The you go back the the domain object implementation and override two methods, `createRenderStyle` and `createThreeView`.

> **&#9432; Try it out:** At this moment you should be able to compile all 3 classes, `PointDomainObject`, `PointRenderStyle`and `PointView`.

## Create the tool

Here you implement the user interaction in the 3D viewer. Make a class called `PointTool` or something similar. The best is inherit from `NavigationTool`, which is the tool for all types of navigation. By doing this you will be able to navigate and manipulate the Point without going in and out of the `PointTool`.

The framework let you only have one tool active at the same time. The default tool is `NavigateTool`, which is the basic camera navigation. By clicking at your `PointTool`, this will be active and the `NavigateTool` will be deactivated. You can have as many tools as you like.

First you have to override 2 functions to get the tooltip and the icon on the button. Look in `BaseCommand` for `get icon` and `get tooltip`. `BaseCommand` is the base class of all the command and tools and let you override methods to be used by React. The tooltip should return a `TranslationInput`, which is ready for translation, but you do not need translation for this, so set 'untranslated' only.

Then you have to make some functionality. The simplest I can think about is to create your
`PointDomainObject` by clicking at something. Lets do that by overriding `onClick`.

Here is the implementation. First find the intersection point, if not, use the default implementation,
then get the center of your point in CDF coordinates and create your domain object. Add it to the root and set it visible.

```typescript
  public override async onClick(event: PointerEvent): Promise<void> {
    const intersection = await this.getIntersection(event);
    if (intersection === undefined) {
      await super.onClick(event);
      return;
    }
    const center = intersection.point.clone();
    const matrix = CDF_TO_VIEWER_TRANSFORMATION.clone().invert();
    center.applyMatrix4(matrix);

    const domainObject = new PointDomainObject();
    domainObject.center.copy(center);

    this.rootDomainObject.addChildInteractive(domainObject);
    domainObject.setVisibleInteractive(true, this.renderTarget);
  }
```

Note the method with suffix `Interactive`. These belong to a family of methods which is guarantee to update all necessary dependencies, including the user interface. They have according none interactive functions, which does, and are used to do things in batch and update in the end.

We have also methods ending up with suffix `Core`. These are protected virtual method called by the
framework and should never been used directly. These rules make it easier to understand the code.

Now, you could done this by Reveals `on('click',...)` functionality. In the following we will work more with the tool to make it like production quality.

> **&#9432; Try it out:** At this moment you should be able to compile all 4 classes, `PointDomainObject`, `PointRenderStyle`, `PointView` and `PointTool`.

## Run your application

The only thing you need now it to tell the framework about your new tool. Go to the file `StoryBookConfig`. This file tells the framework how your application should to be. In `createMainToolbar` add your tool.

> **&#9432; Try it out:** Compile and run. If everything works now, you will see your tool in the toolbar. Click on it to activate the tool. Click around in the viewer to create domain objects.

Reveal itself is aware your domain object. To check that Reveal understand your new domain object you can take a quick check.

> **&#9432; Try it out:** Make some points and deactivate your tool by unchecking it. Double click in one point. The camera should set the point in the middle of the screen and set the pivot point in the center (pivot point is center of rotation). Single click and the pivot point will be at the sphere of the point. This is according to the the camera behavior for the CAD model.

## Implement selection functionality

Instead of inherit from `NavigationTool` you should now inherit from `BaseEditTool`. This is also subclass of `NavigationTool`, but add some more functionality to the tool. To see how, do:

Override the method `canBeSelected()` to return true when it is a `PointDomainObject` by using `instanceof`.

Then, in your `onClick` method add this after the first if statement is done:

```typescript
{
  const domainObject = this.getIntersectedSelectableDomainObject(intersection);
  if (domainObject !== undefined) {
    this.deselectAll(domainObject);
    domainObject.setSelectedInteractive(true);
    return;
  }
}
```

Note the method `deselectAll`, it deselected everything except the domainObject. `setSelectedInteractive` doesn't do anything updating if it is selected from before.

There are now two things missing. You have to selected the domain object after it is created and before it is set visible. Also deselected the others.

The second thing you have to implement is in the view. You need to override the method `update`, so it listen to selected change. When this change appears, the children of the view is removed, the bounding box and the render target is invalidated. The last one request a redraw in Reveal.

```typescript
  public override update(change: DomainObjectChange): void {
    super.update(change);
    if (change.isChanged(Changes.selected)) {
      this.clearMemory();
      this.invalidateRenderTarget();
    }
  }
```

When we already do this, also add `Changes.renderStyle`, `Changes.color` and `Changes.geometry` since we need this changes later. The method `isChanged` takes multiple arguments.

Note that we clear the memory when it change. This is a convenient method to remove all redundant data. The next time some of the data is needed, it will be generated automatically (lazy creation). The method `addChildren` will automatically be run when needed.

For large objects, where `addChildren` takes more time, you cannot do this. For instance, when the color change, you only need to update the material. If the geometry change, you need to update the geometry only. If the geometry is large, you can specify which part of geometry you need to update. This is not implemented yet, since we haven't seen any use cases for this, but is a part of this architecture.

> **&#9432; Try it out:** Check that the selection is working when clicking at the your objects. Also check that the object is selected when it is created.

## Implement context dependent cursor

Professional applications uses a context dependent cursor. To do this override `onHover`. This will have 3 states, one for picking on a `PointDomainObject`, one for picking on any other object, and one for nothing.

```typescript
  public override async onHover(event: PointerEvent): Promise<void> {
    const intersection = await this.getIntersection(event);
    // Just set the cursor
    if (this.getIntersectedSelectableDomainObject(intersection) !== undefined) {
      this.renderTarget.setDefaultCursor();
    } else if (intersection !== undefined) {
      this.renderTarget.setCrosshairCursor();
    } else {
      this.renderTarget.setNavigateCursor();
    }
  }
```

> **&#9432; Try it out:** Test that the cursor change when hovering.

## Implement delete functionality

To do this you override `onDeleteKey()`. Here is the skeleton of the method show. Fill in the rest by get the selected and remove it.

```typescript
  public override onDeleteKey(): void {
    const domainObject = this.getSelected();
    // Fill inn the rest
  }
```

> **&#9432; Try it out:** Test that you can delete the points.

## Implement user information for the selected object

This is a attempt to generalizing the card/panel concept. A panel shows some information about the selected object. It is limited, but is a good beginning, but misses some work when it comes to translation and strings. More features will be added later. First you have to tell the framework that this domain object can generate a card (or panel). Do this by:

```typescript
  public override get hasPanelInfo(): boolean {
    return true;
  }
```

The next method generate the info for the panel. Note that the key is the translation key and there should be a translation for that key. But in the exercise we don't care, and can be anything.

```typescript
public override getPanelInfo(): PanelInfo | undefined {
    const info = new PanelInfo();
    info.setHeader('NAME', this.name);
    add({ key: 'X_COORDINATE' }, this.center.x, Quantity.Length);
    // Fill in rest here like Y, Z and length to origin for instance
    return info;

    function add(translationInput: TranslationInput, value: number, quantity: Quantity): void {
      info.add({ translationInput, fallback, value, quantity });
    }
  }
```

Override this method to place the panel where you like

```typescript
  public override getPanelInfoStyle(): PopupStyle {
    return new PopupStyle({ bottom: 0, left: 0 }); // Here: Left-bottom corner
  }
```

> **&#9432; Try it out:** Compile and run. Check that the panel is visualized automatically. Try the button in the panel.

> **&#9432; Try it out:** Also, click at the `m/ft` button on the main toolbar and notice the change.

## Example of the power of virtual methods in this framework

Now you should override one method in your domain object: `canBeRemoved`. This returns true in the default implementation. In the your override is should return false.

> **&#9432; Try it out:** Use the Delete key and check the panel. You shouldn't have any possibility to delete the point. The delete button in the panel should be invisible.

## Dragging

In order to be able to move the point around, you have to implement a dragger. This tells the framework how it should move with the mouse. You should make an object called `PointDragger` which should extend `BaseDragger`. The constructor give you some information when the dragger is starting. The method on `onPointerDrag` should do the dragging itself.

In this example we need:

- The domain object we like to drag
- A copy of the center at drag start
- The plane perpendicular on the mouse direction through the center at drag start
- And a offset to correction for hitting the sphere other places than in the center

When we drag, we simple intersection the plane with the new ray and move the center to this intersection. To be accurate we take the offset correction into account.

I give the code here, since it will take some time to figure this out. You can experiment for instance to constrain it to the horizontal plane only. Note that the input to the dragger in in CDF coordinates, not in viewer coordinates.

```typescript
export class PointDragger extends BaseDragger {
  // ==================================================
  // INSTANCE FIELDS
  // ==================================================

  private readonly _domainObject: ExampleDomainObject;
  private readonly _center: Vector3;
  private readonly _plane: Plane;
  private readonly _offset: Vector3; // Correction for picking the sphere other places than in the center

  // ==================================================
  // CONSTRUCTOR
  // ==================================================

  public constructor(props: CreateDraggerProps, domainObject: ExampleDomainObject) {
    super(props, domainObject);
    this._domainObject = domainObject;
    this._center = this._domainObject.center.clone();
    this._plane = new Plane().setFromNormalAndCoplanarPoint(this.ray.direction, this._center);

    // This is the correction for picking at the sphere other places than in the center
    const planeIntersection = this.ray.intersectPlane(this._plane, new Vector3());
    if (planeIntersection === null) {
      throw new Error('Failed to intersect plane');
    }
    this._offset = planeIntersection.sub(this._center);
  }

  // ==================================================
  // OVERRIDES
  // ==================================================

  public override get domainObject(): VisualDomainObject {
    return this._domainObject;
  }

  public override onPointerDrag(_event: PointerEvent, ray: Ray): boolean {
    const planeIntersection = ray.intersectPlane(this._plane, new Vector3());
    if (planeIntersection === null) {
      return false;
    }
    planeIntersection.sub(this._offset);
    if (planeIntersection.equals(this._center)) {
      return false; // No change
    }
    if (this.transaction === undefined) {
      this.transaction = this._domainObject.createTransaction(Changes.geometry);
    }
    this._domainObject.center.copy(planeIntersection);
    this.domainObject.notify(Changes.dragging);

    return true;
  }
}
```

You have to tell the `PointDomainObject` to use this dragger. Then override `createDragger` from `VisualDomainObject`. The framework (here the `BaseEditTool`) will automatically create the dragger for you when the mouse start dragging.

> **&#9432; Try it out:** Compile this code. Are you able to move the points?

When this is done, only one thing is missing. You have to indicate in `onHoverByDebounce` the the point can be moved. Change from `setDefaultCursor` or `setMoveCursor`. You must also `setMoveCursor` in the end of `onClick` since `onHover` is not called before you release and move the mouse.

> **&#9432; Try it out:** Do you see the move cursor?

## Playing with the color and the render style

If the mouse is below the selected domain object, you can try to use the mouse wheel to do some changes.
First you have to add this convenience property to the `PointDomainObject`:

```typescript
  public get renderStyle(): PointRenderStyle {
    return super.getRenderStyle() as PointRenderStyle;
  }
```

Then you must override the onWheel. Here is the implementation:

```typescript
  public override async onWheel(event: WheelEvent, delta: number): Promise<void> {
    const intersection = await this.getIntersection(event);
    const domainObject = this.getIntersectedSelectableDomainObject(intersection) as PointDomainObject;
    if (domainObject === undefined || !domainObject.isSelected) {
      await super.onWheel(event, number);
      return;
    }
    // Change radius
      this.addTransaction(domainObject.createTransaction(Changes.renderStyle));

      const factor = 1 - Math.sign(delta) * 0.1;
      domainObject.renderStyle.radius *= factor;
      domainObject.notify(new DomainObjectChange(Changes.renderStyle, 'radius'));
  }
```

And you can even to some more playing by using this code:

```typescript
// Change color
this.addTransaction(domainObject.createTransaction(Changes.color));

let hsl: HSL = { h: 0, s: 0, l: 0 };
hsl = domainObject.color.getHSL(hsl);
hsl.h = (hsl.h + Math.sign(delta) * 0.02) % 1;
domainObject.color.setHSL(hsl.h, hsl.s, hsl.l);
domainObject.notify(Changes.color);
```

```typescript
// Change opacity
this.addTransaction(domainObject.createTransaction(Changes.renderStyle));

const opacity = domainObject.renderStyle.opacity + Math.sign(delta) * 0.05;
domainObject.renderStyle.opacity = clamp(opacity, 0.2, 1);
domainObject.notify(new DomainObjectChange(Changes.renderStyle, 'opacity'));
```

You can bind the the different changes to shift and control key to make it flexible:

```typescript
if (event.shiftKey) {
  //..... paste code here
} else if (event.ctrlKey || event.metaKey) {
  // .... paste code here
} else {
  // .... paste code here
}
```

> **&#9432; Try it out:** Compile your code. Try using the scroll button to change radius, color and opacity. What happens when the mouse is not over any of the points?

## Creating commands

Commands is typically are user interactions outside the viewer. When working on commands, it is often need for traversing the rootDomainObject. In the `DomainObject` you will find some families of convenience methods for this. These are:

- `getChild*(...)` Methods for getting a specific child
- `get[ThisAnd]Descendants*(...)` Methods for iterating on a specific descendants
- `getDescendantBy*(...)` Methods for getting a specific descendant
- `get[ThisAnd]Ancestors*(...)` Methods for iterating on a specific ancestors
- `get[ThisAnd]AncestorBy*(...)` Methods for getting a specific ancestor

By using these function, you can get access to all domain objects you need.

First you should implement a command that reset the render style for all your points.
Here is the code you can start with:

```typescript
export class ResetAllPointsCommand extends RenderTargetCommand {
  // ==================================================
  // OVERRIDES
  // ==================================================

  public override get tooltip(): TranslateKey {
    return { key: 'POINTS_RESET', fallback: 'Reset the visual style in all points' };
  }

  public override get icon(): IconName {
    return 'ClearAllIcon';
  }

  protected override invokeCore(): boolean {
    for (const domainObject of this.rootDomainObject.getDescendantsByType(PointDomainObject)) {
      domainObject.setRenderStyle(undefined);
      domainObject.notify(Changes.renderStyle);
    }
    return true; // Indicate success
  }
```

Please implement `get isEnabled()` so the button is not enable if you don't have any `PointDomainObjects` in the system.

Make a similar `DeleteAllPointsCommand`. When deleting object by a collection, it is often good to convert it to array first, so the iterator works properly.
I have done it in this way (maybe it can be done simpler?)

```typescript
  const array = Array.from(.....)
  array.reverse();
    for (const domainObject of array)
      // Remove the domainObject here
```

Also, this button must be of type `'ghost-destructive'` so you have to override `get buttonType()`. Use the `'Delete'` icon.

In order to show your commands in the user interface, you have to override the `getToolbar()` method in `PointTool`.

```typescript
public override getToolbar(): Array<BaseCommand | undefined> {
  return [
    new ResetAllPointsCommand(),
    new DeleteAllPointsCommand(),
  ];
}
```

> **&#9432; Try it out:** Activate your tool and notice the toolbar after you have created some domain objects. Test them.

In the architecture there are base class for command operating on a set of similar `DomainObjects`.
This is called `InstanceCommand` and can be used to implement both `ResetAllPointsCommand` and `DeleteAllPointsCommand` to avoid repetitive code. When using this you have to
override:

```typescript
  protected override isInstance(domainObject: DomainObject): boolean {
    return domainObject instanceof PointDomainObject;
  }
```

You can the use `this.getInstances()` and `this.getFirstInstance()` to filter out domainObject for the operation.

Now you are now ready to make a `ShowAllPointCommand` . Inherit from `InstanceCommand`. This should hide all point if they are shown and show them if the are hidden. To determine if they are visible or hidden, you can for instance do this:

```typescript
  private isAnyVisible(): boolean {
    for (const descendant of this.getInstances()) {
      if (descendant.isVisible(this.renderTarget)) {
        return true;
      }
    }
    return false;
  }
```

This should also implement the `get isChecked` method. This can be done simpler, see section **Using a folder** below.

Add it to the list in `getToolbar()` and test it.

> **&#9432; Try it out:** Create some points and toggle the visible button.

## The final touch - manipulate the DepthTest

Here you should try another feature that is in the architecture. Override the method `useDepthTest` in the `PointView`.
Let it return true only if `depthTest` in the style is true. The default implementation returns true.

We should now investigate how the mouse picking responds on this. Keep in mind that the general intersection is implemented in Reveal, not in this framework!

You can reuse a class, `ShowDomainObjectsOnTopCommand` (open the source code for this), to toggle the `depthTest` on all `PointDomainObject`s.
In order get the current value of the `depthTest`, it simply take the first visible it can find. This is done in the `getDepthTest()`.
Create a file and copy this code.

```typescript
export class ShowExamplesOnTopCommand extends ShowDomainObjectsOnTopCommand {
  // ==================================================
  // OVERRIDES
  // ==================================================

  public override get tooltip(): TranslationInput {
    return { untranslated: 'Show all examples on top' };
  }

  protected override isInstance(domainObject: DomainObject): boolean {
    return domainObject instanceof ExampleDomainObject;
  }
```

Finally add `ShowPointsOnTopCommand` to the list in `getToolbar()` in the `PointTool`.

> **&#9432; Try it out:** Create some point. Rotate the model so some points are hidden. Then check this command. Notice that the points are floating over the model. Click and double click to check the response. Uncheck it and do the same.

## Clean code?

Lets check if your code is clean when it comes to dependencies. Ask yourself:

1. How many references do I have to the `PointDragger`.
2. How many references do I have to the `PointView`.
3. How many references do I have from files in the directory I work in to the rest of the system. Please count them.

> &#9432; If you have done all exercises until now you are finished. You are now able to use this architecture and hopefully get some good ideas to use similar architecture elsewhere.

# More advanced exercises

## Using a folder

Now all the `PointDomainObject` are located just below the root. You can make a domain object called `PointFolder`, it can be named `PointFolderDomainObject`, but as a convention, folders is a sort of domain that contains others.

`PointFolder` will inherit directly from `DomainObject` since it don't have a view.

You can then move the `createRenderStyle` to the `PointFolder`, and override `renderStyleRoot` in `PointDomainObject` to get so it return its parent, and finally override `isRenderStyleRoot` in the `PointFolder`. Then you will have only one `RenderStyle` for all `PointDomainObject`.

You must also change the:

```typescript
this.rootDomainObject.addChildInteractive(domainObject);
```

to:

```typescript
let folder = this.rootDomainObject.getDescendantByType(PointFolder);
if (folder === undefined) {
  // Create the folder if it doesn't exist
  folder = new PointFolder();
  this.rootDomainObject.addChildInteractive(folder);
}
folder.addChildInteractive(domainObject);
```

The rest of the code should work without any change.

Now you can use `PointFolder.setVisibleInteractive`, to toggle visibility at all `PointDomainObject`s. To get the visible state for all the domain object in the folder, you can use the method `getVisibleState()`. This function works recursively and will normally return one of `All`, `Some`, `None` or `Disabled`.

## One domain object for all the points

This is more challenging, but should be done if number of points typically is large.

- You must implement your selection mechanism yourself in the domain object by for instance keep the index of the selected point or a list if multi selection is allowed.
- You have to do changes in the tool.
- The view should show all points, in addition the selected point different then the other.
- In the view the `intersectIfCloser` should be override so the index of your point should
  be return with the `CustomObjectIntersection`. You can use the field `userData` to have the index
  of the closest intersected point.
- None of this is particularly hard in this architecture.
- This is done in `AnnotationsDomainObject` (3D annotations)

## Focus on hover

Focus is when you mark the object behind the mouse when hover. You can easily create a focus mechanism. See how this is done the the `MeasureLineDomainObject` (simple) or `MeasureBoxDomainObject` (more advance hover where hover is dependent on where on the box the mouse hover on).

## Multi selection

Normally in other application you can expand or turn off selection with the control key. This should also work well in this framework. You will need to do some minor adjustments in the `PointTool` code, for instance check the `event.ctrlKey` in the `onClick` method.
The panel is implemented so it shows the last selected regardless of how many object you have selected.

You must also use the `BaseEditTool.getAllSelected` instead of the `BaseEditTool.getSelected`.


<!-- SOURCE_END: reveal/react-components\src\architecture\concrete\course\README.md -->

================================================================================


<!-- SOURCE_START: reveal/react-components\src\tree-view\README.md -->
## File: reveal/react-components\src\tree-view\README.md

## How to use the `AdvancedTreeView`:

### Overview

This tree contains the following features to be used:

- Label (Required)
- Bold label
- Icon
- Color on icon
- Checkbox with 3 different states
- Disable/enable the checkbox
- Selection
- Lazy loading av nodes
- isVisibleInTree

### Using the `TreeNodeType`.

The type of the tree node is called [`TreeNodeType`](./model/tree-node-type.ts).
This is the minimum of what you will need as a tree node.

You can either implement your own version of `TreeNodeType` and make all necessary methods or
use the default implementation `TreeNode` directly.

### Using the `TreeNode` class:

An implementation of `TreeNodeType` is [`TreeNode`](./model/tree-node.ts) and contains more,
like navigation in the tree, colors, icons etc.
You can build up the tree view by using the `TreeNode`,
by recursive adding children node to parent nodes.

### Using the `AdvancedTreeView` component:

There is 3 optional functions that can be set on the [`AdvancedTreeViewProps`](./view/advanced-tree-view-props.ts).

- `onSelectNode` is called when a node is selected
- `onToggleNode` is called when a checkbox is toggled
- `onClickInfo` is called when the info is clicked, if undefined, no info icon will appear.

There are some default implementations that can be used in the
file [`tree-node-functions.ts`](./model/tree-node-functions.ts).
Here different strategies for selection and checkboxes are implemented.

There are also some other property for appearance of the tree in the properties.

### Examples of how the `AdvancedTreeView` component can be used:

(There are several other examples in Storybook)

```typescript
function createTree(): TreeNode {
  const root = new TreeNode();
  root.label = 'Root';
  root.isExpanded = true;

  for (let i = 1; i <= 100; i++) {
    const parent = new TreeNode();
    parent.label = 'Parent ' + i;
    parent.isExpanded = true;
    root.addChild(parent);

    for (let j = 1; j <= 10; j++) {
      const child = new TreeNode();
      child.label = 'Child ' + i + '.' + j;
      parent.addChild(child);
    }
  }
  return root;
}

const root = createTree();

<AdvancedTreeView
  root={root}
  onSelectNode={onSingleSelectNode} // When select a node
  onCheckNode={onSimpleToggleNode} // When toggle the checkbox
  hasCheckboxes
  hasIcons
/>;
```

### Lazy loading

Lazy loading is optional. It will be applied when the `loader` property in the `AdvancedTreeViewProps` is set.
This property is a refer to the interface [`ILazyLoader`](./model/i-lazy-loader.ts). Look in the file for
description of the methods.

There is two methods that need to be implemented:

- `root` get the root of the tree
- `loadChildren` load the children of a parent
- `loadSiblings` load the siblings, typically when having a large number of children,
  so loadChildren doesn't load all.

When using the `loader` property in the `AdvancedTreeViewProps` is set, the `root` property is not used.
Instead the root is taken from `loader` itself. This is done in order to not double buffer the root in 2
different places, since the root is needed in the loader. If the `root` is not set in the loader it will
call the method `loadInitialRoot` if it is implemented.

When nodes are lazy loaded into the tree, the function `onNodeLoaded` will optionally be called. This method is
made in order to synchronize the checkboxes if needed. If for instance the parent checkbox is toggled on, it is
natural that the children checkbox should be toggled. The implementation below shows this:

```typescript
onNodeLoaded(child: TreeNodeType, parent?: TreeNodeType): void {
  if (parent === undefined) {
    return; // No parent when root
  }
  if (parent.checkboxState === undefined) {
    return; // No parent checkboxState exist
  }
  child.checkboxState = parent.checkboxState;
  if (child.checkboxState == CheckboxState.All) {
    // Set the node visible in the viewer
  }
 }
```


<!-- SOURCE_END: reveal/react-components\src\tree-view\README.md -->

================================================================================


<!-- SOURCE_START: reveal/README.md -->
## File: reveal/README.md

<a href="https://cognite.com/">
<picture>
  <source media="(prefers-color-scheme: dark)" srcset="./cognite_logo_dark.png">
  <img src="./cognite_logo.png" alt="Cognite logo" title="Cognite" align="right" height="80" />
</picture>
</a>

# Reveal 3D viewer and libraries

[![Build Status](https://github.com/cognitedata/reveal/actions/workflows/ci.yml/badge.svg
)](https://github.com/cognitedata/reveal/actions/workflows/ci.yml)

Documentation with interactive examples for the latest version is available at [https://cognitedata.github.io/reveal/docs/](https://cognitedata.github.io/reveal/docs/)

---

Reveal viewer is a highly performant 3d-viewer for the Web written in a combination of TypeScript and Rust.

This repository contains the source code for the new version of the Cognite Reveal 3D viewer,
including its file loading libraries.

All information below is for developers.

## Getting started

Install [Node](https://nodejs.org/en/download/) and [Rust](https://doc.rust-lang.org/cargo/getting-started/installation.html).

To test the viewer, you need to build the viewer and then start the examples.

```
cd viewer
yarn && yarn run build
cd ../examples
yarn && yarn run start
```

If you now navigate to [localhost:3549](https://localhost:3549), the browser should show a simple 3D model with a UI.

To show a model from your own CDF project, you must first configure Reveal to use your CDF credentials. Follows the steps in the section [Credentials Environment](#Credentials-Environment).

change the URL to `https://localhost:3549/?project=<project>&env=<environment>&modelId=<modelId>&revisionId=<revisionId>`.

Here, `<project>` is the name of the CDF project you want to connect to, `<environment>` is the name of the environment specified in the `.env` file (e.g. `example_environment`), and `<modelId>` and `<revisionId>` are the ids of the model you want to visualize. You can find these IDs in Cognite Fusion, in the "Upload 3D models" / "Manage 3D" subapp.

### Troubleshooting

Occasionally, and always the first time you login to an environment, you may get a 401 error in the browser, which, after clicking through, resets the browser window to the model with colorful shapes. In this case, there should be a `#code=...`-segment appended to the URL in the browser. Copy the URL you tried to visit (including the project, environment and IDs), and paste it to the left of the `#`-sign in the URL, replacing everything that was there before. In other words, your URL should now look like

```
https://localhost:3549/?project=<project>&env=<environment>&modelId=<modelId>&revisionId=<revisionId>#code=<access token>
```

Press enter to reload.

This may or may not work on the first try, seemingly depending on the access token expiration or other factors. If it fails at first, you may try this step multiple times, it will usually work by the 5th attempt.

### Building on Macbook M1

Building Reveal on Macbook M1 might require some special care.

If you experience issues during the `yarn`-stage in `viewer/`, e.g.
```
   no template named 'remove_cv_t' in namespace 'std'
```
try forcing GCC to build for C++14:

`env CXXFLAGS=-std=c++14 yarn`

There also could be an issue with puppeteer in `examples/` that is caused by it not finding a correct version of chromium for arm64. To solve it you should follow additional steps:

1. Install chromium from Homebrew:
```
brew install chromium
`which chromium`
```

2. Inside `examples/` add two environment variables to your `~/.zshrc` config file:
```
export PUPPETEER_SKIP_CHROMIUM_DOWNLOAD=true
export PUPPETEER_EXECUTABLE_PATH=`which chromium`
```
or create `.env` file within the same folder and paste them there, then use source:
```
source .env
```
3. Run `yarn` again and be happy!

## Credentials Environment

The examples are configured to run using any environment variables specified in the file `examples/.env`, which you create yourself.  The file `examples/.env.example` shows the expected JSON format of the value contained in this variable. You must fill in the appropriate values for your environment in this file; The tenant ID, client ID and the cluster of the CDF project you want to use.

Ask your Cognite contact for the tenant ID and client ID if you don't have these available.

The cluster value is the name of the subdomain in which the project resides. To find its value for your project, log in to your project in Cognite Fusion and observe that the URL ends with a string akin to `cluster=<cluster>.cognitedata.com`. Here, `<cluster>` is the name you should put in the `.env` file.

When starting an example, you can add e.g. `env=example_environment` to use the authentication credential stored in the `example_environment` environment specified in `.env`.

## Hosting models locally

If you have locally converted 3D models, these can be viewed locally using the "Simple" example by
placing the converted model folder under `examples/public/`, by providing a `modelUrl`-parameter, e.g.
`https://localhost:8080/Simple?modelUrl=/primitives`.

## Use local build with a project that uses reveal

1. Run viewer build

```bash
cd viewer
yarn run build
```

2. Use the build from `viewer/dist`.
You can simply use it as a link dependency in the project that uses reveal if
the target project uses yarn as its package manager.

  * Replace reveal version with the link on `viewer/dist` in the project `package.json`
```json
{
  "dependencies": {
    "@cognite/reveal": "link:<absolute or relative path to viewer/dist"
  }
}
```
  * After that, run `yarn` in the target project.
  * Don't forget you must not commit that change to the target project.

If you don't want to change package.json, you can use CLI utility [npm link](https://docs.npmjs.com/cli/link)
or [yarn link](https://classic.yarnpkg.com/en/docs/cli/link/). To do that:

1. Create a link

```bash
cd viewer/dist
npm link
```

2. Use the link in your target project

```bash
cd your-project-path
npm link @cognite/reveal
```

Now reveal should be replaced with the local build.

When you don't need it linked in the target project anymore, run:

```bash
npm unlink @cognite/reveal
```

To unregister the link from your local environment:

```bash
cd viewer/dist
npm unlink
```

## Releasing Reveal

See [RELEASING.md](RELEASING.md) for details on how to releasing NPM packages and update
documentation on release.


<!-- SOURCE_END: reveal/README.md -->

================================================================================


<!-- SOURCE_START: reveal/RELEASING.md -->
## File: reveal/RELEASING.md

Releasing Reveal involves releasing NPM packages `@cognite/reveal` and/or updating documentation. The documentation is automatically
deployed when pushed to master.

# Publishing packages

### Update the package version

First, Reveal's package version must be incremented. This is done by changing the "version" field at the top of `viewer/package.json`. We use [semantic versioning](https://semver.org/#summary). Increment patch version if the changes are purely internal or only affects experimental features (so e.g. 4.14.1 becomes 4.14.2), or increment minor version if there are new features added (new types, functions, classes, new fields in already-existing types).

Submit a PR with the version number update. Make sure it has been merged before continuing with the next steps.

### Create a release on GitHub

1. Go to [https://github.com/cognitedata/reveal/releases/new](https://github.com/cognitedata/reveal/releases/new)
2. Under the "Tag version" field, add a new tag for this release with the name and version of the package, e.g. `@cognite/reveal@3.2.0`
3. Specify the same release title as the tag name.
4. Write the changes that new version brings. Use the commit history. You can check what's committed from the previous tag (in this case, 3.1.9) with this command:
   ```bash
   git log --pretty=format:"* %s" @cognite/reveal@3.1.9...HEAD
   ```

Note!
   Remember to specify the correct ThreeJS version required by the released version - you can find this in package.json
   of the viewer.

    Use the following template:
```
This version of Reveal is compatible with ThreeJS <THREEJS_VERSION>.

###  Features

* commit message

###  Bug fixes and enhancements

* commit message

###  Experimental changes

* feat(experimental): commit message
* fix(experimental): commit message

###  Documentation

* commit message

See [installation documentation](https://cognitedata.github.io/reveal-docs/docs/installation) for details about installing Reveal.
```
5. Hit the green "Publish release" button


### Publish the NPM package

Then, to publish the NPM package, go to Actions at the top of the Github-page, then find "Publish Package to NPM" to the right. Click "Run workflow", and the package should be underway.

### Updating latest documentation
To update the documentation with any changes that might have been added since the last release:

Assuming you are at the root of the project navigate do the documentation folder and run the update script

```bash

cd documentation

# replaces the 'latest' documentation by the 'next'
yarn replace-latest-by-next
```

1. Commit these changes

2. Create a PR with the changes.

Once the PR is merged into master, the documentation will be automatically deployed.


<!-- SOURCE_END: reveal/RELEASING.md -->

================================================================================


<!-- SOURCE_START: reveal/viewer\packages\camera-manager\README.md -->
## File: reveal/viewer\packages\camera-manager\README.md

# three-combo-controls

> Orbit &amp; first person camera controller for [three.js](https://threejs.org/)

---

## Development
```
$ yarn run start
```

## Usage
```js

import { ComboControls } from '@cognite/three-combo-controls';
import * as THREE from 'three';

const controls = new ComboControls(camera, domElement);
const clock = new THREE.Clock();

function animate() {
  controls.update(clock.getDelta());
  // ...
}
```

Mouse actions:
  - Left click & drag to rotate
  - Right click & drag to pan
  - Wheel to zoom

Touch actions:
  - One finger to rotate
  - Two fingers to pan & zoom (pinch)

Keyboard actions:
  - w & s to zoom
  - a, d, q & e to pan
  - Arrows to rotate (first person)
  
For tests:
  - c, b for only target change 
  - f to reset target position

## Usage (advance)

```js
controls.dispose();

controls.addEventListener('cameraChange', (event) => {
  const { position, target } = event.camera;
  // position & target in world space and instanceof THREE.Vector3
});

// options with default values
controls.enabled = true; // enable / disable all interactions
controls.enableDamping = true; // enable / disable smooth transitions
controls.dampingFactor = 0.2; // smooth transition factor (<= 1). Move (targetState - currentState) * dampingFactor for each `controls.update` call
controls.dynamicTarget = false; // possible to zoom past the target (will move the target if you are closer than minZoomDistance to the target)
controls.dollyFactor = 0.98; // zoom factor (when zooming one step the distance to the target will be distance = oldDistance * dollyFactor)

controls.minDistance = 1; // parameter determining speed of camera movement when zooming
controls.minZoomDistance = 1; // minimum distance to the target when zooming (see also dynamicTarget)

controls.minPolarAngle = 0; // minium polar angle around the target (radians)
controls.maxPolarAngle = Math.PI; // maximum polar angle around the target (radians)
controls.minAzimuthAngle = -Infinity; // minimum azimuth angle around the target (radians)
controls.maxAzimuthAngle = Infinity; // maximum azimuth angle around the target (radians)

controls.enableKeyboardNavigation = true; // enable / disable keyboard navigation
controls.keyboardDollySpeed = 2; // using keyboard ('W' & 'S') will zoom equal to keyboardDollySpeed mouse wheel events
controls.keyboardPanSpeed = 10; // using keyboard ('A' & 'D') to pan will be equal to keyboardPanSpeed pixels mouse pan
controls.keyboardSpeedFactor = 3; // speed factor for keyboard navigation (pan & zoom) when 'shift' key is pressed
controls.firstPersonRotationFactor = 0.4; // rotation speed in first person mode

controls.pinchPanSpeed = 1; // pinch (touch) pan speed
controls.pinchEpsilon = 2; // minimum pixels change for pinch (touch & pan) to trigger pinch action 
controls.pointerRotationSpeedPolar = Math.PI / 360; // rotation speed for touch in radians per pixel
controls.pointerRotationSpeedAzimuth = Math.PI / 360; // rotation speed for touch in radians per pixel

controls.keyboardRotationSpeedAzimuth = 10 * Math.PI / 360; // rotation speed for keyboard first person mode (arrow-keys).
controls.keyboardRotationSpeedPolar = 10 * Math.PI / 360; // rotation speed for keyboard first person mode (arrow-keys).

controls.minZoom = 0; // minimum zoom distance, only available when camera is orthographic
controls.maxZoom = Infinity; // maximum zoom distance, only available when camera is orthographic
controls.orthographicCameraDollyFactor = 0.3; // dolly factor of orthographic camera
controls.lookAtViewTarget = false; // toggles use of view target for camera 'lookAt' method. Used for zooming and playing animations at the same time.
controls.useScrollTarget = false; // enables usage of new controls mechanics that relies on scrollTarget that is set when user initiate wheel scroll.
```



<!-- SOURCE_END: reveal/viewer\packages\camera-manager\README.md -->

================================================================================


<!-- SOURCE_START: reveal/viewer\packages\data-providers\README.md -->
## File: reveal/viewer\packages\data-providers\README.md

# Data Providers

This package encapsulates the API for retrieving model metadata files and geometry files from Cognite CDF to enable emulation of the API (e.g. for locally hosted models).

## Point Cloud Objects

Point cloud objects can be stored as annotations in CDF. We currently support two shapes which can be union-ed into larger volumes to represent objects: Cylinders and boxes.

**Cylinders** are represented by
- Two points representing the center point of the flat surface at each end of the cylinder (`center_a`, `center_b`)
- A number `radius`, containing the radius

**Boxes** are represented by 16-number arrays. It is the elements of the instance transformation matrix of that box in row-major order. The base (identity) box is the axis-aligned box spanned between (-1, -1, -1), (1, 1, 1).

These shapes are stored in the CDF coordinate system when coming from CDF.
Note that the radius of the cylinder and the size of the box is increased slightly when checking for contained points, for the purpose of actually enclosing all points belonging to the object.


<!-- SOURCE_END: reveal/viewer\packages\data-providers\README.md -->

================================================================================


<!-- SOURCE_START: reveal/viewer\packages\data-source\README.md -->
## File: reveal/viewer\packages\data-source\README.md

This package encapsulates how Reveal fetches geometry and CAD model node metadata.

Note that certain features rely on direct connection to CDF and cannot be implemented by providing a custom DataSource.


<!-- SOURCE_END: reveal/viewer\packages\data-source\README.md -->

================================================================================


<!-- SOURCE_START: reveal/viewer\packages\logger\README.md -->
## File: reveal/viewer\packages\logger\README.md

Logging library based on [loglevel](https://www.npmjs.com/package/loglevel).

<!-- SOURCE_END: reveal/viewer\packages\logger\README.md -->

================================================================================


<!-- SOURCE_START: reveal/viewer\packages\nodes-api\README.md -->
## File: reveal/viewer\packages\nodes-api\README.md

This package encapsulates the Nodes API from Cognite CDF to enable emulation of the API (e.g. for locally hosted models).


<!-- SOURCE_END: reveal/viewer\packages\nodes-api\README.md -->

================================================================================


<!-- SOURCE_START: reveal/viewer\packages\pointclouds\README.md -->
## File: reveal/viewer\packages\pointclouds\README.md

# Point Cloud Package

## Purpose

Handles virtually all things point clouds for Reveal - everything related to adding, loading and rendering.

## Structure

The `src/potree-three-loader` folder contains modified source code from the `pnext/three-loader` Github repository, which is a point cloud loading and rendering library adapted from Potree. The source code has since been modified to better suit our needs.

The `styling` folder contains code related to styling point cloud objects, including classes for object definitions themselves, i.e. `shapes`.

## Glossary

### Loading

- **EPT**: **E**ntwined **P**oint **T**ile, the file format we use to store and load point cloud data from the cloud.
- **Geometry Node**: A node that supports the `load` operation, but which does not necessarily have the data loaded yet. If loaded, the data is only on the CPU side.
- **Tree Node**: A somewhat vague term, but in the context of loading, mostly used to refer to an octree node with its geometry loaded to the GPU and being part of the render loop.

### Styling

- **Shape**: A primitive 3D shape, e.g. an oriented box or a cylinder. See the README in the `data-providers` package for information about concrete conventions regarding these shapes.
- **Stylable Object**: A point cloud object that can be styled. Represented by one or more **shapes** in 3D space. Assigning a style to a stylable object results in all points contained in any of the object's shapes attaining that style. Stylable objects are obtained from an instance of `PointCloudStylableObjectProvider` interface defined in the `data-providers` class.
- **Annotation**: The CDF resource type used for storing descriptions of stylable point cloud objects. One annotation corresponds to one object, and may consist of many primitive **shapes**. The `CdfPointCloudStylableObjectProvider` class in the `data-providers` package provides stylable objects from the CDF Annotations API.
- **Annotation ID**: ID uniquely referring to one annotation in CDF.
- **Object ID**: Reveal-internal ID referring to a stylable point cloud object. Created as a running number starting from 1. Used for looking up appearance in a texture.

### Misc

- **Classification**: Each point can have a "classification ID", provided in the input source file. It can be visualized directly by changing the `PointColorType` to `PointColorType.Classification`, each class will then be given its own predetermined color. Colors and names for the classes can be provided through by implementing the `IPointClassificationsProvider` interface provided to the `PointCloudFactory` instance.

## Inner Workings

### Loading

A point cloud model is structured in an [octree](https://en.wikipedia.org/wiki/Octree). Each node in the octree contains points from the spatial area covered by that node. There is a one-to-one correspondence between nodes in the octree and `.bin` files containing the points, which Reveal may load.

The topmost node in the octree contains points sparsely sampled from the entire scene. Deeper child nodes cover smaller areas, but contain more densely sampled points. For a node in the octree to be loaded, all its ancestors must also be loaded. Octree nodes thus come in two flavors: **Geometry nodes** ("unloaded nodes") and **tree nodes** ("loaded nodes").

### Styling

When a point cloud model is added, Reveal, by default, tries to load all **annotations** associated with that model from CDF, using the `CdfPointCloudStylableObjectProvider` defined in the `data-providers` package. Each annotation is stored as a **stylable object**, associated with an **object ID**. Styling information for all annotated objects are stored in a texture. Each texel contains style information for one object, with the RGB channels containing the style color, and the alpha channel containing other effects, e.g. visibility.


<!-- SOURCE_END: reveal/viewer\packages\pointclouds\README.md -->

================================================================================


<!-- SOURCE_START: reveal/viewer\packages\pointclouds\src\potree-three-loader\README.md -->
## File: reveal/viewer\packages\pointclouds\src\potree-three-loader\README.md

The contents from this folder was taken from `@pnext/three-loader` revision 23c0ad2edb566038791809d03f8c843e246cd949.

A few changes was made on the initial move here - most notably the addition of binary EPT loading capability.

See the LICENSE file for the original license file.


<!-- SOURCE_END: reveal/viewer\packages\pointclouds\src\potree-three-loader\README.md -->

================================================================================


<!-- SOURCE_START: reveal/viewer\packages\sector-loader\README.md -->
## File: reveal/viewer\packages\sector-loader\README.md

# Sector Loader
The sector loader package is intended to be used for loading a given sector defined by the `WantedSector` type from `@reveal/cad-parsers` package.
The result will be of type `ConsumedSector` which contains all the given geometry for the sector. 
This package is responsible for fetching the sector (remote, local, cache, etc.) and feeding the data to a parser and packaging the result for usage in a scene.


The facade of this package is as follows:
```ts
export interface SectorRepository {
  loadSector(sector: WantedSector): Promise<ConsumedSector>;
  clear(): void;
}
```

The package contains two implementations for this facade: 
- `V8SectorRepository`: i3d/f3d/ctm outputs
- `GltfSectorRepository`: for Gltf-binary outputs


Definitions for type dependencies: `WantedSector` and `ConsumedSector` from `@reveal/cad-parsers` can be viewed [here](https://github.com/cognitedata/reveal/blob/master/viewer/packages/cad-parsers/src/cad/types.ts).


## Sector loader test app
The `/app/` folder contains a test app which can be used to test the sector parser in a browser context. The app can be started by running `yarn start` in the package root.
The app will automatically load any and all sector files located in the `/test-models/` directory. Note that the test app has no concept of where the geometry is so you might have to change the camera position / target.

The app is by default hooked up with the `3d-test` CDF project and will default to loading a simple scene.
You may also specify `modelId` and `revisionId` as url paramaters to specify a given model. 
Note that the test app will attempt to load the entire model.

The app also contains a simple UI that allows you to switch the model type between GLTF and i3d/f3d.

Example URL:
```
https://localhost:8080?modelId=1791160622840317&revisionId=502149125550840
```


<!-- SOURCE_END: reveal/viewer\packages\sector-loader\README.md -->

================================================================================


<!-- SOURCE_START: reveal/viewer\packages\sector-parser\README.md -->
## File: reveal/viewer\packages\sector-parser\README.md

# Sector parser
The sector parser package is intended to be used for parsing raw byte arrays containing geometric information of a given sectors which includes: primitives, untextured merged triangle meshes, textured merged triangle meshes and instanced triangle meshes.

## Usage
This package has a single entrypoint containing a method for parsing the raw array buffer:

```ts
parseSector(data: ArrayBuffer): [RevealGeometryCollectionType, THREE.BufferGeometry][];
```

The result from this operation is a list of `THREE.BufferGeometry` that is grouped by an `enum` that describes the geometry collection type.

```ts
enum RevealGeometryCollectionType {
  BoxCollection,
  CircleCollection,
  ConeCollection,
  EccentricConeCollection,
  EllipsoidSegmentCollection,
  GeneralCylinderCollection,
  GeneralRingCollection,
  QuadCollection,
  TorusSegmentCollection,
  TrapeziumCollection,
  NutCollection,
  TriangleMesh,
  TexturedTriangleMesh,
  InstanceMesh
}
```
The buffer geometry result has all the neccesary attributes added and it also adds the geometry such as quads for those types that are ray-traced.

## Sector parser test app
The `/app/` folder contains a test app which can be used to test the sector parser in a browser context. The app can be started by running `yarn start` in the package root.
The app will automatically load any and all sector files located in the `/test-models/` directory. Note that the test app has no concept of where the geometry is so you might have to change the camera position / target.

## Texture Support

If a sector contains textured geometry, the optimizer will, in addition to the normal `<id>.glb` file, output an `<id>_textured.glb` file. Reveal will check the scene metadata to see if a sector has an `<id>_textured.glb` file, and uses that instead of the normal file.

The normal file will not contain any textured geometry, and is only produced for backwards compatibility with older Reveal versions.

`<id>_textured.glb` will contain the traditional `TriangleMesh` node, but also a `TexturedTriangleMesh` node. All textured geometry is found in the `TexturedTriangleMesh` node, while `TriangleMesh` contains untextured meshes like before.


<!-- SOURCE_END: reveal/viewer\packages\sector-parser\README.md -->

================================================================================


<!-- SOURCE_START: reveal/viewer\packages\utilities\src\workers\workerize-transferable\README.md -->
## File: reveal/viewer\packages\utilities\src\workers\workerize-transferable\README.md

This is a consumed library from https://github.com/naoak/workerize-transferable

The source code has been integrated such that ESM modules are properly translated in jest.

<!-- SOURCE_END: reveal/viewer\packages\utilities\src\workers\workerize-transferable\README.md -->

================================================================================


<!-- SOURCE_START: reveal/viewer\README.md -->
## File: reveal/viewer\README.md

# Reveal viewer

Documentation for the latest version is available at [https://cognitedata.github.io/reveal-docs/docs](https://cognitedata.github.io/reveal-docs/docs). Documentation for the next release is available from [https://cognitedata.github.io/reveal-docs/docs/next/](https://cognitedata.github.io/reveal-docs/docs/next/).

The documentation has a bunch of [live examples](https://cognitedata.github.io/reveal-docs/docs/examples/cad-basic).
---

## Code Example

```typescript
import { Cognite3DViewer } from "@cognite/reveal";
import { CogniteClient, CogniteAuthentication } from "@cognite/sdk";

const appId = "com.cognite.reveal.example";
const client = new CogniteClient({
  appId,
  project,
  getToken
});

async function start() {
  await client.authenticate();

  const viewer = new Cognite3DViewer({
    sdk: client,
    domElement: document.querySelector("#your-element-for-viewer")
  });
  viewer.addModel({ modelId: 4715379429968321, revisionId: 5688854005909501 });
}

const project = "publicdata";
const legacyInstance = new CogniteAuthentication({
  project,
});

const getToken = async () => {
  await legacyInstance.handleLoginRedirect();
  let token = await legacyInstance.getCDFToken();
  if (token) {
    return token.accessToken;
  }
  token = await legacyInstance.login({ onAuthenticate: "REDIRECT" });
  if (token) {
    return token.accessToken;
  }
  throw new Error("authentication error");
};

start();
```

## Installation

```bash
npm install @cognite/reveal @cognite/sdk three@<version>
```

Please find the correct version of ThreeJS in the release documentation on Github. We only guarantee support for the exact ThreeJS version specified there.

See [our documentation](https://cognitedata.github.io/reveal-docs/docs/examples/cad-basic) for usage.

## Prerequisites

For development, you will need to install [Node](https://nodejs.org/en/download/), [Yarn](https://yarnpkg.com/getting-started/install) and [Rust+Cargo](https://doc.rust-lang.org/cargo/getting-started/installation.html).

Run `yarn` in the viewer

## Local Packages
The Reveal viewer is structured using local packages.
This allows you to test features in isolation and constrain the dependencies with logical barriers between features.
Packages are located in the `/packages/` subfolder.
There is no enforced structure of the packages and their layout and content will vary depending on what the package exposes to the rest of the system.
Dependencies that are located in the `viewer/package.json` will be shared and are accessible by any package without having to explicitly declare a dependency in the respective package's `package.json`.
Any external dependency (e.g. `lodash`, `threejs`, etc.) must be declared in the root `package.json` such that they will be properly installed by users that consume the `Reveal` NPM package.

### Creating a local package
Create a new folder under the `/packages/` folder, e.g. `/packages/[MY-PACKAGE-NAME]` and include a package with the following structure:

```json
{
  "name": "@reveal/[MY-PACKAGE-NAME]",
  "private": true,
  "main": "index.ts",
}
```

Technically the `private: true` field can be omitted but it is highly recommended such that one does not accidentally publish the local package to NPM with the `npm publish` command.
The `index.ts` should include any types, functions and/or classes you wish to expose to consumers of this package. You should also create a `README.md` file for your package that explains its intent and any information that is needed to use the package.

If your package depends on another local package, it must be explicitly declared as a dependency:
```json
{
  "name": "@reveal/[MY-PACKAGE-NAME]",
  "private": true,
  "main": "index.ts",
  "dependencies": {
    "@reveal/[SOME-LOCAL-PACKAGE]": "workspace:*"
  }
}
```
The `workspace` keyword declares that the dependency is a local package and should never be fetched from NPM.
And the `':*'` syntax means that it should just grab any version available. See [this](https://yarnpkg.com/features/workspaces) for more documentation on yarn workspaces.

If you want to add Rust/Webassembly code to a package, you can add the following script in `package.json`:

```json
{
  "scripts": {
    "run-wasm-pack": "yarn run ws:update-cargo-index && wasm-pack"
  }
}
```
and let the Cargo crate reside in `<package-name>/wasm`.
Then the crate will automatically be built and tested by the `build` and `test` scripts in the workspace root respectively.
The `ws:update-cargo-index` step ensures that the local `crates.io` index has been updated before running build.
Otherwise, the index update will be executed in a quiet manner, and the command may appear to hang for several minutes.

When writing tests in Rust, the tests must be annotated with the `#[wasm_bindgen_test]` attribute, instead of the conventional `#[test]`, and `wasm-bindgen-test` must be added as a (dev-)dependency. All tests are run as part of the normal `yarn test` script in the root folder, but can also be run manually with e.g. `wasm-pack test --chrome --headless` in the relevant `wasm` folder.

It is also possible to run and test a local package in isolation from the rest of Reveal.
Convenience functionality has been created to make this easy.
Add the following script to your package's `package.json`:
```json
{
  "scripts": {
    "test": "yarn ws:test --config ./../../jest.config.js"
  }
}
```
Running `yarn run test` will run all tests in your package that resolves the `*.test.*` regex pattern.

To run a test app that includes your package (and any dependencies), create a `/app/` subfolder in your package that includes an `index.ts` file.
Add the following script to your package's `package.json`:
```json
{
  "scripts": {
    "start": "yarn ws:start"
  }
}
```

Running the command `yarn start` will host a localhost site with a template HTML that includes the `/app/index.ts` script that has been transpiled to javascript.
To see an example of this check out the `packages/camera-manager` package.

## API Extractor

The `viewer/reveal.api.md` file contains a description of the public API of Reveal. In the CI pipeline, the `reveal.api.md` file is checked to be up-to-date by API extractor.

In order to update this file locally, run `yarn run update-api` *after* having run the build script. This will update the API file with any changes, which should be added and committed in the same PR.

## Debugging

### Worker source maps

When bundling source maps with inlined web workers, the bundle size grows huge. Therefore source maps for workers are disabled by default. In order to add source maps to workers, pass `--env workerSourceMaps=true` to the `yarn build` script.

## Creating and running visual tests

Visual test files must be on the format `visual-tests/SomeTest.VisualTest.ts`. See one of the existing tests
for example on how to create a test.

Visual tests can be run from `viewer/` using `yarn test:visual`. This will run all visual tests. You can also
run a single test by using `yarn test:visual -- -t="SomeTest"` (will run all tests with "SomeTest" in the name). Note that arguments only will be passed to the client, to pass arguments to the server you will need to manually start the server and client separately.

For more information about visual tests, see [visual-tests/README.md](visual-tests/README.md).

### Recommended package folder structure
     app                   # Runnable app
     index.ts             # Entry point for runnable app
     src                   # Source code for package
     wasm                  # Rust/Webassembly source code for package
     test                  # Automated tests
     package.json          # Package declaration
     index.ts              # Entry point for package
     README.md             # Readme


<!-- SOURCE_END: reveal/viewer\README.md -->

================================================================================


<!-- SOURCE_START: reveal/viewer\reveal.api.md -->
## File: reveal/viewer\reveal.api.md

## API Report File for "@cognite/reveal"

> Do not edit this file. It is a report generated by [API Extractor](https://api-extractor.com/).

```ts

import { AnnotationModel } from '@cognite/sdk';
import { AnnotationsAssetRef } from '@cognite/sdk';
import { AnnotationStatus } from '@cognite/sdk';
import { AnnotationsTypesImagesAssetLink } from '@cognite/sdk';
import { AnnotationsTypesImagesInstanceLink } from '@cognite/sdk';
import { Box3 } from 'three';
import { Camera } from 'three';
import { CogniteClient } from '@cognite/sdk';
import { CogniteInternalId } from '@cognite/sdk';
import { Color } from 'three';
import { EventDispatcher } from 'three';
import { IdEither } from '@cognite/sdk';
import { ListResponse } from '@cognite/sdk';
import { Matrix4 } from 'three';
import { Node3D } from '@cognite/sdk';
import { Object3D } from 'three';
import { OrthographicCamera } from 'three';
import { PerspectiveCamera } from 'three';
import { Plane } from 'three';
import { Quaternion } from 'three';
import { Raycaster } from 'three';
import { Texture } from 'three';
import * as THREE from 'three';
import { Vector2 } from 'three';
import { Vector3 } from 'three';
import type { WebGLRenderer } from 'three';
import type { WebGLRenderTarget } from 'three';

// @public
export type AbsolutePosition = {
    xAbsolute: number;
    yAbsolute: number;
};

// @public (undocumented)
export type AddImage360Options = {
    collectionTransform?: Matrix4;
    preMultipliedRotation?: boolean;
    annotationFilter?: Image360AnnotationFilterOptions;
};

// @public
export type AddModelOptions<T extends DataSourceType = ClassicDataSourceType> = CommonModelOptions & T['modelIdentifier'];

// @public
export class AnnotationIdPointCloudObjectCollection extends PointCloudAnnotationVolumeCollection {
    constructor(ids: Iterable<number>);
    // (undocumented)
    getAnnotationIds(): Iterable<number>;
    // (undocumented)
    get isLoading(): false;
}

// @beta
export type AnyIntersection<T extends DataSourceType = DataSourceType> = CadIntersection | PointCloudIntersection<T> | Image360IconIntersection<T> | CustomObjectIntersection;

// @public
export interface AreaCollection {
    addAreas(boxes: Iterable<Box3>): void;
    areas(): Generator<Box3>;
    intersectsBox(box: Box3): boolean;
    intersectWith(boxes: Iterable<Box3>): void;
    // (undocumented)
    readonly isEmpty: boolean;
}

// @public
export type AssetAnnotationImage360Info<T extends DataSourceType = ClassicDataSourceType> = {
    annotationInfo: InstanceLinkable360ImageAnnotationType<T>;
    imageEntity: Image360<T>;
    imageRevision: Image360Revision<T>;
};

// @public
export type AssetHybridAnnotationImage360Info = {
    annotationInfo: ImageAssetLinkAnnotationInfo | ImageInstanceLinkAnnotationInfo;
    imageEntity: Image360<ClassicDataSourceType>;
    imageRevision: Image360Revision<ClassicDataSourceType>;
};

// @public
export class AssetNodeCollection extends NodeCollection {
    constructor(client: CogniteClient, modelMetadataProvider: CdfModelNodeCollectionDataProvider);
    // (undocumented)
    static readonly classToken = "AssetNodeCollection";
    // (undocumented)
    clear(): void;
    executeFilter(filter: {
        assetId?: number;
        boundingBox?: THREE.Box3;
    }): Promise<void>;
    // (undocumented)
    getAreas(): AreaCollection;
    // (undocumented)
    getFilter(): {
        assetId?: number | undefined;
        boundingBox?: THREE.Box3 | undefined;
    } | undefined;
    // (undocumented)
    getIndexSet(): IndexSet;
    // (undocumented)
    get isLoading(): boolean;
    // (undocumented)
    serialize(): SerializedNodeCollection;
}

// @public
export type AxisBoxCompassConfig = {
    ringLabel?: string;
    labelDelta?: number;
    fontSize?: number;
    fontColor?: THREE.Color;
    tickColor?: THREE.Color;
};

// @public
export type AxisBoxConfig = {
    size?: number;
    position?: AbsolutePosition | RelativePosition;
    animationSpeed?: number;
    faces?: {
        xPositiveFace?: AxisBoxFaceConfig;
        xNegativeFace?: AxisBoxFaceConfig;
        yPositiveFace?: AxisBoxFaceConfig;
        yNegativeFace?: AxisBoxFaceConfig;
        zPositiveFace?: AxisBoxFaceConfig;
        zNegativeFace?: AxisBoxFaceConfig;
    };
    compass?: AxisBoxCompassConfig;
};

// @public
export type AxisBoxFaceConfig = {
    label?: string;
    fontSize?: number;
    fontColor?: THREE.Color;
    outlineSize?: number;
    outlineColor?: THREE.Color;
    faceColor?: THREE.Color;
};

// @beta
export class AxisGizmoOptions {
    // (undocumented)
    animationDuration: number;
    // (undocumented)
    bobbleLineWidth: number;
    // (undocumented)
    bubbleRadius: number;
    // (undocumented)
    corner: Corner;
    // (undocumented)
    darkColors: number[];
    // (undocumented)
    focusCircleAlpha: number;
    // (undocumented)
    focusCircleColor: string;
    // (undocumented)
    fontFamily: string;
    // (undocumented)
    fontSize: string;
    // (undocumented)
    fontWeight: string;
    // (undocumented)
    fontYAdjust: number;
    getFont(): string;
    // (undocumented)
    insideMargin: number;
    // (undocumented)
    lightColors: number[];
    // (undocumented)
    normalTextColor: string;
    // (undocumented)
    primaryLineWidth: number;
    // (undocumented)
    get radius(): number;
    // (undocumented)
    secondaryLineWidth: number;
    // (undocumented)
    selectedTextColor: string;
    // (undocumented)
    size: number;
    // (undocumented)
    useGeoLabels: boolean;
    // (undocumented)
    xMargin: number;
    // (undocumented)
    yMargin: number;
    // (undocumented)
    yUp: boolean;
}

// @beta
export class AxisGizmoTool extends Cognite3DViewerToolBase {
    constructor(option?: AxisGizmoOptions);
    connect(viewer: Cognite3DViewer<DataSourceType>): void;
    // (undocumented)
    dispose(): void;
    // (undocumented)
    get options(): AxisGizmoOptions;
}

// @public (undocumented)
export class AxisViewTool extends Cognite3DViewerToolBase {
    constructor(viewer: Cognite3DViewer, config?: AxisBoxConfig);
    // (undocumented)
    dispose(): void;
}

// @public
export type BeforeSceneRenderedDelegate = (event: {
    frameNumber: number;
    renderer: WebGLRenderer;
    camera: PerspectiveCamera;
}) => void;

// @public (undocumented)
export interface BinaryFileProvider {
    // (undocumented)
    getBinaryFile(baseUrl: string, fileName: string, abortSignal?: AbortSignal): Promise<ArrayBuffer>;
}

// @public (undocumented)
export interface BlobOutputMetadata {
    // (undocumented)
    blobId: number;
    // (undocumented)
    format: File3dFormat | string;
    // (undocumented)
    version: number;
}

// @public (undocumented)
export class BoundingBoxClipper {
    constructor(box?: THREE.Box3);
    // (undocumented)
    get clippingPlanes(): THREE.Plane[];
    set maxX(x: number);
    // (undocumented)
    get maxX(): number;
    set maxY(y: number);
    // (undocumented)
    get maxY(): number;
    set maxZ(z: number);
    // (undocumented)
    get maxZ(): number;
    set minX(x: number);
    // (undocumented)
    get minX(): number;
    set minY(y: number);
    // (undocumented)
    get minY(): number;
    set minZ(z: number);
    // (undocumented)
    get minZ(): number;
}

// @public (undocumented)
export type CadIntersection = {
    type: 'cad';
    model: CogniteCadModel;
    point: Vector3;
    treeIndex: number;
    distanceToCamera: number;
};

// @public
export type CadModelBudget = {
    readonly highDetailProximityThreshold: number;
    readonly maximumRenderCost: number;
};

// @public
export const CAMERA_MANAGER_EVENT_TYPE_LIST: readonly ["cameraChange", "cameraStop"];

// @public
export type CameraChangeDelegate = (position: Vector3, target: Vector3) => void;

// @public
export type CameraConfiguration = {
    readonly position: Vector3;
    readonly target: Vector3;
};

// @public (undocumented)
export type CameraControlsOptions = {
    mouseWheelAction?: 'zoomToTarget' | 'zoomPastCursor' | 'zoomToCursor';
    changeCameraTargetOnClick?: boolean;
    changeCameraPositionOnDoubleClick?: boolean;
};

// @public
export type CameraEventDelegate = CameraChangeDelegate | CameraStopDelegate;

// @public
export interface CameraManager {
    activate(cameraManager?: CameraManager): void;
    deactivate(): void;
    // (undocumented)
    dispose(): void;
    fitCameraToBoundingBox(boundingBox: Box3, duration?: number, radiusFactor?: number): void;
    getCamera(): PerspectiveCamera;
    getCameraState(): Required<CameraState>;
    off(event: 'cameraChange', callback: CameraChangeDelegate): void;
    // (undocumented)
    off(event: 'cameraStop', callback: CameraStopDelegate): void;
    // (undocumented)
    off(event: CameraManagerEventType, callback: CameraEventDelegate): void;
    on(event: 'cameraChange', callback: CameraChangeDelegate): void;
    // (undocumented)
    on(event: 'cameraStop', callback: CameraStopDelegate): void;
    // (undocumented)
    on(event: CameraManagerEventType, callback: CameraEventDelegate): void;
    setCameraState(state: CameraState): void;
    update(deltaTime: number, boundingBox: Box3): void;
}

// @public
export type CameraManagerEventType = (typeof CAMERA_MANAGER_EVENT_TYPE_LIST)[number];

// @public
export class CameraManagerHelper {
    static calculateCameraStateToFitBoundingBox(camera: PerspectiveCamera, boundingBox: Box3, radiusFactor?: number): {
        position: Vector3;
        target: Vector3;
    };
    static calculateNewRotationFromTarget(camera: PerspectiveCamera, newTarget: Vector3): Quaternion;
    static calculateNewTargetFromRotation(camera: PerspectiveCamera, rotation: Quaternion, currentTarget: Vector3, position: Vector3): Vector3;
    // @deprecated
    static updateCameraNearAndFar(camera: PerspectiveCamera, boundingBox: Box3): void;
    updateCameraNearAndFar(camera: PerspectiveCamera, boundingBox: Box3): void;
}

// @public (undocumented)
export type CameraState = {
    position?: Vector3;
    target?: Vector3;
    rotation?: Quaternion;
};

// @public
export type CameraStopDelegate = () => void;

// @public
export const CDF_TO_VIEWER_TRANSFORMATION: Matrix4;

// @public
export class CdfModelIdentifier implements ModelIdentifier {
    constructor(modelId: number, revisionId: number);
    // (undocumented)
    readonly modelId: number;
    // (undocumented)
    readonly revealInternalId: symbol;
    // (undocumented)
    readonly revisionId: number;
    sourceModelIdentifier(): string;
    // (undocumented)
    toString(): string;
}

// @public
export interface CdfModelNodeCollectionDataProvider {
    getCdfToDefaultModelTransformation(out?: THREE.Matrix4): THREE.Matrix4;
    getModelTransformation(out?: THREE.Matrix4): THREE.Matrix4;
    modelId: number;
    nodeCount: number;
    // (undocumented)
    revisionId: number;
}

// @public (undocumented)
export abstract class CdfNodeCollectionBase extends NodeCollection {
    constructor(classToken: string, model: CdfModelNodeCollectionDataProvider);
    clear(): void;
    // (undocumented)
    getAreas(): AreaCollection;
    // (undocumented)
    getIndexSet(): IndexSet;
    // (undocumented)
    get isLoading(): boolean;
    // (undocumented)
    protected updateCollectionFromResults(requests: Promise<ListResponse<Node3D[]>>[]): Promise<void>;
}

// @public
export type ClassicAddModelOptions = AddModelOptions<ClassicDataSourceType>;

// @public
export type ClassicDataSourceType = {
    modelIdentifier: ClassicModelIdentifierType;
    pointCloudVolumeMetadata: {
        annotationId: number;
        assetRef?: AnnotationsAssetRef;
        instanceRef?: DMInstanceRef;
    };
    pointCloudCollectionType: PointCloudAnnotationVolumeCollection;
    image360Identifier: {
        [key: string]: string;
    } | Image360DataModelIdentifier;
    image360AnnotationType: AnnotationModel;
    _never: never;
};

// @public
export type ClassicModelIdentifierType = {
    modelId: number;
    revisionId: number;
};

// @public (undocumented)
export type ClippingPlanesState = {
    nx: number;
    ny: number;
    nz: number;
    constant: number;
};

// @beta
export class ClosestGeometryFinder<T> {
    constructor(origin: Vector3);
    add(point: Vector3, geometry: T): boolean;
    addLazy(point: Vector3, geometryCreator: () => T): boolean;
    clear(): void;
    getClosestGeometry(): T | undefined;
    isClosest(point: Vector3): boolean;
    set minDistance(value: number);
    get minDistance(): number;
    setClosestGeometry(geometry: T): void;
}

// @public
export class ClusteredAreaCollection implements AreaCollection {
    // (undocumented)
    addAreas(boxes: Iterable<Box3>): void;
    // (undocumented)
    areas(): Generator<Box3>;
    // (undocumented)
    intersectsBox(box: Box3): boolean;
    // (undocumented)
    intersectWith(boxes: Iterable<Box3>): void;
    // (undocumented)
    get isEmpty(): boolean;
}

// @public (undocumented)
export class Cognite3DViewer<DataSourceT extends DataSourceType = ClassicDataSourceType> {
    constructor(options: Cognite3DViewerOptions);
    add360ImageSet(datasource: 'datamodels', dataModelIdentifier: Image360DataModelIdentifier): Promise<Image360Collection<DataSourceT & ClassicDataSourceType>>;
    add360ImageSet(datasource: 'events', eventFilter: {
        [key: string]: string;
    }, add360ImageOptions?: AddImage360Options): Promise<Image360Collection<DataSourceT & ClassicDataSourceType>>;
    addCadModel<T extends DataSourceT>(options: AddModelOptions<T>): Promise<CogniteCadModel>;
    // @beta
    addCustomObject(customObject: ICustomObject): void;
    addModel(options: AddModelOptions<DataSourceT>): Promise<CogniteModel<DataSourceT>>;
    addObject3D(object: THREE.Object3D): void;
    addPointCloudModel(options: AddModelOptions<DataSourceT>): Promise<CognitePointCloudModel<DataSourceT>>;
    get cadBudget(): CadModelBudget;
    set cadBudget(budget: CadModelBudget);
    // (undocumented)
    get cameraManager(): CameraManager;
    // @beta
    canDoImage360Action(action: Image360Action): boolean;
    get canvas(): HTMLCanvasElement;
    // @beta
    createCustomObjectIntersectInput(pixelCoords: THREE.Vector2): CustomObjectIntersectInput;
    determineModelType(modelId: number, revisionId: number): Promise<SupportedModelTypes | ''>;
    dispose(): void;
    get domElement(): HTMLElement;
    enter360Image(image360: Image360<DataSourceT>, revision?: Image360Revision<DataSourceT>): Promise<void>;
    exit360Image(): void;
    fitCameraToBoundingBox(boundingBox: THREE.Box3, duration?: number, radiusFactor?: number): void;
    fitCameraToModel(model: CogniteModel<DataSourceT>, duration?: number): void;
    fitCameraToModels(models?: CogniteModel<DataSourceT>[], duration?: number, restrictToMostGeometry?: boolean): void;
    fitCameraToVisualSceneBoundingBox(duration?: number): void;
    get360AnnotationIntersectionFromPixel(offsetX: number, offsetY: number): Promise<null | Image360AnnotationIntersection<DataSourceT>>;
    get360ImageCollections(): Image360Collection<DataSourceT>[];
    getActive360ImageInfo(): Image360WithCollection<DataSourceT> | undefined;
    // @beta
    getAnyIntersectionFromPixel(pixelCoords: THREE.Vector2, options?: {
        stopOnHitting360Icon?: boolean;
        predicate?: (customObject: ICustomObject) => boolean;
    }): Promise<AnyIntersection<DataSourceT> | undefined>;
    // @deprecated
    getClippingPlanes(): THREE.Plane[];
    getGlobalClippingPlanes(): THREE.Plane[];
    getIntersectionFromPixel(offsetX: number, offsetY: number): Promise<null | Intersection<DataSourceT>>;
    getNormalizedPixelCoordinates(pixelCoords: THREE.Vector2): THREE.Vector2;
    getPixelCoordinatesFromEvent(event: PointerEvent | WheelEvent): THREE.Vector2;
    getResolutionOptions(): ResolutionOptions;
    // @beta
    getSceneBoundingBox(): THREE.Box3;
    getScreenshot(width?: number, height?: number, includeUI?: boolean): Promise<string>;
    getVersion(): string;
    getViewState(): ViewerState;
    // @beta
    getVisualSceneBoundingBox(): THREE.Box3;
    // @beta
    image360Action(action: Image360Action): Promise<void>;
    loadCameraFromModel(model: CogniteModel<DataSourceT>): void;
    get models(): CogniteModel<DataSourceT>[];
    // (undocumented)
    off(event: 'click' | 'hover', callback: PointerEventDelegate): void;
    // (undocumented)
    off(event: 'cameraChange', callback: CameraChangeDelegate): void;
    // (undocumented)
    off(event: 'cameraStop', callback: CameraStopDelegate): void;
    off(event: 'beforeSceneRendered', callback: BeforeSceneRenderedDelegate): void;
    // (undocumented)
    off(event: 'sceneRendered', callback: SceneRenderedDelegate): void;
    // (undocumented)
    off(event: 'disposed', callback: DisposedDelegate): void;
    on(event: 'disposed', callback: DisposedDelegate): void;
    // (undocumented)
    on(event: 'click' | 'hover', callback: PointerEventDelegate): void;
    // (undocumented)
    on(event: 'cameraChange', callback: CameraChangeDelegate): void;
    // (undocumented)
    on(event: 'cameraStop', callback: CameraStopDelegate): void;
    on(event: 'beforeSceneRendered', callback: BeforeSceneRenderedDelegate): void;
    on(event: 'sceneRendered', callback: SceneRenderedDelegate): void;
    // @beta
    onClick360Images(event: PointerEvent): Promise<boolean>;
    // @beta
    onHover360Images(event: PointerEvent): boolean;
    get pointCloudBudget(): PointCloudBudget;
    set pointCloudBudget(budget: PointCloudBudget);
    // @deprecated
    remove360Images(...image360Entities: Image360<DataSourceT>[]): Promise<void>;
    remove360ImageSet(imageCollection: Image360Collection<DataSourceT>): void;
    // @beta
    removeCustomObject(customObject: ICustomObject): void;
    removeModel(model: CogniteModel<DataSourceT>): void;
    removeObject3D(object: THREE.Object3D): void;
    get renderParameters(): RenderParameters;
    requestRedraw(): void;
    setBackgroundColor(backgroundColor: {
        color?: THREE.Color;
        alpha?: number;
    }): void;
    setCameraManager(cameraManager: CameraManager): void;
    // @deprecated
    setClippingPlanes(clippingPlanes: THREE.Plane[]): void;
    setGlobalClippingPlanes(clippingPlanes: THREE.Plane[]): void;
    setLogLevel(level: 'trace' | 'debug' | 'info' | 'warn' | 'error' | 'silent' | 'none'): void;
    setResolutionOptions(options: ResolutionOptions): void;
    setViewState(state: ViewerState): Promise<void>;
    worldToScreen(point: THREE.Vector3, normalize?: boolean): THREE.Vector2 | null;
}

// @public
export interface Cognite3DViewerOptions {
    antiAliasingHint?: 'disabled' | 'fxaa' | 'msaa2+fxaa' | 'msaa4+fxaa' | 'msaa8+fxaa' | 'msaa16+fxaa' | 'msaa2' | 'msaa4' | 'msaa8' | 'msaa16';
    cameraManager?: CameraManager;
    continuousModelStreaming?: boolean;
    customDataSource?: DataSource;
    domElement?: HTMLElement;
    enableEdges?: boolean;
    // @beta
    hasEventListeners?: boolean;
    loadingIndicatorStyle?: {
        placement: 'topLeft' | 'topRight' | 'bottomLeft' | 'bottomRight';
        opacity: number;
    };
    logMetrics?: boolean;
    onLoading?: OnLoadingCallback;
    pointCloudEffects?: {
        pointBlending?: boolean;
        edlOptions?: Partial<EdlOptions> | 'disabled';
    };
    renderer?: WebGLRenderer;
    // @deprecated
    rendererResolutionThreshold?: number;
    renderTargetOptions?: {
        target: WebGLRenderTarget;
        autoSetSize?: boolean;
    };
    sdk: CogniteClient;
    ssaoQualityHint?: 'medium' | 'high' | 'veryhigh' | 'disabled';
    // @beta
    useFlexibleCameraManager?: boolean;
}

// @public
export abstract class Cognite3DViewerToolBase {
    dispose(): void;
    protected ensureNotDisposed(): void;
    off(event: 'disposed', handler: () => void): void;
}

// @public
export class CogniteCadModel implements CdfModelNodeCollectionDataProvider {
    assignStyledNodeCollection(nodeCollection: NodeCollection, appearance: NodeAppearance, importance?: number): void;
    dispose(): void;
    getAncestorTreeIndices(treeIndex: number, generation: number): Promise<NumericRange>;
    getBoundingBoxByNodeId(nodeId: number, box?: THREE.Box3): Promise<THREE.Box3>;
    getBoundingBoxByTreeIndex(treeIndex: number, box?: THREE.Box3): Promise<THREE.Box3>;
    getBoundingBoxesByNodeIds(nodeIds: number[]): Promise<THREE.Box3[]>;
    getCameraConfiguration(): CameraConfiguration | undefined;
    getCdfToDefaultModelTransformation(out?: THREE.Matrix4): THREE.Matrix4;
    getDefaultNodeAppearance(): NodeAppearance;
    getModelBoundingBox(outBoundingBox?: THREE.Box3, restrictToMostGeometry?: boolean): THREE.Box3;
    getModelClippingPlanes(): THREE.Plane[];
    getModelTransformation(out?: THREE.Matrix4): THREE.Matrix4;
    getSubtreeTreeIndices(treeIndex: number): Promise<NumericRange>;
    iterateNodesByTreeIndex(action: (treeIndex: number) => void): Promise<void>;
    iterateSubtreeByTreeIndex(treeIndex: number, action: (treeIndex: number) => void): Promise<void>;
    mapBoxFromCdfToModelCoordinates(box: THREE.Box3, out?: THREE.Box3): THREE.Box3;
    mapNodeIdsToTreeIndices(nodeIds: CogniteInternalId[]): Promise<number[]>;
    mapNodeIdToTreeIndex(nodeId: CogniteInternalId): Promise<number>;
    mapPointFromCdfToModelCoordinates(point: THREE.Vector3, out?: THREE.Vector3): THREE.Vector3;
    mapTreeIndexToNodeId(treeIndex: number): Promise<CogniteInternalId>;
    mapTreeIndicesToNodeIds(treeIndices: number[]): Promise<CogniteInternalId[]>;
    readonly modelId: number;
    get modelUnit(): WellKnownUnit | '';
    get modelUnitToMetersFactor(): number | undefined;
    get nodeCount(): number;
    removeAllStyledNodeCollections(): void;
    resetNodeTransform(treeIndices: NumericRange): void;
    resetNodeTransformByTreeIndex(treeIndex: number, applyToChildren?: boolean): Promise<number>;
    readonly revisionId: number;
    setDefaultNodeAppearance(appearance: NodeAppearance): void;
    setModelClippingPlanes(clippingPlanes: THREE.Plane[]): void;
    setModelTransformation(matrix: THREE.Matrix4): void;
    setNodeTransform(treeIndices: NumericRange, transformMatrix: THREE.Matrix4, boundingBox?: THREE.Box3, space?: 'model' | 'world'): void;
    setNodeTransformByTreeIndex(treeIndex: number, transform: THREE.Matrix4, applyToChildren?: boolean, space?: 'model' | 'world'): Promise<number>;
    get styledNodeCollections(): {
        nodeCollection: NodeCollection;
        appearance: NodeAppearance;
    }[];
    // (undocumented)
    readonly type: SupportedModelTypes;
    unassignStyledNodeCollection(nodeCollection: NodeCollection): void;
    set visible(value: boolean);
    get visible(): boolean;
}

// @public
export type CogniteModel<T extends DataSourceType = ClassicDataSourceType> = CogniteCadModel | CognitePointCloudModel<T>;

// @public
export class CognitePointCloudModel<T extends DataSourceType = ClassicDataSourceType> {
    assignStyledObjectCollection(objectCollection: T['pointCloudCollectionType'], appearance: PointCloudAppearance): void;
    dispose(): void;
    getCameraConfiguration(): CameraConfiguration | undefined;
    getCdfToDefaultModelTransformation(out?: THREE.Matrix4): THREE.Matrix4;
    getClasses(): Array<{
        name: string;
        code: number | WellKnownAsprsPointClassCodes;
        color: THREE.Color;
    }>;
    getDefaultPointCloudAppearance(): PointCloudAppearance;
    // (undocumented)
    getModelBoundingBox(outBoundingBox?: THREE.Box3): THREE.Box3;
    getModelClippingPlanes(): THREE.Plane[];
    getModelTransformation(out?: THREE.Matrix4): THREE.Matrix4;
    getPointsByBoundingBox(box: THREE.Box3): THREE.Vector3[];
    hasClass(pointClass: number | WellKnownAsprsPointClassCodes): boolean;
    isClassVisible(pointClass: number | WellKnownAsprsPointClassCodes): boolean;
    mapBoxFromCdfToModelCoordinates(box: THREE.Box3, out?: THREE.Box3): THREE.Box3;
    mapPointFromCdfToModelCoordinates(point: THREE.Vector3, out?: THREE.Vector3): THREE.Vector3;
    // @deprecated
    readonly modelId: number;
    readonly modelIdentifier: T['modelIdentifier'];
    get pointColorType(): PointColorType;
    set pointColorType(type: PointColorType);
    get pointShape(): PointShape;
    set pointShape(shape: PointShape);
    get pointSize(): number;
    set pointSize(size: number);
    get pointSizeType(): PointSizeType;
    set pointSizeType(type: PointSizeType);
    removeAllStyledObjectCollections(): void;
    // @deprecated
    readonly revisionId: number;
    setClassVisible(pointClass: number | WellKnownAsprsPointClassCodes, visible: boolean): void;
    setDefaultPointCloudAppearance(appearance: PointCloudAppearance): void;
    setModelClippingPlanes(clippingPlanes: THREE.Plane[]): void;
    setModelTransformation(transformationMatrix: THREE.Matrix4): void;
    // (undocumented)
    get stylableObjectCount(): number;
    get stylableObjects(): PointCloudObjectMetadata<T>[];
    get styledCollections(): StyledPointCloudVolumeCollection<T>[];
    // @deprecated (undocumented)
    traverseStylableObjects(callback: (annotationMetadata: PointCloudObjectMetadata<T>) => void): void;
    // (undocumented)
    readonly type: SupportedModelTypes;
    unassignStyledObjectCollection(objectCollection: T['pointCloudCollectionType']): void;
    set visible(value: boolean);
    get visible(): boolean;
    get visiblePointCount(): number;
}

// @public
export abstract class CombineNodeCollectionBase extends NodeCollection {
    constructor(classToken: string, nodeCollections?: NodeCollection[]);
    // (undocumented)
    add(nodeCollection: NodeCollection): void;
    clear(): void;
    // (undocumented)
    protected abstract createCombinedIndexSet(): IndexSet;
    // (undocumented)
    abstract getAreas(): AreaCollection;
    // @override (undocumented)
    getIndexSet(): IndexSet;
    // @override (undocumented)
    get isLoading(): boolean;
    // (undocumented)
    protected makeDirty(): void;
    // (undocumented)
    protected _nodeCollections: NodeCollection[];
    // (undocumented)
    remove(nodeCollection: NodeCollection): void;
    // (undocumented)
    abstract serialize(): SerializedNodeCollection;
}

// @public (undocumented)
export class ComboControls extends EventDispatcher<ComboControlsEventType> {
    constructor(camera: PerspectiveCamera | OrthographicCamera, domElement: HTMLElement);
    get cameraRawRotation(): Quaternion;
    // (undocumented)
    dispose: () => void;
    get enabled(): boolean;
    set enabled(newEnabledValue: boolean);
    // (undocumented)
    getScrollTarget: () => Vector3;
    // (undocumented)
    getState: () => {
        target: Vector3;
        position: Vector3;
    };
    get options(): Readonly<ComboControlsOptions>;
    set options(options: Partial<ComboControlsOptions>);
    // (undocumented)
    setScrollTarget: (target: Vector3) => void;
    // (undocumented)
    setState: (position: Vector3, target: Vector3) => void;
    // (undocumented)
    setViewTarget: (target: Vector3) => void;
    // (undocumented)
    triggerCameraChangeEvent: () => void;
    // (undocumented)
    update: (deltaTimeS: number, forceUpdate?: boolean) => boolean;
}

// @public
export type ComboControlsEventType = {
    cameraChange: {
        camera: {
            position: Vector3;
            target: Vector3;
        };
    };
};

// @public
export type ComboControlsOptions = {
    enableDamping: boolean;
    dampingFactor: number;
    dynamicTarget: boolean;
    minDistance: number;
    minZoomDistance: number;
    dollyFactor: number;
    minPolarAngle: number;
    maxPolarAngle: number;
    minAzimuthAngle: number;
    maxAzimuthAngle: number;
    panDollyMinDistanceFactor: number;
    firstPersonRotationFactor: number;
    pointerRotationSpeedAzimuth: number;
    pointerRotationSpeedPolar: number;
    enableKeyboardNavigation: boolean;
    keyboardRotationSpeedAzimuth: number;
    keyboardRotationSpeedPolar: number;
    mouseFirstPersonRotationSpeed: number;
    keyboardDollySpeed: number;
    keyboardPanSpeed: number;
    keyboardSpeedFactor: number;
    pinchEpsilon: number;
    pinchPanSpeed: number;
    EPSILON: number;
    minZoom: number;
    maxZoom: number;
    orthographicCameraDollyFactor: number;
    lookAtViewTarget: boolean;
    useScrollTarget: boolean;
    zoomToCursor: boolean;
    minDeltaRatio: number;
    maxDeltaRatio: number;
    minDeltaDownscaleCoefficient: number;
    maxDeltaDownscaleCoefficient: number;
};

// @public
export type CommonModelOptions = {
    localPath?: string;
    geometryFilter?: GeometryFilter;
};

// @public (undocumented)
export type CompletePointCloudAppearance = Required<PointCloudAppearance>;

// @public
export type CoreDmImage360Annotation = {
    sourceType: 'dm';
    annotationIdentifier: DMInstanceRef;
    assetRef?: DMInstanceRef;
    polygon: Vector3[];
    status: 'suggested' | 'approved';
    connectedImageId: DMInstanceRef;
};

// @public
export enum Corner {
    // (undocumented)
    BottomLeft = 2,
    // (undocumented)
    BottomRight = 3,
    // (undocumented)
    TopLeft = 1,
    // (undocumented)
    TopRight = 0
}

// @beta
export class CustomObject implements ICustomObject {
    constructor(object: Object3D);
    beforeRender(_camera: PerspectiveCamera): void;
    getBoundingBox(target: Box3): Box3;
    intersectIfCloser(intersectInput: CustomObjectIntersectInput, closestDistance: number | undefined): undefined | CustomObjectIntersection;
    get isPartOfBoundingBox(): boolean;
    set isPartOfBoundingBox(value: boolean);
    get object(): Object3D;
    get shouldPick(): boolean;
    set shouldPick(value: boolean);
    get shouldPickBoundingBox(): boolean;
    set shouldPickBoundingBox(value: boolean);
    get useDepthTest(): boolean;
    set useDepthTest(value: boolean);
}

// @beta
export class CustomObjectIntersectInput {
    constructor(normalizedCoords: Vector2, camera: PerspectiveCamera, clippingPlanes?: Plane[] | undefined);
    // (undocumented)
    readonly camera: PerspectiveCamera;
    // (undocumented)
    readonly clippingPlanes: Plane[] | undefined;
    // (undocumented)
    isVisible(point: Vector3): boolean;
    // (undocumented)
    readonly normalizedCoords: Vector2;
    // (undocumented)
    readonly raycaster: Raycaster;
}

// @beta
export type CustomObjectIntersection = {
    type: 'customObject';
    point: Vector3;
    distanceToCamera: number;
    customObject: ICustomObject;
    boundingBox?: Box3;
    userData?: any;
};

// @public
export interface DataSource {
    getModelDataProvider(): ModelDataProvider;
    getModelMetadataProvider(): ModelMetadataProvider;
    getNodesApiClient(): NodesApiClient;
}

// @public
export type DataSourceType = ClassicDataSourceType | DMDataSourceType;

// @public
export class DebouncedCameraStopEventTrigger {
    constructor(cameraManager: CameraManager, debounceTimeMs?: number);
    dispose(): void;
    subscribe(callback: CameraStopDelegate): void;
    unsubscribe(callback: CameraStopDelegate): void;
}

// @public (undocumented)
export class DebugCameraTool extends Cognite3DViewerToolBase {
    constructor(viewer: Cognite3DViewer<DataSourceType>);
    // @override
    dispose(): void;
    // (undocumented)
    hideCameraHelper(): void;
    // (undocumented)
    showCameraHelper(): void;
}

// @public
export class DefaultCameraManager implements CameraManager {
    // (undocumented)
    activate(cameraManager?: CameraManager): void;
    automaticControlsSensitivity: boolean;
    automaticNearFarPlane: boolean;
    // (undocumented)
    deactivate(): void;
    // (undocumented)
    dispose(): void;
    // (undocumented)
    fitCameraToBoundingBox(box: THREE.Box3, duration?: number, radiusFactor?: number): void;
    // (undocumented)
    getCamera(): THREE.PerspectiveCamera;
    getCameraControlsOptions(): CameraControlsOptions;
    // (undocumented)
    getCameraState(): Required<CameraState>;
    getComboControlsOptions(): Readonly<ComboControlsOptions>;
    set keyboardNavigationEnabled(enabled: boolean);
    get keyboardNavigationEnabled(): boolean;
    // (undocumented)
    off(event: CameraManagerEventType, callback: CameraEventDelegate): void;
    // (undocumented)
    on(event: CameraManagerEventType, callback: CameraEventDelegate): void;
    setCameraControlsOptions(controlsOptions: CameraControlsOptions): void;
    setCameraState(state: CameraState): void;
    setComboControlsOptions(options: Partial<ComboControlsOptions>): void;
    // (undocumented)
    update(deltaTime: number, boundingBox: THREE.Box3): void;
}

// @public
export const DefaultNodeAppearance: {
    Default: NodeAppearance;
    Outlined: NodeAppearance;
    Hidden: NodeAppearance;
    InFront: NodeAppearance;
    Ghosted: NodeAppearance;
    Highlighted: {
        color?: Color;
        visible?: boolean;
        renderInFront?: boolean;
        renderGhosted?: boolean;
        outlineColor?: NodeOutlineColor;
        prioritizedForLoadingHint?: number;
    };
};

// @public
export type DefaultOverlay3DContentType = {
    [key: string]: string;
};

// @public (undocumented)
export const DefaultPointCloudAppearance: CompletePointCloudAppearance;

// @public
export type DisposedDelegate = () => void;

// @public
export type DistanceToLabelDelegate = (distanceInMeters: number) => string;

// @public
export type DMAddModelOptions = AddModelOptions<DMDataSourceType>;

// @public
export type DMDataSourceType = {
    pointCloudVolumeMetadata: {
        volumeInstanceRef: DMInstanceRef;
        assetRef?: DMInstanceRef;
    };
    pointCloudCollectionType: PointCloudDMVolumeCollection;
    modelIdentifier: DMModelIdentifierType;
    image360Identifier: Image360DataModelIdentifier;
    image360AnnotationType: CoreDmImage360Annotation;
    _never: never;
};

// @public
export type DMInstanceRef = {
    externalId: string;
    space: string;
};

// @public
export type DMModelIdentifierType = {
    revisionExternalId: string;
    revisionSpace: string;
};

// @public
export type EdlOptions = {
    strength: number;
    radius: number;
};

// @public (undocumented)
export enum File3dFormat {
    // (undocumented)
    AnyFormat = "all-outputs",
    // (undocumented)
    EptPointCloud = "ept-pointcloud",
    GltfCadModel = "gltf-directory"
}

// @beta (undocumented)
export class FlexibleControlsOptions {
    // (undocumented)
    animationDuration: number;
    // (undocumented)
    automaticNearFarPlane: boolean;
    // (undocumented)
    automaticSensitivity: boolean;
    // (undocumented)
    controlsType: FlexibleControlsType;
    // (undocumented)
    dampingFactor: number;
    // (undocumented)
    defaultFov: number;
    // (undocumented)
    enableChangeControlsTypeOn123Key: boolean;
    // (undocumented)
    enableDamping: boolean;
    // (undocumented)
    enableKeyboardNavigation: boolean;
    // (undocumented)
    getKeyboardSpeed(shift: boolean): number;
    // (undocumented)
    getLegalAzimuthAngle(azimuthAngle: number): number;
    // (undocumented)
    getLegalFov(fov: number): number;
    // (undocumented)
    getLegalPolarAngle(polarAngle: number): number;
    // (undocumented)
    getLegalSensitivity(controlsSensitivity: number): number;
    // (undocumented)
    innerMarkerColor: string;
    // (undocumented)
    keyboardDollySpeed: number;
    // (undocumented)
    keyboardFastMoveFactor: number;
    // (undocumented)
    keyboardFastRotationFactor: number;
    // (undocumented)
    keyboardPanSpeed: number;
    // (undocumented)
    keyboardRotationSpeedAzimuth: number;
    // (undocumented)
    keyboardRotationSpeedPolar: number;
    // (undocumented)
    keyboardSpeed: number;
    // (undocumented)
    maxAzimuthAngle: number;
    // (undocumented)
    maximumFov: number;
    // (undocumented)
    maximumTimeBetweenRaycasts: number;
    // (undocumented)
    maxOrthographicZoom: number;
    // (undocumented)
    maxPolarAngle: number;
    // (undocumented)
    maxSensitivity: number;
    // (undocumented)
    minAzimuthAngle: number;
    // (undocumented)
    minimumFov: number;
    // (undocumented)
    minimumTimeBetweenRaycasts: number;
    // (undocumented)
    minOrthographicZoom: number;
    // (undocumented)
    minPolarAngle: number;
    // (undocumented)
    minSensitivity: number;
    // (undocumented)
    mouseClickType: FlexibleMouseActionType;
    // (undocumented)
    mouseDistanceThresholdBetweenRaycasts: number;
    // (undocumented)
    mouseDollySpeed: number;
    // (undocumented)
    mouseDoubleClickType: FlexibleMouseActionType;
    // (undocumented)
    mousePanSpeed: number;
    // (undocumented)
    mouseRotationSpeedAzimuth: number;
    // (undocumented)
    mouseRotationSpeedPolar: number;
    // (undocumented)
    mouseWheelAction: FlexibleWheelZoomType;
    // (undocumented)
    orthographicCameraDollyFactor: number;
    // (undocumented)
    outerMarkerColor: string;
    // (undocumented)
    pinchEpsilon: number;
    // (undocumented)
    pinchPanSpeed: number;
    // (undocumented)
    get realMouseWheelAction(): FlexibleWheelZoomType;
    // (undocumented)
    relativeMarkerSize: number;
    // (undocumented)
    sensitivity: number;
    // (undocumented)
    sensitivityDiagonalFraction: number;
    // (undocumented)
    get shouldPick(): boolean;
    // (undocumented)
    showTarget: boolean;
    // (undocumented)
    wheelDollySpeed: number;
    // (undocumented)
    zoomFraction: number;
}

// @beta (undocumented)
export enum FlexibleControlsType {
    // (undocumented)
    FirstPerson = "firstPerson",
    // (undocumented)
    Orbit = "orbit",
    // (undocumented)
    OrbitInCenter = "orbitInCenter"
}

// @beta (undocumented)
export type FlexibleControlsTypeChangeDelegate = (controlsType: FlexibleControlsType) => void;

// @beta (undocumented)
export enum FlexibleMouseActionType {
    // (undocumented)
    None = "none",
    // (undocumented)
    SetTarget = "setTarget",
    // (undocumented)
    SetTargetAndCameraDirection = "setTargetAndCameraDirection",
    // (undocumented)
    SetTargetAndCameraPosition = "setTargetAndCameraPosition"
}

// @beta
export enum FlexibleWheelZoomType {
    // (undocumented)
    Auto = "auto",
    // (undocumented)
    Center = "center",
    // (undocumented)
    PastCursor = "pastCursor",
    // (undocumented)
    ToCursor = "toCursor"
}

// @public (undocumented)
export type GeometryFilter = {
    boundingBox?: Box3;
    isBoundingBoxInModelCoordinates?: boolean;
};

// @public (undocumented)
export function getNormalizedPixelCoordinates(domElement: HTMLElement, pixelX: number, pixelY: number): THREE.Vector2;

// @public
export function getNormalizedPixelCoordinatesBySize(pixelX: number, pixelY: number, width: number, height: number): THREE.Vector2;

// @beta
export function getWheelEventDelta(event: WheelEvent): number;

// @public
export type HtmlOverlayCreateClusterDelegate = (overlayElements: {
    htmlElement: HTMLElement;
    userData: any;
}[]) => HTMLElement;

// @public
export type HtmlOverlayOptions = {
    positionUpdatedCallback?: HtmlOverlayPositionUpdatedDelegate;
    userData?: any;
};

// @public
export type HtmlOverlayPositionUpdatedDelegate = (element: HTMLElement, position2D: THREE.Vector2, position3D: THREE.Vector3, distanceToCamera: number, userData: any) => void;

// @public
export class HtmlOverlayTool extends Cognite3DViewerToolBase {
    constructor(viewer: Cognite3DViewer<DataSourceType>, options?: HtmlOverlayToolOptions);
    add(htmlElement: HTMLElement, position3D: THREE.Vector3, options?: HtmlOverlayOptions): void;
    clear(): void;
    // @override
    dispose(): void;
    get elements(): {
        element: HTMLElement;
        position3D: THREE.Vector3;
    }[];
    forceUpdate(customCamera?: THREE.PerspectiveCamera): void;
    remove(htmlElement: HTMLElement): void;
    visible(enable: boolean): void;
}

// @public
export type HtmlOverlayToolClusteringOptions = {
    mode: 'overlapInScreenSpace';
    createClusterElementCallback: HtmlOverlayCreateClusterDelegate;
};

// @public
export type HtmlOverlayToolOptions = {
    clusteringOptions?: HtmlOverlayToolClusteringOptions;
};

// @beta
export interface ICustomObject {
    beforeRender(camera: PerspectiveCamera): void;
    getBoundingBox(target: Box3): Box3;
    intersectIfCloser(intersectInput: CustomObjectIntersectInput, closestDistance: number | undefined): undefined | CustomObjectIntersection;
    get isPartOfBoundingBox(): boolean;
    get object(): Object3D;
    get shouldPick(): boolean;
    get shouldPickBoundingBox(): boolean;
    get useDepthTest(): boolean;
}

// @beta
export interface IFlexibleCameraManager extends CameraManager {
    addControlsTypeChangeListener(callback: FlexibleControlsTypeChangeDelegate): void;
    get controlsType(): FlexibleControlsType;
    set controlsType(value: FlexibleControlsType);
    onClick(event: PointerEvent): Promise<void>;
    onDoubleClick(event: PointerEvent): Promise<void>;
    onFocusChanged(haveFocus: boolean): void;
    onKey(event: KeyboardEvent, down: boolean): void;
    onPointerDown(event: PointerEvent, leftButton: boolean): Promise<void>;
    onPointerDrag(event: PointerEvent, leftButton: boolean): Promise<void>;
    onPointerUp(event: PointerEvent, leftButton: boolean): Promise<void>;
    onWheel(event: WheelEvent, delta: number): Promise<void>;
    get options(): FlexibleControlsOptions;
    removeControlsTypeChangeListener(callback: FlexibleControlsTypeChangeDelegate): void;
    rotateCameraTo(direction: Vector3, animationDuration: number): void;
}

// @public
export interface Image360<T extends DataSourceType = ClassicDataSourceType> {
    getActiveRevision(): Image360Revision<T>;
    getIconColor(): Color | 'default';
    getRevisions(): Image360Revision<T>[];
    readonly id: Image360Id<T>;
    readonly image360Visualization: Image360Visualization;
    readonly label: string | undefined;
    setIconColor(color: Color | 'default'): void;
    readonly transform: Matrix4;
}

// @beta
export enum Image360Action {
    Backward = 1,
    Enter = 2,
    Exit = 3,
    Forward = 0
}

// @public
export interface Image360Annotation<T extends DataSourceType = ClassicDataSourceType> {
    readonly annotation: T['image360AnnotationType'];
    getCenter(out?: Vector3): Vector3;
    getColor(): Color;
    getVisible(): boolean;
    setColor(color?: Color): void;
    setVisible(visible?: boolean): void;
}

// @public
export type Image360AnnotationAppearance = {
    color?: Color;
    visible?: boolean;
};

// @public
export type Image360AnnotationAssetFilter<T extends DataSourceType = ClassicDataSourceType> = {
    assetRef: Image360AnnotationInstanceReference<T>;
};

// @public
export type Image360AnnotationAssetQueryResult<T extends DataSourceType = ClassicDataSourceType> = {
    image: Image360<T>;
    revision: Image360Revision<T>;
    annotation: Image360Annotation<T>;
};

// @public
export type Image360AnnotationFilterOptions = {
    status?: 'all' | AnnotationStatus | AnnotationStatus[];
};

// @public
export type Image360AnnotationInstanceReference<T extends DataSourceType> = T extends ClassicDataSourceType ? InstanceReference<ClassicDataSourceType | DMDataSourceType> : InstanceReference<DMDataSourceType>;

// @public
export type Image360AnnotationIntersection<T extends DataSourceType = ClassicDataSourceType> = {
    type: 'image360Annotation';
    annotation: Image360Annotation<T>;
    direction: Vector3;
};

// @public
export type Image360BaseIdentifier = {
    space: string;
    image360CollectionExternalId: string;
};

// @public
export interface Image360Collection<T extends DataSourceType = ClassicDataSourceType> {
    findImageAnnotations(filter: Image360AnnotationAssetFilter<T>): Promise<Image360AnnotationAssetQueryResult<T>[]>;
    getAnnotationsInfo(source: 'all'): Promise<AssetAnnotationImage360Info<DataSourceType>[]>;
    getAnnotationsInfo(source: 'assets'): Promise<AssetAnnotationImage360Info<ClassicDataSourceType>[]>;
    getAnnotationsInfo(source: 'hybrid'): Promise<AssetHybridAnnotationImage360Info[]>;
    getAnnotationsInfo(source: 'cdm'): Promise<AssetAnnotationImage360Info<DMDataSourceType>[]>;
    getAnnotationsInfo(source: 'assets' | 'hybrid' | 'cdm' | 'all'): Promise<AssetAnnotationImage360Info<ClassicDataSourceType>[] | AssetAnnotationImage360Info<DMDataSourceType> | AssetAnnotationImage360Info<DataSourceType>[] | AssetHybridAnnotationImage360Info[]>;
    // @deprecated
    getAssetIds(): Promise<IdEither[]>;
    getDefaultAnnotationStyle(): Image360AnnotationAppearance;
    getIconsOpacity(): number;
    getIconsVisibility(): boolean;
    getImagesOpacity(): number;
    getModelTransformation(out?: Matrix4): Matrix4;
    readonly id: string;
    readonly image360Entities: Image360<T>[];
    isOccludedIconsVisible(): boolean;
    readonly label: string | undefined;
    off(event: 'image360Entered', callback: Image360EnteredDelegate<T>): void;
    // (undocumented)
    off(event: 'image360Exited', callback: Image360ExitedDelegate): void;
    on(event: 'image360Entered', callback: Image360EnteredDelegate<T>): void;
    // (undocumented)
    on(event: 'image360Exited', callback: Image360ExitedDelegate): void;
    set360IconCullingRestrictions(radius: number, pointLimit: number): void;
    setDefaultAnnotationStyle(appearance: Image360AnnotationAppearance): void;
    setIconsOpacity(opacity: number): void;
    setIconsVisibility(visible: boolean): void;
    setImagesOpacity(opacity: number): void;
    setModelTransformation(matrix: Matrix4): void;
    setOccludedIconsVisible(visible: boolean): void;
    targetRevisionDate: Date | undefined;
}

// @public
export type Image360CoreDataModelIdentifier = {
    source: 'cdm';
} & Image360BaseIdentifier;

// @public
export type Image360DataModelIdentifier = Image360BaseIdentifier & {
    source?: 'dm' | 'cdm';
};

// @public
export type Image360EnteredDelegate<T extends DataSourceType = ClassicDataSourceType> = (image360: Image360<T>, revision: Image360Revision<T>) => void;

// @public
export type Image360ExitedDelegate = () => void;

// @beta
export type Image360IconIntersection<T extends DataSourceType = DataSourceType> = {
    type: 'image360Icon';
    image360: Image360<T>;
    image360Collection: Image360Collection<T>;
    point: Vector3;
    distanceToCamera: number;
};

// @public
export type Image360IconStyle = {
    color?: Color;
};

// @public
export type Image360Id<T extends DataSourceType> = Image360RevisionId<T>;

// @public
export type Image360LegacyDataModelIdentifier = {
    source: 'dm';
} & Image360BaseIdentifier;

// @public
export interface Image360Revision<T extends DataSourceType = ClassicDataSourceType> {
    readonly date: Date | undefined;
    getAnnotations(): Promise<Image360Annotation<T>[]>;
    getPreviewThumbnailUrl(): Promise<string | undefined>;
}

// @public
export type Image360RevisionId<T extends DataSourceType> = T extends DMDataSourceType ? DMInstanceRef : string;

// @public
export interface Image360Visualization {
    opacity: number;
}

// @public
export type Image360WithCollection<T extends DataSourceType = ClassicDataSourceType> = {
    image360Collection: Image360Collection<T>;
    image360: Image360<T>;
};

// @public
export type ImageAssetLinkAnnotationInfo = Omit<AnnotationModel, 'data'> & {
    data: AnnotationsTypesImagesAssetLink;
};

// @public
export type ImageInstanceLinkAnnotationInfo = Omit<AnnotationModel, 'data'> & {
    data: AnnotationsTypesImagesInstanceLink;
};

// @public (undocumented)
export class IndexSet {
    constructor(values?: Iterable<number>);
    constructor(values?: NumericRange);
    // (undocumented)
    add(index: number): void;
    // (undocumented)
    addRange(range: NumericRange): void;
    // (undocumented)
    clear(): void;
    // (undocumented)
    clone(): IndexSet;
    // (undocumented)
    contains(index: number): boolean;
    // (undocumented)
    get count(): number;
    // (undocumented)
    differenceWith(otherSet: IndexSet): IndexSet;
    // (undocumented)
    forEachRange(visitor: (range: NumericRange) => void): void;
    // (undocumented)
    hasIntersectionWith(otherSet: IndexSet | Set<number>): boolean;
    // (undocumented)
    hasIntersectionWithMap(otherMap: Map<number, number>): boolean;
    // (undocumented)
    intersectWith(otherSet: IndexSet): IndexSet;
    // (undocumented)
    invertedRanges(): NumericRange[];
    // (undocumented)
    remove(index: number): void;
    // (undocumented)
    removeRange(range: NumericRange): void;
    // (undocumented)
    toIndexArray(): number[];
    // (undocumented)
    toPlainSet(): Set<number>;
    // (undocumented)
    toRangeArray(): NumericRange[];
    // (undocumented)
    unionWith(otherSet: IndexSet): IndexSet;
}

// @public
export type InstanceLinkable360ImageAnnotationType<T extends DataSourceType> = T extends ClassicDataSourceType ? ImageAssetLinkAnnotationInfo : T['image360AnnotationType'];

// @public
export type InstanceReference<T extends DataSourceType> = T extends ClassicDataSourceType ? IdEither : DMInstanceRef;

// @public
export type Intersection<T extends DataSourceType = ClassicDataSourceType> = CadIntersection | PointCloudIntersection<T>;

// @public
export class IntersectionNodeCollection extends CombineNodeCollectionBase {
    constructor(nodeCollections?: NodeCollection[]);
    // (undocumented)
    static readonly classToken = "IntersectionNodeCollection";
    // (undocumented)
    protected createCombinedIndexSet(): IndexSet;
    // (undocumented)
    getAreas(): AreaCollection;
    // (undocumented)
    makeDirty(): void;
    // (undocumented)
    serialize(): SerializedNodeCollection;
}

// @public
export class InvertedNodeCollection extends NodeCollection {
    constructor(model: CdfModelNodeCollectionDataProvider, innerSet: NodeCollection);
    // (undocumented)
    static readonly classToken = "InvertedNodeCollection";
    clear(): never;
    // (undocumented)
    getAreas(): AreaCollection;
    // (undocumented)
    getIndexSet(): IndexSet;
    // (undocumented)
    get isLoading(): boolean;
    // (undocumented)
    serialize(): SerializedNodeCollection;
}

// @public
export function isClassicPointCloudModel(model: CognitePointCloudModel<DataSourceType>): model is CognitePointCloudModel<ClassicDataSourceType>;

// @public
export function isClassicPointCloudVolume(pointCloudMetadata: DataSourceType['pointCloudVolumeMetadata']): pointCloudMetadata is ClassicDataSourceType['pointCloudVolumeMetadata'];

// @public
export function isDefaultCameraManager(cameraManager: CameraManager): cameraManager is DefaultCameraManager;

// @public
export function isDMPointCloudModel(model: CognitePointCloudModel<DataSourceType>): model is CognitePointCloudModel<DMDataSourceType>;

// @public
export function isDMPointCloudVolume(pointCloudMetadata: DataSourceType['pointCloudVolumeMetadata']): pointCloudMetadata is DMDataSourceType['pointCloudVolumeMetadata'];

// @beta
export function isFlexibleCameraManager(manager: CameraManager): manager is IFlexibleCameraManager;

// @public
export function isPointVisibleByPlanes(planes: Plane[], point: Vector3): boolean;

// @public (undocumented)
export interface JsonFileProvider {
    // (undocumented)
    getJsonFile(baseUrl: string, fileName: string): Promise<any>;
}

// @public
class Keyframe_2 {
    constructor(model: CogniteCadModel, date: Date);
    activate(): void;
    assignStyledNodeCollection(nodeCollection: NodeCollection, nodeAppearance: NodeAppearance): void;
    deactivate(): void;
    getKeyframeDate(): Date;
    unassignStyledNodeCollection(nodeCollection: NodeCollection): void;
}
export { Keyframe_2 as Keyframe }

// @public (undocumented)
export type Measurement = {
    readonly measurementId: number;
    readonly startPoint: Vector3;
    readonly endPoint: Vector3;
    readonly distanceInMeters: number;
};

// @public
export type MeasurementAddedDelegate = (measurement: Measurement) => void;

// @public
export type MeasurementEndedDelegate = () => void;

// @public
export type MeasurementOptions = {
    distanceToLabelCallback?: DistanceToLabelDelegate | undefined;
    lineWidth?: number;
    color?: Color;
};

// @public
export type MeasurementStartedDelegate = () => void;

// @public
export class MeasurementTool extends Cognite3DViewerToolBase {
    constructor(viewer: Cognite3DViewer<DataSourceType>, options?: MeasurementOptions);
    addMeasurement(startPoint: THREE.Vector3, endPoint: THREE.Vector3): Measurement;
    dispose(): void;
    enterMeasurementMode(): void;
    exitMeasurementMode(): void;
    getAllMeasurements(): Measurement[];
    get isInMeasurementMode(): boolean;
    // (undocumented)
    off(event: 'disposed', callback: DisposedDelegate): void;
    // (undocumented)
    off(event: 'added', callback: MeasurementAddedDelegate): void;
    // (undocumented)
    off(event: 'started', callback: MeasurementStartedDelegate): void;
    // (undocumented)
    off(event: 'ended', callback: MeasurementEndedDelegate): void;
    on(event: 'disposed', callback: DisposedDelegate): void;
    on(event: 'added', callback: MeasurementAddedDelegate): void;
    on(event: 'started', callback: MeasurementStartedDelegate): void;
    on(event: 'ended', callback: MeasurementEndedDelegate): void;
    removeAllMeasurements(): void;
    removeMeasurement(measurement: Measurement): void;
    setLineOptions(options: MeasurementOptions): void;
    setMeasurementLabelsVisible(enable: boolean): void;
    updateLineColor(measurement: Measurement, color: THREE.Color): void;
    updateLineWidth(measurement: Measurement, lineWidth: number): void;
    visible(enable: boolean): void;
}

// @public
export interface ModelDataProvider extends JsonFileProvider, BinaryFileProvider {
    getBinaryFile(baseUrl: string, fileName: string, abortSignal?: AbortSignal): Promise<ArrayBuffer>;
    getJsonFile(baseUrl: string, fileName: string): Promise<any>;
}

// @public
export interface ModelIdentifier {
    readonly revealInternalId: symbol;
    sourceModelIdentifier(): string;
}

// @public
export interface ModelMetadataProvider {
    // (undocumented)
    getModelCamera(identifier: ModelIdentifier): Promise<{
        position: THREE.Vector3;
        target: THREE.Vector3;
    } | undefined>;
    // (undocumented)
    getModelMatrix(identifier: ModelIdentifier, format: File3dFormat | string): Promise<THREE.Matrix4>;
    // (undocumented)
    getModelOutputs(modelIdentifier: ModelIdentifier): Promise<BlobOutputMetadata[]>;
    // (undocumented)
    getModelUri(identifier: ModelIdentifier, formatMetadata: BlobOutputMetadata): Promise<string>;
}

// @public (undocumented)
export type ModelState = {
    defaultNodeAppearance: SerializableNodeAppearance;
    modelId: number;
    revisionId: number;
    styledSets: {
        token: string;
        state: any;
        options?: any;
        appearance: SerializableNodeAppearance;
    }[];
};

// @public
export type NodeAppearance = {
    readonly color?: Color;
    readonly visible?: boolean;
    readonly renderInFront?: boolean;
    readonly renderGhosted?: boolean;
    readonly outlineColor?: NodeOutlineColor;
    readonly prioritizedForLoadingHint?: number;
};

// @public
export abstract class NodeCollection {
    protected constructor(classToken: string);
    // (undocumented)
    get classToken(): string;
    // (undocumented)
    abstract clear(): void;
    abstract getAreas(): AreaCollection;
    // (undocumented)
    abstract getIndexSet(): IndexSet;
    // (undocumented)
    abstract get isLoading(): boolean;
    protected notifyChanged(): void;
    // (undocumented)
    off(event: 'changed', listener: () => void): void;
    // (undocumented)
    on(event: 'changed', listener: () => void): void;
    // (undocumented)
    abstract serialize(): SerializedNodeCollection;
}

// @public (undocumented)
export type NodeCollectionSerializationContext = {
    client: CogniteClient;
    model: CdfModelNodeCollectionDataProvider;
};

// @public
export class NodeIdNodeCollection extends CdfNodeCollectionBase {
    constructor(client: CogniteClient, model: CdfModelNodeCollectionDataProvider);
    // (undocumented)
    static readonly classToken = "NodeIdNodeCollection";
    // (undocumented)
    static deserialize(descriptor: SerializedNodeCollection, context: NodeCollectionSerializationContext): Promise<NodeIdNodeCollection>;
    executeFilter(nodeIds: number[]): Promise<void>;
    // (undocumented)
    serialize(): SerializedNodeCollection;
}

// @public (undocumented)
export enum NodeOutlineColor {
    // (undocumented)
    Black = 2,
    // (undocumented)
    Blue = 4,
    // (undocumented)
    Cyan = 3,
    // (undocumented)
    Green = 5,
    // (undocumented)
    NoOutline = 0,
    // (undocumented)
    Orange = 7,
    // (undocumented)
    Red = 6,
    // (undocumented)
    White = 1
}

// @public
export interface NodesApiClient {
    determineNodeAncestorsByNodeId(modelId: CogniteInternalId, revisionId: CogniteInternalId, nodeId: CogniteInternalId, generation: number): Promise<{
        treeIndex: number;
        subtreeSize: number;
    }>;
    determineTreeIndexAndSubtreeSizesByNodeIds(modelId: CogniteInternalId, revisionId: CogniteInternalId, nodeIds: CogniteInternalId[]): Promise<{
        treeIndex: number;
        subtreeSize: number;
    }[]>;
    getBoundingBoxesByNodeIds(modelId: CogniteInternalId, revisionId: CogniteInternalId, nodeIds: CogniteInternalId[]): Promise<THREE.Box3[]>;
    mapNodeIdsToTreeIndices(modelId: CogniteInternalId, revisionId: CogniteInternalId, nodeIds: CogniteInternalId[]): Promise<number[]>;
    mapTreeIndicesToNodeIds(modelId: CogniteInternalId, revisionId: CogniteInternalId, treeIndices: number[]): Promise<CogniteInternalId[]>;
}

// @public (undocumented)
export class NumericRange {
    constructor(from: number, count: number);
    // (undocumented)
    contains(value: number): boolean;
    // (undocumented)
    readonly count: number;
    // (undocumented)
    static createFromInterval(from: number, toInclusive: number): NumericRange;
    // (undocumented)
    equal(other: NumericRange): boolean;
    // (undocumented)
    forEach(action: (value: number) => void): void;
    // (undocumented)
    readonly from: number;
    // (undocumented)
    intersectionWith(range: NumericRange): NumericRange | undefined;
    // (undocumented)
    intersects(range: NumericRange): boolean;
    // (undocumented)
    intersectsOrCoinciding(range: NumericRange): boolean;
    // (undocumented)
    isInside(range: NumericRange): boolean;
    // (undocumented)
    static isNumericRange(value: any): value is NumericRange;
    // (undocumented)
    toArray(): number[];
    // (undocumented)
    readonly toInclusive: number;
    // (undocumented)
    toString(): string;
    // (undocumented)
    union(range: NumericRange): NumericRange;
    // (undocumented)
    values(): Generator<number>;
}

// @public
export type OnLoadingCallback = (itemsLoaded: number, itemsRequested: number, itemsCulled: number) => void;

// @public
export interface Overlay3D<ContentType> {
    getColor(): Color;
    getContent(): ContentType;
    getPosition(): Vector3;
    getVisible(): boolean;
    setColor(color: Color): void;
    setVisible(visible: boolean): void;
}

// @public
export class Overlay3DCollection<MetadataType = DefaultOverlay3DContentType> extends Object3D implements OverlayCollection<MetadataType> {
    constructor(overlayInfos: OverlayInfo<MetadataType>[], options?: Overlay3DCollectionOptions);
    addOverlays(overlayInfos: OverlayInfo<MetadataType>[]): Overlay3D<MetadataType>[];
    dispose(): void;
    getOverlays(): Overlay3D<MetadataType>[];
    intersectOverlays(normalizedCoordinates: Vector2, camera: Camera): Overlay3D<MetadataType> | undefined;
    removeAllOverlays(): void;
    removeOverlays(overlays: Overlay3D<MetadataType>[]): void;
    setVisibility(visibility: boolean): void;
}

// @public
export type Overlay3DCollectionOptions = {
    overlayTexture?: Texture;
    overlayTextureMask?: Texture;
    maxPointSize?: number;
    defaultOverlayColor?: Color;
};

// @public
export class Overlay3DTool<ContentType = DefaultOverlay3DContentType> extends Cognite3DViewerToolBase {
    constructor(viewer: Cognite3DViewer, toolParameters?: Overlay3DToolParameters);
    clear(): void;
    createOverlayCollection(overlays?: OverlayInfo<ContentType>[], options?: OverlayCollectionOptions): OverlayCollection<ContentType>;
    dispose(): void;
    getCollections(): OverlayCollection<ContentType>[];
    getTextOverlayVisible(): boolean;
    getVisible(): boolean;
    // (undocumented)
    off(event: 'hover', eventHandler: OverlayEventHandler<ContentType>): void;
    // (undocumented)
    off(event: 'click', eventHandler: OverlayEventHandler<ContentType>): void;
    // (undocumented)
    off(event: 'disposed', eventHandler: DisposedDelegate): void;
    on(event: 'hover', eventHandler: OverlayEventHandler<ContentType>): void;
    // (undocumented)
    on(event: 'click', eventHandler: OverlayEventHandler<ContentType>): void;
    // (undocumented)
    on(event: 'disposed', eventHandler: DisposedDelegate): void;
    removeOverlayCollection(overlayCollection: OverlayCollection<ContentType>): void;
    setTextOverlayVisible(visible: boolean): void;
    setVisible(visible: boolean): void;
}

// @public
export type Overlay3DToolParameters = {
    maxPointSize?: number;
    defaultOverlayColor: THREE.Color;
};

// @public
export interface OverlayCollection<ContentType> {
    addOverlays(overlays: OverlayInfo<ContentType>[]): Overlay3D<ContentType>[];
    getOverlays(): Overlay3D<ContentType>[];
    removeAllOverlays(): void;
    removeOverlays(overlays: Overlay3D<ContentType>[]): void;
    setVisibility(visibility: boolean): void;
}

// @public
export type OverlayCollectionOptions = {
    defaultOverlayColor?: THREE.Color;
    overlayTexture?: THREE.Texture;
    overlayTextureMask?: THREE.Texture;
};

// @public
export type OverlayEventHandler<ContentType> = (event: {
    targetOverlay: Overlay3D<ContentType>;
    htmlTextOverlay: HTMLElement;
    mousePosition: {
        offsetX: number;
        offsetY: number;
    };
}) => void;

// @public
export type OverlayInfo<ContentType = DefaultOverlay3DContentType> = {
    position: Vector3;
    content: ContentType;
    color?: Color;
};

// @public
export type OverlayToolEvent = 'hover' | 'click' | 'disposed';

// @public
export abstract class PointCloudAnnotationVolumeCollection {
    abstract getAnnotationIds(): Iterable<number>;
    abstract get isLoading(): boolean;
    protected notifyChanged(): void;
    off(event: 'changed', listener: () => void): void;
    on(event: 'changed', listener: () => void): void;
}

// @public (undocumented)
export type PointCloudAppearance = {
    color?: Color;
    visible?: boolean;
};

// @public
export type PointCloudBudget = {
    readonly numberOfPoints: number;
};

// @public
export class PointCloudDMVolumeCollection {
    constructor(ids: Iterable<DMInstanceRef>);
    getDataModelInstanceRefs(): Iterable<DMInstanceRef>;
    get isLoading(): false;
}

// @public
export type PointCloudIntersection<T extends DataSourceType = ClassicDataSourceType> = {
    type: 'pointcloud';
    model: CognitePointCloudModel<T>;
    point: Vector3;
    pointIndex: number;
    distanceToCamera: number;
    annotationId: number;
    assetRef?: AnnotationsAssetRef;
    volumeMetadata?: T['pointCloudVolumeMetadata'];
};

// @public @deprecated
export abstract class PointCloudObjectCollection extends PointCloudAnnotationVolumeCollection {
}

// @public
export type PointCloudObjectMetadata<T extends DataSourceType = ClassicDataSourceType> = {
    boundingBox: Box3;
} & T['pointCloudVolumeMetadata'];

// @public (undocumented)
export enum PointColorType {
    // (undocumented)
    Classification = 8,
    // (undocumented)
    Depth = 2,
    // (undocumented)
    Elevation = 3,
    // (undocumented)
    Height = 3,
    // (undocumented)
    Intensity = 4,
    // (undocumented)
    LevelOfDetail = 6,
    // (undocumented)
    Lod = 6,
    // (undocumented)
    PointIndex = 7,
    // (undocumented)
    Rgb = 0
}

// @public
export type PointerEventData = {
    offsetX: number;
    offsetY: number;
    button?: number;
};

// @public
export type PointerEventDelegate = (event: PointerEventData) => void;

// @beta
export class PointerEvents {
    // (undocumented)
    get isEnabled(): boolean;
    // (undocumented)
    onClick(_event: PointerEvent): Promise<void>;
    // (undocumented)
    onDoubleClick(_event: PointerEvent): Promise<void>;
    // (undocumented)
    onHover(_event: PointerEvent): void;
    // (undocumented)
    onPointerDown(_event: PointerEvent, _leftButton: boolean): Promise<void>;
    // (undocumented)
    onPointerDrag(_event: PointerEvent, _leftButton: boolean): Promise<void>;
    // (undocumented)
    onPointerUp(_event: PointerEvent, _leftButton: boolean): Promise<void>;
}

// @beta
export class PointerEventsTarget {
    constructor(domElement: HTMLElement, events: PointerEvents);
    // (undocumented)
    addEventListeners(): void;
    // (undocumented)
    removeEventListeners(): void;
}

// @public (undocumented)
export enum PointShape {
    // (undocumented)
    Circle = 1,
    // (undocumented)
    Paraboloid = 2,
    // (undocumented)
    Square = 0
}

// @public (undocumented)
export enum PointSizeType {
    // (undocumented)
    Adaptive = 2,
    // (undocumented)
    Attenuated = 1,
    // (undocumented)
    Fixed = 0
}

// @public
export class PropertyFilterNodeCollection extends CdfNodeCollectionBase {
    constructor(client: CogniteClient, model: CdfModelNodeCollectionDataProvider, options?: PropertyFilterNodeCollectionOptions);
    // (undocumented)
    static readonly classToken = "PropertyFilterNodeCollection";
    executeFilter(filter: {
        [category: string]: {
            [key: string]: string;
        };
    }): Promise<void>;
    // (undocumented)
    serialize(): SerializedNodeCollection;
}

// @public
export type PropertyFilterNodeCollectionOptions = {
    requestPartitions?: number;
};

// @public (undocumented)
export function registerNodeCollectionType<T extends NodeCollection>(nodeCollectionTypeName: string, deserializer: (descriptor: SerializedNodeCollection, context: NodeCollectionSerializationContext) => Promise<T>): void;

// @public
export type RelativePosition = {
    corner: Corner;
    padding: THREE.Vector2;
};

// @public
export type RenderParameters = {
    renderSize: Vector2;
};

// @public
export type ResolutionOptions = {
    maxRenderResolution?: number;
    movingCameraResolutionFactor?: number;
};

// @public (undocumented)
export const REVEAL_VERSION: string;

// @public
export type SceneRenderedDelegate = (event: {
    frameNumber: number;
    renderTime: number;
    renderer: WebGLRenderer;
    camera: PerspectiveCamera;
}) => void;

// @public
export type SerializableNodeAppearance = {
    readonly color?: [number, number, number];
    readonly visible?: boolean;
    readonly renderInFront?: boolean;
    readonly renderGhosted?: boolean;
    readonly outlineColor?: NodeOutlineColor;
    readonly prioritizedForLoadingHint?: number;
};

// @public (undocumented)
export type SerializedNodeCollection = {
    token: string;
    state: any;
    options?: any;
};

// @public
export class SinglePropertyFilterNodeCollection extends CdfNodeCollectionBase {
    constructor(client: CogniteClient, model: CdfModelNodeCollectionDataProvider, options?: PropertyFilterNodeCollectionOptions);
    // (undocumented)
    static readonly classToken = "SinglePropertyNodeCollection";
    executeFilter(propertyCategory: string, propertyKey: string, propertyValues: string[]): Promise<void>;
    // (undocumented)
    serialize(): SerializedNodeCollection;
}

// @public @deprecated
export class StyledPointCloudObjectCollection extends StyledPointCloudVolumeCollection<ClassicDataSourceType> {
}

// @public
export class StyledPointCloudVolumeCollection<T extends DataSourceType> {
    constructor(
    objectCollection: T['pointCloudCollectionType'],
    style: CompletePointCloudAppearance);
    // @deprecated
    objectCollection: T['pointCloudCollectionType'];
    style: CompletePointCloudAppearance;
    get volumeCollection(): T['pointCloudCollectionType'];
}

// @public (undocumented)
export type SupportedModelTypes = 'pointcloud' | 'cad';

// @public
export type TimelineDateUpdateDelegate = (event: {
    date: Date;
    activeKeyframe: Keyframe_2 | undefined;
    startDate: Date;
    endDate: Date;
}) => void;

// @public
export class TimelineTool extends Cognite3DViewerToolBase {
    constructor(cadModel: CogniteCadModel);
    createKeyframe(date: Date): Keyframe_2;
    // (undocumented)
    dispose(): void;
    getAllKeyframes(): Keyframe_2[];
    getKeyframeByDate(date: Date): Keyframe_2 | undefined;
    pause(): void;
    play(startDate: Date, endDate: Date, totalDurationInMilliSeconds: number): void;
    removeKeyframe(keyframe: Keyframe_2): void;
    removeKeyframeByDate(date: Date): void;
    resume(): void;
    stop(): void;
    subscribe(event: 'dateChanged', listener: TimelineDateUpdateDelegate): void;
    unsubscribe(event: 'dateChanged', listener: TimelineDateUpdateDelegate): void;
}

// @public
export class TreeIndexNodeCollection extends NodeCollection {
    constructor(treeIndexSet?: IndexSet);
    constructor(treeIndices?: Iterable<number>);
    constructor(treeIndexRange?: NumericRange);
    addAreaPoints(points: THREE.Vector3[]): void;
    addAreas(areas: THREE.Box3[]): void;
    // (undocumented)
    static readonly classToken = "TreeIndexNodeCollection";
    clear(): void;
    // (undocumented)
    clearAreas(): void;
    // (undocumented)
    getAreas(): AreaCollection;
    // (undocumented)
    getIndexSet(): IndexSet;
    // (undocumented)
    get isLoading(): boolean;
    // (undocumented)
    serialize(): SerializedNodeCollection;
    // (undocumented)
    updateSet(treeIndices: IndexSet): void;
    // (undocumented)
    updateSet(treeIndices: NumericRange): void;
    // (undocumented)
    updateSet(treeIndices: Iterable<number>): void;
}

// @public
export class UnionNodeCollection extends CombineNodeCollectionBase {
    constructor(nodeCollections?: NodeCollection[]);
    // (undocumented)
    static readonly classToken = "UnionNodeCollection";
    // (undocumented)
    protected createCombinedIndexSet(): IndexSet;
    // (undocumented)
    getAreas(): AreaCollection;
    // (undocumented)
    serialize(): SerializedNodeCollection;
}

// @beta
export class Vector3Pool {
    constructor(size?: number);
    getNext(copyFrom?: Vector3): Vector3;
}

// @public (undocumented)
export type ViewerState = {
    camera?: {
        position: {
            x: number;
            y: number;
            z: number;
        };
        target: {
            x: number;
            y: number;
            z: number;
        };
    };
    models?: ModelState[];
    clippingPlanes?: ClippingPlanesState[];
};

// @public
export enum WellKnownAsprsPointClassCodes {
    BridgeDeck = 17,
    // (undocumented)
    Building = 6,
    Created = 0,
    Default = -1,
    // (undocumented)
    Ground = 2,
    HighNoise = 18,
    // (undocumented)
    HighVegetation = 5,
    IgnoredGround = 20,
    LowPoint = 7,
    // (undocumented)
    LowVegetation = 3,
    // (undocumented)
    MedVegetation = 4,
    OverheadStructure = 19,
    // (undocumented)
    Rail = 10,
    ReservedOrBridgeDeck = 12,
    ReservedOrHighPoint = 8,
    // (undocumented)
    RoadSurface = 11,
    // (undocumented)
    Snow = 21,
    TemporalExclusion = 22,
    // (undocumented)
    TransmissionTower = 15,
    // (undocumented)
    Unclassified = 1,
    // (undocumented)
    Water = 9,
    WireConductor = 14,
    WireGuard = 13,
    WireStructureConnector = 16
}

// @public
export type WellKnownUnit = 'Meters' | 'Centimeters' | 'Millimeters' | 'Micrometers' | 'Kilometers' | 'Feet' | 'Inches' | 'Yards' | 'Miles' | 'Mils' | 'Microinches';

// (No @packageDocumentation comment for this package)

```


<!-- SOURCE_END: reveal/viewer\reveal.api.md -->

================================================================================


<!-- SOURCE_START: reveal/viewer\visual-tests\README.md -->
## File: reveal/viewer\visual-tests\README.md

# Visual Regression Tests

Reveal uses visual tests as a form of regression testing and smoke tests.
The underlying stack leverages [puppeteer](https://www.npmjs.com/package/puppeteer) and [jest](https://www.npmjs.com/package/jest). 

The way it works is that we use [webpack-dev-server](https://www.npmjs.com/package/webpack-dev-server) to serve the contents of the visual tests (visual tests server) and have an instance of jest (visual tests client) play through the different visual tests using puppeteer.

To run the visual tests on your local environment, simply run `yarn run test:visual` from the `/viewer` directory.

This will initiate a two-step process of hosting the visual tests server and running the visual tests client.
In case you want to run the visual tests multiple times, you can run these processes separately such that you do not have to spin up the server on each run, which will shorten the feedback cycle. To do this, simply run `yarn run test:visual:server` and `yarn run test:visual:client` in two separate terminals. Once the visual tests complete, the test server will still keep running, and you can run the visual test client again. If you want to only test a subset of the visual tests, you can start them in watch mode with `yarn run test:visual:client --watch` and then use the standard jest terminal GUI to filter tests. Note that tests will not auto-run when you change visual tests since the watch mode is only on the test runner, so you will have to trigger a new run manually through the jest watch GUI.


## Running visual test in browser
Often it can be useful to locally develop against a visual test or simply inspect the result of visual tests.
There are currently multiple ways to do this based on your need.
The simplest way is to start the visual tests server with `yarn run test:visual:server` and navigate to the hosted location.
You will notice only a blank screen due to not specifying which test should be run.
To specify the visual test to run add the `testfixture` url parameter with the value being the file name (without extension) of the test you want to run (f.ex. `https://localhost:8080/?testfixture=Rendering.VisualTest`).
Changes made to the visual test will automatically rebuild the test server and reload the test.

It is also possible to programatically start a visual test from the blank root page (`https://localhost:8080`) with `window.render` method (f.ex. `window.render('Rendering.VisualTest')`).

For packages in Reveal you might want to create an visual test entrypoint in a `yarn start` command.
This can be done by simply specifying and passing environment variable to webpack in the command call.


An example script for a package.json would be something like this:
```
"start": "yarn ws:serve --env testFixture=Rendering.VisualTest.ts", 
```
Where the `testFixture` variable points to whatever you would like the entrypoint to be.

### Loading a specific 3D Model

Visual tests also supports loading different 3d-models than the basic primitives scene.
To load a local model in a visual test, simply specify a `modelUrl` url param that points to the 3d model you wish to use (f.ex. `https://localhost:8080/?testfixture=Rendering.VisualTest&modelUrl=[Path/to/my/3dmodel]`).

If you wish to use a 3D model hosted by [Cognite Data Fusion](https://www.cognite.com/en/product/cognite_data_fusion_industrial_dataops_platform) you first have to fill out a `/viewer/visual-tests/.cdf-env.json` config file with the environment you wish to target (tenant ID and client ID).
Start by making a copy of `/viewer/visual-tests/.cdf-env.example.json` and rename it to `.cdf-env.json`, and then fill out credentials for any projects you want to target.
The file will be git ignored.
This is an example of `.cdf-env.json` with mocked data:

```js
{
  "environments": {
    "cog-3d": {
      "tenantId": "1234-5678-1234-5678",
      "clientId": "9876-5432-9876-5432"
    }
  }
}
```

Once this is done you can specify additional URL parameters to target the specific environment (`env`) as well as the project, model, and revision ID. An example of the full URL will look something like this:

```
https://localhost:8080/?testfixture=Rendering.VisualTest&env=cog-3d&project=3d-test&cluster=greenfield&modelId=123456789&revisionId=987654321
```
Note that for Cognite developers, default values of `env`, `project` and `cluster` have been set to target the `3d-test` project, so only `modelId` and `revisionId` need to be specified when targeting that project like such:
 ```
https://localhost:8080/?testfixture=Rendering.VisualTest&modelId=123456789&revisionId=987654321
```

## Creating your own Visual Test
Reveal requires no form of registration of visual tests and simply detects a visual test based on the filename suffix similar to how normal unit tests work.
For the testing framework to recognize a visual test it must have the `.VisualTest.ts` suffix, so for example `Colors.VisualTest.ts` is a valid name.
The visual test must have a default export of a class that extends the `VisualTestFixture` interface.
Other than that there are no restrictions placed and successfully doing this will automatically register the visual test to be run using the `yarn run test:visual` command.

For convenience, there exists base classes that can be used to handle a lot of the common boilerplate code for a visual tests (model loading, instantiating common components and authentication).
Most usecases should be covered by the following abstraction levels:
- SimpleVisualTestFixture: Basic setup with a WebGLRenderer, scene, camera etc.
- StreamingVisualTestFixture: Component-level abstraction with CadMaterialManager, UpdateHandler, RenderPipeline etc.
- ViewerVisualTestFixture: API-level abstraction on top of Cognite3DViewer.

When creating new visual tests you should almost always use one of these abstractions.
If they do not cover a certain use-case or you create something that you think could be useful for other tests, consider either adding a new base VisualTestFixture or extend the current ones.




<!-- SOURCE_END: reveal/viewer\visual-tests\README.md -->

================================================================================
